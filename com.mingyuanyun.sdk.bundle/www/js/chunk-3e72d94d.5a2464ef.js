(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3e72d94d"],{"02aa":function(t,e,a){},"03a5":function(t,e,a){"use strict";a("6ac9")},"344a":function(t,e,a){"use strict";a("6c93")},"47fd":function(t,e,a){"use strict";a("02aa")},"6ac9":function(t,e,a){},"6c93":function(t,e,a){},ccbb:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"apply-detail-wrapper"},[a("app-header",{attrs:{title:"审核中"}}),a("div",{staticClass:"tip"},[t._v(" 您已成功提交申请，请等候审核人审批，审批通过后，我们将消息通知您 ")]),a("div",{staticClass:"mt10"}),a("Flow",{attrs:{list:t.list}}),t.showCancel?a("Button",{staticClass:"cancel-btn",on:{click:t.doCancel}},[t._v("撤销申请")]):t._e()],1)},o=[],i=a("d211"),n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("app-fold",{staticClass:"wg-contract-group",attrs:{title:"审批流程",hasChecked:!1}},[a("div",{staticClass:"flow-wrapper"},t._l(t.list,(function(e,s){return a("div",{key:s,staticClass:"flow-item"},[a("div",{staticClass:"item-left",class:"status-"+(t.statusMap[e.status]||"ok")+" "},[a("van-icon",{attrs:{name:"已拒绝"!=e.status?"checked":"clear"}})],1),a("div",{staticClass:"item-content"},[a("div",{staticClass:"content-info"},[a("div",{staticClass:"content-left"},[a("span",{staticClass:"item-name"},[t._v(t._s(e.name))]),a("span",{staticClass:"item-label",class:"status-"+(t.statusMap[e.status]||"ok")},[t._v(t._s(e.status))])]),a("div",{staticClass:"content-right"},[t._v(" "+t._s(e.date)+" ")])]),e.remark?a("div",{staticClass:"item-label content-remark"},[t._v(" 备注："+t._s(e.remark)+" ")]):t._e()])])})),0)])},c=[],l=a("e060"),r={props:{list:{type:Array,default:function(){return[]}}},components:{AppFold:l["a"]},data:function(){return{open:0,statusMap:{"发起":"ok","已拒绝":"reject","待审批":"pending"}}}},d=r,u=(a("03a5"),a("5d22")),p=Object(u["a"])(d,n,c,!1,null,"1efbc80b",null),h=p.exports,f=a("5047"),w=a("5e13"),v={components:{Flow:h,Button:f["a"]},data:function(){return{list:[],showCancel:!1,applyId:"",projectId:"",keywordId:""}},activated:function(){this.init()},methods:{showError:function(){this.$toast("流程不存在，请联系系统管理员"),this.$router.go(-1)},init:function(){this.list=[],this.projectId="",this.keywordId="";var t=Object(i["a"])({},this.$route.params),e=t.applyId,a=t.projectId,s=t.keywordId;e&&(a||s)?(this.applyId=e,this.showCancel=!0,this.$toast.loading({duration:0,overlay:!0,forbidClick:!0,loadingType:"spinner",message:"加载中..."}),a?(this.projectId=a,this.getProjectFlow(e,a)):s&&(this.keywordId=s,this.getContractFlow(e,s))):this.showError()},getProjectFlow:function(t,e){var a=this;Object(w["g"])({apply_id:t,project_id:e}).then((function(t){a.handleFlowData(t)})).catch((function(){return a.$toast.clear(),a.showError()}))},getContractFlow:function(t,e){var a=this;Object(w["f"])({apply_id:t,contract_keyword_id:e}).then((function(t){a.handleFlowData(t)})).catch((function(){return a.$toast.clear(),a.showError()}))},handleFlowData:function(t){if(this.$toast.clear(),console.log("data ======> ",t),Array.isArray(t)&&!t.length)return this.showError();this.list=[],this.list.push({name:t.apply_username,date:t.apply_time,status:"发起"}),this.list.push({name:t.approve_username,date:"",status:"待审批"})},doCancel:function(){var t=this;this.$toast.loading({duration:0,overlay:!0,forbidClick:!0,loadingType:"spinner",message:"撤销中..."});var e={apply_id:this.applyId};return this.projectId?e.project_id=this.projectId:this.keywordId&&(e.keyword_id=this.keywordId),Object(w["a"])(e).then((function(){t.$toast.clear(),t.$toast("撤销成功"),t.$router.go(-1)})).catch((function(e){console.error("撤销申请失败",t.applyId,e),t.$toast.clear(),t.$toast("撤销失败，请稍后重试")}))}}},m=v,y=(a("344a"),Object(u["a"])(m,s,o,!1,null,"a9c385c6",null));e["default"]=y.exports},e060:function(t,e,a){"use strict";var s,o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-fold"},[a("div",{class:{top:!0,hasChecked:t.hasChecked,"van-hairline--bottom":t.showTitleLine},on:{click:t.toggle}},[a("span",{staticClass:"title"},[t._v(t._s(t.title))]),a("van-icon",{attrs:{name:t.isFold?"arrow-up":"arrow-down"}})],1),a("div",{ref:"fold-content",class:{"fold-content":!0,isFold:t.isFold}},[a("div",[t._t("default")],2)])])},i=[],n=(a("1e6a"),a("65ba"),a("28f8")),c=a("58e6"),l=a("80fe"),r=a("f661"),d={name:"AppFold",components:(s={},Object(n["a"])(s,c["a"].name,c["a"]),Object(n["a"])(s,l["a"].name,l["a"]),Object(n["a"])(s,r["a"].name,r["a"]),s),props:{showTitleLine:{type:Boolean,default:!1},title:{type:String,default:"--"},checked:{type:[Number,String,Boolean],default:""},hasChecked:{type:Boolean,default:!1},checkboxUseVmodel:{type:Boolean,default:!1},defaultFold:{type:Boolean,default:!1}},data:function(){return{isFold:this.defaultFold||!1,observer:null}},methods:{setFold:function(t){this.isFold=t},toggle:function(){var t=this;this.countHeight(),window.setTimeout((function(){t.isFold=!t.isFold}),0),window.setTimeout((function(){var e=t.$refs["fold-content"];e.style.height="auto"}),310),this.$emit("click",!this.isFold)},countHeight:function(){var t=this.$refs["fold-content"],e=t.childNodes[0];t.style.height=e.offsetHeight+"px"}}},u=d,p=(a("47fd"),a("5d22")),h=Object(p["a"])(u,o,i,!1,null,"41f0537d",null);e["a"]=h.exports}}]);