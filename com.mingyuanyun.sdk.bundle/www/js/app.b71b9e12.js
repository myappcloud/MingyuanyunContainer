(function(e){function t(t){for(var o,r,i=t[0],s=t[1],u=t[2],d=0,l=[];d<i.length;d++)r=i[d],Object.prototype.hasOwnProperty.call(a,r)&&a[r]&&l.push(a[r][0]),a[r]=0;for(o in s)Object.prototype.hasOwnProperty.call(s,o)&&(e[o]=s[o]);p&&p(t);while(l.length)l.shift()();return c.push.apply(c,u||[]),n()}function n(){for(var e,t=0;t<c.length;t++){for(var n=c[t],o=!0,r=1;r<n.length;r++){var i=n[r];0!==a[i]&&(o=!1)}o&&(c.splice(t--,1),e=s(s.s=n[0]))}return e}var o={},r={app:0},a={app:0},c=[];function i(e){return s.p+"js/"+({}[e]||e)+"."+{"chunk-05a2d4d5":"db77b96c","chunk-19db1f44":"2ccd0af4","chunk-20aca89a":"9ac942d8","chunk-21d6187a":"647481c1","chunk-25adf8a2":"8ccb5581","chunk-2af3d721":"481eaa96","chunk-38009904":"919f6900","chunk-747b2fd5":"34030bd9","chunk-2fd05cec":"4d40c3b6","chunk-344f0271":"fb593e49","chunk-34c62f1b":"ca6cce2d","chunk-3e72d94d":"3628436f","chunk-643716da":"06255929","chunk-64b7eaba":"d82fd12a","chunk-6ff8fcae":"71c05251","chunk-71422b43":"c3f55b35","chunk-7783fb4c":"757d8e5c","chunk-7f34e88a":"f50c751a","chunk-800d937c":"b353bbbd","chunk-a2754fb0":"57854054","chunk-aa27dcea":"0c6c3c04","chunk-c04793a4":"358e817c","chunk-e444e4f6":"2ae16643","chunk-e784831a":"a5a2661f"}[e]+".js"}function s(t){if(o[t])return o[t].exports;var n=o[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.e=function(e){var t=[],n={"chunk-05a2d4d5":1,"chunk-19db1f44":1,"chunk-20aca89a":1,"chunk-21d6187a":1,"chunk-25adf8a2":1,"chunk-38009904":1,"chunk-747b2fd5":1,"chunk-2fd05cec":1,"chunk-344f0271":1,"chunk-34c62f1b":1,"chunk-3e72d94d":1,"chunk-643716da":1,"chunk-64b7eaba":1,"chunk-6ff8fcae":1,"chunk-71422b43":1,"chunk-7783fb4c":1,"chunk-7f34e88a":1,"chunk-800d937c":1,"chunk-a2754fb0":1,"chunk-aa27dcea":1,"chunk-c04793a4":1,"chunk-e444e4f6":1,"chunk-e784831a":1};r[e]?t.push(r[e]):0!==r[e]&&n[e]&&t.push(r[e]=new Promise((function(t,n){for(var o="css/"+({}[e]||e)+"."+{"chunk-05a2d4d5":"876d25b3","chunk-19db1f44":"2829f70a","chunk-20aca89a":"f07d7bc8","chunk-21d6187a":"d8695d10","chunk-25adf8a2":"9db030a8","chunk-2af3d721":"31d6cfe0","chunk-38009904":"43912121","chunk-747b2fd5":"79adad62","chunk-2fd05cec":"806c884b","chunk-344f0271":"4cc3a247","chunk-34c62f1b":"54f14273","chunk-3e72d94d":"42041ab2","chunk-643716da":"da32e23c","chunk-64b7eaba":"935c193c","chunk-6ff8fcae":"eb5a565e","chunk-71422b43":"77d8dd99","chunk-7783fb4c":"bb9b08c7","chunk-7f34e88a":"d5f114f8","chunk-800d937c":"3d210944","chunk-a2754fb0":"ced0d036","chunk-aa27dcea":"d62b3d7e","chunk-c04793a4":"8d2f3725","chunk-e444e4f6":"1573dd95","chunk-e784831a":"b9a457c5"}[e]+".css",a=s.p+o,c=document.getElementsByTagName("link"),i=0;i<c.length;i++){var u=c[i],d=u.getAttribute("data-href")||u.getAttribute("href");if("stylesheet"===u.rel&&(d===o||d===a))return t()}var l=document.getElementsByTagName("style");for(i=0;i<l.length;i++){u=l[i],d=u.getAttribute("data-href");if(d===o||d===a)return t()}var p=document.createElement("link");p.rel="stylesheet",p.type="text/css",p.onload=t,p.onerror=function(t){var o=t&&t.target&&t.target.src||a,c=new Error("Loading CSS chunk "+e+" failed.\n("+o+")");c.code="CSS_CHUNK_LOAD_FAILED",c.request=o,delete r[e],p.parentNode.removeChild(p),n(c)},p.href=a;var f=document.getElementsByTagName("head")[0];f.appendChild(p)})).then((function(){r[e]=0})));var o=a[e];if(0!==o)if(o)t.push(o[2]);else{var c=new Promise((function(t,n){o=a[e]=[t,n]}));t.push(o[2]=c);var u,d=document.createElement("script");d.charset="utf-8",d.timeout=120,s.nc&&d.setAttribute("nonce",s.nc),d.src=i(e);var l=new Error;u=function(t){d.onerror=d.onload=null,clearTimeout(p);var n=a[e];if(0!==n){if(n){var o=t&&("load"===t.type?"missing":t.type),r=t&&t.target&&t.target.src;l.message="Loading chunk "+e+" failed.\n("+o+": "+r+")",l.name="ChunkLoadError",l.type=o,l.request=r,n[1](l)}a[e]=void 0}};var p=setTimeout((function(){u({type:"timeout",target:d})}),12e4);d.onerror=d.onload=u,document.head.appendChild(d)}return Promise.all(t)},s.m=e,s.c=o,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)s.d(n,o,function(t){return e[t]}.bind(null,o));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="",s.oe=function(e){throw console.error(e),e};var u=window["webpackJsonp"]=window["webpackJsonp"]||[],d=u.push.bind(u);u.push=t,u=u.slice();for(var l=0;l<u.length;l++)t(u[l]);var p=d;c.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("35fc")},"07a3":function(e,t,n){e.exports=n.p+"img/icon-empty.795b8cef.png"},"08e0":function(e,t,n){},"0ae3":function(e,t,n){"use strict";n("402f");var o,r=n("d211"),a=n("dfac"),c=n.n(a),i=n("82b4"),s=n("bc58"),u=n.n(s),d=function(){return o?Promise.resolve(o):c.a.ready().then((function(){return new Promise((function(e,t){window.MUtils.getAppVersion((function(n){n?(o=n,console.warn("appversion:",n),e(n)):(console.error("getAppVersion: version为空"),t("获取app版本失败"))}),(function(e){console.error("getAppVersion:",e),t("获取app版本失败")}))}))}))},l=function(){var e,t,n=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return n?u.a.getObject(i["a"].VERSION):d().then((function(n){try{e=u.a.getObject(i["a"].VERSION)}catch(c){e={}}e&&n===e.appVersion&&e.webVersion&&(t=e.webVersion),t=t||"00";var o=u.a.getObject(i["a"].VERSION),a=Object(r["a"])(Object(r["a"])({},o),{},{appVersion:n,webVersion:t,fullVersion:n+t});return u.a.set(i["a"].VERSION,a),a}))};t["a"]={getAppVersion:d,getAppFullVersion:l}},"0c7b":function(e,t,n){"use strict";n("3d11")},"0d9f":function(e,t,n){"use strict";n("402f"),n("0bd5"),n("836b"),n("5a4c"),n("9b42");var o=/[\u4E00-\u9FA5\uF900-\uFA2D]/g;function r(e){if(!e)return 0;if(e.length<8)return 1;var t=0;return/\d/.test(e)&&t++,/[a-z]/.test(e)&&t++,/[A-Z]/.test(e)&&t++,/[^a-zA-Z0-9]/.test(e)&&t++,t>3?3:t}t["a"]={isPhoneNum:function(e){return/^1\d{10}$/.test(e)},isEmail:function(e){return/\w@\w*\.\w/.test(e)},isNum:function(e){return!isNaN(e)},isUrl:function(e){return!!e.match(/(((^https?:(?:\/\/)?)(?:[-;:&=\+\$,\w]+@)?[A-Za-z0-9.-]+|(?:www.|[-;:&=\+\$,\w]+@)[A-Za-z0-9.-]+)((?:\/[\+~%\/.\w-_]*)?\??(?:[-\+=&;%@.\w_]*)#?(?:[\w]*))?)$/g)},isArray:function(e){return Array.isArray(e)},isObject:function(e){return"[object Object]"===Object.prototype.toString.call(e)},isFunction:function(e){return"function"===typeof e},hasValue:function(e,t){return null!=e&&"undefined"!=typeof e[t]&&null!=e[t]},checkPwd:function(e){o.test(e)&&(e=Utils.toCDB(e.replace(o,"").replace(/\s+/g,"")));var t=r(e);return{level:t,password:e}}}},"10c8":function(e,t,n){"use strict";n("445a"),n("72b3"),n("a543"),n("402f"),n("2db5"),n("6ab7");var o=n("b23b"),r=n("d211"),a=n("cc43"),c=n.n(a),i=n("1cfa"),s=n.n(i),u=n("1f03"),d=n.n(u),l=n("dfac"),p=n.n(l),f=n("0ae3"),m=n("6a2c"),h=n("eb32"),g=["access_token","unified_token"];function v(e,t,n,o){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"get",c=d.a.getUserContext(),i=c.token,u=c.tenantCode||window.TENANT_CONFIG.TENANT_CODE;e+=(~e.indexOf("?")?"&":"?")+"o=".concat(u,"&app_version=").concat(o.appVersion,"&platform=").concat(o.appPlatform,"&deviceId=").concat(o.deviceId),!1!==t.token&&(e+="&accessToken=".concat(i));var l=Object(r["a"])({url:e,method:a},t);return g.forEach((function(e){n[e]&&(n[e]=i)})),"get"===a.toLocaleLowerCase()?l.params=n:l.data=s.a.stringify(n),console.log(l,"ajax config"),l}function _(e){if(10021===e.errcode||3002===e.errcode||"0000"===e.success)return!0;var t=e.message||e.msg||"";return!!t&&("获取登录用户信息失败"===t||!(!~t.indexOf("过期")&&!~t.indexOf("失效")))}function b(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];function n(){return t?m["a"].refreshToken().then((function(){return console.log("wrapPromiseWithAutoReLogin: reAutoLogin OK"),b(e,!1)})).catch((function(e){return console.error(e),h["a"].logout(),Promise.reject(e)})):(h["a"].logout(),Promise.reject("登录超时，请重试"))}return e().then((function(e){var o=e.data;if(t){if(_(o))return n()}else if(o.errcode>0)return 10023===o.errcode&&h["a"].logout("检测到您的账号在其他设备登录，如果这不是您的操作请重新登录，并联系管理员！"),Promise.reject(o.message);return Promise.resolve(o)}))}t["a"]=function(e){var t=e.url,n=e.method,r=void 0===n?"get":n,a=e.data,i=void 0===a?{}:a,s=Object(o["a"])(e,["url","method","data"]);return Promise.all([f["a"].getAppFullVersion(),Promise.resolve(p.a.getDeviceInfo())]).then((function(e){return console.log("results ====> ",e),{appVersion:e[0].fullVersion,appPlatform:e[1].platform,deviceId:e[1].uuid}})).then((function(e){if(s.noReLogin){var n=v(t,s,i,e,r);return c.a.ajax(n).then((function(e){var t=e.data;return t.errcode>0?Promise.reject(t):Promise.resolve(t)}))}return b((function(){var n=v(t,s,i,e,r);return c.a.ajax(n)}),s.retry)}))}},"11d2":function(e,t,n){"use strict";t["a"]={SSO_APPROVE_STATUS:{unauth:0,waiting:1,pass:2,reject:3},SSO_APPROVE_STATUS_TEXT:["未认证","待审批","审批通过","已拒绝"]}},1229:function(e,t,n){"use strict";n("beef")},1873:function(e,t,n){n("6540"),n("fae2");var o=n("9b77"),r={gcxt:{code:"gcxt",port:"9980",name:"成本协同",iconfont:"/src/assets/gcxt-fonts/iconfont.css",git:"git@git.mysre.cn:gcxt/gcxtapp.git",branch:"master",entry:"application/gcxt",static:["public/static"],style:"\n      html.gcxt{font-size:20px}\n      .gcxt #single-spa-application\\:gcxt {position: absolute;top: 0;left: 0;right:0;bottom:0;}\n    ",init:function(e){if(window.__module_entry_gcxt__&&window.__module_entry_gcxt__.superAppAfterLogin)return window.__module_entry_gcxt__.superAppAfterLogin(e).then((function(){console.log("工程协同初始化完成！！！")})).catch((function(e){console.log("工程协同初始化错误：",e)}))}},zjapp:{code:"zjapp",port:"9981",name:"工程建造",git:"git@git.mysre.cn:zj/app.git",branch:"feature-pmc-1210",entry:"application/zjapp",static:["public/sql","public/static"],style:"\n      .super-mount-div {display:none; position:absolute; top: 0; left:0; bottom:0; right:0}\n      .super-app-dom .super-mount-div, .zjapp .super-mount-div {display:block;}\n    ",init:function(e){if(window.__module_entry_zjapp__&&window.__module_entry_zjapp__.superAppAfterLogin){var t=n("9e7d").default,r=n("a593").default;return console.log("注册质检选择项目插件",window.__module_entry_zjapp__.projectSelectComponent),window.__module_entry_zjapp__.superAppAfterLogin(o({login_status:1},e)).then((function(){console.log("质检初始化完成！！！")})).then((function(){return r.use(window.__module_entry_zjapp__.projectSelectComponent),t.commit("app/PROJECT_SELECT",!0),window.__module_entry_zjapp__.doDownloadPorject()})).then((function(){if(window.pmcEventMsgCatch&&window.pmcEventMsgCatch.open){var e=n("34a8").doEvent;e(window.pmcEventMsgCatch.open)}})).catch((function(e){console.log("质检初始化项目失败：",e)}))}}}};e.exports=r},1930:function(e,t,n){},"1df7":function(e,t,n){"use strict";t["a"]={zjapp:["MobileCheckQuality"],gcxt:"MobileEngineeringCollaboration",zhkf:["MobileCheckRoom","CustomerService"],main:"ManagementCenter"}},"200c":function(e,t,n){"use strict";n("6c74")},2805:function(e,t,n){"use strict";n("445a"),n("cb3c"),n("72b3"),n("a543"),n("cca2"),n("fae2"),n("402f"),n("2db5"),n("270f"),n("6ab7");var o=n("c614"),r=n("a593"),a=n("1f03"),c=n("82b4"),i=n("1df7"),s=n("4820"),u=n("4104"),d=n("418c"),l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=[];return e&&n.push(e),t&&n.push(t),n.join("_")},p=function(e,t,n){return n.topModules.forEach((function(n){if(!n.product&&n.type&&(n.isShow=!0),n.product===e){var o=l(n.menuCode,n.functionCode);n.isShow=!0,n.noCheck||~t.indexOf(o)||(n.isShow=!1)}})),n.modules.forEach((function(o,r){if(!o.product||o.product===e){o.functions.forEach((function(n){if(!n.product&&n.type&&(n.isShow=!0),o.product||n.product==e){n.isShow=!0;var r=l(n.menuCode,n.functionCode);n.noCheck||~t.indexOf(r)||(n.isShow=!1)}}));var a=d["b"].findWhere(o.functions,{isShow:!0});a||(o.default?(o.default.isShow=!0,n.modules[r].functions.push(o.default)):n.modules[r].isShow=!1)}})),n};t["a"]={scanQR:function(){return o["a"].scanQRCode("请将二维码放入框内",!0,(function(){r["default"].prototype.$toast("抱歉，无法扫描")})).then((function(e){window["__module_entry_gcxt__"].superAppQrScan(e)})).catch((function(e){console.error(e),r["default"].prototype.$toast(e||"扫描失败",3e3)}))},getHomePageConfig:function(){return Object(a["getIsLogged"])()?s["a"].getPageConfig(c["a"].WORKBENCH_PAGE).then((function(e){var t=[];return Object.keys(i["a"]).forEach((function(n){t.push(function(t,n){if(Array.isArray(t)){var o=[];return t.forEach((function(e){o.push(Object(u["a"])(e))})),Promise.all(o).then((function(t){d["b"].isEmpty(t[0])&&d["b"].isEmpty(t[1])||(e=p(n,t[0].concat(t[1]),e))})).catch((function(e){console.error(t+" : getUserPermissions error",e)}))}return Object(u["a"])(t).then((function(t){d["b"].isEmpty(t)||(e=p(n,t,e))})).catch((function(e){console.error(t+" : getUserPermissions error",e)}))}(i["a"][n],n))})),Promise.all(t).then((function(){var t={};return t.topModules=e.topModules.filter((function(e){return e.isShow})),t.modules=e.modules.filter((function(e){return!!d["b"].findWhere(e.functions,{isShow:!0})})),t.modules.forEach((function(e){var t=e.functions.filter((function(e){return e.isShow}));e.functions=t})),Promise.resolve(t)})).catch((function(e){return console.error("getUserPermissions error",e),Promise.resolve({})}))})):Promise.reject("用户未登录")}}},2947:function(e,t,n){"use strict";n("9b07")},"2b28":function(e,t,n){"use strict";n("08e0")},"2f7f":function(e,t,n){"use strict";n("9a24")},"2fd9":function(e,t){window.GLOBAL_ENV={APP_ENV:"test",PRODUCTS:[],APP_API_URL:{ZJ:"https://appzj-test.myyscm.com",GCXT:"https://gcxt-test.myfuwu.com.cn",ZHKF:"https://engineer-kit-test.myyscm.com"},APP_CENTER_API:"http://app-center-test.mysre.cn/api",APP_TOOL_API:"https://app-tools.myyscm.com/api",SSO_CENTER_URL:"https://ssocenter-test.myyscm.com",SSO_CENTER_DEFAULT_API:"https://app-test.myyscm.com",SSO_API:"https://sso-center-test.myyscm.com",ONLINE_HEPLER:{host:"https://sol.fdcyun.com/web/login?",list:[{product:"gcxt",name:"工程协同",appCode:"ydgcxt",key:"ac6dd099006ab9e0bbf4c64b0b9a8043"}]}}},"34a8":function(e,t,n){"use strict";n.r(t),n.d(t,"doEvent",(function(){return g})),n.d(t,"openWebview",(function(){return v})),n.d(t,"closeWebview",(function(){return _}));n("1d7a"),n("0bd5"),n("9b42"),n("6a61");var o=n("2e91"),r=n("cc5d"),a=n("c325"),c=n("eb32"),i=n("1f03"),s=n.n(i);window.pmcEventMsgCatch={};var u=!0,d=function(){window.pmcEventMsgCatch={},l(),window.MSdkAssistant.addListener((function(e){console.log("接收到插件主动反馈信息:",e),g(e||{})})),r["a"].beforeEach((function(e,t,n){e&&("workbench"===e.name||"user"===e.name)&&t&&"login"!==t.name&&_(),n()}))},l=function(){window.MSdkAssistant.getUserInfo&&window.MSdkAssistant.getUserInfo((function(e){console.log("获取招商用户信息 =======>>>>>>",e),window.pmcEventMsgCatch.login={event:"login",data:{}}}))},p=function(){return!!s.a.getIsLogged()||(r["a"].replace({name:"login"}),v(),!1)},f=function(e){return console.log("do Single login",e),c["a"].loginByCode("15000000000","6604","cjap")},m=function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,n,o=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=o.length>0&&void 0!==o[0]?o[0]:{product:""},n=t.additionalInfo||{},e.prev=2,!n.product||"main"!==n.product){e.next=6;break}return r["a"].push(n.router),e.abrupt("return",!1);case 6:if(!(u&&window.__module_entry_zjapp__&&window.__module_entry_zjapp__.isFirstTime)){e.next=10;break}return e.next=9,window.__module_entry_zjapp__.isFirstTime();case 9:u=e.sent;case 10:if("zjapp"!==n.product||!u){e.next=12;break}return e.abrupt("return",!1);case 12:a["a"].goto(n),e.next=18;break;case 15:e.prev=15,e.t0=e["catch"](2),console.error("open error",e.t0);case 18:case"end":return e.stop()}}),e,null,[[2,15]])})));return function(){return e.apply(this,arguments)}}(),h=function(e){console.log("change zjapp project",e);var t=e.id||"",n=e.name||"";t&&window.__module_entry_zjapp__&&"function"===typeof window.__module_entry_zjapp__.setCurrentProject&&window.__module_entry_zjapp__.setCurrentProject(t,n)},g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{event:""};switch(console.log("=======>>>",e),e.event&&(window.pmcEventMsgCatch[e.event]=e),e.event){case"login":return console.log("do login"),f(e.data);case"logout":console.log("do logout"),c["a"].logout(),window.pmcEventMsgCatch={};break;case"open":console.log("do open"),p()&&(m(e.data),v());break;case"changeProject":console.log("change project"),h(e.data);break;default:break}},v=function(){console.log("todo open webview"),window.MSdkAssistant.show()},_=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};console.log("todo close webview"),window.MSdkAssistant.hide(e)};t["default"]=function(){d()}},"35fc":function(e,t,n){"use strict";n.r(t);n("139e"),n("fae9"),n("3ff7"),n("d6dc");var o=n("a593"),r=(n("85a3"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"custom-theme",class:{ios:e.isIOS,iosx:e.isIOSX},attrs:{id:"super-app"}},[n("keep-alive",[n("router-view")],1),n("div",{staticClass:"debugger",on:{click:e.onDebugger}})],1)}),a=[],c=n("d211"),i=n("cf6b"),s={data:function(){return{debuggerTimer:null,debuggerClickNum:0}},computed:Object(c["a"])({},Object(i["c"])({isIOSX:function(e){return e.app.global.isIOSX},isIOS:function(e){return e.app.global.isIOS}})),methods:{onDebugger:function(){var e=this;this.debuggerTimer?(this.debuggerClickNum++,10==this.debuggerClickNum&&(this.debuggerClickNum=0,this.$router.push("/debugger"))):(this.debuggerClickNum=0,this.debuggerTimer=setTimeout((function(){e.debuggerTimer=null}),3e3))}}},u=s,d=(n("920a"),n("5d22")),l=Object(d["a"])(u,r,a,!1,null,null,null),p=l.exports,f=n("cc5d"),m=n("9e7d"),h=n("4420"),g=(n("a543"),n("1d7a"),n("402f"),n("0bd5"),n("2db5"),n("9b42"),n("332c"),n("6ab7"),n("6a61"),n("2e91")),v=n("a65d"),_=n("1f03"),b=n("dfac"),w=n.n(b),C=n("0ae3"),k=n("eb32"),y=n("6a2c"),A=n("cc43"),P=n.n(A),j=n("2e70"),T=n.n(j),O=n("c614"),E=n("b2ec"),N=n("371d"),x=n("bc58"),S=n.n(x),L=n("4415"),I=n("34a8"),U=["todo","workbench","user","login"],B=!1,D=function(){var e=Object(v["isIOS"])()?Object(v["isIOSX"])()?88:64:44;B=Object(v["isIOS"])();var t=document.documentElement.clientHeight,n=document.documentElement.clientWidth;m["default"].commit("app/APP",{isIOS:Object(v["isIOS"])(),isIOSX:Object(v["isIOSX"])(),headerHeight:e,footerHeight:Object(v["isIOSX"])()?70:50,clientHeight:t,clientWidth:n,contentHeight:t-e})},R=function(){var e=window.cordova;e&&e.plugins&&e.plugins.Keyboard&&(e.plugins.Keyboard.hideKeyboardAccessoryBar(!0),e.plugins.Keyboard.disableScroll(!0)),window.KeyboardExt&&B&&document.body.addEventListener("focus",(function(){window.KeyboardExt.hide()})),B?window.MUtils.unableMoveUpAfterKeyboardAppear&&window.MUtils.unableMoveUpAfterKeyboardAppear(!1):window.MUtils.setKeyboardModel&&window.MUtils.setKeyboardModel(1),window.addEventListener("keyboardWillShow",(function(){if(B){var e=document.activeElement;e.scrollIntoView({behavior:"smooth",block:"center"})}}))},z=function(){document.addEventListener("backbutton",(function(){var e;try{e=window.cordova.plugins.Keyboard}catch(n){e={}}if(e.isVisible)e.close();else if(f["a"].currentRoute.meta.isNav&&U.indexOf(f["a"].currentRoute.name)>-1)Object(I["closeWebview"])();else{var t=window.__YL__.backFuncs[window.location.hash.replace(/#\/([\w|-]+)\/.*/,"$1")];t?t():f["a"].go(-1)}}))},F=function(){return Promise.all([C["a"].getAppFullVersion(),Promise.resolve(w.a.getDeviceInfo())]).then((function(e){P.a.setHeader({prefix:"supper_app_",version:e[0].fullVersion,deviceId:e[1].uuid,Accept:"application/json, text/plain, */*","Accept-Language":"zh-cn"})}))};P.a.init();var V,M=function(){var e=Object(g["a"])(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,F();case 2:return e.next=4,w.a.ready();case 4:if(Object(I["default"])(),D(),L["a"].init(window.TENANT_CONFIG.APP_YY_CODE,window.TENANT_CONFIG.APP_PRODUCT_CODE),window.MicCore&&window.MicCore.sentryLogSwitch&&window.MicCore.sentryLogSwitch(!0,(function(e){console.log("关闭 sentry 成功",e)}),(function(e){console.log("关闭 sentry 失败",e)})),R(),O["a"].setDeviceOrientation(),w.a.pause((function(){m["default"].commit("app/APP",{onPause:!0}),console.log("应用切换到后台")})),console.log("==== getIsLogged() ====",Object(_["getIsLogged"])()),!Object(_["getIsLogged"])()||window.location.hash.startsWith("#/login")){e.next=33;break}if(console.log("======= 初始化开始 ======"),t=Object(_["getUserContext"])(),t&&t.id&&t.refreshToken){e.next=19;break}k["a"].logout(),e.next=33;break;case 19:if(e.prev=19,n=N["a"].getDefaultTenant(),n.tenantCode==t.tenantCode){e.next=23;break}return e.abrupt("return",k["a"].logout());case 23:return S.a.init(t.tenantCode,t.id),T.a.init(t.tenantCode,t.id),m["default"].commit("app/INIT_STATUS",!0),e.next=28,y["a"].refreshToken().then(Object(g["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,k["a"].initAfterLogin(t);case 2:m["default"].dispatch("tenantList/init");case 3:case"end":return e.stop()}}),e)}))));case 28:e.next=33;break;case 30:e.prev=30,e.t0=e["catch"](19),k["a"].logout();case 33:w.a.resume((function(){m["default"].commit("app/APP",{onPause:!1}),E["a"].doUpdate()})),z();case 35:case"end":return e.stop()}}),e,null,[[19,30]])})));return function(){return e.apply(this,arguments)}}(),G={init:M},H=n("f32a"),K=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{directives:[{name:"show",rawName:"v-show",value:e.show,expression:"show"}],staticClass:"shake-popup"},[o("div",{staticClass:"shake-popup-box"},[o("div",{staticClass:"top-border"},[o("a",{staticClass:"shake-popup-close",attrs:{href:"javascript:;"},on:{click:e.close}})]),o("div",{staticClass:"shake-popup-content"},[o("div",{staticClass:"shake-title"},[e._v("反馈问题")]),o("div",{staticClass:"content-textarea"},[o("text-box",{ref:"textbox",attrs:{remark:e.model.remark,placeholder:"请录入您发现的产品错误或产品优化建议"},on:{input:e.updateRemark}}),o("p",[e._v("*请不要在此反馈检查结果")])],1),o("section",{staticClass:"image-list"},[e._l(e.model.photoList,(function(t,n){return o("div",{key:n,staticClass:"img-wrapper",class:{ml20:n>0}},[o("img",{attrs:{src:t.img_view,alt:"photo"},on:{click:function(t){return e.showLargeImg(n)}}}),o("i",{staticClass:"delete-btn",on:{click:function(t){return e.removeImg(n)}}})])})),o("div",{directives:[{name:"show",rawName:"v-show",value:e.model.photoList.length<3,expression:"model.photoList.length < 3"}],staticClass:"append-btn",class:{ml20:e.model.photoList.length>0},on:{click:e.addImage}},[o("img",{attrs:{src:n("8d2a"),alt:"add"}})])],2),o("div",{staticClass:"type-list"},[e._v(" 问题类型： "),o("div",{staticClass:"type-item",class:{active:"productError"===e.model.currType},on:{click:function(t){return e.changeType("productError")}}},[e._v(" 产品错误 ")]),o("div",{staticClass:"type-item",class:{active:"optimumSuggest"===e.model.currType},on:{click:function(t){return e.changeType("optimumSuggest")}}},[e._v(" 优化建议 ")])]),o("p",{directives:[{name:"show",rawName:"v-show",value:"productError"===e.model.currType,expression:"model.currType === 'productError'"}],staticClass:"upload-log"},[o("check-box",{attrs:{name:"上传日志，以便帮您排查问题",checked:e.model.uploadLog},on:{select:e.changeUploadStatus}})],1),o("div",{staticClass:"btn-list"},[o("div",{staticClass:"cancel",on:{click:e.close}},[e._v("取消")]),o("div",{staticClass:"submit",on:{click:e.submit}},[e._v("提交")])]),o("p",{staticClass:"tip"},[e._v("可在“我－设置”中关闭摇一摇反馈问题")])])]),o("van-action-sheet",{attrs:{actions:e.actions,"cancel-text":"取消"},on:{select:e.selectAction,cancel:e.cancelSelect},model:{value:e.showImageAction,callback:function(t){e.showImageAction=t},expression:"showImageAction"}})],1)},W=[],$=n("6414"),J=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"checkbox",on:{click:function(t){return e.select()}}},[n("i",{directives:[{name:"show",rawName:"v-show",value:!e.checked,expression:"!checked"}],staticClass:"super-app-iconfont super-app-icon-duoxuan-weixuanzhuangtai unchecked",style:{fontSize:e.iconSize+"px"}}),n("i",{directives:[{name:"show",rawName:"v-show",value:e.checked,expression:"checked"}],staticClass:"super-app-iconfont super-app-icon-shenhetongguo checked",style:{fontSize:e.iconSize+"px"}}),e._v(" "+e._s(e.name)+" "),e._t("icon")],2)},Y=[],Q=(n("d0bf"),{props:{checked:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},name:{type:String,default:""},iconSize:{type:[Number,String],default:20}},methods:{select:function(){this.disabled||this.$emit("select")}}}),q=Q,X=(n("57bd"),Object(d["a"])(q,J,Y,!1,null,"459e7bad",null)),Z=X.exports,ee=n("c8da"),te={components:{textBox:$["a"],checkBox:Z},props:{show:{type:Boolean,default:!1,required:!0},hideFunc:{type:Function,default:function(){},required:!0}},data:function(){return{model:{},showImageAction:!1,actions:[]}},created:function(){console.log("created shake popup"),this.model=ee["a"].model,this.actions=ee["a"].actions,console.log("this.photoList",this.model.photoList)},methods:{updateRemark:function(e){this.$set(this.model,"remark",e)},changeUploadStatus:function(){this.$set(this.model,"uploadLog",!this.model.uploadLog)},changeType:function(e){this.model.currType=e},close:function(){this.$refs.textbox.clear(),"function"===typeof this.hideFunc&&this.hideFunc()},addImage:function(){this.showImageAction=!0},removeImg:function(e){ee["a"].removeImg(e)},showLargeImg:function(e){ee["a"].showLargeImg(e)},selectAction:function(e){var t=this;return ee["a"].takePhoto(e.index).then((function(){t.showImageAction=!1})).catch((function(e){t.$toast(e||"获取照片失败")}))},cancelSelect:function(){this.showImageAction=!1},submit:function(){var e=this;ee["a"].submit().then((function(t){e.$toast.clear(),e.$toast(t||"提交成功",1e3),e.model.remark="",e.model.photoList=[],e.model.uploadLog=!0,e.model.currType="optimumSuggest",e.close()})).catch((function(t){e.$toast.clear(),e.$toast(t||"提交失败")}))}}},ne=te,oe=(n("2947"),Object(d["a"])(ne,K,W,!1,null,"59c0836c",null)),re=oe.exports,ae=function(e){var t=e.extend(re),n={onShow:!1,show:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};ee["a"].init(e),V.show=!0,this.onShow=!0},hide:function(){V.close(),V.show=!1,this.onShow=!1}};V||(V=new t({el:document.createElement("div"),propsData:{show:!1,hideFunc:function(){V.show=!1,n.onShow=!1}}}),document.body.appendChild(V.$el)),e.$shakePopup||(e.$shakePopup=n)},ce={install:function(e){console.log("init shake popup"),ae(e)}},ie=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("van-nav-bar",{staticClass:"app-header",attrs:{title:e.title,"left-text":e.leftText,"right-text":e.rightText,"left-arrow":e.leftArrow,fixed:e.fixed,border:e.border,"z-index":e.zIndex},on:{"click-left":e.leftClick,"click-right":e.rightClick}},[n("template",{slot:"right"},[e._t("right")],2),n("template",{slot:"title"},[e._t("title")],2),n("template",{slot:"left"},[e._t("left")],2)],2)},se=[],ue=n("a26b"),de={name:"AppHeader",comments:{NavBar:ue["a"]},props:{title:{type:String,default:""},leftText:{type:String,default:""},rightText:{type:String,default:""},leftArrow:{type:Boolean,default:!0},fixed:{type:Boolean,default:!1},border:{type:Boolean,default:!1},useClickLeft:{type:Boolean,default:!1},zIndex:{type:Number,default:1}},methods:{leftClick:function(){if(console.log("left click"),this.useClickLeft)return this.$emit("click-left");this.$router.go(-1)},handleLeftClick:function(){},rightClick:function(e){this.$emit("click-right",e)}}},le=de,pe=(n("7247"),Object(d["a"])(le,ie,se,!1,null,"f29c2afe",null)),fe=pe.exports,me=function(e){e.component("app-header",fe)},he={install:function(e){me(e)}},ge=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"app-container"},[e._t("default")],2)},ve=[],_e={name:"AppContainer"},be=_e,we=(n("dba9"),Object(d["a"])(be,ge,ve,!1,null,"78d372f8",null)),Ce=we.exports,ke={install:function(e){e.component("app-container",Ce)}},ye=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{directives:[{name:"show",rawName:"v-show",value:e.showEmpty,expression:"showEmpty"}],staticClass:"empty"},[e.loadingPage?e._e():n("img",{staticClass:"error-img",attrs:{src:e.emptyImgSrc,alt:""}}),e.loadingPage?n("div",{staticClass:"loading"}):e._e(),e._v(" "+e._s(e.emptyMsg||"")+" ")])},Ae=[],Pe={name:"EmptyPage",props:{showEmpty:Boolean,emptyImgSrc:{type:String,default:n("07a3")},emptyMsg:String,loadingPage:{type:Boolean,default:!1}}},je=Pe,Te=(n("b9af"),Object(d["a"])(je,ye,Ae,!1,null,"00e53806",null)),Oe=Te.exports,Ee=function(e){e.component("empty-page",Oe)},Ne={install:function(e){Ee(e)}},xe=n("a141"),Se=n.n(xe);n("8e40");o["default"].use(H["a"]).use(ce).use(Ne).use(he).use(ke).use(Se.a,f["a"]),o["default"].config.productionTip=!1,h["a"].registerModule(),G.init(),new o["default"]({router:f["a"],store:m["default"],render:function(e){return e(p)}}).$mount("#super-app")},"371d":function(e,t,n){"use strict";n("72b3"),n("d0bf"),n("402f"),n("270f");var o=n("1f03"),r=n.n(o),a=n("bc58"),c=n.n(a),i=n("82b4"),s=n("d1d2"),u=n.n(s),d=n("c079"),l=n("468b"),p=n("6a2c"),f=n("eb32"),m=n("11d2"),h=n("9e7d"),g=n("cc5d"),v=!1,_=function(e){var t=[],n=[];return e.forEach((function(e){e.approveStatus=Number(e.approveStatus),e.approveStatus!==m["a"].SSO_APPROVE_STATUS.pass?n.push(e):t.push(e)})),r.a.updateUser({tenantList:t,verifyTenantList:n}),{tenantList:t,verifyTenantList:n}},b={getTenantList:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(!e){var t=r.a.getUserContext("tenantList")||[];if(t.length)return Promise.resolve({tenantList:t})}return u.a.getHasNetwork().then((function(e){return e?Object(d["f"])().then((function(e){return console.log("relateTenantList ====> ",e),_(e.tenantList)})).catch((function(){return Promise.resolve({tenantList:r.a.getUserContext("tenantList")||[],verifyTenantList:r.a.getUserContext("verifyTenantList")||[]})})):{tenantList:r.a.getUserContext("tenantList")||[],verifyTenantList:r.a.getUserContext("verifyTenantList")||[]}}))},setDefaultTenant:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";c.a.set(i["a"].DEFAULT_TENANT,{tenantCode:e,tenantName:t}),window.TENANT_CONFIG.TENANT_CODE=e,window.TENANT_CONFIG.TENANT_NAME=t},getDefaultTenant:function(){if(window.TENANT_CONFIG.TENANT_CODE)return{tenantCode:window.TENANT_CONFIG.TENANT_CODE,tenantName:window.TENANT_CONFIG.TENANT_NAME};var e=c.a.getObject(i["a"].DEFAULT_TENANT);return e.tenantCode?(window.TENANT_CONFIG.TENANT_CODE=e.tenantCode,window.TENANT_CONFIG.TENANT_NAME=e.tenantName,e):{}},setTenantList:function(e){var t=_(e),n=t.tenantList,o=t.verifyTenantList;if(console.log("tenantList ====> ",n),!Array.isArray(n)||!n.length){if(o.length){if(1===o.length){var a=o[0].tenantCode;throw p["a"].ticket2token(a,!1).then((function(e){var t="/auth/auditing";l["a"].openPage(t,{tenantCode:a,token:e.accessToken,tenantName:o[0].tenantName})})),new Error("未审核通过")}throw g["a"].push({path:"/verify-tenant-list"}),new Error("未审核通过")}var c="/register/success";throw l["a"].openPage(c),new Error("未绑定建设单位")}return r.a.updateUser({tenantList:n}),1===n.length?(this.setDefaultTenant(n[0].tenantCode,n[0].tenantName),n[0].tenantCode):""},clearDefaultTenant:function(){window.GLOBAL_ENV.ONLY_TENANT||(c.a.remove(i["a"].DEFAULT_TENANT),window.TENANT_CONFIG.TENANT_CODE="",window.TENANT_CONFIG.TENANT_NAME="")},changeTenant:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(!e||e===window.TENANT_CONFIG.TENANT_CODE)return Promise.resolve();if(v)return Promise.reject("正在切换租户");var n=window.TENANT_CONFIG.TENANT_CODE;function o(e){return p["a"].token2token(e).then((function(){b.setDefaultTenant(e,t);var n=r.a.getUserContext();return h["default"].dispatch("app/reset"),f["a"].initAfterLogin(n,!1).catch((function(e){return"退出登录"===e?Promise.resolve():Promise.reject()}))})).then((function(){return v=!1,Promise.resolve()})).catch((function(){return v=!1,o(n).then((function(){return Promise.reject("切换租户失败")}))}))}return v=!0,o(e)}};t["a"]=b},"3d11":function(e,t,n){},"3e25":function(e,t,n){"use strict";n.d(t,"d",(function(){return u})),n.d(t,"c",(function(){return d})),n.d(t,"e",(function(){return l})),n.d(t,"b",(function(){return p})),n.d(t,"a",(function(){return f}));n("445a"),n("402f");var o=n("d211"),r=n("10c8"),a=n("1f03"),c=window.GLOBAL_ENV.SSO_API,i=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"get",o=Object(a["getToken"])();return{method:n,url:"".concat(c).concat(e),data:Object.assign(t,{accessToken:o})}},s=function(e){if(!e||e.errcode)return Promise.reject(e.message||e.errmsg||"");var t=e.data;return t?Promise.resolve(t):Promise.resolve(e)},u=function(e){return Object(r["a"])(i("/v2/user/change-password",e,"POST")).then((function(e){return s(e)}))},d=function(){return Object(r["a"])(Object(o["a"])(Object(o["a"])({},i("/v2/user/logout")),{},{retry:!1})).catch((function(e){return console.error(e),Promise.resolve()}))},l=function(e){return Object(r["a"])(i("/v1/user/upload-avatar",e,"post")).then((function(e){return s(e)})).catch((function(e){return Promise.reject(e)}))},p=function(){return Object(r["a"])(i("/v2/user/info")).then((function(e){return s(e)}))},f=function(e){return Object(r["a"])(i("/v1/device/bind",e,"post")).then((function(e){return s(e)})).catch((function(e){return console.error("绑定设备失败",e),Promise.resolve()}))}},"3ea9":function(e,t,n){"use strict";n.d(t,"a",(function(){return ne}));n("402f"),n("0bd5"),n("9b42");var o,r,a,c=n("dfac"),i=n.n(c),s=(n("79a8"),n("d1d2")),u=n.n(s),d=n("7620"),l=n("0ae3"),p=n("cc43"),f=n.n(p),m=n("bc58"),h=n.n(m),g=n("82b4"),v=(n("cca2"),n("a593")),_=n("aa77"),b=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.show?n("div",{staticClass:"process"},[n("div",{staticClass:"process-modal"}),n("div",{staticClass:"process-inner"},[n("span",[e._v(e._s(e.title))]),n("div",{staticClass:"process-bar"},[n("div",{staticClass:"process-bar-bg"},[n("div",{staticClass:"process-bar-line",style:{width:e.width}})])]),e.percent?n("div",{staticClass:"process-text"},[e._v(" "+e._s(e.width)+" ")]):e._e()])]):e._e()},w=[],C=(n("d0bf"),{name:"ProcessBar",props:{title:{type:String,default:""},show:{type:Boolean,default:!1},process:{type:Number,default:0},percent:{type:Boolean,default:!1}},data:function(){return{}},computed:{width:function(){return"".concat(this.process>100?100:this.process,"%")}},watch:{process:function(e){100===e&&this.finish()}},methods:{close:function(){},finish:function(){this.show=!1}}}),k=C,y=(n("0c7b"),n("5d22")),A=Object(y["a"])(k,b,w,!1,null,"0dd0d281",null),P=A.exports,j=function(e){var t=e.extend(P);o||(o=new t({el:document.createElement("div"),propsData:{text:""}}),document.body.appendChild(o.$el));var n={show:function(e){o.show=!0,o.title=e},progress:function(e){o.process=e},hide:function(){o.show=!1}};e.$comComps?e.$comComps.progressBar=n:e.$comComps={progressBar:n},e.mixin({created:function(){this.$comComps=e.$comComps}})},T={install:function(e){j(e)}},O=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{directives:[{name:"show",rawName:"v-show",value:e.show,expression:"show"}],staticClass:"popup-progress-wrapper"},[n("div",{staticClass:"popup-progress-inner"},[n("span",[e._v(e._s(e.title))]),n("div",{staticClass:"popup-progress-process"},[n("div",{staticClass:"popup-progress-line"},[n("div",{staticClass:"popup-progress-complete",style:{width:e.width}})]),e.percent?n("span",[e._v(e._s(e.width)+"%")]):e._e()])])])},E=[],N={props:{title:{type:String,default:""},show:{type:Boolean,default:!1},process:{type:Number,default:0},percent:{type:Boolean,default:!1}},data:function(){return{}},computed:{width:function(){return"".concat(this.process>100?100:this.process,"%")}},watch:{process:function(e){100===e&&this.finish()}},methods:{finish:function(){this.show=!1}}},x=N,S=(n("fe04"),Object(y["a"])(x,O,E,!1,null,null,null)),L=S.exports,I=function(e){var t=e.extend(L);r||(r=new t({el:document.createElement("div"),propsData:{text:""}}),document.body.appendChild(r.$el));var n={show:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];r.show=!0,r.title=e,r.percent=t},progress:function(e){r.process=e},hide:function(){r.show=!1}};e.$comComps?e.$comComps.popupProgress=n:e.$comComps={popupProgress:n},e.mixin({created:function(){this.$comComps=e.$comComps}})},U={install:function(e){I(e)}},B=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.show?n("div",{staticClass:"hot-alert"},[n("div",{staticClass:"hot-alert-modal"}),n("div",{staticClass:"hot-alert-inner"},[n("div",{staticClass:"hot-alert-body"},[n("p",{staticClass:"hot-alert-title"},[e._v(e._s(e.config.title))]),n("div",{staticClass:"content",domProps:{innerHTML:e._s(e.config.content)}})]),n("div",{staticClass:"hot-alert-btns"},[n("a",{directives:[{name:"show",rawName:"v-show",value:e.config.showCancel,expression:"config.showCancel"}],staticClass:"cancel hot-alert-text",on:{click:function(t){return e.config.cancel()}}},[e._v(" "+e._s(e.config.cancelText)+" ")]),n("a",{staticClass:"ok hot-alert-text",on:{click:function(t){return e.config.ok()}}},[e._v(" "+e._s(e.config.okText)+" ")])])])]):e._e()},D=[],R={name:"HotUpdateAlert",props:{config:{type:Object},show:{type:Boolean,default:!1}},data:function(){return{}},methods:{hide:function(){this.show=!1}}},z=R,F=(n("adc9"),Object(y["a"])(z,B,D,!1,null,"310ebb83",null)),V=F.exports,M=function(e){var t=e.extend(V);a||(a=new t({el:document.createElement("div"),propsData:{text:""}}),document.body.appendChild(a.$el));var n={show:function(e){var t=e.title,n=void 0===t?"":t,o=e.content,r=void 0===o?"example":o,c=e.okText,i=void 0===c?"更新":c,s=e.cancelText,u=void 0===s?"忽略":s,d=e.showCancel,l=void 0===d||d,p=e.cancel,f=e.ok,m=void 0===f?function(){}:f;a.config={title:n,content:r,okText:i,cancelText:u,showCancel:l,cancel:function(){a.show=!1,p&&p()},ok:m},a.show=!0},hide:function(){a.show=!1}};e.$comComps?e.$comComps.hotUpdateAlert=n:e.$comComps={hotUpdateAlert:n},e.mixin({created:function(){this.$comComps=e.$comComps}})},G={install:function(e){M(e)}};v["default"].$comComps||v["default"].use(T).use(G).use(U);var H=function(e){window.MUtils&&window.MUtils.openUrlInBrowser&&window.MUtils.openUrlInBrowser(e)},K=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",o=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"下次更新",a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,c=_["a"].defer();return v["default"].$comComps.hotUpdateAlert.show({title:e,content:"<p>".concat(t.join("</p><p>"),"</p>"),okText:"立即更新",cancelText:r,showCancel:o,ok:function(){n&&H(n),o&&v["default"].$comComps.hotUpdateAlert.hide(),c.reject("正在更新大版本")},cancel:function(){"function"===typeof a&&a(),c.resolve()}}),c.promise},W={start:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"正在更新版本";v["default"].$comComps.progressBar.show(e),v["default"].$comComps.progressBar.progress(0)},update:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5;v["default"].$comComps.progressBar.progress(e)},finish:function(){v["default"].$comComps.progressBar.progress(100),v["default"].$comComps.progressBar.hide()},hide:v["default"].$comComps.progressBar.hide},$=(v["default"].$comComps.popupProgress.hide,"web_version_update_info"),J=function(e){if(!e)throw new Error("保存APP版本失败，参数webVersion为空");return l["a"].getAppVersion().then((function(t){h.a.set(g["a"].VERSION,{appVersion:t,webVersion:e},h.a.level.global)}))},Y=function(){console.log("重新打开首页"),window.location.href=window.location.href.replace(/#.*$/,"")+"?v="+(new Date).getTime()},Q=function(e){return e&&e.versionCode?e.downloadUrl?(W.start("正在更新版本"),l["a"].getAppFullVersion().then((function(t){return e.versionCode>t.webVersion?(console.log("开始执行热更新"),Object(d["doUpdate"])(e.downloadUrl,(function(e){W.update(e)})).then((function(){return J(e.versionCode),1==e.popup&&h.a.saveString($,e.update_info,h.a.level.global),console.log("执行热更新完成"),Y(!0),Promise.resolve()})).catch((function(e){return Promise.reject(e)})).finally((function(){W.finish()}))):Promise.resolve()}))):Promise.reject("downloadUrl为空"):(console.log("无web内容更新"),Promise.resolve())},q={checkAppUpdate:function(e){return u.a.getHasNetwork().then((function(e){return e?Promise.resolve(i.a.getDeviceInfo()):Promise.reject("无网络")})).then((function(t){var n=t&&t.platform;return n?l["a"].getAppFullVersion().then((function(t){return f.a.ajax({url:"".concat(window.GLOBAL_ENV.APP_TOOL_API,"/update/app-version/get-version"),params:{platform:n,appCode:e,appVersion:t.fullVersion},method:"get"}).then((function(e){var n=e.data;return 0===n.errCode&&n.data?{updatedVersion:n.data,localVersion:t}:Promise.resolve("版本信息失败")}))})):Promise.resolve("获取设备信息失败")})).then((function(e){var t=e.updatedVersion,n=e.localVersion,o=n.appVersion;return t.hotUpdateVersion&&t.hotUpdateVersion.versionCode>n.webVersion?Promise.resolve({type:"WebVersion",reason:"先执行热更新",updated:t}):t.versionCode&&o!=t.versionCode?o>t.versionCode?Promise.reject("当前为更新的版本"):Promise.resolve({type:"AppVersion",updatedVersion:t}):Promise.reject("当前为最新版本")}))},showUpgradePopup:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"下次提醒",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.updateInfo=e.updateInfo||"发现新版本";var o=e.updateInfoStr&&e.updateInfoStr.split("|"),r=!1;return"compulsive"!==e.updateType&&(r=!0),o=o||[],K(e.versionName,o,e.downloadUrl,r,t,n)},doUpdate:function(e){return Q(e)}},X=n("1f03"),Z=n.n(X),ee=n("cc5d"),te=!1;function ne(){var e=Z.a.getUserContext();return"yltest"===e.tenantCode&&"18148515223"===e.phone&&"prod"===window.GLOBAL_ENV.APP_ENV?Promise.resolve():u.a.getHasNetwork().then((function(e){return e?te?Promise.reject("正在检测版本更新"):Z.a.getIsLogged()?(te=!0,i.a.ready().then((function(){return q.checkAppUpdate(window.TENANT_CONFIG.appCode||Object({NODE_ENV:"production",VUE_APP_ENV:"test",BASE_URL:""}).VUE_APP_CODE).then((function(e){return v["default"].prototype.$toast.clear(),te=!1,"AppVersion"===e.type?q.showUpgradePopup(e.updatedVersion).then((function(){if(e.updated&&e.updated.hotUpdateVersion)return q.doUpdate(e.updated.hotUpdateVersion)})):q.doUpdate(e.updated.hotUpdateVersion)})).catch((function(e){return te=!1,Promise.resolve(e)}))}))):(ee["a"].replace("/login"),Promise.reject("用户未登录")):Promise.resolve()})).catch((function(e){return console.error(e),Promise.resolve()}))}},4104:function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));n("445a"),n("72b3"),n("402f"),n("270f");var o=n("10c8"),r=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return Object(o["a"])({method:"POST",url:"".concat(window.GLOBAL_ENV.SSO_CENTER_DEFAULT_API,"/m/PermissionApply/permission-auth/get-user-permission"),data:{appCode:e}}).then((function(e){return 0!=e.errcode?Promise.reject("请求失败"):Promise.resolve(e.data)})).catch((function(e){return Promise.reject(e)}))},a=n("418c"),c=n("bc58"),i=n.n(c),s=n("d1d2"),u=n.n(s),d=n("82b4"),l=d["a"].USER_PERMISSIONS,p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=i.a.getObject(l,i.a.level.user);return console.log("getPermissionsCache ======> ",t),e?t[e]||[]:t},f=function(e){return console.log("getUserPermissions======> ",e),u.a.getHasNetwork().then((function(t){return t?r(e).then((function(t){if(!e)return t;var n=[];console.log("data ==> ",t),a["b"].each(t[e],(function(e,t){e.length&&(n.push("".concat(t)),e.forEach((function(e){t===e?n.push(e):n.push("".concat(t,"_").concat(e))})))}));var o=i.a.getObject(l,i.a.level.user)||{};return o[e]=n,i.a.set(l,o,i.a.level.user),Promise.resolve(n)})).catch((function(t){return console.log("check quality getUserPermissions error",t),Promise.resolve(p(e))})):Promise.resolve(p(e))}))}},4415:function(e,t,n){"use strict";var o=n("24eb"),r=n.n(o);t["a"]=function(){var e=null,t=null,n=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o="";try{o=JSON.stringify(n)}catch(r){console.log("转换json失败",r),o=""}e&&e(t,{data:o})};return{init:function(n,o){t=r()({app_code:n,product_code:o}),window.__myWebLogTracker__?e=window.__myWebLogTracker__.report:t&&t.report&&(e=t.report)},registTracker:function(e,n){var o=t||window.__myWebLogTracker__||null;o&&o.registUser({tenant_code:e,user_account:n})},report:n}}()},4420:function(e,t,n){"use strict";n("445a"),n("c726"),n("a543"),n("6540"),n("1d7a"),n("fae2"),n("402f"),n("b784"),n("2db5"),n("332c"),n("6ab7"),n("6a61");var o=n("2e91"),r=n("28f8"),a=n("bb3a"),c=(n("0bd5"),n("9b42"),n("cc5d")),i=n("4415"),s=n("1873"),u=n.n(s),d=Object.keys(u.a),l=function(e,t,n){var o=window.location.hash.replace(/^#\/(\w+)\/.*/,"$1");if(!o||!d.includes(o))try{var r=(new Error).stack;o=r.replace(/[\s\r\n]/g).replace(/.*window.__module_entry_(\w+)__.*/,"$1")}catch(a){console.error(a)}o=d.includes(o)?o:"main",i["a"].report("".concat(o,"-").concat(e,": ").concat(t),n)};function p(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"info";if("function"===typeof p[n])return p[n](e,t);throw new Error("无效的方法")}p.log=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";"prod"!=window.GLOBAL_ENV&&console.log(e,t),l("log",e,t)},p.info=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";console.info(e,t),l("info",e,t)},p.debug=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";console.debug(e,t),l("debug",e,t)},p.warn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";console.warn(e,t),l("warn",e,t)},p.error=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";console.error(e,t),l("error",e,t)},p.table=function(){var e;"prod"!=window.GLOBAL_ENV&&(e=console).table.apply(e,arguments)},p.prototype=p;var f=p,m=n("0ae3"),h=n("6a2c"),g=n("78bf");window.$log=f,window.__YL_SUPER_APP__=!0,window.__YL__={ENV:window.GLOBAL_ENV.APP_ENV,Log:f,router:{home:function(){c["a"].replace({name:"workbench"})},todo:function(){c["a"].replace({name:"todo"})},me:function(){c["a"].replace({name:"user"})}},backFuncs:{},logoutFuncs:{},registerBackbutton:function(e,t){this.backFuncs[e]=t},magicWindowFuncs:{},registerMagicWindowCB:function(e,t){this.magicWindowFuncs[e]=t},registerLogout:function(e,t){this.logoutFuncs[e]=t},getVersion:function(){return m["a"].getAppFullVersion().then((function(e){return{version:e.appVersion,webVersion:e.webVersion,fullVersion:e.fullVersion}}))},refreshToken:function(){return h["a"].refreshToken},workbenchRefresh:function(){return g["a"].workbench}};var v,_=n("7f43"),b=n.n(_),w=[],C=function(e){return b.a.get(e).then((function(e){return Promise.resolve(e.data)})).catch((function(e){return Promise.reject(e)}))},k=function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(-1===w.indexOf(t)){e.next=2;break}return e.abrupt("return",Promise.resolve());case 2:return e.abrupt("return",new Promise((function(e,n){var o=document.createElement("script");w.push(t),o.src=t,o.onload=e,o.onerror=n;var r=document.getElementsByTagName("script")[0];r.parentNode.insertBefore(o,r)})));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),y=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"app";return new Promise(function(){var n=Object(o["a"])(regeneratorRuntime.mark((function n(o,r){var a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return a=/^\d+$/.test(e)?"//".concat(window.location.hostname,":").concat(e,"/manifest.json"):"".concat(e,"/manifest.json"),n.prev=1,n.delegateYield(regeneratorRuntime.mark((function e(){var n,r,c,i,s,u;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,C(a);case 2:n=e.sent,r=n.entrypoints,c=n.publicPath,i=r[t].assets,console.log("获取manifest ===> ",n),console.log("assets ====> ",i),console.log("publicPath ====> ",c),s=regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,k(c+i[t]).then((function(){t===i.length-1&&o()}));case 2:case"end":return e.stop()}}),e)})),u=0;case 10:if(!(u<i.length)){e.next=15;break}return e.delegateYield(s(u),"t0",12);case 12:u++,e.next=10;break;case 15:case"end":return e.stop()}}),e)}))(),"t0",3);case 3:n.next=9;break;case 5:n.prev=5,n.t1=n["catch"](1),r(n.t1),console.error(n.t1);case 9:case"end":return n.stop()}}),n,null,[[1,5]])})));return function(e,t){return n.apply(this,arguments)}}())},A=y,P=n("9e7d"),j=function(e){for(var t=Math.floor(e/1e3),n=e-1e3*t,o=["秒","分","小时"],r="",a=0;t&&a<o.length;++a){if(a===o.length-1){r=t+o[a]+r;break}var c=t%60;c>0&&(r=c+o[a]+r),t=Math.floor(t/60)}return n>0&&(r=r+n+"毫秒"),r},T=n("bc58"),O=n.n(T),E=n("82b4"),N=n("1f03"),x=n.n(N),S=n("b38c");function L(e){var t=[],n="";Object.keys(u.a).map((function(o){if(n+=u.a[o].style,!e||e===o||~e.indexOf(o)){window[o]={},P["default"].commit("app/LOADING_STATUS",Object(r["a"])({},o,!0));var a=x.a.getUserContext("tenantCode");S["a"][o]?S["a"][o].includes(a)&&I(t,o):I(t,o)}}));var o=document.createElement("style"),a=document.getElementsByTagName("head")[0];return o.type="text/css",o.innerHTML=n,a.appendChild(o),console.log("开始加载文件插件模块"),v=(new Date).getTime(),Promise.all(t).then((function(){P["default"].commit("app/CLEAR_LOADING_STATUS"),O.a.remove(E["a"].IS_WEB_VERSION_UPDATE),window.StatusBar&&window.StatusBar.styleDefault()}))}function I(e,t){e.push(A(u.a[t].entry).then((function(){var e=j((new Date).getTime()-v);console.log("".concat(u.a[t].name,"文件加载完成，用时：").concat(e)),window[t]={};var n=!!O.a.getString(E["a"].IS_WEB_VERSION_UPDATE);return u.a[t].init&&u.a[t].init({isHotUpdate:n})})).then((function(){P["default"].commit("app/LOADING_STATUS",Object(r["a"])({},t,!1))})).catch((function(e){return P["default"].commit("app/LOADING_STATUS",Object(r["a"])({},t,!1)),console.error("插件模块".concat(t,"加载失败："),e),Promise.resolve()})))}function U(){var e=document.getElementsByTagName("html")[0];a["a"]((function(e){console.log("singleSpa error ",e),console.log("singleSpa error ",e.appOrParcelName),console.log("err.appOrParcelName",a["b"](e.appOrParcelName))})),Object.keys(u.a).map((function(t){var n=document.createElement("div");n.setAttribute("id","single-spa-application:".concat(t)),document.body.appendChild(n),a["c"](t,Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(window["__module_entry_".concat(t,"__")]){e.next=3;break}return e.next=3,L(t);case 3:return e.abrupt("return",window["__module_entry_".concat(t,"__")]);case 4:case"end":return e.stop()}}),e)}))),(function(n){return console.log("路由改变：",n),e.classList.add("super-app-dom"),n.hash.startsWith("#/".concat(t))?(e.classList.add(t),window.setTimeout((function(){e.classList.remove("super-app-dom")}),10),!0):(window.StatusBar&&window.StatusBar.styleDefault(),e.classList.remove(t),!1)}))})),a["d"]()}t["a"]={loader:L,registerModule:U}},"468b":function(e,t,n){"use strict";n("a543");var o=n("c614"),r=n("1f03"),a=n.n(r),c=n("1cfa"),i=n.n(c),s=n("eb32"),u=n("d1d2"),d=n.n(u),l=n("a593");function p(e){if("logout"===e)return s["a"].logout()}t["a"]={openPage:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return d.a.getHasNetwork().then((function(n){if(n){var r=window.device&&window.device.uuid||"",c=a.a.getUserContext("ticket")||"",s="",u="";a.a.getIsLogged()&&(s=a.a.getToken(),u=a.a.getUserContext("tenantCode")||window.TENANT_CONFIG.TENANT_CODE),t=Object.assign({},{__channel__:"cordova",deviceId:r,token:s,ticket:c,tenantCode:u,appid:window.TENANT_CONFIG.APP_ID,appkey:window.TENANT_CONFIG.APP_KEY,v:+new Date},t),~e.indexOf(window.GLOBAL_ENV.SSO_CENTER_URL)||(e=window.GLOBAL_ENV.SSO_CENTER_URL+e),e+=(~e.indexOf("?")?"&":"?")+i.a.stringify(t),o["a"].openUrl(e,"",{navBar:null},null,p)}else l["default"].prototype.$toast("当前网络不可用")}))}}},4820:function(e,t,n){"use strict";n("72b3"),n("a543"),n("fae2"),n("402f"),n("270f");var o={topModules:[{name:"项目地图",menuCode:"AppUse-FUNCAUTH",functionCode:"homepage",product:"zjapp",router:"/zjapp/project-map-index",code:"projectMap"},{name:"视频监控",menuCode:"AppUse-FUNCAUTH",functionCode:"video-monitor",product:"zjapp",router:"/zjapp/monitor",code:"monitor"},{name:"形象进度",menuCode:"AppUse-FUNCAUTH",functionCode:"xingxiangjindu",product:"zjapp",router:"/zjapp/image-process-index",code:"image-process"},{name:"报表中心",menuCode:"AppUse-REPORT",functionCode:"report",product:"zjapp",router:"/zjapp/super-report-index",code:"report"}],modules:[{name:"工程建造",functions:[{name:"进度管理",menuCode:"AppUse-FUNCAUTH",functionCode:"jinduguanli",product:"zjapp",icon:"progress",router:"/zjapp/schedule-plan",code:"schedule-plan"},{name:"现场检查",menuCode:"AppUse-FUNCAUTH",functionCode:"xianchangjiancha",product:"zjapp",router:"/zjapp/check-index",code:"check"},{name:"质量检查",menuCode:"AppUse-FUNCAUTH",functionCode:"check-quality",product:"zjapp",icon:"zljc",router:"/zjapp/checkQuality-index",code:"check-quality"},{name:"安全检查",menuCode:"AppUse-FUNCAUTH",functionCode:"check-safety",product:"zjapp",icon:"aqjc",router:"/zjapp/checkSafety-index",code:"check-safety"},{name:"安全晨会",code:"meeting",menuCode:"AppUse-FUNCAUTH",functionCode:"safety-party",product:"zjapp",router:"/zjapp/meeting-index"},{name:"桩基验收",menuCode:"AppUse-FUNCAUTH",functionCode:"pile-accept",product:"zjapp",router:"/zjapp/pile-accept-index",code:"pile-accept"},{name:"样板管理",menuCode:"AppUse-FUNCAUTH",functionCode:"yangbanguanli",product:"zjapp",router:"/zjapp/templet-plan",code:"templet-plan"},{name:"材料验收",menuCode:"AppUse-FUNCAUTH",functionCode:"cailiaoyanshou",product:"zjapp",router:"/zjapp/material-index",code:"material"},{name:"材料溯源",menuCode:"AppUse-FUNCAUTH",functionCode:"material-traceability",icon:"traceability",router:"/zjapp/traceability",code:"traceability"},{name:"材料盘点",menuCode:"AppUse-FUNCAUTH",functionCode:"material-inventory",product:"zjapp",router:"/zjapp/inventory",code:"inventory"},{name:"工序验收",menuCode:"AppUse-FUNCAUTH",functionCode:"gongxuyanshou",product:"zjapp",router:"/zjapp/process-accept-index",code:"process-accept"},{name:"工序验收V2",menuCode:"AppUse-FUNCAUTH",functionCode:"gongxuyanshou-v2",icon:"process-accept-v2",product:"zjapp",router:"/zjapp/process-accept-v2",code:"process-accept-v2"},{name:"工序移交",menuCode:"AppUse-FUNCAUTH",functionCode:"gongxuyijiao",product:"zjapp",router:"/zjapp/process-new-index",code:"process"},{name:"闭水试验",menuCode:"AppUse-FUNCAUTH",functionCode:"bishuishiyan",product:"zjapp",router:"/zjapp/water-percolation",code:"closed-water-test"},{name:"淋水试验",menuCode:"AppUse-FUNCAUTH",functionCode:"water-pouring-test",product:"zjapp",router:"/zjapp/water-pouring-test",code:"water-pouring-test"},{name:"实测实量",menuCode:"AppUse-FUNCAUTH",functionCode:"shiceshiliang",product:"zjapp",router:"/zjapp/measure-index",code:"measure-v3"},{name:"专项巡检",menuCode:"AppUse-FUNCAUTH",functionCode:"zhuanxiangxunjian",product:"zjapp",router:"/zjapp/special-inspect-index",code:"special-inspect"},{name:"飞检&专项",code:"fly-inspect",menuCode:"AppUse-FUNCAUTH",functionCode:"feijian",product:"zjapp",router:"/zjapp/fly-inspect-index"},{name:"实测巡检",code:"measure-inspect",menuCode:"AppUse-FUNCAUTH",functionCode:"shicexunjian",product:"zjapp",router:"/zjapp/measure-inspect-index"},{name:"工程案例",menuCode:"AppUse-FUNCAUTH",functionCode:"gongchengliangdian",product:"zjapp",router:"/zjapp/project-highlight",code:"project-highlight"},{name:"常用文档",menuCode:"AppUse-FUNCAUTH",functionCode:"changyongwendang",product:"zjapp",icon:"shigong",router:"/zjapp/template-manage-list",code:"template-manage"},{name:"APP相册",functionCode:"photos",product:"zjapp",noCheck:!0,router:"/zjapp/app-photo",code:"photos"},{name:"防疫宝",menuCode:"AppUse-NCOV",functionCode:"",product:"zjapp",icon:"ncov",router:"/zjapp/ncov-index",code:"ncov-anti-epidemic"}]},{name:"成本协同",functions:[{name:"现场签证",menuCode:"",functionCode:"change_type_visa",product:"gcxt",router:"/gcxt/visa/list"},{name:"设计变更",menuCode:"",functionCode:"change_type_design",product:"gcxt",router:"/gcxt/design/list"},{name:"付款申请",menuCode:"",des:"付款产值合并功能",functionCode:"payment_merge",product:"gcxt",router:"/gcxt/payment/list-merge"},{name:"付款申请",menuCode:"",des:"标准付款",functionCode:"payment",product:"gcxt",router:"/gcxt/payment/list"},{name:"会议纪要",menuCode:"",functionCode:"meeting_record",product:"gcxt",router:"/gcxt/meeting-record/list"},{name:"产值申报",menuCode:"",functionCode:"outputvalue",product:"gcxt",router:"/gcxt/output-value/list"},{name:"结算对数",menuCode:"",functionCode:"statement",product:"gcxt",router:"/gcxt/statement/list"},{name:"沟通答疑",menuCode:"",functionCode:"answer_question",product:"gcxt",router:"/gcxt/answer-question/list"},{name:"核价单",menuCode:"",functionCode:"price_sheet",product:"gcxt",router:"/gcxt/price-sheet/list"},{name:"合同台账",menuCode:"",functionCode:"contract",product:"gcxt",router:"/gcxt/contract/index"},{name:"合同结算",menuCode:"",functionCode:"contract_settlement_common",product:"gcxt",router:"/gcxt/contract-settlement-common/index"},{name:"扣款通知",menuCode:"",functionCode:"deduction_notice",product:"gcxt",router:"/gcxt/deduction-notice/list"},{name:"月度对账",menuCode:"",functionCode:"monthly_statement",product:"gcxt",router:"/gcxt/monthly-statement/list"}]},{name:"事务协同",functions:[{name:"甲方联系单",menuCode:"",functionCode:"tc_jf_worksheet",product:"gcxt",router:"/gcxt/transaction-coordination/tc-jf-worksheet/list"},{name:"乙方联系单",menuCode:"",functionCode:"tc_yf_worksheet",product:"gcxt",router:"/gcxt/transaction-coordination/tc-yf-worksheet/list"},{name:"监理通知单",menuCode:"",functionCode:"tc_jl_worksheet",product:"gcxt",router:"/gcxt/transaction-coordination/tc-jl-worksheet/list"},{name:"施工方案",menuCode:"",functionCode:"tc_construction_plan",product:"gcxt",router:"/gcxt/transaction-coordination/tc-construction-plan/list"},{name:"事前审批",menuCode:"",functionCode:"tc_worksheet",product:"gcxt",router:"/gcxt/transaction-coordination/tc-worksheet/list"},{name:"危险作业施工",menuCode:"",functionCode:"tc_staff_apply",product:"gcxt",router:"/gcxt/transaction-coordination/tc-staff-apply/list"},{name:"特种设备报备",menuCode:"",functionCode:"tc_equipment_report",product:"gcxt",router:"/gcxt/transaction-coordination/tc-equipment-report/list"},{name:"应急预案",menuCode:"",functionCode:"tc_contingency_plan",product:"gcxt",router:"/gcxt/transaction-coordination/tc-contingency-plan/list"},{name:"项目日报",menuCode:"",functionCode:"tc_project_daily",product:"gcxt",router:"/gcxt/transaction-coordination/tc-project-daily/list"},{name:"工作任务",menuCode:"",functionCode:"tc_task_report",product:"gcxt",router:"/gcxt/transaction-coordination/tc-task-report/list"},{name:"旁站记录",menuCode:"",functionCode:"tc_meeting_record",product:"gcxt",router:"/gcxt/transaction-coordination/tc-meeting-record/list"},{name:"会议纪要",menuCode:"",functionCode:"tc_meeting",product:"gcxt",router:"/gcxt/transaction-coordination/tc-meeting/list"}]}]},r=n("abbd"),a=(n("cb3c"),n("c726"),n("d0bf"),n("0bd5"),n("b784"),n("79a8"),n("1f03")),c=n.n(a),i=n("82b4"),s=n("bc58"),u=n.n(s),d=n("1873"),l=n.n(d),p=n("9e7d"),f=[{name:"帮助与反馈",icons:{outside:"super-app-icon-help",inside:"super-app-icon-help-light"},router:"/user/feedback"},{name:"权限申请",icons:{outside:"super-app-icon-permission",inside:"super-app-icon-permission-light"},router:"/user/permission-apply"},{name:"购卡",icons:{outside:"super-app-icon-buy-cart",inside:"super-app-icon-buy-cart-in"},userType:[-1,1],router:"/gcxt/buy/index"},{name:"设置",icons:{outside:"super-app-icon-setting",inside:"super-app-icon-setting-light"},router:"/user/setting"},{name:"更多",icons:{outside:"super-app-icon-about",inside:"super-app-icon-about-light"},router:"/user/about"}],m=function(){if(p["default"].state.app.isAppStoreAccount)return[{name:"设置",icons:{outside:"super-app-icon-setting",inside:"super-app-icon-setting-light"},router:"/user/setting"},{name:"购卡",icons:{outside:"super-app-icon-buy-cart",inside:"super-app-icon-buy-cart-in"},userType:[-1,1],router:"/gcxt/buy/index"},{name:"充值",icons:{outside:"super-app-icon-recharge",inside:"super-app-icon-recharge-in"},userType:[-1,1],router:"/gcxt/buy/recharge"}];var e=Number(c.a.getUserContext("userType")||""),t=u.a.getObject(i["a"].USER_PERMISSIONS,u.a.level.user)||{},n=JSON.parse(JSON.stringify(f));return f.forEach((function(o,r){var a=Object.keys(l.a),c=o.router?o.router.split("/"):[],s=c[0]||c[1];o.userType&&!~o.userType.indexOf(e)&&(console.log("list ====> ",o,r),delete n[r]),o.menucode&&(t[i["a"].MANAGEMENT_CENTER].includes(o.menucode)||delete n[r]),s&&a.includes(s)&&window.GLOBAL_ENV.PRODUCTS&&!window.GLOBAL_ENV.PRODUCTS.includes(s)&&delete n[r]})),n=n.filter((function(e){if(e)return e})),n},h=m,g=n("4104"),v={update:function(e){return console.log(e),Promise.resolve("")}},_=n("2e70"),b=n.n(_),w=n("418c"),C=n("1df7"),k={workbench:o,todo:r["a"]};t["a"]={updatePageConfig:function(e){return v.update(e).then((function(t){return b.a.set("".concat(e,"-page-config-key"),t)}))},getPageConfig:function(e){var t={};return b.a.get("".concat(e,"-page-config-key")).then((function(n){return b.a.get(n).then((function(n){return t=w["b"].isEmpty(n)?JSON.parse(JSON.stringify(k[e])):JSON.parse(n),Promise.resolve(t)})).catch((function(n){return console.log("读取MMKV失败",n),t=JSON.parse(JSON.stringify(k[e])),Promise.resolve(t)}))})).catch((function(n){return console.log("读取MMKV失败",n),t=JSON.parse(JSON.stringify(k[e])),Promise.resolve(t)}))},getMyConfig:function(){return h()},getProducts:function(){return Object(g["a"])().then((function(e){if(!e||Array.isArray(e)&&!e.length)return"";var t=[],n=[];for(var o in Object.keys(e).forEach((function(n){var o=0;Object.keys(e[n]).forEach((function(e){o+=e.length})),o&&t.push(n)})),C["a"])if(Array.isArray(C["a"][o])){var r=C["a"][o];for(var a in r)if(~t.indexOf(r[a])){n.push(o);break}}else~t.indexOf(C["a"][o])&&n.push(o);return n})).catch((function(e){return console.log("获取产品失败",e),Promise.resolve("")}))}}},5047:function(e,t,n){"use strict";var o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("a",e._g({staticClass:"app-button gradient-background",class:e.buttonStyle,attrs:{href:"javascript:void(0);"}},e.$listeners),[e._t("default")],2)},r=[],a={name:"AppButton",props:{disabled:Boolean,secondary:Boolean},computed:{buttonStyle:function(){return[this.disabled&&"disabled",this.secondary?"secondary":""]}}},c=a,i=(n("2f7f"),n("5d22")),s=Object(i["a"])(c,o,r,!1,null,"0c24ff36",null);t["a"]=s.exports},"57bd":function(e,t,n){"use strict";n("b904")},"5e13":function(e,t,n){"use strict";n.d(t,"e",(function(){return c})),n.d(t,"g",(function(){return i})),n.d(t,"f",(function(){return s})),n.d(t,"i",(function(){return u})),n.d(t,"h",(function(){return d})),n.d(t,"b",(function(){return l})),n.d(t,"c",(function(){return p})),n.d(t,"d",(function(){return f})),n.d(t,"a",(function(){return m}));n("445a"),n("402f");var o=n("10c8"),r=window.GLOBAL_ENV.SSO_CENTER_DEFAULT_API,a=function(e){return e.errcode?Promise.reject(e.message):Promise.resolve(e.data)},c=function(){return Object(o["a"])({url:"".concat(r,"/m/PermissionApply/permission-auth/get-user-base-info")}).then((function(e){return a(e)})).then((function(e){return e.base_info}))},i=function(e){return Object(o["a"])({method:"POST",url:"".concat(r,"/m/PermissionApply/permission-auth/get-project-approve-flow"),data:e}).then((function(e){return 0!=e.errcode?Promise.reject("请求失败"):Promise.resolve(e.data)})).catch((function(e){return Promise.reject(e)}))},s=function(e){return Object(o["a"])({method:"POST",url:"".concat(r,"/m/PermissionApply/permission-auth/get-contract-approve-flow"),data:e}).then((function(e){return 0!=e.errcode?Promise.reject("请求失败"):Promise.resolve(e.data)})).catch((function(e){return Promise.reject(e)}))},u=function(e){return Object(o["a"])({method:"POST",url:"".concat(r,"/m/PermissionApply/permission-approval/get-user-role-info"),data:e,retry:!1}).then((function(e){return 0!=e.errcode?Promise.reject("请求失败"):Promise.resolve(e.data)})).catch((function(e){return Promise.reject(e)}))},d=function(e){return Object(o["a"])({method:"POST",url:"".concat(r,"/m/PermissionApply/permission-approval/get-user-post-info"),data:e,retry:!1}).then((function(e){return 0!=e.errcode?Promise.reject("请求失败"):Promise.resolve(e.data)})).catch((function(e){return Promise.reject(e)}))},l=function(e){return Object(o["a"])({url:"".concat(r,"/m/PermissionApply/permission-approval/apply-contract-list"),method:"post",data:e}).then((function(e){return a(e)}))},p=function(e){return Object(o["a"])({url:"".concat(r,"/m/PermissionApply/permission-approval/apply-proj-list?approvalState=").concat(e.approvalState||"","&orgId=").concat(e.orgId||""),method:"post",data:e}).then((function(e){return a(e)}))},f=function(e){var t="".concat(r,"/m/PermissionApply/permission-approval/apply-proj-list-in-org?approvalState=").concat(e.approvalState||"","&orgId=").concat(e.orgId||"");return Object(o["a"])({url:t,method:"post",data:e}).then((function(e){return a(e)}))},m=function(e){return Object(o["a"])({url:"".concat(r,"/m/PermissionApply/permission-auth/cancel-apply"),method:"post",data:e}).then((function(e){return a(e)}))}},"5e83":function(e,t,n){"use strict";n.r(t),n.d(t,"getTodoList",(function(){return a})),n.d(t,"getZjTodoList",(function(){return c})),n.d(t,"getZhkfTodoList",(function(){return i})),n.d(t,"getGcxtTodoList",(function(){return s})),n.d(t,"getGcxtMessageList",(function(){return u})),n.d(t,"getZhkfMessageList",(function(){return d})),n.d(t,"setGcxtNoticeStatus",(function(){return l})),n.d(t,"setZhkfNoticeStatus",(function(){return p})),n.d(t,"getApprovals",(function(){return f})),n.d(t,"getGcxtUnreadMessageCount",(function(){return m})),n.d(t,"getZhkfUnreadMessageCount",(function(){return h})),n.d(t,"getTodoCount",(function(){return g}));n("445a"),n("72b3"),n("fae2"),n("402f"),n("270f");var o=n("10c8"),r=n("1f03"),a=function(e,t){var n={unified_token:Object(r["getToken"])(),_t:Math.random(),access_token:Object(r["getToken"])(),__from:"super_app",__YL_SUPER_APP__:1,tenant_code:Object(r["getUserContext"])().tenantCode};return"zhkf"===t&&(n.app_code="AppEngineerKit"),Object(o["a"])({url:e,method:"get",data:n,token:!1}).then((function(e){if("gcxt"===t){if(!e.success||!e.data)return Promise.reject(e.message);var n={};return Object.keys(e.data).forEach((function(t){n[t]=Object.assign({},e.data[t],{params:{module_key:e.data[t].module_key}})})),n}if("zjapp"===t){var o=e.result;return o}return"zhkf"===t?e.data:0!==e.errcode?Promise.reject(e.errmsg):e.data})).catch((function(e){throw new Error(e)}))},c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"zjfunctest";return Object(o["a"])({method:"get",url:"".concat(window.GLOBAL_ENV.APP_API_URL.ZJ,"/superapp/todo/todo-list?tenant_code=").concat(e),data:{unified_token:Object(r["getToken"])(),_t:Math.random()},token:!1}).then((function(e){var t=e.result;return t})).catch((function(e){throw new Error(e)}))},i=function(){return Object(o["a"])({method:"get",url:"".concat(window.GLOBAL_ENV.APP_API_URL.ZHKF,"/app-super/todo/summary"),data:{app_code:"AppEngineerKit",unified_token:Object(r["getToken"])()},token:!1}).then((function(e){return e.errcode?Promise.reject(e.errmsg):(console.log("getZhkfTodoList =====> ",e.data),Promise.resolve(e.data))})).catch((function(e){throw new Error(e)}))},s=function(){return Object(o["a"])({method:"get",url:"".concat(window.GLOBAL_ENV.APP_API_URL.GCXT,"/superapp/message/todo-list"),data:{access_token:Object(r["getToken"])(),__from:"super_app",__YL_SUPER_APP__:1},token:!1}).then((function(e){return e.success&&e.data?e.data:Promise.reject(e.message)})).catch((function(e){throw new Error(e)}))},u=function(e){return Object(o["a"])({method:"post",url:"".concat(window.GLOBAL_ENV.APP_API_URL.GCXT,"/superapp/message/get-notice-list"),data:Object.assign({},{access_token:Object(r["getToken"])(),__from:"super_app",__YL_SUPER_APP__:1},e),token:!1}).then((function(e){return e.success&&e.data?e:Promise.reject(e.message)})).catch((function(e){throw new Error(e)}))},d=function(){return Object(o["a"])({method:"get",url:"".concat(window.GLOBAL_ENV.APP_API_URL.ZHKF,"/app-super/message/get-msg-summary"),data:{app_code:"AppEngineerKit",unified_token:Object(r["getToken"])()},token:!1}).then((function(e){return e.errcode?Promise.reject(e.errcode):(e.data.record_count=e.data.total,e.data.data=e.data.list,e.data)})).catch((function(e){throw new Error(e)}))},l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return Object(o["a"])({method:"post",url:"".concat(window.GLOBAL_ENV.APP_API_URL.GCXT,"/superapp/message/update-notice-status"),data:{access_token:Object(r["getToken"])(),__from:"super_app",__YL_SUPER_APP__:1,msg_ids:e,is_all:1},retry:!1}).then((function(e){return e.success&&e.data?Promise.resolve():Promise.reject(e.message)})).catch((function(e){throw new Error(e)}))},p=function(){return Object(o["a"])({method:"get",url:"".concat(window.GLOBAL_ENV.APP_API_URL.ZHKF,"/app-super/message/read-all-msg"),data:{app_code:"AppEngineerKit",unified_token:Object(r["getToken"])()},retry:!1}).then((function(e){return e.errcode?Promise.reject(e.errmsg):Promise.resolve()})).catch((function(e){throw new Error(e)}))},f=function(){return Object(o["a"])({method:"get",url:"".concat(window.GLOBAL_ENV.SSO_CENTER_DEFAULT_API,"/m/PermissionApply/permission-approval/approval-total")}).then((function(e){return e.errorcode?Promise.reject():e.data}))},m=function(){return Object(o["a"])({method:"post",url:"".concat(window.GLOBAL_ENV.APP_API_URL.GCXT,"/superapp/message/get-unread-message-count"),data:{access_token:Object(r["getToken"])(),__from:"super_app",__YL_SUPER_APP__:1,msg_type:1},retry:!1}).then((function(e){return e.success&&e.data?Promise.resolve(e.data):Promise.reject(e.message)})).catch((function(e){throw new Error(e)}))},h=function(){return Object(o["a"])({method:"get",url:"".concat(window.GLOBAL_ENV.APP_API_URL.ZHKF,"/app-super/message/get-no-read-msg-count"),data:{app_code:"AppEngineerKit",unified_token:Object(r["getToken"])()},retry:!1}).then((function(e){return e.errcode?Promise.reject(e.errmsg):Promise.resolve(e.data)})).catch((function(e){throw new Error(e)}))},g=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n={access_token:Object(r["getToken"])(),unified_token:Object(r["getToken"])(),__from:"super_app",__YL_SUPER_APP__:1,_t:Math.random()};return"zhkf"===t&&(n.app_code="AppEngineerKit"),Object(o["a"])({method:"get",url:e,data:n}).then((function(e){return"gcxt"===t?e.success&&e.data?Promise.resolve(+e.data.count):Promise.reject(e.message):"zjapp"===t?Promise.resolve(+e.result.todo_total):"zhkf"===t?Promise.resolve(+e.data.count):0!==e.errcode?Promise.reject(e.errmsg):Promise.resolve(+e.data)})).catch((function(e){throw new Error(e)}))}},"5ede":function(e,t,n){},6414:function(e,t,n){"use strict";var o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"textarea"},[n("textarea",{directives:[{name:"model",rawName:"v-model",value:e.reason,expression:"reason"}],ref:"textarea",attrs:{placeholder:e.placeholder,maxlength:e.maxLength},domProps:{value:e.reason},on:{input:[function(t){t.target.composing||(e.reason=t.target.value)},e.sendMsgToParent],blur:e.blur}}),e.isShowLength?n("span",[e._v(e._s(e.maxLength-e.reason.length))]):e._e()])},r=[],a={name:"Textbox",props:{placeholder:{type:String,default:""},maxLength:{type:String,default:"200"},remark:{type:String,default:""},isShowLength:{type:Boolean,default:!0}},data:function(){return{reason:""}},watch:{remark:{handler:function(e){e!==this.reason&&(this.reason=e,console.log(this.reason))},immediate:!0}},methods:{sendMsgToParent:function(){this.$emit("input",this.reason)},blur:function(){document.body.scrollTop=document.documentElement.scrollTop=0},clear:function(){this.reason=""}}},c=a,i=(n("1229"),n("5d22")),s=Object(i["a"])(c,o,r,!1,null,"243100e4",null);t["a"]=s.exports},6852:function(e,t,n){},"6a2c":function(e,t,n){"use strict";n("402f"),n("0bd5"),n("2db5"),n("9b42"),n("6ab7");var o=n("d211"),r=n("3e25"),a=n("c079"),c=n("5e13"),i=n("1f03"),s=n.n(i),u=n("aa77"),d=n("a65d"),l=function(e){if(window.MUtils&&window.MUtils.imageToBase64String){var t=u["a"].defer();return Object(d["isIOS"])()||(e=e.replace("file://","")),window.MUtils.imageToBase64String(e,(function(e){return e=e.replace(/\n/g,""),t.resolve("data:image/jpeg;base64,".concat(e))}),(function(e){return t.reject(e)})),t.promise}return Promise.reject("无法转成base64")},p=n("d1d2"),f=n.n(p),m=n("4aba"),h=n.n(m),g=n("468b"),v=n("eb32"),_=n("371d"),b=function(){return Promise.all([Object(c["i"])().catch((function(){return""})),Object(c["h"])().catch((function(){return""}))]).then((function(e){s.a.updateUser({role:e[0]||"",post:e[1]||""})}))};t["a"]={getStateInfo:function(){return f.a.getHasNetwork().then((function(e){if(e){var t=s.a.getToken();return t?Object(c["e"])().then((function(e){var t="";switch(s.a.updateUser({approvalState:e.approval_state,userType:e.user_type,tenantName:e.tenant_name,tenantInfo:{tenantName:e.user_name,mobile:e.user_mobile}}),e.approval_state){case-1:t="/register/success";break;case 2:t="/auth/auditing";break;case 0:t="/auth/auditing";break;default:break}return t?(t+="?userType=".concat(e.user_type),g["a"].openPage(t),Promise.resolve({noPermission:!0})):Promise.resolve()})).catch((function(e){return console.error(e),Promise.resolve()})):Promise.resolve()}}))},getUserRoleInfo:b,getUserInfo:function(){return f.a.getHasNetwork().then((function(e){return e?Object(r["b"])().then((function(e){return s.a.updateUser({id:e.openId,unionId:e.unionId,nickname:e.nickname,realname:e.realname,username:e.username,userId:e.openId,userCode:"".concat(e.mobile),userName:e.username,userMobile:e.mobile,avatarUrl:e.avatarUrl||"",avatarPath:"",mobile:e.mobile}),b(),e.openId})):s.a.getUserContext().id})).catch((function(e){return console.error(e),Promise.resolve()}))},resetPwd:function(e,t,n,o){e=e.replace("+","");var r={countryCode:e,mobile:t,smsCode:n,password:o,timestamp:+new Date,nonce:h()()};return f.a.getHasNetwork().then((function(e){return e?Object(a["g"])(r).then((function(){return Promise.resolve()})).catch((function(e){return console.error(e),Promise.reject("修改密码失败，请稍后重试")})):Promise.reject("当前网络无法使用")}))},updatePwd:function(e,t,n){return f.a.getHasNetwork().then((function(o){if(o){var a={type:"CHECK_PASSWORD",oldPwd:e,newPwd:t,reNewPwd:n};return Object(r["d"])(a).then((function(){return s.a.updateUser({userPassword:t}),Promise.resolve()})).catch((function(e){return console.error("修改密码失败",e),Promise.reject(e||"修改密码失败")}))}return Promise.reject("当前网络无法修改密码")}))},refreshToken:function(){return f.a.getHasNetwork().then((function(e){if(e){var t=s.a.getUserContext("refreshToken");t||v["a"].logout();var n={refreshToken:t,nonce:h()(),timestamp:+new Date};return Object(a["e"])(n).then((function(e){return s.a.setUserContext({token:e.accessToken,accessToken:e.accessToken,refreshToken:e.refreshToken}),Promise.resolve(e.accessToken)})).catch((function(e){return v["a"].logout(),Promise.reject(e)}))}}))},ticket2token:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!e)return Promise.reject("缺少租户code");var n=s.a.getUserContext("ticket");n||v["a"].logout();var o={ticket:n,tenantCode:e,timestamp:+new Date,nonce:h()()};return Object(a["c"])(o).then((function(n){return t&&(s.a.setUserContext({tenantCode:e,tenantId:"",token:n.accessToken,accessToken:n.accessToken,refreshToken:n.refreshToken}),_["a"].setDefaultTenant(e)),n})).catch((function(e){return v["a"].logout(),Promise.reject(e)}))},token2token:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";if(!e)return Promise.reject("缺少租户code");var o=s.a.getUserContext();if(e===o.tenantCode)return Promise.resolve(o.token);if(!o.token&&!n)return v["a"].logout();var r={accessToken:n||o.token,tenantCode:e,timestamp:+new Date,nonce:h()()};return Object(a["d"])(r).then((function(n){return t&&(s.a.setUserContext({tenantCode:e,tenantId:"",token:n.accessToken,accessToken:n.accessToken,refreshToken:n.refreshToken}),_["a"].setDefaultTenant(e)),n.accessToken})).catch((function(e){return console.error("切换租户失败",e),Promise.reject(e)}))},uploadAvatar:function(e){return l(e).then((function(e){return console.log("===== uploadAvatar ========"),Object(r["e"])({type:"BASE64_DATA",avatarData:e}).then((function(e){return e.avatarUrl}))}))},bindPhone:function(e){return e=Object(o["a"])(Object(o["a"])({},e),{},{appid:window.TENANT_CONFIG.APP_ID,nonce:h()(),timestamp:+new Date}),Object(a["a"])(e).catch((function(e){return Promise.reject(e)}))}}},"6c74":function(e,t,n){},7247:function(e,t,n){"use strict";n("6852")},7560:function(e,t,n){"use strict";n.d(t,"b",(function(){return c})),n.d(t,"a",(function(){return i}));n("445a"),n("402f");var o=n("10c8"),r=n("1f03"),a=window.GLOBAL_ENV.APP_API_URL.ZJ,c=function(e){var t="prod"!=window.GLOBAL_ENV.APP_ENV?"https://appzj-test.myyscm.com":"https://appzj.myyscm.com";return Object(o["a"])({method:"post",url:"".concat(t,"/feedback/submit?unified_token=").concat(Object(r["getToken"])()),data:e}).then((function(e){return e&&e.errmsg?Promise.reject(e):!!e}))},i=function(e){return Object(o["a"])({method:"get",url:"".concat(a,"/webapi/app-feedback/list?unified_token=").concat(Object(r["getToken"])()),data:e}).then((function(e){return e&&e.errmsg?Promise.reject(e):e.data}))}},"78bf":function(e,t,n){"use strict";n("402f");var o=n("4820"),r=n("2805"),a=n("a275"),c=n("9e7d"),i=n("82b4");t["a"]={workbench:function(){return o["a"].updatePageConfig(i["a"].WORKBENCH_PAGE).then((function(){r["a"].getHomePageConfig().then((function(e){c["default"].commit("page/SET_WORKBENCH_MODEL",e)})).catch((function(e){console.error("workbench init error",e),c["default"].commit("page/SET_WORKBENCH_MODEL",{topModules:[],modules:[]})}))}))},todoCount:function(){return o["a"].updatePageConfig(i["a"].TODO_PAGE).then((function(){return a["a"].getTodoCount().then((function(e){c["default"].commit("todo/SET_TODO_COUNT",e)})).catch((function(e){console.error("todocount init error",e),c["default"].commit("page/SET_TODO_COUNT",0)}))}))},todoList:function(){return o["a"].updatePageConfig(i["a"].TODO_PAGE).then((function(){return a["a"].getTodoList().then((function(e){return c["default"].commit("page/SET_TODO_LIST",e),Promise.resolve(e)})).catch((function(e){console.error("todolist init error",e),c["default"].commit("page/SET_TODO_LIST",{list:[]})}))}))}}},"82b4":function(e,t,n){"use strict";var o={USER_PERMISSIONS:"user-permissions",CONTEXT:"app_context",CONTEXT_USER:"context_user",CLIENT_ID:"client_id",VERSION:"version",UNHANDLED_LOGOUT:"unhandled_logout",AD_PAGE_CONFIG:"ad_page_config",SKIP_UPDATED_VERSION:"app_skip_updated_version",LAST_EXEC_TIME_DATA:"last_exec_time_data",SHAKE_TO_FEED_BACK:"shake_to_feed_back",ONLY_WIFI:"only-wifi",CURRENT_PROJECT_ID:"project-id",DEFAULT_TENANT:"default-tenant",WEB_VERSION_UPDATE_INFO:"web_version_update_info",IS_WEB_VERSION_UPDATE:"is_web_version_update",LAST_PAGE_CONFIG_DOWNLOAD_TIME:"last_config_download_time",WORKBENCH_PAGE:"workbench",TODO_PAGE:"todo",MANAGEMENT_CENTER:"ManagementCenter"};t["a"]=o},"85a3":function(e,t,n){n("2fd9"),n("e7e3")},8935:function(e,t,n){},"8d2a":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAALQAAAC0CAYAAAA9zQYyAAAJi0lEQVR4Xu2dbYxcVR2Hf3emO6vIttomUEi1ATSoodDuNkYpRCUxErAfrKgfgAgNJnwzafqBxpZuAwE+mPgGkoqNxrfEBggNURMLoSYmxNjaxqRErSblJRCxhdJV6L4ecndntt0ba3bm3vu7L/PMtyb3nP85z//X25l5eudE6rweCRdqia6VdFcUaf2KQa0+NS5NBTXmr5HUjKSt10i7RqS7/yD97O/SdDj3Cq6BT67ZmFakM62G3rztw3pu13p9a+N+vXTki9GpOIXRbBQfC1craEeroU3Xr1TjquUKn71E0T9OS2OTC8O6dED60mXS6iHplf9Kv/on15xLCD75ZiOE2Zus3rtE4auXK2o1NT3ypA6cnNAWfT36S6Q9YWjJtH460NQXHr1ezRtXKXp/SxpsLgwyf4JAGQjEge68IWhEUvwu4sq9mnn9jJ7UhO6O7ngurD01qT9vXaNow8oyLJk1QKA7Ar9+WWHT7xQmZvSV6NCJcP+65fpmNPfmgxcEKkfg1IR0y37p2Ve1Lxp+Irz20Ce08nOrKrcPFgyBWQITM9KW56VHjup4pB+G/4wO64J7hxVxlyYhVSQQv6/+/lGF7Qc1Hml3mLp3WM3REYlAV7GdrDkmcPKMFL+XjgMddo5IcaB5QaDqBAh01TvI+mcJHDkpfe1ALFZ2hxDfneO7NC8IVJXAg4el7QelaPBHIfzgOmnzlVXdCuuGgDR6SNp1SIp+fiyEL18mtTCD5KLCBOYDfeytEK5Y2vlPHRXeEUvvawLzgb5qbwjf3SDdcGlf82DzFScwH+j4Q+F966XtwxXfEcvvawK7X5C2/rH9LQffQ/d1Fmqx+TfGpX3HCXQtmskmzhJArJCGWhBArNSijWyiQwCxQhZqRQCxUqt2shnEChmoFQHESq3ayWYQK2SgVgQQK7VqJ5tBrJCBWhJArNSyrf23KcRK//W81jtGrNS6vf23OcRK//W81jtGrNS6vf23OcRK//W81jtGrNS6vf23OcRK//W81jtGrNS6vf27OcRK//a+VjtHrNSqnWwGsUIGakUAsVKrdrIZxAoZqBUBxEqt2slmECtkoFYEECuGdj54RBqfXlhosCFtW2co3mclECuGhi/7iXR6YmGhoQHp9J2G4n1aArGSY+MJdI5wE1MjVgysCbQBcrsEYsXAmkAbILdLIFYMrAm0AXIy0Jyxkh90Ap0f2+TMiBUDawJtgJy8Q3PGSn7QCXR+bJMzI1YMrAm0AXK7BGLFwJpAGyAnSiBWcmROoHOEi1jxwe1UItA+5ogVA2sCbYCMWPFBJtA+1jyxYmBNoA2Qk3doDq/PDzqBzo/teU0hYiU/6AQ6P7aIFR/b+UoE2gcdsWJgTaANkBErPsgE2seaJ1YMrAm0AXK7BGLFwJpAGyAjVnyQCbSPNWLFwJpAGyAjVnyQCbSPNT8FZmBNoA2Q2yV4YsXAmkAbILdLIFYMrAm0ATJixQeZQPtYI1YMrAm0ATJixQeZQPtY81NgBtYE2gA5+T00PwWWH3QCnR/b5Mz8FJiBNYE2QE7eoXliJT/oBDo/tsmZESsG1gTaABmx4oNMoH2sO5X4KbAcmRPoHOEmpkasGFgTaANkxIoPMoH2sUasGFgTaANkxIoPMoH2sUasGFgTaAPkKouV+Ozsh474IKWtlDwWuTPf0lbamX3j71krbVvrq9drpUqKlc4/K71umnHdE9g5Io2OdD/OPaKST6wQaHdMpKoEupJihUAT6PMRqKRYIdAE+nwEKvlTYPGi4w+GVXmNTf7vlQ4NVGUHcx8It60r/3oRK4Ye8bWdATJixQeZQPtYI1YMrAm0AXKVxYoPTzaVCHQ2HBczSyXFymI2VqZrCLSvG5UUKz482VQi0Nlw7GYWnljphlaX1xLoLoGluLySYiXFfgsZSqB92CspVnx4sqlEoLPhuJhZECuLoZTyGgKdEmAXwzljpQtYvV5KoHsl1/04xEr3zLoeQaC7RtbzAM5Y6Rnd4gcS6MWzSnslYiUtwUWMJ9CLgJTRJYiVjED+v2kItAFyogRiJUfmBDpHuImpESsG1gTaALldArFiYE2gDZDbJRArBtYE2gA5GWjOWMkPOoHOj21yZsSKgTWBNkBO3qE5YyU/6AQ6P7bJmRErBtYE2gC5XQKxYmBNoA2QESs+yATaxxqxYmBNoA2QESs+yATaxxqxYmBNoA2QESs+yATaxxqxYmBNoA2QESs+yATaxxqxYmBNoA2QESs+yATax7pTiSdWcmROoHOEm5gasWJgTaANkBErPsgE2scasWJgTaANkBErPsgE2scasWJgTaANkBErPsgE2scasWJgTaANkBErPsgE2scasWJgTaANkNslECsG1vG55OPTCwsNNqpxdrYBT6Yl+CmwTHEyWdEEECtFd4D6mRLgjJVMcTJZ0QQQK0V3gPqZEuCMlUxxMlnRBBArRXeA+pkS4KfAMsXJZGUhwBMrZekE60hFALGSCh+Dy0YAsVK2jrCeVAQQK6nwMbhsBBArZesI60lFALGSCh+Dy0YAsVK2jrCeVAQQK6nwMbhsBBArZesI68mEAGIlE4xMUjQBxErRHaB+pgQQK5niZLKiCSBWiu4A9TMlgFjJFCeTFU0AsVJ0B6ifKQHESqY4maxoAoiVojtA/UwJIFYyxclkZSGAWClLJ1hHKgKIlVT4GFw2AoiVsnWE9aQigFhJhY/BZSOAWClbR1hPKgKIlVT4GFw2AoiVsnWE9aQigFhJhY/BZSOAWClbR1hPJgQQK5lgZJKiCZwrVqZGR9TcOVL0kqgPgd4IhCDF59nsOKjp6MIfh/Fvf1Ktuz7a22SMgkDRBGbCbJj1wGG9He35W3jh1iv0scFm0cuiPgR6IzA5I215Xnr4qF6KDr4eHljS0LaPf0AaaPQ2IaMgUCSBtyakW/ZLz7yqfdE1j4fPj03qN9+7VtHNH1JU5MKoDYFeCLw4Jq15QjNjk7o10p4wpCn9YtmgbvrlDWpsuFjR0IDUINq9sGVMzgTiD4BB0lSQJqelVlP69xnNfGqffvvGlDbPxfaxcLWCdrQa2vTpS9S4cZX0jTXS1Iz09IvS0TfnJum8mpG0doW0cfXcSalcAx9XNuIPgHGY47cZ/3pH+sgyhR3DevTZ1/SdjR+Mjp29Dz8cVqilz0i6/aL36LpnblbzxLjet/mABo6PLfxrFw9aPij9aZMU3+7v/L3ENWcZwSfXbMSHTY9LOqFIh5cOaO9f79BTl0bR23EH3gWvljAzL6BasQAAAABJRU5ErkJggg=="},"90a3":function(e,t,n){e.exports=n.p+"img/icon-error.e1ab163d.png"},"920a":function(e,t,n){"use strict";n("e539")},9617:function(e,t,n){},"9a24":function(e,t,n){},"9b07":function(e,t,n){},"9cc1":function(e,t,n){},"9d46":function(e,t,n){"use strict";n("402f"),n("0bd5"),n("79a8");var o=n("aa77"),r=n("a65d"),a=n("11a1"),c=n("dfac"),i=n.n(c),s=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e&&1100===e.errCode){var n="",o=window.TENANT_CONFIG.appName,c=r["isIOS"]();n=c&&t?"请在iPhone的“设置-隐私”选项中，允许".concat(o,"访问你的相册"):c&&!t?"请在iPhone的“设置-隐私”选项中，允许".concat(o,"访问你的相机"):"请在设置-应用-".concat(o,!c&&t?"-权限中开启相册权限":"-权限中开启相机权限"),a["a"].alert({message:n})}if(e){if(999===e.errCode)return void Promise.reject({cancel:1});if(1100===e.errCode)return void Promise.reject({notAllow:1});e=e.errMsg||e}return Promise.reject(e)},u=function(e,t){var n,r,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},c=t;e=Object.assign({},{edit:!0,limits:[0,1,2],autoSelected:0,sourceType:"photo"},e),e.fromAlbum?(c=t.split(),r="openAlbum"):(r="openCamera",e.photoConfig={autoSelected:0,edit:!0,limits:[0,1,2]});var s=window.MImagePicker;return n=s[r],i.a.ready().then((function(){var i=o["a"].defer();return n(c,(function(n){n?(e.watermark&&(a=Object.assign({},{watermarkConfig:{textBackground:"#40000000",textAlignment:"right",textColumns:[{text:e.text||"",textColor:"#FFFFFF"}]},processOptions:a})),s.imageProcess(t,(function(e){console.log(e+": 添加水印成功"),console.log("takePhoto: OK",t),i.resolve(t)}),(function(e){console.error("拍照添加水印失败:",c,e),i.reject("拍照添加水印失败")}),a)):(console.error(r+": savedPath为空"),i.reject("拍照路径异常"))}),(function(e){i.reject(e)}),e),i.promise}))},d=function(e){var t,n,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=e,c={sourceType:"photo"},u={edit:!0,editConfig:{limits:[2],autoSelected:2}};r?(a=e.split(),n="openAlbum",c=u):(n="openCamera",c.photoConfig=u);var d=window.MImagePicker;return t=d[n],i.a.ready().then((function(){var i=o["a"].defer();return t(a,(function(t){t?d.imageProcess(e,(function(){i.resolve(e)}),(function(e){console.error("生成头像失败:",a,e),i.reject("生成头像失败")}),{ratio:.6,width:200,height:200}):(console.error(n+": savedPath为空"),i.reject("拍照路径异常"))}),(function(e){s(e,r).catch((function(e){i.reject(e)}))}),c),i.promise}))};t["a"]={takePhoto:u,takeAvatar:d}},"9e7d":function(e,t,n){"use strict";n.r(t);var o,r,a=n("a593"),c=n("cf6b"),i=n("28f8"),s="APP",u={namespaced:!0,state:{global:{isIOS:!1,isIOSX:!1,headerHeight:44,footerHeight:50,clientHeight:568,clientWidth:320,contentHeight:524},isAppStoreAccount:!1,isInit:!1,lastUpdateTime:{workbench:0},hasProjectSelect:!1,loadingStatus:{},isOverwriteInstallation:!1},mutations:(o={},Object(i["a"])(o,s,(function(e,t){e.global=Object.assign({},e.global,t)})),Object(i["a"])(o,"PROJECT_SELECT",(function(e){e.hasProjectSelect=!0})),Object(i["a"])(o,"LAST_UPDATE_TIME",(function(e,t){e.lastUpdateTime=Object.assign({},e.lastUpdateTime,t)})),Object(i["a"])(o,"LOADING_STATUS",(function(e,t){e.loadingStatus=Object.assign({},e.loadingStatus,t)})),Object(i["a"])(o,"INIT_STATUS",(function(e,t){e.isInit=t})),Object(i["a"])(o,"APP_STORE_ACCOUNT",(function(e,t){e.isAppStoreAccount=t})),Object(i["a"])(o,"CLEAR_LOADING_STATUS",(function(e){for(var t in e.loadingStatus)e.loadingStatus[t]=!1})),Object(i["a"])(o,"SET_OVERWRITE_INSTALLTION",(function(e,t){e.isOverwriteInstallation=t})),Object(i["a"])(o,"REST",(function(e){e.lastUpdateTime={}})),o),actions:{reset:function(e){var t=e.commit;t("REST")}}},d=(n("cb3c"),n("402f"),"SET_CURRENT_ITEM"),l="SET_ITEMS",p="SET_LOAD_STATUS",f={namespaced:!0,state:{currentItem:{},items:[],hasLoad:!1},mutations:(r={},Object(i["a"])(r,d,(function(e,t){console.log("设置curritem-----"),e.currentItem=t})),Object(i["a"])(r,l,(function(e,t){e.items=t})),Object(i["a"])(r,p,(function(e,t){e.hasLoad=t})),r),actions:{init:function(e){var t=e.commit,n=e.state;return t(p,!1),Promise.resolve([{name:"保利",id:1},{name:"保利2",id:2},{name:"保利3",id:3}]).then((function(e){console.log(e,"tenantList");var o={};if(t(p,!0),Array.isArray(e)&&e.length>0){var r=e.filter((function(e){return 1==e.selected}));o=r.length>0?r[0]:e[0];var a=n.currItem;JSON.stringify(a)!=JSON.stringify(o)&&t(d,o),t({type:"app/APP",enableDeliveryProcess:1*o.enable_delivery_process},{root:!0}),t(l,e)}else t(d,{}),t({type:"app/APP",enableDeliveryProcess:0},{root:!0}),t(l,[]);return Promise.resolve(o)}))},changeTenant:function(e,t){var n=e.commit;return Promise.resolve().then((function(){console.log("切换项目中",t),n(d,t),n({type:"app/APP",enableDeliveryProcess:1*t.enable_delivery_process},{root:!0})}))}}},m={namespaced:!0,state:{workbench:{topModules:[],modules:[]},todo:{list:[]}},mutations:{SET_WORKBENCH_MODEL:function(e,t){e.workbench.topModules=t.topModules||[],e.workbench.modules=t.modules||[]},SET_TODO_LIST:function(e,t){e.todo.list=t||[]}}},h={namespaced:!0,state:{todoCount:0},mutations:{SET_TODO_COUNT:function(e,t){e.todoCount=t||0}}};a["default"].use(c["a"]);t["default"]=new c["a"].Store({modules:{app:u,tenantList:f,page:m,todo:h}})},a1a5:function(e,t,n){},a1d7:function(e,t,n){"use strict";n("dd80")},a275:function(e,t,n){"use strict";n("72b3"),n("1d7a"),n("fae2"),n("402f"),n("2db5"),n("270f"),n("6ab7");var o=n("5e83"),r=n("9e7d"),a=n("82b4"),c=n("4820"),i=n("abbd"),s=i["a"].list["approval"],u=function(){return o["getApprovals"]().then((function(e){return e.todo_num?{approval:{name:e.name,todo_num:e.todo_num}}:{approval:{name:"认证审批",todo_num:0}}})).catch((function(){return Promise.resolve({approval:{name:"认证审批",todo_num:0}})}))},d=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return o["getTodoList"](e,t).then((function(e){return console.log("获取".concat(t,"待办列表数据======>"),e),e})).catch((function(){return Promise.resolve()}))},l=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return o["getTodoCount"](e,t).then((function(e){return e})).catch((function(){return Promise.resolve()}))};t["a"]={getTodoList:function(){return c["a"].getPageConfig(a["a"].TODO_PAGE).then((function(e){var t=[u()];return e.list.approval=s,console.log("todo待办拥有组别window.GLOBAL_ENV.PRODUCTS",window.GLOBAL_ENV.PRODUCTS),window.GLOBAL_ENV.PRODUCTS.length?window.GLOBAL_ENV.PRODUCTS.forEach((function(n){e.apis[n]&&e.apis[n].list&&t.push(d(e.apis[n].list,n))})):Object.keys(e.apis).forEach((function(n){e.apis[n]&&e.apis[n].list&&t.push(d(e.apis[n].list,n))})),Promise.all(t).then((function(e){var t={};return e.forEach((function(e){t=Object.assign({},t,e)})),Promise.resolve(t)})).then((function(t){var n=[];return Object.keys(t).forEach((function(o){var r=e.list[o];r&&n.push(Object.assign({},r,t[o]))})),console.log("待办列表modules",n),n}))}))},getTodoCount:function(){return c["a"].getPageConfig(a["a"].TODO_PAGE).then((function(e){var t=0,n=[u()];return window.GLOBAL_ENV.PRODUCTS.length?window.GLOBAL_ENV.PRODUCTS.forEach((function(t){e.apis[t]&&e.apis[t].count&&n.push(l(e.apis[t].count,t))})):Object.keys(e.apis).forEach((function(t){e.apis[t]&&e.apis[t].count&&n.push(l(e.apis[t].count,t))})),Promise.all(n).then((function(e){e[0]=+e[0].approval.todo_num,e.forEach((function(e){t+=e||0})),r["default"].commit("todo/SET_TODO_COUNT",t)})),Promise.resolve(t)}))}}},aa77:function(e,t,n){"use strict";n("df69"),n("402f");function o(){if("undefined"!=typeof Promise&&Promise.defer)return Promise.defer();this.resolve=null,this.reject=null,this.promise=new Promise(function(e,t){this.resolve=e,this.reject=t}.bind(this)),Object.freeze(this)}t["a"]={defer:function(){return new o}}},abbd:function(e,t,n){"use strict";t["a"]={apis:{gcxt:{count:"".concat(window.GLOBAL_ENV.APP_API_URL.GCXT,"/superapp/message/todo-count"),list:"".concat(window.GLOBAL_ENV.APP_API_URL.GCXT,"/superapp/message/todo-list")},zjapp:{count:"".concat(window.GLOBAL_ENV.APP_API_URL.ZJ,"/superapp/todo/todo-count"),list:"".concat(window.GLOBAL_ENV.APP_API_URL.ZJ,"/superapp/todo/todo-list")},zhkf:{count:"",list:""}},list:{approval:{name:"认证审批",icon:"todo/approval",code:"approval",page:{url:window.GLOBAL_ENV.SSO_CENTER_URL+"/verify?token={token}",params:{tilte:"",options:{navBar:null}}}},change_type_visa:{name:"现场签证",icon:"todo/change_type_visa",router:"/gcxt/home/todo/"},change_type_design:{name:"设计变更",icon:"todo/change_type_design",router:"/gcxt/home/todo/"},meeting_record:{name:"会议纪要",icon:"todo/meeting_record",router:"/gcxt/home/todo/"},outputvalue:{name:"产值申报",icon:"todo/outputvalue",router:"/gcxt/home/todo/"},settlement:{name:"合同结算",icon:"todo/settlement",router:"/gcxt/home/todo/"},payment:{name:"付款申请",icon:"todo/payment",router:"/gcxt/home/todo/"},statement:{name:"结算对数",icon:"todo/statement",router:"/gcxt/home/todo/"},communication:{name:"沟通答疑",icon:"todo/communication",router:"/gcxt/home/todo/"},price_sheet:{name:"认质认价",icon:"todo/price_sheet",router:"/gcxt/home/todo/"},deduction_notice:{name:"扣款通知",icon:"todo/deduction_notice",router:"/gcxt/home/todo/"},monthly_statement:{name:"月度对账",icon:"todo/monthly_statement",router:"/gcxt/home/todo/"},tc_jf_worksheet:{name:"甲方联系单",icon:"todo/tc_jf_worksheet",router:"/gcxt/home/todo/"},tc_yf_worksheet:{name:"乙方联系单",icon:"todo/tc_yf_worksheet",router:"/gcxt/home/todo/"},tc_worksheet:{name:"事前审批",icon:"todo/tc_worksheet",router:"/gcxt/home/todo/"},tc_jl_worksheet:{name:"监理通知单",icon:"todo/tc_jl_worksheet",router:"/gcxt/home/todo/"},tc_construction_plan:{name:"施工方案",icon:"todo/tc_construction_plan",router:"/gcxt/home/todo/"},tc_staff_apply:{name:"危险作业施工",icon:"todo/tc_staff_apply",router:"/gcxt/home/todo/"},tc_equipment_report:{name:"特种设备报备",icon:"todo/tc_equipment_report",router:"/gcxt/home/todo/"},tc_contingency_plan:{name:"应急预案",icon:"todo/tc_contingency_plan",router:"/gcxt/home/todo/"},tc_project_daily:{name:"项目日报",icon:"todo/tc_project_daily",router:"/gcxt/home/todo/"},tc_task_report:{name:"工作任务",icon:"todo/tc_task_report",router:"/gcxt/home/todo/"},tc_meeting_record:{name:"旁站记录",icon:"todo/tc_meeting_record",router:"/gcxt/home/todo/"},check:{name:"现场检查",icon:"zjapp/xianchangjiancha",router:"/zjapp/todo-list/check/",params:{module:"check"}},"check-quality":{name:"质量检查",icon:"zjapp/zljc",router:"/zjapp/todo-list/check-quality/",params:{module:"check-quality"}},"check-safety":{name:"安全检查",icon:"zjapp/aqjc",router:"/zjapp/todo-list/check-safety/",params:{module:"check-safety"}},"closed-water-test":{name:"闭水试验",icon:"zjapp/bishuishiyan",router:"/zjapp/todo-list/closed-water-test/",params:{module:"closed-water-test"}},"fly-inspect":{name:"飞检&专项",icon:"zjapp/feijian",router:"/zjapp/todo-list/fly-inspect/",params:{module:"fly-inspect"}},material:{name:"材料验收",icon:"zjapp/cailiaoyanshou",router:"/zjapp/todo-list/material/",params:{module:"material"}},measure:{name:"实测实量",icon:"zjapp/shiceshiliang",router:"/zjapp/todo-list/measure/"},"measure-inspect":{name:"实测巡检",icon:"zjapp/shicexunjian",router:"/zjapp/todo-list/measure-inspect/",params:{module:"measure-inspect"}},"measure-v3":{name:"实测实量",icon:"zjapp/shiceshiliang",router:"/zjapp/todo-list/measure-v3/",params:{module:"measure-v3"}},"pile-accept":{name:"桩基验收",icon:"zjapp/pile-accept",router:"/zjapp/todo-list/pile-accept/",params:{module:"pile-accept"}},process:{name:"工序移交",icon:"zjapp/gongxuyijiao",router:"/zjapp/todo-list/process/",params:{module:"process"}},"process-accept":{name:"工序验收",icon:"zjapp/gongxuyanshou",router:"/zjapp/todo-list/process-accept/",params:{module:"process-accept"}},"process-accept-v2":{name:"工序验收v2",icon:"zjapp/process-accept-v2",router:"/zjapp/todo-list/process-accept-v2/",params:{module:"process-accept-v2"}},"process-problem":{icon:"zjapp/xianchangjiancha",router:"/zjapp/todo-list/process-problem/",params:{module:"process-problem"}},"schedule-plan-detail-task":{name:"进度管理",icon:"zjapp/progress",router:"/zjapp/todo-list/schedule-plan-detail-task/",params:{module:"schedule-plan-detail-task"}},"schedule-plan":{name:"进度管理",icon:"zjapp/progress",router:"/zjapp/todo-list/schedule-plan/",params:{module:"schedule-plan"}},"special-inspect":{name:"专项巡检",icon:"zjapp/zhuanxiangxunjian",router:"/zjapp/todo-list/special-inspect/",params:{module:"special-inspect"}},"special-inspect-problem":{name:"专项巡检",icon:"zjapp/zhuanxiangxunjian",router:"/zjapp/todo-list/special-inspect-problem/",params:{module:"special-inspect-problem"}},"templet-plan":{name:"样板管理",icon:"zjapp/yangbanguanli",router:"/zjapp/todo-list/templet-plan/",params:{module:"templet-plan"}},"templet-plan-problem":{name:"样板管理",icon:"zjapp/yangbanguanli",router:"/zjapp/todo-list/templet-plan-problem/",params:{module:"templet-plan-problem"}}}}},adc9:function(e,t,n){"use strict";n("a1a5")},b2ec:function(e,t,n){"use strict";n("332c");var o=n("3ea9"),r=(n("402f"),n("836b"),"last_exec_time_data"),a={},c=function(e){if(null===e||void 0===e)throw new TypeError("timer: 无效的key");return a[e]},i=function(e,t){if(null===e||void 0===e)throw new TypeError("timer: 无效的key");if(!t)throw new TypeError("timer: 无效的value");a[e]=t},s=function(){return(new Date).getTime()/1e3},u=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";console.log("======= funcExec ======",t);var o,a,u=n||t.toString(),d=c(r)||{};return d&&d[u]?(o=d[u],o&&s()-o<e?void 0:(a=t(),console.log("returnValue =======> ",a),d[u]=s(),i(r,d),a)):(d[u]=s(),void i(r,d))},d=n("1f03"),l=n("6a2c"),p=n("a275"),f="version_update",m="token_refresh",h="todo_count_refresh";t["a"]={doUpdate:function(){console.log("======= doUpdate ======"),u(3600,(function(){Object(o["a"])()}),f),u(3600,(function(){Object(d["getIsLogged"])()&&!window.location.hash.startsWith("#/login")&&l["a"].refreshToken()}),m),u(600,(function(){p["a"].getTodoCount()}),h)}}},b38c:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return c}));n("c726"),n("b784");var o=n("1f03"),r=n.n(o),a={zhkf:["lsfz","zzyl","retesting","cjap","cqyl","myyl","dpzy"]},c=function(){var e=r.a.getUserContext("tenantCode");return a["zhkf"].includes(e)&&!!window.__module_entry_zhkf__}},b904:function(e,t,n){},b9af:function(e,t,n){"use strict";n("9617")},bc83:function(e,t,n){"use strict";n("8935")},beef:function(e,t,n){},c079:function(e,t,n){"use strict";n.d(t,"b",(function(){return y})),n.d(t,"h",(function(){return A})),n.d(t,"e",(function(){return P})),n.d(t,"c",(function(){return j})),n.d(t,"d",(function(){return T})),n.d(t,"g",(function(){return O})),n.d(t,"a",(function(){return E})),n.d(t,"f",(function(){return N})),n.d(t,"i",(function(){return x}));n("402f");var o=n("d211"),r=n("10c8"),a=(n("445a"),n("72b3"),n("cca2"),n("6540"),n("fae2"),n("270f"),n("ecfd"),n("fcee"),n("0bd5"),n("836b"),n("79a8"),n("1143"),n("538b"),n("f49a"),n("7443"),n("c0cd"),n("da5e"),n("157f"),n("8b72"),n("3139"),n("29f5"),n("b7d3"),n("fa49"),n("2e97"),n("960e"),n("da10"),n("4967"),n("6c14"),n("2587"),n("971f"),n("fa68"),n("6e7c"),n("a760"),n("6e85"),n("55d9"),"0123456789abcdef".split("")),c=[-2147483648,8388608,32768,128],i=[24,16,8,0],s=["hex","array","digest","arrayBuffer"],u=[];function d(e){e?(u[0]=u[16]=u[1]=u[2]=u[3]=u[4]=u[5]=u[6]=u[7]=u[8]=u[9]=u[10]=u[11]=u[12]=u[13]=u[14]=u[15]=0,this.blocks=u):this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.h0=1732584193,this.h1=4023233417,this.h2=2562383102,this.h3=271733878,this.h4=3285377520,this.block=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1,this.first=!0}d.prototype.update=function(e){if(!this.finalized){var t,n="string"!==typeof e;n&&e.constructor===window.ArrayBuffer&&(e=new Uint8Array(e));var o,r=0,a=e.length||0,c=this.blocks;while(r<a){if(this.hashed&&(this.hashed=!1,c[0]=this.block,c[16]=c[1]=c[2]=c[3]=c[4]=c[5]=c[6]=c[7]=c[8]=c[9]=c[10]=c[11]=c[12]=c[13]=c[14]=c[15]=0),n)for(o=this.start;r<a&&o<64;++r)c[o>>2]|=e[r]<<i[3&o++];else for(o=this.start;r<a&&o<64;++r)t=e.charCodeAt(r),t<128?c[o>>2]|=t<<i[3&o++]:t<2048?(c[o>>2]|=(192|t>>6)<<i[3&o++],c[o>>2]|=(128|63&t)<<i[3&o++]):t<55296||t>=57344?(c[o>>2]|=(224|t>>12)<<i[3&o++],c[o>>2]|=(128|t>>6&63)<<i[3&o++],c[o>>2]|=(128|63&t)<<i[3&o++]):(t=65536+((1023&t)<<10|1023&e.charCodeAt(++r)),c[o>>2]|=(240|t>>18)<<i[3&o++],c[o>>2]|=(128|t>>12&63)<<i[3&o++],c[o>>2]|=(128|t>>6&63)<<i[3&o++],c[o>>2]|=(128|63&t)<<i[3&o++]);this.lastByteIndex=o,this.bytes+=o-this.start,o>=64?(this.block=c[16],this.start=o-64,this.hash(),this.hashed=!0):this.start=o}return this.bytes>4294967295&&(this.hBytes+=this.bytes/4294967296<<0,this.bytes=this.bytes%4294967296),this}},d.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var e=this.blocks,t=this.lastByteIndex;e[16]=this.block,e[t>>2]|=c[3&t],this.block=e[16],t>=56&&(this.hashed||this.hash(),e[0]=this.block,e[16]=e[1]=e[2]=e[3]=e[4]=e[5]=e[6]=e[7]=e[8]=e[9]=e[10]=e[11]=e[12]=e[13]=e[14]=e[15]=0),e[14]=this.hBytes<<3|this.bytes>>>29,e[15]=this.bytes<<3,this.hash()}},d.prototype.hash=function(){var e,t,n,o=this.h0,r=this.h1,a=this.h2,c=this.h3,i=this.h4,s=this.blocks;for(t=16;t<80;++t)n=s[t-3]^s[t-8]^s[t-14]^s[t-16],s[t]=n<<1|n>>>31;for(t=0;t<20;t+=5)e=r&a|~r&c,n=o<<5|o>>>27,i=n+e+i+1518500249+s[t]<<0,r=r<<30|r>>>2,e=o&r|~o&a,n=i<<5|i>>>27,c=n+e+c+1518500249+s[t+1]<<0,o=o<<30|o>>>2,e=i&o|~i&r,n=c<<5|c>>>27,a=n+e+a+1518500249+s[t+2]<<0,i=i<<30|i>>>2,e=c&i|~c&o,n=a<<5|a>>>27,r=n+e+r+1518500249+s[t+3]<<0,c=c<<30|c>>>2,e=a&c|~a&i,n=r<<5|r>>>27,o=n+e+o+1518500249+s[t+4]<<0,a=a<<30|a>>>2;for(;t<40;t+=5)e=r^a^c,n=o<<5|o>>>27,i=n+e+i+1859775393+s[t]<<0,r=r<<30|r>>>2,e=o^r^a,n=i<<5|i>>>27,c=n+e+c+1859775393+s[t+1]<<0,o=o<<30|o>>>2,e=i^o^r,n=c<<5|c>>>27,a=n+e+a+1859775393+s[t+2]<<0,i=i<<30|i>>>2,e=c^i^o,n=a<<5|a>>>27,r=n+e+r+1859775393+s[t+3]<<0,c=c<<30|c>>>2,e=a^c^i,n=r<<5|r>>>27,o=n+e+o+1859775393+s[t+4]<<0,a=a<<30|a>>>2;for(;t<60;t+=5)e=r&a|r&c|a&c,n=o<<5|o>>>27,i=n+e+i-1894007588+s[t]<<0,r=r<<30|r>>>2,e=o&r|o&a|r&a,n=i<<5|i>>>27,c=n+e+c-1894007588+s[t+1]<<0,o=o<<30|o>>>2,e=i&o|i&r|o&r,n=c<<5|c>>>27,a=n+e+a-1894007588+s[t+2]<<0,i=i<<30|i>>>2,e=c&i|c&o|i&o,n=a<<5|a>>>27,r=n+e+r-1894007588+s[t+3]<<0,c=c<<30|c>>>2,e=a&c|a&i|c&i,n=r<<5|r>>>27,o=n+e+o-1894007588+s[t+4]<<0,a=a<<30|a>>>2;for(;t<80;t+=5)e=r^a^c,n=o<<5|o>>>27,i=n+e+i-899497514+s[t]<<0,r=r<<30|r>>>2,e=o^r^a,n=i<<5|i>>>27,c=n+e+c-899497514+s[t+1]<<0,o=o<<30|o>>>2,e=i^o^r,n=c<<5|c>>>27,a=n+e+a-899497514+s[t+2]<<0,i=i<<30|i>>>2,e=c^i^o,n=a<<5|a>>>27,r=n+e+r-899497514+s[t+3]<<0,c=c<<30|c>>>2,e=a^c^i,n=r<<5|r>>>27,o=n+e+o-899497514+s[t+4]<<0,a=a<<30|a>>>2;this.h0=this.h0+o<<0,this.h1=this.h1+r<<0,this.h2=this.h2+a<<0,this.h3=this.h3+c<<0,this.h4=this.h4+i<<0},d.prototype.hex=function(){this.finalize();var e=this.h0,t=this.h1,n=this.h2,o=this.h3,r=this.h4;return a[e>>28&15]+a[e>>24&15]+a[e>>20&15]+a[e>>16&15]+a[e>>12&15]+a[e>>8&15]+a[e>>4&15]+a[15&e]+a[t>>28&15]+a[t>>24&15]+a[t>>20&15]+a[t>>16&15]+a[t>>12&15]+a[t>>8&15]+a[t>>4&15]+a[15&t]+a[n>>28&15]+a[n>>24&15]+a[n>>20&15]+a[n>>16&15]+a[n>>12&15]+a[n>>8&15]+a[n>>4&15]+a[15&n]+a[o>>28&15]+a[o>>24&15]+a[o>>20&15]+a[o>>16&15]+a[o>>12&15]+a[o>>8&15]+a[o>>4&15]+a[15&o]+a[r>>28&15]+a[r>>24&15]+a[r>>20&15]+a[r>>16&15]+a[r>>12&15]+a[r>>8&15]+a[r>>4&15]+a[15&r]},d.prototype.toString=d.prototype.hex,d.prototype.digest=function(){this.finalize();var e=this.h0,t=this.h1,n=this.h2,o=this.h3,r=this.h4;return[e>>24&255,e>>16&255,e>>8&255,255&e,t>>24&255,t>>16&255,t>>8&255,255&t,n>>24&255,n>>16&255,n>>8&255,255&n,o>>24&255,o>>16&255,o>>8&255,255&o,r>>24&255,r>>16&255,r>>8&255,255&r]},d.prototype.array=d.prototype.digest,d.prototype.arrayBuffer=function(){this.finalize();var e=new ArrayBuffer(20),t=new DataView(e);return t.setUint32(0,this.h0),t.setUint32(4,this.h1),t.setUint32(8,this.h2),t.setUint32(12,this.h3),t.setUint32(16,this.h4),e};var l=function(e){return function(t){return new d(!0).update(t)[e]()}},p=l("hex");s.forEach((function(e){p[e]=l(e)}));var f=p;function m(e){if(!e)return-1;var t=e.length;if(1===t)return e.charCodeAt();for(var n=[],o=0;o<t;o++)n.push(e.charCodeAt(o));return n}var h=function(e){var t=e;if("string"!==typeof e){t=[];var n=Object.keys(e);n=n.map((function(e){return{key:e,val:m(e)}})).sort((function(e,t){for(var n=0;n<e.val.length;n++)if(e.val[n]!==t.val[n])return e.val[n]-t.val[n]})),n.forEach((function(n){t.push("".concat(n.key,"=").concat(e[n.key]))})),t=t.join("&")}return f(t)},g=n("1f03"),v=n.n(g),_=n("4aba"),b=n.n(_),w=window.GLOBAL_ENV.SSO_API,C={login:"LOGIN_SMS",register:"REGISTER_SMS",changePwd:"CHANGE_PWD_SMS",bind:"BIND_MOBILE_SMS"};function k(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(e=Object.assign({},e,{appid:window.TENANT_CONFIG.APP_ID}),t){var n=Object.assign({},e,{appKey:window.TENANT_CONFIG.APP_KEY});e.signature=h(n)}return e}var y=function(e){return Object(r["a"])({method:"post",url:"".concat(w,"/v2/user/login"),data:e,retry:!1,noReLogin:!0}).then((function(e){return e.data})).catch((function(e){return Promise.reject(e)}))},A=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"login",n={type:C[t],to:e};return n=k(n),Object(r["a"])({url:"".concat(w,"/v1/sms/send-code"),method:"POST",data:n,retry:!1}).then((function(e){return e.errcode?Promise.reject(e.message):Promise.resolve(!0)}))},P=function(e){return e=k(e),Object(r["a"])({url:"".concat(w,"/v2/token/refresh"),method:"post",data:e,retry:!1}).then((function(e){return e.errcode?Promise.reject(e.message):Promise.resolve(e.data)}))},j=function(e){return e=k(e),Object(r["a"])({url:"".concat(w,"/v2/user/login-by-ticket"),method:"post",data:e,retry:!1}).then((function(e){return e.errcode?Promise.reject(e.message):Promise.resolve(e.data)}))},T=function(e){return e=k(e),Object(r["a"])({url:"".concat(w,"/v2/user/login-by-token"),method:"post",data:e,retry:!1}).then((function(e){return e.errcode?Promise.reject(e.message):Promise.resolve(e.data)}))},O=function(e){return e=k(e),Object(r["a"])({url:"".concat(w,"/v2/user/reset-password"),method:"post",data:e,retry:!1}).then((function(e){return e.errcode?Promise.reject(e.message):Promise.resolve(e.data)}))},E=function(e){return Object(r["a"])({url:"".concat(w,"/v2/user/bind-mobile"),method:"post",data:k(e)}).then((function(e){return e.errcode?Promise.reject(e.message):Promise.resolve(e.data)}))},N=function(){var e=v.a.getToken(),t={token:e};if(!e){var n=v.a.getUserContext("ticket");t={ticket:n}}return Object(r["a"])({url:"".concat(w,"/v2/user/relate-tenant-list"),method:"get",data:t}).then((function(e){return e.errcode?Promise.reject(e.message):Promise.resolve(e.data)}))},x=function(e){var t=window.TENANT_CONFIG.APP_ID,n=window.TENANT_CONFIG.APP_KEY,a=b()(),c=parseInt((new Date).getTime()/1e3),i={appid:t,clientIdentity:{appid:t,timestamp:c,nonce:a,signature:h({appid:t,appkey:n,nonce:a,timestamp:c})},ssoType:"THIRD_TOKEN"},s=Object.assign({},i,e);console.warn(s);var u={loginType:"MOBILE_AND_SMS",appid:"TjqhxiyUEkYt5beLfek1bxBMvF8zMtrZ",mobile:"13000000000",smsCode:6604,device_id:"0cbfe83d31a3c82c"};return Object(r["a"])({method:"post",url:"".concat(w,"/v2/user/login"),data:u,retry:!1,noReLogin:!0}).then((function(e){return Object(o["a"])(Object(o["a"])({},e.data),u)})).catch((function(e){return Promise.reject(e)}))}},c184:function(e,t,n){e.exports=n.p+"img/update-background.4d8048b5.png"},c325:function(e,t,n){"use strict";n("c726"),n("0bd5"),n("b784"),n("9b42");var o=n("cc5d"),r=(n("72b3"),n("1d7a"),n("402f"),n("270f"),n("1f03")),a=n.n(r),c=0,i=function(e){return m(s(f(e)))};function s(e){for(var t=e,n=Array(80),o=1732584193,r=-271733879,a=-1732584194,c=271733878,i=-1009589776,s=0;s<t.length;s+=16){for(var f=o,m=r,h=a,g=c,v=i,_=0;_<80;_++){n[_]=_<16?t[s+_]:p(n[_-3]^n[_-8]^n[_-14]^n[_-16],1);var b=l(l(p(o,5),u(_,r,a,c)),l(l(i,n[_]),d(_)));i=c,c=a,a=p(r,30),r=o,o=b}o=l(o,f),r=l(r,m),a=l(a,h),c=l(c,g),i=l(i,v)}return new Array(o,r,a,c,i)}function u(e,t,n,o){return e<20?t&n|~t&o:e<40?t^n^o:e<60?t&n|t&o|n&o:t^n^o}function d(e){return e<20?1518500249:e<40?1859775393:e<60?-1894007588:-899497514}function l(e,t){var n=(65535&e)+(65535&t),o=(e>>16)+(t>>16)+(n>>16);return o<<16|65535&n}function p(e,t){return e<<t|e>>>32-t}function f(e){for(var t=1+(e.length+8>>6),n=new Array(16*t),o=0;o<16*t;o++)n[o]=0;for(o=0;o<e.length;o++)n[o>>2]|=e.charCodeAt(o)<<24-8*(3&o);return n[o>>2]|=128<<24-8*(3&o),n[16*t-1]=8*e.length,n}function m(e){for(var t=c?"0123456789ABCDEF":"0123456789abcdef",n="",o=0;o<4*e.length;o++)n+=t.charAt(e[o>>2]>>8*(3-o%4)+4&15)+t.charAt(e[o>>2]>>8*(3-o%4)&15);return n}var h,g={hex_sha1:i,core_sha1:s,sha1_ft:u,sha1_kt:d,safe_add:l,rol:p,AlignSHA1:f,binb2hex:m},v=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("van-action-sheet",{attrs:{actions:e.list,"cancel-text":"取消"},on:{select:e.onSelect,cancel:e.onCancel},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}})},_=[],b=n("28f8"),w=n("6d12"),C={components:Object(b["a"])({},w["a"].name,w["a"]),data:function(){return{show:!1,list:[],onClick:null}},methods:{init:function(e){this.list=e.list,this.onClick=e.onClick},click:function(e){"function"===typeof this.onClick&&this.onClick(e)},onCancel:function(){this.show=!1},onSelect:function(e){var t=e;"function"===typeof this.onClick&&this.onClick(t)}}},k=C,y=(n("200c"),n("5d22")),A=Object(y["a"])(k,v,_,!1,null,"1bf4b134",null),P=A.exports,j=n("a593");if(!h){var T=j["default"].extend(P);h=new T({el:document.createElement("div")}),document.body.appendChild(h.$el)}var O={list:[],onClick:null},E={open:function(e){e&&(e=Object.assign({},O,e),h.init(e)),h.show=!0},show:function(){h.show=!0},hide:function(){h.show=!1}},N=E,x=n("f46c"),S=n("d1d2"),L=n.n(S),I=function(e,t,n,o,r){var a=e+r+encodeURIComponent(n)+o+t,c=g.hex_sha1(a);return c},U=function(e,t,n){var o=a.a.getUserContext(),r=o.account,c=o.mobile,i=o.id,s="prod"!=window.GLOBAL_ENV.APP_ENV?"YDZJCSZH":o.tenantCode,u=I(t,n,r,c,s),d="app_code="+t+"&tenant_id="+s+"&phone="+c+"&user_name="+encodeURIComponent(r)+"&userguid="+i+"&token="+u;return e+d},B=function(e){Object(x["openMWebview"])(e,{navBar:{barColor:"#FFFFFF",barButtonColor:"#000000",barTitle:"在线客服",barPosition:1},isShowRefresh:!1,onOpen:function(){N.hide()},onError:function(e){console.log("err ======> ",e)}})},D={open:function(){return L.a.getHasNetwork().then((function(e){if(!e)return j["default"].prototype.$toast("您的当前网络不可用，请检查您的网络设置",2e3),Promise.reject({message:"您的当前网络不可用，请检查您的网络设置"});var t=window.GLOBAL_ENV.ONLINE_HEPLER,n=[];return t.list.forEach((function(e){var o=U(t.host,e.appCode,e.key);n.push({name:e.name,appCode:e.product,url:o})})),1===n.length?B(n[0].url):(console.log("openMWebview ====> ",x["openMWebview"]),N.open({list:n,onClick:function(e){B(e.url),console.log(e)}}))}))}},R=n("c614"),z=n("bc58"),F=n.n(z),V=n("10c8"),M=window.GLOBAL_ENV.SSO_API,G=function(){var e={appid:window.TENANT_CONFIG.APP_ID,responseType:"code",scope:"web"};return Object(V["a"])({method:"get",url:"".concat(M,"/v2/oauth2/auth-code"),data:e}).then((function(e){return 0===e.errcode?e.data.code:Promise.reject(e.message)})).catch((function(e){throw new Error(e)}))},H={appAuth:function(){return L.a.getHasNetwork().then((function(e){return e?G().then((function(e){return e})):Promise.reject("您的当前网络不可用，请检查您的网络设置")}))}},K=n("6a2c"),W=(n("445a"),["com.mysoft.core","cordova-plugin-network-information","com.mysoft.mwebview","com.mysoft.mcordovawebview","com.mysoft.wkwebview","com.mysoft.mimagebrowser","com.mysoft.meditphoto","com.mysoft.mimagepicker"]),$=["cordova-plugin-device","com.mysoft.mbarcode","com.mysoft.mfilemanager","com.mysoft.maliyunoss","com.mysoft.mdownloader","com.mysoft.baidumap","cordova-plugin-keyboard","com.mysoft.mutils"],J=W.concat($),Y=W,Q=!1,q=function(e,t){window.MCordovaWebView.Show(e,(function(){Q=!1,console.log("打开成功")}),(function(e){Q=!1,console.error(e)}),{injectPlugins:t})},X=function(e){var t=F.a.getString("super_refresh_token");t?(e+="&access_token="+a.a.getToken(),Q=!0,q(e,J)):K["a"].refreshToken().then((function(t){t&&(F.a.set("super_refresh_token",t,0,600),e+="&access_token="+t,Q=!0,q(e,J))}))},Z=function(e){e+="&access_token="+a.a.getToken(),Q=!0,H.appAuth().then((function(t){e+="&code="+t,q(e,Y)})).catch((function(){q(e,Y)}))},ee={openUrlWebView:function(e,t){var n=this;Q||L.a.getHasNetwork().then((function(o){if(o){var r=F.a.getObject("cjap_zjapp_home_page_default_project")||{};e+="?project_id="+r.id+"&project_name="+encodeURI(r.name),"external"===t?Z(e):X(e)}else n.$toast("请先联网在进行此操作")}))}},te={"online-help":D.open};t["a"]={goto:function(e){var t=this;if(window[e.product]&&window[e.product].appStatus&&!window[e.product].appStatus.status)return j["default"].prototype.$toast(window[e.product].appStatus.message||"玩命开发中"),!1;if(e.params&&"string"===typeof e.params)try{e.params=JSON.parse(e.params)}catch(i){console.log(i)}if(e.confirm)return j["default"].prototype.$dialog.confirm({title:e.confirm.title||"",message:e.confirm.message}).then((function(){e.confirm=null,t.goto(e)})),!1;if(!e.url||!e.url.includes("http")){if(e.router)return console.log({path:e.router,query:e.params||{}}),o["a"].push({path:e.router,query:e.params||{}});if(e.page){var n=e.page.params,r=a.a.getToken();if(r){var c=e.page.url.replace("{token}",r);return R["a"].openUrl(c,n.title,n.options)}}return e.func&&e.product&&window["__module_entry_".concat(e.product,"__")]&&window["__module_entry_".concat(e.product,"__")][e.func]&&window["__module_entry_".concat(e.product,"__")][e.func](e.params,{from:"app"}),"function"===typeof te[e.code]&&te[e.code](e.params||{})}ee.openUrlWebView(e.url,e.type)}}},c614:function(e,t,n){"use strict";n("402f");var o=n("d211"),r=n("dfac"),a=n.n(r),c=n("aa77"),i=n("0d9f");t["a"]={getBindInfo:function(){var e=c["a"].defer();if(window.PushNotification)return a.a.ready().then((function(){window.PushNotification.getBindInfo((function(t){t=t&&i["a"].isObject(t)?t:JSON.parse(t||"{}"),e.resolve(t||{})}),(function(t){e.reject(t)}))})),e.promise;e.resolve({})},openUrl:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null;function i(e){console.log("closeWebview :",e),"function"===typeof a&&a(e),window.closeWebview=null}window.closeWebview=i;var s={url:e,navBar:{barColor:"#FFFFFF",barButtonColor:"#000000",barTitle:t,barPosition:1},isShowRefresh:!1,bindCallMethod:"closeWebview"};for(var u in n=Object.assign({},s,n),n)null===n[u]&&delete n[u];console.log("options ====> ",n);var d={onOpen:function(){console.log("开启webview"),"function"===typeof r&&r()},onClose:function(){console.log("关闭webview")}},l=function(e){console.error(e),"function"===typeof c&&c()};return window.MWebview.open(Object(o["a"])(Object(o["a"])({},n),{},{adjustSafeArea:!1}),d,l)},scanQRCode:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(!window.MBarcode)return Promise.reject("无法启动扫码功能");var o=window.cordova.require("cordova/plugin_list").metadata["com.mysoft.mbarcode"];return a.a.ready().then((function(){var r=c["a"].defer();if(o>"1.2.2")window.MBarcode.scanQRCode({onCancel:function(){console.log("onCancel"),r.reject("取消扫码")},onCannotScan:function(){console.log("onCannotScan"),n(),r.reject("无法扫描")},onSuccess:function(e){console.log("scanQRCode onSuccess",e),r.resolve(e)},onError:function(e){console.log("scanQRCode onError",e),console.error(e),r.reject(e)}},{naviTitle:e,isFlashSwitchShow:t});else{var a={title:e,isFlashSwitchShow:t,callback:n};window.MBarcode.scanQRCode((function(e){r.resolve(e)}),(function(e){console.error(e),r.reject(e)}),a)}return r.promise}))},setDeviceOrientation:function(){window.MUtils&&window.MUtils.setDeviceOrientation&&window.MUtils.setDeviceOrientation("portrait",(function(){console.log("setDeviceOrientation success")}),(function(e){console.error("setDeviceOrientation error",e)}))},savePicToAlbum:function(e){if(window.MUtils&&window.MUtils.savePicToAlbum&&e){var t=c["a"].defer();return window.MUtils.savePicToAlbum(e,(function(){console.log("图片保存到相册成功"),t.resolve()}),(function(n){console.error("图片保存到相册失败:",n,e),t.reject(n)})),t.promise}}}},c8da:function(e,t,n){"use strict";n("72b3"),n("a543"),n("989e"),n("402f"),n("270f");var o=n("9d46"),r=n("e98e"),a=n.n(r),c=(n("445a"),n("cca2"),n("fae2"),n("2db5"),n("6ab7"),n("0ae3")),i=n("7560"),s=n("1f03"),u=(n("e583"),n("0bd5"),n("836b"),n("752e")),d=n.n(u),l=n("d211"),p=n("10c8"),f=window.GLOBAL_ENV.APP_API_URL.ZJ,m=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t={},n="".concat(f,"/param/get-oss-config");return e&&(t.type=e),Object(p["a"])({url:n,method:"get",data:Object(l["a"])(Object(l["a"])({},t),{},{unified_token:Object(s["getToken"])(),_t:Math.random()})}).then((function(e){var t=e.data;return t&&t.errmsg?Promise.reject(t):t&&t.endPoint?t:(console.error({message:"getOssConfig: 服务器返回结果异常",remark:"result:$JSON.stringify(result)} url:".concat(n)}),Promise.reject("服务器返回结果异常"))}))},h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=Object(s["getUserContext"])();return e?"".concat(f,"/param/get-sts-token?unified_token=").concat(t.accessToken,"&type=").concat(e):"".concat(f,"/param/get-sts-token?unified_token=").concat(t.accessToken)},g=n("418c"),v=function(e){var t=new RegExp("[^/]+$");return t.exec(e)},_=function(){return m("minio").then((function(e){return e.stsUrl=h("minio"),e}))},b={uploadFiles:function(e,t,n,o){var r,a=[];return e&&0!=e.length?_().then((function(t){r=t;var n,c={},i=[],u=Object(s["getUserContext"])();return c.endPoint=t.endPoint,c.federationAuthUrl=t.stsUrl+(~t.stsUrl.indexOf("?")?"&":"?")+"o=".concat(u.tenantCode||window.TENANT_CONFIG.TENANT_CODE),e.forEach((function(e){n="mobilecheckquality/upload/"+(o||v(e)),i.push({bucket:t.bucketName,objectKey:n,objectLocalPath:e})})),c.data=i,d.a.uploadFiles(c,0,(function(e){e.fileItem?a.push("http://"+r.customDomain+"/"+e.fileItem.objectKey):e.objectKey&&a.push("http://"+r.customDomain+"/"+e.objectKey)})).then((function(){return Promise.resolve(g["b"].uniq(a))}))})).catch((function(e){return console.error("upload_feed_back_files",e),Promise.reject(e)})):Promise.resolve(a)}},w=b,C=n("d1d2"),k=n.n(C),y=n("dfac"),A=n.n(y),P=n("a593"),j=n("aa77"),T={msgHandler:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!(e&&window["__module_entry_".concat(e,"__")]&&window["__module_entry_".concat(e,"__")].superAppMsgCenter))return!1;window["__module_entry_".concat(e,"__")].superAppMsgCenter(t,n)},getFeedbackFiles:function(e){return e&&window["__module_entry_".concat(e,"__")]&&window["__module_entry_".concat(e,"__")].getFeedbackFiles?window["__module_entry_".concat(e,"__")].getFeedbackFiles().catch((function(t){console.error("window[__module_entry_".concat(e,"__].getFeedbackFiles() 失败"),t),Promise.resolve([])})):Promise.resolve([])}},O={},E=n("1873");function N(){var e=[],t=[];return Object.keys(E).forEach((function(e){t.push(T.getFeedbackFiles(e))})),Promise.all(t).then((function(t){return t.forEach((function(t){e=e.concat(t)})),e}))}O.submitFeedback=function(e){var t,n=Object(s["getUserContext"])();return e.images&&e.images.length&&(t=w.uploadFiles(e.images)),Promise.all([t,Promise.resolve(A.a.getDeviceInfo()),c["a"].getAppFullVersion()]).then((function(t){return e=Object.assign({},e,{tenant_code:n.tenantCode,user_account:n.account,user_name:n.tenantInfo.tenantName||n.realname||n.userName||"",user_mobile:n.userMobile,user_id:n.userId,image_urls:t[0],device_object:JSON.stringify(t[1]),app_version:t[2].fullVersion,app_source:"super_app"}),e.image_urls&&e.image_urls.length?e.image_urls=e.image_urls.join(";"):e.image_urls="",delete e.images,console.log("submitFeedback:",e),Object(i["b"])(e)}))},O.uploadDebugFile=function(){return N().then((function(e){return Promise.resolve(e[0])}))},O.feedBack=function(e){var t=j["a"].defer();return k.a.getHasNetwork().then((function(n){return n?Promise.resolve().then((function(){return O.uploadDebugFile().then((function(e){return e||""}))})).then((function(n){for(var o=[],r=0;r<e.photoList.length;r++)o.push(e.photoList[r].img_localpath);return O.submitFeedback({images:o,remark:e.remark,type:e.type,debug_file:n}).then((function(){P["default"].prototype.$toast.clear(),t.resolve("感谢您的积极反馈，我们会尽快修复或完善您反馈的相关功能")}))})).catch((function(e){P["default"].prototype.$toast.clear(),console.error(e||"提交失败，请稍后重试"),t.reject("提交失败，请稍后重试")})):(P["default"].prototype.$toast.clear(),P["default"].prototype.$toast("您的当前网络不可用，请检查您的网络设置",2e3),Promise.reject({message:"您的当前网络不可用，请检查您的网络设置"}))})),t.promise};var x=O,S=(n("79a8"),function(){var e=new Date,t=e.getFullYear(),n=e.getMonth()+1,o=e.getDate(),r=e.getHours(),a=e.getMinutes(),c=e.getSeconds();return n<10&&(n="0"+n),o<10&&(o="0"+o),r<10&&(r="0"+r),a<10&&(a="0"+a),c<10&&(c="0"+c),"".concat(t,"-").concat(n,"-").concat(o," ").concat(r,":").concat(a,":").concat(c)});function L(){var e={};return e.promise=new Promise((function(t,n){e.resolve=t,e.reject=n})),e}var I=function(e,t){return t=t||0,console.log("openImageBrowser: ",e,t),A.a.ready().then((function(){var n=L();return window.MImageBrowser.openWithCallback(e,t,{onOpen:function(){console.log("openImageBrowser: onOpen")},onError:function(e){console.log("openImageBrowser: onError (open error)"),console.error("openImageBrowser:",e),n.reject(e)},onDownloadImage:function(e){console.log("openImageBrowser: onDownloadImage",e),e&&e.url&&e.path?n.notify(e):console.error("openImageBrowser: invalid saved info -> ",e)},onClose:function(){console.log("openImageBrowser: onClose"),n.resolve()}}),n.promise}))},U=function(e){var t=new RegExp("[^?]+$"),n=t.exec(e),o={};return n=n[0].split("&"),n.forEach((function(e){var t=e.split("=");o[t[0]]=t[1]})),o},B={getNowDate:S,defered:L,openImageBrowser:I,getUrlParams:U},D=n("4aba"),R=n.n(D);t["a"]=function(){var e={photoList:[],remark:"",uploadLog:!0,currType:"optimumSuggest"};return{model:e,actions:[{name:"拍照",index:0},{name:"从手机相册选择",index:1}],init:function(t){e.photoList=[],e.remark="",e.uploadLog=!0,e.currType="optimumSuggest",t&&t.fullPath&&e.photoList.push({img_localpath:t.fullPath,img_view:t.view_path?t.view_path:a.a.getWebViewPath(t.fullPath)})},removeImg:function(t){e.photoList.splice(t,1)},takePhoto:function(t){var n=a.a.getPrefixPath("feedback").fullPath+R()()+".jpg",r={full_path:n,view_path:a.a.getWebViewPath(n)},c=Object(s["getUserContext"])().user_name,i=B.getNowDate(),u={withGraffiti:!0,text:c+" "+i+" 拍摄"};return t&&(u.fromAlbum=t),o["a"].takePhoto(u,r.full_path).then((function(){e.photoList.push({img_localpath:r.full_path,img_view:r.view_path})})).catch((function(e){if(e.notAllow)return Promise.reject("请开启对 相机/相册 的访问权限")}))},submit:function(){return""===e.remark?Promise.reject("请输入意见反馈"):e.remark.length>200?Promise.reject("字数不能超过200字"):(P["default"].prototype.$toast.clear(),P["default"].prototype.$toast.loading({mask:!0,message:"正在提交...",duration:0}),x.feedBack({photoList:e.photoList,remark:e.remark}))},showLargeImg:function(t){var n=[];e.photoList.forEach((function(e){-1==e.img_localpath.indexOf("file:///")?n.push("file://".concat(e.img_localpath)):n.push(e.img_localpath)})),B.openImageBrowser(n,t)}}}()},cc5d:function(e,t,n){"use strict";n("1d7a"),n("402f"),n("332c");var o=n("1f03"),r=n.n(o),a=n("a593"),c=n("a81e"),i=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"login-container blue-theme"},[o("app-header",{attrs:{border:!0,useClickLeft:!0},on:{"click-left":e.closeWebview}}),o("section",[o("div",{staticClass:"login-error"},[o("img",{staticClass:"error-img",attrs:{src:n("90a3"),alt:""}}),o("p",{staticClass:"error-text"},[e._v("网络异常，请重新刷新")]),o("app-button",{staticClass:"refresh-button",attrs:{slot:"button",disabled:e.loading},on:{click:e.doLogin},slot:"button"},[e.loading?o("van-loading",{attrs:{color:"#ffffff",size:"18px"}}):o("p",[e._v(" 重新刷新 ")])],1)],1)]),o("footer",{staticClass:"footer"},[o("p",{staticClass:"copyright"},[e._v(" Copyright ©2015-"+e._s((new Date).getFullYear())+" 明源云链 版权所有 ")])])],1)},s=[],u=n("5047"),d=n("34a8"),l={components:{appButton:u["a"]},data:function(){return{loading:!1}},activated:function(){this.loading=!1},methods:{doLogin:function(){var e=this;console.log("当前token为===========>",Object(o["getToken"])()),this.loading=!0,window.pmcEventMsgCatch&&window.pmcEventMsgCatch.login&&Object(d["doEvent"])(window.pmcEventMsgCatch.login).then((function(){e.loading=!1})).catch((function(t){e.loading=!1,console.log(t)}))},closeWebview:function(){console.log("============== 隐藏webview ============"),Object(d["closeWebview"])()}}},p=l,f=(n("a1d7"),n("5d22")),m=Object(f["a"])(p,i,s,!1,null,"6bcbfb5b",null),h=m.exports,g=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("app-header",{attrs:{title:"调试页面"}}),n("div",{staticClass:"block"}),n("div",{staticClass:"list-con"},[n("div",{staticClass:"item-box",on:{click:e.openDebuggerTool}},[e._v("开启调试工具")])])],1)},v=[],_={methods:{openDebuggerTool:function(){window.MDebugging.show()}}},b=_,w=(n("d005"),Object(f["a"])(b,g,v,!1,null,"14187cb0",null)),C=w.exports,k=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.isInit?n("div",{staticClass:"wrapper"},[n("div",{staticClass:"main"},[n("keep-alive",[n("router-view")],1)],1)]):e._e()},y=[],A=(n("1f70"),n("a543"),n("d211")),P=[{text:"工作台",icon:"super-app-icon-workbench",activeIcon:"super-app-icon-workbench-light",routeName:"workbench",subs:["noticePage"],dotKey:"isShowWorkbenchDot"},{text:"待办",icon:"super-app-icon-todo",activeIcon:"super-app-icon-todo-light",routeName:"todo",subs:["checkProblemListPage"],dotKey:"isShowTodoDot"},{text:"我",icon:"super-app-icon-user",activeIcon:"super-app-icon-user-light",subs:[],routeName:"user",dotKey:"isShowMyDot"}],j=n("b2ec"),T=n("cf6b"),O=!1,E={name:"Layout",components:{},data:function(){return{menuItems:P,activeMenuIndex:0}},computed:Object(A["a"])({},Object(T["c"])({isInit:function(e){return e.app.isInit}})),watch:{$route:function(){this.setIndex()}},created:function(){O||this.setIndex()},methods:{setIndex:function(){var e=this.$route.name;this.activeMenuIndex=this.menuItems.findIndex((function(t){return t.routeName&&t.routeName===e||Array.isArray(t.subs)&&t.subs.indexOf(e)>-1}))},change:function(){j["a"].doUpdate()}}},N=E,x=(n("bc83"),Object(f["a"])(N,k,y,!1,null,"d2bc21e4",null)),S=x.exports;a["default"].use(c["a"]);var L=[{path:"/debugger",name:"debugger",meta:{ignore:!0},component:C},{path:"/login",name:"login",meta:{ignore:!0},component:h},{path:"/bind-phone",name:"bindPhone",meta:{ignore:!0},component:function(){return n.e("chunk-7783fb4c").then(n.bind(null,"1364"))}},{path:"/tenant-list",name:"tenantList",meta:{ignore:!0},component:function(){return n.e("chunk-71422b43").then(n.bind(null,"b629"))}},{path:"/verify-tenant-list",name:"verifyTenantList",meta:{ignore:!0},component:function(){return n.e("chunk-21d6187a").then(n.bind(null,"60de"))}},{path:"/",name:"layout",component:S,redirect:"workbench",children:[{path:"workbench",name:"workbench",component:function(){return n.e("chunk-34c62f1b").then(n.bind(null,"722d"))},meta:{isNav:!0}},{path:"todo",name:"todo",component:function(){return Promise.all([n.e("chunk-2af3d721"),n.e("chunk-747b2fd5")]).then(n.bind(null,"03e5"))},meta:{isNav:!0}},{path:"user",name:"user",component:function(){return n.e("chunk-aa27dcea").then(n.bind(null,"2b9f"))},meta:{isNav:!0}}]},{path:"/message/index",name:"messageIndex",component:function(){return Promise.all([n.e("chunk-2af3d721"),n.e("chunk-38009904")]).then(n.bind(null,"0494"))}},{path:"/message/detail/:id",name:"messageDetail",component:function(){return n.e("chunk-19db1f44").then(n.bind(null,"a2f4"))}},{path:"/user/permission-apply",name:"permissionApply",component:function(){return n.e("chunk-7f34e88a").then(n.bind(null,"22ca"))}},{path:"/user/apply-info",name:"applyInfo",component:function(){return n.e("chunk-05a2d4d5").then(n.bind(null,"db3e"))}},{path:"/user/project-manage",name:"projectManage",component:function(){return n.e("chunk-800d937c").then(n.bind(null,"b071"))}},{path:"/user/feedback",name:"feedback",component:function(){return n.e("chunk-344f0271").then(n.bind(null,"2f97"))}},{path:"/user/feedback/history",name:"feedbackHistory",component:function(){return n.e("chunk-64b7eaba").then(n.bind(null,"2bce"))}},{path:"/user/info",name:"userInfo",component:function(){return n.e("chunk-c04793a4").then(n.bind(null,"b7be"))}},{path:"/user/password",name:"password",component:function(){return n.e("chunk-6ff8fcae").then(n.bind(null,"5367"))}},{path:"/user/setting",name:"setting",component:function(){return n.e("chunk-2fd05cec").then(n.bind(null,"a0db"))}},{path:"/user/tenant-list",name:"userTenantList",component:function(){return n.e("chunk-a2754fb0").then(n.bind(null,"1fe7"))}},{path:"/user/info-detail",name:"infoDetail",component:function(){return n.e("chunk-e444e4f6").then(n.bind(null,"a0a8"))}},{path:"/user/contract-manage",name:"contractManage",component:function(){return n.e("chunk-20aca89a").then(n.bind(null,"fb1f"))}},{path:"/user/apply-detail",name:"applyDetail",component:function(){return n.e("chunk-3e72d94d").then(n.bind(null,"ccbb"))}},{path:"/user/about",name:"about",component:function(){return n.e("chunk-25adf8a2").then(n.bind(null,"3d22"))}},{path:"/announcement/list",name:"announcementIndex",component:function(){return n.e("chunk-643716da").then(n.bind(null,"8b57"))}},{path:"/announcement/detail/:id",name:"announcementDetail",component:function(){return n.e("chunk-e784831a").then(n.bind(null,"ec17"))}}],I=new c["a"]({mode:"hash",base:"",routes:L});I.beforeEach((function(e,t,n){if(console.log("routeFrom.name =====> ",t.name),console.log("routeTo.name =====> ",e.name),e.meta.ignore||window.location.hash.startsWith("#/login")||r.a.getIsLogged())return n();function o(){console.log("redirectToLogin routeTo.name =====> ",e.name),n({path:"/login",query:{redirectFrom:e.fullPath}})}o()}));t["a"]=I},d005:function(e,t,n){"use strict";n("9cc1")},dba9:function(e,t,n){"use strict";n("5ede")},dd80:function(e,t,n){},e539:function(e,t,n){},e7e3:function(e,t,n){window.TENANT_CONFIG={appName:"智慧工程APP",appCode:"AppSmartEngineer",adCode:"super_app",APP_YY_CODE:"appse",APP_PRODUCT_CODE:"appse_test",TENANT_CODE:"cjap",TENANT_NAME:"cjap",ONLY_TENANT:!0,APP_ID:"TjqhxiyUEkYt5beLfek1bxBMvF8zMtrZ",APP_KEY:"3hJgk3KUpPCKYV2BSLLWymUi0SXRlrCK"}},eb32:function(e,t,n){"use strict";n("402f"),n("0bd5"),n("9b42"),n("332c"),n("6ab7"),n("6a61");var o=n("d211"),r=n("2e91"),a=n("bc58"),c=n.n(a),i=n("1f03"),s=n.n(i),u=n("cc43"),d=n.n(u),l=n("d1d2"),p=n.n(l),f=n("6a2c"),m=n("c079"),h=n("3e25"),g=n("3ea9"),v=n("a593"),_=n("cc5d"),b=n("9e7d"),w=n("4420"),C=(n("2db5"),n("dfac")),k=n.n(C),y=n("0ae3"),A=n("c614"),P={getBaseBindInfo:function(){return Promise.all([Promise.resolve(k.a.getDeviceInfo()),A["a"].getBindInfo()]).then((function(e){return{deviceId:e[0].uuid,os:e[0].platform,clientId:e[1].channelId}})).catch((function(e){return console.error("getBaseBindInfo error",e),Promise.resolve({})}))},bind:function(){Promise.all([y["a"].getAppFullVersion(),Promise.resolve(k.a.getDeviceInfo()),A["a"].getBindInfo()]).then((function(e){console.log("bind ======> ",e);var t=s.a.getUserContext(),n={tenantCode:t.tenantCode,appid:window.TENANT_CONFIG.APP_ID,unionid:t.unionId,deviceId:e[1].uuid,os:e[1].platform,clientId:e[2].channelId,manufacturer:e[1].manufacturer,model:e[1].model,serial:e[1].serial,uuid:e[1].uuid,osVersion:e[1].version,appVersion:e[0].fullVersion};return Object(h["a"])(n).catch((function(e){return console.error("绑定设备失败",e),Promise.resolve()}))}))}},j=n("4820"),T=n("371d"),O={init:function(e){return s.a.updateUser({id:"9e3dd387adbc63d82050cfff9961b2b9",unionId:"ec62a22211dc25086f148b5aac64638c9c6a",nickname:"Demo",realname:"Demo",username:"Demo",userId:"9e3dd387adbc63d82050cfff9961b2b9",userCode:e.phone,userName:"Demo",userMobile:e.phone,avatarUrl:"",avatarPath:"",mobile:e.phone}),b["default"].commit("app/INIT_STATUS",!0),window.location.hash.startsWith("#/login")&&_["a"].replace("/workbench"),window.GLOBAL_ENV.PRODUCTS=["gcxt"],w["a"].loader("gcxt")}},E=function(){var e=this,t=e.$createElement,o=e._self._c||t;return e.show?o("div",{staticClass:"show-update-info"},[o("div",{staticClass:"wrap"},[o("img",{staticClass:"update-img",attrs:{src:n("c184"),alt:""}}),o("van-swipe",{staticClass:"swipe-content",attrs:{autoplay:4e3,"indicator-color":"#ccc"}},e._l(e.info,(function(t,n){return o("van-swipe-item",{key:n},[o("div",{staticClass:"title"},[e._v(" "+e._s(t.name||"更新说明")+" ")]),o("div",{staticClass:"content"},e._l(t.content,(function(t,n){return o("p",{key:n},[e._v(e._s(t))])})),0)])})),1),o("div",{staticClass:"btn",on:{click:e.close}},[e._v("知道了")])],1)]):e._e()},N=[],x={name:"ShowUpdataInfo",data:function(){return{show:!1,info:[]}},methods:{open:function(e){this.show=!0,this.info=e},close:function(){this.show=!1,this.info=[]}}},S=x,L=(n("2b28"),n("5d22")),I=Object(L["a"])(S,E,N,!1,null,"1788ac1e",null),U=I.exports,B=[],D={};function R(){if(!B.length){var e=new(v["default"].extend(U))({el:document.createElement("div")});document.body.appendChild(e.$el),B.push(e)}return B[B.length-1]}function z(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};void 0===e&&(e={}),Object.assign(e,D);var t=R();return t}var F=z,V=n("82b4"),M=n("a275");function G(e,t,n){try{v["default"].prototype.$fab.init(e,t,n,{defaultShow:!0,env:window.GLOBAL_ENV.APP_ENV,navBar:{barColor:"#ffffff",barButtonColor:"#000000",barTitleColor:"#000000",barPosition:1,barFontSize:18},exRoute:["/login","/tenant-list","/bind-phone","/verify-tenant-list"]}).catch((function(e){console.log(e)}))}catch(o){console.error(o)}}function H(){var e=F(),t=c.a.getObject("web_version_update_info");t&&e.open(t),c.a.remove("web_version_update_info")}function K(){return W.apply(this,arguments)}function W(){return W=Object(r["a"])(regeneratorRuntime.mark((function e(){var t,n,o=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=o.length>0&&void 0!==o[0]?o[0]:"",!window.__YL__.logoutFuncs){e.next=16;break}e.t0=regeneratorRuntime.keys(window.__YL__.logoutFuncs);case 3:if((e.t1=e.t0()).done){e.next=16;break}if(n=e.t1.value,e.prev=5,!window.__YL__.logoutFuncs[n]){e.next=9;break}return e.next=9,window.__YL__.logoutFuncs[n]();case 9:e.next=14;break;case 11:e.prev=11,e.t2=e["catch"](5),console.log("插件模块退出操作出错：",e.t2);case 14:e.next=3;break;case 16:window.location.hash.startsWith("#/login")||(_["a"].replace({path:"/login",query:{logoutTip:t}}),T["a"].clearDefaultTenant()),s.a.logout(),s.a.updateUser({tenantCode:"",tenantId:"",tenantName:"",ticket:""}),b["default"].dispatch("app/reset");case 20:case"end":return e.stop()}}),e,null,[[5,11]])}))),W.apply(this,arguments)}var $=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return"yltest"===e.tenantCode&&"18148515223"===e.phone&&"prod"===window.GLOBAL_ENV.APP_ENV?(b["default"].commit("app/APP_STORE_ACCOUNT",!0),O.init(e).then((function(){v["default"].prototype.$toast.clear(),_["a"].replace("/workbench")}))):(H(),b["default"].commit("app/APP_STORE_ACCOUNT",!1),f["a"].getStateInfo().then((function(n){return n&&n.noPermission?Promise.resolve(n):f["a"].getUserInfo().then((function(n){return c.a.init(e.tenantCode,n||e.id),P.bind(),d.a.setHeader({userId:n,tenantCode:e.tenantCode}),t?Object(g["a"])():Promise.resolve()}))})).then((function(e){return v["default"].prototype.$toast.clear(),e&&e.noPermission?(K(),Promise.reject("退出登录")):(b["default"].commit("app/INIT_STATUS",!0),j["a"].getProducts().then((function(e){return e.length&&(window.GLOBAL_ENV.PRODUCTS=e),window.location.hash.startsWith("#/login")&&_["a"].replace("/workbench"),j["a"].updatePageConfig(V["a"].TODO_PAGE).then((function(){M["a"].getTodoCount(),M["a"].getTodoList()})),w["a"].loader(e).then((function(){var e=s.a.getUserContext();G(window.TENANT_CONFIG.adCode,e.tenantCode,e.id)}))})))})).catch((function(e){if(console.error(e),b["default"].commit("app/INIT_STATUS",!0),!e||!e.handled)return Promise.reject(e||"初始化异常，请稍后重试")})))},J=function(e,t){if(e.ticket){var n=window.TENANT_CONFIG.TENANT_CODE;t.ticket=e.ticket||"",s.a.setUserContext(t);try{n=T["a"].setTenantList(e.tenantList)}catch(o){return console.log(o),n="",Promise.reject(o&&o.message)}if(n)return t.tenantCode=n,f["a"].ticket2token(window.TENANT_CONFIG.TENANT_CODE)}else t.token=e.accessToken||"",t.accessToken=e.accessToken||"",t.refreshToken=e.refreshToken||"";return s.a.setUserContext(t),Promise.resolve(e)},Y=function(e){console.warn("登录成功处理",e);var t={name:"",id:"",deviceId:e.device_id,account:e.account||e.mobile,phone:e.account||e.mobile,userPassword:e.password||"",tenantCode:e.tenantCode||"",tenantId:"",ticket:e.ticket||"",loginType:1,loginBy:e.loginBy};return J(e,t).then((function(e){return e.accessToken?(console.warn("登陆后初始化",t),$(t)):e.ticket?(v["default"].prototype.$toast.clear(),void _["a"].replace("/tenant-list")):Promise.reject(Object(o["a"])(Object(o["a"])({},e),{},{known_error:!0,message:e.msg}))}))};t["a"]={loginByCode:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",o={loginType:"MOBILE_AND_SMS",appid:window.TENANT_CONFIG.APP_ID,mobile:e,smsCode:t};return n&&(o.tenantCode=n),this.doLogin(o)},loginByPwd:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"MOBILE",r={loginType:"ACCOUNT_AND_PWD",appid:window.TENANT_CONFIG.APP_ID,account:e,password:t};return n&&(r.tenantCode=n),this.doLogin(r,o)},doLogin:function(e,t){return v["default"].prototype.$toast.loading({mask:!0,message:"登录中...",duration:0}),d.a.setHeader({userId:"",tenantCode:""}),p.a.getHasNetwork().then((function(e){if(!e)return v["default"].prototype.$toast.clear(),v["default"].prototype.$toast("您的当前网络不可用，请检查您的网络设置",2e3),Promise.reject("您的当前网络不可用，请检查您的网络设置")})).then((function(){return e.device_id=window.device&&window.device.uuid||"",Object(m["b"])(e)})).then((function(n){return Y(Object(o["a"])(Object(o["a"])({},e),{},{loginBy:t},n))}))},initAfterLogin:$,logout:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return p.a.getHasNetwork().then((function(e){if(e){var t=s.a.getUserContext();return Object(h["c"])(t.tenantCode,t.userCode,t.token).then((function(e){e&&!e.errmsg||console.error("logout:"+(e&&e.errmsg||"登出失败"))}),(function(e){console.error("logout:error",e)}))}})).then((function(){K(e)})).catch((function(t){K(e),console.error("logout:error",t)}))},singleSignOn:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return console.warn("单点登录参数",e),p.a.getHasNetwork().then((function(e){if(!e)return v["default"].prototype.$toast.clear(),v["default"].prototype.$toast("您的当前网络不可用，请检查您的网络设置",2e3),Promise.reject("您的当前网络不可用，请检查您的网络设置")})).then((function(){return Object(m["i"])(e).then((function(e){return console.warn("单点登录成功",e),Y(Object(o["a"])({},e))})).catch((function(e){return Promise.reject(e)}))}))}}},fe04:function(e,t,n){"use strict";n("1930")}});