(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3e72d94d"],{"02aa":function(t,a,e){},"03a5":function(t,a,e){"use strict";e("6ac9")},"344a":function(t,a,e){"use strict";e("6c93")},"47fd":function(t,a,e){"use strict";e("02aa")},"6ac9":function(t,a,e){},"6c93":function(t,a,e){},ccbb:function(t,a,e){"use strict";e.r(a);var s=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"apply-detail-wrapper"},[e("app-header",{attrs:{title:"审核中"}}),e("div",{staticClass:"tip"},[t._v(" 您已成功提交申请，请等候审核人审批，审批通过后，我们将消息通知您 ")]),e("div",{staticClass:"mt10"}),e("Flow",{attrs:{list:t.list}}),t.showCancel?e("Button",{staticClass:"cancel-btn",on:{click:t.doCancel}},[t._v("撤销申请")]):t._e()],1)},o=[],i=e("6abc"),n=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("app-fold",{staticClass:"wg-contract-group",attrs:{title:"审批流程",hasChecked:!1}},[e("div",{staticClass:"flow-wrapper"},t._l(t.list,(function(a,s){return e("div",{key:s,staticClass:"flow-item"},[e("div",{staticClass:"item-left",class:"status-"+(t.statusMap[a.status]||"ok")+" "},[e("van-icon",{attrs:{name:"已拒绝"!=a.status?"checked":"clear"}})],1),e("div",{staticClass:"item-content"},[e("div",{staticClass:"content-info"},[e("div",{staticClass:"content-left"},[e("span",{staticClass:"item-name"},[t._v(t._s(a.name))]),e("span",{staticClass:"item-label",class:"status-"+(t.statusMap[a.status]||"ok")},[t._v(t._s(a.status))])]),e("div",{staticClass:"content-right"},[t._v(" "+t._s(a.date)+" ")])]),a.remark?e("div",{staticClass:"item-label content-remark"},[t._v(" 备注："+t._s(a.remark)+" ")]):t._e()])])})),0)])},c=[],l=e("e060"),r={props:{list:{type:Array,default:function(){return[]}}},components:{AppFold:l["a"]},data:function(){return{open:0,statusMap:{"发起":"ok","已拒绝":"reject","待审批":"pending"}}}},d=r,u=(e("03a5"),e("5d22")),p=Object(u["a"])(d,n,c,!1,null,"1efbc80b",null),h=p.exports,f=e("5047"),w=e("5e13"),v={components:{Flow:h,Button:f["a"]},data:function(){return{list:[],showCancel:!1,applyId:"",projectId:"",keywordId:""}},activated:function(){this.init()},methods:{showError:function(){this.$toast("流程不存在，请联系系统管理员"),this.$router.go(-1)},init:function(){this.list=[],this.projectId="",this.keywordId="";var t=Object(i["a"])({},this.$route.params),a=t.applyId,e=t.projectId,s=t.keywordId;a&&(e||s)?(this.applyId=a,this.showCancel=!0,this.$toast.loading({duration:0,overlay:!0,forbidClick:!0,loadingType:"spinner",message:"加载中..."}),e?(this.projectId=e,this.getProjectFlow(a,e)):s&&(this.keywordId=s,this.getContractFlow(a,s))):this.showError()},getProjectFlow:function(t,a){var e=this;Object(w["g"])({apply_id:t,project_id:a}).then((function(t){e.handleFlowData(t)})).catch((function(){return e.$toast.clear(),e.showError()}))},getContractFlow:function(t,a){var e=this;Object(w["f"])({apply_id:t,contract_keyword_id:a}).then((function(t){e.handleFlowData(t)})).catch((function(){return e.$toast.clear(),e.showError()}))},handleFlowData:function(t){if(this.$toast.clear(),console.log("data ======> ",t),Array.isArray(t)&&!t.length)return this.showError();this.list=[],this.list.push({name:t.apply_username,date:t.apply_time,status:"发起"}),this.list.push({name:t.approve_username,date:"",status:"待审批"})},doCancel:function(){var t=this;this.$toast.loading({duration:0,overlay:!0,forbidClick:!0,loadingType:"spinner",message:"撤销中..."});var a={apply_id:this.applyId};return this.projectId?a.project_id=this.projectId:this.keywordId&&(a.keyword_id=this.keywordId),Object(w["a"])(a).then((function(){t.$toast.clear(),t.$toast("撤销成功"),t.$router.go(-1)})).catch((function(a){console.error("撤销申请失败",t.applyId,a),t.$toast.clear(),t.$toast("撤销失败，请稍后重试")}))}}},m=v,y=(e("344a"),Object(u["a"])(m,s,o,!1,null,"a9c385c6",null));a["default"]=y.exports},e060:function(t,a,e){"use strict";var s,o=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"app-fold"},[e("div",{class:{top:!0,hasChecked:t.hasChecked,"van-hairline--bottom":t.showTitleLine},on:{click:t.toggle}},[e("span",{staticClass:"title"},[t._v(t._s(t.title))]),e("van-icon",{attrs:{name:t.isFold?"arrow-up":"arrow-down"}})],1),e("div",{ref:"fold-content",class:{"fold-content":!0,isFold:t.isFold}},[e("div",[t._t("default")],2)])])},i=[],n=e("7dd6"),c=(e("1d43"),e("24a8"),e("3e7a")),l=e("ab6f"),r=e("b3a5"),d={name:"AppFold",components:(s={},Object(n["a"])(s,c["a"].name,c["a"]),Object(n["a"])(s,l["a"].name,l["a"]),Object(n["a"])(s,r["a"].name,r["a"]),s),props:{showTitleLine:{type:Boolean,default:!1},title:{type:String,default:"--"},checked:{type:[Number,String,Boolean],default:""},hasChecked:{type:Boolean,default:!1},checkboxUseVmodel:{type:Boolean,default:!1},defaultFold:{type:Boolean,default:!1}},data:function(){return{isFold:this.defaultFold||!1,observer:null}},methods:{setFold:function(t){this.isFold=t},toggle:function(){var t=this;this.countHeight(),window.setTimeout((function(){t.isFold=!t.isFold}),0),window.setTimeout((function(){var a=t.$refs["fold-content"];a.style.height="auto"}),310),this.$emit("click",!this.isFold)},countHeight:function(){var t=this.$refs["fold-content"],a=t.childNodes[0];t.style.height=a.offsetHeight+"px"}}},u=d,p=(e("47fd"),e("5d22")),h=Object(p["a"])(u,o,i,!1,null,"41f0537d",null);a["a"]=h.exports}}]);