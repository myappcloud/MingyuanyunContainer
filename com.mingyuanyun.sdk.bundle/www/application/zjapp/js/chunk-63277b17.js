(window.webpackJsonp_module_entry_zjapp_=window.webpackJsonp_module_entry_zjapp_||[]).push([["chunk-63277b17"],{"1b74":function(e,t,a){(e.exports=a("690e")(!1)).push([e.i,".zjapp .border-block[data-v-ec86a6c4]{height:1px;border:none;background-image:linear-gradient(0deg,#dcdcdc,#dcdcdc 50%,transparent 0);background-size:100% 1px;background-repeat:no-repeat;background-position:bottom}.zjapp .header-right-btns[data-v-ec86a6c4]{display:flex}.zjapp .header-right-btns[data-v-ec86a6c4] .drop-down-select-single{margin:0 auto}.zjapp .local-template-icon[data-v-ec86a6c4]{line-height:22px;font-size:20px}.zjapp .local-template-icon.sort[data-v-ec86a6c4]{font-size:22px;position:relative;top:2px}",""])},"2e48":function(e,t,a){"use strict";a("f722")},"3a66":function(e,t,a){"use strict";a.r(t);a("6a61");var r,n=a("2e91"),o=(a("ed63"),a("8cf2"),a("cc57"),a("309f"),a("0b53"),a("07d2")),s=a("774b"),i=a("409e"),c=a("f7ab"),l=a("3e47"),p=(a("e2a7"),a("0f1f")),d=a("2137"),h=a("ef39"),u={components:{TemplateItem:h.a},props:{dataSource:{type:Array,default:function(){return[]}},pageLoading:{type:Boolean,default:!1}},data:function(){return{}}},m=(a("ceed"),a("17cc")),g=Object(m.a)(u,(function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"list-page-wrapper"},[this._l(this.dataSource,(function(e){return t("template-item",{key:e.id,attrs:{"data-source":e}})})),t("loading-status",{attrs:{"is-loading":this.pageLoading,"is-empty":0==this.dataSource.length,"empty-text":"暂无可查看文档"}})],2)}),[],!1,null,"1798de90",null).exports,f={components:{TemplateItem:h.a},props:{dataSource:{type:Array,default:function(){return[]}},keyword:{type:String,default:""},pageLoading:{type:Boolean,default:!1}},data:function(){return{}}},y=(a("2e48"),Object(m.a)(f,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"search-page-wrapper"},[e._l(e.dataSource,(function(t){return a("template-item",{key:t.id,attrs:{"data-source":t,keyword:e.keyword}})})),a("loading-status",{attrs:{type:"search","is-loading":e.pageLoading,"is-empty":0==e.dataSource.length,"empty-text":"未搜索到相关内容"}})],2)}),[],!1,null,"12e23ccd",null).exports),S=a("1b7e"),b={NAME_SORT:Symbol("1"),TIME_SORT_ASC:Symbol("2"),TIME_SORT_DESC:Symbol("3")},w=[{id:b.NAME_SORT,name:"按名称排序"},{id:b.TIME_SORT_ASC,name:"按时间升序"},{id:b.TIME_SORT_DESC,name:"按时间降序"}],_={name:"TemplateManage",components:{Item:o.default,Scroller:s.default,ProgressRound:i.a,SynchronizeTipBar:c.a,AppSearchBar:p.a,ListCon:g,SearchCon:y,DropDownSelectSingle:d.a},data:function(){return{searchStatus:!1,isLoading:!1,listConllection:[],isSecondary:!1,parentId:"",dirName:"",keyword:"",searchKeyword:"",name_sort:-1,mtime_sort:"",pageLoading:!1,hasNetwork:!0,sectionOptions:w,currentSection:w[0]}},computed:{hasList:function(){return!!this.listConllection.length},projId:function(){return this.$store.state.global.currentProject.id}},watch:{$route:{handler:function(e){e.name.indexOf("TemplateManage")>-1&&this.init()},immediate:!0}},activated:function(){this.$refs["app-search-bar"]&&(this.$refs["app-search-bar"].isSeaching=!1)},deactivated:function(){this.$refs["home-index-section-select"].closePopup()},methods:{init:function(){var e=this;this.parentId=this.$route.query.parentId||"",this.parentName=this.$route.query.parentName||"",this.keyword="",this.searchKeyword="",this.listConllection=[],l.a.fetchBimfaceSupported().then((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];e.$store.commit("templateManage/SET_SUPPORT_BIMFACE",t)})),this.$route.name.includes("TemplateManage")?(this.isSecondary=!1,this.getTemplateList()):(this.isSecondary=!0,this.getTemplateList())},getTemplateList:(r=Object(n.a)(regeneratorRuntime.mark((function e(){var t,a=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.a.getHasNetwork();case 2:if(this.hasNetwork=e.sent,this.hasNetwork){e.next=5;break}return e.abrupt("return");case 5:this.pageLoading=!0,t={projId:this.projId,parent_id:this.parentId,keywords:this.searchKeyword,name_sort:this.name_sort,mtime_sort:this.mtime_sort},l.a._getTemplateList(t).then((function(e){a.listConllection=e,a.pageLoading=!1}));case 8:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)}),keywordChange:function(e){this.keyword=e,this.keyword||(this.searchKeyword="",this.getTemplateList())},onSearch:function(e){this.searchKeyword=e,this.getTemplateList()},onRefresh:function(){this.getTemplateList()},changeSearchStatus:function(e){this.searchStatus=e},toLocalPage:function(){this.$router.push("/template-local")},onSelectSection:function(e){var t=e.id;this.name_sort="",this.mtime_sort="",t===b.NAME_SORT&&(this.name_sort=-1),t===b.TIME_SORT_ASC&&(this.mtime_sort=-1),t===b.TIME_SORT_DESC&&(this.mtime_sort=1),this.currentSection=e,this.getTemplateList()}}},k=(a("48c7"),Object(m.a)(_,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("page-content",{attrs:{title:e.parentName||"常用文档","show-go-root":!0}},[a("div",{staticClass:"header-right-btns",attrs:{slot:"header-bar-right"},slot:"header-bar-right"},[a("icon",{staticClass:"header-btn local-template-icon",attrs:{name:"lixian"},on:{click:e.toLocalPage}}),a("drop-down-select-single",{ref:"home-index-section-select",attrs:{options:e.sectionOptions,selected:e.currentSection},on:{select:e.onSelectSection}},[a("icon",{staticClass:"header-btn local-template-icon sort",attrs:{name:"nav-sort"}})],1)],1),a("app-search-bar",{ref:"app-search-bar",attrs:{placeholder:"搜索",value:e.keyword},on:{changeSearchStatus:e.changeSearchStatus,search:e.onSearch,keywordChange:e.keywordChange}}),a("div",{staticClass:"border-block"}),a("synchronize-tip-bar",{attrs:{"automatic-update-callback":e.onRefresh}}),a("scroller",{attrs:{"is-empty":!e.hasList},on:{pullDown:e.onRefresh}},[e.hasNetwork&&e.searchKeyword?a("search-con",{attrs:{"data-source":e.listConllection,"page-loading":e.pageLoading,keyword:e.searchKeyword}}):e.hasNetwork?a("list-con",{attrs:{"data-source":e.listConllection,"page-loading":e.pageLoading}}):a("loading-status",{attrs:{type:"error","is-loading":!1,"is-empty":!0,"empty-text":"当前没有可用网络"}})],1)],1)}),[],!1,null,"ec86a6c4",null));t.default=k.exports},"48c7":function(e,t,a){"use strict";a("ba07")},6594:function(e,t,a){var r=a("b0da");"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);(0,a("85cb").default)("34b58a3a",r,!0,{sourceMap:!1,shadowMode:!1})},"8b33":function(e,t,a){(e.exports=a("690e")(!1)).push([e.i,".zjapp .search-page-wrapper[data-v-12e23ccd]{flex:1}",""])},b0da:function(e,t,a){(e.exports=a("690e")(!1)).push([e.i,".zjapp .list-page-wrapper[data-v-1798de90]{flex:1}",""])},ba07:function(e,t,a){var r=a("1b74");"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);(0,a("85cb").default)("6b0a8aaa",r,!0,{sourceMap:!1,shadowMode:!1})},ceed:function(e,t,a){"use strict";a("6594")},f722:function(e,t,a){var r=a("8b33");"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);(0,a("85cb").default)("6fff6315",r,!0,{sourceMap:!1,shadowMode:!1})}}]);