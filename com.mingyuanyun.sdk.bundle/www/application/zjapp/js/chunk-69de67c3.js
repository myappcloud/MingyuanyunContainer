(window.webpackJsonp_module_entry_zjapp_=window.webpackJsonp_module_entry_zjapp_||[]).push([["chunk-69de67c3"],{"2f76":function(t,a,e){"use strict";e("f084")},"57d4":function(t,a,e){"use strict";(function(t){var i=e("6718"),o=e("dd4c"),s=e("6bf2"),r=e.n(s),n=e("162a"),c=e("07d2");a.a={name:"NcovReportProjIndex",components:{Item:c.a,SwipeTabs:i.b,SwipeTab:i.a,List:o.a},data:function(){return{warningList:[],ncovData:{},reportData:[],tabIndex:1,bidNum:0}},computed:{tabsWidth:function(){return window.innerWidth/3},projId:function(){return this.$store.state.global.currentReportProject.id}},watch:{tabIndex:function(t){var a=this;window.KeyboardExt&&window.KeyboardExt.hide(),this.$nextTick((function(){a.init()}))}},activated:function(){this.$router.isBack||(this.tabIndex=1,this.init())},methods:{toNcovHistory:function(){this.$router.push("/ncov-report-history")},init:function(){this.getNcovData(),this.getNcovWarningList()},getNcovData:function(){var a=this;n.a.request("/webapi/ncov-report/daily-summary",{date:1===this.tabIndex?r()().format("YYYY-MM-DD"):r()().subtract(1,"days").format("YYYY-MM-DD"),proj_id:this.projId}).then((function(e){console.log({res:e}),a.ncovData=t.omitBy(e,"bidsectionSummary"),a.reportData=e.bidsectionSummary})).catch((function(t){Popup.alert(t)}))},getNcovWarningList:function(){var t=this;n.a.request("/online/ncov-supplies-inventory/get-supplies-info",{date:1===this.tabIndex?r()().format("YYYY-MM-DD"):r()().subtract(1,"days").format("YYYY-MM-DD"),proj_id:this.projId}).then((function(a){console.log("防疫预警",a),t.bidNum=a.short_inventory_bidsection_num,t.warningList=a.short_inventory_bidsection_data})).catch((function(t){Popup.alert(t)}))}}}}).call(this,e("391c"))},5981:function(t,a,e){"use strict";(function(t){e("5ab2"),e("6d57"),e("e10e");var i=e("28f8"),o=(e("163d"),e("e2a7"),e("774b")),s=e("07d2"),r=e("6bf2"),n=e.n(r),c=(e("162a"),e("9c29"));function d(t,a){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);a&&(i=i.filter((function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable}))),e.push.apply(e,i)}return e}function l(t){for(var a=1;a<arguments.length;a++){var e=null!=arguments[a]?arguments[a]:{};a%2?d(Object(e),!0).forEach((function(a){Object(i.a)(t,a,e[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):d(Object(e)).forEach((function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(e,a))}))}return t}a.a={name:"NcovReportIndex",components:{Scroller:o.a,Item:s.a},props:{warningList:{type:Array,default:function(){return[]}},ncovData:{type:Object,default:function(){}},reportData:{type:Array,default:function(){return[]}},tabIndex:{type:Number,default:function(){return 1}},bidNum:{type:Number,default:function(){return 0}}},data:function(){return{isLoading:!0,today:n()().format("YYYY-MM-DD"),yesterday:n()().subtract(1,"days").format("YYYY-MM-DD"),fixedHeadTop:0,fixedHeadLeft:0,showFixedHead:!1,showFixedHeadPatch:!1,showFixedSlide:!0,showFixedNook:!1,showFixedNookX:!0}},computed:{projectSelected:function(){return this.$store.state.global.currentReportProject}},activated:function(){this.showFixedHeadPatch=!1,this.showFixedNook=!1,console.log(JSON.stringify(this.reportData))},methods:{touchFun:function(t){t.stopPropagation()},openDropGuide:function(){c.a.show?c.a.closePopup():c.a.openPopup({callback:function(t){}})},onScrollX:function(t){var a=t&&t.target?t.target.scrollLeft:0;a>=0?(this.fixedHeadLeft=a,this.showFixedSlide=!0,this.showFixedNookX=!0):(this.fixedHeadLeft=0,this.showFixedSlide=!1,this.showFixedNookX=!1)},onScrollY:function(t){var a=t&&t.target?t.target.scrollTop:0,e=this.$refs.warn?this.$refs.warn.getBoundingClientRect().top:200;a>=210&&e>154?(this.fixedHeadTop=a-210,this.showFixedHead=!0,this.showFixedNook=!0,this.showFixedHeadPatch=!0):(this.fixedHeadTop=0,this.showFixedHead=!1,this.showFixedNook=!1,this.showFixedNookX=!1,this.showFixedHeadPatch=!1)},toggleItem:function(t){this.$set(t,"open",!t.open)},collapseAll:function(){var a=this;t.each(this.reportData,(function(t){a.$set(t,"open",!1)}))},goReportDetail:function(t,a,e){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};console.log(t,a,e),e&&this.$router.push({name:a,query:l({projId:t.proj_id,sectionId:t.bidsection_id,sectionName:t.bidsection_name,dateType:1===this.tabIndex?"today":"yesterday"},i)})},goBackWorkCondition:function(t){"0/0"!==t.allowed_work_condition&&this.$router.push("/ncov-report-reopen-work/".concat(t.bidsection_id))},toNcovHistory:function(){this.$router.push("/ncov-report-history")}}}}).call(this,e("391c"))},"65fd":function(t,a,e){"use strict";e("986a")},9476:function(t,a,e){(t.exports=e("690e")(!1)).push([t.i,".zjapp .active[data-v-2077d512]{background:#f2f2f2;z-index:10}",""])},"986a":function(t,a,e){var i=e("9476");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);(0,e("85cb").default)("7d11ec4c",i,!0,{sourceMap:!1,shadowMode:!1})},cb7b:function(t,a,e){(t.exports=e("690e")(!1)).push([t.i,'.zjapp .ncov-title[data-v-e05bb18a]{position:relative;height:46px;line-height:46px;padding:0 15px;font-size:18px;color:#333;font-weight:500;background:#fff}.zjapp .ncov-title[data-v-e05bb18a]:before{content:"";position:absolute;top:15px;left:0;width:4px;height:16px;background:#4275e8}.zjapp .ncov-title .icon-yiwen[data-v-e05bb18a]{position:absolute;color:#c8c8c8;top:14px;right:15px}.zjapp .ncov-table[data-v-e05bb18a]{display:flex;flex-wrap:wrap;margin:0 0 10px 0}.zjapp .ncov-table .item[data-v-e05bb18a]{display:block;flex:0 0 25%;padding:15px 0;text-align:center}.zjapp .ncov-table .item .number[data-v-e05bb18a]{height:28px;font-size:18px;font-weight:600;color:#4275e8;line-height:28px}.zjapp .ncov-table .item .describe[data-v-e05bb18a]{height:17px;font-size:12px;font-weight:400;line-height:17px;color:#666}.zjapp .ncov-table .item .unit[data-v-e05bb18a]{font-size:12px;color:#999}.zjapp .item-right[data-v-e05bb18a]{color:#c8c8c8;max-width:140px;margin:0 0 0 10px}.zjapp .item-right.warning[data-v-e05bb18a]{color:#ff3c46}.zjapp .scroll-y[data-v-e05bb18a]{flex:1;overflow-y:auto;position:relative}.zjapp .scroll-x[data-v-e05bb18a]{max-width:100%;overflow-x:auto;position:relative}.zjapp .table-content[data-v-e05bb18a]{position:relative;display:flex;flex-direction:column;flex:1;overflow:hidden;margin:0 0 10px 0}.zjapp .fixed-head[data-v-e05bb18a]{position:absolute;left:0;top:0;z-index:2}.zjapp .fixed-slide[data-v-e05bb18a]{position:absolute;left:0;top:0;z-index:1;transform:translateZ(0)}.zjapp .fixed-nook[data-v-e05bb18a]{position:absolute;left:0;top:0;z-index:3}.zjapp .table[data-v-e05bb18a]{border-collapse:collapse}.zjapp .table td[data-v-e05bb18a],.zjapp .table th[data-v-e05bb18a]{min-width:110px;height:50px;max-height:50px;padding:5px 10px;line-height:16px;font-size:14px;text-align:center;box-sizing:border-box;border:none;overflow:hidden}.zjapp .table td.click[data-v-e05bb18a]{color:#4275e8}.zjapp .table th[data-v-e05bb18a]{color:#888}.zjapp .table td[data-v-e05bb18a]:first-child,.zjapp .table th[data-v-e05bb18a]:first-child{position:relative;width:145px;min-width:145px}.zjapp .table tr[data-v-e05bb18a]{background-color:#fafafa}.zjapp .name[data-v-e05bb18a]{display:inline-block;line-height:16px;max-height:32px;overflow:hidden}.zjapp .icon-dropdown[data-v-e05bb18a]{position:absolute;top:22px;left:11.5px}.zjapp .icon-dropright[data-v-e05bb18a]{position:absolute;top:19px;left:14.5px}.zjapp .icon-dropdown[data-v-e05bb18a]:before,.zjapp .icon-dropright[data-v-e05bb18a]:before{display:block;content:"";width:0;height:0;border:6px solid #c8c8c8}.zjapp .icon-dropdown[data-v-e05bb18a]:before{border-left-color:transparent}.zjapp .icon-dropdown[data-v-e05bb18a]:before,.zjapp .icon-dropright[data-v-e05bb18a]:before{border-right-color:transparent;border-bottom-color:transparent}.zjapp .icon-dropright[data-v-e05bb18a]:before{border-top-color:transparent}.zjapp .width-105[data-v-e05bb18a]{min-width:105px!important}.zjapp .width-105 span[data-v-e05bb18a]{overflow:hidden;text-overflow:ellipsis;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical}.zjapp .ncov-report-table-title[data-v-e05bb18a]{width:155px!important;min-width:155px!important;min-height:50px;position:relative}.zjapp .ncov-report-table-title span[data-v-e05bb18a]{width:110px;max-height:none;height:auto;line-height:22px;white-space:normal;word-break:break-all}.zjapp .ncov-report-table-title .ncov-P-R-all[data-v-e05bb18a]{width:auto}',""])},d9de:function(t,a,e){"use strict";e.r(a);var i=e("57d4").a,o=(e("65fd"),e("17cc")),s=Object(o.a)(i,(function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("page-content",{attrs:{title:"防疫专项报表"}},[e("swipe-tabs",{attrs:{color:"#4275e8","title-active-color":"#4275e8","line-width":t.tabsWidth},model:{value:t.tabIndex,callback:function(a){t.tabIndex=a},expression:"tabIndex"}},[e("swipe-tab",{class:{active:0===t.tabIndex},attrs:{title:"昨日"}},[e("list",{attrs:{"warning-list":t.warningList,"ncov-data":t.ncovData,"report-data":t.reportData,"tab-index":t.tabIndex,"bid-num":t.bidNum}})],1),e("swipe-tab",{class:{active:1===t.tabIndex},attrs:{title:"今日"}},[e("list",{attrs:{"warning-list":t.warningList,"ncov-data":t.ncovData,"report-data":t.reportData,"tab-index":t.tabIndex,"bid-num":t.bidNum}})],1)],1)],1)}),[],!1,null,"2077d512",null);a.default=s.exports},dd4c:function(t,a,e){"use strict";var i=e("5981").a,o=(e("2f76"),e("17cc")),s=Object(o.a)(i,(function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"layout-content"},[e("table",{directives:[{name:"show",rawName:"v-show",value:t.showFixedHeadPatch,expression:"showFixedHeadPatch"}],staticClass:"table fixed-head",style:{transform:"translateX("+-t.fixedHeadLeft+"px)"}},[t._m(0)]),e("table",{directives:[{name:"show",rawName:"v-show",value:t.showFixedNook,expression:"showFixedNook"}],staticClass:"table fixed-nook"},[t._m(1)]),e("scroller",{on:{scroll:t.onScrollY}},[e("div",{staticClass:"ncov-title van-hairline--bottom"},[t._v("\n      防疫情况 ("+t._s(1===t.tabIndex?t.today:t.yesterday)+")\n      "),e("icon",{attrs:{name:"yiwen"},on:{click:t.openDropGuide}})],1),e("div",{staticClass:"ncov-table van-hairline--bottom"},[e("div",{staticClass:"item border-bottom"},[e("p",[e("span",{staticClass:"number"},[t._v(t._s(t.ncovData.allowed_work_condition))]),e("span",{staticClass:"unit"},[t._v("标段")])]),e("p",[e("span",{staticClass:"describe"},[t._v("复工条件达成")])])]),e("div",{staticClass:"item van-hairline--left border-bottom"},[e("p",[e("span",{staticClass:"number"},[t._v(t._s(t.ncovData.return_trip_num))]),e("span",{staticClass:"unit"},[t._v("人")])]),e("p",[e("span",{staticClass:"describe"},[t._v("返程")])])]),e("div",{staticClass:"item van-hairline--left border-bottom"},[e("p",[e("span",{staticClass:"number"},[t._v(t._s(t.ncovData.total_return_trip_num))]),e("span",{staticClass:"unit"},[t._v("人")])]),e("p",[e("span",{staticClass:"describe"},[t._v("累计返程")])])]),e("div",{staticClass:"item van-hairline--left border-bottom"},[e("p",[e("span",{staticClass:"number"},[t._v(t._s(t.ncovData.approach_num))]),e("span",{staticClass:"unit"},[t._v("人次")])]),e("p",[e("span",{staticClass:"describe"},[t._v("进出场")])])]),e("div",{staticClass:"item van-hairline--left border-bottom"},[e("p",[e("span",{staticClass:"number"},[t._v(t._s(t.ncovData.approach_risk_num))]),e("span",{staticClass:"unit"},[t._v("人次")])]),e("p",[e("span",{staticClass:"describe"},[t._v("风险")])])]),e("div",{staticClass:"item van-hairline--left border-bottom"},[e("p",[e("span",{staticClass:"number"},[t._v(t._s(t.ncovData.temperature_risk_num))]),e("span",{staticClass:"unit"},[t._v("人")])]),e("p",[e("span",{staticClass:"describe"},[t._v("体征异常")])])]),e("div",{staticClass:"item van-hairline--left border-bottom"},[e("p",[e("span",{staticClass:"number"},[t._v(t._s(t.ncovData.disinfection_num))]),e("span",{staticClass:"unit"},[t._v("次")])]),e("p",[e("span",{staticClass:"describe"},[t._v("防疫消杀")])])]),e("div",{staticClass:"item van-hairline--left border-bottom"},[e("p",[e("span",{staticClass:"number"},[t._v(t._s(t.bidNum))]),e("span",{staticClass:"unit"},[t._v("标段")])]),e("p",[e("span",{staticClass:"describe"},[t._v("防疫物资紧缺")])])])]),t.reportData&&t.reportData.length?e("div",{staticClass:"table-content"},[e("div",{staticClass:"scroll-y"},[e("div",{staticClass:"scroll-x",on:{touchmove:t.touchFun,scroll:t.onScrollX}},[e("table",{staticClass:"table"},[e("thead",[e("tr",{staticClass:"border-bottom"},[e("th",{staticClass:"border-right ncov-P-R-thead_th ncov-report-table-title"},[t._v("标段")]),e("th",{staticClass:"border-right"},[t._v("复工条件达成")]),e("th",{staticClass:"border-right"},[t._v("返程人数")]),e("th",{staticClass:"border-right"},[t._v("进出场人次")]),e("th",{staticClass:"border-right"},[t._v("进场人数")]),e("th",{staticClass:"border-right"},[t._v("出场人数")]),e("th",{staticClass:"border-right"},[t._v("风险人次")]),e("th",{staticClass:"border-right width-105"},[t._v("体征异常人数")]),e("th",{staticClass:"border-right"},[t._v("消杀次数")])])]),e("tbody",[t._l(t.reportData,(function(a,i){return[e("tr",{key:i,staticClass:"border-bottom"},[e("td",{staticClass:"border-right ncov-report-table-title"},[e("span",{staticClass:"name"},[t._v(t._s(a.bidsection_name))])]),e("td",{staticClass:"border-right",class:{click:"0/0"!==a.allowed_work_condition},on:{click:function(e){t.goBackWorkCondition(a)}}},[t._v(t._s(a.allowed_work_condition))]),e("td",{staticClass:"border-right",class:{click:a.return_trip_num},on:{click:function(e){t.goReportDetail(a,"NcovReportReturnTrip",!!a.return_trip_num)}}},[t._v(t._s(a.return_trip_num))]),e("td",{staticClass:"border-right",class:{click:a.approach_num},on:{click:function(e){t.goReportDetail(a,"ReportNcovEnter",!!a.approach_num)}}},[t._v(t._s(a.approach_num))]),e("td",{staticClass:"border-right"},[t._v(t._s(a.approach_in_num))]),e("td",{staticClass:"border-right"},[t._v(t._s(a.approach_out_num))]),e("td",{staticClass:"border-right",class:{click:a.approach_risk_num},on:{click:function(e){t.goReportDetail(a,"ReportNcovEnter",!!a.approach_risk_num,{isDanger:!0})}}},[t._v(t._s(a.approach_risk_num))]),e("td",{staticClass:"border-right width-105",class:{click:a.temperature_risk_num},on:{click:function(e){t.goReportDetail(a,"NcovReportTemperatureIndex",!!a.temperature_risk_num)}}},[t._v(t._s(a.temperature_risk_num))]),e("td",{staticClass:"border-right",class:{click:a.disinfection_num},on:{click:function(e){t.goReportDetail(a,"NcovDisinfectIndex",!!a.disinfection_num)}}},[t._v(t._s(a.disinfection_num))])])]}))],2)])]),e("table",{directives:[{name:"show",rawName:"v-show",value:t.showFixedSlide,expression:"showFixedSlide"}],staticClass:"table fixed-slide"},[e("thead",[e("tr",{staticClass:"border-bottom"},[e("th",{staticClass:"border-right ncov-P-R-thead_th ncov-report-table-title"},[t._v("标段")])])]),e("tbody",[t._l(t.reportData,(function(a,i){return[e("tr",{key:i,staticClass:"border-bottom"},[e("td",{staticClass:"border-right ncov-report-table-title"},[e("span",{staticClass:"name"},[t._v(t._s(a.bidsection_name))])])])]}))],2)])]),e("table",{directives:[{name:"show",rawName:"v-show",value:t.showFixedNookX,expression:"showFixedNookX"}],staticClass:"table fixed-nook"},[e("thead",[e("tr",{staticClass:"border-bottom"},[e("th",{staticClass:"border-right ncov-P-R-thead_th ncov-report-table-title"},[t._v("标段")])])])])]):t._e(),t.warningList.length?e("div",{ref:"warn",staticClass:"ncov-title van-hairline--bottom"},[t._v("防疫物资预警")]):t._e(),t._l(t.warningList,(function(a,i){return e("item",{key:i,staticStyle:{"align-items":"center"},attrs:{border:"bottom","icon-right":"arrow-right"},on:{click:function(e){t.goReportDetail(a,"ReportNocvMaterialInventory",!0)}}},[e("div",{staticClass:"item-text"},[t._v(t._s(a.bidsection_name))]),e("div",{staticClass:"item-right",class:{warning:"未盘点"!==a.info}},[t._v(t._s(a.info))])])}))],2)],1)}),[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("thead",[e("tr",{staticClass:"border-bottom border-top"},[e("th",{staticClass:"border-right ncov-P-R-thead_th ncov-report-table-title"},[t._v("标段")]),e("th",{staticClass:"border-right"},[t._v("复工条件达成")]),e("th",{staticClass:"border-right"},[t._v("返程人数")]),e("th",{staticClass:"border-right"},[t._v("进出场人次")]),e("th",{staticClass:"border-right"},[t._v("进场人数")]),e("th",{staticClass:"border-right"},[t._v("出场人数")]),e("th",{staticClass:"border-right"},[t._v("风险人次")]),e("th",{staticClass:"border-right width-105"},[t._v("体征异常人数")]),e("th",{staticClass:"border-right"},[t._v("消杀次数")])])])},function(){var t=this.$createElement,a=this._self._c||t;return a("thead",[a("tr",{staticClass:"border-bottom"},[a("th",{staticClass:"border-right ncov-P-R-thead_th ncov-report-table-title"},[this._v("标段")])])])}],!1,null,"e05bb18a",null);a.a=s.exports},f084:function(t,a,e){var i=e("cb7b");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);(0,e("85cb").default)("5eb1290c",i,!0,{sourceMap:!1,shadowMode:!1})}}]);