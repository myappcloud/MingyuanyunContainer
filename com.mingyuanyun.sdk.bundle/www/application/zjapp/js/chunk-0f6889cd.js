(window.webpackJsonp_module_entry_zjapp_=window.webpackJsonp_module_entry_zjapp_||[]).push([["chunk-0f6889cd","chunk-59fa3e5d","chunk-0b5b35be","chunk-b1eec014","chunk-2709989a"],{"0732":function(t,e,i){var a=i("81f2");"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);(0,i("85cb").default)("1b5b07de",a,!0,{sourceMap:!1,shadowMode:!1})},"0aac":function(t,e,i){"use strict";i("2814")},"0c52":function(t,e,i){(t.exports=i("690e")(!1)).push([t.i,".zjapp .app-stepper[data-v-03df57b7]{display:inline-block;width:110px;height:34px;margin:-2px 0;white-space:nowrap;font-size:0;line-height:0;vertical-align:top}.zjapp .app-stepper .number-input[data-v-03df57b7]{width:51px;height:34px;border:1px solid #dcdcdc;border-radius:0;font-size:14px;text-align:center;background-color:#fff;color:#111;box-sizing:border-box}.zjapp .app-stepper .number-input-focus[data-v-03df57b7]{border-color:#4275e8}.zjapp .btn-add[data-v-03df57b7],.zjapp .btn-minus[data-v-03df57b7]{display:inline-block;width:28px;height:34px;line-height:34px;padding:0;border:1px solid #dcdcdc;color:#666;text-align:center;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;box-sizing:border-box;background-color:#fff}.zjapp .btn-minus[data-v-03df57b7]{border-right:none;border-radius:4px 0 0 4px}.zjapp .btn-add[data-v-03df57b7]{border-left:none;border-radius:0 4px 4px 0}.zjapp .icon-add[data-v-03df57b7],.zjapp .icon-minus[data-v-03df57b7]{font-size:11px;vertical-align:top;display:inline-block;margin-top:10.5px}.zjapp .disabled[data-v-03df57b7]{color:#c8c8c8}.zjapp .activing[data-v-03df57b7]{color:#4275e8}",""])},"0f7b":function(t,e,i){"use strict";i("f548"),i("163d");var a,n,s={name:"AppStepper",components:{NumberInput:i("6948").a},props:{value:{type:[String,Number],default:""},max:{type:[String,Number],default:200},range:{type:Array}},data:function(){return{addActiving:!1,minusActiving:!1}},computed:{rangeMin:function(){return this.range&&this.range[0]||0},rangeMax:function(){return this.range&&this.range[1]?this.range[1]:this.max},allowAdd:function(){return""!==this.value&&this.value<this.rangeMax},allowMinus:function(){return""!==this.value&&this.value>this.rangeMin}},methods:{onChange:function(t){t&&(t=String(t).replace(/\D/g,"")),parseInt(t,10)>parseInt(this.max,10)&&(t=this.max),this.$emit("input",Number(t)),this.$emit("change",Number(t))},add:function(){if(this.allowAdd){var t=parseInt(this.value,10)+1;this.isInRange(t)&&(this.$emit("input",t),this.$emit("change",t)),this.setActiving("add")}},minus:function(){if(this.allowMinus){var t=parseInt(this.value,10)-1;this.isInRange(t)&&(this.$emit("input",t),this.$emit("change",t)),this.setActiving("minus")}},isInRange:function(t){return t>=this.rangeMin&&t<=this.rangeMax},setActiving:function(t){var e=this;t&&("minus"===t?(this.minusActiving=!0,clearTimeout(n),n=setTimeout((function(){e.minusActiving=!1}),300)):(this.addActiving=!0,clearTimeout(a),a=setTimeout((function(){e.addActiving=!1}),300)))}}},o=(i("91cb"),i("17cc")),r=Object(o.a)(s,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"app-stepper"},[i("button",{staticClass:"btn-minus",class:{disabled:!t.allowMinus,activing:t.minusActiving},on:{click:t.minus}},[i("icon",{attrs:{name:"minus"}})],1),i("number-input",{attrs:{value:t.value,type:"int",range:t.range},on:{input:t.onChange}}),i("button",{staticClass:"btn-add",class:{disabled:!t.allowAdd,activing:t.addActiving},on:{click:t.add}},[i("icon",{attrs:{name:"add"}})],1)],1)}),[],!1,null,"03df57b7",null);e.a=r.exports},1059:function(t,e,i){"use strict";var a=i("ebf1").a,n=(i("9dea"),i("17cc")),s=Object(n.a)(a,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"redio-box-group",class:"align-"+t.align+" "+t.customClass},t._l(t.options,(function(e,a){return i("span",{key:a,staticClass:"radio-box",class:{selected:"array"===t.optionsType?t.value===e:"object"===t.optionsType&&t.value===a},on:{click:function(e){t.onSelect(a)}}},[t._v("\n    "+t._s(e)+"\n  ")])})))}),[],!1,null,"b0a30924",null);e.a=s.exports},"11ed":function(t,e,i){var a=i("eb41");"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);(0,i("85cb").default)("41182961",a,!0,{sourceMap:!1,shadowMode:!1})},"19a7":function(t,e,i){(t.exports=i("690e")(!1)).push([t.i,".zjapp .redio-box-group[data-v-b0a30924]{font-size:0;margin-top:-10px}.zjapp .redio-box-group.align-l[data-v-b0a30924]{text-align:left}.zjapp .redio-box-group.align-r[data-v-b0a30924]{text-align:right}.zjapp .radio-box[data-v-b0a30924]{display:inline-block;height:34px;line-height:32px;min-width:60px;padding:0 5px;margin:10px 0 0 10px;border:1px solid #d9d9d9;background:#fff;color:#666;vertical-align:top;font-size:14px;text-align:center;border-radius:3px}.zjapp .radio-box[data-v-b0a30924]:first-child{margin-left:0}.zjapp .radio-box.selected[data-v-b0a30924]{border-color:#4275e8;color:#4275e8}",""])},"242a":function(t,e,i){"use strict";var a={name:"Checkbox",props:{semiSelection:{type:Boolean,default:!1},status:{type:String,default:null},value:{type:Boolean,default:!1},text:{type:String,default:""},type:{type:String,default:"circular"}},data:function(){return{}},computed:{iconName:function(){var t="";return"circular"===this.type?t=this.value?"checkbox-checked":"checkbox":"square"===this.type&&(t=this.value?"checkbox-square-checked":"checkbox-square"),t}},methods:{semiClickHandle:function(t){if(t.stopPropagation(),this.semiSelection){var e="partSelected"===this.status||!this.value,i="partSelected"===this.status||e?"fullSelected":null;this.$emit("input",e,i),this.$emit("change",e,i)}else this.$emit("input",!this.value),this.$emit("change",!this.value)}}},n=(i("53e4"),i("17cc")),s=Object(n.a)(a,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{class:{checkbox:!t.semiSelection,semiCheckbox:t.semiSelection,"semiCheckbox-indeterminate":"partSelected"===t.status,"semiCheckbox-checked":"fullSelected"===t.status},on:{click:function(e){t.semiClickHandle(e)}}},[t.semiSelection?i("span",{staticClass:"semiCheckbox-inner"}):t._e(),t.semiSelection?t._e():i("icon",{attrs:{name:t.iconName}}),t._v(t._s(t.text)+"\n")],1)}),[],!1,null,"afcfdff2",null);e.a=s.exports},2464:function(t,e,i){"use strict";var a=i("329b"),n=i("573a").a,s=(i("3999"),i("17cc")),o=Object(s.a)(n,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("transition",{attrs:{name:"slide-right"}},[t.show?i("page-content",{attrs:{mode:"dialog",title:t.title,"on-close":t.closePopup}},[t.keyword?[i("div",{staticClass:"page-scroll"},[t.searchResults.length?t._l(t.searchResults,(function(e){return i("item",{key:e.id,attrs:{border:"bottom"},on:{click:function(i){t.searchItemClick(e)}}},[i("span",{staticClass:"search-item",domProps:{innerHTML:t._s(t.keyword?e.full_name.split(t.keyword).join("<span style='color:#4275E8;'>"+t.keyword+"</span>"):e.full_name)}})])})):t._e(),i("loading-status",{attrs:{"is-loading":t.isSearching,"is-empty":!t.searchResults||!t.searchResults.length,"empty-text":"没有信息"}})],2)]:t._e(),t.keyword?t._e():[i("item",[i("div",{staticClass:"bread-crumb"},t._l(t.breadCrumbs,(function(e){return i("span",{key:e.id,staticClass:"level-item",class:{active:e.id===t.activeCrumbIndex},on:{click:function(i){t.crumbClick(e)}}},[t._v(t._s(e.name)+"\n\n            "),i("icon",{attrs:{name:"arrow-right"}})],1)})))]),!t.isLoading&&t.options.length?i("div",{ref:"placeSelectScroll",staticClass:"page-scroll"},[t._l(t.options,(function(e){return i("item",{key:e.id,attrs:{border:"bottom",text:e.name,"icon-right":t.isCheck(e)?"qualified":""},on:{click:function(i){t.itemClick(e)}}})})),i("div",{staticClass:"empty-msg"},[i("span",{staticClass:"line"}),t._v("\n          就这么多了\n          "),i("span",{staticClass:"line"})])],2):t._e()],!t.isLoading&&t.options.length?i("app-button-group",{attrs:{"fixed-bottom":""}},[i("app-button",{attrs:{disabled:!t.selectedBuilding||!t.selectedBuilding.id&&!t.selectedUnit.id},on:{click:t.select}},[t._v("\n        确定\n      ")])],1):t._e(),i("loading-status",{attrs:{"is-loading":t.isLoading,"is-empty":!t.options||!t.options.length,"empty-text":"没有信息"}})],2):t._e()],1)}),[],!1,null,"153f7b00",null).exports,r=!1;r||(r=new(a.default.extend(o))({el:document.createElement("div")}),document.body.appendChild(r.$el));e.a=r},2788:function(t,e,i){var a=i("a7e4");"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);(0,i("85cb").default)("62a4f512",a,!0,{sourceMap:!1,shadowMode:!1})},2814:function(t,e,i){var a=i("5033");"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);(0,i("85cb").default)("9db19832",a,!0,{sourceMap:!1,shadowMode:!1})},2939:function(t,e,i){(t.exports=i("690e")(!1)).push([t.i,".zjapp .page-scroll[data-v-74102c05]{flex:1;overflow:auto;padding-bottom:100px;transform:translateZ(0)}.zjapp .sublist[data-v-74102c05]{padding-left:25px;padding-top:1px;background-color:#fff}.zjapp .sublist>.sublist[data-v-74102c05]{padding-left:10px;padding-top:0}",""])},"299d":function(t,e,i){"use strict";i("2788")},"29be":function(t,e,i){"use strict";(function(t){i("5ab2"),i("6d57"),i("e10e");var a=i("28f8"),n=(i("cc57"),i("163d"),i("07d2")),s=i("a5c6"),o=i("6144");function r(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,a)}return i}function c(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?r(Object(i),!0).forEach((function(e){Object(a.a)(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):r(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}e.a={name:"SingleSelect",components:{Item:n.default},props:{title:{type:String,default:""},pageTitle:{type:String,default:""},placeholder:{type:String,default:""},value:{type:Object,default:function(){return{}}},options:{type:Array,default:function(){return[]}},optionsDisabled:{type:Array,default:function(){return[]}},required:{type:Boolean,default:!0},mode:{type:String,default:"edit"},editabled:{type:Boolean,default:!0},memory:{type:Boolean,default:!1},autoSelect:{type:Boolean,default:!1},beforeOpen:{type:Function,default:function(){}},searchBar:{type:Boolean,default:!0},grouping:{type:String,default:""},autoOpen:{type:Boolean,default:!1},rightBtn:{type:String,default:""},rightBtnEvent:{type:Function,default:function(){return 0}},ifToggle:{type:Boolean,default:!1},formCheck:{type:Boolean,default:!1},editorAddData:{type:Boolean,default:!1},lineLimit:{type:[Number,String],default:1}},data:function(){return{memoryKey:this.$route.name+encodeURI(this.title)}},watch:{options:function(){this.setSelected()}},mounted:function(){this.setSelected()},methods:{openSelect:function(){var e=this;if(this.editabled){var i=this.beforeOpen();i&&i.then&&t.isFunction(i.then)?i.then((function(t){!1!==t&&e.openPopup()})):!1!==i&&this.openPopup()}},openPopup:function(){var e=this;if(this.optionsDisabled&&this.optionsDisabled.length){var i={};t.each(this.optionsDisabled,(function(t){t.id&&(i[t.id]=t)})),t.each(this.options,(function(t,a){i[t.id]?e.options[a].disabled=!0:e.options[a].disabled=!1}))}s.a.openPopup({title:this.pageTitle||"选择"+this.title,selected:this.value,options:this.options,required:this.required,searchBar:this.searchBar,grouping:this.grouping,autoOpen:this.autoOpen,rightBtn:this.rightBtn,ifToggle:this.ifToggle,lineLimit:this.lineLimit,editorAddData:this.editorAddData,onSelect:function(i){var a=t.cloneDeep(e.value);i=t.isArray(i)?t.map(i,(function(t){return c({},t)})):c({},i),e.$emit("input",i,a),e.$emit("onSelect",i,a)},rightBtnEvent:function(i){var a=t.cloneDeep(e.value);e.$emit("rightBtnEvent",i,a)}})},closePopup:function(){s.a.closePopup()},onSelect:function(t){o.a.saveObject(this.memoryKey,t,o.a.level.user),this.$emit("input",t[0]),this.$emit("onSelect",t[0])},setSelected:function(){var e=o.a.getObject(this.memoryKey,o.a.level.user);!1===this.editabled||t.isEmpty(this.options)||(t.isEmpty(this.value)?this.memory&&!t.isEmpty(e)&&t.some(this.options,{id:e.id})&&(this.$emit("input",e),this.autoSelect&&this.$emit("onSelect",e)):this.autoSelect&&this.$emit("onSelect",this.value))}}}}).call(this,i("391c"))},"2bac":function(t,e,i){(t.exports=i("690e")(!1)).push([t.i,".zjapp .layout-main[data-v-4c02e6e5] .layout-content{display:flex;flex-direction:column}.zjapp .page-scroll[data-v-4c02e6e5]{flex:1;overflow:auto;scroll-behavior:smooth}.zjapp .header-right-flex[data-v-4c02e6e5]{display:flex}",""])},"2c76":function(t,e,i){"use strict";i("c070")},"2dd6":function(t,e,i){(t.exports=i("690e")(!1)).push([t.i,".zjapp .single-item[data-v-6920dde7]{min-height:44px}.zjapp .single-item>div[data-v-6920dde7]{display:flex}.zjapp .single-item>div>span[data-v-6920dde7]{flex:1;overflow:hidden;text-overflow:ellipsis;display:-webkit-box;-webkit-box-orient:vertical}.zjapp .single-item>div>span[data-v-6920dde7] label{color:#4174e9}.zjapp .single-item i[data-v-6920dde7]{line-height:24px;font-size:24px;color:#4275e8}.zjapp .single-item .disabled-item[data-v-6920dde7]{color:#aaa}",""])},"2ddb":function(t,e,i){(t.exports=i("690e")(!1)).push([t.i,".zjapp .supplier-editor[data-v-e465319c]{margin-bottom:10px;padding:8px;display:flex;justify-content:space-between;align-items:center;height:52px;color:#4275e8;background-color:#fff}.zjapp .supplier-editor .icon[data-v-e465319c]{border-left:1px solid #c8c8c8;padding-left:12px}.zjapp .supplier-editor .icon-edit[data-v-e465319c]{color:#c8c8c8;font-size:18px}.zjapp .supplier-editor .icon-qualified[data-v-e465319c]{color:#4275e8}.zjapp .supplier-editor .margin-r[data-v-e465319c]{margin-right:10px}.zjapp .list-title[data-v-e465319c]{position:relative;top:0;color:#888;font-size:14px;line-height:30px;min-height:40px;margin-bottom:0;margin-top:0;padding:8px 16px 2px}.zjapp .search-item>div[data-v-e465319c]{padding-right:35px}.zjapp .search-item i[data-v-e465319c]{position:absolute;color:#ccc;font-size:26px;right:0;top:50%;transform:translateY(-50%)}.zjapp .van-popup--right[data-v-e465319c]{width:100%;height:100%}[data-v-e465319c] .van-cell__title{color:#4174e9;font-weight:700}[data-v-e465319c] .van-collapse-item__content{transform:translateZ(0);padding:0 0 0 25px}[data-v-e465319c] .van-collapse-item__content .van-cell{padding-left:0}",""])},"3156b":function(t,e,i){"use strict";i("163d");var a={name:"SingleSelectItem",props:{item:{type:Object,default:function(){return{id:"",name:""}}},checked:{type:Boolean,default:!1},renderField:{type:String,default:"name"},lineLimit:{type:[Number,String],default:1}},methods:{selectItem:function(t){t.disabled||this.$emit("click",t)}}},n=(i("9788"),i("17cc")),s=Object(n.a)(a,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("van-cell",{staticClass:"single-item",attrs:{clickable:!0},on:{click:function(e){t.selectItem(t.item)}}},[i("span",{class:{"disabled-item":t.item.disabled},style:{"-webkit-line-clamp":"unlimited"===t.lineLimit?"initial":t.lineLimit},domProps:{innerHTML:t._s(t.item[t.renderField])}}),t.checked?i("van-icon",{attrs:{name:"success"}}):t._e()],1)}),[],!1,null,"6920dde7",null);e.a=s.exports},3999:function(t,e,i){"use strict";i("5897")},"3c64":function(t,e,i){"use strict";i("163d");var a={name:"ItemTextarea",components:{},props:{value:{type:String,default:""},placeholder:{type:String,default:""},maxlength:{type:Number,default:200},borderBottom:{type:Boolean,default:!0}},data:function(){return{textareaHeight:40,isLock:!1,blurTime:null}},computed:{lastLength:function(){var t=this.value&&this.value.length||0,e=this.maxlength-t;return e>0?e:0}},mounted:function(){var t=this;this.$nextTick((function(){t.textareaHeight=t.$refs.rule&&t.$refs.rule.offsetHeight||40}))},methods:{onfocus:function(){var t=(new Date).getTime();this.blurTime&&t-this.blurTime<300&&window.cordova&&window.cordova.plugins&&window.cordova.plugins.Keyboard&&(this.$refs.input.blur(),window.cordova.plugins.Keyboard.close()),this.blurTime=null,this.$emit("focus")},onblur:function(){this.blurTime=(new Date).getTime(),this.$emit("blur")},setStatus:function(t){console.log(t),this.isLock=t},oninput:function(t){var e=this;setTimeout((function(){if(!e.isLock){var i=t.target.value;i.length>e.maxlength&&(i=i.substring(0,e.maxlength),e.$refs.input.value=i),e.$refs.rule.innerText=i,e.textareaHeight=e.$refs.rule&&e.$refs.rule.offsetHeight+20,e.$emit("input",i),e.$emit("change",i)}}),0)}}},n=(i("2c76"),i("17cc")),s=Object(n.a)(a,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"item-textarea",class:{"border-bottom":t.borderBottom}},[i("div",{staticClass:"item-textarea-content"},[i("textarea",{ref:"input",style:{height:t.textareaHeight+"px"},attrs:{placeholder:t.placeholder},domProps:{value:t.value},on:{focus:t.onfocus,blur:t.onblur,compositionstart:function(e){t.setStatus(!0)},compositionend:function(e){t.setStatus(!1)},input:t.oninput}}),i("div",{ref:"rule",staticClass:"rule"},[t._v("\n      "+t._s(t.value)+"\n    ")]),t.maxlength!==1/0?i("p",{staticClass:"counter"},[t._v("\n      "+t._s(t.lastLength)+"\n    ")]):t._e()])])}),[],!1,null,null,null);e.a=s.exports},"3cd8":function(t,e,i){var a=i("5c19");"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);(0,i("85cb").default)("67c16200",a,!0,{sourceMap:!1,shadowMode:!1})},"3ea4":function(t,e,i){(t.exports=i("690e")(!1)).push([t.i,'.zjapp .tree-icon[data-v-792f710a]{position:relative;width:20px;height:30px;line-height:34px;color:#c8c8c8;font-size:26px}.zjapp .color-theme[data-v-792f710a]{position:relative;top:6px}.zjapp .icon-dropdown[data-v-792f710a]:before,.zjapp .icon-dropright[data-v-792f710a]:before{content:"";position:absolute;width:0;height:0;border:6px solid #c8c8c8}.zjapp .icon-dropdown[data-v-792f710a]:before{top:12px;left:0;border-left-color:transparent}.zjapp .icon-dropdown[data-v-792f710a]:before,.zjapp .icon-dropright[data-v-792f710a]:before{border-right-color:transparent;border-bottom-color:transparent}.zjapp .icon-dropright[data-v-792f710a]:before{top:8.5px;left:4px;border-top-color:transparent}.zjapp .list-tree[data-v-792f710a]{position:relative}.zjapp .tree-checkbox[data-v-792f710a]{position:absolute;right:0;top:0;padding:14px 16px}.zjapp .checkBox-right-padding[data-v-792f710a]{padding-right:50px}',""])},"42ab":function(t,e,i){"use strict";i.r(e);var a=i("8362").a,n=(i("299d"),i("17cc")),s=Object(n.a)(a,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("page-content",{attrs:{title:"登记问题","show-go-root":!0}},[t.problemData.checkItem&&t.problemData.checkItem.id?i("check-guide",{attrs:{slot:"header-bar-right","item-id":t.problemData.checkItem&&t.problemData.checkItem.id},slot:"header-bar-right"}):t._e(),t.isLoading?t._e():i("div",{staticClass:"page-scroll"},[i("item",{staticClass:"p15"},[i("item-img-list",{attrs:{maxlength:15,"track-text":"质量检查"},on:{callback:t.saveProblem,remove:t.onImageRemove},model:{value:t.problemData.image_file,callback:function(e){t.$set(t.problemData,"image_file",e)},expression:"problemData.image_file"}})],1),i("div",{staticClass:"mt10"},[t.allowSelectPlace?i("place-select",{ref:"checkEditPlaceSelect",attrs:{title:"部位",placeholder:t.placeIsRequired?"请选择":"选填",selected:t.problemData.place,"selected-text":t.problemData.place&&t.problemData.place.full_name,"get-options-promise":t.getPlaceOptions,"search-bar":!1,"has-batch":!1,"floor-is-id":!1,"form-check":!!t.placeIsRequired&&t.formCheck},on:{onSelect:t.onPlaceSelect}},[i("div",{staticClass:"item-label",attrs:{slot:"title"},slot:"title"},[t._v("\n          部位"),t.problemData.place_point.length>0?i("span",{staticClass:"icon-huxing-mark ml10",on:{click:function(e){e.stopPropagation(),t.showHuxingMark(null,null)}}},[t._v("\n            图\n          ")]):t._e()])]):t._e(),i("checkitem-select",{attrs:{title:"检查项",selected:t.problemData.checkItem,"selected-text":t.problemData.checkItem&&t.problemData.checkItem.full_name,module:"check-quality","section-id":t.problemData.bidsection_id,"has-desc":!0,"selected-desc":t.problemData.description,"form-check":t.formCheck},on:{onSelect:t.onCheckitemSelect}}),t.descriptionOptions&&t.descriptionOptions.length?i("single-select",{attrs:{title:"描述",options:t.descriptionOptions,"if-toggle":!0,"line-limit":"unlimited"},on:{onSelect:t.selectDesc},model:{value:t.problemData.description,callback:function(e){t.$set(t.problemData,"description",e)},expression:"problemData.description"}}):t._e(),i("item-textarea",{attrs:{placeholder:"补充说明"},on:{change:t.saveProblem},model:{value:t.problemData.remark,callback:function(e){t.$set(t.problemData,"remark",e)},expression:"problemData.remark"}}),i("item",{attrs:{label:"严重程度",mode:"edit"}},[i("div",{staticClass:"item-con",attrs:{slot:"right"},slot:"right"},[i("radio-box",{attrs:{options:t.edOptions},on:{onSelect:t.saveProblem},model:{value:t.problemData.level,callback:function(e){t.$set(t.problemData,"level",e)},expression:"problemData.level"}})],1)]),i("item",{attrs:{label:"整改期限",mode:"edit"}},[i("template",{slot:"right"},[i("div",{staticClass:"item-con align-r"},[i("app-stepper",{staticClass:"date",attrs:{max:"999"},model:{value:t.problemData.deadline,callback:function(e){t.$set(t.problemData,"deadline",e)},expression:"problemData.deadline"}})],1),i("div",{staticClass:"item-font ml5"},[t._v("天")])])],2),i("item-textarea",{attrs:{placeholder:"整改要求"},on:{change:t.saveProblem},model:{value:t.problemData.repair_requirements,callback:function(e){t.$set(t.problemData,"repair_requirements",e)},expression:"problemData.repair_requirements"}}),i("user-select",{attrs:{title:"整改人",multi:!1,options:t.repairOptions,memory:!0,"before-open":t.isCheckItemSelected,"form-check":t.formCheck},on:{onSelect:t.selectRepair},model:{value:t.problemData.repair_set,callback:function(e){t.$set(t.problemData,"repair_set",e)},expression:"problemData.repair_set"}}),i("single-select",{attrs:{title:"责任单位",options:t.contractorOptions,"if-toggle":!0,"before-open":t.isCheckItemSelected},on:{onSelect:t.selectContractor},model:{value:t.problemData.contractor,callback:function(e){t.$set(t.problemData,"contractor",e)},expression:"problemData.contractor"}}),i("user-select",{attrs:{title:"复验人",multi:!0,options:t.reinspectOptions,memory:!0,max:4,"max-tip":"最多4个复验人","before-open":t.isCheckItemSelected,"form-check":t.formCheck},on:{onSelect:t.selectReinspect},model:{value:t.problemData.reinspect_set,callback:function(e){t.$set(t.problemData,"reinspect_set",e)},expression:"problemData.reinspect_set"}}),i("user-select",{attrs:{title:"抄送人",multi:!0,options:t.ccOptions,"before-open":t.isCheckItemSelected},on:{onSelect:t.selectCc},model:{value:t.problemData.cc_set,callback:function(e){t.$set(t.problemData,"cc_set",e)},expression:"problemData.cc_set"}})],1),t.problemData.id?i("app-button-group",[i("app-button",{attrs:{type:"text"},on:{click:t.delProblem}},[t._v("\n        删除此草稿\n      ")])],1):t._e()],1),t.isLoading?t._e():i("app-button-group",{attrs:{"fixed-bottom":"",seamless:""}},[i("app-button",{staticStyle:{width:"50%"},attrs:{plain:""},on:{click:t.saveProblemAndBack}},[t._v("\n      暂存\n    ")]),i("app-button",{on:{click:t.submit}},[t._v("\n      提交\n    ")])],1),i("loading-status",{attrs:{"is-loading":t.isLoading,"is-empty":t.$route.params.id&&!t.problemData.id,"empty-text":"这里暂无数据"}})],1)}),[],!1,null,"bd2a9824",null);e.default=s.exports},"4a69":function(t,e,i){"use strict";i("571f")},"4c2b":function(t,e,i){"use strict";var a=i("329b"),n=i("a065").a,s=(i("84e5"),i("17cc")),o=Object(s.a)(n,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("transition",{attrs:{name:"slide-right"}},[t.show?i("page-content",{attrs:{mode:"dialog",title:"选择检查项","on-close":t.closePopup}},[i("div",{staticClass:"header-right-flex",attrs:{slot:"header-bar-right"},slot:"header-bar-right"},[i("set-usual-items",{attrs:{module:t.module,"check-items":t.setUsualTreeList,"section-id":t.sectionId},on:{onSelect:t.getTreeList}}),i("check-guide",{attrs:{module:t.module,"section-id":t.sectionId}})],1),i("scroller",{attrs:{"is-empty":t.isLoading||!t.treeList.length||t.isSearching}},[t.isLoading?t._e():[i("app-search-bar",{ref:"app-search-bar-checkitem-select",staticClass:"bg-white",attrs:{"history-key":"checkitem-select-search-history-key"},on:{changeSearchStatus:t.setSearchMode},model:{value:t.searchKeyword,callback:function(e){t.searchKeyword=e},expression:"searchKeyword"}}),!t.isSearching||t.searchKeyword?i("tree",{attrs:{data:t.treeList,keyword:t.searchKeyword,selected:[t.selected,t.selectedDesc]},on:{onSelect:t.onSelect}}):t._e()],i("loading-status",{attrs:{"is-loading":t.isLoading,"is-empty":!t.treeList.length,"empty-text":"没有检查项"}},[t.isSearching?i("template",{slot:"empty-text"},[t._v("\n          未搜索到包含"),i("span",{staticClass:"color-blue"},[t._v(t._s(t.searchKeyword))]),t._v("的结果\n        ")]):t._e()],2)],2)],1):t._e()],1)}),[],!1,null,"4c02e6e5",null).exports,r=!1;r||(r=new(a.default.extend(o))({el:document.createElement("div")}),document.body.appendChild(r.$el));e.a=r},5033:function(t,e,i){var a=i("5454");(t.exports=i("690e")(!1)).push([t.i,".zjapp .drawing-con[data-v-fba5990a]{display:flex;flex-direction:column;align-items:center;justify-content:center;height:100%;font-size:0;line-height:0}.zjapp .drawing-con canvas[data-v-fba5990a]{display:block;height:100%;width:100%;background:url("+a(i("eb66"))+") #fff;background-size:4px 4px}.zjapp .loading-text[data-v-fba5990a]{margin-top:15px;color:#aaa}.zjapp .error-text[data-v-fba5990a],.zjapp .loading-text[data-v-fba5990a]{padding:0 15px;line-height:20px;text-align:center;font-size:16px}.zjapp .error-text[data-v-fba5990a]{color:#ff3d3d}",""])},"515e":function(t,e,i){"use strict";var a=i("329b"),n=i("f1e4").a,s=(i("fe9e"),i("17cc")),o=Object(s.a)(n,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("transition",{attrs:{name:"slide-right"}},[t.show?i("page-content",{class:{"content-not-empty":t.content.length},attrs:{mode:"dialog",title:"检查指引","on-close":t.closePopup}},[t.isLoading?t._e():i("div",{staticClass:"check-guide-detail-hd border-bottom"},[i("h2",{staticClass:"check-guide-detail-title pb10"},[t._v(t._s(t.title))])]),!t.isLoading&&t.content.length?i("div",{staticClass:"check-guide-detail-content"},t._l(t.content,(function(e,a){return i("p",{key:a},[e.isImg&&e.src?i("img",{class:{"img-not-ready":!e.ready,error:"rejected"===e.status},attrs:{src:t.getThumbnail(e)},on:{error:function(i){t.imgError(e,a)},click:function(i){t.imgClick(e)}}}):t._e(),e.isImg?t._e():i("span",[t._v("\n          "+t._s(e.val)+"\n        ")])])}))):t._e(),i("loading-status",{attrs:{"is-loading":t.isLoading,"is-empty":!t.content.length,"empty-text":"PC端未设置检查指引"}})],1):t._e()],1)}),[],!1,null,"43042f0d",null).exports,r=!1;r||(r=new(a.default.extend(o))({el:document.createElement("div")}),document.body.appendChild(r.$el));e.a=r},"53a4":function(t,e,i){"use strict";i("a5bf")},"53e4":function(t,e,i){"use strict";i("75b9")},"571f":function(t,e,i){var a=i("3ea4");"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);(0,i("85cb").default)("0f7a5f2a",a,!0,{sourceMap:!1,shadowMode:!1})},"573a":function(t,e,i){"use strict";(function(t){i("5ab2"),i("6d57"),i("e10e"),i("e697");var a=i("28f8"),n=(i("f548"),i("cc57"),i("9a33"),i("c0c3"),i("e89f")),s=i("07d2"),o=i("ab5c");function r(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,a)}return i}function c(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?r(Object(i),!0).forEach((function(e){Object(a.a)(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):r(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}e.a={name:"CheckitemSelectDialog",components:{Item:s.default},mixins:[n.a],data:function(){return{breadCrumbs:[{id:1,name:"全部",type:"batchs"}],hasBatch:!0,activeCrumbIndex:1,mapBreadCrumbs:{},beforeConfirm:function(){},callback:function(){},show:!1,isLoading:!0,keyword:"",title:"",options:[],selected:{},searchBar:!0,isSearching:!1,searchResults:[],selectedBuilding:{},selectedUnit:{},selectedFloor:{},selectedRoom:{id:""},isSelHasUnit:!0,list:[],batchs:[],buildings:[],units:[],floors:[],rooms:[],projectId:"",searchOrigin:[],floorIsId:!0}},computed:{lastItem:function(){var e;return t.isEmpty(this.selectedRoom)?t.isEmpty(this.selectedFloor)?t.isEmpty(this.selectedUnit)?t.isEmpty(this.selectedBuilding)||(e={type:"building",item:this.selectedBuilding}):e={type:"unit",item:this.selectedUnit}:e={type:"floor",item:this.selectedFloor}:e={type:"room",item:this.selectedRoom},e}},watch:{keyword:function(t){this.search(t)}},mounted:function(){window.multiPlaceTest=this},methods:{searchItemClick:function(t){var e={sec_id:t.sec_id,building_id:t.building_id,unit_id:t.unit,room_id:t.id,floor:t.floor,full_name:t.full_name.split("-").slice(1).join("")};this.callback(e)},search:function(t){this.searchResults=this.searchOrigin.filter((function(e){return e.full_name.indexOf(t)>-1}))},itemClick:function(e){if(console.log("自定义部位-console-itemClick：",e),e.buildings&&(this.selectBatch(e),e.buildings.length||this.select()),e.units){var i=this.selectBuilding(e);e.units.length||!1===i||this.select()}if(e.floors){var a=null;a=t.isEmpty(this.selectedBuilding)?this.selectBuilding(e):this.selectUnit(e),e.floors.length||!1===a||this.select()}e.rooms&&(this.selectFloor(e),e.rooms.length||this.select()),e.room_no&&this.selectRoom(e)},selectBatch:function(t){this.buildings=this.options=t.buildings,this.activeCrumbIndex=this.mapBreadCrumbs.batch,this.breadCrumbs.push({id:this.activeCrumbIndex,name:t.name,type:"buildings",item:t})},crumbClick:function(t){this.activeCrumbIndex=t.id,this.breadCrumbs=this.breadCrumbs.slice(0,t.id),this.breadCrumbs[this.breadCrumbs.length-1].selected=!0,this.options=this[t.type],["batchs","buildings"].indexOf(t.type)>-1&&this.selectBuilding();var e=t.item||{};e.units&&(this.selectedBuilding=e,this.selectedUnit={},this.selectedFloor={},this.selectedRoom={}),e.floors&&(this.selectedUnit=this.isSelHasUnit?e:{},this.selectedFloor={},this.selectedRoom={}),e.rooms&&(this.selectedFloor=e,this.selectedRoom={})},openPopup:function(e){var i=this;if(this.value=!0,this.show=!0,this.projectId=e.projectId,this.title=e.title,this.selected=e.selected,this.floorIsId=e.floorIsId,this.hasBatch=!!t.isBoolean(e.hasBatch)&&e.hasBatch,this.searchBar=!!t.isBoolean(e.searchBar)&&e.searchBar,this.beforeConfirm=t.isFunction(e.beforeConfirm)?e.beforeConfirm:function(){},this.callback=t.isFunction(e.callback)?e.callback:function(){},this.breadCrumbs=[{id:1,name:"全部",type:"batchs"}],t.isEmpty(e.options)){var a=e.getOptionsPromise&&e.getOptionsPromise();a&&a.then&&t.isFunction(a.then)&&(this.isLoading=!0,a.then((function(t){i.batchs=i.options=t,i.setDefaultSeleted(),i.isLoading=!1})))}else this.batchs=this.options=e.options,this.setDefaultSeleted(),this.isLoading=!1;this.projectId&&!this.searchOrigin.length&&this.getRooms(this.projectId);var n=["batch","building","unit","floor"];this.hasBatch||n.shift(),n.reduce((function(t,e){return i.mapBreadCrumbs[e]=t,++t}),2),this.$emit("open")},getRooms:function(t){var e=this;return o.a.getAllRooms(t).then((function(t){e.searchOrigin=t.map((function(t){var e="";return t.sec_name&&(e+=t.sec_name),t.building_name&&(e+="-".concat(t.building_name)),t.unit&&(t.unitName=t.unit.replace("单元","")+"单元",e+="-".concat(t.unitName)),t.floor&&(t.floorName=t.floor.replace("层","")+"层",e+="-".concat(t.floorName)),e+="-".concat(t.room_no),c(c({},t),{},{full_name:e})}))}))},closePopup:function(){this.value=!1,this.show=!1,this.$emit("close")},setDefaultSeleted:function(){var e,i=this,a=1;this.selected&&this.selected.building_id&&(this.hasBatch?(this.mapBreadCrumbs.batch=++a,this.mapBreadCrumbs.building=++a,t.each(this.batchs||[],(function(a){t.each(a.buildings||[],(function(t){t.id===i.selected.building_id&&(e=t,i.selectBatch(a))}))}))):(this.mapBreadCrumbs.building=++a,t.each(this.batchs||[],(function(t){t.id===i.selected.building_id&&(e=t)}))));var n=this.selected&&this.selected.unit_id&&e&&t.find(e.units||[],(function(t){return t.id.toUpperCase()===i.selected.unit_id.toUpperCase()})),s=this.selected&&this.selected.floor&&e&&t.find(n?n.floors:e.floors||[],(function(t){return i.floorIsId?t.id===i.selected.floor:t.floor===i.selected.floor})),o=this.selected&&this.selected.room_id&&s&&t.find(s.rooms||[],(function(t){return t.id.toUpperCase()===i.selected.room_id.toUpperCase()}));this.selectedBuilding={},this.selectedUnit={},this.selectedFloor={},this.selectedRoom={},e&&this.selectBuilding(e),n&&this.selectUnit(n),s&&this.selectFloor(s),o&&this.selectRoom(o,!0)},selectBuilding:function(e){return!e||e.disabled?(this.selectedBuilding={},this.selectedUnit={},this.selectedFloor={},void(this.selectedRoom={})):this.selectedBuilding&&this.selectedBuilding.id===e.id&&90===e.process_mode?(this.selectedBuilding={},!1):(this.selectedBuilding=e,t.isEmpty(e.units)&&t.isEmpty(e.floors)?90===e.process_mode&&(this.activeCrumbIndex=1):(e.units?(this.units=this.options=e.units,i="units"):(this.floors=this.options=e.floors,i="floors",this.isSelHasUnit=!1),this.activeCrumbIndex=this.mapBreadCrumbs.building,this.breadCrumbs.push({id:this.activeCrumbIndex,name:e.name,type:i,item:e})),this.selectedUnit={},this.selectedFloor={},void(this.selectedRoom={}));var i},selectUnit:function(e){return!e||e.disabled?(this.selectedUnit={},this.selectedFloor={},void(this.selectedRoom={})):this.selectedUnit&&this.selectedUnit.id===e.id&&90===e.process_mode?(this.selectedUnit={},!1):(this.selectedUnit=e,t.isEmpty(e.floors)||(this.floors=this.options=e.floors,this.activeCrumbIndex=this.mapBreadCrumbs.unit,this.breadCrumbs.push({id:this.activeCrumbIndex,name:e.name,type:"floors",item:e})),this.selectedFloor={},void(this.selectedRoom={}))},selectFloor:function(e){if(!e||e.disabled)return this.selectedFloor={},void(this.selectedRoom={});this.selectedFloor=e,t.isEmpty(e.rooms)||(this.rooms=this.options=e.rooms,this.activeCrumbIndex=this.mapBreadCrumbs.floor,this.breadCrumbs.push({id:this.activeCrumbIndex,name:e.name,type:"rooms",item:e})),this.selectedRoom={}},selectRoom:function(t,e){t&&!t.disabled?this.selectedRoom&&this.selectedRoom.id===t.id?this.selectedRoom={}:(this.selectedRoom=t,!0!==e&&this.select()):this.selectedRoom={}},select:function(){var t=this,e=this.getResult(),i=this.beforeConfirm(e,this.lastItem);i&&i.then?i.then((function(i){!1!==i&&t.callback(e)})):!1!==i&&this.callback(e)},getResult:function(){var e={sec_id:"",building_id:"",unit_id:"",room_id:"",full_name:"",process_mode:null};return t.isEmpty(this.selectedBuilding)||(e.building_id=this.selectedBuilding.id,e.sec_id=this.selectedBuilding.sec_id||this.selectedBuilding.section_id||"",e.full_name+=this.selectedBuilding.name,e.process_mode=this.selectedBuilding.process_mode),t.isEmpty(this.selectedUnit)||(e.unit_id=this.selectedUnit.id,e.full_name+=this.selectedUnit.name,e.process_mode=this.selectedUnit.process_mode),t.isEmpty(this.selectedFloor)||(this.floorIsId?e.floor=this.selectedFloor.id:e.floor=this.selectedFloor.floor,t.isEmpty(this.selectedRoom)&&(e.full_name+=this.selectedFloor.name)),t.isEmpty(this.selectedRoom)||(e.room_id=this.selectedRoom.id,e.full_name+=this.selectedRoom.name),e},isCheck:function(e){var i,a=t.find(this.breadCrumbs,{id:this.activeCrumbIndex}),n=a?a.type:"";return 90===e.process_mode&&"batchs"===n||"buildings"===n?i=this.selectedBuilding:"units"===n?i=this.selectedUnit:"floors"===n?i=this.selectedFloor:"rooms"===n&&(i=this.selectedRoom),i&&i.id===e.id}}}}).call(this,i("391c"))},"574c":function(t,e,i){(t.exports=i("690e")(!1)).push([t.i,".zjapp .item-textarea{background-color:#fff;padding:5px 15px}.zjapp .item-textarea-content{position:relative}.zjapp .item-textarea .rule,.zjapp .item-textarea textarea{width:100%;min-height:40px;line-height:20px;font-size:16px;padding:0;border:none}.zjapp .item-textarea .rule{position:absolute;top:0;left:0;visibility:hidden;word-break:break-all}.zjapp .item-textarea .counter{text-align:right;margin:0 0 -5px 0;height:15px;line-height:15px;color:#b2b2b2;font-size:12px}",""])},5897:function(t,e,i){var a=i("9b8b");"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);(0,i("85cb").default)("bf5c2528",a,!0,{sourceMap:!1,shadowMode:!1})},"5a71":function(t,e,i){"use strict";var a=i("29be").a,n=i("17cc"),s=Object(n.a)(a,(function(){var t=this,e=t.$createElement;return(t._self._c||e)("item",{class:t.required,attrs:{label:t.title,text:t.value&&t.value.id?t.value.name:"view"===t.mode?"无":"",mode:t.mode,editabled:t.editabled,placeholder:t.required?t.placeholder||"请选择":"选填","form-check":t.formCheck},on:{click:t.openSelect}})}),[],!1,null,null,null);e.a=s.exports},"5c19":function(t,e,i){(t.exports=i("690e")(!1)).push([t.i,".zjapp .content-not-empty[data-v-43042f0d] .layout-content{display:auto;overflow:auto;padding-bottom:100px}.zjapp .check-guide-detail-hd[data-v-43042f0d]{margin-left:30px;padding:25px 30px 5px 0}.zjapp .check-guide-detail-title[data-v-43042f0d]{margin:0;line-height:20px;font-size:18px;color:#111;font-weight:700;word-break:break-all}.zjapp .check-guide-detail-info[data-v-43042f0d]{line-height:20px;font-size:14px;color:#8c8c8c}.zjapp .check-guide-detail-content[data-v-43042f0d]{padding:30px;line-height:30px;color:#333;font-size:16px}.zjapp .check-guide-detail-content p[data-v-43042f0d]{margin-bottom:30px;min-height:1em}.zjapp .check-guide-detail-content img[data-v-43042f0d]{max-width:100%}.zjapp .check-guide-detail-content .img-not-ready[data-v-43042f0d]{width:80px;height:auto}.zjapp .error[data-v-43042f0d]{max-width:50%}",""])},6272:function(t,e,i){(t.exports=i("690e")(!1)).push([t.i,'.zjapp .number-input[data-v-74068386]{position:relative;display:inline-block;vertical-align:top;width:61px;height:30px;border:1px solid #e5e5e5;border-radius:3px;text-align:center;font-size:14px;color:#333}@media screen and (min-width:320px){.zjapp .number-input[data-v-74068386]{width:50px}}@media screen and (min-width:360px){.zjapp .number-input[data-v-74068386]{width:58px}}@media screen and (min-width:375px){.zjapp .number-input[data-v-74068386]{width:61px}}.zjapp .text[data-v-74068386]{position:relative;display:inline-block;vertical-align:top;width:100%;height:100%;line-height:28px;overflow:hidden}.zjapp .text.disabled[data-v-74068386]{background:#f5f5f5;color:#666}.zjapp .value[data-v-74068386]{position:absolute;top:50%;right:0;margin-top:-14px;min-width:100%;height:28px;color:inherit}.zjapp .placeholder[data-v-74068386],.zjapp .value[data-v-74068386]{line-height:28px;pointer-events:none}.zjapp .placeholder[data-v-74068386]{display:inline-block;vertical-align:top;width:100%;height:100%;color:#b2b2b2}.zjapp .icon-minus[data-v-74068386]{position:absolute;top:-9px;right:-9px;width:18px;height:18px;border-radius:9px;background-color:#ff4546}.zjapp .icon-minus[data-v-74068386]:before{content:"";position:absolute;left:4px;top:8px;width:10px;height:2px;background-color:#fff}.zjapp .icon-minus[data-v-74068386]:after{content:"";position:absolute;left:-5px;top:-5px;width:28px;height:28px;border-radius:9px}.zjapp .number-input-select-all .value-handle[data-v-74068386]{background-color:#cbdaf9}.zjapp .number-input.unqualified[data-v-74068386]{border:1px solid #ffe8e8;background-color:#fff3f3;color:#ff5050}.zjapp .number-input.qualified .text[data-v-74068386]{color:#333}.zjapp .number-input.number-input-focus[data-v-74068386]{border-color:#4275e8;box-shadow:0 0 8px 0 rgba(66,117,232,.37)}.zjapp .number-input.number-input-empty[data-v-74068386]{border-color:#ff3d3d;box-shadow:0 0 8px 0 rgba(255,59,48,.37)}',""])},6412:function(t,e,i){"use strict";(function(t){i("e697"),i("6d57"),i("06a2");var a=i("7b10"),n=i("7bac"),s=i("a7c3");e.a={name:"SetUsualItems",props:{module:{type:String,default:null},checkItems:{type:Array,default:function(){return[]}},sectionId:{type:String,default:""}},data:function(){return{}},computed:{moduleAtter:function(){return this.$store.state.global.moduleAttribute[this.module]||{}},isSetUsualItems:function(){return this.moduleAtter.setUsualItems},mmkvCode:function(){return s.a[this.moduleAtter.mmkv_item]+"_"+this.sectionId},mmkvTipsCode:function(){return s.a[this.moduleAtter.mmkv_item_tips]}},methods:{openPopup:function(){var t=this;Promise.all([this.mmkvItem(),this.mmkvItemTips()]).then((function(e){var i=JSON.parse(JSON.stringify(t.checkItems));i=null===e[0]?t.patch(i):t.mergeArray(i,e[0]),a.a.openPopup({checkItems:i,mmkvItemTips:null===e[1]||e[1],tipsCallback:t.tipsCloseCallback,saveCallback:t.saveCallback})}))},mmkvItem:function(){return n.a.getUserKey(this.mmkvCode)},mmkvItemTips:function(){return n.a.getUserKey(this.mmkvTipsCode)},saveCallback:function(t){return this.$emit("onSelect"),n.a.setUserKey(this.mmkvCode,t)},tipsCloseCallback:function(t){n.a.setUserKey(this.mmkvTipsCode,t)},patch:function(e){var i=this;return t.map(e,(function(e){if(e.isOpen=!1,e.status="fullSelected",e.checked=!0,!t.isEmpty(e.children)){var a=t.find(e.children,(function(t){return"desc"===t.type}));t.isEmpty(a)?e.children=i.patch(e.children):e.children=[]}return e}))},mergeArray:function(e,i){var a=this;return t.map(e,(function(e){var n=i[e.id];if(t.isEmpty(n)?(e.isOpen=!1,e.status=null,e.checked=!1):(e.isOpen=n.isOpen,e.status=n.status,e.checked=n.checked),!t.isEmpty(e.children)){var s=t.find(e.children,(function(t){return"desc"===t.type}));t.isEmpty(s)?e.children=a.mergeArray(e.children,i):e.children=[]}return e}))}}}}).call(this,i("391c"))},6948:function(t,e,i){"use strict";i("2b45"),i("163d");var a=i("329b"),n=i("8c3d").a,s=(i("b55a"),i("17cc")),o=Object(s.a)(n,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("transition",{attrs:{name:"slide-up"},on:{leave:t.startClose,afterLeave:t.onClose}},[t.show?i("div",{staticClass:"number-keyboard-con",class:{"ios-bezel-less":t.isIOSBezelLess},style:{"z-index":t.zIndex},on:{touchstart:t.keyTouchstart,touchend:t.keyTouchend}},["true-or-false"===t.type?[i("div",{staticClass:"keyboard-row"},[i("div",{staticClass:"row-span-3 keys-row"},[i("div",{staticClass:"keys col color-green",attrs:{direct:"setTure"}},[i("icon",{attrs:{name:"qualified"}}),t._v("\n            合格\n          ")],1),i("div",{staticClass:"keys col color-red",attrs:{direct:"setFalse"}},[i("icon",{attrs:{name:"unqualified"}}),t._v("\n            不合格\n          ")],1)]),i("div",{staticClass:"row-span-1"},[i("div",{staticClass:"keys-row"},[i("div",{staticClass:"keys keys-ok",attrs:{direct:"closeKeyboard"}},[i("icon",{attrs:{name:"keyboard-close"}})],1)]),i("div",{staticClass:"keys-row"},[i("div",{staticClass:"keys keys-delete",attrs:{direct:"delete"}},[i("icon",{attrs:{name:"keyboard-delete"}})],1)])])]),i("div",{staticClass:"keyboard-row"},[i("div",{staticClass:"keys keys-prev",class:{disabled:!t.hasPrev},attrs:{direct:"prev"}},[t._v("\n          上一项\n        ")]),i("div",{staticClass:"keys keys-next",class:{disabled:!t.hasNext},attrs:{direct:"next"}},[t._v("\n          下一项\n        ")])])]:[i("div",{staticClass:"keyboard-row"},[i("div",{staticClass:"keys",attrs:{direct:"1"}},[t._v("1")]),i("div",{staticClass:"keys",attrs:{direct:"2"}},[t._v("2")]),i("div",{staticClass:"keys",attrs:{direct:"3"}},[t._v("3")]),i("div",{staticClass:"keys keys-ok",attrs:{direct:"closeKeyboard"}},[i("icon",{attrs:{name:"keyboard-close"}})],1)]),i("div",{staticClass:"keyboard-row"},[i("div",{staticClass:"keys",attrs:{direct:"4"}},[t._v("4")]),i("div",{staticClass:"keys",attrs:{direct:"5"}},[t._v("5")]),i("div",{staticClass:"keys",attrs:{direct:"6"}},[t._v("6")]),i("div",{staticClass:"keys keys-delete",attrs:{direct:"delete"}},[i("icon",{attrs:{name:"keyboard-delete"}})],1)]),i("div",{staticClass:"keyboard-row"},[i("div",{staticClass:"keys",attrs:{direct:"7"}},[t._v("7")]),i("div",{staticClass:"keys",attrs:{direct:"8"}},[t._v("8")]),i("div",{staticClass:"keys",attrs:{direct:"9"}},[t._v("9")]),i("div",{staticClass:"keys keys-prev",class:{disabled:!t.hasPrev},attrs:{direct:"prev"}},[t._v("\n          上一项\n        ")])]),i("div",{staticClass:"keyboard-row"},[i("div",{staticClass:"keys",class:{disabled:t.isDisabledMinus},attrs:{direct:"-"}},[t._v("-")]),i("div",{staticClass:"keys",attrs:{direct:"0"}},[t._v("0")]),i("div",{staticClass:"keys",class:{disabled:t.isDisabledPoint},attrs:{direct:"."}},[t._v(".")]),i("div",{staticClass:"keys keys-next",class:{disabled:!t.hasNext},attrs:{direct:"next"}},[t._v("\n          下一项\n        ")])])]],2):t._e()])}),[],!1,null,"6337f428",null).exports,r=!1;r||(r=new(a.default.extend(o))({el:document.createElement("div")}),document.body.appendChild(r.$el));var c=r,l=i("6f9e"),d=i("4360"),p={name:"NumberInput",props:{value:{type:[String,Number]},type:{type:String,default:"all"},decimal:{type:Number,default:2},placeholder:{type:String,default:""},nextEvent:{type:Function},range:{type:Array,default:function(){return[]}},overflowAutoRecover:{type:Boolean,default:!1},required:{type:Boolean},emptyAutoRecover:{type:Boolean,default:!0},disabled:{type:Boolean,default:!1},isSetEmptyTip:{type:Boolean,default:!1}},data:function(){return{rawValue:"",isFocusing:!1,isSelectAll:!1,keyboardHeight:d.a.state.app.isIOSBezelLess?266:"true-or-false"===this.type?176:232}},computed:{min:function(){return isNaN(this.range[0])?-1/0:parseFloat(this.range[0])},max:function(){return isNaN(this.range[1])?1/0:parseFloat(this.range[1])}},created:function(){l.a.$on("numberInputBlur",this.setBlur),l.a.$on("numberKeyboardClose",this.setBlur)},beforeDestroy:function(){this.isFocusing&&c.closeKeyboard()},destroyed:function(){l.a.$off("numberInputBlur",this.setBlur),l.a.$off("numberKeyboardClose",this.setBlur)},methods:{hasVal:function(t){return null!=t&&""!==t},openKeyboard:function(){this.disabled||(this.isFocusing?this.isSelectAll=!1:(l.a.$emit("numberInputBlur"),this.setFocus(),c.openKeyboard({inputComponent:this})))},setFocus:function(){this.isFocusing=!0,"true-or-false"!==this.type&&(this.isSelectAll=!0),this.rawValue=this.value,c.$on("keyboardInput",this.input),c.$on("keyboardAssign",this.assign),c.$on("keyboardDelete",this.deleteValue),c.$on("keyboardClear",this.clear),this.$emit("focus")},setBlur:function(){if(this.isFocusing){var t=this.checkValue();this.isFocusing=!1,this.isSelectAll=!1,c.$off("keyboardInput",this.input),c.$off("keyboardAssign",this.assign),c.$off("keyboardDelete",this.deleteValue),c.$off("keyboardClear",this.clear),this.$emit("input",t),this.$emit("blur",t),this.$nextTick((function(){c.calcTab()}))}},input:function(t){var e=this.hasVal(this.value)?this.value.toString():"",i="";this.isSelectAll?(i=t,this.isSelectAll=!1):i=e+t,console.log("newValue =====",i),this.$emit("input",i),c.setKeysStatus(i,this.type)},assign:function(t){this.isSelectAll=!1,this.$emit("input",t),c.setKeysStatus(t,this.type)},deleteValue:function(){var t=this.hasVal(this.value)?this.value.toString():"",e="";this.hasVal(t)&&(e=this.isSelectAll?"":t.substr(0,t.length-1)),this.$emit("input",e),c.setKeysStatus(e,this.type)},clear:function(){this.$emit("input",""),c.setKeysStatus("",this.type)},checkValue:function(){var t=this.hasVal(this.value)?this.value.toString():"";"-"===t&&(t=""),"."===t.substr(-1)&&(t=t.substr(0,t.length-1));var e=t.indexOf(".");return e>0&&(t=parseFloat(t.substring(0,e+this.decimal+1))),t=parseFloat(t),isNaN(t)?this.required&&this.emptyAutoRecover?(t=this.rawValue,this.$emit("onEmpty")):t="":(t<this.min&&(t=this.overflowAutoRecover?this.rawValue:this.min,this.$emit("overflowRange")),t>this.max&&(t=this.overflowAutoRecover?this.rawValue:this.max,this.$emit("overflowRange"))),t}}},h=(i("6abe"),Object(s.a)(p,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"number-input component-number-input",class:{"number-input-focus":t.isFocusing,"number-input-empty":t.isSetEmptyTip&&!t.value&&!t.isFocusing,"number-input-select-all":t.isSelectAll,qualified:"true-or-false"===t.type&&1===t.value,unqualified:"true-or-false"===t.type&&0===t.value}},[i("div",{staticClass:"text",class:{disabled:t.disabled},on:{click:function(e){return e.stopPropagation(),t.openKeyboard(e)}}},[t.hasVal(t.value)?i("span",{staticClass:"value"},[i("span",{staticClass:"value-handle"},[t._v(t._s("true-or-false"===t.type?1===t.value?"合格":"不合格":t.value))])]):i("span",{staticClass:"placeholder"},[t._v("\n      "+t._s(t.placeholder)+"\n    ")])]),t._t("extend")],2)}),[],!1,null,"74068386",null));e.a=h.exports},"6abe":function(t,e,i){"use strict";i("bebe")},"75b9":function(t,e,i){var a=i("e5a0");"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);(0,i("85cb").default)("417e698a",a,!0,{sourceMap:!1,shadowMode:!1})},"7ab6":function(t,e,i){"use strict";var a=i("d1f2").a,n=i("17cc"),s=Object(n.a)(a,(function(){var t=this,e=t.$createElement;return(t._self._c||e)("item",{attrs:{label:t.title,text:t.hasSelected?t.selectedText:"",mode:t.mode,editabled:t.editabled,"item-calss":t.selectClass,"form-check":t.formCheck},on:{click:t.onClick}})}),[],!1,null,null,null);e.a=s.exports},"7b10":function(t,e,i){"use strict";var a=i("329b"),n=i("b5c6").a,s=(i("53a4"),i("17cc")),o=Object(s.a)(n,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("transition",{attrs:{name:"slide-right"}},[t.show?i("page-content",{attrs:{"show-go-back":!1,mode:"dialog",title:"设置可见的检查项","on-close":t.closePopup}},[i("div",{staticClass:"set-usual-items-header",attrs:{slot:"header-bar-left"},on:{click:t.closePopup},slot:"header-bar-left"},[t._v("取消")]),i("div",{staticClass:"set-usual-items-header",attrs:{slot:"header-bar-right"},on:{click:t.save},slot:"header-bar-right"},[t._v("保存")]),t.isLoading?t._e():i("div",{staticClass:"page-scroll"},[t.mmkvItemTips?i("div",{staticClass:"set-view-tip"},[t._v("\n        若不显示该检查项，请取消勾选\n        "),i("icon",{attrs:{name:"nav-close"},on:{click:function(e){t.closeTip()}}})],1):t._e(),i("tree",{attrs:{data:t.checkItems,"is-checkbox":!0},on:{onSelect:t.onSelect}}),i("loading-status",{attrs:{"is-empty":!t.checkItems.length,"empty-text":"没有检查项"}})],1),i("loading-status",{attrs:{"is-loading":t.isLoading}})],1):t._e()],1)}),[],!1,null,"5cfe259f",null).exports,r=!1;r||(r=new(a.default.extend(o))({el:document.createElement("div")}),document.body.appendChild(r.$el));e.a=r},"81f2":function(t,e,i){(t.exports=i("690e")(!1)).push([t.i,'.zjapp .main[data-v-2cac8864]{position:fixed;width:100%;bottom:0}.zjapp .arrow[data-v-2cac8864]{position:absolute;top:-7px;right:18px;width:0;height:0;border-bottom:7px solid #fff;border-right:7px solid transparent;border-left:7px solid transparent}.zjapp .content[data-v-2cac8864]{position:absolute;top:0;left:0;width:100%;height:100%;background-color:rgba(0,0,0,.4);overflow:hidden}.zjapp .box[data-v-2cac8864]{display:flex;flex-direction:column;background-color:#fff;overflow:auto}.zjapp .box-single[data-v-2cac8864]{display:flex;flex-direction:column;flex:1}.zjapp .detail-hd[data-v-2cac8864]{display:flex;padding:6px 15px}.zjapp .detail-arrow-right[data-v-2cac8864]{width:13px;height:34px;overflow:hidden}.zjapp .detail-arrow-right[data-v-2cac8864]:before{display:block;content:"";width:0;height:0;margin-top:12px;border:5px solid transparent;border-left:5px solid #c8c8c8}.zjapp .detail-arrow-down[data-v-2cac8864]{width:13px;height:34px;overflow:hidden}.zjapp .detail-arrow-down[data-v-2cac8864]:before{display:block;content:"";width:0;height:0;margin-top:15px;border:5px solid transparent;border-top:5px solid #c8c8c8}.zjapp .detail-title[data-v-2cac8864]{flex:1;line-height:34px;color:#111;font-size:16px}.zjapp .detail-bd[data-v-2cac8864]{padding:8px 15px 8px 35px;background-color:#fafafa}.zjapp .text-line[data-v-2cac8864]{font-size:14px;color:#666;line-height:30px;margin-bottom:30px}.zjapp .detail-hd-single[data-v-2cac8864]{padding:6px 0;margin:0 15px}.zjapp .detail-bd-single[data-v-2cac8864]{display:flex;flex-direction:column;flex:1;padding:8px 15px;background-color:#fff}',""])},8362:function(t,e,i){"use strict";(function(t){i("cc57"),i("163d");var a=i("f369"),n=i("07d2"),s=i("e68e"),o=i("fe13"),r=i("7ab6"),c=i("3c64"),l=i("5a71"),d=i("1059"),p=i("cd05"),h=i("0f7b"),u=i("fd50"),m=i("e2a7"),f=i("6144"),g=i("bc69"),b=i("3516"),v=i("0654"),y=i("65a8"),x=i("3bd5"),k=i("59f8"),_=i("b6da"),w=i("06f6"),C=i("242b"),S=i("112f"),I=i("37d5"),D=i("5ff0"),j=i("bcc7"),O=i("48f4"),P=i("c058");e.a={name:"CheckQualityEdit",components:{AppStepper:h.a,CheckGuide:a.a,Item:n.default,ItemImgList:s.a,PlaceSelect:o.a,CheckitemSelect:r.a,ItemTextarea:c.a,SingleSelect:l.a,RadioBox:d.a,UserSelect:p.a},data:function(){return{isLoading:!0,isSaving:!1,problemData:{},allowSelectPlace:!1,placeIsRequired:!1,descriptionOptions:[],contractorOptions:[],showContractorDialog:!1,formCheck:!1}},activated:function(){this.descriptionOptions=[],this.isSaving=!1,this.formCheck=!1;var t=this.$route.params.id;this.loadProblemData(t)},methods:{loadProblemData:function(e){var i=this,a=x.a.getUser(),n=f.a.getObject(g.a.HOME_PAGE_DEFAULT_PROJECT,f.a.level.user)||{};this.isLoading=!0,(e?v.a.getCheckProblemInfo(e).then((function(t){i.allowSubmit="待提交"===t.status&&a.user_id===t.created_by,i.problemData={id:t.id,status:t.status,proj_id:t.proj_id,place:{building_id:t.building_id,unit_id:t.unit,floor:t.floor,room_id:t.room_id,full_name:t.place},bidsection_id:t.bidsection_id,batch_id:t.batch_id,batch_type:t.batch_type,created_by:t.created_by,checkItem:{id:t.item_id,name:t.item_name,full_name:t.item_full_name,parentId:t.item_parent_id},description:{id:t.desc_id,name:t.desc},image_file:JSON.parse(t.image_file||"[]"),remark:t.remark,repair_requirements:t.repair_requirements,level:t.emergency_degree||"一般",deadline:void 0===t.deadline||null===t.deadline?7:Number(t.deadline),contractor:{id:t.contractor_id,name:t.contractor_name},cc_set:t.cc_set_array||[],reinspect_set:t.reinspect_set,building_id:t.building_id,unit:t.unit,floor:t.floor,room_id:t.room_id,place_point:JSON.parse(t.problem_values||"[]"),drawing_file:JSON.parse(t.drawing_file||"[]"),repair_set:t.repair_set,process_mode:t.process_mode}})):b.a.getDefaultBatch("质量检查",n.id).then((function(t){var e=f.a.getObject(t.bidsection_id+"-check-quality-edit-place",f.a.level.user)||{};i.allowSubmit=!0,i.problemData={status:"待提交",proj_id:n.id,place:e,bidsection_id:t.bidsection_id,batch_id:t.id,batch_type:t.batch_type,checkItem:{},description:{},image_file:[],remark:"",repair_requirements:"",level:"一般",deadline:void 0===t.repair_deadline||null===t.repair_deadline?7:t.repair_deadline,repair_set:{},contractor:{},cc_set:[],reinspect_set:[],building_id:e.building_id,unit:e.unit_id,floor:e.floor,room_id:e.room_id,place_point:[],created_by:a.user_id,process_mode:e.process_mode}}))).then((function(){t.isEmpty(i.problemData.drawing_file)&&i.getDiagram(i.problemData.place).then((function(e){t.isEmpty(e)||(i.problemData.drawing_file=[e])}))})).then((function(){return y.a.getOptions("紧急程度").then((function(t){t["特急"]||delete t["特急"],i.edOptions=t}))})).then((function(){if("dev"===APP_ENV){var t=i.problemData.image_file;t[0]&&!t[0].url&&t[0].temp&&O.default.uploadImage(i.problemData.id,"checkquality_problem").then((function(t){i.problemData.image_file=t[0].image_file}))}})).then((function(){return b.a.hasBuildingOrLocation(i.problemData.bidsection_id).then((function(t){i.allowSelectPlace=t.length>0})).then((function(){return k.a.isPlaceNeeded("QUALITY_CHECK").then((function(t){i.placeIsRequired=t&&i.allowSelectPlace}))}))})).then((function(){if(i.problemData.checkItem&&i.problemData.checkItem.id)return j.a.getBidSectionCheckItemInfo(i.problemData.proj_id,i.problemData.bidsection_id,i.problemData.checkItem.id,"质量检查").then((function(t){i.problemData.defaultCcList=t&&t.cc?t.cc:[]})).then((function(){if(i.problemData.building_id)return j.a.getBuildingCheckItemInfo(i.problemData.proj_id,i.problemData.building_id,i.problemData.unit,"质量检查",i.problemData.checkItem.id).then((function(e){e&&!t.isEmpty(e.cc)&&(i.problemData.defaultCcList=e.cc)}))}))})).then((function(){if(i.problemData.checkItem&&i.problemData.checkItem.id)return S.a.getCheckItemDescList(i.problemData.checkItem.id).then((function(t){t&&t.length?i.descriptionOptions=t:i.descriptionOptions=[]}))})).then((function(){return I.default.getProjectUsers(i.problemData.proj_id,[31,32,33]).then((function(e){i.repairOptions=t.clone(e),i.ccOptions=t.clone(e),i.reinspectOptions=t.clone(e)}))})).then((function(){return i.loadContractor()})).catch((function(t){$log.log(t)})).finally((function(){i.isLoading=!1}))},onImageRemove:function(){},onPlaceSelect:function(e){var i=this;this.getDiagram(e).then((function(a){if(!t.isEmpty(a))return i.showHuxingMark(a,e).then((function(){i.problemData.drawing_file=[a],i.setPlace(e),i.$refs.checkEditPlaceSelect.close()}));i.problemData.place_point=[],i.problemData.drawing_file=[],i.setPlace(e),i.$refs.checkEditPlaceSelect.close()}))},setPlace:function(t){var e=this;t.full_name&&(this.problemData.building_id=t.building_id,this.problemData.process_mode=t.process_mode||null,this.problemData.place=t,this.problemData.room_id=t.room_id,this.problemData.floor=t.floor,this.problemData.unit=t.unit_id),f.a.saveObject(this.problemData.bidsection_id+"-check-quality-edit-place",t,f.a.level.user),this.loadCheckitemDefaultSetting().then((function(){e.saveProblem()}))},showHuxingMark:function(e,i){var a=this,n=u.a.defer(),s=e;e=e||this.problemData.drawing_file[0],i=i||{room_id:this.problemData.room_id,building_id:this.problemData.building_id,unit_id:this.problemData.unit,floor:this.problemData.floor};var o=90===this.problemData.process_mode?this.problemData.building_id===i.building_id&&this.problemData.unit===i.unit_id:this.problemData.room_id===i.room_id&&this.problemData.floor===i.floor;return _.a.openPopup({mode:"multiple-remark",url:e.url,points:o?this.problemData.place_point:[],onmark:function(e){t.isArray(e)?a.problemData.place_point=e:a.problemData.place_point=[e],s||a.saveProblem(),n.resolve()}}),n.promise},getDiagram:function(t){return 90===t.process_mode?j.a.getSelfPlaceDrawingFile(t.unit_id||t.building_id):t.room_id?w.default.getRoomTypeDiagram(t.room_id):t.unit_id&&t.floor?C.a.getDiagram(t.building_id,t.unit_id,t.floor,1):t.floor?C.a.getDiagram(t.building_id,"",t.floor,2):u.a.when()},loadCheckitemDefaultSetting:function(){var e=this;return u.a.when().then((function(){if(!t.isEmpty(e.problemData.checkItem)&&e.problemData.checkItem.id)return j.a.getBidSectionCheckItemInfo(e.problemData.proj_id,e.problemData.bidsection_id,e.problemData.checkItem.id,"质量检查").then((function(i){if(i.repair.length>0&&(e.problemData.repair_set=i.repair[0]),i.reinspect.length&&(e.problemData.reinspect_set=i.reinspect),e.problemData.defaultCcList=i.cc,e.problemData.contractor={id:i.contractor_id,name:i.contractor_name}||{},t.isEmpty(e.problemData.reinspect_set))return I.default.getAllProjectUsers(e.problemData.proj_id).then((function(i){var a=x.a.getUser();t.some(i,(function(t){return t.user_id===a.user_id}))&&(e.problemData.reinspect_set=[{id:a.user_id,name:a.user_name}])}))}))})).then((function(){if(e.problemData.building_id&&!t.isEmpty(e.problemData.checkItem)&&e.problemData.checkItem.id)return j.a.getBuildingCheckItemInfo(e.problemData.proj_id,e.problemData.building_id,e.problemData.unit,"质量检查",e.problemData.checkItem.id).then((function(i){if(i)return i.repair.length>0&&(e.problemData.repair_set=i.repair[0]),i.reinspect.length&&(e.problemData.reinspect_set=i.reinspect),t.isEmpty(i.cc)||(e.problemData.defaultCcList=i.cc),i.contractor_id&&i.contractor_name&&(e.problemData.contractor={id:i.contractor_id,name:i.contractor_name}),t.isEmpty(e.problemData.reinspect_set)?I.default.getAllProjectUsers(e.problemData.proj_id).then((function(i){var a=x.a.getUser();t.some(i,(function(t){return t.user_id===a.user_id}))&&(e.problemData.reinspect_set=[{id:a.user_id,name:a.user_name}])})):void 0}))})).then((function(){return e.loadContractor(!0)})).catch((function(t){m.a.alert(t)}))},loadContractor:function(e){var i=this,a=this.problemData.repair_set&&this.problemData.repair_set.id||"";return D.a.getContractorListByUser(a,this.problemData.bidsection_id).then((function(a){i.contractorOptions=a.list,!t.isEmpty(a.list)&&e&&a.isGroupList&&(i.problemData.contractor=a.list[0])}))},onCheckitemSelect:function(e,i){var a=this;return"desc"===e.type?(this.problemData.checkItem=i,this.problemData.description=e,this.descriptionOptions=i.children):(this.problemData.checkItem=e,this.problemData.description={},this.descriptionOptions=[]),b.a.getBatchCCs(this.problemData.batch_id).then((function(e){var i;i=t.isEmpty(e)?[]:t.map(e,(function(t){return{id:t.user_id,name:t.user_name,mobile:t.user_mobile}})),a.problemData.cc_set=i})).then((function(){return a.loadCheckitemDefaultSetting()})).finally((function(){a.saveProblem()}))},isCheckItemSelected:function(){if(!this.problemData.checkItem||!this.problemData.checkItem.id)return m.a.alert("请先选择检查项"),!1},getPlaceOptions:function(){return b.a.getBuildingAndRooms(this.problemData.bidsection_id,this.problemData.proj_id)},selectDesc:function(t){this.problemData.description=t},setLevel:function(t){this.problemData.level=t,this.saveProblem()},selectRepair:function(t){var e=this;return this.loadContractor(!0).then((function(){return e.saveProblem()}))},openSelectContractor:function(){!1!==this.isCheckItemSelected()&&(this.showContractorDialog=!0)},selectContractor:function(){this.showContractorDialog=!1,this.saveProblem()},selectReinspect:function(){this.saveProblem()},selectCc:function(){this.saveProblem()},delProblem:function(){var t=this;this.allowSubmit&&m.a.popBox({title:"确定删除吗？",cancelText:"取消",okText:"删除"}).then((function(e){if(e)return v.a.delete(t.problemData.id).then((function(){t.$router.go(-1)})).catch((function(t){m.a.alert(t)}))}))},saveProblem:function(){var e=this;return this.isSaving?u.a.when():(this.isSaving=!0,v.a.save(t.clone(this.problemData)).then((function(t){e.problemData.id=t,e.isSaving=!1})).catch((function(t){$log.error(t),e.isSaving=!1})))},saveProblemAndBack:function(){var t=this;return this.saveProblem().then((function(){m.a.alert("保存成功"),setTimeout((function(){t.$router.go(-1)}),500)}))},submit:function(){var e=this;if(this.formCheck=!0,!this.$store.state.global.isPhotoRequired.QUALITY_CHECK_REGISTERED||!t.isEmpty(this.problemData.image_file))return(t.isEmpty(this.problemData.place)||t.isEmpty(this.problemData.place.full_name))&&this.placeIsRequired?(m.a.alert("请选择部位"),!1):this.problemData.checkItem.full_name?this.problemData.repair_set&&this.problemData.repair_set.id?t.isEmpty(this.problemData.reinspect_set)?(m.a.alert("请选择复验人"),!1):!t.isEmpty(this.problemData.drawing_file)&&t.isEmpty(this.problemData.place_point)?(m.a.notify("尚未标记户型图","去标记").then((function(){return e.showHuxingMark(null,{room_id:e.problemData.room_id,building_id:e.problemData.building_id,unit_id:e.problemData.unit,floor:e.problemData.floor,full_name:e.problemData.place.full_name})})),!1):(this.formCheck=!1,m.a.loading("正在提交..."),$log.log("提交问题"),v.a.submit(t.clone(this.problemData),"check-quality").then((function(){m.a.hideLoading(),m.a.alert("提交成功"),f.a.saveString("check-quality-index-tab-index","1"),e.$router.go(-1)})).then((function(){return P.a.addLog({relation_id:e.problemData.id,business_type:"check-quality",event:"登记问题",diff:{remark:e.problemData.remark,desc:t.isEmpty(e.problemData.description)?"":e.problemData.description.name},images:e.problemData.image_file})})).catch((function(t){$log.log(t),m.a.alert(t)})).finally((function(){m.a.hideLoading()}))):(m.a.alert("请选择整改人"),!1):(m.a.alert("请选择检查项"),!1);m.a.alert("请拍摄问题照片")}}}}).call(this,i("391c"))},"84e5":function(t,e,i){"use strict";i("b155")},"8c3d":function(t,e,i){"use strict";(function(t){i("ed63"),i("163d"),i("2b45"),i("e204"),i("cc57");var a,n,s=i("07d2"),o=i("cf09"),r=i("6f9e"),c=i("4360"),l=[],d=[0,1,2,3,4,5,6,7,8,9,".","-"];function p(t){return null!=t&&""!==t}e.a={name:"NumberKeyboard",components:{Item:s.default},data:function(){return{show:!1,isClosing:!1,zIndex:0,willOpenParams:null,inputComponent:"",type:"",hasPrev:!1,hasNext:!1,isDisabledMinus:!1,isDisabledPoint:!1}},computed:{isIOSBezelLess:function(){return c.a.state.app.isIOSBezelLess}},watch:{isClosing:function(t){var e=this;this.$nextTick((function(){!t&&e.willOpenParams&&e.openKeyboard(e.willOpenParams)}))}},created:function(){r.a.$on("routerBeforeEach",this.closeKeyboard),r.a.$on("pageContentClick",this.closeKeyboard)},destroyed:function(){r.a.$off("routerBeforeEach",this.closeKeyboard),r.a.$off("pageContentClick",this.closeKeyboard)},methods:{openKeyboard:function(t){this.isClosing?this.willOpenParams=t:(this.willOpenParams=null,this.show=!0,this.inputComponent=t.inputComponent,this.zIndex=o.a?++o.a.zIndex:1,c.a.commit("global/SET_IS_NUMBER_INPUT_OPEN",!0),c.a.commit("global/SET_NUMBER_KEYBOARD_HEIGHT",c.a.state.app.isIOSBezelLess?266:"true-or-false"===this.inputComponent.type?176:232),this.calcTab(),this.type=this.inputComponent.type,this.setKeysStatus(this.inputComponent.value,this.inputComponent.type),r.a.$emit("numberKeyboardOpen",this.inputComponent))},closeKeyboard:function(){this.show=!1,r.a.$emit("numberKeyboardClose")},startClose:function(){this.isClosing=!0},onClose:function(){this.isClosing=!1,c.a.commit("global/SET_IS_NUMBER_INPUT_OPEN",!1),r.a.$emit("afterNumberKeyboardClose")},input:function(t){"-"===t&&this.isDisabledMinus||"."===t&&this.isDisabledPoint||this.$emit("keyboardInput",t)},delete:function(t){var e=this;this.$emit("keyboardDelete"),a=setTimeout((function(){e.$emit("keyboardClear")}),500)},calcTab:function(){var e=function t(e){return e&&e.$parent?"Scroller"===e.$parent.$options.name?e.$parent:t(e.$parent):null}(this.inputComponent),i=e&&e.$el.querySelectorAll(".component-number-input");if(l=[],i&&t.each(i,(function(t){l.push(t.__vue__)})),t.isEmpty(l))this.hasPrev=!1,this.hasNext=!1;else{var a=t.findIndex(l,this.inputComponent);this.hasPrev=a>0,this.hasNext=a<l.length-1}this.inputComponent&&this.inputComponent.nextEvent&&(this.hasNext=!0)},prev:function(){var e=t.findIndex(l,this.inputComponent),i=l[e-1];i&&(r.a.$emit("numberInputBlur"),i.setFocus(),this.openKeyboard({inputComponent:i}))},next:function(){var e=t.findIndex(l,this.inputComponent),i=l[e+1];i?(r.a.$emit("numberInputBlur"),i.setFocus(),this.openKeyboard({inputComponent:i})):this.inputComponent&&this.inputComponent.nextEvent&&this.inputComponent.nextEvent()},setTure:function(){this.$emit("keyboardAssign",1)},setFalse:function(){this.$emit("keyboardAssign",0)},setKeysStatus:function(t,e){t=p(t)?t.toString():"",p(t)||e.indexOf("positive")>=0?this.isDisabledMinus=!0:this.isDisabledMinus=!1,!/\d/.test(t)||t.indexOf(".")>=0||e.indexOf("int")>=0?this.isDisabledPoint=!0:this.isDisabledPoint=!1},setKeyActiving:function(t,e){t&&t.classList.contains("keys")&&!t.classList.contains("disabled")&&(e?t.classList.add("activing"):t.classList.remove("activing"))},keyTouchstart:function(t){var e=t&&t.target;if(e){+new Date,n=e,this.setKeyActiving(e,!0);var i=e.getAttribute("direct");"closeKeyboard"!==i&&this.clickHandler(i)}},keyTouchend:function(t){var e=t&&t.target;if(e){this.setKeyActiving(e,!1),this.setKeyActiving(n,!1);var i=e.getAttribute("direct");"delete"===i?clearTimeout(a):"closeKeyboard"===i&&this.clickHandler(i)}},clickHandler:function(t){t&&(isNaN(t)||(t=Number(t)),"function"==typeof this[t]?this[t]():d.includes(t)&&this.input(t))}}}}).call(this,i("391c"))},9120:function(t,e,i){var a=i("2ddb");"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);(0,i("85cb").default)("cb55f532",a,!0,{sourceMap:!1,shadowMode:!1})},"91c1":function(t,e,i){"use strict";(function(t){i("5ab2"),i("6d57"),i("e10e"),i("9a33");var a=i("28f8"),n=i("e68e"),s=i("6f9e"),o=i("bcc7"),r=i("e89f");function c(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,a)}return i}function l(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?c(Object(i),!0).forEach((function(e){Object(a.a)(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):c(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}e.a={name:"CheckGuideDetailDrop",components:{ItemImgList:n.a},mixins:[r.a],data:function(){return{show:!1,showList:!1,isLoading:!1,isOpening:!1,isClosing:!1,contentTop:64,listHeight:510,module:"",itemIds:[],data:[],target:""}},watch:{show:function(t){var e=this;t&&this.$nextTick((function(){e.showList=!0}))}},created:function(){s.a.$on("routerBeforeEach",this.closePopup),s.a.$on("pageContentClick",this.onClickOther)},destroyed:function(){s.a.$off("routerBeforeEach",this.closePopup),s.a.$off("pageContentClick",this.onClickOther)},methods:{openPopup:function(e){this.show=!0,this.$emit("open"),this.module=e.module,this.itemIds=e.itemIds,this.options=e.options;var i=document.querySelector(".layout-main .layout-header");if(this.contentTop=i.offsetHeight,e.el){var a=e.el.getBoundingClientRect();this.contentTop=a.bottom}this.target=e.el,this.listHeight=t.minBy([window.innerHeight-this.contentTop-50,510]),this.getData()},closePopup:function(){var t=this;if(!this.isOpening)return this.showList=!1,this.$emit("close"),new Promise((function(e){t.$on("afterClosePopup",e)}))},afterClose:function(){this.show=!1,this.isClosing=!1,this.$emit("afterClosePopup")},onClickOther:function(t){t&&t.target&&t.target!==this.target&&this.show&&this.closePopup()},getData:function(){var e=this;return this.options&&this.options.length?(this.data=t.map(this.options,(function(t){return l(l({},t),{},{isOpen:!1})})),Promise.resolve()):o.a.getMeasureCheckItem(this.itemIds).then((function(i){e.data=t.map(i,(function(e){var i=e.content?e.content.trim():"",a=i?i.split("\n"):[],n=e.content_image?JSON.parse(e.content_image):[],s=t.filter(a,(function(t){return!/<img([\s\S]*)>/gm.test(t)}));return t.each(n,(function(t){t.url=t.url.split("@")[0]})),{id:e.id,name:e.full_name,textArr:s,contentImage:n,isOpen:!1}}))})).catch((function(t){console.error(t)}))},toggleItem:function(t){this.data.length>1&&this.$set(t,"isOpen",!t.isOpen)}}}}).call(this,i("391c"))},"91cb":function(t,e,i){"use strict";i("c82d")},9446:function(t,e,i){var a=i("2dd6");"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);(0,i("85cb").default)("2192cd00",a,!0,{sourceMap:!1,shadowMode:!1})},9788:function(t,e,i){"use strict";i("9446")},"992a":function(t,e,i){"use strict";(function(t){var a=i("07d2"),n=i("2464");e.a={name:"MultiSearchSelect",components:{Item:a.default},props:{title:{type:String,default:""},mode:{type:String,default:"edit"},projectId:{type:String,default:""},selectClass:{type:[String,Object],default:""},searchBar:{type:Boolean,default:!0},hasBatch:{type:Boolean,default:!0},options:{type:Array,default:function(){return[]}},selected:{type:Object,default:function(){return{}}},selectedText:{type:String},getOptionsPromise:{type:Function,default:function(){}},beforeConfirm:{type:Function,default:function(){}},floorIsId:{type:Boolean,default:!0},placeholder:{type:String,default:"请选择"},formCheck:{type:Boolean,default:!1}},data:function(){return{}},computed:{hasSelected:function(){return!t.isEmpty(this.selected)}},methods:{open:function(){var t=this;n.a.openPopup({title:"选择"+this.title,getOptionsPromise:this.getOptionsPromise,selected:this.selected,options:this.options,projectId:this.projectId,searchBar:this.searchBar,hasBatch:this.hasBatch,beforeConfirm:this.beforeConfirm,floorIsId:this.floorIsId,callback:function(e){t.$emit("onSelect",e)}})},close:function(){n.a.closePopup()}}}}).call(this,i("391c"))},"9b25":function(t,e,i){"use strict";i("b09a")},"9b8b":function(t,e,i){(t.exports=i("690e")(!1)).push([t.i,"[data-v-153f7b00] .layout-content{display:flex;flex-direction:column;overflow:hidden;background:#fff}.zjapp .page-scroll[data-v-153f7b00]{flex:1;overflow:auto;padding-bottom:100px}.zjapp .bread-crumb[data-v-153f7b00]{line-height:30px;color:#999}.zjapp .bread-crumb .level-item i[data-v-153f7b00]{font-size:12px;margin:0 10px}.zjapp .bread-crumb .level-item:last-child>i[data-v-153f7b00]{display:none}.zjapp .bread-crumb .active[data-v-153f7b00]{color:#4275e8}.zjapp .checked[data-v-153f7b00]{color:#4275e8;line-height:30px}.zjapp .empty-msg[data-v-153f7b00]{display:flex;align-items:center;justify-content:center;color:#c8c8c8;margin-top:30px}.zjapp .empty-msg .line[data-v-153f7b00]{width:48px;margin:0 8px;border-top:1px solid #e4e4e4}.zjapp .search-item[data-v-153f7b00]{color:#333;padding:7px 0}[data-v-153f7b00] .icon-qualified{color:#4275e8}",""])},"9d1f":function(t,e,i){"use strict";var a=i("6412").a,n=(i("c854"),i("17cc")),s=Object(n.a)(a,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.isSetUsualItems?i("div",{staticClass:"set-items-buttons",on:{click:function(e){t.openPopup()}}},[i("icon",{staticClass:"icon icon-set-view"})],1):t._e()}),[],!1,null,"afc9fec8",null);e.a=s.exports},"9dea":function(t,e,i){"use strict";i("fda1")},a065:function(t,e,i){"use strict";(function(t){i("cc57"),i("9dd9");var a=i("f369"),n=i("e89f"),s=i("bcc7"),o=i("a57f"),r=i("07d2"),c=i("774b"),l=i("9eea"),d=i("9d1f"),p=i("7bac"),h=i("a7c3"),u=i("6144"),m=i("4360");e.a={name:"CheckitemSelectDialog",components:{CheckGuide:a.a,Tree:o.a,Item:r.default,Scroller:c.default,appSearchBar:l.default,SetUsualItems:d.a},mixins:[n.a],store:m.a,props:{},data:function(){return{timer:null,show:!1,isLoading:!0,isSearching:!1,treeListOri:[],treeList:[],searchKeyword:"",inputFocus:!1,historyLocalstorageKey:"checkitem-select-search-history",searchHistory:[],typeSet:{check:31,"check-safety":36,"check-quality":37,"measure-v3":41,process:32,"fly-inspect":101},guideModule:"check",module:null,sectionId:"",setUsualTreeList:[]}},computed:{checkGuideModule:function(){return this.module&&["check","check-safety","check-quality"].indexOf(this.module)>0?this.module:"check"},moduleAttribute:function(){return this.$store.state.global.moduleAttribute}},watch:{searchKeyword:function(t){var e=this;this.$nextTick((function(){e.treeList=t?e.fitlerByKeyword(e.deepClone(e.treeListOri),t):e.deepClone(e.treeListOri)}))}},mounted:function(){this.searchHistory=u.a.getObject(this.historyLocalstorageKey)||[]},methods:{openPopup:function(t){var e=this;this.value=!0,this.show=!0,this.module=t.module,this.guideModule=this.checkGuideModule,this.sectionId=t.sectionId,this.hasDesc=t.hasDesc,this.selected=t.selected,this.selectedDesc=t.selectedDesc,this.checkitemType=this.getCheckitemTypeByModule(t.module),this.getTreeList().then((function(){e.timer=window.setTimeout((function(){var t=document.querySelector(".color-theme.icon.icon-qualified");t&&t.scrollIntoViewIfNeeded()}),400)})),this.$emit("open")},closePopup:function(){this.value=!1,this.show=!1,this.setSearchMode(!1),this.$refs["app-search-bar-checkitem-select"]&&this.$refs["app-search-bar-checkitem-select"].cancelSearch(),window.clearTimeout(this.timer),this.$emit("close")},getCheckitemTypeByModule:function(t){return this.typeSet[t]?this.typeSet[t]:($log.error("module 参数错误"),"")},getTreeList:function(){var t=this;return this.isLoading=!0,console.time("all_time"),s.a.getTypeCheckItem(this.sectionId,this.checkitemType,this.hasDesc).then((function(e){return p.a.getUserKey(t.mmkvCode()).then((function(i){i=null===i?e:t.mergeArray(t.deepClone(e),i),t.treeList=i,s.a.setOpen(i,t.selected),console.timeEnd("all_time"),t.isLoading=!1,t.treeListOri=t.deepClone(i),t.setUsualTreeList=t.deepClone(e)}))}))},mmkvCode:function(){var t=this.moduleAttribute[this.module]||{};return h.a[t.mmkv_item]+"_"+this.sectionId},mergeArray:function(e,i){var a=this;return t.filter(e,(function(e){var n=i[e.id];return t.isEmpty(e.children)||(e.children=a.mergeArray(e.children,i)),!t.isEmpty(n)||"desc"===e.type}))},fitlerByKeyword:function(e,i){var a=this,n=[];return t.each(e,(function(e){if(new RegExp(i,"gm").test(e.name))e.isOpen=!0,n.push(e);else if(!t.isEmpty(e.children)){var s=a.fitlerByKeyword(e.children,i);t.isEmpty(s)||(e.isOpen=!0,e.children=s,n.push(e))}})),n},onSelect:function(e){if(this.$refs["app-search-bar-checkitem-select"]&&this.$refs["app-search-bar-checkitem-select"].saveHistory(),"desc"===e.type){var i=s.a.getCheckitemFromTree(t.clone(this.treeListOri),101===this.checkitemType?e.item_id:e.class_id);this.$emit("onSelect",e,i)}else this.$emit("onSelect",e);this.closePopup()},setSearchMode:function(t){this.isSearching=t},searchClear:function(){this.searchKeyword="",this.treeList=this.deepClone(this.treeListOri)},selectHistory:function(t){this.searchKeyword=t.val,this.$refs["app-search-bar-checkitem-select"].setValue(t.val)},hasHistory:function(e){return t.some(this.searchHistory,(function(t){return t.val===e}))},saveHistory:function(){this.searchKeyword&&!this.hasHistory(this.searchKeyword)&&(this.searchHistory.unshift({val:this.searchKeyword}),u.a.saveObject(this.historyLocalstorageKey,this.searchHistory))},deleteHistory:function(t){var e=this.searchHistory.indexOf(t);this.searchHistory.splice(e,1),u.a.saveObject(this.historyLocalstorageKey,this.searchHistory)},deleteHistoryAll:function(){this.searchHistory=[],u.a.saveObject(this.historyLocalstorageKey,[])},deepClone:function(t){return JSON.parse(JSON.stringify(t))}}}}).call(this,i("391c"))},a093:function(t,e,i){"use strict";(function(t){i("5ab2"),i("6d57"),i("e10e"),i("f548");var a=i("28f8"),n=(i("9dd9"),i("cc57"),i("e204"),i("9eea")),s=i("3156b"),o=i("774b"),r=i("e89f"),c=i("6f9e");function l(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,a)}return i}function d(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?l(Object(i),!0).forEach((function(e){Object(a.a)(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):l(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}e.a={name:"AppSingleSelect",components:{appSearchBar:n.default,item:s.a,Scroller:o.default},mixins:[r.a],props:{},data:function(){return{activeTab:[],storageKey:encodeURI(this.title||"singleSelectMark"),storageVal:[],keyword:"",searchStatus:!1,checkedItem:{},show:!1,searchData:[],options:[],optionsLimit:20,pagingOptions:!1,searchBar:!0,category:[],ifToggle:!1,editorAddData:!1,lineLimit:1}},computed:{optionsShow:function(){return this.options&&this.options.length?this.grouping?this.getGroupData():this.options.slice(0,this.optionsLimit):[]}},watch:{keyword:function(t){var e=this;this.$nextTick((function(){e.filterList(t)}))}},methods:{openPopup:function(e){if(console.log(e),this.value=!0,this.show=!0,this.category=[],c.a.$on("closeDialog",this.closePopup),this.title=e.title,this.selected=e.selected,this.checkedItem=e.selected,this.options=e.options,this.onSelect=e.onSelect,this.searchBar=e.searchBar,this.grouping=e.grouping,this.rightBtn=e.rightBtn,this.rightBtnEvent=e.rightBtnEvent,this.ifToggle=e.ifToggle,this.lineLimit=e.lineLimit,this.editorAddData=e.editorAddData,e.grouping&&e.autoOpen){var i=t.uniqBy(t.map(this.options,e.grouping));this.activeTab=t.map(i,(function(t,e){return e}))}this.storageKey=encodeURI(this.title||"singleSelectMark"),this.$emit("open")},closePopup:function(){this.value=!1,this.show=!1,this.$emit("close")},closeEvent:function(){c.a.$off("closeDialog",this.closePopup),this.value=!1,this.show=!1,this.keyword="",this.searchStatus=!1,this.$refs["app-search-bar"]&&this.$refs["app-search-bar"].cancelSearch()},customAddSupplier:function(t){return this.options.findIndex((function(e){return e.name===t}))},selectItem:function(t){var e=this;this.ifToggle&&this.checkedItem.id===t.id?this.checkedItem={}:this.checkedItem=t,this.onSelect(this.checkedItem),this.$refs["app-search-bar"]&&this.$refs["app-search-bar"].saveHistory(),window.setTimeout((function(){e.closeEvent()}),300)},onSearchTypeChange:function(t){this.searchStatus=t},filterList:function(t){var e,i,a=this,n=new RegExp("("+t+")","gmi");if(this.category=[],this.keyword=t,this.searchData=[],!t)return!1;this.options.map((function(t){return n.test(t.name)&&(i=d(d({},t),{},{rename:t.name.replace(n,"<label>$1</label>")}),a.grouping?-1===(e=a.category.indexOf(i[a.grouping]))?(a.category.push(i[a.grouping]),a.searchData.push({name:i[a.grouping],children:[i]})):a.searchData[e].children.push(i):a.searchData.push(i)),t}))},pageOptions:function(){this.optionsLimit=this.optionsLimit+20,this.pagingOptions=!1},getGroupData:function(){var t,e=this,i=[];return this.category=[],this.options.map((function(a){return-1===(t=e.category.indexOf(a[e.grouping]))?(e.category.push(a[e.grouping]),i.push({name:a[e.grouping],children:[a]})):i[t].children.push(a),a})),i}}}}).call(this,i("391c"))},a300:function(t,e,i){"use strict";(function(t){i("5ab2"),i("6d57"),i("e10e");var a=i("28f8"),n=i("e89f"),s=i("e2a7"),o=i("4360"),r=i("e223");function c(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,a)}return i}e.a={name:"DrawingDialog",store:o.a,components:{Drawing:r.a},mixins:[n.a],data:function(){return{show:!1,mode:"",url:"",points:[],folder:"",maxMarks:1/0,onmark:function(){}}},methods:{openPopup:function(t){return this.mode=t.mode,this.url=t.url,this.points=t.points,this.folder=t.folder,this.maxMarks=isNaN(t.maxMarks)?1/0:t.maxMarks,this.onmark=t.onmark,this.show=!0,this.$emit("open"),this},closePopup:function(){this.show=!1,this.$emit("close")},undo:function(){this.points.pop()},sure:function(){this.points.length?(this.closePopup(),this.onmark&&this.onmark(this.points)):s.a.alert("请先在户型图标记位置")},pointLight:function(e){this.points=t.map(this.points,(function(t,i){var n=function(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?c(Object(i),!0).forEach((function(e){Object(a.a)(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):c(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}({},t);return e===i?n.color="#4275e8":n.found?n.color="#14ff56":n.color="#ff4546",n}))},onclick:function(t){var e=this;if("view"===this.mode){if(t.clickPoint&&"points"===t.clickPoint.tag){var i=t.clickPoint.index;this.pointLight(i)}}else if("mark-val-group"===this.mode){if(this.points.length>=maxMarks)return void s.a.alert("爆点个数不能大于实测点数");this.points.push({x:t.x,y:t.y})}else if("multiple-remark"===this.mode)this.points.push({x:t.x,y:t.y});else{var a={x:t.x,y:t.y};this.points=[a],setTimeout((function(){e.closePopup(),e.onmark&&e.onmark(a)}),200)}}}}}).call(this,i("391c"))},a57f:function(t,e,i){"use strict";var a=i("c2e0").a,n=(i("4a69"),i("17cc")),s=Object(n.a)(a,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",t._l(t.list,(function(e,a){return i("div",{key:a,staticClass:"list-tree"},[i("item",{class:{"checkBox-right-padding":t.isCheckbox},attrs:{border:"bottom"},on:{click:function(i){t.itemClick(e)}}},[t._l(t.blanks,(function(t,e){return i("div",{key:e,staticClass:"tree-blank"})})),i("div",{class:{"tree-icon":!0,"icon-dropdown":e.children&&e.children.length&&t.openSet[e.id],"icon-dropright":e.children&&e.children.length&&!t.openSet[e.id]}}),i("div",{class:{"item-text":!0,"fw-b":0===t.level},domProps:{innerHTML:t._s(t.keywordFilter(e.name))}}),e.children&&e.children.length||!t.isSelected(e)?t._e():i("icon",{staticClass:"color-theme",attrs:{name:"qualified"}})],2),t.isCheckbox?i("div",{staticClass:"tree-checkbox"},[i("checkbox",{attrs:{status:e.status,value:e.checked,"semi-selection":!0,type:"square"},on:{change:function(i){t.checkboxChange(arguments,e)}}})],1):t._e(),e.children&&e.children.length&&t.openSet[e.id]?[i("tree",{attrs:{data:e.children,level:t.level+1,keyword:t.keyword,selected:t.selected,"is-checkbox":t.isCheckbox},on:{onSelect:t.onSelect}})]:t._e()],2)})))}),[],!1,null,"792f710a",null);e.a=s.exports},a5bf:function(t,e,i){var a=i("e304");"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);(0,i("85cb").default)("2efc26b7",a,!0,{sourceMap:!1,shadowMode:!1})},a5c6:function(t,e,i){"use strict";var a=i("329b"),n=i("a093").a,s=(i("f3d7"),i("17cc")),o=Object(s.a)(n,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("transition",{attrs:{name:"slide-right"}},[t.show?i("page-content",{attrs:{title:t.title,mode:"dialog","on-close":t.closeEvent}},[t.rightBtn&&!t.editorAddData||t.rightBtn&&t.editorAddData&&(!t.selected.name||t.customAddSupplier(t.selected.name)>-1)?i("div",{staticClass:"header-btn",attrs:{slot:"header-bar-right"},on:{click:function(e){t.rightBtnEvent(t.category)}},slot:"header-bar-right"},[t._v("\n      "+t._s(t.rightBtn)+"\n    ")]):t._e(),i("scroller",{attrs:{"has-next":!t.searchStatus&&!t.grouping&&t.optionsLimit<t.options.length,"end-text":"","is-empty":0===t.optionsShow.length},on:{loadNext:t.pageOptions}},[t.searchBar?i("app-search-bar",{ref:"app-search-bar",attrs:{placeholder:"搜索","history-key":t.storageKey},on:{changeSearchStatus:t.onSearchTypeChange},model:{value:t.keyword,callback:function(e){t.keyword=e},expression:"keyword"}}):t._e(),t.searchStatus?[t.keyword?[t.grouping?i("van-collapse",{model:{value:t.activeTab,callback:function(e){t.activeTab=e},expression:"activeTab"}},t._l(t.searchData,(function(e,a){return i("van-collapse-item",{key:a,attrs:{title:e.name,name:a}},t._l(e.children,(function(e,a){return i("item",{key:a,attrs:{checked:t.checkedItem.id===e.id,item:e,"line-limit":t.lineLimit,"render-field":"rename"},on:{click:t.selectItem}})})))}))):t._e(),t.grouping&&!t.searchData.length?i("loading-status",{attrs:{"is-empty":!0,"empty-text":"没有内容","show-style":"search"}}):t._e(),t.grouping?t._e():[t._l(t.searchData,(function(e,a){return i("item",{key:a,attrs:{checked:t.checkedItem.id===e.id,item:e,"line-limit":t.lineLimit,"render-field":"rename"},on:{click:t.selectItem}})})),t.searchData.length?t._e():i("loading-status",{attrs:{"is-empty":!0,"empty-text":"没有内容","show-style":"search"}})]]:t._e()]:["-1"===t.selected.id&&t.customAddSupplier(t.selected.name)<0&&t.editorAddData?i("div",{staticClass:"supplier-editor",on:{click:t.closePopup}},[i("span",{staticClass:"title"},[t._v(t._s(t.selected.name))]),i("span",{staticClass:"icon"},[i("i",{staticClass:"iconfont icon-edit margin-r",on:{click:t.rightBtnEvent}}),i("i",{staticClass:"iconfont icon-qualified"})])]):t._e(),t.grouping?i("van-collapse",{model:{value:t.activeTab,callback:function(e){t.activeTab=e},expression:"activeTab"}},t._l(t.optionsShow,(function(e,a){return i("van-collapse-item",{key:a,attrs:{title:e.name,name:a}},t._l(e.children,(function(e,a){return i("item",{key:a,attrs:{checked:t.checkedItem.id===e.id,item:e,"line-limit":t.lineLimit},on:{click:t.selectItem}})})))}))):t._l(t.optionsShow,(function(e,a){return i("item",{key:a,attrs:{checked:t.checkedItem.id===e.id,item:e,"line-limit":t.lineLimit},on:{click:t.selectItem}})})),t.optionsShow.length?t._e():i("loading-status",{attrs:{"is-empty":!0,"empty-text":"暂无数据","show-style":"search"}})]],2)],1):t._e()],1)}),[],!1,null,"e465319c",null).exports,r=!1;r||(r=new(a.default.extend(o))({el:document.createElement("div")}),document.body.appendChild(r.$el));e.a=r},a7e4:function(t,e,i){(t.exports=i("690e")(!1)).push([t.i,".zjapp .page-scroll[data-v-bd2a9824]{flex:1;overflow:auto;padding-bottom:100px;transform:translateZ(0)}",""])},b09a:function(t,e,i){var a=i("2939");"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);(0,i("85cb").default)("65170d73",a,!0,{sourceMap:!1,shadowMode:!1})},b155:function(t,e,i){var a=i("2bac");"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);(0,i("85cb").default)("6af9ceb8",a,!0,{sourceMap:!1,shadowMode:!1})},b55a:function(t,e,i){"use strict";i("c001")},b5c6:function(t,e,i){"use strict";(function(t){i("5ab2"),i("6d57"),i("e10e"),i("cc57");var a=i("28f8"),n=i("e89f"),s=i("a57f"),o=i("07d2");function r(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,a)}return i}function c(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?r(Object(i),!0).forEach((function(e){Object(a.a)(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):r(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}e.a={name:"SetUsualItemsDialog",components:{Tree:s.a,Item:o.default},mixins:[n.a],data:function(){return{show:!1,checkItems:[],isLoading:!1,mmkvItemTips:!0}},methods:{openPopup:function(t){this.checkItems=this.deepClone(t.checkItems),this.mmkvItemTips=t.mmkvItemTips,this.tipsCallback=t.tipsCallback,this.saveCallback=t.saveCallback,this.show=!0,this.value=!0,this.$emit("open")},closePopup:function(){this.show=!1,this.value=!1,this.$emit("close")},closeTip:function(){this.mmkvItemTips=!1,this.tipsCallback(!1)},onSelect:function(t,e){var i=this.deepClone(this.checkItems);i=this.dataMap(i,c(c({},e),{},{items:t}),0),this.checkItems=i},dataMap:function(e,i,a){var n=this;return e.map((function(e){if(e.id===i.items[a].id)if(e.checked=i.checked,e.children&&e.children.length&&a<i.items.length-1?e.children=n.dataMap(e.children,i,a+1):e.children=n.checkChildItems(e.children,i.checked),i.items[i.items.length-1].id===e.id)e.status=i.status,e.checked=i.checked;else{var s=n.currentStatus(e.children,i);e.status=s,e.checked=!t.isEmpty(s)}return e}))},checkChildItems:function(){var e=this,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],a=arguments.length>1?arguments[1]:void 0;return t.map(i,(function(t){return t.status=a?"fullSelected":null,t.checked=a,t.children&&t.children.length&&(t.children=e.checkChildItems(t.children,a)),t}))},currentStatus:function(e,i){return t.isEmpty(e)?i.status:t.filter(e,(function(e){return t.isEmpty(e.status)})).length===e.length?null:t.filter(e,(function(t){return"fullSelected"===t.status})).length===e.length?"fullSelected":"partSelected"},filterUsualItems:function(e,i){var a=this;return t.each(e,(function(e){t.isEmpty(i[e])&&e.checked&&(i[e.id]={id:e.id,status:e.status,checked:e.checked,isOpen:e.isOpen,parent_id:e.parent_id,name:e.name}),!t.isEmpty(e.children)&&e.checked&&Object.assign(i,a.filterUsualItems(e.children,i))})),i},save:function(){var t=this,e=this.filterUsualItems(this.checkItems,{});this.saveCallback(e).then((function(){t.closePopup()}))},deepClone:function(t){return JSON.parse(JSON.stringify(t))}}}}).call(this,i("391c"))},b6da:function(t,e,i){"use strict";var a=i("329b"),n=i("a300").a,s=i("17cc"),o=Object(s.a)(n,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("transition",{attrs:{name:"slide-right"}},[t.show?i("page-content",{attrs:{mode:"dialog",title:"户型图","on-close":t.closePopup}},[i("drawing",{staticStyle:{flex:"1"},attrs:{url:t.url,points:t.points,folder:t.folder},on:{onclick:t.onclick}}),"multiple-remark"===t.mode?i("app-button-group",{attrs:{"fixed-bottom":"",seamless:""}},[i("app-button",{staticStyle:{width:"50%"},attrs:{type:t.points.length?"warning":"normal",plain:""},on:{click:t.undo}},[t._v("\n        撤销\n      ")]),i("app-button",{on:{click:t.sure}},[t._v(" 确定 ")])],1):t._e()],1):t._e()],1)}),[],!1,null,null,null).exports,r=!1;r||(r=new(a.default.extend(o))({el:document.createElement("div")}),document.body.appendChild(r.$el));e.a=r},bebe:function(t,e,i){var a=i("6272");"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);(0,i("85cb").default)("53478790",a,!0,{sourceMap:!1,shadowMode:!1})},c001:function(t,e,i){var a=i("f53a");"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);(0,i("85cb").default)("bd5eb062",a,!0,{sourceMap:!1,shadowMode:!1})},c070:function(t,e,i){var a=i("574c");"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);(0,i("85cb").default)("35590dcb",a,!0,{sourceMap:!1,shadowMode:!1})},c2e0:function(t,e,i){"use strict";(function(t){i("9dd9"),i("f548");var a=i("4c09"),n=(i("e697"),i("6d57"),i("163d"),i("07d2")),s=i("242a");e.a={name:"Tree",components:{Item:n.default,Checkbox:s.a},props:{data:{type:Array,default:function(){return[]}},keyword:{type:String,default:""},level:{type:Number,default:0},selected:{type:Array,default:function(){return[]}},isCheckbox:{type:Boolean,default:!1}},data:function(){return{blanks:new Array(this.level),openSet:{}}},computed:{list:function(){return t.clone(this.data)}},watch:{data:{handler:function(t){var e=this;this.openSet={},(t||[]).forEach((function(t){e.$set(e.openSet,t.id,!!t.isOpen)}))},immediate:!0}},methods:{itemClick:function(t){t.children&&t.children.length?(t.isOpen=!t.isOpen,this.openSet[t.id]=!this.openSet[t.id]):this.isCheckbox||this.$emit("onSelect",t)},onSelect:function(e,i){if(this.isCheckbox){var n,s=e[0],o=t.find(this.list,(function(t){var e=s.parent_id||s.item_id;if(t.id===e)return t}));this.$emit("onSelect",(n=[o]).concat.apply(n,Object(a.a)(e)),i)}else this.$emit("onSelect",e)},keywordFilter:function(t){return this.keyword?t.replace(new RegExp(this.keyword,"gm"),'<span class="color-blue">'+this.keyword+"</span>"):t},isSelected:function(e){return t.isArray(this.selected)?t.some(this.selected,{id:e.id}):this.selected&&this.selected.id===e.id},checkboxChange:function(t,e){var i=t[0],a=t[1];this.$emit("onSelect",[e],{checked:i,status:a})}}}}).call(this,i("391c"))},c40a:function(t,e,i){"use strict";(function(t){i("cc57"),i("6d57"),i("6f84"),i("163d");var a=i("a32d"),n=i.n(a),s=i("e900"),o=i("3122"),r=i("4ad6"),c=i("3bd5"),l=i("1b7e");function d(t){var e=t.changedTouches.length,i=t.touches.length;return 1===e||2===e||2===i}function p(t){return 1===t.touches.length}e.a={name:"Drawing",props:{url:{type:String},points:{type:Array,default:function(){return[]}},regions:{type:Array,default:function(){return[]}},pointColor:{type:String,default:"#ff4546"},pointRadius:{type:Number,default:7},scaleMax:{type:Number,default:4},clickDelay:{type:Number,default:500},folder:{type:String,default:"house-image"},onlineMode:{type:Boolean,default:!1},contentScroll:{type:Boolean,default:!0}},data:function(){return{isDownloading:!1,error:"",canvas:null,ctx:null,img:null,src:"",width:0,height:0,x:0,y:0,scale:1,defaultScale:1,pixelRatio:1,markPosition:null,markPositionImageData:[],markCoordinates:[],pinchRatio:0,scaleBetween:[],isPinch:!1,clickPoints:[],touchStart:{x:0,y:0,cx:0,cy:0,time:0}}},watch:{url:function(){this.getImage()},points:function(t){this.ctx&&this.draw()},regions:function(t){this.ctx&&this.draw()}},mounted:function(){this.getImage()},destroyed:function(){this.canvas&&(this.canvas.width=0,this.canvas.height=0)},methods:{getImage:function(){var e=this;if(this.isDownloading=!0,this.url){var i=c.a.getUser().user_id,a=n.a.replaceAll(this.url,"\\?x-oss-process=image\\/resize,","@"),s=n.a.strRightBack(a,"/");if(!s)return this.error="户型图地址错误",void(this.isDownloading=!1);this.error="";var d=[r.a.appImagePath()+i+"/"+this.folder+"/"+s,r.a.appImagePath()+i+"/house-image/"+s,r.a.appImagePath()+i+"/drawing/"+s,r.a.appImagePath()+i+"/location-image/"+s,r.a.appImagePath()+i+"/images/"+s,r.a.appDataPath()+i+"/"+this.folder+"/"+s,r.a.appDataPath()+i+"/house-image/"+s,r.a.appDataPath()+i+"/drawing/"+s,r.a.appDataPath()+i+"/location-image/"+s,r.a.appDataPath()+i+"/images/"+s],p=Promise.resolve();return"dev"===APP_ENV||this.onlineMode?p=p.then((function(){return e.url})):t.each(d,(function(t){p=p.then((function(e){return e||r.a.isFileExists(t).then((function(e){if(e)return o.a._fixPath(t)}))}))})),p.then((function(t){if(!t)return l.a.getHasNetwork().then((function(t){return t?o.a.download(e.url,!0,e.folder).then((function(t){e.src=t})):Promise.reject("当前无网络")}));e.src=t})).then((function(){e.src?(e.img=new Image,e.img.onload=function(){e.img.complete?(e.isDownloading=!1,e.$nextTick(e.init)):(e.error="加载图片失败",e.isDownloading=!1)},e.img.onerror=function(){e.error="加载图片失败",e.isDownloading=!1},e.img.src=e.src):(e.error="下载户型图失败",e.isDownloading=!1)})).catch((function(i){e.error=t.isString(i)?i:"下载户型图失败",e.isDownloading=!1}))}this.error="户型图地址错误",this.isDownloading=!1},init:function(){if(this.$refs["drawing-canvas"]){var t=this.$refs.content;this.canvas=this.$refs["drawing-canvas"],this.ctx=this.canvas.getContext("2d"),this.width=t.offsetWidth,this.height=t.offsetHeight,this.pixelRatio=this.getPixelRatio(this.ctx),this.canvas.style.height=this.height+"px",this.canvas.style.width=this.width+"px",this.canvas.width=this.width*this.pixelRatio,this.canvas.height=this.height*this.pixelRatio,!this.ctx.extended&&Object(s.a)(this.ctx),this.bindTouchEvent(),this.calc(),this.draw()}},getPixelRatio:function(t){var e=t.backingStorePixelRatio||CanvasRenderingContext2D.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1;return(window.devicePixelRatio||1)/e},calc:function(t){var e=this.width/this.img.width,i=this.img.height*e,a=this.height||i;i>this.height&&(e*=a/i),this.scale=e*this.pixelRatio,this.defaultScale=this.scale,this.scaleBetween=[this.scale,this.scale*this.scaleMax]},winToCanvas:function(t,e){var i=this.canvas.getBoundingClientRect();return{x:t-i.left*(this.canvas.width/(i.width*this.pixelRatio)),y:e-i.top*(this.canvas.height/(i.height*this.pixelRatio))}},isBoundary:function(t){switch(t){case"t":if(0===this.y)return!0;break;case"r":if(this.x<=this.canvas.width-this.img.width*this.scale)return!0;break;case"b":if(this.y<=this.img.height*this.scaleBetween[0]-this.img.height*this.scale)return!0;break;case"l":if(0===this.x)return!0}return!1},bindTouchEvent:function(){this.canvas.addEventListener("touchstart",this.onTouchstart),this.canvas.addEventListener("touchmove",this.onTouchmove),this.canvas.addEventListener("touchend",this.touchMoveAndEndHandler)},unbindTouchEvent:function(){this.canvas.removeEventListener("touchstart",this.onTouchstart),this.canvas.removeEventListener("touchmove",this.onTouchmove),this.canvas.removeEventListener("touchend",this.touchMoveAndEndHandler)},onTouchstart:function(t){if(this.isPinch=!1,p(t)){var e=t.touches[0],i=this.winToCanvas(e.clientX,e.clientY);this.touchStart={x:i.x,y:i.y,cx:e.clientX,cy:e.clientY,time:Date.now()}}else if(d(t)){var a,n=t.touches[0],s=t.touches[1],o=this.winToCanvas(n.clientX,n.clientY),r=this.winToCanvas(s.clientX,s.clientY);a=Math.sqrt(Math.pow(r.x-o.x,2)+Math.pow(r.y-o.y,2)),this.pinchRatio=this.scale/a}},onTouchmove:function(t){if(!1===this.contentScroll&&(t.preventDefault(),t.stopPropagation()),p(t))this.touchStart.cy>t.pageY&&this.isBoundary("b")||this.touchStart.cy<t.pageY&&this.isBoundary("t")||this.touchStart.cx>t.pageX&&this.isBoundary("r")||this.touchStart.cx<t.pageX&&this.isBoundary("l")||t.stopPropagation(),this.touchMoveAndEndHandler(t);else if(d(t)){t.stopPropagation();var e,i,a,n,s,o=t.touches[0],r=t.touches[1],c=this.winToCanvas(o.clientX,o.clientY),l=this.winToCanvas(r.clientX,r.clientY);i=Math.sqrt(Math.pow(l.x-c.x,2)+Math.pow(l.y-c.y,2)),this.isPinch=!0,(e=this.pinchRatio*i)>this.scaleBetween[0]&&e<this.scaleBetween[1]&&(n={x:((a={x:(c.x+l.x)/2*this.pixelRatio,y:(c.y+l.y)/2*this.pixelRatio}).x-this.x)/(this.img.width*this.scale),y:(a.y-this.y)/(this.img.height*this.scale)},a.newX=this.x+this.img.width*e*n.x,a.newY=this.y+this.img.height*e*n.y,s={x:a.newX-a.x,y:a.newY-a.y},e<this.scale&&this.setRange(this.x-s.x,this.y-s.y,e),e>this.scale&&(this.x=this.x-s.x,this.y=this.y-s.y),e!==this.scale&&(this.scale=e,this.draw()))}},touchMoveAndEndHandler:function(t){var e,i,a=t.type,n={touchmove:t.touches[0],touchend:t.changedTouches[0]}[a],s=this.winToCanvas(n.clientX,n.clientY);e=(s.x-this.touchStart.x)*this.pixelRatio,i=(s.y-this.touchStart.y)*this.pixelRatio,"touchend"===a&&Date.now()-this.touchStart.time<this.clickDelay&&Math.abs(n.clientX-this.touchStart.cx)<6&&Math.abs(n.clientY-this.touchStart.cy)<6?this.clickHandler(t):"touchmove"!==a||this.isPinch||(this.touchStart.x=s.x,this.touchStart.y=s.y,this.setRange(this.x+e,this.y+i,this.scale),this.draw())},isCanClick:function(t){for(var e=!1,i=0;i<this.markPosition.length;i++)if(parseFloat(t.x)>parseFloat(this.markPosition[i].x)&&parseFloat(t.x)<parseFloat(this.markPosition[i].x)+parseFloat(this.markPosition[i].w)&&parseFloat(t.y)>parseFloat(this.markPosition[i].y)&&parseFloat(t.y)<parseFloat(this.markPosition[i].y)+parseFloat(this.markPosition[i].h)){e=!0;break}return e},clickHandler:function(t){var e=t.changedTouches[0];if(this.mark){var i=this.winToCanvas(e.clientX,e.clientY),a={x:(i.x-this.x/this.pixelRatio)/(this.img.width*this.scale/this.pixelRatio),y:(i.y-this.y/this.pixelRatio)/(this.img.height*this.scale/this.pixelRatio)};if(i={x:a.x*this.img.width,y:a.y*this.img.height},this.isCanClick(i)){this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(i.x*this.scale/this.pixelRatio+this.x/this.pixelRatio,i.y*this.scale/this.pixelRatio+this.y/this.pixelRatio,this.scale===this.defaultScale?this.pointRadius:this.pointRadius*(1+(this.scale-this.defaultScale)/this.pixelRatio),0,2*Math.PI,!1),this.ctx.fill(),this.ctx.restore();var n={x:i.x,y:i.y};this.markCoordinates.push(n),this.points.push(n)}return!1}this.redraw(t,this.winToCanvas(e.clientX,e.clientY))},setRange:function(t,e,i){var a=this.img.width*i,n=this.img.height*i,s=this.canvas.width,o=this.canvas.height,r=this.img.height*this.scaleBetween[0];t=a<s?(s-a)/2:(t=t+a<s?s-a:t)>0?0:t,e=n<o?(o-n)/2:(e=e+n<r?r-n:e)>0?0:e,this.x=t,this.y=e},draw:function(){this.setRange(this.x,this.y,this.scale),this.drawImage(),this.drawPoints(),this.drawRegions()},redraw:function(t,e){this.clickPoints=[],this.drawImage(),this.drawPoints(e),this.drawRegions(e),this.clickCallback(t,this.clickPoints)},clickCallback:function(t,e){var i;e.some((function(t,e){return"points"===t.tag?(i=t,!0):(i=t,!1)}));var a=t.changedTouches[0],n=this.winToCanvas(a.clientX,a.clientY),s=(n.x-this.x/this.pixelRatio)/(this.img.width*this.scale/this.pixelRatio),o=(n.y-this.y/this.pixelRatio)/(this.img.height*this.scale/this.pixelRatio);(n={x:parseFloat((s*this.img.width).toFixed(2)),y:parseFloat((o*this.img.height).toFixed(2))}).y>=0&&n.x>=0&&n.y<=this.img.height&&n.x<=this.img.width&&this.$emit("onclick",{type:i?"point":"",points:this.points,point:i,clickPoint:i,x:n.x,y:n.y,scale:this.scale/this.pixelRatio})},drawImage:function(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.ctx.drawImage(this.img,0,0,this.img.width,this.img.height,this.x,this.y,this.img.width*this.scale,this.img.height*this.scale)},drawPoints:function(t){var e=this;this.points.forEach((function(i,a){e.drawPoint(i.x*e.scale/e.pixelRatio+e.x/e.pixelRatio,i.y*e.scale/e.pixelRatio+e.y/e.pixelRatio,e.pointRadius,a,t,i.color)}))},drawPoint:function(t,e,i,a,n,s){this.ctx.save(),this.ctx.beginPath(),this.ctx.shadowBlur=i/2,this.ctx.shadowColor="black",this.ctx.fillStyle=s||this.pointColor,this.ctx.arc(t,e,i,0,2*Math.PI,!1),this.ctx.fill(),this.ctx.shadowBlur=0,this.ctx.shadowColor="transparent",this.ctx.restore(),i*=2,this.ctx.save(),this.ctx.beginPath(),this.ctx.strokeStyle="transparent",this.ctx.fillStyle="transparent",this.ctx.rect(t-i,e-i,2*i,2*i),this.ctx.stroke(),this.ctx.restore(),n&&this.ctx.isPointInPath(n.x*this.pixelRatio,n.y*this.pixelRatio)&&this.clickPoints.push({tag:"points",pos:n,index:a})},drawRegions:function(t){var e=this;this.regions&&this.regions.length&&this.regions.forEach((function(i,a){var n,s,o,r;e.ctx.beginPath(),i.area.forEach((function(t,i){var a=t[0]*e.scale/e.pixelRatio+e.x/e.pixelRatio,c=t[1]*e.scale/e.pixelRatio+e.y/e.pixelRatio;i?e.ctx.lineTo(a,c):e.ctx.moveTo(a,c),n=void 0===n?a:n<a?n:a,s=void 0===s?a:s>a?s:a,o=void 0===o?c:o<c?o:c,r=void 0===r?c:r>c?r:c})),e.ctx.closePath(),e.ctx.fillStyle="rgba(255, 144, 0, 0.4)",e.ctx.fill(),e.ctx.lineWidth=3,e.ctx.strokeStyle="#feda8e",e.ctx.stroke(),e.ctx.lineWidth=2,e.ctx.strokeStyle="rgba(0, 0, 0, 0.8)",e.ctx.stroke(),t&&e.ctx.isPointInPath(t.x*e.pixelRatio,t.y*e.pixelRatio)&&e.clickPoints.push({tag:"region",pos:t,index:a,regionData:i}),e.ctx.font='18px bold -apple-system, "Helvetica Neue", Roboto, "Segoe UI", sans-serif',e.ctx.textAlign="center",e.ctx.lineWidth=4,e.ctx.strokeStyle="#ffffff",e.ctx.strokeText(i.name,(s+n)/2,(r+o)/2+10),e.ctx.fillStyle="#111111",e.ctx.fillText(i.name,(s+n)/2,(r+o)/2+10)}))}}}}).call(this,i("391c"))},c82d:function(t,e,i){var a=i("0c52");"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);(0,i("85cb").default)("26e0fa2e",a,!0,{sourceMap:!1,shadowMode:!1})},c854:function(t,e,i){"use strict";i("11ed")},d0fb:function(t,e,i){"use strict";(function(t){var a=i("fd50"),n=i("bcc7"),s=i("515e"),o=i("e89f"),r=i("07d2"),c=i("7bac"),l=i("a7c3"),d=i("4360");e.a={name:"CheckGuideList",components:{Item:r.default},mixins:[o.a],store:d.a,props:{data:{type:String,default:""}},data:function(){return{show:!1,isLoading:!0,listData:[],module:"",itemId:"",batchId:"",sectionId:"",options:""}},computed:{moduleAttribute:function(){return this.$store.state.global.moduleAttribute}},mounted:function(){this.data=[]},methods:{openPopup:function(e){var i,n=this;for(var s in this.value=!0,this.show=!0,this.module=e.module,this.itemId=e.itemId,this.batchId=e.batchId,this.sectionId=e.sectionId,this.options=e.options,this.$emit("open"),e)this[s]=e[s];this.checkType={check:31,"check-safety":36,"check-quality":37,"measure-v3":41,process:32,"fly-inspect":101}[this.module];var o=!1;t.isEmpty(this.itemId)?!t.isEmpty(this.checkType)&&t.isEmpty(this.sectionId)?i=this.initByType():t.isEmpty(this.batchId)?t.isEmpty(this.options)?t.isEmpty(this.sectionId)?i=a.a.when():(o=!0,i=this.initByBidsection()):i=this.initByOptions():i=this.initByBatch():i=this.initById(),this.isLoading=!0,i.then((function(e){var i=n.moduleAttribute[n.module]||{};!t.isEmpty(i)&&i.setUsualItems&&o?c.a.getUserKey(n.mmkvCode()).then((function(t){t=null===t?e:n.mergeArray(n.deepClone(e),t),n.listData=t||[],n.isLoading=!1})):(n.listData=e||[],n.isLoading=!1)}))},mmkvCode:function(){var t=this.moduleAttribute[this.module]||{};return l.a[t.mmkv_item]+"_"+this.sectionId},mergeArray:function(e,i){var a=this;return t.filter(e,(function(e){var n=i[e.id];return t.isEmpty(e.subitem)||(e.subitem=a.mergeArray(e.subitem,i)),!t.isEmpty(n)||"desc"===e.type}))},closePopup:function(){this.value=!1,this.show=!1,this.$emit("close")},clickItem:function(t){t.subitem&&t.subitem.length?this.$set(t,"isOpen",!t.isOpen):"special-inspect"===this.module?s.a.openPopup({itemId:t.id,module:this.module}):s.a.openPopup({itemId:t.item_id,module:this.module})},initById:function(){var t=this;if("special-inspect"!==this.module)return n.a.getCheckItem(this.itemId,this.checkType).then((function(e){return e?t.sectionId?n.a.getBidSectionCheckItemListByCode(t.sectionId,e.code):n.a.getCheckItemTreeByCode(e.code):a.a.when()}))},initByType:function(){return n.a.getCheckItemGuidelineList(this.checkType)},initByBatch:function(){return a.a.when()},initByBidsection:function(){return n.a.getBidSectionCheckItemTreeByType(this.sectionId,this.checkType)},initByOptions:function(){return a.a.resolve(this.options)},deepClone:function(t){return JSON.parse(JSON.stringify(t))}}}}).call(this,i("391c"))},d1f2:function(t,e,i){"use strict";(function(t){var a=i("4c2b"),n=i("07d2");e.a={name:"CheckitemSelect",components:{Item:n.default},props:{title:{type:String,default:""},mode:{type:String,default:"edit"},selectClass:{type:[String,Object],default:""},options:{type:Array,default:function(){return[]}},selected:{type:Object,default:function(){return{}}},selectedDesc:{type:Object,default:function(){return{}}},selectedText:{type:String,default:"edit"},module:{type:String,default:""},sectionId:{type:String,default:""},hasDesc:{type:Boolean,default:!1},editabled:{type:Boolean,default:!0},formCheck:{type:Boolean,default:!1}},data:function(){return{}},computed:{hasSelected:function(){return!t.isEmpty(this.selected)}},created:function(){var t=this;a.a.$off("onSelect").$on("onSelect",(function(e,i){t.$emit("onSelect",e,i)}))},methods:{onClick:function(){this.open()},open:function(){a.a.openPopup({module:this.module,sectionId:this.sectionId,hasDesc:this.hasDesc,selected:this.selected,selectedDesc:this.selectedDesc})}}}}).call(this,i("391c"))},dc98:function(t,e,i){"use strict";i("0732")},e223:function(t,e,i){"use strict";var a=i("c40a").a,n=(i("0aac"),i("17cc")),s=Object(n.a)(a,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",t._g({ref:"content",staticClass:"drawing-con"},t.$listeners),[t.isDownloading?[i("p",[i("svg",{staticClass:"svg-loading",attrs:{viewBox:"0 0 80 80"}},[i("circle",{attrs:{cx:"40",cy:"40",r:"36"}})])]),i("p",{staticClass:"loading-text"},[t._v("正在下载...")])]:[t.error?t._e():i("canvas",{ref:"drawing-canvas"}),t.error?i("p",{staticClass:"error-text"},[t._v(t._s(t.error))]):t._e()]],2)}),[],!1,null,"fba5990a",null);e.a=s.exports},e304:function(t,e,i){(t.exports=i("690e")(!1)).push([t.i,".zjapp .layout-main[data-v-5cfe259f] .layout-content{display:flex;flex-direction:column}.zjapp .page-scroll[data-v-5cfe259f]{flex:1;overflow:auto;scroll-behavior:smooth;transform:translateZ(0)}.zjapp .ui-loading-status[data-v-5cfe259f]{flex:auto;height:calc(100vh - 148px)}.zjapp .set-usual-items-header[data-v-5cfe259f]{font-size:18px;padding:0 12px}.zjapp .set-view-tip[data-v-5cfe259f]{position:reslative;top:0;width:100%;height:30px;line-height:30px;background-color:#ffdfae;font-size:14px;color:#ff8a36;z-index:1000;padding-left:15px}.zjapp .set-view-tip i[data-v-5cfe259f]{position:absolute;right:8px;top:0;padding:7px}",""])},e5a0:function(t,e,i){(t.exports=i("690e")(!1)).push([t.i,'.zjapp .checkbox[data-v-afcfdff2]{font-size:14px;line-height:20px}.zjapp .icon[data-v-afcfdff2]{vertical-align:top;margin-top:1px;margin-right:7px}.zjapp .semiCheckbox[data-v-afcfdff2]{font-family:Chinese Quote,-apple-system,BlinkMacSystemFont,Segoe UI,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Helvetica Neue,Helvetica,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol;font-size:14px;font-variant:tabular-nums;line-height:1.5;color:rgba(0,0,0,.65);box-sizing:border-box;margin:0;padding:0;list-style:none;white-space:nowrap;cursor:pointer;outline:none;display:inline-block;line-height:1;position:relative;vertical-align:middle}.zjapp .semiCheckbox-inner[data-v-afcfdff2]{position:relative;top:0;left:0;display:block;width:18px;height:18px;border:1px solid #d9d9d9;border-radius:2px;background-color:#fff;transition:all .3s}.zjapp .semiCheckbox-indeterminate .semiCheckbox-inner[data-v-afcfdff2]:after{content:" ";transform:translate(-50%,-50%) scale(1);border:0;left:50%;top:50%;width:8px;height:8px;background-color:#4275e8;opacity:1}.zjapp .semiCheckbox-inner[data-v-afcfdff2]:after{transform:rotate(45deg) scale(0);position:absolute;left:5.57142857px;top:2.14285714px;display:table;width:5.71428571px;height:9.14285714px;border:2px solid #fff;border-top:0;border-left:0;content:" ";transition:all .1s cubic-bezier(.71,-.46,.88,.6),opacity .1s;opacity:0}.zjapp .semiCheckbox-checked .semiCheckbox-inner[data-v-afcfdff2]{background-color:#4275e8;border-color:#4275e8}.zjapp .semiCheckbox-checked .semiCheckbox-inner[data-v-afcfdff2]:after{transform:rotate(45deg) scale(1);position:absolute;display:table;border:2px solid #fff;border-top:0;border-left:0;content:" ";transition:opacity .2s cubic-bezier(.12,.4,.29,1.46) .1s;opacity:1}',""])},e900:function(t,e,i){"use strict";i.d(e,"a",(function(){return a})),i.d(e,"b",(function(){return n}));i("f548");function a(t){var e,i,a,n=(i=(e=t).backingStorePixelRatio||CanvasRenderingContext2D.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1,(window.devicePixelRatio||1)/i);1!==n&&(!function(t,e){for(var i in t)t.hasOwnProperty(i)&&e(t[i],i)}({fillRect:"all",clearRect:"all",strokeRect:"all",moveTo:"all",lineTo:"all",arc:[0,1,2],arcTo:"all",bezierCurveTo:"all",isPointinPath:"all",isPointinStroke:"all",quadraticCurveTo:"all",rect:"all",translate:"all",createRadialGradient:"all",createLinearGradient:"all"},(function(e,i){var a;t[i]=(a=t[i],function(){var t,i,s=Array.prototype.slice.call(arguments);if("all"===e)s=s.map((function(t){return t*n}));else if(Array.isArray(e))for(t=0,i=e.length;t<i;t++)s[e[t]]*=n;return a.apply(this,s)})})),t.stroke=(a=t.stroke,function(){this.lineWidth*=n,a.apply(this,arguments),this.lineWidth/=n}),t.fillText=function(t){return function(){var e=Array.prototype.slice.call(arguments);e[1]*=n,e[2]*=n,this.font=this.font.replace(/(\d+)(px|em|rem|pt)/g,(function(t,e,i){return e*n+i})),t.apply(this,e),this.font=this.font.replace(/(\d+)(px|em|rem|pt)/g,(function(t,e,i){return e/n+i}))}}(t.fillText),t.strokeText=function(t){return function(){var e=Array.prototype.slice.call(arguments);e[1]*=n,e[2]*=n,this.font=this.font.replace(/(\d+)(px|em|rem|pt)/g,(function(t,e,i){return e*n+i})),t.apply(this,e),this.font=this.font.replace(/(\d+)(px|em|rem|pt)/g,(function(t,e,i){return e/n+i}))}}(t.strokeText),t.extended=!0)}var n=function(t){var e,i;(e=t).getContext=(i=e.getContext,function(t){var e,n,s=i.call(this,t);return"2d"===t&&(e=s.backingStorePixelRatio||CanvasRenderingContext2D.webkitBackingStorePixelRatio||s.mozBackingStorePixelRatio||s.msBackingStorePixelRatio||s.oBackingStorePixelRatio||s.backingStorePixelRatio||1,(n=(window.devicePixelRatio||1)/e)>1&&(this.style.height=this.height+"px",this.style.width=this.width+"px",this.width*=n,this.height*=n)),a(s),s})}},eb41:function(t,e,i){(t.exports=i("690e")(!1)).push([t.i,".zjapp .set-items-buttons[data-v-afc9fec8]{width:44px;height:44px;display:flex;align-items:center;justify-content:center}.zjapp .set-items-buttons i[data-v-afc9fec8]{font-size:22px}",""])},ebf1:function(t,e,i){"use strict";(function(t){e.a={name:"RadioBox",props:{options:{type:[Array,Object],default:function(){return[]}},value:{type:String,default:""},align:{type:String,default:"r"},customClass:{type:String,default:""}},data:function(){return{}},computed:{optionsType:function(){return t.isArray(this.options)?"array":t.isObject(this.options)?"object":""}},methods:{onSelect:function(t){var e;"array"===this.optionsType?e=this.options[t]:"object"===this.optionsType&&(e=t),this.$emit("input",e),this.$emit("onSelect",e)}}}}).call(this,i("391c"))},f1e4:function(t,e,i){"use strict";(function(t){i("5ab2"),i("e10e");var a=i("28f8"),n=(i("9e76"),i("6d57"),i("9a33"),i("f548"),i("cc57"),i("4ad6")),s=i("e89f"),o=i("bcc7"),r=i("3122"),c=i("6e1b"),l=i("c130"),d=i("0636");function p(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,a)}return i}function h(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?p(Object(i),!0).forEach((function(e){Object(a.a)(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):p(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}e.a={name:"CheckGuideDetail",components:{},mixins:[s.a],data:function(){return{show:!1,isLoading:!0,isImageDownloading:!1,title:"",content:[],module:"",itemId:""}},methods:{openPopup:function(e){var i=this;for(var a in this.value=!0,this.show=!0,this.module=e.module,this.itemId=e.itemId,this.$emit("open"),e)this[a]=e[a];this.checkType={check:31,"check-safety":36,"check-quality":37,"measure-v3":41,process:32,"fly-inspect":101}[this.module],this.isLoading=!0,("special-inspect"===this.module?c.a.getSpecialInspectCheckItemDetail(this.itemId):"templet-plan"===this.module?l.a.getTempletDetail(this.itemId):"material"===this.module?d.a.getMaterialDetail(this.itemId):o.a.getCheckItem(this.itemId,this.checkType)).then((function(e){console.log("checkitemData",e),i.checkitemData=e,i.title=e.full_name||e.name,"special-inspect"!==i.module&&"inspect"!==i.module&&"fly-inspect"!==i.module&&"material"!==i.module||(e.content=e.guideline||e.content);var a=e.content?e.content.trim():"";if(a=(a=(a=(a=(a=a.replace(/<\/p><p>/gm,"\n")).replace(/<p>/gm,"")).replace(/<\/p>/gm,"")).replace(/<br>/gm,"")).replace(/<br \/>/gm,""),/(<img[^\>]*>)/gm.test(a)){var n=a.split(/(<img[^\>]*>)/gm);(n=n.filter((function(t){return!!t}))).forEach((function(t,e){t&&!/^\s*\n/.test(t)&&e&&!/\n\s*$/.test(n[e-1])&&(n[e]="\n"+t)})),a=n.join("")}var s=a?a.split("\n"):[];i.content=t.map(s,(function(t,e){var i;if(/<img([\s\S]*)>/gm.test(t)){var a=t.split(/\ssrc="([^"]*)"/gm)[1],n=a?a.match(/[\w|-]{36}/gm)[0]:(new Date).getTime()+"-"+e;i={isImg:!0,src:"",url:a,status:"pending",id:n,ready:!0}}else i={isImg:!1,val:t};return i})),i.downloadImage(),i.isLoading=!1})).catch((function(t){$log.log(t)}))},closePopup:function(){this.value=!1,this.show=!1,this.$emit("close")},getThumbnail:function(t){return"pending"===t.status?r.a.IMAGE_LOADING:"rejected"===t.status?r.a.IMAGE_RELOAD:"dev"===APP_ENV?t.url:"fulfilled"===t.status?t.src:($log.log("检查指引-显示图片：",t),r.a.IMAGE_PLACEHOLD)},imgError:function(t,e){$log.error("检查指引-加载图片出现错误：",t);var i=h({},t);i.status="rejected",this.$set(this.content,e,i)},downloadImage:function(e){var i=this;e=e?[e]:this.imageList(),t.each(e,(function(e){var a=h({},e),n=t.map(i.content,(function(t){return t.id})).indexOf(e.id);r.a.isNeedDownload(e.url).then((function(t){t?r.a.download(e.url).then((function(t){a.status="fulfilled",a.src=r.a.fixUrl(t),i.$set(i.content,n,a)})).catch((function(t){$log.error("检查指引-下载图片：",t)})):(a.status="fulfilled",a.src=r.a.fixUrl(r.a.getPathFromUrl(e.url)),i.$set(i.content,n,a))}))}))},imageList:function(){return t.filter(this.content,(function(t){return t.isImg}))},imgClick:function(e){var i=this;if("pending"===e.status)return!1;if("rejected"===e.status)return this.downloadImage(e),$log.log("检查指引-点击重新加载-重新下载图片：",e),!1;var a=this.imageList(),s=t.map(a,(function(t){return t.id})).indexOf(e.id);a=t.map(a,(function(t){return i.getThumbnail(t)})),n.a.openImageBrowser(a,s)}}}}).call(this,i("391c"))},f369:function(t,e,i){"use strict";var a=i("fd50"),n=i("bcc7"),s=i("329b"),o=i("d0fb").a,r=(i("9b25"),i("17cc")),c=Object(r.a)(o,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("transition",{attrs:{name:"slide-right"}},[t.show?i("page-content",{attrs:{mode:"dialog",title:"检查指引","on-close":t.closePopup}},[!t.isLoading&&t.listData.length?i("div",{staticClass:"page-scroll"},t._l(t.listData,(function(e,a){return i("div",{key:a},[i("item",{attrs:{border:"bottom","icon-right":e.subitem&&e.subitem.length?e.isOpen?"arrow-up":"arrow-down":"arrow-right"},on:{click:function(i){t.clickItem(e)}}},[i("div",{staticClass:"item-text fw-b color-blue one-line"},[t._v(t._s(e.item_name))])]),e.isOpen?t._l(e.subitem,(function(e,a){return i("div",{key:a,staticClass:"sublist"},[i("item",{staticClass:"pl0",attrs:{border:"bottom","icon-right":e.subitem&&e.subitem.length?e.isOpen?"arrow-up":"arrow-down":"arrow-right"},on:{click:function(i){t.clickItem(e)}}},[i("div",{staticClass:"item-text checkitem-list-name"},[t._v(t._s(e.item_name))])]),e.isOpen?t._l(e.subitem,(function(e,a){return i("div",{key:a,staticClass:"sublist"},[i("item",{staticClass:"pl0",attrs:{border:"bottom","icon-right":e.subitem&&e.subitem.length?e.isOpen?"arrow-up":"arrow-down":"arrow-right"},on:{click:function(i){t.clickItem(e)}}},[i("div",{staticClass:"item-text checkitem-list-name"},[t._v(t._s(e.item_name))])]),e.isOpen?t._l(e.subitem,(function(e,a){return i("div",{key:a,staticClass:"sublist"},[i("item",{staticClass:"pl0",attrs:{border:"bottom","icon-right":e.subitem&&e.subitem.length?e.isOpen?"arrow-up":"arrow-down":"arrow-right"},on:{click:function(i){t.clickItem(e)}}},[i("div",{staticClass:"item-text checkitem-list-name"},[t._v(t._s(e.item_name))])])],1)})):t._e()],2)})):t._e()],2)})):t._e()],2)}))):t._e(),i("loading-status",{attrs:{"is-loading":t.isLoading,"is-empty":!t.listData.length,"empty-text":"没有检查项"}})],1):t._e()],1)}),[],!1,null,"74102c05",null).exports,l=!1;l||(l=new(s.default.extend(c))({el:document.createElement("div")}),document.body.appendChild(l.$el));var d=l,p=i("515e"),h=i("91c1").a,u=(i("dc98"),Object(r.a)(h,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.show?i("div",{staticClass:"main",style:{top:t.contentTop+"px"}},[i("i",{staticClass:"arrow"}),i("div",{staticClass:"content",on:{click:function(e){return e.target!==e.currentTarget?null:t.closePopup(e)}}},[i("transition",{attrs:{name:"slide-down"},on:{enter:function(e){t.isOpening=!0},"after-enter":function(e){t.isOpening=!1},leave:function(e){t.isClosing=!0},"after-leave":t.afterClose}},[t.showList?i("div",{staticClass:"box",style:{height:t.listHeight+"px"}},t._l(t.data,(function(e,a){return i("div",{key:a,class:{"border-bottom":t.data.length>1,"box-single":1===t.data.length}},[i("div",{staticClass:"detail-hd",class:{"border-bottom":t.data.length<=1,"detail-hd-single":t.data.length<=1},on:{click:function(i){t.toggleItem(e)}}},[t.data.length>1?i("i",{class:{"detail-arrow-right":!e.isOpen,"detail-arrow-down":e.isOpen}}):t._e(),i("div",{staticClass:"detail-title"},[t._v(t._s(e.name))])]),t.data.length<=1||e.isOpen?i("div",{staticClass:"detail-bd",class:{"detail-bd-single":t.data.length<=1}},[t._l(e.textArr,(function(e,a){return i("p",{key:a,staticClass:"text-line"},[t._v("\n              "+t._s(e)+"\n            ")])})),i("item-img-list",{attrs:{editabled:!1},model:{value:e.contentImage,callback:function(i){t.$set(e,"contentImage",i)},expression:"item.contentImage"}}),i("loading-status",{attrs:{"is-empty":!e.textArr.length&&!e.contentImage.length,"empty-text":"PC端未设置检查指引"}})],2):t._e()])}))):t._e()])],1)]):t._e()}),[],!1,null,"2cac8864",null).exports),m=!1;m||(m=new(s.default.extend(u))({el:document.createElement("div")}),document.body.appendChild(m.$el));var f=m,g={name:"CheckGuide",components:{},props:{module:{type:String,default:""},mode:{type:String,default:"page"},itemId:{type:String,default:""},itemIds:{type:Array,default:function(){return[]}},batchId:{type:String,default:""},sectionId:{type:String,default:""},options:{type:Array,default:function(){return[]}},optionsPromise:{type:Function,default:function(){}},beforeOpen:{type:Function,default:function(){}}},data:function(){return{isLoading:!1}},methods:{openCheckGuide:function(){var t=this,e=this.beforeOpen&&this.beforeOpen();e instanceof Promise||(e=Promise.resolve(e)),e.then((function(e){!1!==e&&("drop"===t.mode?f.openPopup({itemIds:t.itemIds,el:t.$refs["check-guide-btn"],options:t.options}):("templet-plan"===t.module?a.a.when(!1):t.itemId&&t.sectionId?n.a.hasChildSectionCheckItem(t.itemId,t.sectionId):t.itemId?n.a.hasChildCheckItem(t.itemId):a.a.when(!0)).then((function(e){e?d.openPopup({module:t.module,itemId:t.itemId,batchId:t.batchId,sectionId:t.sectionId,options:t.options}):p.a.openPopup({itemId:t.itemId,module:t.module})})))}))}}},b=Object(r.a)(g,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{ref:"check-guide-btn",staticClass:"header-btn",on:{click:function(e){t.openCheckGuide()}}},[i("icon",{attrs:{name:"nav-info"}})],1)}),[],!1,null,null,null);e.a=b.exports},f3d7:function(t,e,i){"use strict";i("9120")},f53a:function(t,e,i){(t.exports=i("690e")(!1)).push([t.i,".zjapp .number-keyboard-con[data-v-6337f428]{position:absolute;left:0;bottom:0;width:100%;padding:4px 0;background-color:#fafafa;box-shadow:0 -4px 8px 0 rgba(0,0,0,.08);-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.zjapp .ios-bezel-less[data-v-6337f428]{padding-bottom:34px}.zjapp .keyboard-row[data-v-6337f428],.zjapp .keys-row[data-v-6337f428]{display:flex}.zjapp .row-span-1[data-v-6337f428]{flex:1}.zjapp .row-span-2[data-v-6337f428]{flex:2}.zjapp .row-span-3[data-v-6337f428]{flex:3}.zjapp .keys[data-v-6337f428]{flex:1;height:48px;line-height:48px;text-align:center;font-size:18px;margin:4px;border:1px solid rgba(5,5,5,.07);border-radius:8px;background-color:#fff;padding:0}.zjapp .keys-next[data-v-6337f428],.zjapp .keys-prev[data-v-6337f428]{font-size:14px;color:#4275e8}.zjapp .keys-ok[data-v-6337f428]{font-size:14px;color:#999}.zjapp .keys-delete[data-v-6337f428]{color:#999}.zjapp .icon[data-v-6337f428]{pointer-events:none}.zjapp .icon-keyboard-close[data-v-6337f428]{font-size:20px;color:#999}.zjapp .icon-keyboard-delete[data-v-6337f428]{vertical-align:top;margin-top:13px;font-size:14px;color:#333}.zjapp .activing[data-v-6337f428]{background-color:#ececec}.zjapp .disabled[data-v-6337f428]{color:#999}.zjapp .col[data-v-6337f428]{display:flex;flex-direction:column;justify-content:center;align-items:center;height:104px;line-height:36px}",""])},fda1:function(t,e,i){var a=i("19a7");"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);(0,i("85cb").default)("cb2469e8",a,!0,{sourceMap:!1,shadowMode:!1})},fe13:function(t,e,i){"use strict";var a=i("992a").a,n=i("17cc"),s=Object(n.a)(a,(function(){var t=this,e=t.$createElement;return(t._self._c||e)("item",{attrs:{label:t.title,text:t.hasSelected?t.selectedText:"",mode:t.mode,editabled:!0,placeholder:t.placeholder,"form-check":t.formCheck},on:{click:t.open}},[t.$slots.title?t._t("title",null,{slot:"left"}):t._e()],2)}),[],!1,null,null,null);e.a=s.exports},fe9e:function(t,e,i){"use strict";i("3cd8")}}]);