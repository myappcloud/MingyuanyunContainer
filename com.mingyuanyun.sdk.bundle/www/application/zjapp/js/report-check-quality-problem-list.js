(window.webpackJsonp_module_entry_zjapp_=window.webpackJsonp_module_entry_zjapp_||[]).push([["report-check-quality-problem-list"],{"06b9":function(t,e,a){(t.exports=a("690e")(!1)).push([t.i,".zjapp .display-flex[data-v-02aa3377]{display:-moz-flex;display:flex;-moz-align-items:center;align-items:center;-webkit-box-align:center;-moz-box-align:center;-ms-flex-align:center;-moz-justify-content:center;justify-content:center}.zjapp .flex[data-v-02aa3377]{-moz-flex:1;flex:1}.zjapp .align-item-start[data-v-02aa3377]{-moz-align-items:flex-start;align-items:flex-start;-webkit-box-align:flex-start;-moz-box-align:flex-start;-ms-flex-align:flex-start;-moz-justify-content:flex-start;justify-content:flex-start}.zjapp .align-item-center[data-v-02aa3377]{-moz-align-items:center;align-items:center;-webkit-box-align:center;-moz-box-align:center;-ms-flex-align:center;-moz-justify-content:center;justify-content:center}.zjapp .justify-content-start[data-v-02aa3377]{-webkit-box-align:flex-start;-moz-box-align:flex-start;-ms-flex-align:flex-start;-moz-justify-content:flex-start;justify-content:flex-start;-webkit-box-pack:flex-start;-moz-box-pack:flex-start;-ms-flex-pack:flex-start;align-items:flex-start}.zjapp .justify-content-center[data-v-02aa3377]{-webkit-box-align:center;-moz-box-align:center;-ms-flex-align:center;-moz-justify-content:center;justify-content:center;-webkit-box-pack:center;-moz-box-pack:center;-ms-flex-pack:center;align-items:center}.zjapp .report-date-item[data-v-02aa3377]{padding:0 6px;background-color:#fff;font-size:15px;border:1px solid #d2d2d2;border-radius:4px}.zjapp .report-date-item[data-v-02aa3377],.zjapp .report-date-split[data-v-02aa3377]{display:inline-block;vertical-align:top;height:30px;line-height:30px;color:#111}.zjapp .report-date-split[data-v-02aa3377]{margin:0 5px;font-size:12px}.zjapp .report-date-item-circle[data-v-02aa3377]{line-height:26px;padding:0 8px;background-color:#fff;font-size:14px;border:1px solid #d7e0f7;border-radius:14px}.zjapp .report-date-item-circle[data-v-02aa3377],.zjapp .report-date-split-circle[data-v-02aa3377]{display:inline-block;vertical-align:top;margin-top:3px;height:28px;color:#666}.zjapp .report-date-split-circle[data-v-02aa3377]{line-height:28px;font-size:12px}.zjapp .report-check-ytg[data-v-02aa3377]{background-color:#34dba6}.zjapp .report-check-dfy[data-v-02aa3377]{background-color:#29b992}.zjapp .report-check-dzg[data-v-02aa3377]{background-color:#ff8459}.zjapp .report-check-fzcgb[data-v-02aa3377]{background-color:#d9d9d9}.zjapp .report-check-title[data-v-02aa3377]{position:relative;margin-left:15px;line-height:50px;font-size:16px;color:#111}.zjapp .report-check-title .con-right[data-v-02aa3377]{position:absolute;top:0;right:15px;line-height:50px;font-size:16px;color:#999}.zjapp .report-check-data[data-v-02aa3377]{padding:15px 50px 0 15px}.zjapp .report-check-total[data-v-02aa3377]{padding:21px 0;width:105px;padding-right:15px;text-align:center;color:#000}.zjapp .report-check-total .num[data-v-02aa3377]{font-size:30px;line-height:28px}.zjapp .report-check-total .label[data-v-02aa3377]{font-size:12px}.zjapp .report-check-dis[data-v-02aa3377]{position:relative}.zjapp .report-check-dis .passport[data-v-02aa3377]{position:absolute;top:-25px;color:#111;width:100px;text-align:center;margin-left:-50px}.zjapp .report-check-dis .passport .arrowline[data-v-02aa3377]{position:absolute;top:20px;left:50%;width:2px;height:20px;margin-left:-1px;background-color:#29b992;border-radius:1px}.zjapp .report-check-dis .dis[data-v-02aa3377]{height:10px;overflow:hidden;border-radius:5px}.zjapp .report-check-dis .dis-item[data-v-02aa3377]{float:left;height:10px}.zjapp .report-check-dis .dis-empty[data-v-02aa3377]{height:10px;border:1px solid #d9d9d9;border-radius:5px}.zjapp .report-check-detail[data-v-02aa3377]{padding:0 15px 25px 15px;-moz-align-items:flex-start;align-items:flex-start;-webkit-box-align:flex-start;-moz-box-align:flex-start;-ms-flex-align:flex-start;-moz-justify-content:flex-start;justify-content:flex-start}.zjapp .report-check-detail .flex[data-v-02aa3377]:last-child{-moz-flex:1.2;flex:1.2}.zjapp .report-check-detail .num[data-v-02aa3377]{color:#111;font-size:18px;line-height:22px}.zjapp .report-check-detail .underline[data-v-02aa3377]{margin:0 auto;width:10px;height:3px;border-radius:1.5px}.zjapp .report-check-detail .label[data-v-02aa3377]{color:#666;font-size:12px;line-height:18px;padding:2px 0}.zjapp .report-check-ft[data-v-02aa3377]{padding:13px 15px 13px 0;line-height:24px;margin-left:15px;font-size:14px}.zjapp .report-check-ft .data-label[data-v-02aa3377]{width:80px;color:#8c8c8c}.zjapp .report-check-ft .data-con[data-v-02aa3377]{color:#111}.zjapp .report-project-check-option[data-v-02aa3377]{padding:10px 15px}.zjapp .item-select-project>*[data-v-02aa3377]{pointer-events:none}",""])},"2f9f":function(t,e,a){var i=a("06b9");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);(0,a("85cb").default)("6c5ea36c",i,!0,{sourceMap:!1,shadowMode:!1})},"3fb8":function(t,e,a){"use strict";(function(t){a("c904");var i=a("07d2"),o=a("fa4f"),r=a("7a08"),n=a("774b"),p=a("d004"),l=a("5685"),c=a("e2a7"),s=a("6bf2"),d=a.n(s),m=a("3122"),f=a("1b7e");e.a={name:"ReportCheckQualityProjectList",components:{item:i.default,Scroller:n.default,TodoItem:p.a,ItemList:o.a},data:function(){return{isLoading:!0,list:[],itemList:[],viewSize:$rootScope.viewSize,limit:7,selected:{},totalProblemNum:0,batchName:null,batchId:null,dateStart:null,dateEnd:null}},computed:{isOpen:function(){return r.a.show},filterList:function(){var e=this;return t.isEmpty(this.selected)||t.isEmpty(this.selected.id)?this.list:t.filter(this.list,(function(t){return t.item_id===e.selected.id}))}},activated:function(){this.$router.isBack||(this.selected={},this.list=[],this.itemList=[],this.receivingParameter(),this.getReportData())},deactivated:function(){r.a.show&&r.a.closePopup()},methods:{moment:d.a,receivingParameter:function(){var t=this.$route.query;this.batchName=t.batchName,this.batchId=t.batchId,this.dateStart=t.dateStart,this.dateEnd=t.dateEnd},getReportData:function(){var e=this;this.isLoading=!0;var a=[],i={},o={batchId:this.batchId,dateStart:this.dateStart,dateEnd:this.dateEnd};f.a.getHasNetwork().then((function(r){r?l.a.getReportCheckList(o).then((function(o){e.list=t.map(o,(function(t){return i[t.item_id]||(i[t.item_id]={id:t.item_id,name:t.item_name,problemNum:0,rootCode:t.item_root_code,code:t.item_code},a.push(i[t.item_id])),i[t.item_id].problemNum+=1,t.thumbnail=m.a.getDefaultThumbnailFromList(t.image_file||[],"质量文明"),t})),e.itemList=a.sort((function(t,e){return t.problemNum>e.problemNum?-1:t.problemNum<e.problemNum?1:t.rootCode===e.rootCode?t.code>e.code:t.rootCode>e.rootCode}));var r=0;t.each(e.itemList||[],(function(t){r+=t.problemNum})),e.totalProblemNum=r,e.itemList=[{id:"",name:"全部问题",problemNum:r}].concat(e.itemList),e.selected=e.itemList[0],e.isLoading=!1})).catch((function(t){c.a.alert("质量检查加载列表失败 ",t),e.list=[],e.isLoading=!1})):c.a.alert("当前网络无法同步数据")})).catch((function(){c.a.alert("当前网络无法同步数据")}))},selectProject:function(t){var e=this;r.a.show?r.a.closePopup():r.a.openPopup({options:this.itemList,totalProblemNum:this.totalProblemNum,selected:this.selected,el:t&&t.target?t.target:null,callback:function(t){e.selected=t}})},problemDetail:function(t){var e=this;f.a.getHasNetwork().then((function(a){a?e.$router.push({name:"ReportCheckQualityProjectDetail",params:{id:t.id}}):c.a.alert("当前网络无法同步数据")})).catch((function(){c.a.alert("当前网络无法同步数据")}))}}}}).call(this,a("391c"))},"46e7c":function(t,e,a){"use strict";a("2f9f")},"5f8d":function(t,e,a){"use strict";a.r(e);var i=a("3fb8").a,o=(a("46e7c"),a("17cc")),r=Object(o.a)(i,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("page-content",{attrs:{title:t.batchName,"show-go-root":"Report"}},[a("item",{staticClass:"bg-sub-theme item-select-project border-bottom report-project-check-option",attrs:{"icon-right":t.isOpen?"arrow-up":"arrow-down"},on:{click:t.selectProject}},[a("div",{staticClass:"item-text"},[t._v(t._s(t.selected.name))]),a("div",{staticClass:"item-font color-gray1 pl10"},[t._v(t._s(t.selected.problemNum)+"个")])]),t.isLoading?t._e():a("scroller",t._l(t.filterList,(function(e){return a("item-list",{key:e.id,attrs:{"is-unread":e.unread,"is-timeout":Boolean(e.is_timeout),"is-urgent":"紧急"==e.emergency_degree||"特急"==e.emergency_degree,"is-return":e.sent_back_times>0,img:e.thumbnail,title:e.item_full_name||"未选检查项",detail:(e.desc_name?e.desc_name+" ":"")+(e.remark||""),footer:t.moment(e.regist_date).format("MM-DD HH:mm")+" "+(e.place||""),status:e.status,"status-text":e.status_text},on:{click:function(a){t.problemDetail(e)}}})}))),a("loading-status",{attrs:{"is-loading":t.isLoading,"is-empty":!t.isLoading&&!t.list.length,type:"report","empty-text":"没有质量检查问题"}})],1)}),[],!1,null,"02aa3377",null);e.default=r.exports}}]);