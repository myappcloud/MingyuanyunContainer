(window.webpackJsonp_module_entry_zjapp_=window.webpackJsonp_module_entry_zjapp_||[]).push([["report-check-problem-detail","chunk-0b5b35be","chunk-3adbbd26","chunk-2709989a"],{"024b":function(t,e,a){(t.exports=a("690e")(!1)).push([t.i,'.zjapp .item-log[data-v-92a9a1d0]{position:relative;margin-left:54px;padding:15px 15px 15px 0}.zjapp .item-log .hd[data-v-92a9a1d0]{display:flex}.zjapp .title[data-v-92a9a1d0]{flex:1;color:#333}.zjapp .date[data-v-92a9a1d0],.zjapp .title[data-v-92a9a1d0]{line-height:22px;font-size:16px}.zjapp .date[data-v-92a9a1d0]{padding:0 10px;color:#999}.zjapp .icon-toggle[data-v-92a9a1d0]{line-height:22px;font-size:14px}.zjapp .remark[data-v-92a9a1d0]{font-size:14px;color:#666;line-height:18px}.zjapp .icon-status[data-v-92a9a1d0]{position:absolute;z-index:2;left:-44px;top:9px;padding:10px;background-color:#fff}.zjapp .icon-status[data-v-92a9a1d0]:before{content:"";display:block;width:14px;height:14px;border:2px solid #999;border-radius:7px}.zjapp .icon-status-blue[data-v-92a9a1d0]:before{border-color:#1f93fe}.zjapp .icon-status-green[data-v-92a9a1d0]:before{border-color:#3db641}.zjapp .icon-status-red[data-v-92a9a1d0]:before{border-color:#ff3c46}.zjapp .icon-status-gray[data-v-92a9a1d0]:before{border-color:#999}.zjapp .line-progress[data-v-92a9a1d0]{position:absolute;z-index:1;left:-28px;top:0;bottom:0;width:2px;background-color:#cad5ec}.zjapp .item-log[data-v-92a9a1d0]:last-child{background-image:none}.zjapp .item-log:first-child .line-progress[data-v-92a9a1d0]{top:26px}.zjapp .item-log:last-child .line-progress[data-v-92a9a1d0]{height:9px;bottom:auto}.zjapp .text-change[data-v-92a9a1d0]{padding:0 10px;color:#c8c8c8}',""])},"0416":function(t,e,a){"use strict";a("068e")},"068e":function(t,e,a){var i=a("771c");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);(0,a("85cb").default)("1ce02ce6",i,!0,{sourceMap:!1,shadowMode:!1})},"0732":function(t,e,a){var i=a("81f2");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);(0,a("85cb").default)("1b5b07de",i,!0,{sourceMap:!1,shadowMode:!1})},"0aac":function(t,e,a){"use strict";a("2814")},"0cb6":function(t,e,a){(t.exports=a("690e")(!1)).push([t.i,".zjapp .problem-detail-header[data-v-0901aadd]{display:flex;align-items:center;justify-content:center;height:40px;padding:0 15px;line-height:40px;background-color:#f2f2f2}.zjapp .problem-detail-header .status[data-v-0901aadd]{flex:1;height:16px;line-height:16px;border-left:5px solid #ddd;padding-left:5px;color:#111;font-size:16px}.zjapp .problem-detail-header .status-red[data-v-0901aadd]{border-color:#ff3d3d}.zjapp .problem-detail-header .status-blue[data-v-0901aadd]{border-color:#4275e8}.zjapp .problem-detail-header .status-green[data-v-0901aadd]{border-color:#0bc666}.zjapp .problem-detail-header .status-orange[data-v-0901aadd]{border-color:#fc8b01}.zjapp .problem-detail-header .status-black[data-v-0901aadd]{border-color:#333}.zjapp .problem-detail-header .status-gray[data-v-0901aadd]{border-color:#999}.zjapp .problem-detail-header .return[data-v-0901aadd],.zjapp .problem-detail-header .timeout[data-v-0901aadd],.zjapp .problem-detail-header .urgent[data-v-0901aadd]{display:block;padding:0 5px;margin-left:6px;height:16px;line-height:16px;color:#fff;font-size:12px;border-radius:2px;-webkit-border-radius:2px}.zjapp .problem-detail-header .urgent[data-v-0901aadd]{background-color:#ff3d3d}.zjapp .problem-detail-header .timeout[data-v-0901aadd]{background-color:#954cfe}.zjapp .problem-detail-header .return[data-v-0901aadd]{background-color:#fc8b01}.zjapp .problem-detail-header .operat[data-v-0901aadd]{height:40px;line-height:40px;white-space:nowrap;font-size:16px;color:#6b7ba9}",""])},"0f27":function(t,e,a){var i=a("d6af");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);(0,a("85cb").default)("40111b72",i,!0,{sourceMap:!1,shadowMode:!1})},"1bb9":function(t,e,a){var i=a("024b");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);(0,a("85cb").default)("e6d471ce",i,!0,{sourceMap:!1,shadowMode:!1})},"1f63":function(t,e,a){"use strict";a("7434")},2814:function(t,e,a){var i=a("5033");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);(0,a("85cb").default)("9db19832",i,!0,{sourceMap:!1,shadowMode:!1})},"29be":function(t,e,a){"use strict";(function(t){a("5ab2"),a("6d57"),a("e10e");var i=a("28f8"),n=(a("cc57"),a("163d"),a("07d2")),r=a("a5c6"),s=a("6144");function o(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,i)}return a}function c(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?o(Object(a),!0).forEach((function(e){Object(i.a)(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}e.a={name:"SingleSelect",components:{Item:n.default},props:{title:{type:String,default:""},border:{type:String,default:""},pageTitle:{type:String,default:""},placeholder:{type:String,default:""},value:{type:Object,default:function(){return{}}},options:{type:Array,default:function(){return[]}},optionsDisabled:{type:Array,default:function(){return[]}},required:{type:Boolean,default:!0},mode:{type:String,default:"edit"},editabled:{type:Boolean,default:!0},memory:{type:Boolean,default:!1},autoSelect:{type:Boolean,default:!1},beforeOpen:{type:Function,default:function(){}},searchBar:{type:Boolean,default:!0},grouping:{type:String,default:""},autoOpen:{type:Boolean,default:!1},rightBtn:{type:String,default:""},rightBtnEvent:{type:Function,default:function(){return 0}},ifToggle:{type:Boolean,default:!1},formCheck:{type:Boolean,default:!1},editorAddData:{type:Boolean,default:!1},lineLimit:{type:[Number,String],default:1}},data:function(){return{memoryKey:this.$route.name+encodeURI(this.title)}},watch:{options:function(){this.setSelected()}},mounted:function(){this.setSelected()},methods:{openSelect:function(){var e=this;if(this.editabled){var a=this.beforeOpen();a&&a.then&&t.isFunction(a.then)?a.then((function(t){!1!==t&&e.openPopup()})):!1!==a&&this.openPopup()}},openPopup:function(){var e=this;if(this.optionsDisabled&&this.optionsDisabled.length){var a={};t.each(this.optionsDisabled,(function(t){t.id&&(a[t.id]=t)})),t.each(this.options,(function(t,i){a[t.id]?e.options[i].disabled=!0:e.options[i].disabled=!1}))}r.a.openPopup({title:this.pageTitle||"选择"+this.title,selected:this.value,options:this.options,required:this.required,searchBar:this.searchBar,grouping:this.grouping,autoOpen:this.autoOpen,rightBtn:this.rightBtn,ifToggle:this.ifToggle,lineLimit:this.lineLimit,editorAddData:this.editorAddData,onSelect:function(a){var i=t.cloneDeep(e.value);a=t.isArray(a)?t.map(a,(function(t){return c({},t)})):c({},a),e.$emit("input",a,i),e.$emit("onSelect",a,i)},rightBtnEvent:function(a){var i=t.cloneDeep(e.value);e.$emit("rightBtnEvent",a,i)}})},closePopup:function(){r.a.closePopup()},onSelect:function(t){s.a.saveObject(this.memoryKey,t,s.a.level.user),this.$emit("input",t[0]),this.$emit("onSelect",t[0])},setSelected:function(){var e=s.a.getObject(this.memoryKey,s.a.level.user);!1===this.editabled||t.isEmpty(this.options)||(t.isEmpty(this.value)?this.memory&&!t.isEmpty(e)&&t.some(this.options,{id:e.id})&&(this.$emit("input",e),this.autoSelect&&this.$emit("onSelect",e)):this.autoSelect&&this.$emit("onSelect",this.value))}}}}).call(this,a("391c"))},"2c76":function(t,e,a){"use strict";a("c070")},"2dd6":function(t,e,a){(t.exports=a("690e")(!1)).push([t.i,".zjapp .single-item[data-v-6920dde7]{min-height:44px}.zjapp .single-item>div[data-v-6920dde7]{display:flex}.zjapp .single-item>div>span[data-v-6920dde7]{flex:1;overflow:hidden;text-overflow:ellipsis;display:-webkit-box;-webkit-box-orient:vertical}.zjapp .single-item>div>span[data-v-6920dde7] label{color:#4174e9}.zjapp .single-item i[data-v-6920dde7]{line-height:24px;font-size:24px;color:#4275e8}.zjapp .single-item .disabled-item[data-v-6920dde7]{color:#aaa}",""])},"2ddb":function(t,e,a){(t.exports=a("690e")(!1)).push([t.i,".zjapp .supplier-editor[data-v-e465319c]{margin-bottom:10px;padding:8px;display:flex;justify-content:space-between;align-items:center;height:52px;color:#4275e8;background-color:#fff}.zjapp .supplier-editor .icon[data-v-e465319c]{border-left:1px solid #c8c8c8;padding-left:12px}.zjapp .supplier-editor .icon-edit[data-v-e465319c]{color:#c8c8c8;font-size:18px}.zjapp .supplier-editor .icon-qualified[data-v-e465319c]{color:#4275e8}.zjapp .supplier-editor .margin-r[data-v-e465319c]{margin-right:10px}.zjapp .list-title[data-v-e465319c]{position:relative;top:0;color:#888;font-size:14px;line-height:30px;min-height:40px;margin-bottom:0;margin-top:0;padding:8px 16px 2px}.zjapp .search-item>div[data-v-e465319c]{padding-right:35px}.zjapp .search-item i[data-v-e465319c]{position:absolute;color:#ccc;font-size:26px;right:0;top:50%;transform:translateY(-50%)}.zjapp .van-popup--right[data-v-e465319c]{width:100%;height:100%}[data-v-e465319c] .van-cell__title{color:#4174e9;font-weight:700}[data-v-e465319c] .van-collapse-item__content{transform:translateZ(0);padding:0 0 0 25px}[data-v-e465319c] .van-collapse-item__content .van-cell{padding-left:0}",""])},"3156b":function(t,e,a){"use strict";a("163d");var i={name:"SingleSelectItem",props:{item:{type:Object,default:function(){return{id:"",name:""}}},checked:{type:Boolean,default:!1},renderField:{type:String,default:"name"},lineLimit:{type:[Number,String],default:1}},methods:{selectItem:function(t){t.disabled||this.$emit("click",t)}}},n=(a("9788"),a("17cc")),r=Object(n.a)(i,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("van-cell",{staticClass:"single-item",attrs:{clickable:!0},on:{click:function(e){t.selectItem(t.item)}}},[a("span",{class:{"disabled-item":t.item.disabled},style:{"-webkit-line-clamp":"unlimited"===t.lineLimit?"initial":t.lineLimit},domProps:{innerHTML:t._s(t.item[t.renderField])}}),t.checked?a("van-icon",{attrs:{name:"success"}}):t._e()],1)}),[],!1,null,"6920dde7",null);e.a=r.exports},3411:function(t,e,a){"use strict";a("ef1c")},3480:function(t,e,a){"use strict";(function(t){a("5ab2"),a("6d57"),a("e10e");var i=a("28f8"),n=a("e2a7"),r=a("e89f"),s=a("07d2"),o=a("3c64"),c=a("e68e");function l(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,i)}return a}e.a={name:"ProblemBack",components:{Item:s.default,ItemTextarea:o.a,ItemImgList:c.a},mixins:[r.a],props:{},data:function(){return{show:!1,multiple:!1,reasonList:[],reason:{},remark:"",images:[],placeholder:"补充说明",isBack:!1,photoRequest:"",allowSelectAlbum:void 0,allowBuildinAlbum:void 0}},methods:{openPopup:function(e){e.reasonList?this.reasonList=t.clone(e.reasonList):this.reasonList=[{id:1,text:"整改不合格"},{id:2,text:"其它",remarkRequire:!0}],this.isBack=e.isBack||!1,this.reason=t.clone(e.reason)||{},this.images=t.map(e.images,(function(t){return function(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?l(Object(a),!0).forEach((function(e){Object(i.a)(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):l(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}({},t)})),this.remark=e.remark||"",this.placeholder=e.placeholder?e.placeholder:"补充说明",this.multiple=e.multiple,t.isEmpty(e.reasonList)||(this.reasonList=t.clone(e.reasonList)),this.callback=e.callback,this.beforeCallback=e.beforeCallback,this.photoRequest=e.photoRequest||"",e.allowSelectAlbum&&(this.allowSelectAlbum=Boolean(e.allowSelectAlbum)),e.allowBuildinAlbum&&(this.allowBuildinAlbum=Boolean(e.allowBuildinAlbum)),this.value=!0,this.show=!0,this.$emit("open")},closePopup:function(){this.value=!1,this.show=!1,this.$emit("close")},selectItem:function(t){this.multiple?this.$set(t,"checked",!t.checked):this.reason=t},submit:function(){var e=this;if(this.multiple){if(this.reason=t.filter(this.reasonList,{checked:!0}),t.isEmpty(this.remark))return void n.a.alert("补充说明必填")}else{if(t.isUndefined(this.reason.id))return void n.a.alert("请填写退回原因");if(this.reason.remarkRequire&&t.isEmpty(this.remark))return void n.a.alert("补充说明必填");if(this.photoRequest&&t.isEmpty(this.images))return void n.a.alert("请拍摄退回照片")}var a={reason:this.reason,remark:this.remark,images:this.images},i=!this.beforeCallback||this.beforeCallback(a);i&&i.then&&t.isFunction(i.then)?i.then((function(t){!1!==t&&(e.callback&&e.callback(a),e.closePopup())})):!1!==i&&(this.callback&&this.callback(a),this.closePopup())}}}}).call(this,a("391c"))},"3c64":function(t,e,a){"use strict";a("163d");var i={name:"ItemTextarea",components:{},props:{value:{type:String,default:""},placeholder:{type:String,default:""},maxlength:{type:Number,default:200},borderBottom:{type:Boolean,default:!0}},data:function(){return{textareaHeight:40,isLock:!1,blurTime:null}},computed:{lastLength:function(){var t=this.value&&this.value.length||0,e=this.maxlength-t;return e>0?e:0}},mounted:function(){var t=this;this.$nextTick((function(){t.textareaHeight=t.$refs.rule&&t.$refs.rule.offsetHeight||40}))},methods:{onfocus:function(){var t=(new Date).getTime();this.blurTime&&t-this.blurTime<300&&window.cordova&&window.cordova.plugins&&window.cordova.plugins.Keyboard&&(this.$refs.input.blur(),window.cordova.plugins.Keyboard.close()),this.blurTime=null,this.$emit("focus")},onblur:function(){this.blurTime=(new Date).getTime(),this.$emit("blur")},setStatus:function(t){console.log(t),this.isLock=t},oninput:function(t){var e=this;setTimeout((function(){if(!e.isLock){var a=t.target.value;a.length>e.maxlength&&(a=a.substring(0,e.maxlength),e.$refs.input.value=a),e.$refs.rule.innerText=a,e.textareaHeight=e.$refs.rule&&e.$refs.rule.offsetHeight+20,e.$emit("input",a),e.$emit("change",a)}}),0)}}},n=(a("2c76"),a("17cc")),r=Object(n.a)(i,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"item-textarea",class:{"border-bottom":t.borderBottom}},[a("div",{staticClass:"item-textarea-content"},[a("textarea",{ref:"input",style:{height:t.textareaHeight+"px"},attrs:{placeholder:t.placeholder},domProps:{value:t.value},on:{focus:t.onfocus,blur:t.onblur,compositionstart:function(e){t.setStatus(!0)},compositionend:function(e){t.setStatus(!1)},input:t.oninput}}),a("div",{ref:"rule",staticClass:"rule"},[t._v("\n      "+t._s(t.value)+"\n    ")]),t.maxlength!==1/0?a("p",{staticClass:"counter"},[t._v("\n      "+t._s(t.lastLength)+"\n    ")]):t._e()])])}),[],!1,null,null,null);e.a=r.exports},4164:function(t,e,a){"use strict";var i=a("329b"),n=a("e9fe").a,r=(a("6fe3"),a("17cc")),s=Object(r.a)(n,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("transition",{attrs:{name:"slide-right"}},[t.show?a("page-content",{attrs:{mode:"dialog",title:t.title,"on-close":t.close}},[a("scroller",{attrs:{"is-empty":t.isLoading||!t.logs.length}},[t.isLoading?t._e():a("div",{staticClass:"bg-white"},t._l(t.logs,(function(e){return a("div",{key:e.id,staticClass:"item-log border-bottom"},[a("div",{staticClass:"icon-status",class:"icon-status-"+e.statusColor}),a("div",{staticClass:"line-progress"}),a("div",{staticClass:"hd",on:{click:function(a){t.toggleLog(e)}}},[a("div",{staticClass:"title"},[t._v(t._s(e.event))]),a("div",{staticClass:"date"},[t._v(t._s(t._f("formatDate")(e.operation_time,"YYYY-MM-DD HH:mm")))]),a("icon",{staticClass:"icon-toggle",attrs:{name:e.isOpen?"arrow-up":"arrow-down"}})],1),e.isOpen?a("div",{staticClass:"bd"},[a("user-contact",{staticClass:"mt10",attrs:{list:e.user}}),e.images&&e.images.length?a("item-img-list",{staticClass:"mt5",attrs:{editabled:!1},model:{value:e.images,callback:function(a){t.$set(e,"images",a)},expression:"log.images"}}):t._e(),e.oldValue||e.newValue?a("div",{staticClass:"remark mt10"},["修改分数"===e.event?a("span",[t._v("扣分:")]):t._e(),t._v(t._s(e.oldValue)+"\n              "),a("span",{staticClass:"text-change"},[t._v("变更")]),t._v(" "+t._s(e.newValue)+"\n            ")]):t._e(),e.diff.remark||e.diff.desc?a("div",{staticClass:"remark mt10"},[t._v("\n              "+t._s(e.diff.desc||"")+t._s(e.diff.remark?e.diff.desc?"（"+e.diff.remark+"）":e.diff.remark:"")+"\n            ")]):t._e()],1):t._e()])}))),a("loading-status",{attrs:{"is-loading":t.isLoading,"is-empty":!t.logs.length,"empty-text":t.emptyTips}})],1)],1):t._e()],1)}),[],!1,null,"92a9a1d0",null).exports,o=!1;o||(o=new(i.default.extend(s))({el:document.createElement("div")}),document.body.appendChild(o.$el));var c=o,l={name:"BusinessLogs",props:{id:{type:String,default:""},title:{type:String,default:"整改销项日志"}},data:function(){return{}},methods:{showLogs:function(){c.open({id:this.id,title:this.title})}}},p=Object(r.a)(l,(function(){var t=this.$createElement,e=this._self._c||t;return this.$slots.default?e("div",{on:{click:this.showLogs}},[this._t("default")],2):e("div",{staticClass:"header-btn",on:{click:this.showLogs}},[e("icon",{attrs:{name:"logs"}})],1)}),[],!1,null,null,null);e.a=p.exports},"4dee":function(t,e,a){(t.exports=a("690e")(!1)).push([t.i,".zjapp .add-instruction-textarea[data-v-1c92b584] .item-textarea-content textarea{min-height:140px}",""])},5033:function(t,e,a){var i=a("5454");(t.exports=a("690e")(!1)).push([t.i,".zjapp .drawing-con[data-v-fba5990a]{display:flex;flex-direction:column;align-items:center;justify-content:center;height:100%;font-size:0;line-height:0}.zjapp .drawing-con canvas[data-v-fba5990a]{display:block;height:100%;width:100%;background:url("+i(a("eb66"))+") #fff;background-size:4px 4px}.zjapp .loading-text[data-v-fba5990a]{margin-top:15px;color:#aaa}.zjapp .error-text[data-v-fba5990a],.zjapp .loading-text[data-v-fba5990a]{padding:0 15px;line-height:20px;text-align:center;font-size:16px}.zjapp .error-text[data-v-fba5990a]{color:#ff3d3d}",""])},"515e":function(t,e,a){"use strict";var i=a("329b"),n=a("f1e4").a,r=(a("0416"),a("17cc")),s=Object(r.a)(n,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("transition",{attrs:{name:"slide-right"}},[t.show?a("page-content",{class:{"content-not-empty":t.content.length},attrs:{mode:"dialog",title:"检查指引","on-close":t.closePopup}},[!t.isLoading&&t.title?a("div",{staticClass:"check-guide-detail-hd border-bottom"},[a("h2",{staticClass:"check-guide-detail-title pb10"},[t._v(t._s(t.title))])]):t._e(),!t.isLoading&&t.content.length?a("div",{staticClass:"check-guide-detail-content"},t._l(t.content,(function(e,i){return a("p",{key:i},[e.isImg&&e.src?a("img",{class:{"img-not-ready":!e.ready,error:"rejected"===e.status},attrs:{src:t.getThumbnail(e)},on:{error:function(a){t.imgError(e,i)},click:function(a){t.imgClick(e)}}}):t._e(),e.isImg?t._e():a("span",[t._v("\n          "+t._s(e.val)+"\n        ")])])}))):t._e(),a("loading-status",{attrs:{"is-loading":t.isLoading,"is-empty":!t.content.length,"empty-text":"PC端未设置检查指引"}})],1):t._e()],1)}),[],!1,null,"691b2f0f",null).exports,o=!1;o||(o=new(i.default.extend(s))({el:document.createElement("div")}),document.body.appendChild(o.$el));e.a=o},"542f":function(t,e,a){(t.exports=a("690e")(!1)).push([t.i,".zjapp .layout-main[data-v-29e0b631] .layout-content{overflow:auto}[data-v-29e0b631] .item .icon{color:#4275e8}.zjapp .item-con[data-v-29e0b631] .item-img-list{margin-top:-8px}",""])},5685:function(t,e,a){"use strict";(function(t){var i=a("162a"),n=a("6144"),r=a("9cd1"),s=a("da2f"),o=a("c77f");function c(t,e){return t?(t-e)/t*100:0}var l={getProcessCheckNewBuilding:function(t){var e=n.a.getString("reportDateType",n.a.level.user)||"month";return Object(s.d)({proj_id:t,query_type:e})},getProjTotalData:function(){return i.a.request("/report/project-over-view")},getDailyCheckData:function(t,e,a,n,r){var s={proj_id:t,bidsection_id:e,begin_date:a,end_date:n};return r&&(s.module=r),i.a.request("/report/check",s)},getReportCheckList:function(t){return i.a.request("/report/check-batch-problem-list",{batch_id:t.batchId,begin_date:t.dateStart,end_date:t.dateEnd})},getReportCheckTimeoutList:function(t,e,a){return i.a.request("/report/get-over-due-check",{proj_id:t,key:e,page:a,pageSize:15})},getOverDueCheckConfig:function(t){return i.a.request("/report/get-over-due-check-config",{proj_id:t})},getReportCheckDetail:function(t){return i.a.request("/report/check-batch-problem-detail",{id:t})},postReportCheckUpdate:function(t){return i.a.post("/checkquality-comment/upload",{},t)},postReportCheckSendBack:function(t){return i.a.post("/checkquality-comment/send-back",{},t)},measureProjectData:[],waterPercolationData:[],getMeasureData:function(e){return i.a.request("/report/measure",{proj_id:e}).then((function(e){return t.each(e,(function(e){e.repair_data={measurement_points_num:0,problem_points_num:0,checkitem_num:0,passport:0},e.supervision_data={measurement_points_num:0,problem_points_num:0,checkitem_num:0,passport:0},e.construct_data={measurement_points_num:0,problem_points_num:0,checkitem_num:0,passport:0},t.each(e.buildings,(function(a){a.repair_data={measurement_points_num:0,problem_points_num:0,checkitem_num:0,passport:0},a.supervision_data={measurement_points_num:0,problem_points_num:0,checkitem_num:0,passport:0},a.construct_data={measurement_points_num:0,problem_points_num:0,checkitem_num:0,passport:0},t.each(a.check_items,(function(i){i.repair_data={measurement_points_num:0,problem_points_num:0,checkitem_num:0,passport:0},i.supervision_data={measurement_points_num:0,problem_points_num:0,checkitem_num:0,passport:0},i.construct_data={measurement_points_num:0,problem_points_num:0,checkitem_num:0,passport:0},t.each(i.children,(function(n){e.repair_data.measurement_points_num+=n.measure_data[0].measurement_points,e.repair_data.problem_points_num+=n.measure_data[0].problem_points,e.repair_data.checkitem_num+=n.measure_data[0].measurement_points?1:0,e.supervision_data.measurement_points_num+=n.measure_data[1].measurement_points,e.supervision_data.problem_points_num+=n.measure_data[1].problem_points,e.supervision_data.checkitem_num+=n.measure_data[1].measurement_points?1:0,e.construct_data.measurement_points_num+=n.measure_data[2].measurement_points,e.construct_data.problem_points_num+=n.measure_data[2].problem_points,e.construct_data.checkitem_num+=n.measure_data[2].measurement_points?1:0,a.repair_data.measurement_points_num+=n.measure_data[0].measurement_points,a.repair_data.problem_points_num+=n.measure_data[0].problem_points,a.repair_data.checkitem_num+=n.measure_data[0].measurement_points?1:0,a.supervision_data.measurement_points_num+=n.measure_data[1].measurement_points,a.supervision_data.problem_points_num+=n.measure_data[1].problem_points,a.supervision_data.checkitem_num+=n.measure_data[1].measurement_points?1:0,a.construct_data.measurement_points_num+=n.measure_data[2].measurement_points,a.construct_data.problem_points_num+=n.measure_data[2].problem_points,a.construct_data.checkitem_num+=n.measure_data[2].measurement_points?1:0,i.repair_data.measurement_points_num+=n.measure_data[0].measurement_points,i.repair_data.problem_points_num+=n.measure_data[0].problem_points,i.repair_data.checkitem_num+=n.measure_data[0].measurement_points?1:0,i.supervision_data.measurement_points_num+=n.measure_data[1].measurement_points,i.supervision_data.problem_points_num+=n.measure_data[1].problem_points,i.supervision_data.checkitem_num+=n.measure_data[1].measurement_points?1:0,i.construct_data.measurement_points_num+=n.measure_data[2].measurement_points,i.construct_data.problem_points_num+=n.measure_data[2].problem_points,i.construct_data.checkitem_num+=n.measure_data[2].measurement_points?1:0,t.each(n.measure_data,(function(t){t.measurement_points?t.passport=(t.measurement_points-t.problem_points)/t.measurement_points*100:t.passport=0}))})),i.repair_data.passport=c(i.repair_data.measurement_points_num,i.repair_data.problem_points_num),i.supervision_data.passport=c(i.supervision_data.measurement_points_num,i.supervision_data.problem_points_num),i.construct_data.passport=c(i.construct_data.measurement_points_num,i.construct_data.problem_points_num)})),a.repair_data.passport=c(a.repair_data.measurement_points_num,a.repair_data.problem_points_num),a.supervision_data.passport=c(a.supervision_data.measurement_points_num,a.supervision_data.problem_points_num),a.construct_data.passport=c(a.construct_data.measurement_points_num,a.construct_data.problem_points_num)})),e.repair_data.passport=c(e.repair_data.measurement_points_num,e.repair_data.problem_points_num),e.supervision_data.passport=c(e.supervision_data.measurement_points_num,e.supervision_data.problem_points_num),e.construct_data.passport=c(e.construct_data.measurement_points_num,e.construct_data.problem_points_num)})),e}))},measureBuildData:{},setMeasureBuildData:function(t){l.measureBuildData=t},getMeasureBuildData:function(e){return t.isEmpty(l.measureBuildData)?l.getMeasureData(e).then((function(t){return t[0]})):Promise.resolve(l.measureBuildData)},getCheckAcceptData:function(t){return i.a.request("/report/check-accept",{proj_id:t})},getCheckAcceptDataOfBuilding:function(t,e,a){return i.a.request("/report/check-accept-detail",{section_id:t,building_id:e,unit:a||""})},getProcessCheckData:function(t,e){return i.a.request("/report/processcheck",{building_id:t,unit:e})},getProcessCheckData2:function(t){return Object(s.g)({building_id:t})},getMaterialData:function(t,e,a){return i.a.request("/report/material",{proj_id:t,begin_date:e,end_date:a})},getProcessAcceptBuilding:function(t){var e=n.a.getString("reportDateType",n.a.level.user)||"month";return Object(o.m)({proj_id:t,query_type:e})},getWaterPercolation:function(t){return i.a.request("/report/close-water-test",{proj_id:t})},getProcessAcceptData:function(t,e,a,i){return Object(o.n)({building_id:t,unit:e,start:a||"",end:i||""})},getProcessAcceptPileItem:function(t){return i.a.request("/report/get-pile-check-items",{bidsection_id:t})},getProcessAcceptPileData:function(t,e){return i.a.request("/report/process-accept-with-pile",{building_id:t,item_id:e})},getMeasureCheckedData:function(){return i.a.request("/report/leader-measure")},getSchedulePlanData:function(){return Object(r.i)()},getSchedulePlanProjectData:function(t){return Object(r.a)({proj_id:t})},getCheckProblemStatisticsData:function(t){return i.a.request("/report/leader-secure",t)},getProcessCheckStatisticsData:function(){return Object(s.k)()},schedulePlanNodeList:function(t){return Object(r.e)({plan_id:t})}};e.a=l}).call(this,a("391c"))},"574c":function(t,e,a){(t.exports=a("690e")(!1)).push([t.i,".zjapp .item-textarea{background-color:#fff;padding:5px 15px}.zjapp .item-textarea-content{position:relative}.zjapp .item-textarea .rule,.zjapp .item-textarea textarea{width:100%;min-height:40px;line-height:20px;font-size:16px;padding:0;border:none}.zjapp .item-textarea .rule{position:absolute;top:0;left:0;visibility:hidden;word-break:break-all}.zjapp .item-textarea .counter{text-align:right;margin:0 0 -5px 0;height:15px;line-height:15px;color:#b2b2b2;font-size:12px}",""])},"5a71":function(t,e,a){"use strict";var i=a("29be").a,n=a("17cc"),r=Object(n.a)(i,(function(){var t=this,e=t.$createElement;return(t._self._c||e)("item",{class:t.required,attrs:{label:t.title,text:t.value&&t.value.id?t.value.name:"view"===t.mode?"无":"",mode:t.mode,editabled:t.editabled,placeholder:t.required?t.placeholder||"请选择":"选填","form-check":t.formCheck,border:t.border},on:{click:t.openSelect}})}),[],!1,null,null,null);e.a=r.exports},6807:function(t,e,a){"use strict";var i=a("c65d").a,n=(a("6d82"),a("17cc")),r=Object(n.a)(i,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.isEmpty?t._e():a("div",{staticClass:"app-voice-play"},[a("div",{staticClass:"play-main"},[a("div",{staticClass:"play-btn"},["start"===t.isPlay?a("div",{staticClass:"play-btn_style play-btn_start",on:{click:t.startPlay}},[a("i",{staticClass:"start-icon"})]):t._e(),"middle"===t.isPlay?a("div",{staticClass:"play-btn_style play-btn_middle",on:{click:t.pausePlay}},[a("i"),a("i")]):t._e(),"loading"===t.isPlay?a("div",{staticClass:"play-btn_style play-btn_loadding",on:{click:t.loadingPlay}},[a("van-loading",{staticClass:"loading-icon",attrs:{type:"spinner",color:"#ffffff",size:"16"}})],1):t._e()]),a("div",{staticClass:"play-progress"},[a("i",{staticClass:"play-progress_spot"}),a("i",{staticClass:"play-progress_solidLine"}),a("div",{staticClass:"play-progress_layer"},[a("van-slider",{staticClass:"play-progress_slider",class:{"disabled-animation":t.startDrap},attrs:{"active-color":"#4275e8","inactive-color":"#F6F6F6",disabled:t.disabled},on:{input:t.dragInput,"drag-start":t.dragStart,"drag-end":t.dragEnd},model:{value:t.progress,callback:function(e){t.progress=e},expression:"progress"}},[a("template",{slot:"button"},[a("div",{staticClass:"play-progress_btn"},[t._v(t._s(t.seekText)),a("span",[t._v("/")]),t._v(t._s(t.duration))])])],2)],1),a("i",{staticClass:"play-progress_dotted"})]),t.isDelete?a("div",{staticClass:"play-delete"},[a("icon",{staticClass:"delete-icon",attrs:{name:"delete"},on:{click:t.deleteVoive}})],1):t._e()]),t.isText?a("div",{staticClass:"play-text"},[a("div",[t._v(t._s(t.text))])]):t._e()])}),[],!1,null,"d51aec2c",null);e.a=r.exports},"6d82":function(t,e,a){"use strict";a("b26b")},"6fe3":function(t,e,a){"use strict";a("1bb9")},7434:function(t,e,a){var i=a("0cb6");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);(0,a("85cb").default)("f6a1180a",i,!0,{sourceMap:!1,shadowMode:!1})},"75ca":function(t,e,a){"use strict";var i=a("329b"),n=a("3480").a,r=(a("d6fa"),a("17cc")),s=Object(r.a)(n,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("transition",{attrs:{name:"slide-right"}},[t.show?a("page-content",{attrs:{mode:"dialog",title:(t.multiple?"":"选择")+"退回原因","on-close":t.closePopup}},[t.multiple?t._e():a("div",[a("div",{staticClass:"list"},t._l(t.reasonList,(function(e,i){return a("item",{key:i,attrs:{mode:"edit","icon-right":e.id===t.reason.id?"qualified":"","icon-right-color":"color-theme"},on:{click:function(a){t.selectItem(e)}}},[a("div",{staticClass:"item-text"},[t._v("\n            "+t._s(e.text)+"\n          ")])])}))),a("item-textarea",{staticClass:"mt10",attrs:{placeholder:t.placeholder},model:{value:t.remark,callback:function(e){t.remark=e},expression:"remark"}}),a("item",{staticClass:"p15"},[a("item-img-list",{attrs:{maxlength:15,"allow-select-album":t.allowSelectAlbum,"allow-buildin-album":t.allowBuildinAlbum},model:{value:t.images,callback:function(e){t.images=e},expression:"images"}})],1),a("app-button-group",[a("app-button",{on:{click:t.submit}},[t._v("提交")])],1)],1),t.multiple?a("div",[a("div",{staticClass:"list"},t._l(t.reasonList,(function(e,i){return a("item",{key:i,attrs:{mode:"edit","icon-back":t.isBack,"icon-left":e.checked?"qualified":""},on:{click:function(a){t.selectItem(e)}}},[a("div",{staticClass:"item-text"},[t._v("\n            "+t._s(e.text)+"\n          ")])])}))),a("div",{staticClass:"list mt10"},[a("item",{staticClass:"p15"},[a("item-img-list",{attrs:{maxlength:15,"allow-select-album":t.allowSelectAlbum,"allow-buildin-album":t.allowBuildinAlbum},model:{value:t.images,callback:function(e){t.images=e},expression:"images"}})],1),a("item-textarea",{staticClass:"mt10",attrs:{placeholder:t.placeholder},model:{value:t.remark,callback:function(e){t.remark=e},expression:"remark"}})],1),a("app-button-group",[a("app-button",{on:{click:t.submit}},[t._v("确认退回")])],1)],1):t._e()]):t._e()],1)}),[],!1,null,"29e0b631",null).exports,o=!1;o||(o=new(i.default.extend(s))({el:document.createElement("div")}),document.body.appendChild(o.$el));e.a=o},"771c":function(t,e,a){(t.exports=a("690e")(!1)).push([t.i,".zjapp .content-not-empty[data-v-691b2f0f] .layout-content{display:auto;overflow:auto;padding-bottom:100px}.zjapp .check-guide-detail-hd[data-v-691b2f0f]{margin-left:30px;padding:25px 30px 5px 0}.zjapp .check-guide-detail-title[data-v-691b2f0f]{margin:0;line-height:20px;font-size:18px;color:#111;font-weight:700;word-break:break-all}.zjapp .check-guide-detail-info[data-v-691b2f0f]{line-height:20px;font-size:14px;color:#8c8c8c}.zjapp .check-guide-detail-content[data-v-691b2f0f]{padding:30px;line-height:30px;color:#333;font-size:16px}.zjapp .check-guide-detail-content p[data-v-691b2f0f]{margin-bottom:30px;min-height:1em}.zjapp .check-guide-detail-content img[data-v-691b2f0f]{max-width:100%}.zjapp .check-guide-detail-content .img-not-ready[data-v-691b2f0f]{width:80px;height:auto}.zjapp .error[data-v-691b2f0f]{max-width:50%}",""])},"81f2":function(t,e,a){(t.exports=a("690e")(!1)).push([t.i,'.zjapp .main[data-v-2cac8864]{position:fixed;width:100%;bottom:0}.zjapp .arrow[data-v-2cac8864]{position:absolute;top:-7px;right:18px;width:0;height:0;border-bottom:7px solid #fff;border-right:7px solid transparent;border-left:7px solid transparent}.zjapp .content[data-v-2cac8864]{position:absolute;top:0;left:0;width:100%;height:100%;background-color:rgba(0,0,0,.4);overflow:hidden}.zjapp .box[data-v-2cac8864]{display:flex;flex-direction:column;background-color:#fff;overflow:auto}.zjapp .box-single[data-v-2cac8864]{display:flex;flex-direction:column;flex:1}.zjapp .detail-hd[data-v-2cac8864]{display:flex;padding:6px 15px}.zjapp .detail-arrow-right[data-v-2cac8864]{width:13px;height:34px;overflow:hidden}.zjapp .detail-arrow-right[data-v-2cac8864]:before{display:block;content:"";width:0;height:0;margin-top:12px;border:5px solid transparent;border-left:5px solid #c8c8c8}.zjapp .detail-arrow-down[data-v-2cac8864]{width:13px;height:34px;overflow:hidden}.zjapp .detail-arrow-down[data-v-2cac8864]:before{display:block;content:"";width:0;height:0;margin-top:15px;border:5px solid transparent;border-top:5px solid #c8c8c8}.zjapp .detail-title[data-v-2cac8864]{flex:1;line-height:34px;color:#111;font-size:16px}.zjapp .detail-bd[data-v-2cac8864]{padding:8px 15px 8px 35px;background-color:#fafafa}.zjapp .text-line[data-v-2cac8864]{font-size:14px;color:#666;line-height:30px;margin-bottom:30px}.zjapp .detail-hd-single[data-v-2cac8864]{padding:6px 0;margin:0 15px}.zjapp .detail-bd-single[data-v-2cac8864]{display:flex;flex-direction:column;flex:1;padding:8px 15px;background-color:#fff}',""])},8386:function(t,e,a){"use strict";a("e617")},"8f4a":function(t,e,a){"use strict";(function(t){a("6d57"),a("06a2"),a("6a61");var i,n=a("2e91"),r=(a("cc57"),a("f369")),s=a("4164"),o=a("da1c"),c=a("07d2"),l=a("e68e"),p=a("3c64"),u=a("5a71"),d=a("cd05"),h=a("6807"),m=a("6bf2"),f=a.n(m),g=a("e2a7"),b=a("3bd5"),v=a("b6da"),_=a("9864"),x=a("75ca"),y=a("6f9e"),k=a("5685"),w=a("a590"),j=a("162a"),D=a("1b7e");e.a={name:"ReportCheckProjectDetail",components:{CheckGuide:r.a,BusinessLogs:s.a,ProblemDetailHeader:o.a,Item:c.default,ItemImgList:l.a,ItemTextarea:p.a,SingleSelect:u.a,UserSelect:d.a,CheckUserContact:_.a,AppVoicePlay:h.a},data:function(){return{isLoading:!0,user:b.a.getUser(),problemData:{checkItem:{}},repairOptions:[],reinspectOptions:[],contractorOptions:[],ccOptions:[],allowChangeRepair:!1,allowChangeCC:!1,allowRepair:!1,allowChangeContractor:!1,allowChangeReinspect:!1,allowReinspectReject:!1,allowReinspectPass:!1,allowChangeRepairDeadline:!1}},computed:{problemId:function(){return this.$route.params.id||""}},created:function(){var t=this;Object(y.d)((function(e){e.id===t.problemData.id&&t.loadData()}))},activated:function(){this.user=b.a.getUser(),this.$router.isBack||this.loadData()},methods:{fomatDate:function(t){return f()(t).format("YYYY-MM-DD HH:mm")},loadData:function(){var e=this;if(!t.isEmpty(this.problemId))return this.isLoading=!0,D.a.getHasNetwork().then((function(a){if(a)return k.a.getReportCheckDetail(e.problemId).then((function(a){e.problemData={id:a.id,status:a.status,status_text:a.status,proj_id:a.proj_id,proj_name:a.proj_name,bidsection_id:a.bidsection_id,bidsection_name:a.bidsection_name,place:{full_name:a.place.full_name},batch_id:a.batch_id,checkItem:{id:a.item_id,name:a.item_name,full_name:a.item_full_name},description:{id:a.desc_id,name:a.desc||a.desc_name},image_file:a.image_file||[],remark:a.remark,repair_requirements:a.repair_requirements,level:a.emergency_degree||"一般",deadline:a.deadline||7,regist:a.regist,regist_date:a.regist_date,sent_back:{id:a.sent_back.id,name:a.sent_back.name,mobile:a.sent_back.mobile},sent_back_date:a.sent_back_date,sent_back_times:a.sent_back_times,sent_back_remark:a.sent_back_remark,sent_back_image_file:a.sent_back_image_file||[],repair:a.repair,repair_remark:a.repair_remark,repair_set:a.repair_set,repair_deadline:f()(a.repair_deadline).format("YYYY-MM-DD"),repair_date:a.repair_date,repair_image_file:a.repair_image_file||[],contractor:{id:a.contractor_id,name:a.contractor_name},cc_set:a.cc_set_array,cc_set_all_id_array:a.cc_set_all_id_array,reinspect:a.reinspect,reinspectBy:a.reinspectBy,reinspect_set:a.reinspect_set,reinspect_complete_date:a.reinspect_complete_date?f()(a.reinspect_complete_date).format("YYYY-MM-DD HH:mm"):"",close_date:a.close_date?f()(a.close_date).format("YYYY-MM-DD HH:mm"):"",close_reason:a.close_reason,created_by:a.created_by,place_point:"string"==typeof a.problem_values?JSON.parse(a.problem_values):[],room_id:a.room_id,drawing_file:a.drawing_file||[],has_read:a.has_read,leaderComments:t.map(a.comment,(function(t){return t.image_file="string"==typeof t.image_file?JSON.parse(t.image_file):[],t.comment_on=f()(t.comment_on).format("YYYY-MM-DD HH:mm"),t}))||[],voice_file:JSON.parse(a.voice_file||"[]")},e.isLoading=!1})).catch((function(){g.a.alert("现场检查查询数据失败 ",error)}));g.a.alert("当前网络无法同步数据")})).catch((function(){g.a.alert("当前网络无法同步数据")}))},showHuxingMark:(i=Object(n.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.isEmpty(this.problemData.drawing_file)){e.next=7;break}return e.next=3,Promise.resolve().then(a.bind(null,"06f6"));case 3:e.sent.default.getRoomTypeDiagram(this.problemData.room_id).then((function(t){v.a.openPopup({mode:"view",url:t.url,points:this.problemData.place_point})})),e.next=8;break;case 7:v.a.openPopup({mode:"view",url:this.problemData.drawing_file[0]?this.problemData.drawing_file[0].url:"",points:this.problemData.place_point});case 8:case"end":return e.stop()}}),e,this)}))),function(){return i.apply(this,arguments)}),addNote:function(){w.a.openPopup({addNoteCallback:this.addNoteCallback})},addNoteCallback:function(e){var a=this,i=[];if(!t.isEmpty(e.remark)){var n=[];return t.each(e.image_file,(function(t){var e;t.url?i.push({url:t.url}):(e=j.a.uploadFile(t.temp).then((function(t){i.push({url:t})})),n.push(e))})),D.a.getHasNetwork().then((function(t){return t?Promise.all(n).then((function(){var t={module:"check",checkquality_problem_id:a.problemData.id,proj_id:a.problemData.proj_id,content:e.remark,image_file:JSON.stringify(i)};return k.a.postReportCheckUpdate(t)})).catch((function(t){g.a.alert(t)})).finally((function(){w.a.closePopup(),a.loadData(a.$route.params.id)})):(g.a.alert("当前网络无法同步数据"),!1)})).catch((function(){g.a.alert("当前网络无法同步数据")}))}g.a.alert("请添加批示内容")},back:function(){var e=this;x.a.openPopup({allowSelectAlbum:!0,allowBuildinAlbum:!0,callback:function(a){if(a.reason.id){if(2!==a.reason.id||a.remark){var i=[],n=[];return t.each(a.images,(function(t){var e;t.url?i.push({url:t.url}):(e=j.a.uploadFile(t.temp).then((function(t){i.push({url:t})})),n.push(e))})),D.a.getHasNetwork().then((function(t){return t?Promise.all(n).then((function(){var t=2===a.reason.id?a.remark:a.reason.text,n={checkquality_problem_id:e.problemData.id,proj_id:e.problemData.proj_id,sent_back_remark:t,sent_back_image_file:JSON.stringify(i)};return k.a.postReportCheckSendBack(n)})).catch((function(t){g.a.alert(t)})).finally((function(){w.a.closePopup(),e.loadData(e.$route.params.id)})):(g.a.alert("当前网络无法同步数据"),!1)})).catch((function(){g.a.alert("当前网络无法同步数据")}))}g.a.alert("补充说明不能为空")}else g.a.alert("请选择退回原因")}})}}}}).call(this,a("391c"))},9120:function(t,e,a){var i=a("2ddb");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);(0,a("85cb").default)("cb55f532",i,!0,{sourceMap:!1,shadowMode:!1})},"91c1":function(t,e,a){"use strict";(function(t){a("5ab2"),a("6d57"),a("e10e"),a("9a33");var i=a("28f8"),n=a("e68e"),r=a("6f9e"),s=a("bcc7"),o=a("e89f");function c(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,i)}return a}function l(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?c(Object(a),!0).forEach((function(e){Object(i.a)(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):c(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}e.a={name:"CheckGuideDetailDrop",components:{ItemImgList:n.a},mixins:[o.a],data:function(){return{show:!1,showList:!1,isLoading:!1,isOpening:!1,isClosing:!1,contentTop:64,listHeight:510,module:"",itemIds:[],data:[],target:""}},watch:{show:function(t){var e=this;t&&this.$nextTick((function(){e.showList=!0}))}},created:function(){r.a.$on("routerBeforeEach",this.closePopup),r.a.$on("pageContentClick",this.onClickOther)},destroyed:function(){r.a.$off("routerBeforeEach",this.closePopup),r.a.$off("pageContentClick",this.onClickOther)},methods:{openPopup:function(e){this.show=!0,this.$emit("open"),this.module=e.module,this.itemIds=e.itemIds,this.options=e.options;var a=document.querySelector(".layout-main .layout-header");if(this.contentTop=a.offsetHeight,e.el){var i=e.el.getBoundingClientRect();this.contentTop=i.bottom}this.target=e.el,this.listHeight=t.minBy([window.innerHeight-this.contentTop-50,510]),this.getData()},closePopup:function(){var t=this;if(!this.isOpening)return this.showList=!1,this.$emit("close"),new Promise((function(e){t.$on("afterClosePopup",e)}))},afterClose:function(){this.show=!1,this.isClosing=!1,this.$emit("afterClosePopup")},onClickOther:function(t){t&&t.target&&t.target!==this.target&&this.show&&this.closePopup()},getData:function(){var e=this;return this.options&&this.options.length?(this.data=t.map(this.options,(function(t){return l(l({},t),{},{isOpen:!1})})),Promise.resolve()):s.a.getMeasureCheckItem(this.itemIds).then((function(a){e.data=t.map(a,(function(e){var a=e.content?e.content.trim():"",i=a?a.split("\n"):[],n=e.content_image?JSON.parse(e.content_image):[],r=t.filter(i,(function(t){return!/<img([\s\S]*)>/gm.test(t)}));return t.each(n,(function(t){t.url=t.url.split("@")[0]})),{id:e.id,name:e.full_name,textArr:r,contentImage:n,isOpen:!1}}))})).catch((function(t){console.error(t)}))},toggleItem:function(t){this.data.length>1&&this.$set(t,"isOpen",!t.isOpen)}}}}).call(this,a("391c"))},9446:function(t,e,a){var i=a("2dd6");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);(0,a("85cb").default)("2192cd00",i,!0,{sourceMap:!1,shadowMode:!1})},9788:function(t,e,a){"use strict";a("9446")},"9ab7":function(t,e,a){var i=a("542f");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);(0,a("85cb").default)("8c69df94",i,!0,{sourceMap:!1,shadowMode:!1})},"9b15":function(t,e,a){"use strict";a.r(e);var i=a("8f4a").a,n=(a("9e78"),a("17cc")),r=Object(n.a)(i,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("page-content",{attrs:{title:"问题详情","show-go-root":"Report"}},[a("template",{slot:"header-bar-right"},[t.isLoading?t._e():a("business-logs",{attrs:{id:t.problemData.id}}),a("check-guide",{attrs:{"item-id":t.problemData.checkItem.id}})],1),t.isLoading?t._e():a("problem-detail-header",{attrs:{status:t.problemData.status,"status-text":t.problemData.status_text,level:t.problemData.level,"is-timeout":t.problemData.is_timeout,"sent-back-times":t.problemData.sent_back_times}}),t.isLoading?t._e():a("div",{staticClass:"page-scroll"},[a("div",{staticClass:"list mb10"},[a("item",{attrs:{label:"标段",text:t.problemData.bidsection_name+"（"+t.problemData.proj_name+"）"}}),t.problemData.place&&t.problemData.place.full_name?a("item",{attrs:{label:"部位"}},[a("div",{staticClass:"item-text",attrs:{slot:"right"},slot:"right"},[t._v("\n          "+t._s(t.problemData.place.full_name)+"\n          "),t.problemData.place_point.length?a("span",{staticClass:"icon-huxing-mark ml10",on:{click:t.showHuxingMark}},[t._v("图")]):t._e()])]):t._e(),a("item",{attrs:{label:"检查项",text:t.problemData.checkItem.full_name}}),t.problemData.description.name?a("item",{attrs:{label:"描述",text:t.problemData.description.name}}):t._e(),t.problemData.remark||t.problemData.voice_file&&t.problemData.voice_file.length?a("item",{attrs:{label:"补充说明"}},[a("div",{staticClass:"item-text",attrs:{slot:"right"},slot:"right"},[a("p",[t._v(t._s(t.problemData.remark||""))]),a("app-voice-play",{attrs:{value:t.problemData.voice_file,"is-text":!0}})],1)]):t._e(),t.problemData.image_file&&t.problemData.image_file.length?a("item",{attrs:{label:"问题照片"}},[a("div",{staticClass:"item-con",attrs:{slot:"right"},slot:"right"},[a("item-img-list",{attrs:{"online-mode":!0,editabled:!1},model:{value:t.problemData.image_file,callback:function(e){t.$set(t.problemData,"image_file",e)},expression:"problemData.image_file"}})],1)]):t._e(),a("user-select",{attrs:{title:"提交人",date:t._f("formatDate")(t.problemData.regist_date),mode:"view",editabled:!1},model:{value:t.problemData.regist,callback:function(e){t.$set(t.problemData,"regist",e)},expression:"problemData.regist"}}),a("item",{attrs:{label:"整改期限",text:t.problemData.repair_deadline,editabled:t.allowChangeRepairDeadline}}),a("item",{attrs:{label:"整改要求",text:t.problemData.repair_requirements}}),t.problemData.repair_set&&t.problemData.repair_set.id?t._e():a("user-select",{attrs:{options:t.repairOptions,title:"整改人",date:t._f("formatDate")(t.problemData.repair_date),mode:"view",editabled:t.allowChangeRepair,"is-read":t.problemData.repair.id===t.user.user_id?"":1===t.problemData.has_read||0!==t.problemData.has_read&&""},model:{value:t.problemData.repair,callback:function(e){t.$set(t.problemData,"repair",e)},expression:"problemData.repair"}}),t.problemData.repair_set&&t.problemData.repair_set.id?a("user-select",{attrs:{options:t.repairOptions,title:"整改人",date:t._f("formatDate")(t.problemData.repair_date),mode:"view",editabled:t.allowChangeRepair,"is-read":t.problemData.repair_set.id===t.user.user_id?"":1===t.problemData.has_read||0!==t.problemData.has_read&&""},model:{value:t.problemData.repair_set,callback:function(e){t.$set(t.problemData,"repair_set",e)},expression:"problemData.repair_set"}}):t._e(),t.problemData.repair_image_file&&t.problemData.repair_image_file.length>0||t.allowRepair?a("item",{attrs:{label:"整改照片"}},[a("div",{staticClass:"item-text",attrs:{slot:"right"},slot:"right"},[t.problemData.repair_remark&&!t.allowRepair?a("p",{staticClass:"mb10"},[t._v("\n            "+t._s(t.problemData.repair_remark)+"\n          ")]):t._e(),a("item-img-list",{attrs:{"online-mode":!0,editabled:t.allowRepair,maxlength:15},model:{value:t.problemData.repair_image_file,callback:function(e){t.$set(t.problemData,"repair_image_file",e)},expression:"problemData.repair_image_file"}})],1)]):t._e(),t.problemData.repair_image_file.length||!t.problemData.repair_remark||t.allowRepair?t._e():a("item",{attrs:{label:"整改补充说明",text:t.problemData.repair_remark}}),t.allowRepair?a("item-textarea",{staticClass:"border-tb",attrs:{placeholder:"整改补充说明"},model:{value:t.problemData.repair_remark,callback:function(e){t.$set(t.problemData,"repair_remark",e)},expression:"problemData.repair_remark"}}):t._e(),t.allowChangeReinspect?a("user-select",{attrs:{options:t.reinspectOptions,multi:!0,title:"复验人",mode:"view",editabled:t.allowChangeReinspect,max:4,"max-tip":"最多4个复验人"},model:{value:t.problemData.reinspect_set,callback:function(e){t.$set(t.problemData,"reinspect_set",e)},expression:"problemData.reinspect_set"}}):t._e(),t.allowChangeReinspect?t._e():t._l(t.problemData.reinspectBy,(function(e,i){return a("div",{key:i},[a("user-select",{attrs:{value:e,title:"复验人",date:e.reinspect_date?t.fomatDate(e.reinspect_date):"",mode:"view",editabled:!1,note:!e.reinspect_date&&t.problemData.reinspectBy.length>1?"尚未复验":""}}),(e.reinspect_remark||e.reinspect_image_file.length>0)&&e.reinspect_date?a("item",[a("div",{staticClass:"item-label"}),a("div",{staticClass:"item-con"},[e.reinspect_remark?a("p",[t._v(t._s(e.reinspect_remark))]):t._e(),e.reinspect_image_file.length>0?a("item-img-list",{attrs:{"online-mode":!0,editabled:!1},model:{value:e.reinspect_image_file,callback:function(a){t.$set(e,"reinspect_image_file",a)},expression:"reinspect.reinspect_image_file"}}):t._e()],1)]):t._e()],1)})),t.allowReinspectPass?a("item",{attrs:{label:"复验照片"}},[a("div",{staticClass:"item-con",attrs:{slot:"right"},slot:"right"},[a("item-img-list",{attrs:{"online-mode":!0,maxlength:15},model:{value:t.problemData.currentReinspectBy.reinspect_image_file,callback:function(e){t.$set(t.problemData.currentReinspectBy,"reinspect_image_file",e)},expression:"problemData.currentReinspectBy.reinspect_image_file"}})],1)]):t._e(),t.allowReinspectPass?a("item-textarea",{staticClass:"border-tb",attrs:{placeholder:"复验补充说明（选填）"},model:{value:t.problemData.currentReinspectBy.reinspect_remark,callback:function(e){t.$set(t.problemData.currentReinspectBy,"reinspect_remark",e)},expression:"problemData.currentReinspectBy.reinspect_remark"}}):t._e(),t.problemData.sent_back_remark?a("item",{attrs:{label:"退回原因"}},[a("div",{staticClass:"item-text",attrs:{slot:"right"},slot:"right"},[a("p",{class:{pb10:t.problemData.sent_back_image_file.length}},[t._v("\n            "+t._s(t.problemData.sent_back_remark)+"\n          ")]),t.problemData.sent_back_image_file.length?a("item-img-list",{attrs:{"online-mode":!0,editabled:!1},model:{value:t.problemData.sent_back_image_file,callback:function(e){t.$set(t.problemData,"sent_back_image_file",e)},expression:"problemData.sent_back_image_file"}}):t._e()],1)]):t._e(),a("user-select",{attrs:{options:t.ccOptions,title:"抄送人",multi:!0,mode:"view",editabled:t.allowChangeCC},model:{value:t.problemData.cc_set,callback:function(e){t.$set(t.problemData,"cc_set",e)},expression:"problemData.cc_set"}}),a("single-select",{attrs:{options:t.contractorOptions,"if-toggle":!0,title:"责任单位",mode:"view",editabled:t.allowChangeContractor},model:{value:t.problemData.contractor,callback:function(e){t.$set(t.problemData,"contractor",e)},expression:"problemData.contractor"}}),t.problemData.close_date?a("item",{attrs:{label:"关闭时间",text:t.problemData.close_date}}):t._e(),t.problemData.close_reason?a("item",{attrs:{label:"关闭原因",text:t.problemData.close_reason}}):t._e(),t.problemData.leaderComments&&t.problemData.leaderComments.length>0?[a("item",{attrs:{label:"批示"}},[a("div",{staticClass:"item-text leader-comment",attrs:{slot:"right"},slot:"right"},t._l(t.problemData.leaderComments,(function(e,i){return a("div",{key:i,staticClass:"comment-item"},[a("check-user-contact",{attrs:{list:[e.user]}}),a("p",{staticClass:"comment-time"},[t._v(t._s(e.comment_on))]),e.content?a("p",[t._v(t._s(e.content))]):t._e(),e.image_file&&e.image_file.length?[a("item-img-list",{attrs:{"online-mode":!0,editabled:!1},model:{value:e.image_file,callback:function(a){t.$set(e,"image_file",a)},expression:"leaderComment.image_file"}})]:t._e()],2)})))])]:t._e()],2),a("app-button-group",{attrs:{direction:"column"}},[t.$store.state.global.isLeader?a("app-button",{directives:[{name:"track",rawName:"v-track",value:"报表-现场检查问题详情-添加批示",expression:"'报表-现场检查问题详情-添加批示'"}],on:{click:t.addNote}},[t._v("添加批示")]):t._e(),"待复验"===t.problemData.status&&t.$store.state.global.isLeader?a("app-button",{attrs:{type:"warning",plain:"",rimless:""},on:{click:t.back}},[t._v("退回")]):t._e()],1)],1),a("loading-status",{attrs:{"is-loading":t.isLoading,"is-empty":!t.problemData.id,type:"report","empty-text":"加载问题失败"}})],2)}),[],!1,null,"77dc232d",null);e.default=r.exports},"9cd1":function(t,e,a){"use strict";a.d(e,"h",(function(){return s})),a.d(e,"m",(function(){return o})),a.d(e,"g",(function(){return c})),a.d(e,"f",(function(){return l})),a.d(e,"d",(function(){return p})),a.d(e,"l",(function(){return u})),a.d(e,"k",(function(){return d})),a.d(e,"j",(function(){return h})),a.d(e,"b",(function(){return m})),a.d(e,"e",(function(){return f})),a.d(e,"c",(function(){return g})),a.d(e,"i",(function(){return b})),a.d(e,"a",(function(){return v}));var i=a("5e8d"),n=a("162a"),r=a("bcc78");function s(t){return Object(i.a)().then((function(){var e=r.a.schedulePlanTaskInfo.url;return n.a.request(e,t)}))}function o(t){return Object(i.a)().then((function(){var e=r.a.schedulePlanSaveTask.url;return n.a.post(e,null,t)}))}function c(t){return Object(i.a)().then((function(){var e=r.a.schedulePlanPlanList.url;return n.a.request(e,t)}))}function l(t){return Object(i.a)().then((function(){var e=r.a.schedulePlanNodeList.url;return n.a.request(e,t)}))}function p(t){return Object(i.a)().then((function(){var e=r.a.schedulePlanNodeInfo.url;return n.a.request(e,t)}))}function u(t){return Object(i.a)().then((function(){var e=r.a.schedulePlanSaveReport.url;return n.a.post(e,null,t)}))}function d(t){return Object(i.a)().then((function(){var e=r.a.schedulePlanSaveCompleteTime.url;return n.a.post(e,null,t)}))}function h(t){return Object(i.a)().then((function(){var e=r.a.schedulePlanSaveChecker.url;return n.a.post(e,null,t)}))}function m(t){return Object(i.a)().then((function(){var e=r.a.schedulePlanCheckerLogList.url;return n.a.request(e,t)}))}function f(t){return Object(i.a)().then((function(){var e=r.a.schedulePlanNodeLevel.url;return n.a.request(e,t)}))}function g(){return Object(i.a)().then((function(){var t=r.a.schedulePlanCompletedTimeSetting.url;return n.a.request(t)}))}function b(){return Object(i.a)().then((function(){var t=r.a.schedulePlanLeaderSchedulePlan.url;return n.a.request(t)}))}function v(t){return Object(i.a)().then((function(){var e=r.a.schedulePlanGetByFirstProject.url;return n.a.request(e,t)}))}},"9e78":function(t,e,a){"use strict";a("0f27")},a093:function(t,e,a){"use strict";(function(t){a("5ab2"),a("6d57"),a("e10e"),a("f548");var i=a("28f8"),n=(a("9dd9"),a("cc57"),a("e204"),a("9eea")),r=a("3156b"),s=a("774b"),o=a("e89f"),c=a("6f9e");function l(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,i)}return a}function p(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?l(Object(a),!0).forEach((function(e){Object(i.a)(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):l(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}e.a={name:"AppSingleSelect",components:{appSearchBar:n.default,item:r.a,Scroller:s.default},mixins:[o.a],props:{},data:function(){return{activeTab:[],storageKey:encodeURI(this.title||"singleSelectMark"),storageVal:[],keyword:"",searchStatus:!1,checkedItem:{},show:!1,searchData:[],options:[],optionsLimit:20,pagingOptions:!1,searchBar:!0,category:[],ifToggle:!1,editorAddData:!1,lineLimit:1}},computed:{optionsShow:function(){return this.options&&this.options.length?this.grouping?this.getGroupData():this.options.slice(0,this.optionsLimit):[]}},watch:{keyword:function(t){var e=this;this.$nextTick((function(){e.filterList(t)}))}},methods:{openPopup:function(e){if(console.log(e),this.value=!0,this.show=!0,this.category=[],c.a.$on("closeDialog",this.closePopup),this.title=e.title,this.selected=e.selected,this.checkedItem=e.selected,this.options=e.options,this.onSelect=e.onSelect,this.searchBar=e.searchBar,this.grouping=e.grouping,this.rightBtn=e.rightBtn,this.rightBtnEvent=e.rightBtnEvent,this.ifToggle=e.ifToggle,this.lineLimit=e.lineLimit,this.editorAddData=e.editorAddData,e.grouping&&e.autoOpen){var a=t.uniqBy(t.map(this.options,e.grouping));this.activeTab=t.map(a,(function(t,e){return e}))}this.storageKey=encodeURI(this.title||"singleSelectMark"),this.$emit("open")},closePopup:function(){this.value=!1,this.show=!1,this.$emit("close")},closeEvent:function(){c.a.$off("closeDialog",this.closePopup),this.value=!1,this.show=!1,this.keyword="",this.searchStatus=!1,this.$refs["app-search-bar"]&&this.$refs["app-search-bar"].cancelSearch()},customAddSupplier:function(t){return this.options.findIndex((function(e){return e.name===t}))},selectItem:function(t){var e=this;this.ifToggle&&this.checkedItem.id===t.id?this.checkedItem={}:this.checkedItem=t,this.onSelect(this.checkedItem),this.$refs["app-search-bar"]&&this.$refs["app-search-bar"].saveHistory(),window.setTimeout((function(){e.closeEvent()}),300)},onSearchTypeChange:function(t){this.searchStatus=t},filterList:function(t){var e,a,i=this,n=new RegExp("("+t+")","gmi");if(this.category=[],this.keyword=t,this.searchData=[],!t)return!1;this.options.map((function(t){return n.test(t.name)&&(a=p(p({},t),{},{rename:t.name.replace(n,"<label>$1</label>")}),i.grouping?-1===(e=i.category.indexOf(a[i.grouping]))?(i.category.push(a[i.grouping]),i.searchData.push({name:a[i.grouping],children:[a]})):i.searchData[e].children.push(a):i.searchData.push(a)),t}))},pageOptions:function(){this.optionsLimit=this.optionsLimit+20,this.pagingOptions=!1},getGroupData:function(){var t,e=this,a=[];return this.category=[],this.options.map((function(i){return-1===(t=e.category.indexOf(i[e.grouping]))?(e.category.push(i[e.grouping]),a.push({name:i[e.grouping],children:[i]})):a[t].children.push(i),i})),a}}}}).call(this,a("391c"))},a300:function(t,e,a){"use strict";(function(t){a("5ab2"),a("6d57"),a("e10e");var i=a("28f8"),n=a("e89f"),r=a("e2a7"),s=a("4360"),o=a("e223");function c(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,i)}return a}e.a={name:"DrawingDialog",store:s.a,components:{Drawing:o.a},mixins:[n.a],data:function(){return{show:!1,mode:"",url:"",points:[],folder:"",maxMarks:1/0,onmark:function(){}}},methods:{openPopup:function(t){return this.mode=t.mode,this.url=t.url,this.points=t.points,this.folder=t.folder,this.maxMarks=isNaN(t.maxMarks)?1/0:t.maxMarks,this.onmark=t.onmark,this.show=!0,this.$emit("open"),this},closePopup:function(){this.show=!1,this.$emit("close")},undo:function(){this.points.pop()},sure:function(){this.points.length?(this.closePopup(),this.onmark&&this.onmark(this.points)):r.a.alert("请先在户型图标记位置")},pointLight:function(e){this.points=t.map(this.points,(function(t,a){var n=function(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?c(Object(a),!0).forEach((function(e){Object(i.a)(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):c(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}({},t);return e===a?n.color="#4275e8":n.found?n.color="#14ff56":n.color="#ff4546",n}))},onclick:function(t){var e=this;if("view"===this.mode){if(t.clickPoint&&"points"===t.clickPoint.tag){var a=t.clickPoint.index;this.pointLight(a)}}else if("mark-val-group"===this.mode){if(this.points.length>=maxMarks)return void r.a.alert("爆点个数不能大于实测点数");this.points.push({x:t.x,y:t.y})}else if("multiple-remark"===this.mode)this.points.push({x:t.x,y:t.y});else{var i={x:t.x,y:t.y};this.points=[i],setTimeout((function(){e.closePopup(),e.onmark&&e.onmark(i)}),200)}}}}}).call(this,a("391c"))},a590:function(t,e,a){"use strict";var i=a("329b"),n=a("e89f"),r=a("07d2"),s=a("e68e"),o=a("3c64"),c=a("774b"),l={name:"AddInstructionDialog",components:{Item:r.default,ItemImgList:s.a,ItemTextarea:o.a,Scroller:c.default},mixins:[n.a],data:function(){return{show:!1,problemData:{remark:"",image_file:[]}}},methods:{openPopup:function(t){this.value=!0,this.show=!0,this.problemData={remark:"",image_file:[]},this.addNoteCallback=t.addNoteCallback,this.$emit("open")},closePopup:function(){this.value=!1,this.show=!1,this.$emit("close")},saveProblem:function(){return this.addNoteCallback(this.problemData)}}},p=(a("8386"),a("17cc")),u=Object(p.a)(l,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("transition",{attrs:{name:"slide-right"}},[t.show?a("page-content",{attrs:{mode:"dialog",title:"添加批示","on-close":t.closePopup}},[a("scroller",[a("item-textarea",{staticClass:"add-instruction-textarea",attrs:{placeholder:"批示内容"},model:{value:t.problemData.remark,callback:function(e){t.$set(t.problemData,"remark",e)},expression:"problemData.remark"}}),a("item",{staticClass:"p15"},[a("item-img-list",{attrs:{editabled:!0,"allow-select-album":!0,"allow-buildin-album":!0,maxlength:15},model:{value:t.problemData.image_file,callback:function(e){t.$set(t.problemData,"image_file",e)},expression:"problemData.image_file"}})],1),a("app-button-group",{attrs:{"fixed-bottom":"",direction:"column"}},[a("app-button",{on:{click:t.saveProblem}},[t._v("\n          提交\n        ")])],1)],1)],1):t._e()],1)}),[],!1,null,"1c92b584",null).exports,d=!1;d||(d=new(i.default.extend(u))({el:document.createElement("div")}),document.body.appendChild(d.$el));e.a=d},a5c6:function(t,e,a){"use strict";var i=a("329b"),n=a("a093").a,r=(a("f3d7"),a("17cc")),s=Object(r.a)(n,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("transition",{attrs:{name:"slide-right"}},[t.show?a("page-content",{attrs:{title:t.title,mode:"dialog","on-close":t.closeEvent}},[t.rightBtn&&!t.editorAddData||t.rightBtn&&t.editorAddData&&(!t.selected.name||t.customAddSupplier(t.selected.name)>-1)?a("div",{staticClass:"header-btn",attrs:{slot:"header-bar-right"},on:{click:function(e){t.rightBtnEvent(t.category)}},slot:"header-bar-right"},[t._v("\n      "+t._s(t.rightBtn)+"\n    ")]):t._e(),a("scroller",{attrs:{"has-next":!t.searchStatus&&!t.grouping&&t.optionsLimit<t.options.length,"end-text":"","is-empty":0===t.optionsShow.length},on:{loadNext:t.pageOptions}},[t.searchBar?a("app-search-bar",{ref:"app-search-bar",attrs:{placeholder:"搜索","history-key":t.storageKey},on:{changeSearchStatus:t.onSearchTypeChange},model:{value:t.keyword,callback:function(e){t.keyword=e},expression:"keyword"}}):t._e(),t.searchStatus?[t.keyword?[t.grouping?a("van-collapse",{model:{value:t.activeTab,callback:function(e){t.activeTab=e},expression:"activeTab"}},t._l(t.searchData,(function(e,i){return a("van-collapse-item",{key:i,attrs:{title:e.name,name:i}},t._l(e.children,(function(e,i){return a("item",{key:i,attrs:{checked:t.checkedItem.id===e.id,item:e,"line-limit":t.lineLimit,"render-field":"rename"},on:{click:t.selectItem}})})))}))):t._e(),t.grouping&&!t.searchData.length?a("loading-status",{attrs:{"is-empty":!0,"empty-text":"没有内容","show-style":"search"}}):t._e(),t.grouping?t._e():[t._l(t.searchData,(function(e,i){return a("item",{key:i,attrs:{checked:t.checkedItem.id===e.id,item:e,"line-limit":t.lineLimit,"render-field":"rename"},on:{click:t.selectItem}})})),t.searchData.length?t._e():a("loading-status",{attrs:{"is-empty":!0,"empty-text":"没有内容","show-style":"search"}})]]:t._e()]:["-1"===t.selected.id&&t.customAddSupplier(t.selected.name)<0&&t.editorAddData?a("div",{staticClass:"supplier-editor",on:{click:t.closePopup}},[a("span",{staticClass:"title"},[t._v(t._s(t.selected.name))]),a("span",{staticClass:"icon"},[a("i",{staticClass:"iconfont icon-edit margin-r",on:{click:t.rightBtnEvent}}),a("i",{staticClass:"iconfont icon-qualified"})])]):t._e(),t.grouping?a("van-collapse",{model:{value:t.activeTab,callback:function(e){t.activeTab=e},expression:"activeTab"}},t._l(t.optionsShow,(function(e,i){return a("van-collapse-item",{key:i,attrs:{title:e.name,name:i}},t._l(e.children,(function(e,i){return a("item",{key:i,attrs:{checked:t.checkedItem.id===e.id,item:e,"line-limit":t.lineLimit},on:{click:t.selectItem}})})))}))):t._l(t.optionsShow,(function(e,i){return a("item",{key:i,attrs:{checked:t.checkedItem.id===e.id,item:e,"line-limit":t.lineLimit},on:{click:t.selectItem}})})),t.optionsShow.length?t._e():a("loading-status",{attrs:{"is-empty":!0,"empty-text":"暂无数据","show-style":"search"}})]],2)],1):t._e()],1)}),[],!1,null,"e465319c",null).exports,o=!1;o||(o=new(i.default.extend(s))({el:document.createElement("div")}),document.body.appendChild(o.$el));e.a=o},b26b:function(t,e,a){var i=a("ef5e");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);(0,a("85cb").default)("4373af40",i,!0,{sourceMap:!1,shadowMode:!1})},b6da:function(t,e,a){"use strict";var i=a("329b"),n=a("a300").a,r=a("17cc"),s=Object(r.a)(n,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("transition",{attrs:{name:"slide-right"}},[t.show?a("page-content",{attrs:{mode:"dialog",title:"户型图","on-close":t.closePopup}},[a("drawing",{staticStyle:{flex:"1"},attrs:{url:t.url,points:t.points,folder:t.folder},on:{onclick:t.onclick}}),"multiple-remark"===t.mode?a("app-button-group",{attrs:{"fixed-bottom":"",seamless:""}},[a("app-button",{staticStyle:{width:"50%"},attrs:{type:t.points.length?"warning":"normal",plain:""},on:{click:t.undo}},[t._v("\n        撤销\n      ")]),a("app-button",{on:{click:t.sure}},[t._v(" 确定 ")])],1):t._e()],1):t._e()],1)}),[],!1,null,null,null).exports,o=!1;o||(o=new(i.default.extend(s))({el:document.createElement("div")}),document.body.appendChild(o.$el));e.a=o},c070:function(t,e,a){var i=a("574c");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);(0,a("85cb").default)("35590dcb",i,!0,{sourceMap:!1,shadowMode:!1})},c40a:function(t,e,a){"use strict";(function(t){a("cc57"),a("6d57"),a("6f84"),a("163d");var i=a("a32d"),n=a.n(i),r=a("e900"),s=a("3122"),o=a("4ad6"),c=a("3bd5"),l=a("1b7e");function p(t){var e=t.changedTouches.length,a=t.touches.length;return 1===e||2===e||2===a}function u(t){return 1===t.touches.length}e.a={name:"Drawing",props:{url:{type:String},points:{type:Array,default:function(){return[]}},regions:{type:Array,default:function(){return[]}},pointColor:{type:String,default:"#ff4546"},pointRadius:{type:Number,default:7},scaleMax:{type:Number,default:4},clickDelay:{type:Number,default:500},folder:{type:String,default:"house-image"},onlineMode:{type:Boolean,default:!1},contentScroll:{type:Boolean,default:!0}},data:function(){return{isDownloading:!1,error:"",canvas:null,ctx:null,img:null,src:"",width:0,height:0,x:0,y:0,scale:1,defaultScale:1,pixelRatio:1,markPosition:null,markPositionImageData:[],markCoordinates:[],pinchRatio:0,scaleBetween:[],isPinch:!1,clickPoints:[],touchStart:{x:0,y:0,cx:0,cy:0,time:0}}},watch:{url:function(){this.getImage()},points:function(t){this.ctx&&this.draw()},regions:function(t){this.ctx&&this.draw()}},mounted:function(){this.getImage()},destroyed:function(){this.canvas&&(this.canvas.width=0,this.canvas.height=0)},methods:{getImage:function(){var e=this;if(this.isDownloading=!0,this.url){var a=c.a.getUser().user_id,i=n.a.replaceAll(this.url,"\\?x-oss-process=image\\/resize,","@"),r=n.a.strRightBack(i,"/");if(!r)return this.error="户型图地址错误",void(this.isDownloading=!1);this.error="";var p=[o.a.appImagePath()+a+"/"+this.folder+"/"+r,o.a.appImagePath()+a+"/house-image/"+r,o.a.appImagePath()+a+"/drawing/"+r,o.a.appImagePath()+a+"/location-image/"+r,o.a.appImagePath()+a+"/images/"+r,o.a.appDataPath()+a+"/"+this.folder+"/"+r,o.a.appDataPath()+a+"/house-image/"+r,o.a.appDataPath()+a+"/drawing/"+r,o.a.appDataPath()+a+"/location-image/"+r,o.a.appDataPath()+a+"/images/"+r],u=Promise.resolve();return"dev"===APP_ENV||this.onlineMode?u=u.then((function(){return e.url})):t.each(p,(function(t){u=u.then((function(e){return e||o.a.isFileExists(t).then((function(e){if(e)return s.a._fixPath(t)}))}))})),u.then((function(t){if(!t)return l.a.getHasNetwork().then((function(t){return t?s.a.download(e.url,!0,e.folder).then((function(t){e.src=t})):Promise.reject("当前无网络")}));e.src=t})).then((function(){e.src?(e.img=new Image,e.img.onload=function(){e.img.complete?(e.isDownloading=!1,e.$nextTick(e.init)):(e.error="加载图片失败",e.isDownloading=!1)},e.img.onerror=function(){e.error="加载图片失败",e.isDownloading=!1},e.img.src=e.src):(e.error="下载户型图失败",e.isDownloading=!1)})).catch((function(a){e.error=t.isString(a)?a:"下载户型图失败",e.isDownloading=!1}))}this.error="户型图地址错误",this.isDownloading=!1},init:function(){if(this.$refs["drawing-canvas"]){var t=this.$refs.content;this.canvas=this.$refs["drawing-canvas"],this.ctx=this.canvas.getContext("2d"),this.width=t.offsetWidth,this.height=t.offsetHeight,this.pixelRatio=this.getPixelRatio(this.ctx),this.canvas.style.height=this.height+"px",this.canvas.style.width=this.width+"px",this.canvas.width=this.width*this.pixelRatio,this.canvas.height=this.height*this.pixelRatio,!this.ctx.extended&&Object(r.a)(this.ctx),this.bindTouchEvent(),this.calc(),this.draw()}},getPixelRatio:function(t){var e=t.backingStorePixelRatio||CanvasRenderingContext2D.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1;return(window.devicePixelRatio||1)/e},calc:function(t){var e=this.width/this.img.width,a=this.img.height*e,i=this.height||a;a>this.height&&(e*=i/a),this.scale=e*this.pixelRatio,this.defaultScale=this.scale,this.scaleBetween=[this.scale,this.scale*this.scaleMax]},winToCanvas:function(t,e){var a=this.canvas.getBoundingClientRect();return{x:t-a.left*(this.canvas.width/(a.width*this.pixelRatio)),y:e-a.top*(this.canvas.height/(a.height*this.pixelRatio))}},isBoundary:function(t){switch(t){case"t":if(0===this.y)return!0;break;case"r":if(this.x<=this.canvas.width-this.img.width*this.scale)return!0;break;case"b":if(this.y<=this.img.height*this.scaleBetween[0]-this.img.height*this.scale)return!0;break;case"l":if(0===this.x)return!0}return!1},bindTouchEvent:function(){this.canvas.addEventListener("touchstart",this.onTouchstart),this.canvas.addEventListener("touchmove",this.onTouchmove),this.canvas.addEventListener("touchend",this.touchMoveAndEndHandler)},unbindTouchEvent:function(){this.canvas.removeEventListener("touchstart",this.onTouchstart),this.canvas.removeEventListener("touchmove",this.onTouchmove),this.canvas.removeEventListener("touchend",this.touchMoveAndEndHandler)},onTouchstart:function(t){if(this.isPinch=!1,u(t)){var e=t.touches[0],a=this.winToCanvas(e.clientX,e.clientY);this.touchStart={x:a.x,y:a.y,cx:e.clientX,cy:e.clientY,time:Date.now()}}else if(p(t)){var i,n=t.touches[0],r=t.touches[1],s=this.winToCanvas(n.clientX,n.clientY),o=this.winToCanvas(r.clientX,r.clientY);i=Math.sqrt(Math.pow(o.x-s.x,2)+Math.pow(o.y-s.y,2)),this.pinchRatio=this.scale/i}},onTouchmove:function(t){if(!1===this.contentScroll&&(t.preventDefault(),t.stopPropagation()),u(t))this.touchStart.cy>t.pageY&&this.isBoundary("b")||this.touchStart.cy<t.pageY&&this.isBoundary("t")||this.touchStart.cx>t.pageX&&this.isBoundary("r")||this.touchStart.cx<t.pageX&&this.isBoundary("l")||t.stopPropagation(),this.touchMoveAndEndHandler(t);else if(p(t)){t.stopPropagation();var e,a,i,n,r,s=t.touches[0],o=t.touches[1],c=this.winToCanvas(s.clientX,s.clientY),l=this.winToCanvas(o.clientX,o.clientY);a=Math.sqrt(Math.pow(l.x-c.x,2)+Math.pow(l.y-c.y,2)),this.isPinch=!0,(e=this.pinchRatio*a)>this.scaleBetween[0]&&e<this.scaleBetween[1]&&(n={x:((i={x:(c.x+l.x)/2*this.pixelRatio,y:(c.y+l.y)/2*this.pixelRatio}).x-this.x)/(this.img.width*this.scale),y:(i.y-this.y)/(this.img.height*this.scale)},i.newX=this.x+this.img.width*e*n.x,i.newY=this.y+this.img.height*e*n.y,r={x:i.newX-i.x,y:i.newY-i.y},e<this.scale&&this.setRange(this.x-r.x,this.y-r.y,e),e>this.scale&&(this.x=this.x-r.x,this.y=this.y-r.y),e!==this.scale&&(this.scale=e,this.draw()))}},touchMoveAndEndHandler:function(t){var e,a,i=t.type,n={touchmove:t.touches[0],touchend:t.changedTouches[0]}[i],r=this.winToCanvas(n.clientX,n.clientY);e=(r.x-this.touchStart.x)*this.pixelRatio,a=(r.y-this.touchStart.y)*this.pixelRatio,"touchend"===i&&Date.now()-this.touchStart.time<this.clickDelay&&Math.abs(n.clientX-this.touchStart.cx)<6&&Math.abs(n.clientY-this.touchStart.cy)<6?this.clickHandler(t):"touchmove"!==i||this.isPinch||(this.touchStart.x=r.x,this.touchStart.y=r.y,this.setRange(this.x+e,this.y+a,this.scale),this.draw())},isCanClick:function(t){for(var e=!1,a=0;a<this.markPosition.length;a++)if(parseFloat(t.x)>parseFloat(this.markPosition[a].x)&&parseFloat(t.x)<parseFloat(this.markPosition[a].x)+parseFloat(this.markPosition[a].w)&&parseFloat(t.y)>parseFloat(this.markPosition[a].y)&&parseFloat(t.y)<parseFloat(this.markPosition[a].y)+parseFloat(this.markPosition[a].h)){e=!0;break}return e},clickHandler:function(t){var e=t.changedTouches[0];if(this.mark){var a=this.winToCanvas(e.clientX,e.clientY),i={x:(a.x-this.x/this.pixelRatio)/(this.img.width*this.scale/this.pixelRatio),y:(a.y-this.y/this.pixelRatio)/(this.img.height*this.scale/this.pixelRatio)};if(a={x:i.x*this.img.width,y:i.y*this.img.height},this.isCanClick(a)){this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(a.x*this.scale/this.pixelRatio+this.x/this.pixelRatio,a.y*this.scale/this.pixelRatio+this.y/this.pixelRatio,this.scale===this.defaultScale?this.pointRadius:this.pointRadius*(1+(this.scale-this.defaultScale)/this.pixelRatio),0,2*Math.PI,!1),this.ctx.fill(),this.ctx.restore();var n={x:a.x,y:a.y};this.markCoordinates.push(n),this.points.push(n)}return!1}this.redraw(t,this.winToCanvas(e.clientX,e.clientY))},setRange:function(t,e,a){var i=this.img.width*a,n=this.img.height*a,r=this.canvas.width,s=this.canvas.height,o=this.img.height*this.scaleBetween[0];t=i<r?(r-i)/2:(t=t+i<r?r-i:t)>0?0:t,e=n<s?(s-n)/2:(e=e+n<o?o-n:e)>0?0:e,this.x=t,this.y=e},draw:function(){this.setRange(this.x,this.y,this.scale),this.drawImage(),this.drawPoints(),this.drawRegions()},redraw:function(t,e){this.clickPoints=[],this.drawImage(),this.drawPoints(e),this.drawRegions(e),this.clickCallback(t,this.clickPoints)},clickCallback:function(t,e){var a;e.some((function(t,e){return"points"===t.tag?(a=t,!0):(a=t,!1)}));var i=t.changedTouches[0],n=this.winToCanvas(i.clientX,i.clientY),r=(n.x-this.x/this.pixelRatio)/(this.img.width*this.scale/this.pixelRatio),s=(n.y-this.y/this.pixelRatio)/(this.img.height*this.scale/this.pixelRatio);(n={x:parseFloat((r*this.img.width).toFixed(2)),y:parseFloat((s*this.img.height).toFixed(2))}).y>=0&&n.x>=0&&n.y<=this.img.height&&n.x<=this.img.width&&this.$emit("onclick",{type:a?"point":"",points:this.points,point:a,clickPoint:a,x:n.x,y:n.y,scale:this.scale/this.pixelRatio})},drawImage:function(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.ctx.drawImage(this.img,0,0,this.img.width,this.img.height,this.x,this.y,this.img.width*this.scale,this.img.height*this.scale)},drawPoints:function(t){var e=this;this.points.forEach((function(a,i){e.drawPoint(a.x*e.scale/e.pixelRatio+e.x/e.pixelRatio,a.y*e.scale/e.pixelRatio+e.y/e.pixelRatio,e.pointRadius,i,t,a.color)}))},drawPoint:function(t,e,a,i,n,r){this.ctx.save(),this.ctx.beginPath(),this.ctx.shadowBlur=a/2,this.ctx.shadowColor="black",this.ctx.fillStyle=r||this.pointColor,this.ctx.arc(t,e,a,0,2*Math.PI,!1),this.ctx.fill(),this.ctx.shadowBlur=0,this.ctx.shadowColor="transparent",this.ctx.restore(),a*=2,this.ctx.save(),this.ctx.beginPath(),this.ctx.strokeStyle="transparent",this.ctx.fillStyle="transparent",this.ctx.rect(t-a,e-a,2*a,2*a),this.ctx.stroke(),this.ctx.restore(),n&&this.ctx.isPointInPath(n.x*this.pixelRatio,n.y*this.pixelRatio)&&this.clickPoints.push({tag:"points",pos:n,index:i})},drawRegions:function(t){var e=this;this.regions&&this.regions.length&&this.regions.forEach((function(a,i){var n,r,s,o;e.ctx.beginPath(),a.area.forEach((function(t,a){var i=t[0]*e.scale/e.pixelRatio+e.x/e.pixelRatio,c=t[1]*e.scale/e.pixelRatio+e.y/e.pixelRatio;a?e.ctx.lineTo(i,c):e.ctx.moveTo(i,c),n=void 0===n?i:n<i?n:i,r=void 0===r?i:r>i?r:i,s=void 0===s?c:s<c?s:c,o=void 0===o?c:o>c?o:c})),e.ctx.closePath(),e.ctx.fillStyle="rgba(255, 144, 0, 0.4)",e.ctx.fill(),e.ctx.lineWidth=3,e.ctx.strokeStyle="#feda8e",e.ctx.stroke(),e.ctx.lineWidth=2,e.ctx.strokeStyle="rgba(0, 0, 0, 0.8)",e.ctx.stroke(),t&&e.ctx.isPointInPath(t.x*e.pixelRatio,t.y*e.pixelRatio)&&e.clickPoints.push({tag:"region",pos:t,index:i,regionData:a}),e.ctx.font='18px bold -apple-system, "Helvetica Neue", Roboto, "Segoe UI", sans-serif',e.ctx.textAlign="center",e.ctx.lineWidth=4,e.ctx.strokeStyle="#ffffff",e.ctx.strokeText(a.name,(r+n)/2,(o+s)/2+10),e.ctx.fillStyle="#111111",e.ctx.fillText(a.name,(r+n)/2,(o+s)/2+10)}))}}}}).call(this,a("391c"))},c65d:function(t,a,i){"use strict";(function(t){i("6a61");var n,r,s=i("2e91"),o=i("1b7e"),c=i("e2a7"),l=i("4ad6"),p=i("3122"),u="00:00",d="00:00";a.a={name:"AppVoiceRecord",components:{},props:{value:{type:Array,default:function(){return[]}},isText:{type:Boolean,default:!1},isDelete:{type:Boolean,default:!1}},data:function(){return{sound:null,isPlay:"start",seekTime:null,progress:0,seekText:u,duration:d,initDuratin:0,disabled:!0,startDrap:!1,src:[],text:""}},computed:{isEmpty:function(){return t.isEmpty(this.value)}},watch:{value:function(e){var a=this;this.$nextTick((function(){t.isEmpty(e)||a.init()}))}},created:function(){this.init()},deactivated:function(){this.closeHowler()},methods:{init:(r=Object(s.a)(regeneratorRuntime.mark((function e(){var a,i,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=this.value[0],!t.isEmpty(a)){e.next=3;break}return e.abrupt("return");case 3:i=Math.ceil(a.duration),n=null,a.voiceUrl?n=a.voiceUrl:a.voiceTemp&&(n=p.a.fixUrl(a.voiceTemp)),this.text=a.text,this.sound=null,this.src=n,this.duration=this.formatTime(i),this.initDuratin=i,this.disabled=!0,this.startDrap=!1,$log.log("语音初始化：",this.value);case 14:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)}),player:function(){$log.log("语音加载中-路径：",this.src);var t=new Audio;t.src=this.src,this.isPlay="loading",t.removeEventListener("canplaythrough",this.load),t.addEventListener("canplaythrough",this.load,!1),t.removeEventListener("error",this.error),t.addEventListener("error",this.error,!1),t.removeEventListener("playing",this.playing),t.addEventListener("playing",this.playing,!1),t.removeEventListener("pause",this.pause),t.addEventListener("pause",this.pause,!1),t.removeEventListener("ended",this.ended),t.addEventListener("ended",this.ended,!1),this.sound=t},load:function(){var t=this.sound.duration;t=Math.ceil(t),this.isPlay="middle",this.duration=this.formatTime(t),this.initDuratin=t,this.disabled=!1,$log.log("语音播放-加载完成",{"实际总时长":this.sound.duration,"显示时长":t})},error:function(t){var a=this;o.a.getHasNetwork().then((function(t){var i="播放失败";t||(i="当前无网络"),a.sound=null,a.isPlay="start",c.a.alert(i),$log.error("语音播放-加载异常",{"获取路径":e.currentTarget.src,"audio失败原因":e.currentTarget.error,"网络原因":!t})}))},playing:function(){$log.log("语音播放-开始时"),this.isPlay="middle",this.openInterval()},pause:function(){$log.log("语音播放-关闭时"),this.isPlay="start"},ended:function(){var t=this;$log.log("语音播放-播放完毕时"),cancelAnimationFrame(this.seekTime);var e=setTimeout((function(){t.isPlay="start",t.progress=0,t.seekText=u,clearTimeout(e)}),60)},unload:function(){this.sound&&this.sound.pause(),this.sound=null},startPlay:(n=Object(s.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.sound){t.next=4;break}return t.next=3,this.init();case 3:this.player();case 4:this.sound.play(),0===this.sound.currentTime&&(this.seekText=u,this.progress=0);case 6:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)}),pausePlay:function(){this.sound.pause(),this.isPlay="start"},loadingPlay:function(){this.unload(),this.sound=null,this.isPlay="start"},deleteVoive:function(){var t=this;c.a.confirm({message:"确定删除语音？",okText:"删除"},(function(){t.closeHowler();var e=t.value[0];e.voiceTemp&&l.a.deleteFile(e.voiceTemp),t.$emit("delte-voice",e.id)}))},closeHowler:function(){this.unload(),cancelAnimationFrame(this.seekTime)},dragStart:function(){this.startDrap=!0,cancelAnimationFrame(this.seekTime)},dragInput:function(t){var e=t/100,a=this.initDuratin*e;this.seekText=this.formatTime(Math.floor(a))},dragEnd:function(){this.startDrap=!1;var t=this.progress/100,e=this.initDuratin*t;this.sound&&(this.sound.paused?this.sound.play():this.openInterval(),this.sound.currentTime=e)},openInterval:function(){this.seekTime=requestAnimationFrame(this.step.bind(this))},step:function(){var t=this.sound,e=Math.ceil(t.currentTime||0),a=Math.ceil(t.duration);this.progress=Math.round(e/a*100),this.seekText=this.formatTime(e),t.paused||this.openInterval()},formatTime:function(t){var e=Math.floor(t/60)||0,a=Math.round(t-60*e)||0;return(e=e>=10?e:"0"+e)+":"+(a=a>=10?a:"0"+a)}}}}).call(this,i("391c"))},c77f:function(t,e,a){"use strict";a.d(e,"h",(function(){return o})),a.d(e,"g",(function(){return c})),a.d(e,"a",(function(){return l})),a.d(e,"e",(function(){return p})),a.d(e,"f",(function(){return u})),a.d(e,"d",(function(){return d})),a.d(e,"m",(function(){return h})),a.d(e,"n",(function(){return m})),a.d(e,"b",(function(){return f})),a.d(e,"i",(function(){return g})),a.d(e,"j",(function(){return b})),a.d(e,"c",(function(){return v})),a.d(e,"k",(function(){return _})),a.d(e,"o",(function(){return x})),a.d(e,"l",(function(){return y}));var i=a("5e8d"),n=a("162a"),r=a("bcc78"),s=a("da71");function o(t){return Object(i.a)().then((function(){var e=r.a.commonGetProblemClassTree.url;return n.a.request(e,t)}))}function c(t){return Object(i.a)().then((function(){var e=r.a.pileAcceptGetPileBuildingSummary.url;return n.a.request(e,t)}))}function l(t){return Object(i.a)().then((function(){var e=r.a.pileAcceptGetBidsectionBuildingTree.url;return n.a.request(e,t)}))}function p(){return Object(i.a)().then((function(){var t=r.a.pileAcceptGetPileAcceptItems.url;return n.a.request(t)}))}function u(t){return Object(i.a)().then((function(){var e=r.a.pileAcceptGetPileAcceptList.url;return n.a.request(e,t)}))}function d(t){return Object(i.a)().then((function(){var e=r.a.pileAcceptGetPileAcceptInfo.url;return n.a.request(e,t)}))}function h(t){return Object(i.a)().then((function(){var e=r.a.processAcceptBuilding.url;return n.a.request(e,t)}))}function m(t){return Object(i.a)().then((function(){var e=r.a.processAcceptCollect.url;return n.a.request(e,t)}))}function f(t){return Object(i.a)().then((function(){var e=r.a.processAcceptv3GetBuildingList.url;return n.a.request(e,t)}))}function g(t){return Object(i.a)().then((function(){var e=r.a.processAcceptv3GetProcessAcceptv3List.url;return n.a.request(e,t)}))}function b(t){return Object(i.a)().then((function(){var e=s.a.getReportOrgTree.url;return n.a.request(e,t)}))}function v(t){return Object(i.a)().then((function(){var e=s.a.getHomeReports.url;return n.a.request(e,t)}))}function _(t){return Object(i.a)().then((function(){var e=s.a.getReportPools.url;return n.a.request(e,t)}))}function x(t){return Object(i.a)().then((function(){var e=s.a.saveMyReportsSetting.url;return n.a.post(e,null,t)}))}function y(t){return Object(i.a)().then((function(){var e=r.a.getUrlReportAuth.url;return n.a.request(e,t)}))}},d1d1:function(t,e,a){"use strict";(function(t){var i=a("fd50"),n=a("bcc7"),r=a("515e"),s=a("07d2"),o=a("7bac"),c=a("a7c3"),l=a("4360");e.a={name:"CheckGuideList",components:{Item:s.default},store:l.a,data:function(){return{isLoading:!0,listData:[],module:"",itemId:"",batchId:"",sectionId:"",options:""}},computed:{moduleAttribute:function(){return this.$store.state.global.moduleAttribute}},methods:{init:function(e){var a,n=this;for(var r in this.module=e.module,this.itemId=e.itemId,this.batchId=e.batchId,this.sectionId=e.sectionId,this.options=e.options,e)this[r]=e[r];this.checkType={check:31,"check-safety":36,"check-quality":37,"measure-v3":41,process:32,"fly-inspect":101}[this.module];var s=!1;t.isEmpty(this.itemId)?!t.isEmpty(this.checkType)&&t.isEmpty(this.sectionId)?a=this.initByType():t.isEmpty(this.batchId)?t.isEmpty(this.options)?t.isEmpty(this.sectionId)?a=i.a.when():(s=!0,a=this.initByBidsection()):a=this.initByOptions():a=this.initByBatch():a=this.initById(),this.isLoading=!0,a.then((function(e){var a=n.moduleAttribute[n.module]||{};!t.isEmpty(a)&&a.setUsualItems&&s?o.a.getUserKey(n.mmkvCode()).then((function(t){t=null===t?e:n.mergeArray(n.deepClone(e),t),n.listData=t||[],n.isLoading=!1})):(n.listData=e||[],n.isLoading=!1)}))},mmkvCode:function(){var t=this.moduleAttribute[this.module]||{};return c.a[t.mmkv_item]+"_"+this.sectionId},mergeArray:function(e,a){var i=this;return t.filter(e,(function(e){var n=a[e.id];return t.isEmpty(e.subitem)||(e.subitem=i.mergeArray(e.subitem,a)),!t.isEmpty(n)||"desc"===e.type}))},clickItem:function(t){t.subitem&&t.subitem.length?this.$set(t,"isOpen",!t.isOpen):"special-inspect"===this.module?r.a.openPopup({itemId:t.id,module:this.module}):r.a.openPopup({itemId:t.item_id,module:this.module})},initById:function(){var t=this;if("special-inspect"!==this.module)return n.a.getCheckItem(this.itemId,this.checkType).then((function(e){return e?t.sectionId?n.a.getBidSectionCheckItemListByCode(t.sectionId,e.code):n.a.getCheckItemTreeByCode(e.code):i.a.when()}))},initByType:function(){return n.a.getCheckItemGuidelineList(this.checkType)},initByBatch:function(){return i.a.when()},initByBidsection:function(){return n.a.getBidSectionCheckItemTreeByType(this.sectionId,this.checkType)},initByOptions:function(){return i.a.resolve(this.options)},deepClone:function(t){return JSON.parse(JSON.stringify(t))}}}}).call(this,a("391c"))},d6af:function(t,e,a){(t.exports=a("690e")(!1)).push([t.i,".zjapp .layout-main[data-v-77dc232d] .layout-content{display:flex;flex-direction:column}.zjapp .page-scroll[data-v-77dc232d]{flex:1;overflow:auto;padding-bottom:100px}.zjapp .page-scroll[data-v-77dc232d] .item-text{line-height:normal}.zjapp .leader-comment[data-v-77dc232d]{padding:3px 0}.zjapp .leader-comment .comment-time[data-v-77dc232d]{color:#bbb;margin:10px 0}.zjapp .leader-comment .comment-item[data-v-77dc232d]{margin-bottom:15px}.zjapp .leader-comment p[data-v-77dc232d]{margin:5px 0}",""])},d6fa:function(t,e,a){"use strict";a("9ab7")},da1c:function(t,e,a){"use strict";a("163d");var i=a("65a8"),n={name:"ProblemHeader",props:{status:{type:String,default:""},statusText:{type:String,default:""},level:{type:String,default:""},isTimeout:{type:Boolean,default:!1},sentBackTimes:{type:[Number,String],default:0}},data:function(){return{edOptions:{}}},created:function(){var t=this;i.a.getOptions("紧急程度").then((function(e){t.edOptions=e}))}},r=(a("1f63"),a("17cc")),s=Object(r.a)(n,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",t._g({staticClass:"problem-detail-header border-bottom"},t.$listeners),[a("div",{staticClass:"status",class:{"待整改":"status-red","不合格":"status-red","已退回":"status-red","待复验":"status-orange","已放水待验收":"status-orange","检查中":"status-orange","待验收":"status-orange","已通过":"status-green","已整改":"status-green","已提交":"status-green","合格":"status-green","检查完毕":"status-green","已验收":"status-green","已关闭":"status-black","进度正常":"status-green","进度滞后":"status-red","验收中":"status-orange","已抽验":"status-green"}[t.status]},[t._v(t._s(t.statusText||t.status))]),"紧急"===t.level||"特急"===t.level?a("span",{staticClass:"urgent"},[t._v(t._s(t.edOptions[t.level]))]):t._e(),t.isTimeout?a("span",{staticClass:"timeout"},[t._v("超时")]):t._e(),t.sentBackTimes>0?a("span",{staticClass:"return"},[t._v("退回"+t._s(t.sentBackTimes)+"次")]):t._e(),t._t("operat")],2)}),[],!1,null,"0901aadd",null);e.a=s.exports},dc98:function(t,e,a){"use strict";a("0732")},e223:function(t,e,a){"use strict";var i=a("c40a").a,n=(a("0aac"),a("17cc")),r=Object(n.a)(i,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",t._g({ref:"content",staticClass:"drawing-con"},t.$listeners),[t.isDownloading?[a("p",[a("svg",{staticClass:"svg-loading",attrs:{viewBox:"0 0 80 80"}},[a("circle",{attrs:{cx:"40",cy:"40",r:"36"}})])]),a("p",{staticClass:"loading-text"},[t._v("正在下载...")])]:[t.error?t._e():a("canvas",{ref:"drawing-canvas"}),t.error?a("p",{staticClass:"error-text"},[t._v(t._s(t.error))]):t._e()]],2)}),[],!1,null,"fba5990a",null);e.a=r.exports},e617:function(t,e,a){var i=a("4dee");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);(0,a("85cb").default)("7cc643b4",i,!0,{sourceMap:!1,shadowMode:!1})},e900:function(t,e,a){"use strict";a.d(e,"a",(function(){return i})),a.d(e,"b",(function(){return n}));a("f548");function i(t){var e,a,i,n=(a=(e=t).backingStorePixelRatio||CanvasRenderingContext2D.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1,(window.devicePixelRatio||1)/a);1!==n&&(!function(t,e){for(var a in t)t.hasOwnProperty(a)&&e(t[a],a)}({fillRect:"all",clearRect:"all",strokeRect:"all",moveTo:"all",lineTo:"all",arc:[0,1,2],arcTo:"all",bezierCurveTo:"all",isPointinPath:"all",isPointinStroke:"all",quadraticCurveTo:"all",rect:"all",translate:"all",createRadialGradient:"all",createLinearGradient:"all"},(function(e,a){var i;t[a]=(i=t[a],function(){var t,a,r=Array.prototype.slice.call(arguments);if("all"===e)r=r.map((function(t){return t*n}));else if(Array.isArray(e))for(t=0,a=e.length;t<a;t++)r[e[t]]*=n;return i.apply(this,r)})})),t.stroke=(i=t.stroke,function(){this.lineWidth*=n,i.apply(this,arguments),this.lineWidth/=n}),t.fillText=function(t){return function(){var e=Array.prototype.slice.call(arguments);e[1]*=n,e[2]*=n,this.font=this.font.replace(/(\d+)(px|em|rem|pt)/g,(function(t,e,a){return e*n+a})),t.apply(this,e),this.font=this.font.replace(/(\d+)(px|em|rem|pt)/g,(function(t,e,a){return e/n+a}))}}(t.fillText),t.strokeText=function(t){return function(){var e=Array.prototype.slice.call(arguments);e[1]*=n,e[2]*=n,this.font=this.font.replace(/(\d+)(px|em|rem|pt)/g,(function(t,e,a){return e*n+a})),t.apply(this,e),this.font=this.font.replace(/(\d+)(px|em|rem|pt)/g,(function(t,e,a){return e/n+a}))}}(t.strokeText),t.extended=!0)}var n=function(t){var e,a;(e=t).getContext=(a=e.getContext,function(t){var e,n,r=a.call(this,t);return"2d"===t&&(e=r.backingStorePixelRatio||CanvasRenderingContext2D.webkitBackingStorePixelRatio||r.mozBackingStorePixelRatio||r.msBackingStorePixelRatio||r.oBackingStorePixelRatio||r.backingStorePixelRatio||1,(n=(window.devicePixelRatio||1)/e)>1&&(this.style.height=this.height+"px",this.style.width=this.width+"px",this.width*=n,this.height*=n)),i(r),r})}},e9ea:function(t,e,a){(t.exports=a("690e")(!1)).push([t.i,".zjapp .guide-box[data-v-ff0679ce]{flex:1;display:flex}.zjapp .page-scroll[data-v-ff0679ce]{flex:1;overflow:auto;padding-bottom:100px;transform:translateZ(0)}.zjapp .sublist[data-v-ff0679ce]{padding-left:25px;padding-top:1px;background-color:#fff}.zjapp .sublist>.sublist[data-v-ff0679ce]{padding-left:10px;padding-top:0}",""])},e9fe:function(t,e,a){"use strict";(function(t){a("5ab2"),a("6d57"),a("e10e"),a("cc57");var i=a("28f8"),n=(a("e204"),a("774b")),r=a("07d2"),s=a("e68e"),o=a("9864"),c=a("e89f"),l=(a("3122"),a("1b7e")),p=a("162a");function u(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,i)}return a}function d(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?u(Object(a),!0).forEach((function(e){Object(i.a)(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):u(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}e.a={name:"BusinessLogsDetail",components:{Scroller:n.default,Item:r.default,ItemImgList:s.a,UserContact:o.a},mixins:[c.a],data:function(){return{show:!1,isLoading:!0,id:"",title:"",logs:[],emptyTips:""}},methods:{open:function(t){if(this.id=t.id,this.title=t.title,this.show=!0,!this.id)return this.isLoading=!1,this.emptyTips="缺少参数",void $log.error("business-logs-detail, 缺少 id");this.getLogs()},close:function(){this.show=!1},getLogs:function(){var e=this;return this.isLoading=!0,l.a.getHasNetwork().then((function(t){if(!t)return $q.reject({errmsg:"当前无网络连接"})})).then((function(){return p.a.request("/online/business-log/get-log",{id:e.id}).then((function(a){if(!a)return Promise.reject({errmsg:"获取数据失败"});var i=a.findIndex((function(t){return"登记问题"===t.event}));i>=0&&i!==a.length-1&&(a=a.concat(a.splice(i,1)));var n=t.map(a||[],(function(t){var a;try{a=JSON.parse(t.diff||"{}")}catch(t){a={}}var i,n=e.getValueText(a.old),r=e.getValueText(a.new);try{i=JSON.parse(t.images||"[]")}catch(t){i=[]}var s={"登记问题":"blue","通知整改":"blue","完成整改":"green","退回":"red","变更整改人":"blue","复验通过":"green","非正常关闭":"gray","变更复验人":"blue","变更抄送人":"blue","变更责任单位":"blue","变更整改期限":"blue","修改分数":"blue","删除":"red","添加批示":"blue"}[t.event]||"";return d(d({},t),{},{statusColor:s,diff:a,oldValue:n,newValue:r,images:i,user:[{id:t.operator_id,name:t.operator_name,mobile:t.mobile,is_im_user:t.is_im_user}],isOpen:!0})}));console.log("logs ====",n),e.logs=n,t.isEmpty(e.logs)&&(e.emptyTips="暂无日志记录"),e.isLoading=!1}))})).catch((function(t){e.emptyTips=t.errmsg||"获取日志失败",e.isLoading=!1}))},getValueText:function(e){if(null==e)return"";t.isArray(e)||(e=[e]);var a=t.map(e,(function(e){return t.isObject(e)?e.name:e}));return t.isEmpty(a)?"-":a.join("、")},toggleLog:function(t){t.isOpen=!t.isOpen}}}}).call(this,a("391c"))},ef1c:function(t,e,a){var i=a("e9ea");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);(0,a("85cb").default)("2e832052",i,!0,{sourceMap:!1,shadowMode:!1})},ef5e:function(t,e,a){(t.exports=a("690e")(!1)).push([t.i,".zjapp .app-voice-play .play-main[data-v-d51aec2c]{min-height:46px;padding:8px 0;width:100%;height:100%;display:flex;align-items:center}.zjapp .app-voice-play .play-btn_style[data-v-d51aec2c]{width:30px;height:30px;border-radius:30px;display:flex;align-items:center;color:#fff;background:#4275e8;margin-right:10px}.zjapp .app-voice-play .start-icon[data-v-d51aec2c]{width:0;height:0;border-top:6px solid transparent;border-left:10px solid #fff;border-bottom:6px solid transparent;margin-left:11.5px}.zjapp .app-voice-play .play-btn_middle i[data-v-d51aec2c]{width:2px;height:12px;display:inline-block;background:#f2f2f2}.zjapp .app-voice-play .play-btn_middle i[data-v-d51aec2c]:first-child{margin-right:5px;margin-left:10px}.zjapp .app-voice-play .play-btn_loadding .loading-icon[data-v-d51aec2c]{margin-left:7px}.zjapp .app-voice-play .play-progress[data-v-d51aec2c]{flex:1;height:100%;display:flex;align-items:center;justify-content:center;position:relative}.zjapp .app-voice-play .play-progress_dotted[data-v-d51aec2c],.zjapp .app-voice-play .play-progress_solidLine[data-v-d51aec2c]{height:2px;display:inline-block;top:50%}.zjapp .app-voice-play .play-progress_solidLine[data-v-d51aec2c]{width:40px;background:#4275e8}.zjapp .app-voice-play .play-progress_dotted[data-v-d51aec2c]{width:40px;background:#f6f6f6}.zjapp .app-voice-play .play-progress_spot[data-v-d51aec2c]{width:4px;height:4px;border-radius:4px;position:absolute;left:0;top:50%;transform:translateY(-50%);background:#4275e8}.zjapp .app-voice-play .play-progress_layer[data-v-d51aec2c]{height:100%;flex:1}.zjapp .app-voice-play .play-progress_slider[data-v-d51aec2c] .play-progress_btn{width:80px;height:14px;line-height:14px;border-radius:14px;color:#fff;background:#4275e8;text-align:center;font-size:12px}.zjapp .app-voice-play .play-progress_slider.disabled-animation[data-v-d51aec2c] .van-slider__bar{transition:initial!important}.zjapp .app-voice-play .play-progress_slider.van-slider--disabled[data-v-d51aec2c]{opacity:1}.zjapp .app-voice-play .play-delete[data-v-d51aec2c]{margin-left:10px;color:#999}.zjapp .app-voice-play .play-text[data-v-d51aec2c]{margin:10px 0;color:#333;background:#f6f6f6;padding:10px;font-size:14px}",""])},f1e4:function(t,e,a){"use strict";(function(t){a("5ab2"),a("e10e");var i=a("28f8"),n=(a("9e76"),a("6d57"),a("9a33"),a("f548"),a("cc57"),a("4ad6")),r=a("e89f"),s=a("bcc7"),o=a("3122"),c=a("6e1b"),l=a("c130"),p=a("0636");function u(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,i)}return a}function d(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?u(Object(a),!0).forEach((function(e){Object(i.a)(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):u(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}e.a={name:"CheckGuideDetail",components:{},mixins:[r.a],data:function(){return{show:!1,isLoading:!0,isImageDownloading:!1,title:"",content:[],module:"",itemId:""}},methods:{openPopup:function(e){var a=this;for(var i in this.value=!0,this.show=!0,this.module=e.module,this.itemId=e.itemId,this.$emit("open"),e)this[i]=e[i];this.checkType={check:31,"check-safety":36,"check-quality":37,"measure-v3":41,process:32,"fly-inspect":101}[this.module],this.isLoading=!0,("special-inspect"===this.module?c.a.getSpecialInspectCheckItemDetail(this.itemId):"templet-plan"===this.module?l.a.getTempletDetail(this.itemId):"material"===this.module?p.a.getMaterialDetail(this.itemId):s.a.getCheckItem(this.itemId,this.checkType)).then((function(e){console.log("checkitemData",e),e=e||{},a.checkitemData=e,a.title=e.full_name||e.name,"special-inspect"!==a.module&&"inspect"!==a.module&&"fly-inspect"!==a.module&&"material"!==a.module||(e.content=e.guideline||e.content);var i=e.content?e.content.trim():"";if(i=(i=(i=(i=(i=i.replace(/<\/p><p>/gm,"\n")).replace(/<p>/gm,"")).replace(/<\/p>/gm,"")).replace(/<br>/gm,"")).replace(/<br \/>/gm,""),/(<img[^\>]*>)/gm.test(i)){var n=i.split(/(<img[^\>]*>)/gm);(n=n.filter((function(t){return!!t}))).forEach((function(t,e){t&&!/^\s*\n/.test(t)&&e&&!/\n\s*$/.test(n[e-1])&&(n[e]="\n"+t)})),i=n.join("")}var r=i?i.split("\n"):[];a.content=t.map(r,(function(t,e){var a;if(/<img([\s\S]*)>/gm.test(t)){var i=t.split(/\ssrc="([^"]*)"/gm)[1],n=i?i.match(/[\w|-]{36}/gm)[0]:(new Date).getTime()+"-"+e;a={isImg:!0,src:"",url:i,status:"pending",id:n,ready:!0}}else a={isImg:!1,val:t};return a})),a.downloadImage(),a.isLoading=!1})).catch((function(t){$log.log(t)}))},closePopup:function(){this.value=!1,this.show=!1,this.$emit("close")},getThumbnail:function(t){return"pending"===t.status?o.a.IMAGE_LOADING:"rejected"===t.status?o.a.IMAGE_RELOAD:"dev"===APP_ENV?t.url:"fulfilled"===t.status?t.src:($log.log("检查指引-显示图片：",t),o.a.IMAGE_PLACEHOLD)},imgError:function(t,e){$log.error("检查指引-加载图片出现错误：",t);var a=d({},t);a.status="rejected",this.$set(this.content,e,a)},downloadImage:function(e){var a=this;e=e?[e]:this.imageList(),t.each(e,(function(e){var i=d({},e),n=t.map(a.content,(function(t){return t.id})).indexOf(e.id);o.a.isNeedDownload(e.url).then((function(t){t?o.a.download(e.url).then((function(t){i.status="fulfilled",i.src=o.a.fixUrl(t),a.$set(a.content,n,i)})).catch((function(t){$log.error("检查指引-下载图片：",t)})):(i.status="fulfilled",i.src=o.a.fixUrl(o.a.getPathFromUrl(e.url)),a.$set(a.content,n,i))}))}))},imageList:function(){return t.filter(this.content,(function(t){return t.isImg}))},imgClick:function(e){var a=this;if("pending"===e.status)return!1;if("rejected"===e.status)return this.downloadImage(e),$log.log("检查指引-点击重新加载-重新下载图片：",e),!1;var i=this.imageList(),r=t.map(i,(function(t){return t.id})).indexOf(e.id);i=t.map(i,(function(t){return a.getThumbnail(t)})),n.a.openImageBrowser(i,r)}}}}).call(this,a("391c"))},f369:function(t,e,a){"use strict";var i=a("fd50"),n=a("bcc7"),r=a("329b"),s=a("d1d1").a,o=(a("3411"),a("17cc")),c={name:"CheckGuideList",components:{GuideList:Object(o.a)(s,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"guide-box"},[!t.isLoading&&t.listData.length?a("div",{staticClass:"page-scroll"},t._l(t.listData,(function(e,i){return a("div",{key:i},[a("item",{attrs:{border:"bottom","icon-right":e.subitem&&e.subitem.length?e.isOpen?"arrow-up":"arrow-down":"arrow-right"},on:{click:function(a){t.clickItem(e)}}},[a("div",{staticClass:"item-text fw-b color-blue one-line"},[t._v(t._s(e.item_name))])]),e.isOpen?t._l(e.subitem,(function(e,i){return a("div",{key:i,staticClass:"sublist"},[a("item",{staticClass:"pl0",attrs:{border:"bottom","icon-right":e.subitem&&e.subitem.length?e.isOpen?"arrow-up":"arrow-down":"arrow-right"},on:{click:function(a){t.clickItem(e)}}},[a("div",{staticClass:"item-text checkitem-list-name"},[t._v(t._s(e.item_name))])]),e.isOpen?t._l(e.subitem,(function(e,i){return a("div",{key:i,staticClass:"sublist"},[a("item",{staticClass:"pl0",attrs:{border:"bottom","icon-right":e.subitem&&e.subitem.length?e.isOpen?"arrow-up":"arrow-down":"arrow-right"},on:{click:function(a){t.clickItem(e)}}},[a("div",{staticClass:"item-text checkitem-list-name"},[t._v(t._s(e.item_name))])]),e.isOpen?t._l(e.subitem,(function(e,i){return a("div",{key:i,staticClass:"sublist"},[a("item",{staticClass:"pl0",attrs:{border:"bottom","icon-right":e.subitem&&e.subitem.length?e.isOpen?"arrow-up":"arrow-down":"arrow-right"},on:{click:function(a){t.clickItem(e)}}},[a("div",{staticClass:"item-text checkitem-list-name"},[t._v(t._s(e.item_name))])])],1)})):t._e()],2)})):t._e()],2)})):t._e()],2)}))):t._e(),a("loading-status",{attrs:{"is-loading":t.isLoading,"is-empty":!t.listData.length,"empty-text":"没有检查项"}})],1)}),[],!1,null,"ff0679ce",null).exports},mixins:[a("e89f").a],data:function(){return{show:!1}},methods:{openPopup:function(t){var e=this;this.value=!0,this.show=!0,this.$nextTick((function(){e.$refs["guide-list"].init(t),e.$emit("open")}))},closePopup:function(){this.value=!1,this.show=!1,this.$emit("close")}}},l=Object(o.a)(c,(function(){var t=this.$createElement,e=this._self._c||t;return e("transition",{attrs:{name:"slide-right"}},[this.show?e("page-content",{attrs:{mode:"dialog",title:"检查指引","on-close":this.closePopup}},[e("guide-list",{ref:"guide-list"})],1):this._e()],1)}),[],!1,null,null,null).exports,p=!1;p||(p=new(r.default.extend(l))({el:document.createElement("div")}),document.body.appendChild(p.$el));var u=p,d=a("515e"),h=a("91c1").a,m=(a("dc98"),Object(o.a)(h,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.show?a("div",{staticClass:"main",style:{top:t.contentTop+"px"}},[a("i",{staticClass:"arrow"}),a("div",{staticClass:"content",on:{click:function(e){return e.target!==e.currentTarget?null:t.closePopup(e)}}},[a("transition",{attrs:{name:"slide-down"},on:{enter:function(e){t.isOpening=!0},"after-enter":function(e){t.isOpening=!1},leave:function(e){t.isClosing=!0},"after-leave":t.afterClose}},[t.showList?a("div",{staticClass:"box",style:{height:t.listHeight+"px"}},t._l(t.data,(function(e,i){return a("div",{key:i,class:{"border-bottom":t.data.length>1,"box-single":1===t.data.length}},[a("div",{staticClass:"detail-hd",class:{"border-bottom":t.data.length<=1,"detail-hd-single":t.data.length<=1},on:{click:function(a){t.toggleItem(e)}}},[t.data.length>1?a("i",{class:{"detail-arrow-right":!e.isOpen,"detail-arrow-down":e.isOpen}}):t._e(),a("div",{staticClass:"detail-title"},[t._v(t._s(e.name))])]),t.data.length<=1||e.isOpen?a("div",{staticClass:"detail-bd",class:{"detail-bd-single":t.data.length<=1}},[t._l(e.textArr,(function(e,i){return a("p",{key:i,staticClass:"text-line"},[t._v("\n              "+t._s(e)+"\n            ")])})),a("item-img-list",{attrs:{editabled:!1},model:{value:e.contentImage,callback:function(a){t.$set(e,"contentImage",a)},expression:"item.contentImage"}}),a("loading-status",{attrs:{"is-empty":!e.textArr.length&&!e.contentImage.length,"empty-text":"PC端未设置检查指引"}})],2):t._e()])}))):t._e()])],1)]):t._e()}),[],!1,null,"2cac8864",null).exports),f=!1;f||(f=new(r.default.extend(m))({el:document.createElement("div")}),document.body.appendChild(f.$el));var g=f,b={name:"CheckGuide",components:{},props:{module:{type:String,default:""},mode:{type:String,default:"page"},itemId:{type:String,default:""},itemIds:{type:Array,default:function(){return[]}},batchId:{type:String,default:""},sectionId:{type:String,default:""},options:{type:Array,default:function(){return[]}},optionsPromise:{type:Function,default:function(){}},beforeOpen:{type:Function,default:function(){}}},data:function(){return{isLoading:!1}},methods:{openCheckGuide:function(){var t=this,e=this.beforeOpen&&this.beforeOpen();e instanceof Promise||(e=Promise.resolve(e)),e.then((function(e){!1!==e&&("drop"===t.mode?g.openPopup({itemIds:t.itemIds,el:t.$refs["check-guide-btn"],options:t.options}):("templet-plan"===t.module?i.a.when(!1):t.itemId&&t.sectionId?n.a.hasChildSectionCheckItem(t.itemId,t.sectionId):t.itemId?n.a.hasChildCheckItem(t.itemId):i.a.when(!0)).then((function(e){e?u.openPopup({module:t.module,itemId:t.itemId,batchId:t.batchId,sectionId:t.sectionId,options:t.options}):d.a.openPopup({itemId:t.itemId,module:t.module})})))}))}}},v=Object(o.a)(b,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{ref:"check-guide-btn",staticClass:"header-btn",on:{click:function(e){t.openCheckGuide()}}},[a("icon",{attrs:{name:"nav-info"}})],1)}),[],!1,null,null,null);e.a=v.exports},f3d7:function(t,e,a){"use strict";a("9120")}}]);