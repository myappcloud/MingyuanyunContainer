(window.webpackJsonp_module_entry_zjapp_=window.webpackJsonp_module_entry_zjapp_||[]).push([["chunk-2e6abd4d","chunk-739f37c8","chunk-2d2263f6"],{"16ff":function(t,e,o){var i=o("39e4");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);(0,o("85cb").default)("801e728a",i,!0,{sourceMap:!1,shadowMode:!1})},1803:function(t,e,o){var i=o("cc26");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);(0,o("85cb").default)("3a3588fe",i,!0,{sourceMap:!1,shadowMode:!1})},"19a9":function(t,e,o){"use strict";o("7d4e")},"2c51":function(t,e,o){"use strict";o.r(e);o("9e76");var i=o("3e83"),n=o("4c09"),r=(o("6d57"),o("1b7e")),a=o("07d2"),s=o("774b"),l=o("fa4f"),c=o("6bf2"),p=o.n(c),u=o("8474"),d=o("f97c"),h=o("c656"),g=o("3122"),f=o("6f9e"),m=o("e2a7"),b=o("83e4"),x={name:"ImageProcessIndex",components:{Item:a.default,Scroller:s.default,ItemList:l.default},data:function(){return{model:{imageProcessLimit:10,imageProcessData:{data:[]}},isLoading:!1,pageSize:10,page:1,renderData:[],hasNextPage:!1,type:"common",dateRange:{start:"",end:""},emptyTips:"暂无内容",defaultData:{},proj_id:"",bidsection_id:"",showProcessMenu:!1,processMenuActions:[]}},created:function(){$log.log("首次形象进度");var t=this.$route.query,e=t.start_date,o=t.end_date;this.dateRange={start:e||p()().startOf("month").format("YYYY-MM-DD"),end:o||p()().format("YYYY-MM-DD")},f.a.$on("upDateList",this.init)},activated:function(){if(!this.$router.isBack){var t=this.$route.query,e=t.start_date,o=t.end_date,i=t.bidsection_id;this.bidsection_id=i||"",this.dateRange={start:e||p()().subtract(6,"month").format("YYYY-MM-DD"),end:o||p()().format("YYYY-MM-DD")},this.proj_id=this.$route.query.proj_id,this.init()}},methods:{init:function(){var t=this;this.page=1,this.getList(),h.a.getPivotalProcessModules().then((function(e){console.log("processMenuActions",e),console.log(t.$store.state.global),t.processMenuActions=e}))},checkNetWork:function(){var t=this;return r.a.getHasNetwork().then((function(e){if(!e)return t.type="error",Promise.reject({errmsg:"当前网络无法同步数据"});t.emptyTips="暂无数据"}))},getList:function(){var t=this;return this.checkNetWork().then((function(){return t.isLoading=!0,Object(b.d)({page:t.page,page_size:t.pageSize,proj_id:t.proj_id||d.a.getDefaultProject().id,bidsection_id:t.bidsection_id,start_time:t.dateRange.start,end_time:t.dateRange.end})})).then((function(e){var o;(e.data.forEach((function(t){t.process_status="进度正常"===t.process_status?"正常":"滞后";var e=JSON.parse(t.image_file||"[]");t.thumbnail=e.length&&e[0].url?g.a.getThumbnailFromUrl(e[0].url):"static/photo-empty.png"})),t.hasNextPage=!!e.hasNext,1===t.page)?t.renderData=e.data:(o=t.renderData).push.apply(o,Object(n.a)(e.data))})).catch((function(e){$log.log("形象进度获取数据失败",e),t.type="error",t.emptyTips=e.errmsg||"加载数据失败",t.renderData=[],m.a.alert(e.errmsg||e)})).finally((function(){t.isLoading=!1}))},timeFomate:function(t){return p()(t).format("MM-DD HH:mm")},selectDate:function(t){var e,o=this,i={from:"",to:""};"end"===t?(e=this.newDate(this.dateRange.end),i.from=this.newDate(this.dateRange.start)||"",i.to=""):(e=this.newDate(this.dateRange.start),i.from="",i.to=this.newDate(this.dateRange.end)||""),u.a.open({date:e,type:"date",min:i.from,max:i.to,onConfirm:function(e){var i=p()(e).format("YYYY-MM-DD");"start"===t?(o.dateRange.start=i,o.defaultData.start=i):(o.dateRange.end=i,o.defaultData.end=i),o.init()}})},newDate:function(t){if(!t)return new Date;if("object"===Object(i.a)(t))return t instanceof Date?t:new Date;var e=t.match(/\d+/g);if(e.length<3)return"";for(var o=0;o<e.length;o++)e[o]=parseInt(e[o]);return new Date(e[0],e[1]-1,e[2],e[3]||0,e[4]||0,e[5]||0)},addImageProcess:function(){var t=this;this.checkNetWork().then((function(e){t.$router.push("/image-process-add")})).catch((function(t){m.a.alert(t.errmsg)}))},imageProcessDetail:function(t){this.$router.push("/image-process-detail/".concat(t))},expandList:function(){this.page++,this.getList()},goPivotalProcess:function(t){"pile"!==t.type?this.$router.push({name:"PivotalProcessIndex",query:{projId:this.proj_id||d.a.getDefaultProject().id,type:t.type}}):this.$router.push({name:"ReportPileAcceptList",query:{projId:this.proj_id||d.a.getDefaultProject().id}})}}},v=(o("9d1e"),o("17cc")),w=Object(v.a)(x,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("page-content",{attrs:{title:"形象进度"}},[o("div",{directives:[{name:"show",rawName:"v-show",value:t.processMenuActions.length,expression:"processMenuActions.length"},{name:"track",rawName:"v-track",value:"形象进度-点击关键工序",expression:"'形象进度-点击关键工序'"}],staticClass:"header-btn",attrs:{slot:"header-bar-right"},on:{click:function(e){t.showProcessMenu=!0}},slot:"header-bar-right"},[t._v("\n    关键工序进度\n  ")]),o("item",{staticClass:"bg-sub-theme",attrs:{mode:"edit"}},[o("div",{staticClass:"item-label create-time"},[t._v("创建时间")]),o("div",{staticClass:"item-con align-r"},[o("div",{staticClass:"report-date-item",on:{click:function(e){t.selectDate("start")}}},[t._v(t._s(t.dateRange.start))]),o("span",{staticClass:"report-date-split"},[t._v("至")]),o("div",{staticClass:"report-date-item",on:{click:function(e){t.selectDate("end")}}},[t._v(t._s(t.dateRange.end))])])]),o("scroller",{attrs:{"has-next":t.hasNextPage,"is-empty":!t.renderData.length},on:{loadNext:t.expandList}},[t._l(t.renderData,(function(e,i){return o("item-list",{key:i,attrs:{img:e.thumbnail,detail:e.building_name,title:e.remark,footer:t.timeFomate(e.created_on),status:e.process_status,"type-tag":e.type},on:{click:function(o){t.imageProcessDetail(e.id)}}})})),o("loading-status",{attrs:{type:t.type,"is-loading":t.isLoading,"is-empty":!t.isLoading&&!t.renderData.length,"empty-text":t.emptyTips}})],2),t.proj_id?t._e():o("app-button-group",{attrs:{"fixed-bottom":""}},[o("app-button",{on:{click:t.addImageProcess}},[o("van-icon",{attrs:{name:"plus"}}),t._v("新增形象进度 ")],1)],1),o("van-action-sheet",{attrs:{actions:t.processMenuActions,"cancel-text":"取消"},on:{cancel:function(e){t.showProcessMenu=!1},select:t.goPivotalProcess},model:{value:t.showProcessMenu,callback:function(e){t.showProcessMenu=e},expression:"showProcessMenu"}})],1)}),[],!1,null,"22e15ec2",null);e.default=w.exports},"38a7":function(t,e,o){"use strict";o("16ff")},"39e4":function(t,e,o){(t.exports=o("690e")(!1)).push([t.i,".zjapp .content[data-v-73ce749f]{display:flex;flex-direction:column;justify-content:flex-end;position:fixed;top:0;left:0;width:100%;height:100%;background-color:rgba(0,0,0,.4);overflow:hidden}",""])},"4aef":function(t,e,o){"use strict";var i=o("dd16").a,n=o("17cc"),r=Object(n.a)(i,(function(){var t=this.$createElement;return(this._self._c||t)("span",{class:this.classSet[this.status]},[this._v(this._s(this.text||this.status))])}),[],!1,null,null,null);e.a=r.exports},"774b":function(t,e,o){"use strict";o.r(e);var i=o("d18d").a,n=(o("b225"),o("17cc")),r=Object(n.a)(i,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{ref:"scroll-warp",staticClass:"scroll-warp",class:{"scroll-warp-pulling":t.pulling,"scroll-warp-complete":!t.hasNext&&!t.isEmpty,"scroll-warp-empty":t.isEmpty},style:{"padding-bottom":t.numberKeyboardCoverHeight+"px"},on:{scroll:t.onScroll,touchstart:t.onTouchstart,touchmove:t.onTouchmove,touchend:t.onTouchend}},[t.allowPullDown?o("div",{staticClass:"pull-refresh-warp",style:{height:t.pullDist+"px"}},[o("div",{staticClass:"pull-refresh"},[o("div",{staticClass:"animation-refresher",class:{refreshing:t.refreshing}}),t.updateTime?o("p",{staticClass:"pull-refresh-date"},[t._v("最后成功同步："+t._s(t.updateTime))]):t._e()])]):t._e(),t._t("default"),t.loading?o("div",{staticClass:"page-loading"},[o("svg",{staticClass:"svg-loading",attrs:{viewBox:"0 0 80 80"}},[o("circle",{attrs:{cx:"40",cy:"40",r:"36"}})])]):t._e(),t.hasNext||t.isEmpty?t._e():[t.$slots.end?t._t("end"):t._e(),!t.$slots.end&&t.endText?o("div",{staticClass:"end-text"},[t._v("\n      "+t._s(t.endText)+"\n    ")]):t._e()]],2)}),[],!1,null,"2b1a346c",null);e.default=r.exports},"7d4e":function(t,e,o){var i=o("c59b");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);(0,o("85cb").default)("62c5f5a2",i,!0,{sourceMap:!1,shadowMode:!1})},"83e4":function(t,e,o){"use strict";o.d(e,"d",(function(){return a})),o.d(e,"a",(function(){return s})),o.d(e,"c",(function(){return l})),o.d(e,"b",(function(){return c})),o.d(e,"f",(function(){return p})),o.d(e,"e",(function(){return u}));var i=o("5e8d"),n=o("162a"),r=o("bcc78");function a(t){return Object(i.a)().then((function(){var e=r.a.imageProcessList.url;return n.a.request(e,t)}))}function s(t){return Object(i.a)().then((function(){var e=r.a.imageProcessDeleted.url;return n.a.post(e,null,t)}))}function l(t){return Object(i.a)().then((function(){var e=r.a.imageProcessDetails.url;return n.a.request(e,t)}))}function c(t){return Object(i.a)().then((function(){var e=r.a.imageProcessBuildingList.url;return n.a.request(e,t)}))}function p(t){return Object(i.a)().then((function(){var e=r.a.imageProcessSave.url;return n.a.post(e,null,t)}))}function u(){return Object(i.a)().then((function(){var t=r.a.imageProcessTypeList.url;return n.a.request(t)}))}},8474:function(t,e,o){"use strict";var i=o("329b"),n=(o("ed6c"),o("591c")),r=o("e89f"),a=o("4360"),s={name:"DateSelectDialog",components:{DatetimePicker:n.a},mixins:[r.a],store:a.a,data:function(){return{show:!1,showCon:!1,date:"",type:"",min:"",max:"",confirmFn:function(){}}},watch:{show:function(t){var e=this;t&&this.$nextTick((function(){e.showCon=!0}))}},methods:{open:function(t){this.date=t.date,this.type=t.type||"datetime",this.min=t.min||void 0,this.max=t.max||void 0,this.confirmFn=t.onConfirm,this.show=!0},close:function(){this.showCon=!1},afterClose:function(){this.show=!1},onConfirm:function(t){this.confirmFn&&this.confirmFn(t),this.close()},onCancel:function(t){this.close()}}},l=(o("38a7"),o("17cc")),c=Object(l.a)(s,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return t.show?o("div",{staticClass:"content",on:{click:function(e){return e.target!==e.currentTarget?null:t.close(e)}}},[o("transition",{attrs:{name:"slide-up"},on:{"after-leave":t.afterClose}},[t.showCon?o("van-datetime-picker",{attrs:{type:t.type,"min-date":t.min,"max-date":t.max},on:{confirm:t.onConfirm,cancel:t.onCancel},model:{value:t.date,callback:function(e){t.date=e},expression:"date"}}):t._e()],1)],1):t._e()}),[],!1,null,"73ce749f",null).exports,p=!1;p||(p=new(i.default.extend(c))({el:document.createElement("div")}),document.body.appendChild(p.$el));e.a=p},"967a":function(t,e,o){"use strict";var i=o("8d95");e.a={REPAIR_DEADLINE_STATUS:{name:"repair_deadline_status",status:["待整改"],module:[i.a.CHECK]}}},"9d1e":function(t,e,o){"use strict";o("1803")},"9d55":function(t,e,o){(t.exports=o("690e")(!1)).push([t.i,'.zjapp .scroll-warp[data-v-2b1a346c]{flex:1;overflow:auto;-webkit-overflow-scrolling:touch}.zjapp .scroll-warp-pulling[data-v-2b1a346c]{overflow:hidden}.zjapp .scroll-warp-complete[data-v-2b1a346c]:after{content:"";display:block;height:100px}.zjapp .scroll-warp-empty[data-v-2b1a346c]{display:flex;flex-direction:column}.zjapp .pull-refresh-warp[data-v-2b1a346c]{position:relative;height:0;overflow:hidden}.zjapp .pull-refresh[data-v-2b1a346c]{position:absolute;left:0;bottom:0;height:70px;width:100%;padding:6px;text-align:center}.zjapp .pull-refresh-date[data-v-2b1a346c]{margin-top:4px;height:16px;line-height:16px;font-size:12px;color:#bcbcbc}.zjapp .page-loading[data-v-2b1a346c]{padding:10px;text-align:center}.zjapp .end-text[data-v-2b1a346c]{color:#c8c8c8;background:#f4f4f4;position:relative;line-height:76px;height:76px;text-align:center}.zjapp .end-text[data-v-2b1a346c]:after,.zjapp .end-text[data-v-2b1a346c]:before{content:"";position:absolute;width:48px;height:1px;background:#e4e4e4;top:50%;margin-top:-1px}.zjapp .end-text[data-v-2b1a346c]:after{left:50%;transform:translateX(-92px)}.zjapp .end-text[data-v-2b1a346c]:before{right:50%;transform:translateX(90px)}.zjapp .end-slot[data-v-2b1a346c]{padding:30px;line-height:18px;text-align:center;color:#c8c8c8}',""])},b225:function(t,e,o){"use strict";o("ef48")},c59b:function(t,e,o){(t.exports=o("690e")(!1)).push([t.i,".zjapp .item-list{position:relative;padding:10px;display:flex;align-items:center;background-color:#fff;min-height:100px}.zjapp .item-list .img{display:block;width:80px;height:80px;background:no-repeat 50%;background-size:cover;background-color:#ddd}.zjapp .item-list .item-list-con{flex:1;padding:0 15px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.zjapp .item-list .item-list-con .title{height:30px;line-height:24px;color:#111;font-size:16px;padding-top:6px;margin:0;padding-right:10px;margin-right:-10px;white-space:nowrap!important;overflow:hidden!important;text-overflow:ellipsis!important;font-weight:400}.zjapp .item-list .item-list-con .title .type-tag{display:inline-block;height:16px;line-height:16px;padding:0 4px;border-radius:2px;border:1px solid #4275e8;color:#4275e8;font-size:12px;zoom:.8;margin:3px 0 0 0;vertical-align:text-top}.zjapp .item-list .item-list-con .text{height:30px;line-height:24px;color:#8c8c8c;padding-bottom:6px;padding-right:11px;margin-right:-10px}.zjapp .item-list .item-list-con .text,.zjapp .item-list .item-list-con .time{font-size:14px;white-space:nowrap!important;overflow:hidden!important;text-overflow:ellipsis!important}.zjapp .item-list .item-list-con .time{height:20px;line-height:20px;color:#b3b3b3;padding-right:11px!important;margin-right:-10px!important}.zjapp .item-list .item-list-con .time .ion{color:#a6a6a6;font-size:20px;font-weight:700;margin-right:5px;vertical-align:top}.zjapp .item-list .item-list-r{width:60px;line-height:18px;text-align:center}.zjapp .item-list .item-list-status{min-width:4em;line-height:18px;text-align:center;white-space:normal;font-size:14px}.zjapp .item-list .icon-unread{display:inline-block;text-align:center;width:12px;height:12px;border-radius:6px;background-color:red}.zjapp .item-list .icon-return,.zjapp .item-list .icon-timeout,.zjapp .item-list .icon-urgent{display:inline-block;width:16px;height:16px;text-align:center;line-height:16px;font-size:12px;font-style:normal;color:#fff;border-radius:2px;-webkit-border-radius:2px;vertical-align:top;margin-top:4px;margin-right:5px}.zjapp .item-list .icon-timeout{background:#964bfe}.zjapp .item-list .icon-return{background:#fe8b00}.zjapp .item-list .icon-urgent{background:#ff3c3d}.zjapp .item-list .icon-return:last-child,.zjapp .item-list .icon-timeout:last-child,.zjapp .item-list .icon-urgent:last-child{margin-right:0}.zjapp .item-list-tip{height:70px;line-height:60px;color:#b4b4b4;text-align:center}.zjapp .status-new-tag{position:absolute;right:0;top:0;width:50px;height:50px;overflow:hidden;z-index:10}.zjapp .status-new-tag>.tag{position:absolute;right:-32px;bottom:22px;height:20px;line-height:20px;width:100px;color:#fff;font-size:12px;transform:rotate(45deg);text-align:center;border-width:1px;border-style:solid}.zjapp .time-status{font-size:10px;color:#999}",""])},cc26:function(t,e,o){(t.exports=o("690e")(!1)).push([t.i,'.zjapp .scroll-warp[data-v-22e15ec2]{height:100%}.zjapp .report-date-item[data-v-22e15ec2]{position:relative;border:none;display:inline-block;vertical-align:top;margin-top:2px;height:30px;line-height:30px;padding:0 6px;background-color:#fff;font-size:15px;color:#111;border-radius:15px}@media screen and (-webkit-min-device-pixel-ratio:1.5){.zjapp .report-date-item[data-v-22e15ec2]:before{border-radius:6px;content:"";position:absolute;top:-25%;left:-25%;width:150%;height:150%;transform:translateZ(0) scale(.66667);-webkit-transform:translateZ(0) scale(.66667);pointer-events:none}}@media screen and (-webkit-min-device-pixel-ratio:2){.zjapp .report-date-item[data-v-22e15ec2]:before{border-radius:8px;content:"";position:absolute;top:-50%;left:-50%;width:200%;height:200%;transform:translateZ(0) scale(.5);-webkit-transform:translateZ(0) scale(.5);pointer-events:none}}@media screen and (-webkit-min-device-pixel-ratio:2.625){.zjapp .report-date-item[data-v-22e15ec2]:before{border-radius:8px;content:"";position:absolute;top:-50%;left:-50%;width:200%;height:200%;transform:translateZ(0) scale(.5);-webkit-transform:translateZ(0) scale(.5);pointer-events:none}}@media screen and (-webkit-min-device-pixel-ratio:3){.zjapp .report-date-item[data-v-22e15ec2]:before{border-radius:12px;content:"";position:absolute;top:-100%;left:-100%;width:300%;height:300%;transform:translateZ(0) scale(.33333);-webkit-transform:translateZ(0) scale(.33333);pointer-events:none}}@media screen and (-webkit-min-device-pixel-ratio:4){.zjapp .report-date-item[data-v-22e15ec2]:before{border-radius:16px;content:"";position:absolute;top:-150%;left:-150%;width:400%;height:400%;transform:translateZ(0) scale(.25);-webkit-transform:translateZ(0) scale(.25);pointer-events:none}}.zjapp .report-date-split[data-v-22e15ec2]{display:inline-block;vertical-align:top;margin:2px 4px 0 4px;height:30px;line-height:30px;font-size:12px;color:#111}.zjapp .create-time[data-v-22e15ec2]{width:auto}',""])},d18d:function(t,e,o){"use strict";(function(t){o("2b45");var i,n=o("4360"),r=o("48f4"),a=o("162a"),s=o("e2a7"),l=o("a500"),c=o("6f9e"),p={};e.a={name:"Scroller",props:{buildingId:{type:String,default:""},hasNext:{type:Boolean,default:!1},isEmpty:{type:Boolean,default:!1},isSync:{type:Boolean,default:!0},endText:{type:String,default:""},memoryScrollTop:{type:Boolean,default:!0},keepScrollTop:{type:Boolean},hasPullDown:{type:Boolean,default:!0},onPullDown:{type:Function}},data:function(){return{pullDist:0,refreshing:!1,pulling:!1,loading:!1,scrollTop:0,isCurrKeyboard:!1,gapBottom:0}},computed:{allowPullDown:function(){return this.hasPullDown&&(!!this.$listeners.pullDown||!!this.onPullDown)},updateTime:function(){return n.a.state.global.businessDownloadTime},numberKeyboardCoverHeight:function(){return n.a.state.global.isNumberInputOpen?n.a.state.global.numberKeyboardHeight-this.gapBottom:0}},mounted:function(){var t=this;c.a.$on("numberKeyboardOpen",this.onNumberKeyboardOpen),this.$nextTick((function(){var e=t.$refs["scroll-warp"]&&t.$refs["scroll-warp"].getBoundingClientRect&&t.$refs["scroll-warp"].getBoundingClientRect();e&&(t.gapBottom=document.documentElement.clientHeight-e.bottom),t.$el&&t.$el.addEventListener("focus",(function(e){var o=e&&e.target,i=o&&o.tagName&&o.tagName.toLowerCase();if("input"===i||"textarea"===i){window.addEventListener("resize",(function e(){var i=o.getBoundingClientRect(),n=t.$el.getBoundingClientRect(),r=i.bottom-n.bottom;r>0&&t.scrollBy(r),window.removeEventListener("resize",e,!1)}),!1)}}),!0)}))},destroyed:function(){c.a.$off("numberKeyboardOpen",this.onNumberKeyboardOpen)},activated:function(){var t=this.keepScrollTop||this.$router.isBack&&this.memoryScrollTop;this.scrollTop&&t&&(this.$refs["scroll-warp"].scrollTop=this.scrollTop)},deactivated:function(){this.memoryScrollTop&&(this.scrollTop=this.$refs["scroll-warp"].scrollTop)},methods:{onScroll:function(t){var e=this,o=this.$refs["scroll-warp"].scrollTop,i=this.$refs["scroll-warp"].scrollHeight;if(o+this.$refs["scroll-warp"].clientHeight>=i-5&&!this.loading&&this.hasNext){this.loading=!0;var n=this.$listeners.loadNext();n&&n.then&&"function"==typeof n.then?n.then((function(){e.loading=!1})):this.loading=!1}this.$emit("scroll",t)},getTouchDiretion:function(t){if(!(p&&t&&t.touches&&t.touches[0]))return"";var e=t.touches[0].clientX,o=t.touches[0].clientY;return Math.abs(o-p.y)>Math.abs(e-p.x)&&Math.abs(o-p.y)>=3?o>p.y?"down":"up":""},onTouchstart:function(t){this.allowPullDown&&t.touches&&1===t.touches.length&&(p={x:t.touches[0].clientX,y:t.touches[0].clientY,scrollTop:this.$refs["scroll-warp"].scrollTop,pullDist:this.pullDist})},onTouchmove:function(t){if(this.allowPullDown&&t.touches&&1===t.touches.length){var e=this.$refs["scroll-warp"].scrollTop,o=t.touches[0].clientY,i=o-p.y,n=this.getTouchDiretion(t);"down"===n?!this.refreshing&&e<=0?(this.pulling=!0,this.pullDist=(i-p.scrollTop)/2,t.preventDefault()):this.pulling=!1:"up"===n?this.pullDist>0&&(this.pullDist=p.pullDist-(p.y-o),t.preventDefault()):this.pullDist=p.pullDist}},onTouchend:function(){var t=this;this.allowPullDown&&(p={},this.pulling=!1,this.pullDist>=70&&this.isSync?this.refreshing?this.makePullTo(70):this.makePullTo(70).then((function(){if(t.refreshing=!0,t.onPullDown){var e=t.onPullDown();e&&e.then&&"function"==typeof e?e.finally((function(){t.refreshing=!1,t.makePullTo(0)})):(t.refreshing=!1,t.makePullTo(0))}else t.dataSync().then((function(){t.refreshing=!1,t.makePullTo(0),t.$emit("pullDown")})).catch((function(){t.refreshing=!1,t.makePullTo(0),t.$emit("pullDown")}))})):(this.refreshing=!1,this.makePullTo(0)))},makePullTo:function(t){var e=this,o=this.pullDist,i=t,n=i-o,r=o;return o===i?Promise.resolve():new Promise((function(t){!function a(){window.requestAnimationFrame((function(){r+=n/6,e.pullDist=r,o<i&&r<i||o>i&&r>i?a():(e.pullDist=i,e.refreshing=!1,t())}))}()}))},dataSync:function(){var t,e=r.default.getCurrentModuleCode(),o=r.default.getCurrentRoute(),i=o.meta&&o.meta.isTodo;if(r.default.isModuleNeedBuilding(e)&&!i){if(!this.buildingId)return new Promise((function(t){setTimeout((function(){t()}),500)}));t=this.buildingId}return l.a.addTrack("公共-手动下拉刷新","",""),a.a.beginManualUpdate(),r.default.checkSync(t).then((function(t){return a.a.endManualUpdate(),t})).catch((function(t){$log.error("下拉刷新错误",t),t&&"Error: Network Error"===t.toString()?s.a.alert("当前网络无法同步数据"):s.a.alert(t),a.a.endManualUpdate()}))},getScrollHeight:function(){return this.$refs["scroll-warp"].offsetHeight},getScrollTop:function(){return this.$refs["scroll-warp"].scrollTop},setScrollTop:function(t){this.$refs["scroll-warp"].scrollTop=t},scrollBy:function(t){var e=this,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:200,n=this.getScrollTop(),r=n+t,a=Math.round(o/16.7),s=t/a,l=n,c=i=+new Date;return n===r?Promise.resolve():new Promise((function(t){!function o(){window.requestAnimationFrame((function(){c===i&&(l+=s,e.$refs["scroll-warp"].scrollTop=l,n<r&&l<r||n>r&&l>r?o():(e.$refs["scroll-warp"].scrollTop=r,t()))}))}()}))},scrollTo:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:200,o=this.getScrollTop(),i=t-o;return this.scrollBy(i,e)},scrollToEle:function(t){var e=t.keyboardHeight||232,o=(t=t.$el?t.$el:t).getBoundingClientRect(),i=this.$refs["scroll-warp"].getBoundingClientRect();if(o&&i){var r=document.documentElement.clientHeight-(n.a.state.global.isNumberInputOpen?e:0),a=i.bottom<r?i.bottom:r,s=i.top-o.top,l=o.bottom-a;s>0?this.scrollBy(-s-10):l>0&&this.scrollBy(l+10)}},isCurrent:function(e,o){var i=this;e.length&&t.each(e,(function(t){t._uid===o?i.isCurrKeyboard=!0:i.isCurrent(t.$children,o)}))},onNumberKeyboardOpen:function(t){this.isCurrKeyboard=!1,this.isCurrent(this.$children,t._uid),this.isCurrKeyboard&&this.scrollToEle(t)}}}}).call(this,o("391c"))},dd16:function(t,e,o){"use strict";(function(t){e.a={name:"StatusText",props:{status:{type:String},text:{type:String},extend:{type:Object,default:function(){return{}}},statusStyles:{type:Object,default:function(){return{}}}},data:function(){return{classSet:t.extend({"草稿":"color-gray","暂存":"color-gray","检查中":"color-orange","待整改":"color-red","待复验":"color-orange","待验收":"color-red","待报验":"color-red","待申请进场":"color-red","待初验":"color-red","待送检":"color-red","待上传报告":"color-red","待退场":"color-red","待建设单位验收":"color-red","待区域验收":"color-red","供应链退回":"color-red","预创建":"color-status-blue","已提交":"color-green","已整改":"color-green","已验收":"color-green","已通过":"color-green","已退场":"color-gray","已关闭":"color-gray","非正常关闭":"color-gray","已退回":"color-red","已完成":"color-green","已甩项":"color-gray","检查完毕":"color-green","送检合格":"color-green","复验合格":"color-green","验收合格":"color-green","验收不合格":"color-red","未验收":"color-orange","待点评":"color-orange","已点评":"color-green","合格":"color-green","不合格":"color-red","待审核":"color-orange","已发布":"color-green","已拒绝":"color-red","进度正常":"color-green","进度滞后":"color-red","正常":"color-green","滞后":"color-red","施工单位验收合格":"color-green","监理单位验收合格":"color-green","建设单位验收合格":"color-green","施工单位验收不合格":"color-red","监理单位验收不合格":"color-red","建设单位验收不合格":"color-red"},this.extend)}},mounted:function(){}}}).call(this,o("391c"))},e89f:function(t,e,o){"use strict";var i=o("04f3"),n=o("cf09"),r=o("4360"),a=0;e.a={name:"PopupMixin",data:function(){return{backButtonEvent:null}},watch:{show:function(t){var e=this;if(t){if(this.$nextTick((function(){e.$el&&e.$el.style&&(e.$el.style.zIndex=++n.a.zIndex,a++,r.a.commit("app/SET_HAS_POPUP",!!a))})),!this.backButtonEvent){var o=this.close||this.closePopup;this.backButtonEvent=Object(i.a)(o)}}else--a<0&&(a=0),r.a.commit("app/SET_HAS_POPUP",!!a),this.backButtonEvent&&(Object(i.c)(this.backButtonEvent),this.backButtonEvent=null)}},methods:{}}},ef48:function(t,e,o){var i=o("9d55");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);(0,o("85cb").default)("a1a65c0c",i,!0,{sourceMap:!1,shadowMode:!1})},fa4f:function(t,e,o){"use strict";o.r(e);var i=o("4aef"),n=o("967a"),r={name:"ItemList",components:{StatusText:i.a},props:{img:{type:String,default:""},title:{type:String,default:""},detail:{type:String,default:""},footer:{type:String,default:""},status:{type:String,default:""},isShowNewStatus:{type:Boolean,default:!1},statusText:{type:String,default:""},statusClassSet:{type:Object,default:function(){return{}}},typeTag:{type:String,default:""},isUnread:{type:Boolean,default:!1},isTimeout:{type:Boolean,default:!1},isUrgent:{type:Boolean,default:!1},isReturn:{type:Boolean,default:!1},repairDeadline:{type:String,default:null}},data:function(){return{repairDeadlineStatus:n.a.REPAIR_DEADLINE_STATUS.status}},computed:{bgNewClass:function(){return{"草稿":"bg-gray7 b-color","暂存":"bg-gray b-color","检查中":"bg-orange b-color","待整改":"bg-red2 b-color ","待复验":"bg-purple b-color","待验收":"bg-red b-color","待报验":"bg-red b-color","待申请进场":"bg-red b-color","待初验":"bg-red b-color","待送检":"bg-red b-color","待上传报告":"bg-red b-color","待退场":"bg-red b-color","待建设单位验收":"bg-red b-color","待区域验收":"bg-red b-color","已提交":"bg-green b-color","已整改":"bg-green b-color","已验收":"bg-green b-color","已通过":"bg-green2 b-color","已退场":"bg-gray b-color","已关闭":"bg-gray7 b-color","非正常关闭":"bg-gray b-color","已退回":"bg-red b-color","已完成":"bg-green b-color","已甩项":"bg-gray b-color","检查完毕":"bg-green b-color","送检合格":"bg-green b-color","复验合格":"bg-green b-color","验收合格":"bg-green b-color","验收不合格":"bg-red b-color","未验收":"bg-orange b-color","待点评":"bg-orange b-color","已点评":"bg-green b-color","合格":"bg-green b-color","不合格":"bg-red b-color","进度正常":"bg-green2 b-color","进度滞后":"bg-red2 b-color","施工单位验收合格":"bg-green b-color","监理单位验收合格":"bg-green b-color","建设单位验收合格":"bg-green b-color","施工单位验收不合格":"bg-red b-color","监理单位验收不合格":"bg-red b-color","建设单位验收不合格":"bg-red b-color"}}},activated:function(){}},a=(o("19a9"),o("17cc")),s=Object(a.a)(r,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",t._g({staticClass:"item-list border-bottom"},t.$listeners),[t.isShowNewStatus?o("div",{staticClass:"status-new-tag"},[o("div",{staticClass:"tag",class:t.bgNewClass[t.status]},[t._v("\n      "+t._s(t.status)+"\n    ")])]):t._e(),t.img?o("div",{staticClass:"img",style:{"background-image":"url("+t.img+")"}}):t._e(),o("div",{staticClass:"item-list-con"},[o("h2",{staticClass:"title"},[t.isUnread?o("i",{staticClass:"icon-unread"}):t._e(),t.isTimeout?o("i",{staticClass:"icon-timeout"},[t._v("\n        超\n      ")]):t._e(),t.isUrgent?o("i",{staticClass:"icon-urgent"},[t._v("\n        急\n      ")]):t._e(),t.isReturn?o("i",{staticClass:"icon-return"},[t._v("\n        退\n      ")]):t._e(),t.$slots.title?t._t("title"):[t.typeTag?o("span",{staticClass:"type-tag"},[t._v(t._s(t.typeTag))]):t._e(),t._v("\n        "+t._s(t.title||"")+"\n      ")]],2),o("p",{staticClass:"text"},[t._v(t._s(t.detail||""))]),t.$slots.footer?t._t("footer"):o("p",{staticClass:"time",domProps:{innerHTML:t._s(t.footer||"")}})],2),t.status&&!t.isShowNewStatus?o("div",{staticClass:"item-list-status"},[o("status-text",{attrs:{status:t.status,text:t.statusText,extend:t.statusClassSet}}),t.repairDeadline&&t.repairDeadlineStatus.includes(t.status)?o("p",{staticClass:"time-status"},[t._v("\n      "+t._s(t._f("timeStatus")(t.repairDeadline))+"\n    ")]):t._e()],1):t._e()])}),[],!1,null,null,null);e.default=s.exports}}]);