(window.webpackJsonp_module_entry_zjapp_=window.webpackJsonp_module_entry_zjapp_||[]).push([["chunk-606c3122"],{"2c76":function(t,e,i){"use strict";i("c070")},"30c7":function(t,e,i){"use strict";i("69c5")},"3c64":function(t,e,i){"use strict";i("163d");var n={name:"ItemTextarea",components:{},props:{value:{type:String,default:""},placeholder:{type:String,default:""},maxlength:{type:Number,default:200},borderBottom:{type:Boolean,default:!0}},data:function(){return{textareaHeight:40,isLock:!1,blurTime:null}},computed:{lastLength:function(){var t=this.value&&this.value.length||0,e=this.maxlength-t;return e>0?e:0}},mounted:function(){var t=this;this.$nextTick((function(){t.textareaHeight=t.$refs.rule&&t.$refs.rule.offsetHeight||40}))},methods:{onfocus:function(){var t=(new Date).getTime();this.blurTime&&t-this.blurTime<300&&window.cordova&&window.cordova.plugins&&window.cordova.plugins.Keyboard&&(this.$refs.input.blur(),window.cordova.plugins.Keyboard.close()),this.blurTime=null,this.$emit("focus")},onblur:function(){this.blurTime=(new Date).getTime(),this.$emit("blur")},setStatus:function(t){console.log(t),this.isLock=t},oninput:function(t){var e=this;setTimeout((function(){if(!e.isLock){var i=t.target.value;i.length>e.maxlength&&(i=i.substring(0,e.maxlength),e.$refs.input.value=i),e.$refs.rule.innerText=i,e.textareaHeight=e.$refs.rule&&e.$refs.rule.offsetHeight+20,e.$emit("input",i),e.$emit("change",i)}}),0)}}},o=(i("2c76"),i("17cc")),a=Object(o.a)(n,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"item-textarea",class:{"border-bottom":t.borderBottom}},[i("div",{staticClass:"item-textarea-content"},[i("textarea",{ref:"input",style:{height:t.textareaHeight+"px"},attrs:{placeholder:t.placeholder},domProps:{value:t.value},on:{focus:t.onfocus,blur:t.onblur,compositionstart:function(e){t.setStatus(!0)},compositionend:function(e){t.setStatus(!1)},input:t.oninput}}),i("div",{ref:"rule",staticClass:"rule"},[t._v("\n      "+t._s(t.value)+"\n    ")]),t.maxlength!==1/0?i("p",{staticClass:"counter"},[t._v("\n      "+t._s(t.lastLength)+"\n    ")]):t._e()])])}),[],!1,null,null,null);e.a=a.exports},"45dc":function(t,e,i){var n=i("624c");"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);(0,i("85cb").default)("9f5f8384",n,!0,{sourceMap:!1,shadowMode:!1})},"46ae":function(t,e,i){"use strict";var n=i("e1e7").a,o=i("17cc"),a=Object(o.a)(n,(function(){var t=this,e=t.$createElement;return(t._self._c||e)("item",{attrs:{label:t.title,text:t.text,mode:t.mode,editabled:t.editabled,placeholder:t.placeholder},on:{click:t.openSelect}},[t.$slots.right?t._t("right",null,{slot:"right"}):t._e()],2)}),[],!1,null,null,null);e.a=a.exports},"4e8c":function(t,e,i){"use strict";var n=i("329b"),o=i("b056").a,a=(i("30c7"),i("17cc")),s=Object(a.a)(o,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.show?i("div",{staticClass:"content",on:{click:function(e){return e.target!==e.currentTarget?null:t.closePopup(e)}}},[i("transition",{attrs:{name:"slide-up"},on:{enter:function(e){t.isOpening=!0},"after-enter":function(e){t.isOpening=!1},leave:function(e){t.isClosing=!0},"after-leave":t.afterClose}},[t.showList?i("div",{staticClass:"box",style:{height:t.listHeight+"px"}},[t.allowSearching?t._e():i("div",{staticClass:"hd border-bottom"},[t._v("\n        "+t._s(t.title)+"\n        "),i("icon",{attrs:{name:"unqualified"},on:{click:t.closePopup}})],1),t.allowSearch?i("app-search-bar",{ref:"app-search-bar-checkitem-select",staticClass:"bg-white",attrs:{"history-key":t.historyKey},on:{changeSearchStatus:t.setSearchMode},model:{value:t.searchKeyword,callback:function(e){t.searchKeyword=e},expression:"searchKeyword"}}):t._e(),t.renderData&&t.renderData.length?i("scroller",{ref:"scroller",attrs:{"has-next":t.hasNextPage},on:{loadNext:t.loadNext}},[i("div",{attrs:{id:"slideUpSelectDialog"}},t._l(t.renderData,(function(e){return i("item",{key:e.id,attrs:{"icon-right":e.id===t.selected.id?"qualified":"",border:"bottom"},on:{click:function(i){t.select(e)}}},[t.showNote?[i("div",{staticClass:"item-con"},[i("p",{staticClass:"text"},[t._v(t._s(e.name))]),i("p",{staticClass:"note"},[t._v(t._s(e[t.showNote]))])])]:i("div",{staticClass:"item-text",domProps:{innerHTML:t._s(t.keywordFilter(e.name))}})],2)})))]):t._e(),i("loading-status",{attrs:{"is-empty":!t.options||!t.options.length,type:"search","empty-text":t.emptyText}},[t.allowSearching&&t.allowSearch?i("template",{slot:"empty-text"},[t._v("\n          未搜索到包含"),i("span",{staticClass:"color-blue"},[t._v(t._s(t.searchKeyword))]),t._v("的结果\n        ")]):t._e()],2)],1):t._e()])],1):t._e()}),[],!1,null,"c4404120",null).exports,r=!1;r||(r=new(n.default.extend(s))({el:document.createElement("div")}),document.body.appendChild(r.$el));e.a=r},"574c":function(t,e,i){(t.exports=i("690e")(!1)).push([t.i,".zjapp .item-textarea{background-color:#fff;padding:5px 15px}.zjapp .item-textarea-content{position:relative}.zjapp .item-textarea .rule,.zjapp .item-textarea textarea{width:100%;min-height:40px;line-height:20px;font-size:16px;padding:0;border:none}.zjapp .item-textarea .rule{position:absolute;top:0;left:0;visibility:hidden;word-break:break-all}.zjapp .item-textarea .counter{text-align:right;margin:0 0 -5px 0;height:15px;line-height:15px;color:#b2b2b2;font-size:12px}",""])},"624c":function(t,e,i){(t.exports=i("690e")(!1)).push([t.i,".zjapp .task-void-dialog[data-v-918e1df2] .van-dialog__content{height:140px;padding:32px 20px}.zjapp .task-void-dialog .text-area-border[data-v-918e1df2]{border:1px solid #eee;border-bottom:null}",""])},"69c5":function(t,e,i){var n=i("7d2b");"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);(0,i("85cb").default)("172b2e44",n,!0,{sourceMap:!1,shadowMode:!1})},"7d2b":function(t,e,i){(t.exports=i("690e")(!1)).push([t.i,".zjapp .content[data-v-c4404120]{position:fixed;top:0;left:0;width:100%;height:100%;background-color:rgba(0,0,0,.4);overflow:hidden}.zjapp .box[data-v-c4404120]{position:absolute;left:0;bottom:0;width:100%;flex-direction:column}.zjapp .box[data-v-c4404120],.zjapp .list-wrap[data-v-c4404120]{display:flex;background-color:#fff}.zjapp .list-wrap[data-v-c4404120]{flex-direction:row;align-items:flex-start;flex:1;height:465px}.zjapp #slideUpSelectDialog[data-v-c4404120]{padding:0 15px 0}.zjapp .hd[data-v-c4404120]{position:relative;padding:10px 45px;height:44px;line-height:22px;font-size:16px;color:#666;text-align:center;background-color:#fff}.zjapp .hd .icon-unqualified[data-v-c4404120]{position:absolute;width:44px;height:44px;top:0;right:0;line-height:44px;font-size:14px;text-align:center;color:#999}.zjapp .item[data-v-c4404120]{padding-left:0;padding-right:0}.zjapp .text[data-v-c4404120]{font-size:14px;line-height:20px;color:#333}.zjapp .note[data-v-c4404120]{font-size:12px;line-height:18px;color:#999}[data-v-c4404120] .icon-qualified{width:34px;height:34px;line-height:34px;text-align:center;color:#4275e8}",""])},9094:function(t,e,i){"use strict";i.d(e,"c",(function(){return s})),i.d(e,"b",(function(){return r})),i.d(e,"a",(function(){return c}));var n=i("5e8d"),o=i("da71"),a=i("162a");function s(){return Object(n.a)().then((function(){var t=o.a.materialList.url;return a.a.request(t)}))}function r(t){return Object(n.a)().then((function(){var e=o.a.contractorListByProject.url;return a.a.request(e,t)}))}function c(t){return Object(n.a)().then((function(){var e=o.a.getContractList.url;return a.a.request(e,t)}))}},a63e:function(t,e,i){"use strict";i("45dc")},b056:function(t,e,i){"use strict";(function(t){i("f548"),i("cc57"),i("9dd9");var n,o=i("07d2"),a=i("6f9e"),s=i("e89f"),r=i("9eea"),c=i("774b");e.a={name:"SlideUpSelectDialog",components:{Item:o.default,appSearchBar:r.default,Scroller:c.default},mixins:[s.a],data:function(){return{show:!1,showList:!1,isOpening:!1,isClosing:!1,title:"",selected:{},options:[],showNote:"",emptyText:"",initHeight:null,listHeight:null,componentUid:"",searchKeyword:"",allowSearch:!1,allowSearching:!1,timer:null,historyKey:null,searchOptions:[],listLimit:100,listLimitSize:100}},computed:{renderData:function(){var t=this.options;return t&&t.length>this.listLimit?t.slice(0,this.listLimit):t||[]},hasNextPage:function(){return this.options&&this.options.length>this.listLimit}},watch:{searchKeyword:function(e){var i=this;this.$nextTick((function(){i.options=e?i.fitlerByKeyword(t.cloneDeep(i.searchOptions),e):t.cloneDeep(i.searchOptions)}))},show:function(t){var e=this;t&&this.$nextTick((function(){e.showList=!0}))},showList:function(t){t&&this.scrollToSelect()}},created:function(){a.a.$on("routerBeforeEach",this.closePopup),a.a.$on("pageContentClick",this.closePopup),window.addEventListener("native.keyboardshow",this.onResize,!1),window.addEventListener("native.keyboardhide",this.onResize,!1)},destroyed:function(){a.a.$off("routerBeforeEach",this.closePopup),a.a.$off("pageContentClick",this.closePopup)},methods:{openPopup:function(e){this.componentUid=e.componentUid||"",this.title="选择"+e.title,this.options=e.options,this.searchOptions=t.cloneDeep(e.options),this.selected=t.clone(e.selected),this.showNote=e.showNote,this.emptyText=e.emptyText,this.allowSearch=e.allowSearch,this.initHeight=e.initHeight,this.historyKey=e.historyKey,n=e.callback,this.show=!0,this.onResize(),this.clearScrollToTimeout()},closePopup:function(){var t=this;if(!this.isOpening)return this.showList=!1,this.clearScrollToTimeout(),this.cloneSearch(),new Promise((function(e){t.$on("afterClosePopup",e)}))},afterClose:function(){this.show=!1,this.isClosing=!1,this.$emit("afterClosePopup")},select:function(t){n(t),this.saveHistory(),this.closePopup()},scrollToSelect:function(){var t=this;this.$nextTick((function(){t.timer=window.setTimeout((function(){var e=document.querySelector("#slideUpSelectDialog .item .item-icon-right");e&&e.scrollIntoViewIfNeeded({block:"start",behavior:"smooth"}),t.clearScrollToTimeout()}),400)}))},clearScrollToTimeout:function(){clearTimeout(this.timer),this.timer=null},cloneSearch:function(){this.options=t.cloneDeep(this.searchOptions),this.searchKeyword="",this.$refs["app-search-bar-checkitem-select"]&&this.$refs["app-search-bar-checkitem-select"].cancelSearch()},saveHistory:function(){this.$refs["app-search-bar-checkitem-select"]&&this.$refs["app-search-bar-checkitem-select"].saveHistory()},setSearchMode:function(t){this.allowSearching=t,this.onResize()},onResize:function(e){var i=null,n=window.innerHeight;n-=$rootScope.viewSize.headerHeight-44,i=this.allowSearch&&this.allowSearching?n:t.minBy([.8*n,this.initHeight]),this.listHeight=i},fitlerByKeyword:function(e,i){var n=this,o=[];return t.each(e,(function(e){if(new RegExp(i,"gm").test(e.name))e.isOpen=!0,o.push(e);else if(!t.isEmpty(e.children)){var a=n.fitlerByKeyword(e.children,i);t.isEmpty(a)||(e.isOpen=!0,e.children=a,o.push(e))}})),o},keywordFilter:function(t){return this.searchKeyword?t.replace(new RegExp(this.searchKeyword,"gm"),'<span class="color-blue">'+this.searchKeyword+"</span>"):t},loadNext:function(){this.listLimit+=this.listLimitSize,this.listLimit>this.options.length&&(this.listLimit=this.options.length)},resultListLimit:function(){this.listLimit=this.listLimitSize}}}}).call(this,i("391c"))},c070:function(t,e,i){var n=i("574c");"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);(0,i("85cb").default)("35590dcb",n,!0,{sourceMap:!1,shadowMode:!1})},e1e7:function(t,e,i){"use strict";(function(t){i("cc57"),i("163d");var n=i("07d2"),o=i("4e8c");e.a={name:"SlideUpSelect",components:{Item:n.default},props:{title:{type:String,default:""},value:{type:Object,default:function(){return{}}},options:{type:Array,default:function(){return[]}},placeholder:{type:String,default:"请选择"},emptyText:{type:String,default:"暂无数据"},mode:{type:String,default:"edit"},editabled:{type:Boolean,default:!0},showNote:{type:String},allowSearch:{type:Boolean,defalut:!1},initHeight:{type:Number,default:400},historyKey:{type:String,default:"historyHey"}},data:function(){return{isOpen:!1}},computed:{text:function(){return t.isEmpty(this.value)?this.editabled?"":"无":this.value.name}},created:function(){var t=this;o.a.$on("afterClosePopup",(function(){t.isOpen=!1}))},activated:function(){o.a.resultListLimit()},methods:{openSelect:function(){var t=this;o.a.openPopup({title:this.title,options:this.options,selected:this.value,showNote:this.showNote,emptyText:this.emptyText,allowSearch:this.allowSearch,initHeight:this.initHeight,historyKey:this.historyKey,componentUid:this._uid,callback:function(e){t.$emit("input",e),t.$emit("onSelect",e)}}),this.isOpen=!0}}}}).call(this,i("391c"))},f5bd:function(t,e,i){"use strict";i("6a61");var n,o=i("2e91"),a=i("46ae"),s=(i("e2a7"),i("9094")),r=i("e89f"),c=i("24de"),l="没有相关合同",h="当前无网络",u={name:"MaterialTaskContract",components:{SlideUpSelect:a.a},mixins:[r.a],props:{value:{type:Object,default:function(){return{}}}},data:function(){return{emptyText:l,list:[]}},computed:{proj_id:function(){return this.$store.state.global.currentProject.id}},created:function(){this.init()},activated:function(){this.init()},methods:{init:function(){this.contractList(),this.emptyText=l},contractList:(n=Object(o.a)(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,c.a.checkHasNetwork(!0);case 3:return t.next=5,Object(s.a)({proj_id:this.proj_id});case 5:e=(e=t.sent).map((function(t){return{id:t.contract_id,name:t.contract_name}})),this.list=e,$log.log("材料验收-查询合同列表"),t.next=15;break;case 11:t.prev=11,t.t0=t.catch(0),t.t0&&t.t0.noNetwork&&(this.emptyText=h),$log.error("材料验收-获取合同列表-error->",t.t0);case 15:case"end":return t.stop()}}),t,this,[[0,11]])}))),function(){return n.apply(this,arguments)}),onSelect:function(t){this.$emit("onSelect",t)}}},p=i("17cc"),d=Object(p.a)(u,(function(){var t=this.$createElement;return(this._self._c||t)("slide-up-select",{attrs:{value:this.value,title:"所属合同",options:this.list,"empty-text":this.emptyText,"allow-search":!0,"init-height":500,"history-key":"material-task-contract"},on:{onSelect:this.onSelect}})}),[],!1,null,null,null);e.a=d.exports},f711:function(t,e,i){"use strict";var n=i("3c64"),o=i("e2a7"),a=i("04f3"),s={name:"MaterialTaskVoidDialog",components:{ItemTextarea:n.a},data:function(){return{show:!1,reason:"",backButtonEvent:null}},activated:function(){this.show=!1},methods:{open:function(){this.reason="",this.backButtonEvent||(this.backButtonEvent=Object(a.a)(this.close))},close:function(t){this.show=!1,this.backButtonEvent&&(Object(a.c)(this.backButtonEvent),this.backButtonEvent=null)},beforeClose:function(t,e){if("cancel"!==t){var i=this.reason.trim();if(!i||i.length<=0)return o.a.alert("请输入作废原因"),void e(!1);this.$emit("submit",i,e)}else e()}}},r=(i("a63e"),i("17cc")),c=Object(r.a)(s,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("van-dialog",{attrs:{"show-cancel-button":"","get-container":"body","class-name":"dialog-customize task-void-dialog","before-close":t.beforeClose},on:{open:t.open,close:t.close},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[i("div",[i("item-textarea",{ref:"textarea-supplier",staticClass:"text-area-border",attrs:{placeholder:"请输入作废原因",maxlength:50},model:{value:t.reason,callback:function(e){t.reason=e},expression:"reason"}})],1)])],1)}),[],!1,null,"918e1df2",null);e.a=c.exports}}]);