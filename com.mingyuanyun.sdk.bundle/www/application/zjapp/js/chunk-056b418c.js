(window.webpackJsonp_module_entry_zjapp_=window.webpackJsonp_module_entry_zjapp_||[]).push([["chunk-056b418c","chunk-0b5b35be","chunk-b1eec014"],{"0732":function(t,e,a){var i=a("81f2");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);(0,a("85cb").default)("1b5b07de",i,!0,{sourceMap:!1,shadowMode:!1})},"14de":function(t,e,a){(t.exports=a("690e")(!1)).push([t.i,".zjapp .processv2-batch-accept{display:flex;align-items:center;justify-content:space-between}.zjapp .processv2-batch-accept .van-checkbox .van-checkbox__label--disabled{color:#323233}.zjapp .processv2-batch-accept .van-checkbox .van-checkbox__icon--disabled .van-icon{background-color:#fff;border-color:#e5e5e5}",""])},1700:function(t,e,a){"use strict";a("9bd1")},"1bc5":function(t,e,a){(t.exports=a("690e")(!1)).push([t.i,'.zjapp .number-input[data-v-3efcb2a2]{position:relative;display:inline-block;vertical-align:top;width:61px;height:30px;border:1px solid #e5e5e5;border-radius:3px;text-align:center;font-size:14px;color:#333}@media screen and (min-width:320px){.zjapp .number-input[data-v-3efcb2a2]{width:50px}}@media screen and (min-width:360px){.zjapp .number-input[data-v-3efcb2a2]{width:58px}}@media screen and (min-width:375px){.zjapp .number-input[data-v-3efcb2a2]{width:61px}}.zjapp .text[data-v-3efcb2a2]{position:relative;display:inline-block;vertical-align:top;width:100%;height:100%;line-height:28px;overflow:hidden}.zjapp .value[data-v-3efcb2a2]{position:absolute;top:50%;right:0;margin-top:-14px;min-width:100%;height:28px;color:inherit}.zjapp .placeholder[data-v-3efcb2a2],.zjapp .value[data-v-3efcb2a2]{line-height:28px;pointer-events:none}.zjapp .placeholder[data-v-3efcb2a2]{display:inline-block;vertical-align:top;width:100%;height:100%;color:#b2b2b2}.zjapp .number-input-focus[data-v-3efcb2a2]{border-color:#4275e8;box-shadow:0 0 8px 0 rgba(66,117,232,.37)}.zjapp .icon-minus[data-v-3efcb2a2]{position:absolute;top:-9px;right:-9px;width:18px;height:18px;border-radius:9px;background-color:#ff4546}.zjapp .icon-minus[data-v-3efcb2a2]:before{content:"";position:absolute;left:4px;top:8px;width:10px;height:2px;background-color:#fff}.zjapp .icon-minus[data-v-3efcb2a2]:after{content:"";position:absolute;left:-5px;top:-5px;width:28px;height:28px;border-radius:9px}.zjapp .unqualified[data-v-3efcb2a2]{color:#ff5050;background-color:#fff3f3!important}.zjapp .number-input-select-all .value-handle[data-v-3efcb2a2]{background-color:#cbdaf9}',""])},2939:function(t,e,a){(t.exports=a("690e")(!1)).push([t.i,".zjapp .page-scroll[data-v-74102c05]{flex:1;overflow:auto;padding-bottom:100px;transform:translateZ(0)}.zjapp .sublist[data-v-74102c05]{padding-left:25px;padding-top:1px;background-color:#fff}.zjapp .sublist>.sublist[data-v-74102c05]{padding-left:10px;padding-top:0}",""])},"29be":function(t,e,a){"use strict";(function(t){a("5ab2"),a("6d57"),a("e10e");var i=a("28f8"),o=(a("cc57"),a("163d"),a("07d2")),s=a("a5c6"),n=a("6144");function c(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,i)}return a}function l(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?c(Object(a),!0).forEach((function(e){Object(i.a)(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):c(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}e.a={name:"SingleSelect",components:{Item:o.a},props:{title:{type:String,default:""},pageTitle:{type:String,default:""},placeholder:{type:String,default:""},value:{type:Object,default:function(){return{}}},options:{type:Array,default:function(){return[]}},optionsDisabled:{type:Array,default:function(){return[]}},required:{type:Boolean,default:!0},mode:{type:String,default:"edit"},editabled:{type:Boolean,default:!0},memory:{type:Boolean,default:!1},autoSelect:{type:Boolean,default:!1},beforeOpen:{type:Function,default:function(){}},searchBar:{type:Boolean,default:!0},grouping:{type:String,default:""},autoOpen:{type:Boolean,default:!1},rightBtn:{type:String,default:""},rightBtnEvent:{type:Function,default:function(){return 0}},ifToggle:{type:Boolean,default:!1},formCheck:{type:Boolean,default:!1},editorAddData:{type:Boolean,default:!1},lineLimit:{type:[Number,String],default:1}},data:function(){return{memoryKey:this.$route.name+encodeURI(this.title)}},watch:{options:function(){this.setSelected()}},mounted:function(){this.setSelected()},methods:{openSelect:function(){var e=this;if(this.editabled){var a=this.beforeOpen();a&&a.then&&t.isFunction(a.then)?a.then((function(t){!1!==t&&e.openPopup()})):!1!==a&&this.openPopup()}},openPopup:function(){var e=this;if(this.optionsDisabled&&this.optionsDisabled.length){var a={};t.each(this.optionsDisabled,(function(t){t.id&&(a[t.id]=t)})),t.each(this.options,(function(t,i){a[t.id]?e.options[i].disabled=!0:e.options[i].disabled=!1}))}s.a.openPopup({title:this.pageTitle||"选择"+this.title,selected:this.value,options:this.options,required:this.required,searchBar:this.searchBar,grouping:this.grouping,autoOpen:this.autoOpen,rightBtn:this.rightBtn,ifToggle:this.ifToggle,lineLimit:this.lineLimit,editorAddData:this.editorAddData,onSelect:function(a){var i=t.cloneDeep(e.value);a=t.isArray(a)?t.map(a,(function(t){return l({},t)})):l({},a),e.$emit("input",a,i),e.$emit("onSelect",a,i)},rightBtnEvent:function(a){var i=t.cloneDeep(e.value);e.$emit("rightBtnEvent",a,i)}})},closePopup:function(){s.a.closePopup()},onSelect:function(t){n.a.saveObject(this.memoryKey,t,n.a.level.user),this.$emit("input",t[0]),this.$emit("onSelect",t[0])},setSelected:function(){var e=n.a.getObject(this.memoryKey,n.a.level.user);!1===this.editabled||t.isEmpty(this.options)||(t.isEmpty(this.value)?this.memory&&!t.isEmpty(e)&&t.some(this.options,{id:e.id})&&(this.$emit("input",e),this.autoSelect&&this.$emit("onSelect",e)):this.autoSelect&&this.$emit("onSelect",this.value))}}}}).call(this,a("391c"))},"2c76":function(t,e,a){"use strict";a("c070")},"2dd6":function(t,e,a){(t.exports=a("690e")(!1)).push([t.i,".zjapp .single-item[data-v-6920dde7]{min-height:44px}.zjapp .single-item>div[data-v-6920dde7]{display:flex}.zjapp .single-item>div>span[data-v-6920dde7]{flex:1;overflow:hidden;text-overflow:ellipsis;display:-webkit-box;-webkit-box-orient:vertical}.zjapp .single-item>div>span[data-v-6920dde7] label{color:#4174e9}.zjapp .single-item i[data-v-6920dde7]{line-height:24px;font-size:24px;color:#4275e8}.zjapp .single-item .disabled-item[data-v-6920dde7]{color:#aaa}",""])},"2ddb":function(t,e,a){(t.exports=a("690e")(!1)).push([t.i,".zjapp .supplier-editor[data-v-e465319c]{margin-bottom:10px;padding:8px;display:flex;justify-content:space-between;align-items:center;height:52px;color:#4275e8;background-color:#fff}.zjapp .supplier-editor .icon[data-v-e465319c]{border-left:1px solid #c8c8c8;padding-left:12px}.zjapp .supplier-editor .icon-edit[data-v-e465319c]{color:#c8c8c8;font-size:18px}.zjapp .supplier-editor .icon-qualified[data-v-e465319c]{color:#4275e8}.zjapp .supplier-editor .margin-r[data-v-e465319c]{margin-right:10px}.zjapp .list-title[data-v-e465319c]{position:relative;top:0;color:#888;font-size:14px;line-height:30px;min-height:40px;margin-bottom:0;margin-top:0;padding:8px 16px 2px}.zjapp .search-item>div[data-v-e465319c]{padding-right:35px}.zjapp .search-item i[data-v-e465319c]{position:absolute;color:#ccc;font-size:26px;right:0;top:50%;transform:translateY(-50%)}.zjapp .van-popup--right[data-v-e465319c]{width:100%;height:100%}[data-v-e465319c] .van-cell__title{color:#4174e9;font-weight:700}[data-v-e465319c] .van-collapse-item__content{transform:translateZ(0);padding:0 0 0 25px}[data-v-e465319c] .van-collapse-item__content .van-cell{padding-left:0}",""])},"3156b":function(t,e,a){"use strict";a("163d");var i={name:"SingleSelectItem",props:{item:{type:Object,default:function(){return{id:"",name:""}}},checked:{type:Boolean,default:!1},renderField:{type:String,default:"name"},lineLimit:{type:[Number,String],default:1}},methods:{selectItem:function(t){t.disabled||this.$emit("click",t)}}},o=(a("9788"),a("17cc")),s=Object(o.a)(i,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("van-cell",{staticClass:"single-item",attrs:{clickable:!0},on:{click:function(e){t.selectItem(t.item)}}},[a("span",{class:{"disabled-item":t.item.disabled},style:{"-webkit-line-clamp":"unlimited"===t.lineLimit?"initial":t.lineLimit},domProps:{innerHTML:t._s(t.item[t.renderField])}}),t.checked?a("van-icon",{attrs:{name:"success"}}):t._e()],1)}),[],!1,null,"6920dde7",null);e.a=s.exports},3455:function(t,e,a){(t.exports=a("690e")(!1)).push([t.i,".zjapp .number-keyboard-con[data-v-7fdd42c6]{position:absolute;left:0;bottom:0;width:100%;padding:4px 0;background-color:#fafafa;box-shadow:0 -4px 8px 0 rgba(0,0,0,.08);-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.zjapp .ios-bezel-less[data-v-7fdd42c6]{padding-bottom:34px}.zjapp .keyboard-row[data-v-7fdd42c6]{display:flex}.zjapp .keys[data-v-7fdd42c6]{flex:1;height:48px;line-height:48px;text-align:center;font-size:18px;margin:4px;border:1px solid rgba(5,5,5,.07);border-radius:8px;background-color:#fff;padding:0}.zjapp .keys-add[data-v-7fdd42c6],.zjapp .keys-next[data-v-7fdd42c6],.zjapp .keys-prev[data-v-7fdd42c6]{font-size:14px;color:#4275e8}.zjapp .keys-add[data-v-7fdd42c6]{height:104px;line-height:104px;flex:initial}.zjapp .keys-ok[data-v-7fdd42c6]{font-size:14px;color:#999}.zjapp .keys-delete[data-v-7fdd42c6]{color:#999}.zjapp .icon[data-v-7fdd42c6]{pointer-events:none}.zjapp .icon-keyboard-close[data-v-7fdd42c6]{font-size:20px;color:#999}.zjapp .icon-keyboard-delete[data-v-7fdd42c6]{vertical-align:top;margin-top:13px;font-size:14px;color:#333}.zjapp .activing[data-v-7fdd42c6]{background-color:#ececec}.zjapp .disabled[data-v-7fdd42c6]{color:#999}.zjapp .right-btns[data-v-7fdd42c6]{width:25%}.zjapp .col[data-v-7fdd42c6],.zjapp .right-btns[data-v-7fdd42c6]{display:flex;flex-direction:column}.zjapp .col[data-v-7fdd42c6]{justify-content:center;align-items:center;height:104px;line-height:36px}",""])},"3c64":function(t,e,a){"use strict";a("163d");var i={name:"ItemTextarea",components:{},props:{value:{type:String,default:""},placeholder:{type:String,default:""},maxlength:{type:Number,default:200},borderBottom:{type:Boolean,default:!0}},data:function(){return{textareaHeight:40,isLock:!1,blurTime:null}},computed:{lastLength:function(){var t=this.value&&this.value.length||0,e=this.maxlength-t;return e>0?e:0}},mounted:function(){var t=this;this.$nextTick((function(){t.textareaHeight=t.$refs.rule&&t.$refs.rule.offsetHeight||40}))},methods:{onfocus:function(){var t=(new Date).getTime();this.blurTime&&t-this.blurTime<300&&window.cordova&&window.cordova.plugins&&window.cordova.plugins.Keyboard&&(this.$refs.input.blur(),window.cordova.plugins.Keyboard.close()),this.blurTime=null,this.$emit("focus")},onblur:function(){this.blurTime=(new Date).getTime(),this.$emit("blur")},setStatus:function(t){console.log(t),this.isLock=t},oninput:function(t){var e=this;setTimeout((function(){if(!e.isLock){var a=t.target.value;a.length>e.maxlength&&(a=a.substring(0,e.maxlength),e.$refs.input.value=a),e.$refs.rule.innerText=a,e.textareaHeight=e.$refs.rule&&e.$refs.rule.offsetHeight+20,e.$emit("input",a),e.$emit("change",a)}}),0)}}},o=(a("2c76"),a("17cc")),s=Object(o.a)(i,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"item-textarea",class:{"border-bottom":t.borderBottom}},[a("div",{staticClass:"item-textarea-content"},[a("textarea",{ref:"input",style:{height:t.textareaHeight+"px"},attrs:{placeholder:t.placeholder},domProps:{value:t.value},on:{focus:t.onfocus,blur:t.onblur,compositionstart:function(e){t.setStatus(!0)},compositionend:function(e){t.setStatus(!1)},input:t.oninput}}),a("div",{ref:"rule",staticClass:"rule"},[t._v("\n      "+t._s(t.value)+"\n    ")]),t.maxlength!==1/0?a("p",{staticClass:"counter"},[t._v("\n      "+t._s(t.lastLength)+"\n    ")]):t._e()])])}),[],!1,null,null,null);e.a=s.exports},"3cd8":function(t,e,a){var i=a("5c19");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);(0,a("85cb").default)("67c16200",i,!0,{sourceMap:!1,shadowMode:!1})},"43c9":function(t,e,a){(t.exports=a("690e")(!1)).push([t.i,".zjapp .multiple-place-content[data-v-440d4b89]{z-index:99999;max-height:134px;border-bottom:1px solid #ececec;overflow:auto;scroll-behavior:smooth}.zjapp .multiple-place-content.-fixed[data-v-440d4b89]{position:absolute;left:0;right:0;top:0}.zjapp .selected[data-v-440d4b89]{position:relative;display:flex;padding:13px 15px;font-size:15px;background-color:#fff;overflow:scroll}.zjapp .selected label[data-v-440d4b89]{margin-right:10px;color:#999;white-space:nowrap}.zjapp .select-wrap[data-v-440d4b89]{flex:1;background-color:#fff;overflow:auto;scroll-behavior:smooth}.zjapp .van-collapse[data-v-440d4b89] .van-cell{align-items:center}.zjapp .van-collapse[data-v-440d4b89] .icon{margin-right:10px;vertical-align:middle}.zjapp .van-collapse[data-v-440d4b89] .van-collapse-item__content{padding:0}.zjapp .group.-border-bottom[data-v-440d4b89]{border-bottom:1px solid #ececec}.zjapp .group-name[data-v-440d4b89]{font-size:14px;color:#999;height:34px;padding-top:15px}.zjapp .element-list[data-v-440d4b89]{display:flex;flex-wrap:wrap}.zjapp .element[data-v-440d4b89]{min-width:75px;height:28px;line-height:28px;text-align:center;margin:10px 6px 10px 0;padding:0 10px;background:#fff;border-radius:100px;color:#333;font-size:14px;border:1px solid #dcdcdc}.zjapp .element.all[data-v-440d4b89]{margin-right:15px}.zjapp .element.disabled[data-v-440d4b89]{background:#ececec;color:#999;border-color:#ececec}.zjapp .element.checked[data-v-440d4b89]{background:#4275e8;color:#fff;border-color:#4275e8}.zjapp .element.disabled-all[data-v-440d4b89]{background:#ececec;color:#999;border-color:#ececec}",""])},"515e":function(t,e,a){"use strict";var i=a("329b"),o=a("f1e4").a,s=(a("fe9e"),a("17cc")),n=Object(s.a)(o,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("transition",{attrs:{name:"slide-right"}},[t.show?a("page-content",{class:{"content-not-empty":t.content.length},attrs:{mode:"dialog",title:"检查指引","on-close":t.closePopup}},[t.isLoading?t._e():a("div",{staticClass:"check-guide-detail-hd border-bottom"},[a("h2",{staticClass:"check-guide-detail-title pb10"},[t._v(t._s(t.title))])]),!t.isLoading&&t.content.length?a("div",{staticClass:"check-guide-detail-content"},t._l(t.content,(function(e,i){return a("p",{key:i},[e.isImg&&e.src?a("img",{class:{"img-not-ready":!e.ready,error:"rejected"===e.status},attrs:{src:t.getThumbnail(e)},on:{error:function(a){t.imgError(e,i)},click:function(a){t.imgClick(e)}}}):t._e(),e.isImg?t._e():a("span",[t._v("\n          "+t._s(e.val)+"\n        ")])])}))):t._e(),a("loading-status",{attrs:{"is-loading":t.isLoading,"is-empty":!t.content.length,"empty-text":"PC端未设置检查指引"}})],1):t._e()],1)}),[],!1,null,"43042f0d",null).exports,c=!1;c||(c=new(i.default.extend(n))({el:document.createElement("div")}),document.body.appendChild(c.$el));e.a=c},5345:function(t,e,a){"use strict";var i=a("9c49").a,o=(a("df4d"),a("17cc")),s=Object(o.a)(i,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[!t.detailData||t.detailData.detailsError||"edit"!==t.detailData.mode||t.checkAcceptError?t._e():a("div",[t.detailData.hasMasterNum?a("div",{staticClass:"proj-title mt0 bg-white"},[a("div",{staticClass:"proj-name"},[t._v("主控项目")])]):t._e(),t._l(t.detailFilter(t.detailData.details,1),(function(e,i){return a("div",{key:i,staticClass:"bg-white"},[1===e.accept_type?a("div",{staticClass:"item-base item-process-accept-v2 item-align-center",class:{"van-hairline--top":0!==i,"border-none":0===i}},[a("div",{staticClass:"item-text"},[a("p",{staticClass:"item-detail-name",domProps:{textContent:t._s(e.name)}}),a("p",{staticClass:"item-detail-content",domProps:{textContent:t._s(e.content)}})]),a("div",{staticClass:"item-ele",class:{"color-green":"合格"===e.status},on:{click:function(a){t.setDetailStatus(e,"合格",t.detailData)}}},[a("icon",{attrs:{name:"qualified"}}),"合格"===e.status?a("p",{staticClass:"f10"},[t._v("合格")]):t._e()],1),a("div",{staticClass:"item-ele ml20",class:{"color-red":"不合格"===e.status},on:{click:function(a){t.setDetailStatus(e,"不合格",t.detailData)}}},[a("icon",{attrs:{name:"unqualified"}}),"不合格"===e.status?a("p",{staticClass:"f10"},[t._v("不合格")]):t._e()],1)]):t._e(),2===e.accept_type?a("div",{staticClass:"item-base item-process-accept-v2",class:{"van-hairline--top":0!==i,"border-none":0===i}},[a("div",{staticClass:"item-text"},[a("p",{staticClass:"item-detail-name",domProps:{textContent:t._s(e.name)}}),a("p",{staticClass:"item-detail-content item-detail-content",domProps:{textContent:t._s((e.standard_text?"合格标准："+e.standard_text:"")+(e.standard_text&&e.content?"，":"")+e.content)}})]),""!==e.rate?a("div",{staticClass:"item-font item-percent",class:{"color-red":e.rate<1}},[t._v(t._s(t._f("percent")(e.rate)))]):t._e()]):t._e(),2===e.accept_type&&"人工判断"!==e.standard_symbol?a("div",{staticClass:"process-accept-input-group pl15"},t._l(e.problem_values,(function(i,o){return a("div",{key:o,staticClass:"process-accept-input mr10 mb10",class:{"input-exceed":i.isExceed}},[a("number-input",{ref:"ipt-number-"+o,refInFor:!0,attrs:{type:"number",decimal:5,index:o,mykey:i.key,range:[-9999999.99999,9999999.99999]},on:{"input-add":function(a){t.addPoint(e,o,"number")},"input-remove":function(a){t.removePoint(e,o,"number")},blur:function(e){t.problemValueChange(t.detailData)}},model:{value:i.val,callback:function(e){t.$set(i,"val",e)},expression:"value.val"}})],1)}))):t._e(),2===e.accept_type&&"人工判断"===e.standard_symbol?a("div",{staticClass:"process-accept-input-group pl15"},t._l(e.problem_values,(function(i,o){return a("div",{key:o,staticClass:"process-accept-input mr10 mb10",class:{"input-exceed":i.isExceed}},[a("number-input",{ref:"ipt-text-"+o,refInFor:!0,attrs:{type:"text",index:o,decimal:5,mykey:i.key},on:{"input-add":function(a){t.addPoint(e,o,"text")},"input-remove":function(a){t.removePoint(e,o,"text")},blur:function(e){t.problemValueChange(t.detailData)},change:function(e){t.problemValueChange(t.detailData)}},model:{value:i.val,callback:function(e){t.$set(i,"val",e)},expression:"value.val"}})],1)}))):t._e()])})),t.detailData.hasCommonNum?a("div",{staticClass:"proj-title bg-white"},[a("div",{staticClass:"proj-name"},[t._v("一般项目")])]):t._e(),t._l(t.detailFilter(t.detailData.details,2),(function(e,i){return a("div",{key:e.name,staticClass:"bg-white "},[1===e.accept_type?a("div",{staticClass:"item-base item-process-accept-v2 item-align-center",class:{"van-hairline--top":0!==i,"border-none":0===i}},[a("div",{staticClass:"item-text"},[a("p",{staticClass:"item-detail-name",domProps:{textContent:t._s(e.name)}}),a("p",{staticClass:"item-detail-content",domProps:{textContent:t._s(e.content)}})]),a("div",{staticClass:"item-ele",class:{"color-green":"合格"===e.status},on:{click:function(a){t.setDetailStatus(e,"合格",t.detailData)}}},[a("icon",{attrs:{name:"qualified"}}),"合格"===e.status?a("p",{staticClass:"f10"},[t._v("合格")]):t._e()],1),a("div",{staticClass:"item-ele ml20",class:{"color-red":"不合格"===e.status},on:{click:function(a){t.setDetailStatus(e,"不合格",t.detailData)}}},[a("icon",{attrs:{name:"unqualified"}}),"不合格"===e.status?a("p",{staticClass:"f10"},[t._v("不合格")]):t._e()],1)]):t._e(),2===e.accept_type?a("div",{staticClass:"item-base item-process-accept-v2",class:{"van-hairline--top":0!==i,"border-none":0===i}},[a("div",{staticClass:"item-text"},[a("p",{staticClass:"item-detail-name",domProps:{textContent:t._s(e.name)}}),a("p",{staticClass:"item-detail-content item-detail-content",domProps:{textContent:t._s((e.standard_text?"合格标准："+e.standard_text:"")+(e.standard_text&&e.content?"，":"")+e.content)}})]),""!==e.rate?a("div",{staticClass:"item-font item-percent",class:{"color-red":e.rate<.8}},[t._v(t._s(t._f("percent")(e.rate)))]):t._e()]):t._e(),2===e.accept_type&&"人工判断"!==e.standard_symbol?a("div",{staticClass:"process-accept-input-group pl15"},t._l(e.problem_values,(function(i,o){return a("div",{key:o,staticClass:"process-accept-input mr10 mb10",class:{"input-exceed":i.isExceed}},[a("number-input",{ref:"ipt-number-"+o,refInFor:!0,attrs:{type:"number",decimal:5,index:o,mykey:i.key,range:[-9999999.99999,9999999.99999]},on:{"input-add":function(a){t.addPoint(e,o,"number")},"input-remove":function(a){t.removePoint(e,o,"number")},blur:function(e){t.problemValueChange(t.detailData)}},model:{value:i.val,callback:function(e){t.$set(i,"val",e)},expression:"value.val"}})],1)}))):t._e(),2===e.accept_type&&"人工判断"===e.standard_symbol?a("div",{staticClass:"process-accept-input-group pl15"},t._l(e.problem_values,(function(i,o){return a("div",{key:o,staticClass:"process-accept-input mr10 mb10",class:{"input-exceed":i.isExceed}},[a("number-input",{ref:"ipt-text-"+o,refInFor:!0,attrs:{type:"text",decimal:5,index:o,mykey:i.key},on:{"input-add":function(a){t.addPoint(e,o,"text")},"input-remove":function(a){t.removePoint(e,o,"text")},blur:function(e){t.problemValueChange(t.detailData)}},model:{value:i.val,callback:function(e){t.$set(i,"val",e)},expression:"value.val"}})],1)}))):t._e()])})),a("div",{staticClass:"bg-white"},[a("div",{staticClass:"proj-title "},[a("div",{staticClass:"proj-name"},[t._v("总体结果")]),t.detailData.sum.status&&"未验"!=t.detailData.sum.status?a("div",{staticClass:"proj-overall-result",class:{"bg-green":"合格"===t.detailData.sum.status},domProps:{textContent:t._s("未验"==t.detailData.sum.status?"-":t.detailData.sum.status)}}):t._e()]),a("div",{staticClass:"proj-result-cont"},[a("ul",[a("li",[a("span",[t._v("主控项")]),a("span",{class:{"color-gray7":!t.detailData.hasMasterNum},domProps:{textContent:t._s("未验"==t.detailData.sum.masterStatus?t.detailData.hasMasterNum?"-":"未设置":t.detailData.sum.masterStatus||"-")}})]),a("li",[a("span",[t._v("一般项")]),a("span",{class:{"color-gray7":!t.detailData.hasCommonNum},domProps:{textContent:t._s("未验"==t.detailData.sum.commonStatus?t.detailData.hasCommonNum?"-":"未设置":t.detailData.sum.commonStatus||"-")}})]),a("li",[a("span",[t._v("最低合格率")]),a("span",{class:{"color-gray7":!t.detailData.hasMeasureNum},domProps:{textContent:t._s(""===t.detailData.sum.lowest?t.detailData.hasMeasureNum?"-":"无实测类":(100*t.detailData.sum.lowest).toFixed(1)+"%")}})])])])]),t.detailData.isSetCheckPoint?[t._l(t.detailData.checkPoints,(function(e,i){return[a("item",{key:"hd"+i,staticClass:"mt10",attrs:{text:e.title,"icon-right":("string"==typeof e.is_open?"true"===e.is_open:e.is_open)?"arrow-up":"arrow-down",border:"bottom"},on:{click:function(a){t.togglePoint(e)}}},[a("i",{staticClass:"icon-point",attrs:{slot:"icon-left"},slot:"icon-left"})]),("string"==typeof e.is_open?"true"===e.is_open:e.is_open)?a("div",{key:"img"+i,staticClass:"p15 bg-white"},[a("item-img-list",{attrs:{maxlength:15,group:"check-point-edit"},on:{callback:function(e){t.saveProblem(!0)}},model:{value:e.image_file,callback:function(a){t.$set(e,"image_file",a)},expression:"point.image_file"}})],1):t._e(),("string"==typeof e.is_open?"true"===e.is_open:e.is_open)&&e.content?a("div",{key:"con"+i,staticClass:"pl15 pr15 pb10 bg-white"},[a("div",{staticClass:"point-content"},[t._v(t._s(e.content))])]):t._e()]}))]:t._e(),a("div",{staticClass:"item-photo-proj"},[t.detailData.isSetCheckPoint?t._e():a("item",{staticClass:"p15 van-hairline--bottom"},[a("item-img-list",{attrs:{maxlength:15},on:{callback:function(e){t.saveProblem(!0)}},model:{value:t.detailData.image_file,callback:function(e){t.$set(t.detailData,"image_file",e)},expression:"detailData.image_file"}})],1),a("item-textarea",{attrs:{placeholder:"备注(选填)"},on:{blur:function(e){t.saveProblem(!0)}},model:{value:t.detailData.remark,callback:function(e){t.$set(t.detailData,"remark",e)},expression:"detailData.remark"}}),a("user-select",{attrs:{title:"共同验收人",multi:!0,options:t.ccOptions},on:{onSelect:function(e){return t.saveProblem(!0,e)}},model:{value:t.detailData.partners_set,callback:function(e){t.$set(t.detailData,"partners_set",e)},expression:"detailData.partners_set"}}),a("div",{attrs:{flag:t.flag}},[a("user-select",{attrs:{title:"抄送人",multi:!0,memory:!0,options:t.ccOptions,required:!0},on:{onSelect:function(e){return t.saveProblem(!0,e)}},model:{value:t.detailData.cc_set,callback:function(e){t.$set(t.detailData,"cc_set",e)},expression:"detailData.cc_set"}})],1)],1)],2),!t.detailData||t.detailData.detailsError||"view"!==t.mode&&"view"!==t.detailData.mode?t._e():a("div",[a("div",{staticClass:"bg-white"},[a("div",{staticClass:"proj-title mt0 clearfix"},[a("div",{staticClass:"proj-name"},[t._v("总体结果")]),t.detailData.sum.status&&"未验"!=t.detailData.sum.status?a("div",{staticClass:"proj-overall-result",class:{"bg-green":"合格"===t.detailData.sum.status},domProps:{textContent:t._s("未验"==t.detailData.sum.status?"-":t.detailData.sum.status)}}):t._e()]),a("div",{staticClass:"proj-result-cont"},[a("ul",[a("li",[a("span",[t._v("主控项")]),a("span",{class:{"color-gray7":!t.detailData.hasMasterNum},domProps:{textContent:t._s("未验"==t.detailData.sum.masterStatus?t.detailData.hasMasterNum?"-":"未设置":t.detailData.sum.masterStatus||"-")}})]),a("li",[a("span",[t._v("一般项")]),a("span",{class:{"color-gray7":!t.detailData.hasCommonNum},domProps:{textContent:t._s("未验"==t.detailData.sum.commonStatus?t.detailData.hasCommonNum?"-":"未设置":t.detailData.sum.commonStatus||"-")}})]),a("li",[a("span",[t._v("最低合格率")]),a("span",{class:{"color-gray7":!t.detailData.hasMeasureNum},domProps:{textContent:t._s(""===t.detailData.sum.lowest||null===t.detailData.sum.lowest?t.detailData.hasMeasureNum?"-":"无实测类":(100*t.detailData.sum.lowest).toFixed(1)+"%")}})])])])]),t.detailData.hasMasterDetail?a("div",{staticClass:"proj-title bg-white"},[a("div",{staticClass:"proj-name"},[t._v("主控项目")]),t.detailData.master_unqualified_num?a("span",{staticClass:"proj-judgment-view"},[t._v(t._s(t.detailData.master_unqualified_num)+"项不合格")]):t._e()]):t._e(),t._l(t.detailFilter(t.detailData.details,1),(function(e,i){return a("div",{key:i,staticClass:"bg-white"},[1===e.accept_type?a("div",{staticClass:"item-base item-process-accept-v2 item-align-center",class:{"van-hairline--top":0!==i,"border-none":0===i}},[a("div",{staticClass:"item-text"},[a("p",{staticClass:"item-detail-name",domProps:{textContent:t._s(e.name)}}),a("p",{staticClass:"item-detail-content",domProps:{textContent:t._s(e.content)}})]),a("div",{staticClass:"item-font",class:{"color-red":"不合格"===e.status},domProps:{textContent:t._s(e.status)}})]):t._e(),2===e.accept_type?a("div",{staticClass:"item-base item-process-accept-v2",class:{"van-hairline--top":0!==i,"border-none":0===i}},[a("div",{staticClass:"item-text"},[a("p",{staticClass:"item-detail-name",domProps:{textContent:t._s(e.name)}}),a("p",{staticClass:"item-detail-content",domProps:{textContent:t._s((e.standard_text?"合格标准："+e.standard_text:"")+(e.standard_text&&e.content?"，":"")+e.content)}})]),""!==e.rate?a("div",{staticClass:"item-font item-percent",class:{"color-red":e.rate<1}},[t._v(t._s(t._f("percent")(e.rate)))]):t._e()]):t._e(),2===e.accept_type&&"人工判断"!==e.standard_symbol?a("div",{staticClass:"pl15 pb10"},t._l(e.problem_values,(function(e,i){return a("span",{key:i},[0!==i?a("span",[t._v(",")]):t._e(),a("span",{class:{"color-red":e.isExceed}},[t._v(t._s(e.val))])])}))):t._e(),2===e.accept_type&&"人工判断"===e.standard_symbol?a("div",{staticClass:"pl15 pb10"},t._l(e.problem_values,(function(e,i){return a("span",{key:i},[0!==i?a("span",[t._v(",")]):t._e(),a("span",{class:{"color-red":0===e.val},domProps:{textContent:t._s(["不合格","合格"][e.val])}})])}))):t._e()])})),t.detailData.hasCommonDetail?a("div",{staticClass:"proj-title bg-white"},[a("div",{staticClass:"proj-name"},[t._v("一般项目")]),t.detailData.common_unqualified_num?a("span",{staticClass:"proj-judgment-view"},[t._v(t._s(t.detailData.common_unqualified_num)+"项不合格")]):t._e()]):t._e(),t._l(t.detailFilter(t.detailData.details,2),(function(e,i){return a("div",{key:e.name,staticClass:"bg-white "},[1===e.accept_type?a("div",{staticClass:"item-base item-process-accept-v2 item-align-center",class:{"van-hairline--top":0!==i,"border-none":0===i}},[a("div",{staticClass:"item-text"},[a("p",{staticClass:"item-detail-name",domProps:{textContent:t._s(e.name)}}),a("p",{staticClass:"item-detail-content",domProps:{textContent:t._s(e.content)}})]),a("div",{staticClass:"item-font",class:{"color-red":"不合格"===e.status},domProps:{textContent:t._s(e.status)}})]):t._e(),2===e.accept_type?a("div",{staticClass:"item-base item-process-accept-v2",class:{"van-hairline--top":0!==i,"border-none":0===i}},[a("div",{staticClass:"item-text"},[a("p",{staticClass:"item-detail-name",domProps:{textContent:t._s(e.name)}}),a("p",{staticClass:"item-detail-content",domProps:{textContent:t._s((e.standard_text?"合格标准："+e.standard_text:"")+(e.standard_text&&e.content?"，":"")+e.content)}})]),""!==e.rate?a("div",{staticClass:"item-font item-percent",class:{"color-red":e.rate<.8}},[t._v(t._s(t._f("percent")(e.rate)))]):t._e()]):t._e(),2===e.accept_type&&"人工判断"!==e.standard_symbol?a("div",{staticClass:"pl15 pb10"},t._l(e.problem_values,(function(e,i){return a("span",{attrs:{Key:i}},[0!==i?a("span",[t._v(",")]):t._e(),a("span",{class:{"color-red":e.isExceed}},[t._v(t._s(e.val))])])}))):t._e(),2===e.accept_type&&"人工判断"===e.standard_symbol?a("div",{staticClass:"pl15 pb10"},t._l(e.problem_values,(function(e,i){return a("span",{attrs:{Key:i}},[0!==i?a("span",[t._v(",")]):t._e(),a("span",{class:{"color-red":0===e.val},domProps:{textContent:t._s(["不合格","合格"][e.val])}})])}))):t._e()])})),t.detailData.isSetCheckPoint?[t._l(t.detailData.checkPoints,(function(e,i){return[a("item",{key:"title"+i,staticClass:"mt10",attrs:{text:e.title}},[a("i",{staticClass:"icon-point",attrs:{slot:"icon-left"},slot:"icon-left"})]),a("item",{key:"img"+i,staticClass:"pt0 pb15"},[a("item-img-list",{attrs:{"model-id":e.id,"model-field":"image_file","model-table":"process_acceptv2_checkpoint",group:"process-acceptv2-checkpoint-view",editabled:!1},model:{value:e.image_file,callback:function(a){t.$set(e,"image_file",a)},expression:"point.image_file"}})],1)]}))]:t._e(),a("div",{staticClass:"mt10"}),t.detailData.isSetCheckPoint?t._e():a("item",{attrs:{label:t.detailData.remark?"备注":"相关照片"}},[a("div",{staticClass:"item-text",attrs:{slot:"right"},slot:"right"},[t.detailData.remark?a("p",{staticClass:"mb10"},[t._v("\n          "+t._s(t.detailData.remark)+"\n        ")]):t._e(),t.detailData.image_file.length?a("item-img-list",{attrs:{editabled:!1},model:{value:t.detailData.image_file,callback:function(e){t.$set(t.detailData,"image_file",e)},expression:"detailData.image_file"}}):t._e()],1)]),t.detailData.remark&&t.detailData.isSetCheckPoint?a("item",{attrs:{label:"备注"}},[a("div",{staticClass:"item-text",attrs:{slot:"right"},slot:"right"},[a("p",{staticClass:"mb10"},[t._v(t._s(t.detailData.remark))])])]):t._e(),a("user-select",{attrs:{title:"提交人",date:t._f("formatDate")(t.detailData.created_on),mode:"view",editabled:!1},model:{value:t.detailData.creator,callback:function(e){t.$set(t.detailData,"creator",e)},expression:"detailData.creator"}}),t.detailData.partners_set&&t.detailData.partners_set.length?a("user-select",{attrs:{title:"共同验收人",editabled:!1,multi:!0,mode:"view"},model:{value:t.detailData.partners_set,callback:function(e){t.$set(t.detailData,"partners_set",e)},expression:"detailData.partners_set"}}):t._e(),t.detailData.cc_set&&t.detailData.cc_set.length?a("user-select",{attrs:{title:"抄送人",editabled:!1,multi:!0,mode:"view"},model:{value:t.detailData.cc_set,callback:function(e){t.$set(t.detailData,"cc_set",e)},expression:"detailData.cc_set"}}):t._e()],2),t.batchButton?a("div",{staticClass:"processv2-batch-accept pl15 pr15"},[a("van-checkbox",{attrs:{shape:"square",disabled:3===t.processMode},on:{click:t.batchOpened,change:t.batchChange},model:{value:t.isBatch,callback:function(e){t.isBatch=e},expression:"isBatch"}},[t._v("批量验收")]),a("icon",{staticClass:"color-gray3",attrs:{name:"yiwen"},on:{click:function(e){t.batchTips()}}})],1):t._e(),!t.detailData||t.detailData.detailsError||t.checkAcceptError?a("loading-status",{style:{height:t.viewSize.contentHeight-244+"px"},attrs:{"is-empty":!t.detailData||t.detailData.detailsError||t.checkAcceptError}},[a("div",{attrs:{slot:"empty-text"},slot:"empty-text"},[a("div",[t._v(t._s(t.emptyText[0]))]),a("div",[t._v(t._s(t.emptyText[1]))])])]):t._e()],1)}),[],!1,null,"c9d2628c",null);e.a=s.exports},"574c":function(t,e,a){(t.exports=a("690e")(!1)).push([t.i,".zjapp .item-textarea{background-color:#fff;padding:5px 15px}.zjapp .item-textarea-content{position:relative}.zjapp .item-textarea .rule,.zjapp .item-textarea textarea{width:100%;min-height:40px;line-height:20px;font-size:16px;padding:0;border:none}.zjapp .item-textarea .rule{position:absolute;top:0;left:0;visibility:hidden;word-break:break-all}.zjapp .item-textarea .counter{text-align:right;margin:0 0 -5px 0;height:15px;line-height:15px;color:#b2b2b2;font-size:12px}",""])},"5a71":function(t,e,a){"use strict";var i=a("29be").a,o=a("17cc"),s=Object(o.a)(i,(function(){var t=this,e=t.$createElement;return(t._self._c||e)("item",{class:t.required,attrs:{label:t.title,text:t.value&&t.value.id?t.value.name:"view"===t.mode?"无":"",mode:t.mode,editabled:t.editabled,placeholder:t.required?t.placeholder||"请选择":"选填","form-check":t.formCheck},on:{click:t.openSelect}})}),[],!1,null,null,null);e.a=s.exports},"5c19":function(t,e,a){(t.exports=a("690e")(!1)).push([t.i,".zjapp .content-not-empty[data-v-43042f0d] .layout-content{display:auto;overflow:auto;padding-bottom:100px}.zjapp .check-guide-detail-hd[data-v-43042f0d]{margin-left:30px;padding:25px 30px 5px 0}.zjapp .check-guide-detail-title[data-v-43042f0d]{margin:0;line-height:20px;font-size:18px;color:#111;font-weight:700;word-break:break-all}.zjapp .check-guide-detail-info[data-v-43042f0d]{line-height:20px;font-size:14px;color:#8c8c8c}.zjapp .check-guide-detail-content[data-v-43042f0d]{padding:30px;line-height:30px;color:#333;font-size:16px}.zjapp .check-guide-detail-content p[data-v-43042f0d]{margin-bottom:30px;min-height:1em}.zjapp .check-guide-detail-content img[data-v-43042f0d]{max-width:100%}.zjapp .check-guide-detail-content .img-not-ready[data-v-43042f0d]{width:80px;height:auto}.zjapp .error[data-v-43042f0d]{max-width:50%}",""])},"668f":function(t,e,a){"use strict";a("cd7e")},"79f7":function(t,e,a){"use strict";(function(t){var i=a("e89f"),o=a("1df9"),s=a("774b"),n=a("e2a7");e.a={components:{PageContent:o.a,Scroller:s.a},mixins:[i.a],data:function(){return{actionTabs:[],show:!1,title:"",type:90,options:[],current:null,selectedRoom:"",selectedRoomNumber:1,allChecked:!1,allDisabled:!1,callback:null,checkStatus:{partSelected:"-indeterminate",fullSelected:"-checked"}}},methods:{openPopup:function(e){this.show=!0,this.title=e.title,this.type=e.type,this.options=t.cloneDeep(e.options),this.current=e.current,this.selectedRoom="",this.selectedRoomNumber=1,this.allChecked=!1,this.allDisabled=!1,this.callback=e.callback,this.actionTabs=[],this.getSelectedRoom(),this.$emit("open")},closePopup:function(){this.show=!1,this.$emit("close")},getSelected:function(){var e=[];return 99===this.type&&t.each(this.options,(function(a){t.each(a.floors,(function(i){t.each(i.rooms,(function(t){t.checked&&(t.unit=a.unit,t.unit_name=a.unit_name,t.floor=i.floor,t.floor_name=i.floor_name,e.push(t))}))}))})),2===this.type&&t.each(this.options,(function(t){t.checked&&(t.unit="",t.unit_name="",e.push(t))})),5===this.type&&t.each(this.options,(function(a){t.each(a.floors,(function(t){t.checked&&(t.unit=a.unit,t.unit_name=a.unit_name,e.push(t))}))})),1===this.type&&t.each(this.options,(function(a){t.each(a.rooms,(function(t){t.checked&&(t.unit="",t.unit_name="",t.floor_name=a.floor_name,t.room_id=t.id,e.push(t))}))})),e},toggleGroup:function(t){t.isOpen=!t.isOpen},selectFloor:function(e,a){e.status||e.floor+(a?a.unit_name:"")===this.current?e.status&&!e.checked&&n.a.alert(e.status):(e.checked=!e.checked,a?a.allChecked=t.every(a.floors,(function(t){return t.checked})):this.allChecked=t.every(this.options,(function(t){return t.checked})),this.getSelectedRoom())},selectAll:function(e,a){var i=this;99===this.type&&(e&&t.each(e.floors,(function(a){t.each(a.rooms,(function(t){t.status||t.id+(t.unit_name||"")===i.current||(t.checked="fullSelected"!==e.allChecked)}))})),a&&t.each(a.rooms,(function(t){t.status||t.id+(t.unit_name||"")===i.current||(t.checked=!a.allChecked)}))),2===this.type&&t.each(this.options,(function(t){t.status||t.floor+(t.unit_name||"")===i.current||(t.checked=!i.allChecked)})),5===this.type&&t.each(e.floors,(function(t){t.status||t.floor+(e.unit_name||"")===i.current||(t.checked=!e.allChecked)})),1===this.type&&t.each(e.rooms,(function(t){t.status||t.id+(t.unit_name||"")===i.current||(t.checked=!e.allChecked)})),this.getSelectedRoom()},selectRoom:function(t,e,a){t.status||t.id+(a?a.unit_name:"")===this.current?t.status&&!t.checked&&n.a.alert(t.status):(t.checked=!t.checked,a&&(a.allChecked="partSelected"),this.getSelectedRoom())},select:function(){var t=this,e=this.getSelected();if(!e||!e.length)return n.a.alert("未选择移交房间");return n.a.confirm("确定批量提交吗",{okText:"提交",cancelText:"取消"}).then((function(a){a&&(t.callback&&t.callback(e),t.closePopup())}))},getSelectedRoom:function(){var e=this,a=0;this.selectedRoom="",99===this.type&&t.each(this.options,(function(i){i.checkedNumber=0,i.count=0,t.each(i.floors,(function(o){t.each(o.rooms,(function(t){t.checked&&!t.disabled&&(a++,e.selectedRoom+=""===e.selectedRoom?t.unit_name+t.room_name:"、"+t.unit_name+t.room_name,i.checkedNumber++),t.status&&t.id+t.unit_name!==e.current||i.count++})),o.allChecked=t.every(o.rooms,(function(t){return t.checked||t.status})),o.disabed=t.every(o.rooms,(function(t){return t.status}))})),i.checkedNumber>0?i.allChecked="partSelected":i.allChecked="",i.checkedNumber===i.count&&(i.allChecked="fullSelected")})),2===this.type&&(t.each(this.options,(function(t){t.checked&&!t.disabled&&(a++,e.selectedRoom+=""===e.selectedRoom?t.floor_name:"、"+t.floor_name)})),this.allChecked=t.every(this.options,(function(t){return t.checked||t.status})),this.allDisabled=t.every(this.options,(function(t){return t.status}))),5===this.type&&t.each(this.options,(function(i){t.each(i.floors,(function(t){t.checked&&!t.disabled&&(a++,e.selectedRoom+=""===e.selectedRoom?i.unit_name+t.floor_name:"、"+i.unit_name+t.floor_name)})),i.allChecked=t.every(i.floors,(function(t){return t.checked||t.status})),i.disabed=t.every(i.floors,(function(t){return t.status}))})),1===this.type&&t.each(this.options,(function(i){t.each(i.rooms,(function(t){t.checked&&!t.disabled&&(a++,e.selectedRoom+=""===e.selectedRoom?t.room_name:"、"+t.room_name)})),i.allChecked=t.every(i.rooms,(function(t){return t.checked||t.status})),i.disabed=t.every(i.rooms,(function(t){return t.status}))})),console.log(this.type,this.selectedRoom,"======="),this.selectedRoomNumber=a}}}}).call(this,a("391c"))},"7db0":function(t,e,a){var i=a("1bc5");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);(0,a("85cb").default)("5e6311fb",i,!0,{sourceMap:!1,shadowMode:!1})},"81f2":function(t,e,a){(t.exports=a("690e")(!1)).push([t.i,'.zjapp .main[data-v-2cac8864]{position:fixed;width:100%;bottom:0}.zjapp .arrow[data-v-2cac8864]{position:absolute;top:-7px;right:18px;width:0;height:0;border-bottom:7px solid #fff;border-right:7px solid transparent;border-left:7px solid transparent}.zjapp .content[data-v-2cac8864]{position:absolute;top:0;left:0;width:100%;height:100%;background-color:rgba(0,0,0,.4);overflow:hidden}.zjapp .box[data-v-2cac8864]{display:flex;flex-direction:column;background-color:#fff;overflow:auto}.zjapp .box-single[data-v-2cac8864]{display:flex;flex-direction:column;flex:1}.zjapp .detail-hd[data-v-2cac8864]{display:flex;padding:6px 15px}.zjapp .detail-arrow-right[data-v-2cac8864]{width:13px;height:34px;overflow:hidden}.zjapp .detail-arrow-right[data-v-2cac8864]:before{display:block;content:"";width:0;height:0;margin-top:12px;border:5px solid transparent;border-left:5px solid #c8c8c8}.zjapp .detail-arrow-down[data-v-2cac8864]{width:13px;height:34px;overflow:hidden}.zjapp .detail-arrow-down[data-v-2cac8864]:before{display:block;content:"";width:0;height:0;margin-top:15px;border:5px solid transparent;border-top:5px solid #c8c8c8}.zjapp .detail-title[data-v-2cac8864]{flex:1;line-height:34px;color:#111;font-size:16px}.zjapp .detail-bd[data-v-2cac8864]{padding:8px 15px 8px 35px;background-color:#fafafa}.zjapp .text-line[data-v-2cac8864]{font-size:14px;color:#666;line-height:30px;margin-bottom:30px}.zjapp .detail-hd-single[data-v-2cac8864]{padding:6px 0;margin:0 15px}.zjapp .detail-bd-single[data-v-2cac8864]{display:flex;flex-direction:column;flex:1;padding:8px 15px;background-color:#fff}',""])},8593:function(t,e,a){"use strict";a("2b45"),a("163d");var i=a("329b"),o=a("f766").a,s=(a("cf8c"),a("17cc")),n=Object(s.a)(o,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("transition",{attrs:{name:"slide-up"},on:{leave:t.startClose,afterLeave:t.onClose}},[t.show?a("div",{staticClass:"number-keyboard-con",class:{"ios-bezel-less":t.isIOSBezelLess},style:{"z-index":t.zIndex},on:{touchstart:t.keyTouchstart,touchend:t.keyTouchend}},[a("div",{staticClass:"keyboard-row"},[a("div",{staticStyle:{flex:"1"}},["number"===t.inputComponent.type?[a("div",{staticClass:"keyboard-row"},[a("div",{staticClass:"keys",attrs:{direct:"1"}},[t._v("1")]),a("div",{staticClass:"keys",attrs:{direct:"2"}},[t._v("2")]),a("div",{staticClass:"keys",attrs:{direct:"3"}},[t._v("3")])]),a("div",{staticClass:"keyboard-row"},[a("div",{staticClass:"keys",attrs:{direct:"4"}},[t._v("4")]),a("div",{staticClass:"keys",attrs:{direct:"5"}},[t._v("5")]),a("div",{staticClass:"keys",attrs:{direct:"6"}},[t._v("6")])]),a("div",{staticClass:"keyboard-row"},[a("div",{staticClass:"keys",attrs:{direct:"7"}},[t._v("7")]),a("div",{staticClass:"keys",attrs:{direct:"8"}},[t._v("8")]),a("div",{staticClass:"keys",attrs:{direct:"9"}},[t._v("9")])]),a("div",{staticClass:"keyboard-row"},[a("div",{staticClass:"keys",class:{disabled:t.isDisabledMinus},attrs:{direct:"-"}},[t._v("-")]),a("div",{staticClass:"keys",attrs:{direct:"0"}},[t._v("0")]),a("div",{staticClass:"keys",class:{disabled:t.isDisabledPoint},attrs:{direct:"."}},[t._v(".")])])]:t._e(),"text"===t.inputComponent.type?[a("div",{staticClass:"keyboard-row"},[a("div",{staticClass:"keys col color-green",attrs:{direct:"1"}},[a("icon",{attrs:{name:"qualified"}}),t._v("\n              合格\n            ")],1),a("div",{staticClass:"keys col color-red",attrs:{direct:"0"}},[a("icon",{attrs:{name:"unqualified"}}),t._v("\n              不合格\n            ")],1)])]:t._e()],2),a("div",{staticClass:"right-btns"},[a("div",{staticClass:"keys keys-ok",attrs:{direct:"closeKeyboard"}},[a("icon",{attrs:{name:"keyboard-close"}})],1),String(t.inputComponent.value)?a("div",{staticClass:"keys keys-delete",attrs:{direct:"delete"}},[a("icon",{attrs:{name:"keyboard-delete"}})],1):t._e(),String(t.inputComponent.value)?t._e():a("div",{staticClass:"keys keys-prev color-black",attrs:{direct:"remove"}},[t._v("\n          移除\n        ")]),"number"===t.inputComponent.type?a("div",{staticClass:"keys keys-add",attrs:{direct:"add"}},[t._v("\n          添加测点\n        ")]):t._e()])]),a("div",{staticClass:"keyboard-row"},[a("div",{staticClass:"keys keys-prev color-blue",class:{disabled:!t.hasPrev},attrs:{direct:"next"}},[t._v("\n        下一验收项\n      ")]),"number"!==t.inputComponent.type?a("div",{staticClass:"keys keys-next color-blue",class:{disabled:!t.hasNext},attrs:{direct:"add"}},[t._v("\n        添加测点\n      ")]):t._e()])]):t._e()])}),[],!1,null,"7fdd42c6",null).exports,c=!1;c||(c=new(i.default.extend(n))({el:document.createElement("div")}),document.body.appendChild(c.$el));var l=c,r=a("6f9e"),d=a("4360"),p={name:"NumberInput",props:{value:{type:[String,Number]},keyboardType:{type:String,default:"all"},index:{type:[String,Number]},type:{type:String,default:"number"},range:{type:Array,default:function(){return[]}},decimal:{type:Number,default:2},placeholder:{type:String,default:""},mykey:{type:Number}},data:function(){return{keyboardHeight:d.a.state.app.isIOSBezelLess?322:288,isFocusing:!1,isSelectAll:!1,newValue:"wode"}},computed:{min:function(){return isNaN(this.range[0])?-1/0:parseFloat(this.range[0])},max:function(){return isNaN(this.range[1])?1/0:parseFloat(this.range[1])}},created:function(){this.keyboardHeight="text"===this.type?176:288,d.a.state.app.isIOSBezelLess&&(this.keyboardHeight+=34),r.a.$on("numberInputBlur",this.setBlur),r.a.$on("numberKeyboardClose",this.setBlur)},beforeDestroy:function(){this.isFocusing&&l.closeKeyboard()},destroyed:function(){r.a.$off("numberInputBlur",this.setBlur),r.a.$off("numberKeyboardClose",this.setBlur)},methods:{hasVal:function(t){return null!=t&&""!==t},openKeyboard:function(){this.isFocusing?this.isSelectAll=!1:(r.a.$emit("numberInputBlur"),this.setFocus(),l.openKeyboard({inputComponent:this}))},setFocus:function(){this.isFocusing=!0,this.isSelectAll=!0,l.$on("keyboardInput",this.input),l.$on("keyboardAdd",this.add),l.$on("keyboardRemove",this.remove),l.$on("keyboardDelete",this.deleteValue),l.$on("keyboardClear",this.clear),this.$emit("focus")},setBlur:function(){if(this.isFocusing){var t=this.checkValue();this.isFocusing=!1,this.isSelectAll=!1,l.$off("keyboardInput",this.input),l.$off("keyboardDelete",this.deleteValue),l.$off("keyboardAdd",this.add),l.$off("keyboardRemove",this.remove),l.$off("keyboardClear",this.clear),this.$emit("input",t),this.$emit("blur",t)}},input:function(t){var e=this,a=this.hasVal(this.value)?this.value.toString():"",i="";this.isSelectAll||"text"===this.type?(i=t,this.isSelectAll=!1):i=a+t,this.newValue=i,setTimeout((function(){e.$emit("input",i),e.$emit("change",i)}),100),l.setKeysStatus(i,this.keyboardType)},add:function(){this.$emit("input-add")},remove:function(){this.$emit("input-remove")},deleteValue:function(){var t=this.hasVal(this.value)?this.value.toString():"",e="";this.hasVal(t)&&(e=t.substr(0,t.length-1)),"text"===this.type&&(e=""),this.$emit("input",e),l.setKeysStatus(e,this.keyboardType)},clear:function(){this.$emit("input",""),l.setKeysStatus("",this.keyboardType)},checkValue:function(){var t=this.hasVal(this.value)?this.value.toString():"";"-"===t&&(t=""),"."===t.substr(-1)&&(t=t.substr(0,t.length-1));var e=t.indexOf(".");return e>0&&(t=parseFloat(t.substring(0,e+this.decimal+1))),t=parseFloat(t),isNaN(t)?t="":(t<this.min&&(t=this.min,this.$emit("overflowRange")),t>this.max&&(t=this.max,this.$emit("overflowRange"))),t}}},u=(a("fc22"),Object(s.a)(p,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"number-input component-number-input",class:{"number-input-focus":t.isFocusing,"number-input-select-all":t.isSelectAll,unqualified:0===t.value&&"text"===t.type,first:0===t.index}},[a("div",{staticClass:"text",on:{click:function(e){return e.stopPropagation(),t.openKeyboard(e)}}},[t.hasVal(t.value)?a("span",{staticClass:"value"},["text"===t.type?a("span",[t._v(t._s(["不合格","合格"][t.value]))]):a("span",{staticClass:"value-handle"},[t._v(t._s(t.value))])]):a("span",{staticClass:"placeholder"},[t._v("\n      "+t._s(t.placeholder)+"\n    ")])]),t._t("extend")],2)}),[],!1,null,"3efcb2a2",null));e.a=u.exports},9120:function(t,e,a){var i=a("2ddb");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);(0,a("85cb").default)("cb55f532",i,!0,{sourceMap:!1,shadowMode:!1})},"91c1":function(t,e,a){"use strict";(function(t){a("5ab2"),a("6d57"),a("e10e"),a("9a33");var i=a("28f8"),o=a("e68e"),s=a("6f9e"),n=a("bcc7"),c=a("e89f");function l(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,i)}return a}function r(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?l(Object(a),!0).forEach((function(e){Object(i.a)(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):l(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}e.a={name:"CheckGuideDetailDrop",components:{ItemImgList:o.a},mixins:[c.a],data:function(){return{show:!1,showList:!1,isLoading:!1,isOpening:!1,isClosing:!1,contentTop:64,listHeight:510,module:"",itemIds:[],data:[],target:""}},watch:{show:function(t){var e=this;t&&this.$nextTick((function(){e.showList=!0}))}},created:function(){s.a.$on("routerBeforeEach",this.closePopup),s.a.$on("pageContentClick",this.onClickOther)},destroyed:function(){s.a.$off("routerBeforeEach",this.closePopup),s.a.$off("pageContentClick",this.onClickOther)},methods:{openPopup:function(e){this.show=!0,this.$emit("open"),this.module=e.module,this.itemIds=e.itemIds,this.options=e.options;var a=document.querySelector(".layout-main .layout-header");if(this.contentTop=a.offsetHeight,e.el){var i=e.el.getBoundingClientRect();this.contentTop=i.bottom}this.target=e.el,this.listHeight=t.minBy([window.innerHeight-this.contentTop-50,510]),this.getData()},closePopup:function(){var t=this;if(!this.isOpening)return this.showList=!1,this.$emit("close"),new Promise((function(e){t.$on("afterClosePopup",e)}))},afterClose:function(){this.show=!1,this.isClosing=!1,this.$emit("afterClosePopup")},onClickOther:function(t){t&&t.target&&t.target!==this.target&&this.show&&this.closePopup()},getData:function(){var e=this;return this.options&&this.options.length?(this.data=t.map(this.options,(function(t){return r(r({},t),{},{isOpen:!1})})),Promise.resolve()):n.a.getMeasureCheckItem(this.itemIds).then((function(a){e.data=t.map(a,(function(e){var a=e.content?e.content.trim():"",i=a?a.split("\n"):[],o=e.content_image?JSON.parse(e.content_image):[],s=t.filter(i,(function(t){return!/<img([\s\S]*)>/gm.test(t)}));return t.each(o,(function(t){t.url=t.url.split("@")[0]})),{id:e.id,name:e.full_name,textArr:s,contentImage:o,isOpen:!1}}))})).catch((function(t){console.error(t)}))},toggleItem:function(t){this.data.length>1&&this.$set(t,"isOpen",!t.isOpen)}}}}).call(this,a("391c"))},"91c5":function(t,e,a){"use strict";var i=a("329b"),o=a("79f7").a,s=(a("1700"),a("17cc")),n=Object(s.a)(o,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("transition",{attrs:{name:"slide-right"}},[t.show?a("page-content",{attrs:{title:t.title,mode:"dialog","on-close":t.closePopup}},[a("div",{staticClass:"header-btn",attrs:{slot:"header-bar-right"},on:{click:t.select},slot:"header-bar-right"},[t._v("\n      确定("+t._s(t.selectedRoomNumber)+")\n    ")]),a("div",{staticClass:"multiple-place-content"},[a("div",{staticClass:"selected"},[a("label",[t._v("已选:")]),a("div",{staticClass:"text"},[t._v("\n          "+t._s(t.selectedRoom)+"\n        ")])])]),a("div",{staticClass:"multiple-place-content -fixed"},[a("div",{staticClass:"selected"},[a("label",[t._v("已选:")]),a("div",{staticClass:"text"},[t._v("\n          "+t._s(t.selectedRoom)+"\n        ")])])]),a("div",{staticClass:"select-wrap"},[2==t.type?a("div",{staticClass:"section"},[a("div",{staticClass:"group pl15 pr15"},[a("div",{staticClass:"group-name"},[t._v("全部")]),a("div",{staticClass:"element-list"},[a("div",{staticClass:"element mr15",class:{checked:t.allChecked,disabled:t.allDisabled},on:{click:function(e){t.selectAll()}}},[t._v("\n              全选\n            ")]),t._l(t.options,(function(e){return a("div",{key:e.floor_name,staticClass:"element mr15",class:{checked:e.checked,disabled:e.status},on:{click:function(a){t.selectFloor(e)}}},[t._v("\n              "+t._s(e.floor_name)+"\n            ")])}))],2)])]):t._e(),5==t.type?a("div",{staticClass:"section"},t._l(t.options,(function(e){return a("div",{key:e.unit_name,staticClass:"group pl15 pr15"},[a("div",{staticClass:"group-name"},[t._v(t._s(e.unit_name))]),a("div",{staticClass:"element-list"},[a("div",{staticClass:"element mr15",class:{checked:e.allChecked,"disabled-all":e.disabed},on:{click:function(a){t.selectAll(e)}}},[t._v("\n              全选\n            ")]),t._l(e.floors,(function(i){return a("div",{key:i.floor_name,staticClass:"element mr15",class:{checked:i.checked,disabled:i.status},on:{click:function(a){t.selectFloor(i,e)}}},[t._v("\n              "+t._s(i.floor_name)+"\n            ")])}))],2)])}))):t._e(),1==t.type?a("div",{staticClass:"section"},t._l(t.options,(function(e){return a("div",{key:e.floor_name,staticClass:"group pl15 pr15"},[a("div",{staticClass:"group-name"},[t._v(t._s(e.floor_name))]),a("div",{staticClass:"element-list"},[a("div",{staticClass:"element -all",class:{checked:e.allChecked,"disabled-all":e.disabed},on:{click:function(a){t.selectAll(e)}}},[t._v("\n              全选\n            ")]),t._l(e.rooms,(function(i){return a("div",{key:i.room_name,staticClass:"element mr15",class:{checked:i.checked,disabled:i.status},on:{click:function(a){t.selectRoom(i,e)}}},[t._v("\n              "+t._s(i.room_name)+"\n            ")])}))],2)])}))):t._e(),99==t.type?a("van-collapse",{model:{value:t.actionTabs,callback:function(e){t.actionTabs=e},expression:"actionTabs"}},t._l(t.options,(function(e){return a("van-collapse-item",{key:e.unit_name,staticClass:"section",attrs:{name:e.id}},[a("strong",{attrs:{slot:"title"},on:{click:function(a){a.stopPropagation(),t.selectAll(e)}},slot:"title"},[a("icon",{attrs:{slot:"icon",name:"checkbox-square"+(e.allChecked?t.checkStatus[e.allChecked]:"")},slot:"icon"}),t._v(t._s(e.unit_name))],1),t._l(e.floors,(function(i){return a("div",{key:i.floor_name,staticClass:"group pl40 pr15  -border-bottom"},[a("div",{staticClass:"group-name"},[t._v(t._s(i.floor_name))]),a("div",{staticClass:"element-list"},[a("div",{staticClass:"element -all",class:{checked:i.allChecked,"disabled-all":i.disabed},on:{click:function(e){t.selectAll(null,i)}}},[t._v("\n                  全选\n                ")]),t._l(i.rooms,(function(o){return a("div",{key:o.room_name,staticClass:"element",class:{checked:o.checked,disabled:o.status},on:{click:function(a){t.selectRoom(o,i,e)}}},[t._v("\n                  "+t._s(o.room_name)+"\n                ")])}))],2)])}))],2)}))):t._e(),t.options&&t.options.length?t._e():a("loading-status",{attrs:{"is-empty":!0,"empty-text":"没有内容"}})],1)]):t._e()],1)}),[],!1,null,"440d4b89",null).exports,c=!1;c||(c=new(i.default.extend(n))({el:document.createElement("div")}),document.body.appendChild(c.$el));e.a=c},9446:function(t,e,a){var i=a("2dd6");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);(0,a("85cb").default)("2192cd00",i,!0,{sourceMap:!1,shadowMode:!1})},9649:function(t,e,a){(t.exports=a("690e")(!1)).push([t.i,'.zjapp .proj-title[data-v-c9d2628c]{margin-top:10px;height:46px;position:relative}.zjapp .proj-title[data-v-c9d2628c]:before{content:"";display:inline-block;width:4px;height:16px;position:relative;top:15px;left:0;background-color:#4275e8}.zjapp .proj-title .proj-name[data-v-c9d2628c]{line-height:46px;margin-left:15px;position:absolute;top:0;color:#333;font-size:16px}.zjapp .proj-title .proj-judgment[data-v-c9d2628c]{float:right}.zjapp .proj-title .proj-judgment span[data-v-c9d2628c]{color:#999;font-size:12px;display:inline-block;line-height:46px;position:relative}.zjapp .proj-title .proj-judgment span[data-v-c9d2628c]:last-child{right:15px}.zjapp .proj-title .proj-judgment span[data-v-c9d2628c]:first-child{right:28px}.zjapp .proj-title .proj-judgment-view[data-v-c9d2628c]{float:right;color:#999;font-size:14px;position:relative;right:15px;line-height:46px}.zjapp .proj-title .proj-overall-result[data-v-c9d2628c]{float:right;width:48px;height:19px;line-height:20px;background-color:#ff3c46;vertical-align:middle;text-align:center;position:relative;right:15px;top:14px;border-radius:4px;color:#fff;font-size:14px}.zjapp .item-process-accept-v2[data-v-c9d2628c]{padding:10px 0;margin:0 15px;line-height:20px}.zjapp .item-process-accept-v2 .icon[data-v-c9d2628c]{padding:10px;margin:0;width:40px;height:40px;line-height:20px;font-size:16px}.zjapp .item-process-accept-v2 .item-text[data-v-c9d2628c]{padding:0}.zjapp .item-process-accept-v2 .item-ele[data-v-c9d2628c]{padding:0;text-align:center;color:#c8c8c8}.zjapp .item-process-accept-v2 .item-detail-name[data-v-c9d2628c]{font-size:14px;line-height:20px;color:#333}.zjapp .item-process-accept-v2 .item-detail-content[data-v-c9d2628c]{font-size:12px;line-height:14px;color:#999}.zjapp .item-process-accept-v2 .item-percent[data-v-c9d2628c]{padding:0 0 0 15px;font-size:14px}.zjapp .process-accept-input[data-v-c9d2628c]{position:relative;display:inline-block;vertical-align:top;width:60px;height:30px;border-radius:3px;text-align:center;font-size:14px;color:#333}.zjapp .process-accept-input input[data-v-c9d2628c]{width:100%;height:100%;padding:5px;text-align:center;background-color:transparent;pointer-events:none}.zjapp .process-accept-input input[readonly][data-v-c9d2628c]{background-color:transparent}.zjapp .process-accept-input input[data-v-c9d2628c]:disabled,.zjapp .process-accept-input input[disabled][data-v-c9d2628c]{background-color:transparent;opacity:1}.zjapp .input-exceed[data-v-c9d2628c]{border-color:#fff3f3;background-color:#fff3f3;color:#ff5050}.zjapp .input-exceed .number-input[data-v-c9d2628c]{color:#ff5050}.zjapp .process-accept-input.input-focus[data-v-c9d2628c]{border-color:#4275e8;box-shadow:0 0 8px 0 rgba(66,117,232,.37)}.zjapp .process-accept-input-show[data-v-c9d2628c]{position:absolute;width:100%;height:100%;top:0;left:0;text-align:center;line-height:30px;font-size:12px;color:#333;background-color:#fff;border-radius:3px;pointer-events:none}.zjapp .process-accept-input.input-exceed .process-accept-input-show[data-v-c9d2628c]{color:#ff5050;background-color:#fff3f3}@media screen and (max-width:360px){.zjapp .process-accept-input[data-v-c9d2628c]{width:58px}}.zjapp .proj-result-cont ul[data-v-c9d2628c]{width:100%;display:flex;padding:10px 0}.zjapp .proj-result-cont ul li[data-v-c9d2628c]{justify-content:center;width:100%;text-align:center;position:relative}.zjapp .proj-result-cont ul li span[data-v-c9d2628c]{display:block}.zjapp .proj-result-cont ul li span[data-v-c9d2628c]:first-child{color:#666;font-size:12px;height:17px;line-height:17px}.zjapp .proj-result-cont ul li span[data-v-c9d2628c]:nth-child(2){color:#333;font-size:14px;line-height:20px;margin-top:10px}.zjapp .proj-result-cont ul li[data-v-c9d2628c]:after{content:"";height:30px;width:1px;background-color:#ececec;display:inline-block;position:absolute;right:0;top:9px}.zjapp .item-photo-proj[data-v-c9d2628c]{margin-top:10px;margin-bottom:10px}.zjapp .item-photo-view[data-v-c9d2628c]{margin-top:10px}.zjapp .item-base.van-hairline--top[data-v-c9d2628c]{position:relative;background-image:none}.zjapp .icon-point[data-v-c9d2628c]{position:absolute;top:15px;left:0;width:4px;height:16px;background-color:#4275e8}.zjapp .point-content[data-v-c9d2628c]{font-size:14px;background-color:#f0f0f0;padding:10px;color:#666;border-radius:3px;word-wrap:break-word}',""])},9788:function(t,e,a){"use strict";a("9446")},"9b25":function(t,e,a){"use strict";a("b09a")},"9bd1":function(t,e,a){var i=a("43c9");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);(0,a("85cb").default)("0d12ba7b",i,!0,{sourceMap:!1,shadowMode:!1})},"9c49":function(t,e,a){"use strict";(function(t){a("e697"),a("163d");var i=a("e2a7"),o=a("8593"),s=a("e68e"),n=a("cd05"),c=a("07d2"),l=a("3c64"),r=a("da95");e.a={name:"ProcessAcceptDetail",components:{NumberInput:o.a,ItemImgList:s.a,UserSelect:n.a,Item:c.a,ItemTextarea:l.a},props:{detailData:Object,ccOptions:Array,mode:String,checkAcceptError:Boolean,processMode:Number,batchButton:Boolean},data:function(){return{viewSize:$rootScope.viewSize,flag:!1,isBatch:!1}},computed:{emptyText:function(){var t=["暂无记录"];return this.detailData&&this.detailData.detailsError&&(t=["该检查项未设置主控或一般项目"]),this.checkAcceptError&&(t=["施工单位未报验","需报验后才可验收"]),t}},activated:function(){this.detailData&&t.each(this.detailData.details,(function(e){t.each(e.problem_values,(function(t){t.key=t.key||+new Date}))})),console.log(this.detailData)},methods:{saveProblem:function(t,e){this.flag=!this.flag,this.$emit("saveProblem",t)},removePoint:function(e,a,i){t.isArray(e.problem_values)||(e.problem_values=[]),e.problem_values.length<=1||this.$nextTick((function(){var o=e.problem_values.length-1,s=o>a?this.$refs["ipt-".concat(i,"-").concat(a)]:this.$refs["ipt-".concat(i,"-").concat(o-1)],n=o>a?e.problem_values[a].key:e.problem_values[o-1].key;t.find(s,(function(t){return t.mykey===n})).openKeyboard(),e.problem_values.splice(a,1)}))},addPoint:function(e,a,i){t.isArray(e.problem_values)||(e.problem_values=[]),e.problem_values.splice(a+1,0,{val:"",key:+new Date}),this.$nextTick((function(){console.log(this.$refs["ipt-".concat(i,"-").concat(a+1)],e.problem_values);var o=this.$refs["ipt-".concat(i,"-").concat(a+1)],s=t.last(t.filter(e.problem_values,(function(t){return void 0===t.isExceed}))).key;t.find(o,(function(t){return t.mykey===s})).openKeyboard()}))},problemValueChange:function(){this.$emit("problemValueChange",this.detailData)},setDetailStatus:function(t,e,a){this.$emit("setDetailStatus",t,e,a)},detailFilter:function(t,e){return t.filter((function(t){return t.proj_type===e}))},togglePoint:function(t){if("string"==typeof t.is_open&&"true"===t.is_open?t.is_open=!0:"string"==typeof t.is_open&&"false"===t.is_open&&(t.is_open=!1),t.is_open=!t.is_open,t.id&&t.accept_status_id)return r.a.uploadCheckpointDetail(t.id,t.is_open)},batchOpened:function(){if(3===this.processMode)return i.a.alert("按栋验收的检查项不可批量复制")},batchTips:function(){i.a.notify("勾选后点击提交，可批量选择验收部位，系统将复制本次验收记录到其他部位上一并提交","知道了",{cssClass:"notifyBox process-v2"})},batchChange:function(){if(3===this.processMode)return i.a.alert("按栋验收的检查项不可批量复制");this.$emit("batch",this.isBatch)}}}}).call(this,a("391c"))},a093:function(t,e,a){"use strict";(function(t){a("5ab2"),a("6d57"),a("e10e"),a("f548");var i=a("28f8"),o=(a("9dd9"),a("cc57"),a("e204"),a("9eea")),s=a("3156b"),n=a("774b"),c=a("e89f"),l=a("6f9e");function r(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,i)}return a}function d(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?r(Object(a),!0).forEach((function(e){Object(i.a)(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):r(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}e.a={name:"AppSingleSelect",components:{appSearchBar:o.a,item:s.a,Scroller:n.a},mixins:[c.a],props:{},data:function(){return{activeTab:[],storageKey:encodeURI(this.title||"singleSelectMark"),storageVal:[],keyword:"",searchStatus:!1,checkedItem:{},show:!1,searchData:[],options:[],optionsLimit:20,pagingOptions:!1,searchBar:!0,category:[],ifToggle:!1,editorAddData:!1,lineLimit:1}},computed:{optionsShow:function(){return this.options&&this.options.length?this.grouping?this.getGroupData():this.options.slice(0,this.optionsLimit):[]}},watch:{keyword:function(t){var e=this;this.$nextTick((function(){e.filterList(t)}))}},methods:{openPopup:function(e){if(console.log(e),this.value=!0,this.show=!0,this.category=[],l.a.$on("closeDialog",this.closePopup),this.title=e.title,this.selected=e.selected,this.checkedItem=e.selected,this.options=e.options,this.onSelect=e.onSelect,this.searchBar=e.searchBar,this.grouping=e.grouping,this.rightBtn=e.rightBtn,this.rightBtnEvent=e.rightBtnEvent,this.ifToggle=e.ifToggle,this.lineLimit=e.lineLimit,this.editorAddData=e.editorAddData,e.grouping&&e.autoOpen){var a=t.uniqBy(t.map(this.options,e.grouping));this.activeTab=t.map(a,(function(t,e){return e}))}this.storageKey=encodeURI(this.title||"singleSelectMark"),this.$emit("open")},closePopup:function(){this.value=!1,this.show=!1,this.$emit("close")},closeEvent:function(){l.a.$off("closeDialog",this.closePopup),this.value=!1,this.show=!1,this.keyword="",this.searchStatus=!1,this.$refs["app-search-bar"]&&this.$refs["app-search-bar"].cancelSearch()},customAddSupplier:function(t){return this.options.findIndex((function(e){return e.name===t}))},selectItem:function(t){var e=this;this.ifToggle&&this.checkedItem.id===t.id?this.checkedItem={}:this.checkedItem=t,this.onSelect(this.checkedItem),this.$refs["app-search-bar"]&&this.$refs["app-search-bar"].saveHistory(),window.setTimeout((function(){e.closeEvent()}),300)},onSearchTypeChange:function(t){this.searchStatus=t},filterList:function(t){var e,a,i=this,o=new RegExp("("+t+")","gmi");if(this.category=[],this.keyword=t,this.searchData=[],!t)return!1;this.options.map((function(t){return o.test(t.name)&&(a=d(d({},t),{},{rename:t.name.replace(o,"<label>$1</label>")}),i.grouping?-1===(e=i.category.indexOf(a[i.grouping]))?(i.category.push(a[i.grouping]),i.searchData.push({name:a[i.grouping],children:[a]})):i.searchData[e].children.push(a):i.searchData.push(a)),t}))},pageOptions:function(){this.optionsLimit=this.optionsLimit+20,this.pagingOptions=!1},getGroupData:function(){var t,e=this,a=[];return this.category=[],this.options.map((function(i){return-1===(t=e.category.indexOf(i[e.grouping]))?(e.category.push(i[e.grouping]),a.push({name:i[e.grouping],children:[i]})):a[t].children.push(i),i})),a}}}}).call(this,a("391c"))},a5c6:function(t,e,a){"use strict";var i=a("329b"),o=a("a093").a,s=(a("f3d7"),a("17cc")),n=Object(s.a)(o,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("transition",{attrs:{name:"slide-right"}},[t.show?a("page-content",{attrs:{title:t.title,mode:"dialog","on-close":t.closeEvent}},[t.rightBtn&&!t.editorAddData||t.rightBtn&&t.editorAddData&&(!t.selected.name||t.customAddSupplier(t.selected.name)>-1)?a("div",{staticClass:"header-btn",attrs:{slot:"header-bar-right"},on:{click:function(e){t.rightBtnEvent(t.category)}},slot:"header-bar-right"},[t._v("\n      "+t._s(t.rightBtn)+"\n    ")]):t._e(),a("scroller",{attrs:{"has-next":!t.searchStatus&&!t.grouping&&t.optionsLimit<t.options.length,"end-text":"","is-empty":0===t.optionsShow.length},on:{loadNext:t.pageOptions}},[t.searchBar?a("app-search-bar",{ref:"app-search-bar",attrs:{placeholder:"搜索","history-key":t.storageKey},on:{changeSearchStatus:t.onSearchTypeChange},model:{value:t.keyword,callback:function(e){t.keyword=e},expression:"keyword"}}):t._e(),t.searchStatus?[t.keyword?[t.grouping?a("van-collapse",{model:{value:t.activeTab,callback:function(e){t.activeTab=e},expression:"activeTab"}},t._l(t.searchData,(function(e,i){return a("van-collapse-item",{key:i,attrs:{title:e.name,name:i}},t._l(e.children,(function(e,i){return a("item",{key:i,attrs:{checked:t.checkedItem.id===e.id,item:e,"line-limit":t.lineLimit,"render-field":"rename"},on:{click:t.selectItem}})})))}))):t._e(),t.grouping&&!t.searchData.length?a("loading-status",{attrs:{"is-empty":!0,"empty-text":"没有内容","show-style":"search"}}):t._e(),t.grouping?t._e():[t._l(t.searchData,(function(e,i){return a("item",{key:i,attrs:{checked:t.checkedItem.id===e.id,item:e,"line-limit":t.lineLimit,"render-field":"rename"},on:{click:t.selectItem}})})),t.searchData.length?t._e():a("loading-status",{attrs:{"is-empty":!0,"empty-text":"没有内容","show-style":"search"}})]]:t._e()]:["-1"===t.selected.id&&t.customAddSupplier(t.selected.name)<0&&t.editorAddData?a("div",{staticClass:"supplier-editor",on:{click:t.closePopup}},[a("span",{staticClass:"title"},[t._v(t._s(t.selected.name))]),a("span",{staticClass:"icon"},[a("i",{staticClass:"iconfont icon-edit margin-r",on:{click:t.rightBtnEvent}}),a("i",{staticClass:"iconfont icon-qualified"})])]):t._e(),t.grouping?a("van-collapse",{model:{value:t.activeTab,callback:function(e){t.activeTab=e},expression:"activeTab"}},t._l(t.optionsShow,(function(e,i){return a("van-collapse-item",{key:i,attrs:{title:e.name,name:i}},t._l(e.children,(function(e,i){return a("item",{key:i,attrs:{checked:t.checkedItem.id===e.id,item:e,"line-limit":t.lineLimit},on:{click:t.selectItem}})})))}))):t._l(t.optionsShow,(function(e,i){return a("item",{key:i,attrs:{checked:t.checkedItem.id===e.id,item:e,"line-limit":t.lineLimit},on:{click:t.selectItem}})})),t.optionsShow.length?t._e():a("loading-status",{attrs:{"is-empty":!0,"empty-text":"暂无数据","show-style":"search"}})]],2)],1):t._e()],1)}),[],!1,null,"e465319c",null).exports,c=!1;c||(c=new(i.default.extend(n))({el:document.createElement("div")}),document.body.appendChild(c.$el));e.a=c},aac3:function(t,e,a){(t.exports=a("690e")(!1)).push([t.i,'.zjapp .page-scroll[data-v-4d413687]{overflow-y:scroll}.zjapp .process-accept-detail-header[data-v-4d413687]{background-color:#fff;padding:10px 15px}.zjapp .process-accept-detail-title[data-v-4d413687]{font-size:18px;color:#111;margin-bottom:10px;margin-top:10px}.zjapp .process-accept-detail-content[data-v-4d413687]{font-size:14px;color:#8c8c8c}.zjapp .process-accept-point-content[data-v-4d413687]{background-color:#f0f0f0;padding:10px;color:#666;border-radius:3px}.zjapp .process-accept-icon-sys[data-v-4d413687]{position:absolute;top:17px;left:0;width:4px;height:16px;background-color:#4275e8}.zjapp .input-align-r[data-v-4d413687]{border:none;outline:none}.zjapp .ui-process-v2-tabs[data-v-4d413687]{padding:0 45px}.zjapp .ui-process-v2-tabs .tab-cur[data-v-4d413687]{position:relative}.zjapp .ui-process-v2-tabs .tab-cur[data-v-4d413687]:after{content:"";width:20px;height:2px;display:block;position:absolute;bottom:0;background:linear-gradient(#5ea2ff,#4275e8);left:50%;transform:translateX(-50%);-ms-transform:translateX(-50%);-moz-transform:translateX(-50%);-webkit-transform:translateX(-50%);-o-transform:translateX(-50%)}',""])},b09a:function(t,e,a){var i=a("2939");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);(0,a("85cb").default)("65170d73",i,!0,{sourceMap:!1,shadowMode:!1})},be95:function(t,e,a){"use strict";a.r(e);var i=a("fecd").a,o=(a("668f"),a("f75a"),a("17cc")),s=Object(o.a)(i,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("page-content",{attrs:{title:t.model.checkitemData.name,"show-go-root":!0}},[t.model.isLoading?t._e():a("check-guide",{attrs:{slot:"header-bar-right","item-id":t.checkItemId},slot:"header-bar-right"}),t.model.isLoading?t._e():a("scroller",{ref:"scroller"},[a("div",{staticClass:"list process-accept-detail-header"},[a("h4",{staticClass:"process-accept-detail-title f18 color-black"},[t._v(t._s(t.model.checkitemData.full_name))]),a("p",{staticClass:"process-accept-detail-content"},[t._v("标段："+t._s(t.model.placeData.section_name)+"("+t._s(t.model.placeData.project_name)+")")]),t.default_build?t._e():a("p",{staticClass:"process-accept-detail-content"},[t._v("楼栋："+t._s(t.model.placeData.building_name)+t._s(t.model.placeData.unit_name))]),t.default_build?a("p",{staticClass:"process-accept-detail-content"},[t._v("部位："+t._s(t.model.placeData.unit_name)+t._s(t.model.placeData.building_name))]):t._e()]),3!==t.model.process_mode?a("item",{staticClass:"mt10",attrs:{label:"验收部位",border:"bottom",mode:"e"}},[a("template",{slot:"icon-right"},[1!==t.model.process_mode||t.default_build?t._e():a("div",{staticClass:"item-text item-text-gray align-r"},[t._v(t._s(t.model.placeData.room_name))]),2!==t.model.process_mode&&5!==t.model.process_mode||t.default_build?t._e():a("div",{staticClass:"item-text item-text-gray align-r"},[t._v(t._s(t.model.placeData.floor_name))]),t.default_build&&!t.model.isCurrentEdit&&t.model.placeData.custom_location||t.default_build&&t.model.status?a("div",{staticClass:"item-text item-text-gray align-r"},[t._v(t._s(t.model.placeData.custom_location))]):t._e(),t.default_build&&t.model.isCurrentEdit&&!t.model.status?a("input",{directives:[{name:"model",rawName:"v-model",value:t.model.placeData.custom_location,expression:"model.placeData.custom_location"}],staticClass:"input-align-r f16",attrs:{type:"text",maxlength:"50",placeholder:"必填，最多50字"},domProps:{value:t.model.placeData.custom_location},on:{blur:function(e){t.saveCustomLocation()},input:function(e){e.target.composing||t.$set(t.model.placeData,"custom_location",e.target.value)}}}):t._e()])],2):t._e(),a("single-select",{class:{mt10:3===t.model.process_mode},attrs:{title:"施工单位",editabled:t.model.isCurrentIdentity&&t.model.isCurrentEdit&&!t.model.problemData.detailsError&&!t.model.currentCheckAccept,options:t.model.contractorOptions},on:{onSelect:function(e){t.saveProblem(!0)}},model:{value:t.model.problemData.contractor,callback:function(e){t.$set(t.model.problemData,"contractor",e)},expression:"model.problemData.contractor"}}),t.model.problemData.failedNum?a("item",{attrs:{label:"不合格记录",mode:"edit",border:"bottom",editabled:!0},on:{click:t.record}},[a("div",{staticClass:"item-text item-text-gray align-r color-red",attrs:{slot:"right"},slot:"right"},[t._v(t._s(t.model.problemData.failedNum)+"次")])]):t._e(),a("div",{staticClass:"mt10"}),a("van-sticky",{attrs:{"offset-top":t.viewSize.headerHeight}},[a("div",{staticClass:"ui-tabs border-bottom ui-process-v2-tabs"},[a("a",{staticClass:"ui-tabs-item border-none f14",class:{"tab-cur":0==t.model.tabIndex},on:{click:function(e){t.changeTab(0)}}},[t._v("施工单位")]),a("a",{staticClass:"ui-tabs-item border-none f14",class:{"tab-cur":1==t.model.tabIndex},on:{click:function(e){t.changeTab(1)}}},[t._v("监理单位")]),a("a",{staticClass:"ui-tabs-item border-none f14",class:{"tab-cur":2==t.model.tabIndex},on:{click:function(e){t.changeTab(2)}}},[t._v("建设单位")])])]),t.model.isLoading?t._e():a("van-swipe",{ref:"content-swipe",attrs:{"initial-swipe":t.model.tabIndex,loop:!1,"show-indicators":!1},on:{change:t.changeTab}},[a("van-swipe-item",[a("process-accept-detail",{attrs:{"detail-data":t.model.problemData.repair,"cc-options":t.ccOptions,"process-mode":t.model.process_mode,"batch-button":t.showBatchAccept,"check-accept-error":!1},on:{problemValueChange:t.problemValueChange,setDetailStatus:t.setDetailStatus,saveProblem:t.saveProblem,batch:function(e){return t.isBatch=e}}})],1),a("van-swipe-item",[a("process-accept-detail",{attrs:{"detail-data":t.model.problemData.supervision,"cc-options":t.ccOptions,"process-mode":t.model.process_mode,"batch-button":t.showBatchAccept,"check-accept-error":2===t.model.userIdentity&&t.model.currentCheckAccept},on:{problemValueChange:t.problemValueChange,setDetailStatus:t.setDetailStatus,saveProblem:t.saveProblem,batch:function(e){return t.isBatch=e}}})],1),a("van-swipe-item",[a("process-accept-detail",{attrs:{"detail-data":t.model.problemData.construct,"cc-options":t.ccOptions,"process-mode":t.model.process_mode,"batch-button":t.showBatchAccept,"check-accept-error":3===t.model.userIdentity&&t.model.currentCheckAccept},on:{problemValueChange:t.problemValueChange,setDetailStatus:t.setDetailStatus,saveProblem:t.saveProblem,batch:function(e){return t.isBatch=e}}})],1)],1),t.model.currentCheckAccept?t._e():a("app-button-group",[!t.model.isLoading&&t.model.isCurrentIdentity&&t.model.isCurrentEdit&&!t.model.problemData.detailsError&&null===t.model.status&&t.default_build?a("app-button",{attrs:{type:"text",name:"删除此草稿"},on:{click:function(e){t.deleteData()}}}):t._e()],1)],1),t.model.isLoading||!t.model.isCurrentIdentity||!t.model.isCurrentEdit||t.model.problemData.detailsError||t.model.currentCheckAccept?t._e():a("app-button-group",{attrs:{"fixed-bottom":"",seamless:""}},[a("app-button",{staticStyle:{width:"30%"},attrs:{plain:""},on:{click:function(e){t.saveProblem()}}},[t._v("暂存")]),a("app-button",{on:{click:t.submit}},[t._v("提交")])],1),t.model.isLoading?a("loading-status",{attrs:{"is-loading":t.model.isLoading,"content-height":t.viewSize.contentHeight}}):t._e()],1)}),[],!1,null,"4d413687",null);e.default=s.exports},c070:function(t,e,a){var i=a("574c");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);(0,a("85cb").default)("35590dcb",i,!0,{sourceMap:!1,shadowMode:!1})},cbda:function(t,e,a){var i=a("14de");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);(0,a("85cb").default)("f5c96bf2",i,!0,{sourceMap:!1,shadowMode:!1})},cd7e:function(t,e,a){var i=a("aac3");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);(0,a("85cb").default)("115d6e06",i,!0,{sourceMap:!1,shadowMode:!1})},cf8c:function(t,e,a){"use strict";a("fdd5")},d0fb:function(t,e,a){"use strict";(function(t){var i=a("fd50"),o=a("bcc7"),s=a("515e"),n=a("e89f"),c=a("07d2"),l=a("7bac"),r=a("a7c3"),d=a("4360");e.a={name:"CheckGuideList",components:{Item:c.a},mixins:[n.a],store:d.a,props:{data:{type:String,default:""}},data:function(){return{show:!1,isLoading:!0,listData:[],module:"",itemId:"",batchId:"",sectionId:"",options:""}},computed:{moduleAttribute:function(){return this.$store.state.global.moduleAttribute}},mounted:function(){this.data=[]},methods:{openPopup:function(e){var a,o=this;for(var s in this.value=!0,this.show=!0,this.module=e.module,this.itemId=e.itemId,this.batchId=e.batchId,this.sectionId=e.sectionId,this.options=e.options,this.$emit("open"),e)this[s]=e[s];this.checkType={check:31,"check-safety":36,"check-quality":37,"measure-v3":41,process:32,"fly-inspect":101}[this.module];var n=!1;t.isEmpty(this.itemId)?!t.isEmpty(this.checkType)&&t.isEmpty(this.sectionId)?a=this.initByType():t.isEmpty(this.batchId)?t.isEmpty(this.options)?t.isEmpty(this.sectionId)?a=i.a.when():(n=!0,a=this.initByBidsection()):a=this.initByOptions():a=this.initByBatch():a=this.initById(),this.isLoading=!0,a.then((function(e){var a=o.moduleAttribute[o.module]||{};!t.isEmpty(a)&&a.setUsualItems&&n?l.a.getUserKey(o.mmkvCode()).then((function(t){t=null===t?e:o.mergeArray(o.deepClone(e),t),o.listData=t||[],o.isLoading=!1})):(o.listData=e||[],o.isLoading=!1)}))},mmkvCode:function(){var t=this.moduleAttribute[this.module]||{};return r.a[t.mmkv_item]+"_"+this.sectionId},mergeArray:function(e,a){var i=this;return t.filter(e,(function(e){var o=a[e.id];return t.isEmpty(e.subitem)||(e.subitem=i.mergeArray(e.subitem,a)),!t.isEmpty(o)||"desc"===e.type}))},closePopup:function(){this.value=!1,this.show=!1,this.$emit("close")},clickItem:function(t){t.subitem&&t.subitem.length?this.$set(t,"isOpen",!t.isOpen):"special-inspect"===this.module?s.a.openPopup({itemId:t.id,module:this.module}):s.a.openPopup({itemId:t.item_id,module:this.module})},initById:function(){var t=this;if("special-inspect"!==this.module)return o.a.getCheckItem(this.itemId,this.checkType).then((function(e){return e?t.sectionId?o.a.getBidSectionCheckItemListByCode(t.sectionId,e.code):o.a.getCheckItemTreeByCode(e.code):i.a.when()}))},initByType:function(){return o.a.getCheckItemGuidelineList(this.checkType)},initByBatch:function(){return i.a.when()},initByBidsection:function(){return o.a.getBidSectionCheckItemTreeByType(this.sectionId,this.checkType)},initByOptions:function(){return i.a.resolve(this.options)},deepClone:function(t){return JSON.parse(JSON.stringify(t))}}}}).call(this,a("391c"))},dc98:function(t,e,a){"use strict";a("0732")},df4d:function(t,e,a){"use strict";a("fd17")},f1e4:function(t,e,a){"use strict";(function(t){a("5ab2"),a("e10e");var i=a("28f8"),o=(a("9e76"),a("6d57"),a("9a33"),a("f548"),a("cc57"),a("4ad6")),s=a("e89f"),n=a("bcc7"),c=a("3122"),l=a("6e1b"),r=a("c130"),d=a("0636");function p(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,i)}return a}function u(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?p(Object(a),!0).forEach((function(e){Object(i.a)(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):p(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}e.a={name:"CheckGuideDetail",components:{},mixins:[s.a],data:function(){return{show:!1,isLoading:!0,isImageDownloading:!1,title:"",content:[],module:"",itemId:""}},methods:{openPopup:function(e){var a=this;for(var i in this.value=!0,this.show=!0,this.module=e.module,this.itemId=e.itemId,this.$emit("open"),e)this[i]=e[i];this.checkType={check:31,"check-safety":36,"check-quality":37,"measure-v3":41,process:32,"fly-inspect":101}[this.module],this.isLoading=!0,("special-inspect"===this.module?l.a.getSpecialInspectCheckItemDetail(this.itemId):"templet-plan"===this.module?r.a.getTempletDetail(this.itemId):"material"===this.module?d.a.getMaterialDetail(this.itemId):n.a.getCheckItem(this.itemId,this.checkType)).then((function(e){console.log("checkitemData",e),a.checkitemData=e,a.title=e.full_name||e.name,"special-inspect"!==a.module&&"inspect"!==a.module&&"fly-inspect"!==a.module&&"material"!==a.module||(e.content=e.guideline||e.content);var i=e.content?e.content.trim():"";if(i=(i=(i=(i=(i=i.replace(/<\/p><p>/gm,"\n")).replace(/<p>/gm,"")).replace(/<\/p>/gm,"")).replace(/<br>/gm,"")).replace(/<br \/>/gm,""),/(<img[^\>]*>)/gm.test(i)){var o=i.split(/(<img[^\>]*>)/gm);(o=o.filter((function(t){return!!t}))).forEach((function(t,e){t&&!/^\s*\n/.test(t)&&e&&!/\n\s*$/.test(o[e-1])&&(o[e]="\n"+t)})),i=o.join("")}var s=i?i.split("\n"):[];a.content=t.map(s,(function(t,e){var a;if(/<img([\s\S]*)>/gm.test(t)){var i=t.split(/\ssrc="([^"]*)"/gm)[1],o=i?i.match(/[\w|-]{36}/gm)[0]:(new Date).getTime()+"-"+e;a={isImg:!0,src:"",url:i,status:"pending",id:o,ready:!0}}else a={isImg:!1,val:t};return a})),a.downloadImage(),a.isLoading=!1})).catch((function(t){$log.log(t)}))},closePopup:function(){this.value=!1,this.show=!1,this.$emit("close")},getThumbnail:function(t){return"pending"===t.status?c.a.IMAGE_LOADING:"rejected"===t.status?c.a.IMAGE_RELOAD:"dev"===APP_ENV?t.url:"fulfilled"===t.status?t.src:($log.log("检查指引-显示图片：",t),c.a.IMAGE_PLACEHOLD)},imgError:function(t,e){$log.error("检查指引-加载图片出现错误：",t);var a=u({},t);a.status="rejected",this.$set(this.content,e,a)},downloadImage:function(e){var a=this;e=e?[e]:this.imageList(),t.each(e,(function(e){var i=u({},e),o=t.map(a.content,(function(t){return t.id})).indexOf(e.id);c.a.isNeedDownload(e.url).then((function(t){t?c.a.download(e.url).then((function(t){i.status="fulfilled",i.src=c.a.fixUrl(t),a.$set(a.content,o,i)})).catch((function(t){$log.error("检查指引-下载图片：",t)})):(i.status="fulfilled",i.src=c.a.fixUrl(c.a.getPathFromUrl(e.url)),a.$set(a.content,o,i))}))}))},imageList:function(){return t.filter(this.content,(function(t){return t.isImg}))},imgClick:function(e){var a=this;if("pending"===e.status)return!1;if("rejected"===e.status)return this.downloadImage(e),$log.log("检查指引-点击重新加载-重新下载图片：",e),!1;var i=this.imageList(),s=t.map(i,(function(t){return t.id})).indexOf(e.id);i=t.map(i,(function(t){return a.getThumbnail(t)})),o.a.openImageBrowser(i,s)}}}}).call(this,a("391c"))},f369:function(t,e,a){"use strict";var i=a("fd50"),o=a("bcc7"),s=a("329b"),n=a("d0fb").a,c=(a("9b25"),a("17cc")),l=Object(c.a)(n,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("transition",{attrs:{name:"slide-right"}},[t.show?a("page-content",{attrs:{mode:"dialog",title:"检查指引","on-close":t.closePopup}},[!t.isLoading&&t.listData.length?a("div",{staticClass:"page-scroll"},t._l(t.listData,(function(e,i){return a("div",{key:i},[a("item",{attrs:{border:"bottom","icon-right":e.subitem&&e.subitem.length?e.isOpen?"arrow-up":"arrow-down":"arrow-right"},on:{click:function(a){t.clickItem(e)}}},[a("div",{staticClass:"item-text fw-b color-blue one-line"},[t._v(t._s(e.item_name))])]),e.isOpen?t._l(e.subitem,(function(e,i){return a("div",{key:i,staticClass:"sublist"},[a("item",{staticClass:"pl0",attrs:{border:"bottom","icon-right":e.subitem&&e.subitem.length?e.isOpen?"arrow-up":"arrow-down":"arrow-right"},on:{click:function(a){t.clickItem(e)}}},[a("div",{staticClass:"item-text checkitem-list-name"},[t._v(t._s(e.item_name))])]),e.isOpen?t._l(e.subitem,(function(e,i){return a("div",{key:i,staticClass:"sublist"},[a("item",{staticClass:"pl0",attrs:{border:"bottom","icon-right":e.subitem&&e.subitem.length?e.isOpen?"arrow-up":"arrow-down":"arrow-right"},on:{click:function(a){t.clickItem(e)}}},[a("div",{staticClass:"item-text checkitem-list-name"},[t._v(t._s(e.item_name))])]),e.isOpen?t._l(e.subitem,(function(e,i){return a("div",{key:i,staticClass:"sublist"},[a("item",{staticClass:"pl0",attrs:{border:"bottom","icon-right":e.subitem&&e.subitem.length?e.isOpen?"arrow-up":"arrow-down":"arrow-right"},on:{click:function(a){t.clickItem(e)}}},[a("div",{staticClass:"item-text checkitem-list-name"},[t._v(t._s(e.item_name))])])],1)})):t._e()],2)})):t._e()],2)})):t._e()],2)}))):t._e(),a("loading-status",{attrs:{"is-loading":t.isLoading,"is-empty":!t.listData.length,"empty-text":"没有检查项"}})],1):t._e()],1)}),[],!1,null,"74102c05",null).exports,r=!1;r||(r=new(s.default.extend(l))({el:document.createElement("div")}),document.body.appendChild(r.$el));var d=r,p=a("515e"),u=a("91c1").a,m=(a("dc98"),Object(c.a)(u,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.show?a("div",{staticClass:"main",style:{top:t.contentTop+"px"}},[a("i",{staticClass:"arrow"}),a("div",{staticClass:"content",on:{click:function(e){return e.target!==e.currentTarget?null:t.closePopup(e)}}},[a("transition",{attrs:{name:"slide-down"},on:{enter:function(e){t.isOpening=!0},"after-enter":function(e){t.isOpening=!1},leave:function(e){t.isClosing=!0},"after-leave":t.afterClose}},[t.showList?a("div",{staticClass:"box",style:{height:t.listHeight+"px"}},t._l(t.data,(function(e,i){return a("div",{key:i,class:{"border-bottom":t.data.length>1,"box-single":1===t.data.length}},[a("div",{staticClass:"detail-hd",class:{"border-bottom":t.data.length<=1,"detail-hd-single":t.data.length<=1},on:{click:function(a){t.toggleItem(e)}}},[t.data.length>1?a("i",{class:{"detail-arrow-right":!e.isOpen,"detail-arrow-down":e.isOpen}}):t._e(),a("div",{staticClass:"detail-title"},[t._v(t._s(e.name))])]),t.data.length<=1||e.isOpen?a("div",{staticClass:"detail-bd",class:{"detail-bd-single":t.data.length<=1}},[t._l(e.textArr,(function(e,i){return a("p",{key:i,staticClass:"text-line"},[t._v("\n              "+t._s(e)+"\n            ")])})),a("item-img-list",{attrs:{editabled:!1},model:{value:e.contentImage,callback:function(a){t.$set(e,"contentImage",a)},expression:"item.contentImage"}}),a("loading-status",{attrs:{"is-empty":!e.textArr.length&&!e.contentImage.length,"empty-text":"PC端未设置检查指引"}})],2):t._e()])}))):t._e()])],1)]):t._e()}),[],!1,null,"2cac8864",null).exports),h=!1;h||(h=new(s.default.extend(m))({el:document.createElement("div")}),document.body.appendChild(h.$el));var f=h,b={name:"CheckGuide",components:{},props:{module:{type:String,default:""},mode:{type:String,default:"page"},itemId:{type:String,default:""},itemIds:{type:Array,default:function(){return[]}},batchId:{type:String,default:""},sectionId:{type:String,default:""},options:{type:Array,default:function(){return[]}},optionsPromise:{type:Function,default:function(){}},beforeOpen:{type:Function,default:function(){}}},data:function(){return{isLoading:!1}},methods:{openCheckGuide:function(){var t=this,e=this.beforeOpen&&this.beforeOpen();e instanceof Promise||(e=Promise.resolve(e)),e.then((function(e){!1!==e&&("drop"===t.mode?f.openPopup({itemIds:t.itemIds,el:t.$refs["check-guide-btn"],options:t.options}):("templet-plan"===t.module?i.a.when(!1):t.itemId&&t.sectionId?o.a.hasChildSectionCheckItem(t.itemId,t.sectionId):t.itemId?o.a.hasChildCheckItem(t.itemId):i.a.when(!0)).then((function(e){e?d.openPopup({module:t.module,itemId:t.itemId,batchId:t.batchId,sectionId:t.sectionId,options:t.options}):p.a.openPopup({itemId:t.itemId,module:t.module})})))}))}}},v=Object(c.a)(b,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{ref:"check-guide-btn",staticClass:"header-btn",on:{click:function(e){t.openCheckGuide()}}},[a("icon",{attrs:{name:"nav-info"}})],1)}),[],!1,null,null,null);e.a=v.exports},f3d7:function(t,e,a){"use strict";a("9120")},f75a:function(t,e,a){"use strict";a("cbda")},f766:function(t,e,a){"use strict";(function(t){a("ed63"),a("163d"),a("2b45"),a("e204"),a("cc57");var i,o,s=a("07d2"),n=a("cf09"),c=a("6f9e"),l=a("4360"),r=[],d=[0,1,2,3,4,5,6,7,8,9,".","-"];function p(t){return null!=t&&""!==t}e.a={name:"NumberKeyboard2",components:{Item:s.a},data:function(){return{show:!1,isClosing:!1,zIndex:0,willOpenParams:null,inputComponent:"",hasPrev:!1,hasNext:!1,isDisabledMinus:!1,isDisabledPoint:!1}},computed:{isIOSBezelLess:function(){return l.a.state.app.isIOSBezelLess}},watch:{isClosing:function(t){var e=this;this.$nextTick((function(){!t&&e.willOpenParams&&e.openKeyboard(e.willOpenParams)}))}},created:function(){c.a.$on("routerBeforeEach",this.closeKeyboard),c.a.$on("pageContentClick",this.closeKeyboard)},destroyed:function(){c.a.$off("routerBeforeEach",this.closeKeyboard),c.a.$off("pageContentClick",this.closeKeyboard)},methods:{openKeyboard:function(e){if(this.isClosing)this.willOpenParams=e;else{this.willOpenParams=null,this.show=!0,this.inputComponent=e.inputComponent,this.zIndex=n.a?++n.a.zIndex:1,l.a.commit("global/SET_IS_NUMBER_INPUT_OPEN",!0);var a=function t(e){return e&&e.$parent?"Scroller"===e.$parent.$options.name?e.$parent:t(e.$parent):null}(this.inputComponent),i=a&&a.$el.querySelectorAll(".component-number-input.first");if(r=[],i&&t.each(i,(function(t){r.push(t.__vue__)})),t.isEmpty(r))this.hasPrev=!1,this.hasNext=!1;else{var o=t.findIndex(r,this.inputComponent);this.hasPrev=o>0,this.hasNext=o<r.length-1}this.setKeysStatus(this.inputComponent.value,this.inputComponent.keyboardType),c.a.$emit("numberKeyboardOpen",this.inputComponent)}},closeKeyboard:function(){this.show&&(this.show=!1,c.a.$emit("numberKeyboardClose"))},startClose:function(){this.isClosing=!0},onClose:function(){this.isClosing=!1,l.a.commit("global/SET_IS_NUMBER_INPUT_OPEN",!1),c.a.$emit("afternumberKeyboardClose")},input:function(t){"-"===t&&this.isDisabledMinus||"."===t&&this.isDisabledPoint||this.$emit("keyboardInput",t)},delete:function(t){var e=this;this.$emit("keyboardDelete"),i=setTimeout((function(){e.$emit("keyboardClear")}),500)},remove:function(){this.$emit("keyboardRemove")},add:function(){this.$emit("keyboardAdd")},prev:function(){var e=t.findIndex(r,this.inputComponent),a=r[e-1];a&&(c.a.$emit("numberInputBlur"),a.setFocus(),this.openKeyboard({inputComponent:a}))},next:function(){var e=this.inputComponent;if(e.index>0)try{e=this.inputComponent.$el.parentNode.parentNode.childNodes[0].childNodes[0].__vue__}catch(t){console.error(t)}var a=t.findIndex(r,e,!1),i=r[a+1];i&&(c.a.$emit("numberInputBlur"),i.setFocus(),this.openKeyboard({inputComponent:i}))},setKeysStatus:function(t,e){t=p(t)?t.toString():"",p(t)||e.indexOf("positive")>=0?this.isDisabledMinus=!0:this.isDisabledMinus=!1,!/\d/.test(t)||t.indexOf(".")>=0||e.indexOf("int")>=0?this.isDisabledPoint=!0:this.isDisabledPoint=!1},setKeyActiving:function(t,e){t&&t.classList.contains("keys")&&!t.classList.contains("disabled")&&(e?t.classList.add("activing"):t.classList.remove("activing"))},keyTouchstart:function(t){var e=t&&t.target;if(e){+new Date,o=e,this.setKeyActiving(e,!0);var a=e.getAttribute("direct");"closeKeyboard"!==a&&this.clickHandler(a)}},keyTouchend:function(t){var e=t&&t.target;if(e){this.setKeyActiving(e,!1),this.setKeyActiving(o,!1);var a=e.getAttribute("direct");"delete"===a?clearTimeout(i):"closeKeyboard"===a&&this.clickHandler(a)}},clickHandler:function(t){t&&(isNaN(t)||(t=Number(t)),"function"==typeof this[t]?this[t]():d.includes(t)&&this.input(t))}}}}).call(this,a("391c"))},fc22:function(t,e,a){"use strict";a("7db0")},fd17:function(t,e,a){var i=a("9649");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);(0,a("85cb").default)("64abb698",i,!0,{sourceMap:!1,shadowMode:!1})},fdd5:function(t,e,a){var i=a("3455");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);(0,a("85cb").default)("7fc562b9",i,!0,{sourceMap:!1,shadowMode:!1})},fe9e:function(t,e,a){"use strict";a("3cd8")},fecd:function(t,e,a){"use strict";(function(t){a("163d");var i=a("8008"),o=a("1b7e"),s=a("e2a7"),n=a("fd50"),c=a("ed08"),l=a("f97c"),r=a("da95"),d=a("a500"),p=a("37d5"),u=a("07d2"),m=a("5a71"),h=a("5345"),f=a("774b"),b=a("91c5"),v=a("f369");e.a={components:{Item:u.a,SingleSelect:m.a,Scroller:f.a,ProcessAcceptDetail:h.a,CheckGuide:v.a},data:function(){return{model:i.a,default_build:"",isBatch:!1,isSaving:!1,ccOptions:[],viewSize:$rootScope.viewSize}},computed:{showBatchAccept:function(){var t=this.model,e=t.isCurrentEdit,a=t.isCurrentIdentity,i=t.checkitemData,o=t.process_mode,s=t.problemData,n=t.currentCheckAccept;return e&&a&&"1"===i.is_batch&&90!==Number(o)&&!s.detailsError&&!n}},activated:function(){var e=this,a=this.$route.query,i=a.item_id,o=a.building_id,s=a.unit,n=a.floor,c=a.room_id,r=a.deliver_type,d=a.id;console.log("this.$route.query",this.$route.query),this.checkItemId=i,this.buildingId=o,this.unit=s,this.floor=n,this.room_id=c,this.proj_id=l.a.getDefaultProject().id,this.default_build=90===Number(r)?d||Number(r):"",this.process_mode=this.default_build?90:"",this.isBatch=!1,this.isSaving=!1,this.model.init(this.buildingId,this.unit,this.floor,this.room_id,this.checkItemId,this.default_build),console.log("this.model:",this.model),$log.log("工序验收v2: this.model->",this.model),p.default.getProjectUsers(this.proj_id,[31,32,33]).then((function(a){e.ccOptions=t.clone(a)}))},methods:{deleteData:function(){var t=this;return s.a.confirm("确定要删除？",{okText:"提交",cancelText:"取消"}).then((function(e){if(e&&t.model.problemData.id)return r.a.deleteAcceptData(t.model.problemData.id).then((function(){t.$router.go(-1)}))}))},problemValueChange:function(t){i.a.identityDataStatusHandler(t),this.saveProblem(!0)},setDetailStatus:function(t,e,a){var o;o=t.status===e?"":e,this.$set(t,"status",o),i.a.identityDataStatusHandler(a),this.saveProblem(!0)},detailFilter:function(t){return t.filter((function(t){return 1===t.proj_type}))},saveCustomLocation:function(){return this.model.problemData.id?r.a.updateProcessCustomLocation({id:this.model.problemData.id,custom_location:this.model.placeData.custom_location}):this.saveProblem(!0)},saveProblem:function(t){var e=this;if(!this.isSaving)return this.isSaving=!0,2===this.model.process_mode&&(this.model.problemData.placeData.unit=""),r.a.save(this.model.problemData,this.process_mode).then((function(){t||s.a.alert("保存成功").then((function(){e.$router.go(-1)}))})).finally((function(){e.isSaving=!1}))},record:function(){this.$router.push({path:"process-accept-v2-record",query:{accept_id:this.model.problemData.id}})},changeTab:function(t){this.model.changeTab(t)},multiplePlace:function(){var e,a=this,i=this.model,o=i.floorAndRoomList||[];e=1===i.process_mode&&i.placeData.unit?99:i.process_mode;var s=2===i.process_mode?i.placeData.room_id||i.placeData.floor:(i.placeData.room_id||i.placeData.floor)+(i.placeData.unit_name||"");console.log(o,"===options==="),b.a.openPopup({title:"选择验收部位",type:e,options:o,current:s,callback:function(e){var o=["",i.problemData.repair,i.problemData.supervision,i.problemData.construct][i.userIdentity];i.remvoeEmptyValues(o);d.a.addTrack(["工序验收v2-施工提交","工序验收v2-监理提交","工序验收v2-建设提交"][i.tabIndex]);var s=(2===i.process_mode?"":i.placeData.unit||"")+(i.placeData.floor||"")+(i.placeData.room_id||""),n=t.filter(e,(function(t){var e=(t.unit||"")+(t.floor||"")+(t.room_id||"");return s!==e}));console.log({list:n,currentId:s});var l=[];return t.each(n,(function(e){var a=t.cloneDeep(i.problemData);a.placeData.unit=e.unit||"",a.placeData.unit_name=e.unit_name||"",a.placeData.floor=e.floor||"",a.placeData.floor_name=e.floor_name||"",a.placeData.room_id=e.room_id||"",a.placeData.room_name=e.room_name||"";var o,s,n=(e.unit||"-")+(e.floor||"-")+(e.room_id||"-");a.id=r.a.getMd5OnlyId(a.placeData.building_id,n,a.checkitemData.id),a.accept_floor_id=c.a.uuid(),1===i.userIdentity?(o=a.repair.details,s=a.repair.checkPoints,a.repair.accept_id=a.id,a.repair.id=c.a.uuid()):2===i.userIdentity?(o=a.supervision.details,s=a.supervision.checkPoints,a.supervision.accept_id=a.id,a.supervision.id=c.a.uuid()):(o=a.construct.details,s=a.construct.checkPoints,a.construct.accept_id=a.id,a.construct.id=c.a.uuid()),t.each(o,(function(t){t.id=c.a.uuid()})),t.each(s,(function(t){t.id=c.a.uuid()})),l.push(a)})),r.a.submit(i.problemData,a.process_mode).then((function(){return i.init(a.buildingId,a.unit,a.floor,a.room_id,a.checkItemId,a.default_build)})).then((function(){return r.a.batchSubmit(l).then((function(){console.log(a.model.problemData.construct),console.log("全部提交完毕****************")}))}))}})},submit:function(){var e=this,a=this.model,i=["",a.problemData.repair,a.problemData.supervision,a.problemData.construct][a.userIdentity],c=a.getDetailsEnterStatus(i),l="确定要提交？",p="提交",u="取消";if(!this.default_build||a.placeData.custom_location)if(a.problemData.contractor.id)if(0!==c.masterRecorded||0!==c.commonRecorded){var m=!t.filter(i.checkPoints,(function(t){return!t.image_file.length})).length;if(i.isSetCheckPoint){if(!m)return void s.a.alert("照片必填，请拍照")}else if(!i.image_file.length)return void s.a.alert("照片必填，请拍照");if((c.masterEmpty>0||c.commonEmpty>0)&&(l=c.masterEmpty>0?"有"+c.masterEmpty+"个主控项":"",l+=c.masterEmpty>0?c.commonEmpty>0?"和":"":"有",l+=c.commonEmpty>0?c.commonEmpty+"个一般项":"",l+="未填",p="继续提交",u="去填写"),!this.isBatch)return this.default_build&&a.placeData.custom_location?r.a.getSelfDefinitionPlaceProcessData(a.placeData.building_id,this.checkItemId).then((function(e){return t.some(e,(function(t){return t.custom_location===a.placeData.custom_location&&t.status&&t.id!==a.problemData.id}))})).then((function(t){return t?s.a.alert("此部位已存在，不可重复"):s.a.confirm(l,{okText:p,cancelText:u}).then((function(t){if(t){a.remvoeEmptyValues(i);return d.a.addTrack(["工序验收v2-施工提交","工序验收v2-监理提交","工序验收v2-建设提交"][a.tabIndex]),r.a.submit(a.problemData,e.process_mode).then((function(){a.init(e.buildingId,e.unit,e.floor,e.room_id,e.checkItemId,a.problemData.id)}))}}))})):s.a.confirm(l,{okText:p,cancelText:u}).then((function(t){if(t){a.remvoeEmptyValues(i);return d.a.addTrack(["工序验收v2-施工提交","工序验收v2-监理提交","工序验收v2-建设提交"][a.tabIndex]),r.a.submit(a.problemData,e.process_mode).then((function(){a.init(e.buildingId,e.unit,e.floor,e.room_id,e.checkItemId,e.default_build)}))}}));o.a.getHasNetwork().then((function(t){if(t)return e.multiplePlace(),n.a.reject();return s.a.confirm("批量验收需在联网状态下进行，请检查网络后再试",{okText:"提交当前部位",cancelText:"取消"}).then((function(t){return t?n.a.resolve():n.a.reject()}))})).then((function(){a.remvoeEmptyValues(i);return d.a.addTrack(["工序验收v2-施工提交","工序验收v2-监理提交","工序验收v2-建设提交"][a.tabIndex]),r.a.submit(a.problemData,e.process_mode).then((function(){a.init(e.buildingId,e.unit,e.floor,e.room_id,e.checkItemId,e.default_build)}))}))}else s.a.alert("主控项或一般项至少填一项");else s.a.alert("请选择施工单位");else s.a.alert("请填写验收部位")}}}}).call(this,a("391c"))}}]);