(window.webpackJsonp_module_entry_zjapp_=window.webpackJsonp_module_entry_zjapp_||[]).push([["chunk-232f5d9a","chunk-739f37c8"],{"1d69":function(t,e,a){var n=a("32d5");"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);(0,a("85cb").default)("7b23098d",n,!0,{sourceMap:!1,shadowMode:!1})},"21c0":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAAAXNSR0IArs4c6QAAA7pJREFUaAXtWEtPE1EU/s5YRDE+NuqGmGjagmCmJSx0Jz4WBlaauBETn0SJOxXfMT4WxGh0I4nxkRAXRhdufSx8/ASKEtpSNWokLojIAkyl9HimqOmUmencYQZd9CaTmXvmnPOd75x779w7QKVVMlDJQCUD/zIDFBQ4J6JbAL4j1yiqqnZQw+DHILACIcAJfREw8Q6Mlb+DfkXxzOYgCGhBOAV+dBYFb0Bs4v7wxiCwfCfAH1oWyLA5PiNYpnMzZD4IfCeAsS8dJdmfDpN5KyfCG3yI2eTCVwI80DgfhBMmhOJOAFXwlQCmJveCubY4ZvMzt3FfuMksm13PNwLMLSEJ/lTZcMjfueAbAfQPtwuB1WUJgLfzQENjeT13Gr4Q4KFwNTh/1hUkyyzJTV50petCyfOHjPmChuTDVchOrROcw7J0trnAK1bpQWjeY1BokBoHvha/UHkuS4CTdYsxiTrwVB1Acuf63/eIAC1UAXPQHROfKRCnAC0pyUghVJXE/J8ZimSyDnZSTpvGich6cdQja3qzjUrwYkJeiD1DtdZB9alhK0CHOcB3/2nwRrQMTSreiixfsgrekDkQwFI7o7mX8wo7THsCROXXdDuvfst5Xo+dS1sCpA89kAIdszOcMzlRF8WTz+3wbAkYBhRPX4fPX067QKzldJ5iQ9es301LbVehYiPui1yWGRXIdrgYx/RM6KZY5oxJZtFxRcCwk2X1qqwIM/f5Fk5nL9JuSPWPuvHjmoDhTHaSN+V2xI1jzzpEt2TYdLq1VyPATOiP3Jb1+aBbADU96kUsvZ+I2K2d4yQudVJwrO8+JBP7Sem7WfeJXiDWfkAleANTqQJ/guS30Rhy+b4/fV/umtZKevqpqi+lCvx1TjKU/G4aRry49EYgh7VewBxtcpBdrnrzRgBsnAH8bp5OaR4JwBOYM2NvSfFIgAKowBwR4OHmGvmkrXbOpoe3hFWF05+iqXoFRsbXFg4aikBl1Y3DfjbfUFavREGdAOfdDp/XIK1Dwjoo18sSXJuu+jAK2XhyEJcBIbyRwE/JR6n4a32PE3XbgPwV2RDqts5ZU14cPFSAw5YBED5Do33Qd8dLgi+oUyz1DHp7k5DbIxX5ZO0jv8ZS7iBUJ0A0UeLvuwR+Ektqo3KK6yW6IH8SrJvxjmLp+6hBVPZTXUJk1KTJ2ntT30VHeUsgf6DDyGUfiu/lspV6BFrQTfobcyAugA0V/hBfhrHx00Jkl/TSCFXvlJ9c31yaV9QqGahkoJKB/yADvwCwKfUADObhFgAAAABJRU5ErkJggg=="},"254e":function(t,e,a){"use strict";a("6d57"),a("e697"),a("9e76"),a("6a61");var n=a("2e91"),i=(a("163d"),a("a500")),o=a("329b"),r=a("07d2"),s=a("e89f"),c=a("6f9e"),l={name:"SpecialInspectNavMenuPopup",components:{Item:r.default},mixins:[s.a],data:function(){return{show:!1,showList:!1,target:null,contentTop:44,listHeight:475,menus:[]}},watch:{show:function(t){var e=this;t&&this.$nextTick((function(){e.showList=!0}))}},created:function(){c.a.$on("routerBeforeEach",this.close),c.a.$on("pageContentClick",this.onClickOther)},destroyed:function(){c.a.$off("routerBeforeEach",this.close),c.a.$off("pageContentClick",this.onClickOther)},methods:{open:function(t){if(this.show=!0,this.menus=t.menus,this.target=t.el,t.el){var e=t.el.getBoundingClientRect();this.contentTop=e.bottom}this.listHeight=Math.min(window.innerHeight-this.contentTop-50,475)},onClose:function(){this.show=!1},close:function(){this.showList=!1},onClickOther:function(t){t&&t.target&&t.target!==this.target&&this.show&&this.close()},itemClick:function(t){t.isSwitchItem||t.handle&&t.handle()},switchChange:function(t){t.isSwitchItem&&t.handle&&t.handle()}}},u=(a("4eab"),a("17cc")),d=Object(u.a)(l,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.show?a("div",{staticClass:"content",style:{top:t.contentTop+"px"},on:{click:function(e){return e.target!==e.currentTarget?null:t.close(e)}}},[a("transition",{attrs:{name:"slide-down"},on:{afterLeave:t.onClose}},[t.showList?a("div",{staticClass:"list",style:{"max-height":t.listHeight+"px"}},t._l(t.menus,(function(e,n){return a("item",{key:n,attrs:{label:e.name,border:"bottom"},on:{click:function(a){t.itemClick(e)}}},[a("div",{staticClass:"item-text"},[t._v(t._s(e.name))]),e.isSwitchItem?t._e():a("icon",{attrs:{name:"arrow-right"}}),e.isSwitchItem?a("van-switch",{on:{change:function(a){t.switchChange(e)}},model:{value:e.value,callback:function(a){t.$set(e,"value",a)},expression:"item.value"}}):t._e()],1)}))):t._e()])],1):t._e()}),[],!1,null,"64b86a44",null).exports,p=!1;p||(p=new(o.default.extend(d))({el:document.createElement("div")}),document.body.appendChild(p.$el));var h,f,b,g,m=p,v=a("7bac"),y=a("09ae"),x=a("a044"),w=a("2757"),k={name:"SpecialInspectNavMenu",props:{batch:{type:Object},specialInspectId:{type:String},placeId:{type:String},mode:{type:[String,Number]},data:{type:Array}},data:function(){return{defaultList:[{code:"allProblem",name:"全部问题",track:"专项巡检-首页-全部问题",handle:this.gotoProblemList},{code:"toggleDesc",name:"展示描述",value:"",isPopupItem:!0,isSwitchItem:!0,getValue:this.getDescValue,handle:this.toggleDesc}],menus:[]}},computed:{hasMenu:function(){return this.menus&&this.menus.length},isPopupMenu:function(){return this.menus.length>1||this.menus.some((function(t){return t.isPopupItem}))}},watch:{batch:{handler:function(){this.initMenus()},immediate:!0}},methods:{initMenus:(g=Object(n.a)(regeneratorRuntime.mark((function t(){var e,a,n,i,o,r=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.mode||0===this.mode){t.next=2;break}return t.abrupt("return");case 2:if(e=this.mode,h=Object(w.c)(e),!this.data||!this.data.length){t.next=8;break}a=this.data,t.next=11;break;case 8:return t.next=10,Object(y.b)(e);case 10:a=t.sent;case 11:a=(a||[]).filter((function(t){return!t.match||h.isMatch(t.match,{batch:r.batch})})),n=a.map((function(t){var e=r.defaultList.find((function(e){return e.code===t.code}));return Object.assign({},e,t)})),t.t0=regeneratorRuntime.keys(n);case 14:if((t.t1=t.t0()).done){t.next=23;break}if(i=t.t1.value,!(o=n[i]).getValue){t.next=21;break}return t.next=20,o.getValue();case 20:o.value=t.sent;case 21:t.next=14;break;case 23:this.menus=n;case 24:case"end":return t.stop()}}),t,this)}))),function(){return g.apply(this,arguments)}),clickMenu:(b=Object(n.a)(regeneratorRuntime.mark((function t(e){var a;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.isPopupMenu){t.next=6;break}return t.next=3,this.initMenus(this.mode);case 3:m.open({menus:this.menus,el:e&&e.target?e.target:null}),t.next=11;break;case 6:if(a=this.menus[0]){t.next=9;break}return t.abrupt("return");case 9:a.handle&&"function"==typeof a.handle&&a.handle(),a.track&&i.a.addTrack(a.track);case 11:case"end":return t.stop()}}),t,this)}))),function(t){return b.apply(this,arguments)}),gotoProblemList:function(){var t=this.batch.id;h.gotoProblemList(t,this.specialInspectId,this.placeId)},getDescValue:function(){return v.a.getUserKey(x.a)},toggleDesc:(f=Object(n.a)(regeneratorRuntime.mark((function t(){var e,a;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getDescValue();case 2:return e=t.sent,a=!e,t.next=6,v.a.setUserKey(x.a,a);case 6:this.menus.find((function(t){return"toggleDesc"===t.code})).value=a,this.$emit("change","toggleDesc",a);case 9:case"end":return t.stop()}}),t,this)}))),function(){return f.apply(this,arguments)})}},D=Object(u.a)(k,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.hasMenu?a("div",{staticClass:"header-btn",on:{click:t.clickMenu}},[t.isPopupMenu?a("icon",{attrs:{name:"guanbi"}}):[t._v(t._s(t.menus[0]&&t.menus[0].name))]],2):t._e()}),[],!1,null,null,null);e.a=D.exports},"2d6e":function(t,e,a){var n=a("7eb2");"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);(0,a("85cb").default)("53a2fbaa",n,!0,{sourceMap:!1,shadowMode:!1})},"32d5":function(t,e,a){var n=a("5454");(t.exports=a("690e")(!1)).push([t.i,'.zjapp .tree-node[data-v-097aac2c]{display:flex;flex-direction:row;align-items:center;justify-content:center;padding:8px 15px}.zjapp .tree-main[data-v-097aac2c]{flex:1}.zjapp .tree-text[data-v-097aac2c]{font-size:14px;color:#333;line-height:20px;padding:5px 0;overflow:hidden;text-overflow:ellipsis;-webkit-line-clamp:2}.zjapp .tree-indent[data-v-097aac2c]{width:14px;height:20px}.zjapp .tree-icon[data-v-097aac2c]{position:relative;width:20px;height:20px;line-height:20px;color:#c8c8c8;font-size:26px}.zjapp .icon-dropdown[data-v-097aac2c]:before,.zjapp .icon-dropright[data-v-097aac2c]:before{content:"";position:absolute;width:0;height:0;border:6px solid #c8c8c8}.zjapp .icon-dropdown[data-v-097aac2c]:before{top:7px;left:0;border-left-color:transparent}.zjapp .icon-dropdown[data-v-097aac2c]:before,.zjapp .icon-dropright[data-v-097aac2c]:before{border-right-color:transparent;border-bottom-color:transparent}.zjapp .icon-dropright[data-v-097aac2c]:before{top:4px;left:2px;border-top-color:transparent}.zjapp .icon-right[data-v-097aac2c]{margin-left:10px;color:#c8c8c8;line-height:30px}.zjapp .btn-operate[data-v-097aac2c]{width:auto;margin-left:10px}.zjapp .special-inspect-icon-end[data-v-097aac2c]{display:inline-block;vertical-align:top;width:6px;height:6px;margin-top:7px;margin-right:5px;border-radius:3px;background-color:#d9d9d9}.zjapp .desc-item-list[data-v-097aac2c]{background-color:#fff;padding:10px 15px}.zjapp .desc-item[data-v-097aac2c]{padding:10px;line-height:20px;color:#999;font-size:14px;border-radius:4px;background:#f4f4f4}.zjapp .desc-item[data-v-097aac2c]:not(:first-child){margin-top:10px}.zjapp .icon-mark[data-v-097aac2c]{display:inline-block;vertical-align:top;width:20px;height:20px;background:url('+n(a("21c0"))+") 0 no-repeat;background-size:16px 16px}",""])},"4aef":function(t,e,a){"use strict";var n=a("dd16").a,i=a("17cc"),o=Object(i.a)(n,(function(){var t=this.$createElement;return(this._self._c||t)("span",{class:this.classSet[this.status]},[this._v(this._s(this.text||this.status))])}),[],!1,null,null,null);e.a=o.exports},"4e8f":function(t,e,a){var n=a("df6d");"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);(0,a("85cb").default)("25a53370",n,!0,{sourceMap:!1,shadowMode:!1})},"4eab":function(t,e,a){"use strict";a("c090")},"535a":function(t,e,a){(t.exports=a("690e")(!1)).push([t.i,".zjapp .content[data-v-64b86a44]{position:fixed;width:100%;bottom:0;background-color:rgba(0,0,0,.4);overflow:hidden}.zjapp .content .item[data-v-64b86a44]{justify-content:space-between}.zjapp .content .van-cell__title[data-v-64b86a44],.zjapp .content[data-v-64b86a44] .item-label{color:#333}",""])},"65e9":function(t,e,a){"use strict";(function(t){a("5ab2"),a("6d57"),a("e10e");var n=a("28f8"),i=a("4360"),o=a("48f4"),r=a("162a"),s=a("f2d3"),c=a("6906"),l=a("a18c"),u=a("c745");function d(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function p(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?d(Object(a),!0).forEach((function(e){Object(n.a)(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):d(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}e.a={name:"SynchronizeTipBar",props:{isTodo:{type:Boolean},useDownload:{type:Boolean,default:!0},enterDoCheck:{type:Boolean,default:!0},buildingId:{type:String,default:""},automaticUpdateCallback:{type:Function,default:null}},data:function(){return{currentModuleCode:"",oneUpdateData:!0}},computed:{projId:function(){return i.a.state.global.currentProject.id},waitUploadNum:function(){return i.a.state.global.waitUploadNum},hasTopProgress:function(){return i.a.state.global.hasTopProgress},hasChanged:function(){if(!this.useDownload)return!1;if(this.currentModuleCode){var t,e=o.default.isModuleNeedBuilding(this.currentModuleCode)&&!this.isTodo;return!(e&&!this.buildingId)&&(t=this.isTodo?i.a.state.global.todoChangedStatus||{}:i.a.state.global.businessChangedStatus||{},e?!!t[this.currentModuleCode]&&t[this.currentModuleCode][this.buildingId]:t[this.currentModuleCode])}return!1},show:function(){return(this.hasChanged||this.waitUploadNum)&&!this.hasTopProgress},oneDataSync:function(){return this.$store.state.app.oneDataSync}},watch:{hasChanged:function(t){var e=this;t&&this.$nextTick((function(){setTimeout((function(){var t=e.$refs["synchronize-tip-bar"];if(t&&t.style){t.style.display="none";t.offsetHeight;t.style.display="block"}}),100)}))},buildingId:function(t){this.currentModuleCode&&o.default.isModuleNeedBuilding(this.currentModuleCode)&&t&&(console.log("楼栋重新加载，是否再次自动加载数据：",this.oneUpdateData),this.oneUpdateData&&this.automaticLogic(),this.checkSync())},show:function(t){t?this.$emit("show"):this.$emit("hide")}},activated:function(){this.init()},methods:{init:function(){this.getCurrentModuleCode(),this.enterDoCheck&&!l.a.isBack&&this.checkSync(),this.automaticLogic()},automaticLogic:function(){var t=this;this.$router.isBack||(this.oneUpdateData=!0,u.a.getAutomaticLoadData().then((function(e){$log.log("是否要自动加载 ===> ",e&&t.oneDataSync&&"function"==typeof t.automaticUpdateCallback),e&&t.oneDataSync&&"function"==typeof t.automaticUpdateCallback&&t.dataSync().then((function(e){console.log("是否需要初始化页面 ====> ",Boolean(e)),e&&t.automaticUpdateCallback()}))})))},getCurrentModuleCode:function(){var t=o.default.getCurrentModuleCode(),e=this.isTodo?"todo":"";this.currentModuleCode=t||e},checkSync:function(){var e=this,a="checkDataUpdate",n=this.currentModuleCode,r=this.buildingId,l=i.a.state.global.isLeader?this.projId:"";return!o.default.isModuleNeedBuilding(n)||r||this.isTodo?(this.isTodo&&(a+="_todo"),n&&(a+="_".concat(n)),r&&(a+="_".concat(r)),c.a.execAfterInterval(120,a).then((function(){return e.isTodo?"todo"===n?s.a.getModuleList().then((function(e){var a=t.map(e,"code");return o.default.hasTodoChangedData("",a)})):o.default.hasTodoChangedData("",[n]):o.default.hasBusinessChangedData(l,[n],r)})).then((function(t){if(e.isTodo){var a=p({},i.a.state.global.todoChangedStatus);a[n]=t,i.a.commit("global/SET_TODO_CHANGED_STATUS",a)}else{var o=p({},i.a.state.global.businessChangedStatus);if(r){var s=o[n]?o[n]:{};s[r]=t,o[n]=s}else o[n]=t;i.a.commit("global/SET_BUSINESS_CHANGED_STATUS",o)}})).catch((function(t){return t&&!0===t.timeNotTo?($log.debug(t.msg),!1):$q.reject(t)}))):Promise.resolve()},dataSync:function(){var t=this.currentModuleCode,e=this.buildingId,a=o.default.isModuleNeedBuilding(t),n=a&&!e;return $log.log(["模块名：",t," 楼栋id：",e," 当前模块是否需要楼栋id：",a," 判断是否终止自动更新：",n]),n?Promise.resolve():(this.oneUpdateData=!1,r.a.beginManualUpdate(),o.default.checkSync(e).then((function(t){return r.a.endManualUpdate(),t})).catch((function(t){$log.error("自动更新错误",t),r.a.endManualUpdate()})))}}}}).call(this,a("391c"))},7162:function(t,e,a){"use strict";(function(t){a("5ab2"),a("e697"),a("e10e"),a("6a61");var n,i,o,r,s,c,l,u,d,p=a("2e91"),h=(a("6d57"),a("28f8")),f=a("254e"),b=a("774b"),g=a("07d2"),m=a("9a86"),v=a("f7ab"),y=a("df54"),x=a("4aef"),w=a("a044"),k=a("09ae"),D=a("e2a7"),C=a("6f9e"),S=(a("4360"),a("3bd5")),T=a("2757"),O=a("8d95"),j=a("9416");a("48f4");function _(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function B(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?_(Object(a),!0).forEach((function(e){Object(h.a)(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):_(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}e.a={name:"SpecialInspectBatchBoard",components:{NavMenu:f.a,Scroller:b.default,Item:g.default,Batch:m.a,SynchronizeTipBar:v.a,CheckitemTree:y.a,StatusText:x.a},props:{batchId:{type:String},showBatch:{type:Boolean,default:!0},batchDisabled:{type:Boolean,default:!1},titleType:{type:String,default:"module-name"}},data:function(){return{isLoading:!0,isBatchLoading:!0,batchData:{},currentUserId:S.a.getUser().user_id,config:{},treeStyle:{},listTemplate:"",beforeList:"",afterList:"",listHolder:"",listData:[],treeData:[],totalData:{},statusStyleExtend:Object(h.a)({},w.w,"color-orange")}},computed:{projId:function(){return this.$store.state.global.currentProject.id},isEmpty:function(){return!this.listData||!this.listData.length},editable:function(){return"检查完毕"!==this.batchData.status&&this.batchData.isChecker},title:function(){var t="";switch(this.titleType){case"module-name":t=Object(j.a)(O.a.SPECIAL_INSPECT)||w.e;break;case"template-name":t=this.batchData&&this.batchData.temp_name||"..."}return t},notesMap:function(){var t=n.getTreeOptions("notes",this.config,this.batchData);return n.getTreeMap(this.listData,t,{editable:this.editable,batch:this.batchData})},infosMap:function(){var t=n.getTreeOptions("infos",this.config,this.batchData);return n.getTreeMap(this.listData,t,{editable:this.editable,batch:this.batchData})},iconsMap:function(){var t=n.getTreeOptions("icons",this.config,this.batchData);return n.getTreeMap(this.listData,t,{editable:this.editable,batch:this.batchData})},btnsMap:function(){var t=this,e={};if(!this.editable)return{};var a=n.getTreeOptions("btns",this.config,this.batchData);return(this.listData||[]).forEach((function(i){if(i.id){var o=a.filter((function(e){return!e.show||n.isMatch(e.show,B(B({},i),{},{editable:t.editable}))}));e[i.id]=o}})),e}},created:function(){var t=this;Object(C.d)((function(){t.init()})),Object(C.e)((function(){t.init()}))},methods:{init:(d=Object(p.a)(regeneratorRuntime.mark((function t(){var e,a,i,o,r,s,c,l,u,d,p,h,f;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.treeData&&this.treeData.length||(this.isLoading=!0),this.batchData&&Object.keys(this.batchData).length||(this.isBatchLoading=!0),t.prev=2,t.next=5,this.getBatchData();case 5:return e=t.sent,a=(e||{}).mode,n=Object(T.c)(a),t.next=10,Object(k.c)(a);case 10:return i=t.sent,o=Object(k.d)(a)||{},r=o.template,s=o.beforeList,c=o.afterList,l=o.listHolder,u=n.getTreeUi(i&&i.tree&&i.tree.style,e),t.next=15,this.getListData(e,i);case 15:return d=t.sent,p=d.tree,h=d.list,t.next=20,this.getTotalData(h,e,i);case 20:f=t.sent,this.batchData=e,this.config=i,this.listTemplate=r,this.beforeList=s,this.afterList=c,this.listHolder=l,this.treeStyle=u,this.treeData=p,this.listData=h,this.totalData=f,t.next=40;break;case 33:t.prev=33,t.t0=t.catch(2),this.batchData={},this.listData=[],this.treeData=[],this.totalData={},$log.error(t.t0);case 40:return t.prev=40,this.isLoading=!1,this.isBatchLoading=!1,t.finish(40);case 44:case"end":return t.stop()}}),t,this,[[2,33,40,44]])}))),function(){return d.apply(this,arguments)}),getBatchData:(u=Object(p.a)(regeneratorRuntime.mark((function t(){var e,a,n,i,o,r,s=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.batchId){t.next=2;break}return t.abrupt("return",Promise.reject("无批次"));case 2:return t.next=4,T.a.getBatchById(this.batchId);case 4:if(e=t.sent){t.next=7;break}return t.abrupt("return",Promise.reject("获取批次失败"));case 7:if(!(n=e.root_id||e.parent_id)){t.next=14;break}return t.next=11,T.a.getBatchById(n);case 11:a=t.sent,t.next=15;break;case 14:a=e;case 15:return t.next=17,T.a.getBatchUsers(a.id);case 17:return i=t.sent,o=a.created_by===this.currentUserId,r=(i||[]).some((function(t){return t.id===s.currentUserId})),e.isCreator=o,e.isChecker=r,t.abrupt("return",e);case 23:case"end":return t.stop()}}),t,this)}))),function(){return u.apply(this,arguments)}),getListData:(l=Object(p.a)(regeneratorRuntime.mark((function t(){var e,a,i,o,r,s,c,l=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=l.length>0&&void 0!==l[0]?l[0]:this.batchData,a=l.length>1&&void 0!==l[1]?l[1]:this.config,i=(e||{}).id){t.next=5;break}return t.abrupt("return",Promise.reject("缺少批次id"));case 5:return t.next=7,n.getIndexList(i);case 7:return o=t.sent,r=Array.isArray(o)?o:o.tree,s=Array.isArray(o)?o:o.list,(c=n.getTreeOptions("attrs",a,e))&&c.length&&n.treeAttrsHandle(r,c),t.abrupt("return",{tree:r,list:s});case 13:case"end":return t.stop()}}),t,this)}))),function(){return l.apply(this,arguments)}),reloadList:(c=Object(p.a)(regeneratorRuntime.mark((function t(){var e,a,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getListData();case 2:e=t.sent,a=e.tree,n=e.list,this.treeData=a,this.listData=n;case 7:case"end":return t.stop()}}),t,this)}))),function(){return c.apply(this,arguments)}),getTotalData:function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.listData,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.batchData,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.config,o=i&&i.total;if(Array.isArray(o))if(1===o.length)t=o[0];else{var r=n.getTotalMode(i,a);t=o.find((function(t){return t.totalMode===r}))}else t=o;return n.getTotalData(e,t,a)},onPullDown:function(){var t=this;n.recoverDraftFromMmkv().then((function(){t.init()}))},finishBatch:(s=Object(p.a)(regeneratorRuntime.mark((function e(){var a,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.cloneDeep(this.batchData),e.prev=1,e.next=4,n.batchCheck(a,this.listData,this.config,this.treeData);case 4:i=e.sent,e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),$log.error(e.t0);case 10:if(!i||!i.code){e.next=13;break}return"notify"===i.type?D.a.notify(i.msg||"数据有问题，不允许提交"):D.a.alert(i.msg||"数据有问题，不允许提交"),e.abrupt("return");case 13:return e.prev=13,e.next=16,n.finishBatchConfirm(a,this.listData,this.treeData);case 16:if(!1!==e.sent){e.next=19;break}return e.abrupt("return");case 19:e.next=24;break;case 21:e.prev=21,e.t1=e.catch(13),$log.error(error);case 24:return e.prev=24,e.next=27,n.finishBatch(a,this.config);case 27:e.next=33;break;case 29:e.prev=29,e.t2=e.catch(24),$log.error(e.t2),e.t2&&500102===e.t2.errcode?D.a.alert("检测到检查结果有冲突，请下拉刷新后再试"):D.a.alert(e.t2);case 33:return e.prev=33,e.next=36,this.init();case 36:return e.finish(33);case 37:case"end":return e.stop()}}),e,this,[[1,7],[13,21],[24,29,33,37]])}))),function(){return s.apply(this,arguments)}),formulaTips:function(){D.a.notify(this.totalData.formulaText,{buttonName:"知道了",className:"broad-dialog"})},onClickNode:(r=Object(p.a)(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.treeNodeIsEnd){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,n.onClickEndNode(e,this.batchData,this.editable);case 4:case"end":return t.stop()}}),t,this)}))),function(t){return r.apply(this,arguments)}),onClickBtn:(o=Object(p.a)(regeneratorRuntime.mark((function t(e,a){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.runBtnOperate(e,a);case 2:case"end":return t.stop()}}),t)}))),function(t,e){return o.apply(this,arguments)}),onNavMenuChange:(i=Object(p.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.reloadList();case 2:case"end":return t.stop()}}),t,this)}))),function(){return i.apply(this,arguments)})}}}).call(this,a("391c"))},"774b":function(t,e,a){"use strict";a.r(e);var n=a("d18d").a,i=(a("b225"),a("17cc")),o=Object(i.a)(n,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{ref:"scroll-warp",staticClass:"scroll-warp",class:{"scroll-warp-pulling":t.pulling,"scroll-warp-complete":!t.hasNext&&!t.isEmpty,"scroll-warp-empty":t.isEmpty},style:{"padding-bottom":t.numberKeyboardCoverHeight+"px"},on:{scroll:t.onScroll,touchstart:t.onTouchstart,touchmove:t.onTouchmove,touchend:t.onTouchend}},[t.allowPullDown?a("div",{staticClass:"pull-refresh-warp",style:{height:t.pullDist+"px"}},[a("div",{staticClass:"pull-refresh"},[a("div",{staticClass:"animation-refresher",class:{refreshing:t.refreshing}}),t.updateTime?a("p",{staticClass:"pull-refresh-date"},[t._v("最后成功同步："+t._s(t.updateTime))]):t._e()])]):t._e(),t._t("default"),t.loading?a("div",{staticClass:"page-loading"},[a("svg",{staticClass:"svg-loading",attrs:{viewBox:"0 0 80 80"}},[a("circle",{attrs:{cx:"40",cy:"40",r:"36"}})])]):t._e(),t.hasNext||t.isEmpty?t._e():[t.$slots.end?t._t("end"):t._e(),!t.$slots.end&&t.endText?a("div",{staticClass:"end-text"},[t._v("\n      "+t._s(t.endText)+"\n    ")]):t._e()]],2)}),[],!1,null,"2b1a346c",null);e.default=o.exports},"7eb2":function(t,e,a){(t.exports=a("690e")(!1)).push([t.i,".zjapp .synchronize-tip-bar[data-v-66826030]{height:30px;padding:5px 15px;line-height:20px;text-align:center;background-color:#ffe6e6;color:#ff6060;font-size:14px}.zjapp .synchronize-tip-bar .icon-caution[data-v-66826030]{line-height:20px;margin-right:5px}@media screen and (-webkit-min-device-pixel-ratio:1){.zjapp .synchronize-tip-bar[data-v-66826030]{border:none;background-image:linear-gradient(0deg,#ffd3d3,#ffd3d3 100%,transparent 0);background-size:100% 1px;background-repeat:no-repeat;background-position:bottom}}@media screen and (-webkit-min-device-pixel-ratio:1.5){.zjapp .synchronize-tip-bar[data-v-66826030]{border:none;background-image:linear-gradient(0deg,#ffd3d3,#ffd3d3 66.6667%,transparent 0);background-size:100% 1px;background-repeat:no-repeat;background-position:bottom}}@media screen and (-webkit-min-device-pixel-ratio:2){.zjapp .synchronize-tip-bar[data-v-66826030]{border:none;background-image:linear-gradient(0deg,#ffd3d3,#ffd3d3 50%,transparent 0);background-size:100% 1px;background-repeat:no-repeat;background-position:bottom}}@media screen and (-webkit-min-device-pixel-ratio:2.625){.zjapp .synchronize-tip-bar[data-v-66826030]{border:none;background-image:linear-gradient(0deg,#ffd3d3,#ffd3d3 38.0952%,transparent 0);background-size:100% 1px;background-repeat:no-repeat;background-position:bottom}}@media screen and (-webkit-min-device-pixel-ratio:3){.zjapp .synchronize-tip-bar[data-v-66826030]{border:none;background-image:linear-gradient(0deg,#ffd3d3,#ffd3d3 33.3333%,transparent 0);background-size:100% 1px;background-repeat:no-repeat;background-position:bottom}}@media screen and (-webkit-min-device-pixel-ratio:4){.zjapp .synchronize-tip-bar[data-v-66826030]{border:none;background-image:linear-gradient(0deg,#ffd3d3,#ffd3d3 25%,transparent 0);background-size:100% 1px;background-repeat:no-repeat;background-position:bottom}}",""])},"9a86":function(t,e,a){"use strict";a("cc57");var n={name:"SpecialInspect",components:{Item:a("07d2").default},props:{isLoading:{type:Boolean},batch:{type:Object},editable:{type:Boolean}},data:function(){return{}},computed:{batchText:function(){return this.isLoading?"正在加载检批次...":this.batch&&this.batch.id?this.batch.is_closed?"上次使用的批次已关闭":this.batch.name:this.allowAdd?"请新建一个检查批次":"暂无与你相关的检查批次"},batchTips:function(){return this.isLoading||!this.editable?"":this.batch&&this.batch.id&&!this.batch.is_closed?"切换批次":""},batchArrow:function(){return!(this.isLoading||!this.editable)&&(!(!this.batch||!this.batch.id)||this.allowAdd)},allowAdd:function(){return(this.$store.state.user.roles||[]).some((function(t){return 34===t}))}},methods:{batchClick:function(){!this.isLoading&&this.editable&&(this.batch&&this.batch.id?this.$router.push("/special-inspect-batch-list-redo"):this.allowAdd&&this.$router.push("/special-inspect-batch-edit-redo"))}}},i=a("17cc"),o=Object(i.a)(n,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("item",{staticClass:"bg-sub-theme",attrs:{border:"bottom","icon-right":t.batchArrow?"arrow-right":""},on:{click:t.batchClick}},[a("div",{staticClass:"item-text"},[t._v(t._s(t.batchText))]),a("div",{staticClass:"item-font color-gray"},[t._v(t._s(t.batchTips))])])}),[],!1,null,null,null);e.a=o.exports},"9d55":function(t,e,a){(t.exports=a("690e")(!1)).push([t.i,'.zjapp .scroll-warp[data-v-2b1a346c]{flex:1;overflow:auto;-webkit-overflow-scrolling:touch}.zjapp .scroll-warp-pulling[data-v-2b1a346c]{overflow:hidden}.zjapp .scroll-warp-complete[data-v-2b1a346c]:after{content:"";display:block;height:100px}.zjapp .scroll-warp-empty[data-v-2b1a346c]{display:flex;flex-direction:column}.zjapp .pull-refresh-warp[data-v-2b1a346c]{position:relative;height:0;overflow:hidden}.zjapp .pull-refresh[data-v-2b1a346c]{position:absolute;left:0;bottom:0;height:70px;width:100%;padding:6px;text-align:center}.zjapp .pull-refresh-date[data-v-2b1a346c]{margin-top:4px;height:16px;line-height:16px;font-size:12px;color:#bcbcbc}.zjapp .page-loading[data-v-2b1a346c]{padding:10px;text-align:center}.zjapp .end-text[data-v-2b1a346c]{color:#c8c8c8;background:#f4f4f4;position:relative;line-height:76px;height:76px;text-align:center}.zjapp .end-text[data-v-2b1a346c]:after,.zjapp .end-text[data-v-2b1a346c]:before{content:"";position:absolute;width:48px;height:1px;background:#e4e4e4;top:50%;margin-top:-1px}.zjapp .end-text[data-v-2b1a346c]:after{left:50%;transform:translateX(-92px)}.zjapp .end-text[data-v-2b1a346c]:before{right:50%;transform:translateX(90px)}.zjapp .end-slot[data-v-2b1a346c]{padding:30px;line-height:18px;text-align:center;color:#c8c8c8}',""])},a750:function(t,e,a){"use strict";var n=a("7162").a,i=(a("e6b6"),a("17cc")),o=Object(i.a)(n,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("page-content",{attrs:{title:t.title}},[a("nav-menu",{attrs:{slot:"header-bar-right",batch:t.batchData,mode:t.batchData.mode},on:{change:t.onNavMenuChange},slot:"header-bar-right"}),a("synchronize-tip-bar"),a("scroller",{attrs:{"is-empty":t.isEmpty||t.isLoading},on:{pullDown:t.onPullDown}},[t.showBatch?a("batch",{attrs:{"is-loading":t.isBatchLoading,batch:t.batchData,editable:!t.batchDisabled}}):t._e(),t.isLoading||t.isEmpty||!t.batchData?t._e():[t.beforeList?a(t.beforeList,{tag:"component",attrs:{batch:t.batchData,data:t.treeData,editable:t.editable}}):t._e(),t.listTemplate?a(t.listTemplate,{tag:"component",attrs:{batch:t.batchData,data:t.treeData,editable:t.editable},on:{reload:t.reloadList}}):a("checkitem-tree",{attrs:{data:t.treeData,"memory-open-set":!0,"icon-position":"right","indent-size":t.treeStyle.indent,"tree-style":t.treeStyle,maps:{notesMap:t.notesMap,infosMap:t.infosMap,iconsMap:t.iconsMap,btnsMap:t.btnsMap}},on:{onClickNode:t.onClickNode,onClickBtn:t.onClickBtn}}),t.afterList?a(t.afterList,{tag:"component",attrs:{batch:t.batchData,data:t.treeData,editable:t.editable}}):t._e(),"检查完毕"===t.batchData.status?a("div",{staticClass:"batch-info"},[t._v("\n        "+t._s(t._f("formatDate")(t.batchData.modified_on))+"\n        "+t._s(t.batchData.created_by_name)+"\n        提交检查完毕\n      ")]):[t.batchData.isCreator?a("app-button-group",{staticClass:"mt20"},[a("app-button",{on:{click:t.finishBatch}},[t._v("\n            检查完毕并提交\n          ")])],1):t._e()]],t.listHolder?a(t.listHolder,{tag:"component",attrs:{"is-loading":t.isLoading,"is-empty":t.isEmpty,batch:t.batchData},on:{reload:t.reloadList}}):a("loading-status",{attrs:{"is-loading":t.isLoading,"is-empty":t.isEmpty,"empty-text":"没有数据"}})],2),t.isLoading||t.isEmpty?t._e():a("item",{staticClass:"index-bottom border-top"},[a("div",{staticClass:"item-text"},[t._v(t._s(t.totalData.title))]),t.totalData.note?a("div",{staticClass:"item-font color-gray3 ml15"},[t._v(t._s(t.totalData.note))]):t._e(),t.totalData.hasResult?a("div",{staticClass:"item-font color-theme f18 fw-b ml15"},[t._v("\n      "+t._s(t.totalData.result)+"\n    ")]):t._e(),a("icon",{attrs:{name:"yiwen"},on:{click:function(e){t.formulaTips(t.totalData)}}})],1)],1)}),[],!1,null,"b60adc64",null);e.a=o.exports},ae11:function(t,e,a){"use strict";a("1d69")},b225:function(t,e,a){"use strict";a("ef48")},c090:function(t,e,a){var n=a("535a");"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);(0,a("85cb").default)("3acca9c2",n,!0,{sourceMap:!1,shadowMode:!1})},d18d:function(t,e,a){"use strict";(function(t){a("2b45");var n,i=a("4360"),o=a("48f4"),r=a("162a"),s=a("e2a7"),c=a("a500"),l=a("6f9e"),u={};e.a={name:"Scroller",props:{buildingId:{type:String,default:""},hasNext:{type:Boolean,default:!1},isEmpty:{type:Boolean,default:!1},isSync:{type:Boolean,default:!0},endText:{type:String,default:""},memoryScrollTop:{type:Boolean,default:!0},keepScrollTop:{type:Boolean},hasPullDown:{type:Boolean,default:!0},onPullDown:{type:Function}},data:function(){return{pullDist:0,refreshing:!1,pulling:!1,loading:!1,scrollTop:0,isCurrKeyboard:!1,gapBottom:0}},computed:{allowPullDown:function(){return this.hasPullDown&&(!!this.$listeners.pullDown||!!this.onPullDown)},updateTime:function(){return i.a.state.global.businessDownloadTime},numberKeyboardCoverHeight:function(){return i.a.state.global.isNumberInputOpen?i.a.state.global.numberKeyboardHeight-this.gapBottom:0}},mounted:function(){var t=this;l.a.$on("numberKeyboardOpen",this.onNumberKeyboardOpen),this.$nextTick((function(){var e=t.$refs["scroll-warp"]&&t.$refs["scroll-warp"].getBoundingClientRect&&t.$refs["scroll-warp"].getBoundingClientRect();e&&(t.gapBottom=document.documentElement.clientHeight-e.bottom),t.$el&&t.$el.addEventListener("focus",(function(e){var a=e&&e.target,n=a&&a.tagName&&a.tagName.toLowerCase();if("input"===n||"textarea"===n){window.addEventListener("resize",(function e(){var n=a.getBoundingClientRect(),i=t.$el.getBoundingClientRect(),o=n.bottom-i.bottom;o>0&&t.scrollBy(o),window.removeEventListener("resize",e,!1)}),!1)}}),!0)}))},destroyed:function(){l.a.$off("numberKeyboardOpen",this.onNumberKeyboardOpen)},activated:function(){var t=this.keepScrollTop||this.$router.isBack&&this.memoryScrollTop;this.scrollTop&&t&&(this.$refs["scroll-warp"].scrollTop=this.scrollTop)},deactivated:function(){this.memoryScrollTop&&(this.scrollTop=this.$refs["scroll-warp"].scrollTop)},methods:{onScroll:function(t){var e=this,a=this.$refs["scroll-warp"].scrollTop,n=this.$refs["scroll-warp"].scrollHeight;if(a+this.$refs["scroll-warp"].clientHeight>=n-5&&!this.loading&&this.hasNext){this.loading=!0;var i=this.$listeners.loadNext();i&&i.then&&"function"==typeof i.then?i.then((function(){e.loading=!1})):this.loading=!1}this.$emit("scroll",t)},getTouchDiretion:function(t){if(!(u&&t&&t.touches&&t.touches[0]))return"";var e=t.touches[0].clientX,a=t.touches[0].clientY;return Math.abs(a-u.y)>Math.abs(e-u.x)&&Math.abs(a-u.y)>=3?a>u.y?"down":"up":""},onTouchstart:function(t){this.allowPullDown&&t.touches&&1===t.touches.length&&(u={x:t.touches[0].clientX,y:t.touches[0].clientY,scrollTop:this.$refs["scroll-warp"].scrollTop,pullDist:this.pullDist})},onTouchmove:function(t){if(this.allowPullDown&&t.touches&&1===t.touches.length){var e=this.$refs["scroll-warp"].scrollTop,a=t.touches[0].clientY,n=a-u.y,i=this.getTouchDiretion(t);"down"===i?!this.refreshing&&e<=0?(this.pulling=!0,this.pullDist=(n-u.scrollTop)/2,t.preventDefault()):this.pulling=!1:"up"===i?this.pullDist>0&&(this.pullDist=u.pullDist-(u.y-a),t.preventDefault()):this.pullDist=u.pullDist}},onTouchend:function(){var t=this;this.allowPullDown&&(u={},this.pulling=!1,this.pullDist>=70&&this.isSync?this.refreshing?this.makePullTo(70):this.makePullTo(70).then((function(){if(t.refreshing=!0,t.onPullDown){var e=t.onPullDown();e&&e.then&&"function"==typeof e?e.finally((function(){t.refreshing=!1,t.makePullTo(0)})):(t.refreshing=!1,t.makePullTo(0))}else t.dataSync().then((function(){t.refreshing=!1,t.makePullTo(0),t.$emit("pullDown")})).catch((function(){t.refreshing=!1,t.makePullTo(0),t.$emit("pullDown")}))})):(this.refreshing=!1,this.makePullTo(0)))},makePullTo:function(t){var e=this,a=this.pullDist,n=t,i=n-a,o=a;return a===n?Promise.resolve():new Promise((function(t){!function r(){window.requestAnimationFrame((function(){o+=i/6,e.pullDist=o,a<n&&o<n||a>n&&o>n?r():(e.pullDist=n,e.refreshing=!1,t())}))}()}))},dataSync:function(){var t,e=o.default.getCurrentModuleCode(),a=o.default.getCurrentRoute(),n=a.meta&&a.meta.isTodo;if(o.default.isModuleNeedBuilding(e)&&!n){if(!this.buildingId)return new Promise((function(t){setTimeout((function(){t()}),500)}));t=this.buildingId}return c.a.addTrack("公共-手动下拉刷新","",""),r.a.beginManualUpdate(),o.default.checkSync(t).then((function(t){return r.a.endManualUpdate(),t})).catch((function(t){$log.error("下拉刷新错误",t),t&&"Error: Network Error"===t.toString()?s.a.alert("当前网络无法同步数据"):s.a.alert(t),r.a.endManualUpdate()}))},getScrollHeight:function(){return this.$refs["scroll-warp"].offsetHeight},getScrollTop:function(){return this.$refs["scroll-warp"].scrollTop},setScrollTop:function(t){this.$refs["scroll-warp"].scrollTop=t},scrollBy:function(t){var e=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:200,i=this.getScrollTop(),o=i+t,r=Math.round(a/16.7),s=t/r,c=i,l=n=+new Date;return i===o?Promise.resolve():new Promise((function(t){!function a(){window.requestAnimationFrame((function(){l===n&&(c+=s,e.$refs["scroll-warp"].scrollTop=c,i<o&&c<o||i>o&&c>o?a():(e.$refs["scroll-warp"].scrollTop=o,t()))}))}()}))},scrollTo:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:200,a=this.getScrollTop(),n=t-a;return this.scrollBy(n,e)},scrollToEle:function(t){var e=t.keyboardHeight||232,a=(t=t.$el?t.$el:t).getBoundingClientRect(),n=this.$refs["scroll-warp"].getBoundingClientRect();if(a&&n){var o=document.documentElement.clientHeight-(i.a.state.global.isNumberInputOpen?e:0),r=n.bottom<o?n.bottom:o,s=n.top-a.top,c=a.bottom-r;s>0?this.scrollBy(-s-10):c>0&&this.scrollBy(c+10)}},isCurrent:function(e,a){var n=this;e.length&&t.each(e,(function(t){t._uid===a?n.isCurrKeyboard=!0:n.isCurrent(t.$children,a)}))},onNumberKeyboardOpen:function(t){this.isCurrKeyboard=!1,this.isCurrent(this.$children,t._uid),this.isCurrKeyboard&&this.scrollToEle(t)}}}}).call(this,a("391c"))},dd16:function(t,e,a){"use strict";(function(t){e.a={name:"StatusText",props:{status:{type:String},text:{type:String},extend:{type:Object,default:function(){return{}}}},data:function(){return{classSet:t.extend({"草稿":"color-gray","暂存":"color-gray","检查中":"color-orange","待整改":"color-red","待复验":"color-orange","待验收":"color-red","待报验":"color-red","待申请进场":"color-red","待初验":"color-red","待送检":"color-red","待上传报告":"color-red","待退场":"color-red","待建设单位验收":"color-red","待区域验收":"color-red","供应链退回":"color-red","预创建":"color-status-blue","已提交":"color-green","已整改":"color-green","已验收":"color-green","已通过":"color-green","已退场":"color-gray","已关闭":"color-gray","非正常关闭":"color-gray","已退回":"color-red","已完成":"color-green","已甩项":"color-gray","检查完毕":"color-green","送检合格":"color-green","复验合格":"color-green","验收合格":"color-green","验收不合格":"color-red","未验收":"color-orange","待点评":"color-orange","已点评":"color-green","合格":"color-green","不合格":"color-red","进度正常":"color-green","进度滞后":"color-red","正常":"color-green","滞后":"color-red","施工单位验收合格":"color-green","监理单位验收合格":"color-green","建设单位验收合格":"color-green","施工单位验收不合格":"color-red","监理单位验收不合格":"color-red","建设单位验收不合格":"color-red"},this.extend)}},mounted:function(){}}}).call(this,a("391c"))},df54:function(t,e,a){"use strict";var n=a("28f8"),i=(a("163d"),a("7bac")),o=a("4360"),r=a("4aef"),s=a("a044");i.a.getUserObject("tree-base-open-set-memory").then((function(t){o.a.commit("components/SET_TREE_BASE_OPEN_SET",t||{})}));var c={name:"CheckitemTree",components:{StatusText:r.a},props:{data:{type:Array,default:function(){return[]}},keyword:{type:String,default:""},level:{type:Number,default:0},iconPosition:{type:String,default:"left"},indentSize:{type:Number,default:14},memoryOpenSet:{type:Boolean,default:!1},defaultOpenLevel:{type:Number,default:0},treeStyle:{type:Object,default:function(){return{}}},maps:{type:Object,default:function(){return{}}}},data:function(){return{selfOpenSet:{},statusStyleExtend:Object(n.a)({},s.w,"color-orange")}},computed:{openSet:function(){return this.memoryOpenSet?o.a.state.components.treeBaseOpenSet:this.selfOpenSet}},methods:{itemClick:function(t){if(t.children&&t.children.length){if(this.memoryOpenSet)!function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=Object.assign({},o.a.state.components.treeBaseOpenSet,t);o.a.commit("components/SET_TREE_BASE_OPEN_SET",e),i.a.saveUserObject("tree-base-open-set-memory",e)}(Object(n.a)({},t.id,!this.isNodeOpen(t.id)));else this.$set(this.selfOpenSet,t.id,!this.isNodeOpen(t.id));this.$emit("onClickFoldNode",t)}else this.$emit("onClickEndNode",t);this.$emit("onClickNode",t)},onClickBtn:function(t,e){this.$emit("onClickBtn",t,e)},isNodeOpen:function(t){return void 0===this.openSet[t]?this.level<this.defaultOpenLevel:this.openSet[t]},onClickNode:function(t){this.$emit("onClickNode",t)},onClickFoldNode:function(t){this.$emit("onClickFoldNode",t)},onClickEndNode:function(t){this.$emit("onClickEndNode",t)}}},l=(a("ae11"),a("17cc")),u=Object(l.a)(c,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"tree-con"},t._l(t.data,(function(e){return a("div",{key:e.id,staticClass:"tree-list",style:Object.assign({},t.treeStyle.listStyle["level-all"],t.treeStyle.listStyle["level-"+t.level])},[a("div",{staticClass:"tree-node border-bottom",class:"tree-node-level-"+t.level,style:Object.assign({},t.treeStyle.nodeStyle["level-all"],t.treeStyle.nodeStyle["level-"+t.level]),on:{click:function(a){t.itemClick(e)}}},[a("div",{staticClass:"tree-indent",style:{width:t.indentSize*t.level+"px"}}),"left"===t.iconPosition?a("div",{staticClass:"tree-icon",class:{"icon-dropdown":e.children&&e.children.length&&(void 0===t.openSet[e.id]?t.level<t.defaultOpenLevel:t.openSet[e.id]),"icon-dropright":e.children&&e.children.length&&!(void 0===t.openSet[e.id]?t.level<t.defaultOpenLevel:t.openSet[e.id])}}):t._e(),a("div",{staticClass:"tree-main"},[a("div",{staticClass:"tree-text",style:Object.assign({},t.treeStyle.textStyle["level-all"],t.treeStyle.textStyle["level-"+e.treeNodeLevel])},[t.treeStyle.iconPart&&t.treeStyle.iconPart["level-"+e.treeNodeLevel]?a("icon",{attrs:{name:"part-title"}}):t._e(),t.treeStyle.iconPoint&&t.treeStyle.iconPoint["level-"+e.treeNodeLevel]?a("i",{staticClass:"special-inspect-icon-end"}):t._e(),t.maps.iconsMap[e.id]&&t.maps.iconsMap[e.id].length?t._l(t.maps.iconsMap[e.id],(function(t,e){return a("icon",{key:"icon-"+e,attrs:{name:t.name}})})):t._e(),t._v("\n          "+t._s(e.checkitem_name)+"\n          "),t.maps.notesMap[e.id]&&t.maps.notesMap[e.id].length?t._l(t.maps.notesMap[e.id],(function(e,n){return a("span",{key:"note-"+n,class:"color-"+e.color+" ml5 ws-nowrap"},[t._v("\n              "+t._s(e.text)+"\n            ")])})):t._e()],2)]),t.maps.infosMap[e.id]&&t.maps.infosMap[e.id].length?a("div",{staticClass:"item-font"},[t._l(t.maps.infosMap[e.id],(function(e,n){return["status"===e.type?a("status-text",{key:n,attrs:{status:e.text,extend:t.statusStyleExtend}}):a("span",{key:n,class:"color-"+e.color+" ml5 ws-nowrap"},[t._v("\n            "+t._s(e.text)+"\n          ")])]}))],2):t._e(),t.maps.btnsMap[e.id]&&t.maps.btnsMap[e.id].length?t._l(t.maps.btnsMap[e.id],(function(n,i){return a("button",{key:i,staticClass:"btn btn-operate",on:{click:function(a){a.stopPropagation(),t.onClickBtn(n,e)}}},[t._v("\n          "+t._s(n.name)+"\n        ")])})):t._e(),"right"===t.iconPosition&&e.children&&e.children.length?a("icon",{staticClass:"icon-right",attrs:{name:(void 0===t.openSet[e.id]?t.level<t.defaultOpenLevel:t.openSet[e.id])?"arrow-up":"arrow-down"}}):t._e()],2),e.siblings&&e.siblings.length?a("div",{staticClass:"desc-item-list border-bottom"},t._l(e.siblings,(function(e,n){return a("div",{key:n,staticClass:"desc-item"},[t._v("\n        "+t._s(e.name)+"\n      ")])}))):t._e(),e.children&&e.children.length&&(void 0===t.openSet[e.id]?t.level<t.defaultOpenLevel:t.openSet[e.id])?[a("checkitem-tree",{key:"children-"+e.id,attrs:{data:e.children,level:t.level+1,keyword:t.keyword,"default-open-level":t.defaultOpenLevel,"memory-open-set":t.memoryOpenSet,"icon-position":t.iconPosition,"indent-size":t.indentSize,"tree-style":t.treeStyle,maps:t.maps},on:{onClickNode:t.onClickNode,onClickFoldNode:t.onClickFoldNode,onClickEndNode:t.onClickEndNode,onClickBtn:t.onClickBtn}})]:t._e()],2)})))}),[],!1,null,"097aac2c",null);e.a=u.exports},df6d:function(t,e,a){(t.exports=a("690e")(!1)).push([t.i,".zjapp .batch-info[data-v-b60adc64]{padding:15px;color:#b2b2b2;text-align:center}[data-v-b60adc64] .icon-yiwen{font-size:18px;color:#b4b4b4;line-height:30px;padding-left:10px}.zjapp .ios-bezel-less .index-bottom[data-v-b60adc64]{padding-bottom:42px}",""])},e6b6:function(t,e,a){"use strict";a("4e8f")},e89f:function(t,e,a){"use strict";var n=a("04f3"),i=a("cf09"),o=a("4360"),r=0;e.a={name:"PopupMixin",data:function(){return{backButtonEvent:null}},watch:{show:function(t){var e=this;if(t){if(this.$nextTick((function(){e.$el&&e.$el.style&&(e.$el.style.zIndex=++i.a.zIndex,r++,o.a.commit("app/SET_HAS_POPUP",!!r))})),!this.backButtonEvent){var a=this.close||this.closePopup;this.backButtonEvent=Object(n.a)(a)}}else--r<0&&(r=0),o.a.commit("app/SET_HAS_POPUP",!!r),this.backButtonEvent&&(Object(n.c)(this.backButtonEvent),this.backButtonEvent=null)}},methods:{}}},ef48:function(t,e,a){var n=a("9d55");"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);(0,a("85cb").default)("a1a65c0c",n,!0,{sourceMap:!1,shadowMode:!1})},f7ab:function(t,e,a){"use strict";var n=a("65e9").a,i=(a("f7d4"),a("17cc")),o=Object(i.a)(n,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.show?a("div",{ref:"synchronize-tip-bar",staticClass:"synchronize-tip-bar"},[a("icon",{attrs:{name:"caution"}}),t.waitUploadNum?a("span",[t._v("您有"+t._s(t.waitUploadNum)+"条数据待上传")]):t._e(),!t.waitUploadNum&&t.hasChanged?a("span",[t._v("有新数据")]):t._e(),t._v("\n  ，下拉可"+t._s(t.waitUploadNum?"上传":"刷新")+"\n")],1):t._e()}),[],!1,null,"66826030",null);e.a=o.exports},f7d4:function(t,e,a){"use strict";a("2d6e")}}]);