(window.webpackJsonp_module_entry_zjapp_=window.webpackJsonp_module_entry_zjapp_||[]).push([["temperature-index"],{4278:function(e,t,i){"use strict";i("d4a6")},"4bd9":function(e,t,i){"use strict";i.r(t);var a=i("879f5").a,o=(i("fdb2"),i("17cc")),n=Object(o.a)(a,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("page-content",{attrs:{title:"在场人员日常测温","show-go-root":!0}},[i("template",{slot:"header-bar-right"},[i("div",{staticClass:"header-btn",on:{click:e.goToSearch}},[i("icon",{attrs:{name:"nav-search"}})],1)]),i("item",{staticClass:"item-part-title"},[i("i",{staticClass:"icon-part"}),i("div",{staticClass:"item-text"},[e._v(e._s(e.projectSelected.name)+e._s(e.bidsection_name))])]),i("scroller",{staticClass:"scroller-ncov-temperature mt10"},e._l(e.menuList,(function(t,a){return i("div",{key:a,staticClass:"menu-list van-hairline--bottom",on:{click:function(i){e.goModulesView(t)}}},[i("div",{staticClass:"module-img",style:{"background-image":"url("+t.icon+")"}}),i("div",{staticClass:"module-content"},[i("p",{staticClass:"module-place"},[e._v(e._s(t.moduleName))]),i("div",{staticClass:"module-describe"},[e._v(e._s(t.describe))])]),i("div",{staticClass:"arrow-icon"},[i("icon",{attrs:{name:"arrow-right"}})],1)])})))],2)}),[],!1,null,"6c900828",null);t.default=n.exports},"4ddb":function(e,t,i){"use strict";(function(e){var a=i("e3ee"),o=(i("9a33"),i("cc57"),i("e2a7")),n=i("774b"),r=i("fa4f"),c=i("07d2"),s=i("6bf2"),d=i.n(s),l=i("162a"),u=i("6144"),p=i("6371"),f=i.n(p),m=i("ed08"),h=[{type:1,moduleName:"扫一扫",icon:i("c34b"),describe:"扫描防疫通行卡快速进行测温数据录入"}];t.a={name:"NcovTemperatureIndex",components:{Scroller:n.default,ItemList:r.default,Item:c.default},data:function(){return{isLoading:!0,menuList:h,QRCodeUserId:"",bidsection_id:"",bidsection_name:"",has_risk_count:0,no_risk_count:0}},computed:{projectSelected:function(){return this.$store.state.global.currentProject}},activated:function(){this.bidsection_id=(u.a.getObject("ncov-index-section-default"+this.projectSelected.id,u.a.level.user)||{}).id,this.bidsection_name=(u.a.getObject("ncov-index-section-default"+this.projectSelected.id,u.a.level.user)||{}).name,this.init(),this.isSearching=!1},deactivated:function(){this.isSearching=!1,this.$refs["app-search-bar"]&&this.$refs["app-search-bar"].cancelSearch()},methods:{init:function(){var e=this;this.has_risk_count=0,this.no_risk_count=0,this.currentDate=d()(new Date).format("YYYY-MM-DD"),l.a.request("/online/ncov-user-temperature/checked-users-count",{proj_id:this.projectSelected.id,start_date:this.currentDate,end_date:this.currentDate,bidsection_id:this.bidsection_id}).then((function(t){e.has_risk_count=t.has_risk_count,e.no_risk_count=t.no_risk_count}))},goModulesView:function(e){1===e.type?this.scanQRCode():2===e.type&&this.$router.push({name:"NcovTemperatureList"})},goEdit:function(e){console.log("item",e),this.$router.push({name:"NcovTemperatureGemdaleEdit",query:{user_id:e.user_id,expiry_date:e.expiry_date}})},goList:function(e){this.$router.push({name:"NcovTemperatureGemdaleList",query:{tabIndex:e}})},scanQRCode:function(){var e=this;if(window.MBarcode&&window.MBarcode.scanQRCode){var t=cordova.require("cordova/plugin_list");if(t&&m.a.versionCompare(t.metadata["com.mysoft.mbarcode"],"1.2.4")>=0){var i=this;MBarcode.scanQRCode({onCancel:function(){console.log("onCancel")},onCannotScan:function(){console.log("onCannotScan")},onSuccess:function(e){if($log.log("在场人员日常测温扫码",e),e)try{var t=JSON.parse(e);t.nc_user_id?i.goEdit({user_id:t.nc_user_id,expiry_date:t.nc_user_id}):i.goEdit({user_id:""})}catch(t){var a=f()(e,!0);a&&a.query&&a.query.nc_user_id?i.goEdit({user_id:a.query.nc_user_id,expiry_date:a.query.expiry_date||""}):i.goEdit({user_id:""})}else o.a.alert("获取二维码信息失败")},onError:function(e){$log.log("扫码失败 --\x3e",e),e&&1100===e.errCode?o.a.alert("该操作需要开启相机权限，请在设置里面开启"):o.a.alert("打开扫码功能失败")}})}else MBarcode.scanQRCode((function(t){if($log.log("在场人员日常测温扫码",t),t)try{var i=JSON.parse(t);i.nc_user_id?e.goEdit({user_id:i.nc_user_id,expiry_date:i.expiry_date}):e.goEdit({user_id:""})}catch(i){var a=f()(t,!0);a&&a.query&&a.query.nc_user_id?e.goEdit({user_id:a.query.nc_user_id,expiry_date:a.query.expiry_date}):e.goEdit({user_id:""})}else o.a.alert("获取二维码信息失败")}),(function(e){$log.log("扫码失败 --\x3e",e),e&&1100===e.errCode?o.a.alert("该操作需要开启相机权限，请在设置里面开启"):o.a.alert("打开扫码功能失败")}),{isFlashSwitchShow:!0})}else o.a.alert("打开扫码功能失败")},goScanError:function(){this.$router.push({name:"NcovScanError"})},goToSearch:function(){this.$router.push({name:"NcovTemperatureSearch"})},getParamsFromUrl:function(t){var i={};if("http"!==t.substr(0,4)||t.indexOf("?")<0)return{};var o=t.split("?")[1].split("&");return e.each(o,(function(e){if(e&&e.indexOf("=")>=0){var t=e.split("="),o=Object(a.a)(t,2),n=o[0],r=o[1];i[n]=r}})),i}}}}).call(this,i("391c"))},"53d7":function(e,t,i){(e.exports=i("690e")(!1)).push([e.i,".zjapp .item-part-title[data-v-80512110]{align-items:center}.zjapp .item-part-title .item-text[data-v-80512110]{font-size:16px}.zjapp .icon-part[data-v-80512110]{position:absolute;top:15px;left:0;width:4px;height:16px;background-color:#4275e8}.zjapp .menu-list[data-v-80512110]{display:flex;align-items:center;padding:18px 20px;background:#fff}.zjapp .menu-list .module-img[data-v-80512110]{position:relative;flex:0 0 48px;width:48px;height:48px;background:no-repeat 50%;background-size:cover;margin:0 20px 0 0}.zjapp .menu-list .module-content[data-v-80512110]{flex:1;overflow:hidden}.zjapp .menu-list .module-content .module-place[data-v-80512110]{width:100%;line-height:22px;font-weight:500;margin:1px 0 5px 0;font-size:16px;color:#333;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.zjapp .menu-list .module-content .module-describe[data-v-80512110]{line-height:20px;color:#999}.zjapp .menu-list .arrow-icon[data-v-80512110]{color:#c8c8c8}.zjapp .scroll-warp[data-v-80512110]{background:#fff}.zjapp .today-info-content[data-v-80512110]{padding:17px 0 13px;display:flex;align-items:center;justify-content:space-around;background:#fff;border:none;background-image:linear-gradient(180deg,#ececec,#ececec 50%,transparent 0);background-size:100% 1px;background-repeat:no-repeat;background-position:top}.zjapp .today-info-content .info-box:first-of-type .num[data-v-80512110]{color:#4275e8}.zjapp .today-info-content .info-box:nth-of-type(2) .num[data-v-80512110]{color:#0bc666}.zjapp .today-info-content .info-box:nth-of-type(3) .num[data-v-80512110]{color:#ff3c46}.zjapp .today-info-content .info-box .num[data-v-80512110]{font-size:20px;text-align:center}.zjapp .today-info-content .info-box .text[data-v-80512110]{font-size:12px;color:#666;margin-top:5px;text-align:center}",""])},"6db0":function(e,t,i){(e.exports=i("690e")(!1)).push([e.i,".zjapp .item-part-title[data-v-6c900828]{align-items:center}.zjapp .item-part-title .item-text[data-v-6c900828]{font-size:16px}.zjapp .icon-part[data-v-6c900828]{position:absolute;top:15px;left:0;width:4px;height:16px;background-color:#4275e8}.zjapp .scroller-ncov-temperature[data-v-6c900828]{padding:10px 20px;background:#fff}.zjapp .menu-list[data-v-6c900828]{display:flex;align-items:center;padding:18px 0}.zjapp .menu-list .module-img[data-v-6c900828]{position:relative;flex:0 0 48px;width:48px;height:48px;background:no-repeat 50%;background-size:cover;margin:0 20px 0 0}.zjapp .menu-list .module-content[data-v-6c900828]{flex:1;overflow:hidden}.zjapp .menu-list .module-content .module-place[data-v-6c900828]{width:100%;line-height:22px;font-weight:500;margin:1px 0 5px 0;font-size:16px;color:#333;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.zjapp .menu-list .module-content .module-describe[data-v-6c900828]{line-height:20px;color:#999}.zjapp .menu-list .arrow-icon[data-v-6c900828]{color:#c8c8c8}.zjapp .scroll-warp[data-v-6c900828]{background:#fff}",""])},"879f5":function(e,t,i){"use strict";(function(e){var a=i("e3ee"),o=(i("9a33"),i("cc57"),i("e2a7")),n=i("774b"),r=i("fa4f"),c=i("07d2"),s=i("6bf2"),d=i.n(s),l=(i("162a"),i("6144")),u=i("6371"),p=i.n(u),f=i("ed08"),m=[{type:1,moduleName:"扫一扫",icon:i("c34b"),describe:"扫描防疫通行卡快速进行测温数据录入"},{type:2,moduleName:"从列表中查找",icon:i("6dc6"),describe:"从列表中查找未测人员、录入测温数据"}];t.a={name:"NcovTemperatureIndex",components:{Scroller:n.default,ItemList:r.default,Item:c.default},data:function(){return{isLoading:!0,menuList:m,QRCodeUserId:"",bidsection_id:"",bidsection_name:""}},computed:{projectSelected:function(){return this.$store.state.global.currentProject}},activated:function(){this.bidsection_id=(l.a.getObject("ncov-index-section-default"+this.projectSelected.id,l.a.level.user)||{}).id,this.bidsection_name=(l.a.getObject("ncov-index-section-default"+this.projectSelected.id,l.a.level.user)||{}).name,this.init(),this.isSearching=!1},deactivated:function(){this.isSearching=!1,this.$refs["app-search-bar"]&&this.$refs["app-search-bar"].cancelSearch()},methods:{init:function(){this.currentDate=d()(new Date).format("YYYY-MM-DD")},goModulesView:function(e){1===e.type?this.scanQRCode():2===e.type&&this.$router.push({name:"NcovTemperatureList"})},goEdit:function(e){console.log("item",e),this.$router.push({name:"NcovTemperatureEdit",query:{user_id:e.user_id}})},scanQRCode:function(){var e=this;if(window.MBarcode&&window.MBarcode.scanQRCode){var t=cordova.require("cordova/plugin_list");if(t&&f.a.versionCompare(t.metadata["com.mysoft.mbarcode"],"1.2.4")>=0){var i=this;MBarcode.scanQRCode({onCancel:function(){console.log("onCancel")},onCannotScan:function(){console.log("onCannotScan")},onSuccess:function(e){if($log.log("在场人员日常测温扫码",e),e)try{var t=JSON.parse(e);t.nc_user_id?i.goEdit({user_id:t.nc_user_id}):i.goEdit({user_id:""})}catch(t){var a=p()(e,!0);a&&a.query&&a.query.nc_user_id?i.goEdit({user_id:a.query.nc_user_id}):i.goEdit({user_id:""})}else o.a.alert("获取二维码信息失败")},onError:function(e){$log.log("扫码失败 --\x3e",e),e&&1100===e.errCode?o.a.alert("该操作需要开启相机权限，请在设置里面开启"):o.a.alert("打开扫码功能失败")}})}else MBarcode.scanQRCode((function(t){if($log.log("在场人员日常测温扫码",t),t)try{var i=JSON.parse(t);i.nc_user_id?e.goEdit({user_id:i.nc_user_id}):e.goEdit({user_id:""})}catch(i){var a=p()(t,!0);a&&a.query&&a.query.nc_user_id?e.goEdit({user_id:a.query.nc_user_id}):e.goEdit({user_id:""})}else o.a.alert("获取二维码信息失败")}),(function(e){$log.log("扫码失败 --\x3e",e),e&&1100===e.errCode?o.a.alert("该操作需要开启相机权限，请在设置里面开启"):o.a.alert("打开扫码功能失败")}),{isFlashSwitchShow:!0})}else o.a.alert("打开扫码功能失败")},goScanError:function(){this.$router.push({name:"NcovScanError"})},goToSearch:function(){this.$router.push({name:"NcovTemperatureSearch"})},getParamsFromUrl:function(t){var i={};if("http"!==t.substr(0,4)||t.indexOf("?")<0)return{};var o=t.split("?")[1].split("&");return e.each(o,(function(e){if(e&&e.indexOf("=")>=0){var t=e.split("="),o=Object(a.a)(t,2),n=o[0],r=o[1];i[n]=r}})),i}}}}).call(this,i("391c"))},d4a6:function(e,t,i){var a=i("53d7");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);(0,i("85cb").default)("f2cc31c4",a,!0,{sourceMap:!1,shadowMode:!1})},ec607:function(e,t,i){"use strict";i.r(t);var a=i("4ddb").a,o=(i("4278"),i("17cc")),n=Object(o.a)(a,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("page-content",{attrs:{title:"在场人员日常测温","show-go-root":!0}},[i("item",{staticClass:"item-part-title"},[i("i",{staticClass:"icon-part"}),i("div",{staticClass:"item-text"},[e._v(e._s(e.projectSelected.name)+e._s(e.bidsection_name))])]),i("div",{staticClass:" mt10"},[i("item",{staticClass:"item-part-title"},[i("i",{staticClass:"icon-part"}),i("div",{staticClass:"item-text"},[e._v("今日测温人数")])]),i("div",{staticClass:"today-info-content"},[i("div",{staticClass:"info-box",on:{click:function(t){e.goList(0)}}},[i("div",{staticClass:"num"},[e._v(e._s(e.no_risk_count+e.has_risk_count))]),i("div",{staticClass:"text"},[e._v("总计")])]),i("div",{staticClass:"info-box",on:{click:function(t){e.goList(0)}}},[i("div",{staticClass:"num"},[e._v(e._s(e.no_risk_count))]),i("div",{staticClass:"text"},[e._v("正常")])]),i("div",{staticClass:"info-box",on:{click:function(t){e.goList(1)}}},[i("div",{staticClass:"num"},[e._v(e._s(e.has_risk_count))]),i("div",{staticClass:"text"},[e._v("异常")])])])],1),e._l(e.menuList,(function(t,a){return i("div",{key:a,staticClass:"menu-list mt10",on:{click:function(i){e.goModulesView(t)}}},[i("div",{staticClass:"module-img",style:{"background-image":"url("+t.icon+")"}}),i("div",{staticClass:"module-content"},[i("p",{staticClass:"module-place"},[e._v(e._s(t.moduleName))]),i("div",{staticClass:"module-describe"},[e._v(e._s(t.describe))])]),i("div",{staticClass:"arrow-icon"},[i("icon",{attrs:{name:"arrow-right"}})],1)])}))],2)}),[],!1,null,"80512110",null);t.default=n.exports},f4dc:function(e,t,i){var a=i("6db0");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);(0,i("85cb").default)("b3bb8174",a,!0,{sourceMap:!1,shadowMode:!1})},fdb2:function(e,t,i){"use strict";i("f4dc")}}]);