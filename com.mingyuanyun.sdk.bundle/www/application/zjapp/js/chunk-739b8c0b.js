(window.webpackJsonp_module_entry_zjapp_=window.webpackJsonp_module_entry_zjapp_||[]).push([["chunk-739b8c0b"],{"10e9":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEgAAABICAYAAABV7bNHAAAAAXNSR0IArs4c6QAABRdJREFUeAHtnM9rFGcYx2djsEGysVCUEmhxc9CDlDTxJpKAgtKrtkVQvAnBgwfp3+CpuZT8BaWHYE2uktIGDOJNQ1p68KLFghV/gLoiKmr6+Y4zw+zsu/NjN7ObmXkf+O677zvvvu/7fHjed3Z235ma00fb3NwcorspNIkOeGqQjqG6JxKn6ekF6T10x9MG6XqtVvtA2her5d0LUMbp4xQ6hmbRp6gXe8aHr6M/0BKwHvTS2EA+C5QRdAatoPcoL1Pb6kN9jQzE2SydMshR9AP6D/Xb1Kf6Hs0y5r7UZVDD6BJ6ggZtGoPGMtwX55M6YSBH0J9ou5nGdCRp/Lkdp/Od6Cf0AW1X09g0xp3dgujqLEaHE3R4BR3qtuM+f+4W/X3PGe9u1n4zAwLOUTpZRruzdjbg+s/p/ySQVrOMQ1/cUhtwvqPyNVQ0OPJRY77m+aB8KksNiIbP0+Ii6no+pxpRvpU09kXPl1Q9pZpiHnXBSQ00Ve+Dq6RLldNMt1+ThpAICDhaczStihw5Jg5vKfwmaU2KBQScCRq5jYq45pigRMu0cE/Hnd06ThngKGJ0Ki8rHMGSb1c8X5Vvs46AqPkjKsr3nDbHMhTIR/lqNOMUg6i+oq8h43FjS8Uu3GT4M0y1G1E32gAARxd5Wne+ilYuef4v/NN69C7sp2mKXaRC1eCIiXyW7y3WEkFEj35L+Qd91lKrOpmnuLqPKHrpuxyNoDkOVBWOmMh3MQgsiCCiZ4RS/UD+eXC0mm8e4naDKHot98MRdIp81eGIiRiIhWthQOf8Qps6AQt3ijG99NfMvygMbEs4Nbni+fuR47zm5Dled5z9W7DC5dFmxFldzH7BNHvgA/k2DzjqVHBeAukdXd7nyufxK5X2Znm0GRmRuLjTzAekP/VyMcEJW/NNONfd+zzaNIzEZTLE9BKkGUOFqhfNio3gTKFe/w4uI0wxmRKgyTJ6t0U+TQqQdllYMxM4YAGZwfilLqCGn7NpG4GGImisrdgW+ATGBIjvt9Y6EKhbQB3IeMUuoPgqFT+qCGpWnEGc+00LKA4PwSNA2mprzUzghQDpZ1ZrZgL3BEibtK2ZCdyxgMxg/FIX0Iafs2kbgQ1F0DrS9n5rrQTEZH2IH6b1A/Va6zGbg8B1sVEEyXRjSC42GtmXVv+k927yaNMwKpeJD+gqFRRJW24H9zqOHBqmpy/ZrrRnV+9d5NFmZFRisaSy8F/PK+SPq9Ca8xvT64Q4+BGk9z/rxZpLIGARjiC7eeFjdJg3LxBS2s0wbyPImfdYuCiCCFKOP8rsBqq4DVSQ086qyy66ar5c9hgE3rdEkEqJIruJM8DTehZziyGoXZ4XxCpUr+xv5esFz/cWX8On+eAAFbVfeCEoKP+bBc/nNk/bpphfg6mmi4Sb6JBfVtL0Fn4dBlBko85HbzsC0mEgTZBoU7nuaSijdX8zi2hA9S7JSWSkqzoFNvmkWzTlY0czrkHh2jSwSv4s0gVcWUy+nPV8i/UpEZA+TUO6M28OlQGSfJjzfOJtvMWuQdGPsibppt5fkBbwIpqmlSIn8VZM37lMgPQhIB0lWUZFW7i1IOd7WzgdaLqtkkwjnR6LYhqrbnXS2Ptj+p6ESv9oip5pAsk+3CSJIpDs43GSIOk4oOwDllKCKs0jujKf5tMACtchqsbJ62YZ3fswg3rd1a9/PNfQ7yj3h7zlDggnAgPWDjJfo0mkDexSA2mnbd0TyfZ5TOD/MfbGVd0y/gEAAAAASUVORK5CYII="},"14dd":function(t,e,a){"use strict";a("3a38")},"1cff":function(t,e,a){"use strict";(function(t){a("5ab2"),a("6d57"),a("e10e"),a("cc57");var i=a("28f8"),r=a("07d2"),o=a("774b"),n=a("e68e"),s=a("cd05"),l=a("7136"),c=a("6bf2"),d=a.n(c),p=a("e89f");function u(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,i)}return a}function h(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?u(Object(a),!0).forEach((function(e){Object(i.a)(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):u(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}e.a={name:"SchedulePlanBack",components:{item:r.default,Scroller:o.default,ItemImgList:n.a,UserSelect:s.a},mixins:[p.a],data:function(){return{show:!1,nodeId:"",isLoading:!0,list:[]}},methods:{openPopup:function(e){var a=this;this.nodeId=e.id,this.value=!0,this.show=!0,this.$emit("open"),l.a.logList(this.nodeId).then((function(e){a.list=t.map(e,(function(t){return h(h({},t),{},{checker:{is_im_user:parseInt(t.is_im_user),id:t.id,name:t.name,mobile:parseInt(t.mobile),headimg_url:t.headimg_url},image_file:JSON.parse(t.image_file||"[]")})})),a.isLoading=!1}))},closePopup:function(){this.value=!1,this.show=!1,this.$emit("close")},closeEvent:function(){this.closePopup()},dateFormat:function(t,e){return d()(t).format(e)}}}}).call(this,a("391c"))},"206b":function(t,e,a){"use strict";a("cf0c")},2305:function(t,e,a){(t.exports=a("690e")(!1)).push([t.i,".zjapp .item-log[data-v-41da8f93]{display:block;position:relative;padding:15px 15px 15px 85px;background-position:64px 0!important;background-color:#fff}.zjapp .item[data-v-41da8f93]{padding:0}[data-v-41da8f93] .item-note{color:#999;font-size:14px}.zjapp .item-log-bar[data-v-41da8f93]{position:absolute;left:44px;top:0;width:2px;height:100%;background-color:#cad5ed}.zjapp .item-log:first-child .item-log-bar[data-v-41da8f93]{top:33px}.zjapp .item-log:last-child .item-log-bar[data-v-41da8f93]{height:33px}.zjapp .item-log-status[data-v-41da8f93]{position:absolute;top:14px;left:27px;height:36px;background-color:#fff}.zjapp .item-log-status-icon[data-v-41da8f93]{width:36px;height:16px;line-height:16px;border-radius:8px;font-size:12px;color:#fff;text-align:center;margin-top:10px}.zjapp .item-log-status-icon-by[data-v-41da8f93]{background-color:#0bc666}.zjapp .item-log-status-icon-back[data-v-41da8f93]{background-color:#796bfb}.zjapp .item-log-status-icon-complete[data-v-41da8f93]{background-color:#ff7439;width:60px}",""])},"242a":function(t,e,a){"use strict";var i={name:"Checkbox",props:{semiSelection:{type:Boolean,default:!1},status:{type:String,default:null},value:{type:Boolean,default:!1},text:{type:String,default:""},type:{type:String,default:"circular"}},data:function(){return{}},computed:{iconName:function(){var t="";return"circular"===this.type?t=this.value?"checkbox-checked":"checkbox":"square"===this.type&&(t=this.value?"checkbox-square-checked":"checkbox-square"),t}},methods:{semiClickHandle:function(t){if(t.stopPropagation(),this.semiSelection){var e="partSelected"===this.status||!this.value,a="partSelected"===this.status||e?"fullSelected":null;this.$emit("input",e,a),this.$emit("change",e,a)}else this.$emit("input",!this.value),this.$emit("change",!this.value)}}},r=(a("53e4"),a("17cc")),o=Object(r.a)(i,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{class:{checkbox:!t.semiSelection,semiCheckbox:t.semiSelection,"semiCheckbox-indeterminate":"partSelected"===t.status,"semiCheckbox-checked":"fullSelected"===t.status},on:{click:function(e){t.semiClickHandle(e)}}},[t.semiSelection?a("span",{staticClass:"semiCheckbox-inner"}):t._e(),t.semiSelection?t._e():a("icon",{attrs:{name:t.iconName}}),t._v(t._s(t.text)+"\n")],1)}),[],!1,null,"afcfdff2",null);e.a=o.exports},"26cb":function(t,e,a){"use strict";a("5f65")},"2c76":function(t,e,a){"use strict";a("c070")},"3a38":function(t,e,a){var i=a("755b");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);(0,a("85cb").default)("4f2485ca",i,!0,{sourceMap:!1,shadowMode:!1})},"3c64":function(t,e,a){"use strict";a("163d");var i={name:"ItemTextarea",components:{},props:{value:{type:String,default:""},placeholder:{type:String,default:""},maxlength:{type:Number,default:200},borderBottom:{type:Boolean,default:!0}},data:function(){return{textareaHeight:40,isLock:!1,blurTime:null}},computed:{lastLength:function(){var t=this.value&&this.value.length||0,e=this.maxlength-t;return e>0?e:0}},mounted:function(){var t=this;this.$nextTick((function(){t.textareaHeight=t.$refs.rule&&t.$refs.rule.offsetHeight||40}))},methods:{onfocus:function(){var t=(new Date).getTime();this.blurTime&&t-this.blurTime<300&&window.cordova&&window.cordova.plugins&&window.cordova.plugins.Keyboard&&(this.$refs.input.blur(),window.cordova.plugins.Keyboard.close()),this.blurTime=null,this.$emit("focus")},onblur:function(){this.blurTime=(new Date).getTime(),this.$emit("blur")},setStatus:function(t){console.log(t),this.isLock=t},oninput:function(t){var e=this;setTimeout((function(){if(!e.isLock){var a=t.target.value;a.length>e.maxlength&&(a=a.substring(0,e.maxlength),e.$refs.input.value=a),e.$refs.rule.innerText=a,e.textareaHeight=e.$refs.rule&&e.$refs.rule.offsetHeight+20,e.$emit("input",a),e.$emit("change",a)}}),0)}}},r=(a("2c76"),a("17cc")),o=Object(r.a)(i,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"item-textarea",class:{"border-bottom":t.borderBottom}},[a("div",{staticClass:"item-textarea-content"},[a("textarea",{ref:"input",style:{height:t.textareaHeight+"px"},attrs:{placeholder:t.placeholder},domProps:{value:t.value},on:{focus:t.onfocus,blur:t.onblur,compositionstart:function(e){t.setStatus(!0)},compositionend:function(e){t.setStatus(!1)},input:t.oninput}}),a("div",{ref:"rule",staticClass:"rule"},[t._v("\n      "+t._s(t.value)+"\n    ")]),t.maxlength!==1/0?a("p",{staticClass:"counter"},[t._v("\n      "+t._s(t.lastLength)+"\n    ")]):t._e()])])}),[],!1,null,null,null);e.a=o.exports},"3c6d":function(t,e,a){"use strict";var i=a("329b"),r=a("a828").a,o=a("17cc"),n=Object(o.a)(r,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("transition",{attrs:{name:"slide-right"}},[t.show?a("page-content",{attrs:{title:"退回原因",mode:"dialog","on-close":t.closeEvent}},[a("scroller",[a("item",{attrs:{border:"bottom"}},[a("item-img-list",{attrs:{maxlength:15,"online-mode":!0},model:{value:t.backData.img,callback:function(e){t.$set(t.backData,"img",e)},expression:"backData.img"}})],1),a("item-textarea",{staticClass:"border-none",attrs:{placeholder:"请输入退回原因(必填)"},model:{value:t.backData.remark,callback:function(e){t.$set(t.backData,"remark",e)},expression:"backData.remark"}}),a("app-button-group",[a("app-button",{attrs:{type:"warning",plain:"",rimless:""},on:{click:t.submit}},[t._v("\n          确认退回\n        ")])],1)],1)],1):t._e()],1)}),[],!1,null,null,null).exports,s=!1;s||(s=new(i.default.extend(n))({el:document.createElement("div")}),document.body.appendChild(s.$el));e.a=s},"47b1":function(t,e,a){"use strict";var i=a("329b"),r=a("1cff").a,o=(a("206b"),a("17cc")),n=Object(o.a)(r,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("transition",{attrs:{name:"slide-right"}},[t.show?a("page-content",{attrs:{title:"审核日志",mode:"dialog","on-close":t.closeEvent}},[a("scroller",[t.list.length?a("div",{staticClass:"bg-white pt10"},t._l(t.list,(function(e,i){return a("div",{directives:[{name:"track",rawName:"v-track",value:"进度管理-计划详情页-进入单个节点",expression:"'进度管理-计划详情页-进入单个节点'"}],key:i,staticClass:"item-log",class:{"border-top":i}},[1!==t.list.length?a("div",{staticClass:"item-log-bar"}):t._e(),a("div",{staticClass:"item-log-status",style:{left:"已完成"===e.status?"15px":""}},["已审核"===e.status?a("div",{staticClass:"item-log-status-icon item-log-status-icon-by"},[t._v("\n              通过\n            ")]):t._e(),"已退回"===e.status?a("div",{staticClass:"item-log-status-icon item-log-status-icon-back"},[t._v("\n              退回\n            ")]):t._e(),"已完成"===e.status?a("div",{staticClass:"item-log-status-icon item-log-status-icon-complete"},[t._v("\n              汇报完成\n            ")]):t._e()]),a("user-select",{staticClass:"item-user-select",attrs:{mode:"view",editabled:!1,note:t.dateFormat(e.operate_time,"YYYY-MM-DD HH:mm")},model:{value:e.checker,callback:function(a){t.$set(e,"checker",a)},expression:"item.checker"}}),a("item",[a("div",{staticClass:"item-con"},[a("p",{staticClass:"item-font color-gray1"},[t._v(t._s(e.content))]),e.image_file.length?a("item-img-list",{attrs:{editabled:!1,"online-mode":!0},model:{value:e.image_file,callback:function(a){t.$set(e,"image_file",a)},expression:"item.image_file"}}):t._e()],1)])],1)}))):t._e(),t.isLoading||!t.list.length?a("loading-status",{attrs:{"is-loading":t.isLoading,"is-empty":!t.list.length,"empty-text":"无审核日志"}}):t._e()],1)],1):t._e()],1)}),[],!1,null,"41da8f93",null).exports,s=!1;s||(s=new(i.default.extend(n))({el:document.createElement("div")}),document.body.appendChild(s.$el));e.a=s},"53e4":function(t,e,a){"use strict";a("75b9")},"574c":function(t,e,a){(t.exports=a("690e")(!1)).push([t.i,".zjapp .item-textarea{background-color:#fff;padding:5px 15px}.zjapp .item-textarea-content{position:relative}.zjapp .item-textarea .rule,.zjapp .item-textarea textarea{width:100%;min-height:40px;line-height:20px;font-size:16px;padding:0;border:none}.zjapp .item-textarea .rule{position:absolute;top:0;left:0;visibility:hidden;word-break:break-all}.zjapp .item-textarea .counter{text-align:right;margin:0 0 -5px 0;height:15px;line-height:15px;color:#b2b2b2;font-size:12px}",""])},"5e1b":function(t,e,a){"use strict";var i=a("329b"),r=(a("6d57"),a("e10e"),a("6bf2")),o=a.n(r);var n={name:"DatepickerDialog",components:{},mixins:[a("e89f").a],props:{},data:function(){return{show:!1,isLoading:!0,today:"",currentYear:"",currentMonth:"",currentDate:"",yearsList:[],monthsList:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],weeksList:["日","一","二","三","四","五","六"],showYearSelect:!1,showMonthSelect:!1,dayList:[]}},methods:{openPopup:function(t){this.value=!0,this.show=!0,this.from=t.from,this.to=t.to,this.inputDate=o()(t.inputDate).isValid()?o()(o()(t.inputDate).format("YYYY-MM-DD")):o()(o()().format("YYYY-MM-DD")),this.callback=t.callback,this.today=o()(o()().format("YYYY-MM-DD")).valueOf(),this.from?this.fromDate=o()(o()(this.from).format("YYYY-MM-DD")).valueOf():this.fromDate=0,this.to?this.toDate=o()(o()(this.to).format("YYYY-MM-DD")).valueOf():this.toDate=1/0,this.selctedDateEpoch=o()(o()(this.inputDate).format("YYYY-MM-DD")).valueOf(),this.refreshDateList(this.inputDate),this.$emit("open")},closePopup:function(){this.value=!1,this.show=!1,this.$emit("close")},closeSelectList:function(){this.showYearSelect=!1,this.showMonthSelect=!1},prevMonth:function(){this.currentDate=o()(this.currentDate).subtract(1,"month"),this.currentMonth=this.monthsList[this.currentDate.month()],this.currentYear=this.currentDate.year(),this.refreshDateList(this.currentDate)},nextMonth:function(){this.currentDate=o()(this.currentDate).add(1,"month"),this.currentMonth=this.monthsList[this.currentDate.month()],this.currentYear=this.currentDate.year(),this.refreshDateList(this.currentDate)},selectYear:function(){this.showYearSelect=!this.showYearSelect,this.showMonthSelect=!1},setYear:function(t){this.currentYear=t,this.yearChanged(t),this.showYearSelect=!1},selectMonth:function(){this.showYearSelect=!1,this.showMonthSelect=!this.showMonthSelect},setMonth:function(t){this.currentMonth=t,this.monthChanged(t),this.showMonthSelect=!1},dateSelected:function(t){t&&0!==Object.keys(t).length&&(this.selctedDateEpoch=t.epoch,this.callback(this.selctedDateEpoch),this.closePopup())},monthChanged:function(t){var e=this.monthsList.indexOf(t);this.currentDate.month(e),this.refreshDateList(this.currentDate)},yearChanged:function(t){this.currentDate.year(t),this.refreshDateList(this.currentDate)},refreshDateList:function(t){var e=[];this.isLoading=!0,t=o()(o()(t).format("YYYY-MM-DD")),this.currentDate=t,this.currentYear="",this.currentMonth="";var a,i,r=this.currentDate.daysInMonth();this.yearsList=function(t,e){var a=[],i=2015,r=2100;i=t?o()(t).year():i,r=e?o()(e).year():r;for(var n=i;n<=r;n++)a.push(n);return a}(),this.dayList=[];var n=o()(this.currentDate).startOf("month").day();this.firstDayEpoch=o()(this.currentDate).startOf("month").valueOf(),this.lastDayEpoch=o()(this.currentDate).endOf("month").startOf("day").valueOf();for(var s=1;s<=r;s++)i=(a=o()(this.currentDate).date(s)).valueOf()<this.fromDate||a.valueOf()>this.toDate,e.push({date:a.date(),month:a.month(),year:a.year(),day:a.day(),epoch:a.valueOf(),disabled:i}),this.dayList=e;for(var l=0;l<n;l++)this.dayList.unshift({});this.rows=[0,7,14,21,28,35],this.cols=[0,1,2,3,4,5,6],this.currentMonth=this.monthsList[t.month()],this.currentYear=this.currentDate.year(),this.numColumns=7,this.isLoading=!1}}},s=(a("80d8"),a("17cc")),l=Object(s.a)(n,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("transition",{attrs:{name:"slide-right"}},[t.show?a("page-content",{attrs:{mode:"dialog",title:"选择日期","on-close":t.closePopup},on:{click:function(e){t.closeSelectList()}}},[t.isLoading?t._e():a("div",{staticClass:"datepicker-hd"},[a("div",{class:{"datepicker-prev":!0,disabled:t.firstDayEpoch-864e5<t.fromDate},on:{click:t.prevMonth}},[a("icon",{attrs:{name:"arrow-left"}})],1),a("div",{staticClass:"datepicker-hd-center"},[a("div",{staticClass:"datepicker-year",on:{click:function(e){return e.stopPropagation(),t.selectYear(e)}}},[t._v("\n          "+t._s(t.currentYear)+"\n\n          "),a("transition",{attrs:{name:"spread"}},[t.showYearSelect?a("div",{staticClass:"select-list",on:{click:function(t){t.stopPropagation()}}},t._l(t.yearsList,(function(e,i){return a("div",{key:i,class:{"select-item":!0,"item-selected":t.currentYear===e},on:{click:function(a){t.setYear(e)}}},[t._v("\n                "+t._s(e)+"\n              ")])}))):t._e()])],1),a("div",{staticClass:"datepicker-month",on:{click:function(e){e.stopPropagation(),t.selectMonth()}}},[t._v("\n          "+t._s(t.currentMonth)+"\n          "),a("transition",{attrs:{name:"spread"}},[t.showMonthSelect?a("div",{staticClass:"select-list",on:{click:function(t){t.stopPropagation()}}},t._l(t.monthsList,(function(e,i){return a("div",{key:i,class:{"select-item":!0,"item-selected":t.currentMonth===e},on:{click:function(a){t.setMonth(e)}}},[t._v("\n                "+t._s(e)+"\n              ")])}))):t._e()])],1)]),a("div",{class:{"datepicker-next":!0,disabled:t.lastDayEpoch+864e5>t.toDate},on:{click:t.nextMonth}},[a("icon",{attrs:{name:"arrow-right"}})],1)]),t.isLoading?t._e():a("div",{staticClass:"calendar"},[a("div",{staticClass:"weeks-row"},t._l(t.weeksList,(function(e,i){return a("div",{key:i,staticClass:"weeks-cell"},[t._v("\n          "+t._s(e)+"\n        ")])}))),t._l(t.rows,(function(e,i){return a("div",{key:i,staticClass:"date-row"},t._l(t.cols,(function(i,r){return a("div",{key:r,staticClass:"date-cell",class:{"date-cell-selected":t.dayList[e+i]&&t.dayList[e+i].epoch===t.selctedDateEpoch,today:t.dayList[e+i]&&t.dayList[e+i].epoch===t.today,disabled:t.dayList[e+i]&&t.dayList[e+i].disabled},on:{click:function(a){t.dateSelected(t.dayList[e+i])}}},[t._v("\n          "+t._s(t.dayList[e+i]&&t.dayList[e+i].date)+"\n        ")])})))}))],2)]):t._e()],1)}),[],!1,null,"0a266c44",null).exports,c=!1;c||(c=new(i.default.extend(l))({el:document.createElement("div")}),document.body.appendChild(c.$el));e.a=c},"5f65":function(t,e,a){var i=a("cfe4");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);(0,a("85cb").default)("26d3a65a",i,!0,{sourceMap:!1,shadowMode:!1})},"65af8":function(t,e,a){"use strict";a.d(e,"a",(function(){return i}));var i={OVERDUE_UNFINISHED:"逾期未完成",UNFINISHED:"未完成",OVERDUE_FINISHED:"逾期完成",FINISHED:"按时完成"}},"6e43":function(t,e,a){"use strict";(function(t){a("163d");var i=a("07d2"),r=a("774b"),o=a("cd05"),n=a("242a"),s=a("e68e"),l=a("3c64"),c=a("5e1b"),d=a("da1c"),p=a("f97c"),u=a("dd33"),h=a("7136"),m=a("6bf2"),f=a.n(m),g=a("3bd5"),b=a("c745"),v=a("1b7e"),D=a("e2a7"),x=a("3c6d"),_=a("47b1"),k=a("65af8");e.a={name:"SchedulePlanDetail",components:{item:i.default,Scroller:r.default,UserSelect:o.a,Checkbox:n.a,ItemImgList:s.a,ItemTextarea:l.a,ProblemDetailHeader:d.default},data:function(){return{SCHEDULE_PLAN_STATUS:k.a,isLoading:!0,currentProject:"",nodeId:"",fromReport:0,curUser:g.a.getUser(),detailData:{},reportData:{},isInCharge:!1,allowReport:!1,allowModifyCompleteTime:!1,isSystem:!1,isReview:!1,showLog:!1,showProcessLink:!1,erpNeedReport:!1,isFinishCondition:!1,lastProcess:50,processBarDisabled:!1,currentDate:"",editableCompleteTime:!1}},computed:{completeDate:function(){if(this.detailData&&this.detailData.complete_time){var t="";return t+=this.dateFormat(this.detailData.complete_time,"YYYY-MM-DD"),(this.detailData.leftday||this.detailData.overday)&&(t+="，",t+=this.detailData.leftday||this.detailData.overday),t}return"暂未完成"},currentStatus:function(){if(this.detailData.complete_time){if(this.detailData.complete_time>this.detailData.deadline)return k.a.OVERDUE_FINISHED;if(this.detailData.complete_time<=this.detailData.deadline)return k.a.FINISHED}else{if(this.currentDate>this.detailData.deadline)return k.a.OVERDUE_UNFINISHED;if(this.currentDate<=this.detailData.deadline)return k.a.UNFINISHED}return""},showNodeFinishCheckbox:function(){return this.allowReport&&!this.detailData.conditions_checkitem&&!this.isFinishCondition}},activated:function(){this.currentProject=p.a.getDefaultProject(),this.nodeId=this.$route.params.id,this.fromReport=!!this.$route.params.fromReport,this.currentDate=f()(new Date).format("YYYY-MM-DD"),this.reportData={pictures:[],progress:50,remark:"",complete_time:"",schedule_plan_detail_id:this.nodeId,isComplete:!1,expect_complete_time:""},this.init()},methods:{init:function(){var t=this;return this.getDetail().then((function(){return t.getPermission()})).then((function(){return t.getSettingWithCompleteTime()})).then((function(){t.isLoading=!1})).catch((function(t){console.error(t)}))},getDetail:function(){var e=this;return h.a.getScheduleView(this.nodeId).then((function(a){e.isFinishCondition=t.some(a.task,(function(t){return Number(t.is_finish_condition)})),e.erpNeedReport="0"===a.is_allow_report&&"erp"===a.source,e.detailData=a,e.reportData.progress=-1===Number(a.progress)?50:Number(a.progress),e.reportData.expect_complete_time=a.expect_complete_time||"",e.lastProcess=e.reportData.progress}))},getPermission:function(){var e=this;return t.isEmpty(this.detailData)?Promise.resolve():(this.isInCharge=!t.isEmpty(this.detailData.in_charge_by)&&this.detailData.in_charge_by.id===this.curUser.user_id,this.allowModifyCompleteTime=this.$store.state.user.isSuper,this.allowReport=this.isInCharge&&!this.detailData.complete_time&&!this.fromReport,this.isSystem=!!parseInt(this.detailData.is_system),this.isReview=t.filter(this.detailData.checker,(function(t){return t.id===e.curUser.user_id&&"待审核"===t.status&&"待审核"===e.detailData.status})).length>0,this.showLog=this.detailData.checker.length>0&&t.filter(this.detailData.report,(function(t){return"已完成"===t.status})).length>0,b.a.checkModulePermission("process").then((function(t){e.showProcessLink=t})))},modifyCompleteDate:function(){var t=this;this.detailData.complete_time&&this.allowModifyCompleteTime&&c.a.openPopup({to:f()().toDate(),inputDate:this.detailData.complete_time?f()(this.detailData.complete_time).toDate():f()().toDate(),callback:function(e){return t.detailData.complete_time=f()(e).format("YYYY-MM-DD"),t.reportData.complete_time=f()(e).format("YYYY-MM-DD"),h.a.saveCompleteDate(t.detailData).then((function(){D.a.alert("修改成功"),setTimeout((function(){t.init()}),200)}))}})},selectReportDate:function(){var t=this;this.editableCompleteTime&&c.a.openPopup({to:f()().toDate(),inputDate:f()(this.reportData.complete_time).toDate(),callback:function(e){t.reportData.complete_time=f()(e).format("YYYY-MM-DD")}})},selectExpectCompleteDate:function(){var t=this;c.a.openPopup({inputDate:f()(this.reportData.expect_complete_time).toDate(),callback:function(e){t.reportData.expect_complete_time=f()(e).format("YYYY-MM-DD")}})},dateFormat:function(t,e){return f()(t).format(e)},submit:function(){var e=this;if(this.erpNeedReport)D.a.alert("此节点只允许在明源云ERP中汇报");else if(t.isEmpty(this.reportData.remark))D.a.alert("补充说明必填");else{if(!this.reportData.isComplete||this.reportData.complete_time)return D.a.confirm("提交后不可修改，确认提交？",null,{okText:"提交"}).then((function(a){if(a){var i=t.clone(e.reportData);return e.isFinishCondition&&(i.complete_time="",i.isComplete=!1),h.a.submitReport(i).then((function(){e.$router.go(-1)}))}})).catch((function(t){D.a.alert(t)}));D.a.alert("完成时间必填")}},back:function(){var t=this;x.a.openPopup({id:this.detailData.id,callback:function(){t.isLoading=!0,t.init()}})},pass:function(){var t=this;return v.a.getHasNetwork().then((function(t){if(t)return D.a.confirm("确认通过？",{okText:"通过",cancelText:"取消"});D.a.alert("当前无网络")})).then((function(e){if(e)return h.a.reviewRequest(t.detailData.id,1).then((function(){t.isLoading=!0,t.init()})).catch((function(t){D.a.alert(t)}))}))},viewLog:function(){_.a.openPopup({id:this.detailData.id})},gotoImageProcess:function(){this.$router.push({path:"/image-process-index",query:{proj_id:this.detailData.proj_id}})},gotoCheckAccept:function(){this.$store.commit("global/SET_CURRENT_REPORT_PROJECT",this.currentProject),u.a.selectProject(),this.$router.push("/report/process-new/project-index")},gotoMeasure:function(){this.$store.commit("global/SET_CURRENT_REPORT_PROJECT",this.currentProject),u.a.selectProject(),this.$router.push("/report-measure")},progressChange:function(t){if(this.reportData.progress=t,this.reportData.isComplete=100===t,100===t)if(this.editableCompleteTime)this.reportData.complete_time=f()().format("YYYY-MM-DD");else{var e=h.a.getServerTime();this.reportData.complete_time=f()(e).format("YYYY-MM-DD")}console.log(this.reportData)},nodeCompleteChange:function(t){if(t){if(this.editableCompleteTime)this.reportData.complete_time=f()().format("YYYY-MM-DD");else{var e=h.a.getServerTime();this.reportData.complete_time=f()(e).format("YYYY-MM-DD"),console.log({serverTime:e})}this.reportData.progress=100}else this.reportData.progress=this.lastProcess},goTask:function(t){this.$router.push({name:"SchedulePlanDetailTask",params:{id:t.id},query:{fromWorkbench:"homepage"}})},getSettingWithCompleteTime:function(){var t=this;return h.a.getSettingWithCompleteTime().then((function(e){t.editableCompleteTime="2"!==e}))}}}}).call(this,a("391c"))},7136:function(t,e,a){"use strict";(function(t){a("5ab2"),a("6d57"),a("e10e");var i=a("28f8"),r=(a("cc57"),a("fd50")),o=a("1b7e"),n=a("e2a7"),s=a("3bd5"),l=a("3122"),c=a("c745"),d=a("6bf2"),p=a.n(d),u=a("9cd1");function h(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,i)}return a}function m(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?h(Object(a),!0).forEach((function(e){Object(i.a)(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):h(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var f={getSchedulePlanList:function(t){return c.a.hasRole(170).then((function(e){return e?o.a.getHasNetwork().then((function(t){if(!t)return Promise.reject({errmsg:"当前无网络连接"})})).then((function(){return Object(u.g)({proj_id:t})})):[]}))},setOverTime:function(t){var e=p()().startOf("day");if(t.is_overtime=!1,!t.deadline)return t.leftday="",void(t.overday="");var a=p()(t.deadline).startOf("day");if(t.complete_time){t.leftday="";var i,r,o=p()(t.complete_time).startOf("day");o.isAfter(a)?(i=o.diff(a,"days"),t.overday="超时"+i+"天",t.is_overtime=!0):a.isAfter(o)?(i=a.diff(o,"days"),t.overday="提前"+i+"天"):t.overday="按时完成"}else e.isAfter(a)?(t.leftday="",i=e.diff(a,"days"),t.overday="超时"+i+"天",t.is_overtime=!0):(t.overday="",r=a.diff(e,"days"),t.leftday=0===r?"今天":r<=7?"还剩"+r+"天":"")},getNodeList:function(e){return o.a.getHasNetwork().then((function(t){if(!t)return Promise.reject({errmsg:"当前无网络连接"})})).then((function(){return Object(u.f)({plan_id:e})})).then((function(e){var a=s.a.getUser();return t.each(e,(function(t){t.canReport=t.in_charge_by===a.user_id&&!t.complete_time&&"待汇报"===t.status})),e})).then((function(e){return t.each(e,(function(t,e){f.setOverTime(t),t.node_status="已完成"===t.status?"finish":"0"!==t.report_count?"doing":"pending"})),e}))},getScheduleView:function(e){return o.a.getHasNetwork().then((function(t){if(!t)return n.a.alert("当前无网络连接")})).then((function(){return Object(u.d)({detail_id:e})})).then((function(e){return e?(f.setOverTime(e),e.in_charge_by={is_im_user:e.is_im_user,id:e.in_charge_by,name:e.in_charge_by_name,mobile:e.mobile,headimg_url:e.headimg_url},t.each(e.report,(function(t){t.user={is_im_user:t.is_im_user,id:t.id,name:t.name,mobile:t.mobile,headimg_url:t.headimg_url},t.pictures=JSON.parse(t.pictures||"[]")})),e.reports=e.report,e):e}))},submitReport:function(e){var a=[];return t.isEmpty(e.remark)?r.a.reject({msg:"请填写补充说明"}):e.isComplete&&!e.complete_time?r.a.reject({msg:"请选择完成时间"}):o.a.getHasNetwork().then((function(t){if(!t)return n.a.alert("当前无网络连接")})).then((function(){return t.each(e.pictures,(function(t){!t.url&&t.temp?a.push(l.a.uploadImage(t.temp).then((function(e){t.url=e,delete t.temp}))):delete t.temp,!t.video_url&&t.videoTemp?a.push(l.a.uploadImage(t.videoTemp).then((function(e){t.video_url=e,delete t.videoTemp}))):delete t.videoTemp})),r.a.all(a).then((function(){var a=[];t.each(e.pictures,(function(t){var e=m(m({},t),{},{videoUrl:t.video_url||""});delete e.video_url,a.push(e)})),e.pictures=a}))})).then((function(){var t={detail_id:e.schedule_plan_detail_id,pictures:JSON.stringify(e.pictures),remark:e.remark,progress:e.progress,expect_complete_time:e.expect_complete_time};return e.isComplete&&e.complete_time&&(t.is_complete=1,t.complete_time=e.complete_time),console.log("saveReport...",e,t),Object(u.l)(t)})).catch((function(t){n.a.alert(t)}))},saveCompleteDate:function(t){return o.a.getHasNetwork().then((function(t){if(!t)return n.a.alert("当前无网络连接")})).then((function(){var e={detail_id:t.id,complete_time:t.complete_time};return Object(u.k)(e)}))},backPlan:function(e){var a=r.a.defer(),i=a.promise,o=[],s=$rootScope.$new();return s.closeModal=function(){s.modal.remove()},$ionicModal.fromTemplateUrl("templates/schedule-plan/back.html?v=20190624",{scope:s,animation:"slide-in-right"}).then((function(t){s.modal=t,s.modal.show()})),s.returnData={img:[],mark:""},s.setReturn=function(){if(s.returnData.mark)return t.each(s.returnData.img,(function(t){!t.url&&t.temp?o.push(l.a.uploadImage(t.temp).then((function(e){t.url=e,delete t.temp}))):delete t.temp,!t.video_url&&t.videoTemp?o.push(l.a.uploadImage(t.videoTemp).then((function(e){t.video_url=e,delete t.videoTemp}))):delete t.videoTemp})),r.a.all(o).then((function(){var e=[];t.each(s.returnData.img,(function(t){var a=m(m({},t),{},{videoUrl:t.video_url||""});delete a.video_url,e.push(a)})),s.returnData.img=e})).then((function(){s.closeModal(),f.reviewRequest(e,2,s.returnData).then((function(){a.resolve()})).catch((function(t){a.reject(t)}))}));n.a.alert("补充说明必填")},i},reviewRequest:function(t,e,a){var i={};return 1===parseInt(e)?(i.detail_id=t,i.is_review=e):(i.detail_id=t,i.is_review=e,i.pictures=a.img,i.remark=a.remark),Object(u.j)(i)},logList:function(t){return o.a.getHasNetwork().then((function(t){if(!t)return n.a.alert("当前无网络连接")})).then((function(){return Object(u.b)({detail_id:t})}))},viewLog:function(e){var a=$rootScope.$new();return a.closeModal=function(){a.modal.remove()},a.list=[],a.isLoading=!0,$ionicModal.fromTemplateUrl("templates/schedule-plan/log.html?v=20190624",{scope:a,animation:"slide-in-right"}).then((function(t){a.modal=t,a.modal.show()})),a.returnData={img:[],mark:""},a.setReturn=function(){a.returnData.mark?(f.reviewRequest(detail_id,!1,returnData),a.closeModal()):n.a.alert("补充说明必填")},f.logList(e).then((function(e){t.each(e,(function(t){t.checker={is_im_user:parseInt(t.is_im_user),id:t.id,name:t.name,mobile:parseInt(t.mobile),headimg_url:t.headimg_url},t.image_file=JSON.parse(t.image_file||"[]")})),a.list=e,a.isLoading=!1}))},schedulePlanNodeList:function(t){return Object(u.e)({plan_id:t})},getSettingWithCompleteTime:function(){return Object(u.c)()},getServerTime:function(){return l.a.getServerTime()}};e.a=f}).call(this,a("391c"))},"755b":function(t,e,a){(t.exports=a("690e")(!1)).push([t.i,".zjapp .problem-detail-header[data-v-1894f361]{display:flex;align-items:center;justify-content:center;height:40px;padding:0 15px;line-height:40px;background-color:#f2f2f2}.zjapp .problem-detail-header .status[data-v-1894f361]{flex:1;height:16px;line-height:16px;border-left:5px solid #ddd;padding-left:5px;color:#111;font-size:16px}.zjapp .problem-detail-header .status-red[data-v-1894f361]{border-color:#ff3d3d}.zjapp .problem-detail-header .status-blue[data-v-1894f361]{border-color:#4275e8}.zjapp .problem-detail-header .status-green[data-v-1894f361]{border-color:#0bc666}.zjapp .problem-detail-header .status-orange[data-v-1894f361]{border-color:#fc8b01}.zjapp .problem-detail-header .status-black[data-v-1894f361]{border-color:#333}.zjapp .problem-detail-header .status-gray[data-v-1894f361]{border-color:#999}.zjapp .problem-detail-header .return[data-v-1894f361],.zjapp .problem-detail-header .timeout[data-v-1894f361],.zjapp .problem-detail-header .urgent[data-v-1894f361]{display:block;padding:0 5px;margin-left:6px;height:16px;line-height:16px;color:#fff;font-size:12px;border-radius:2px;-webkit-border-radius:2px}.zjapp .problem-detail-header .urgent[data-v-1894f361]{background-color:#ff3d3d}.zjapp .problem-detail-header .timeout[data-v-1894f361]{background-color:#954cfe}.zjapp .problem-detail-header .return[data-v-1894f361]{background-color:#fc8b01}.zjapp .problem-detail-header .operat[data-v-1894f361]{height:40px;line-height:40px;white-space:nowrap;font-size:16px;color:#6b7ba9}",""])},"75b9":function(t,e,a){var i=a("e5a0");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);(0,a("85cb").default)("417e698a",i,!0,{sourceMap:!1,shadowMode:!1})},"80d8":function(t,e,a){"use strict";a("e60b")},"9cd1":function(t,e,a){"use strict";a.d(e,"h",(function(){return n})),a.d(e,"m",(function(){return s})),a.d(e,"g",(function(){return l})),a.d(e,"f",(function(){return c})),a.d(e,"d",(function(){return d})),a.d(e,"l",(function(){return p})),a.d(e,"k",(function(){return u})),a.d(e,"j",(function(){return h})),a.d(e,"b",(function(){return m})),a.d(e,"e",(function(){return f})),a.d(e,"c",(function(){return g})),a.d(e,"i",(function(){return b})),a.d(e,"a",(function(){return v}));var i=a("5e8d"),r=a("162a"),o=a("bcc78");function n(t){return Object(i.a)().then((function(){var e=o.a.schedulePlanTaskInfo.url;return r.a.request(e,t)}))}function s(t){return Object(i.a)().then((function(){var e=o.a.schedulePlanSaveTask.url;return r.a.post(e,null,t)}))}function l(t){return Object(i.a)().then((function(){var e=o.a.schedulePlanPlanList.url;return r.a.request(e,t)}))}function c(t){return Object(i.a)().then((function(){var e=o.a.schedulePlanNodeList.url;return r.a.request(e,t)}))}function d(t){return Object(i.a)().then((function(){var e=o.a.schedulePlanNodeInfo.url;return r.a.request(e,t)}))}function p(t){return Object(i.a)().then((function(){var e=o.a.schedulePlanSaveReport.url;return r.a.post(e,null,t)}))}function u(t){return Object(i.a)().then((function(){var e=o.a.schedulePlanSaveCompleteTime.url;return r.a.post(e,null,t)}))}function h(t){return Object(i.a)().then((function(){var e=o.a.schedulePlanSaveChecker.url;return r.a.post(e,null,t)}))}function m(t){return Object(i.a)().then((function(){var e=o.a.schedulePlanCheckerLogList.url;return r.a.request(e,t)}))}function f(t){return Object(i.a)().then((function(){var e=o.a.schedulePlanNodeLevel.url;return r.a.request(e,t)}))}function g(){return Object(i.a)().then((function(){var t=o.a.schedulePlanCompletedTimeSetting.url;return r.a.request(t)}))}function b(){return Object(i.a)().then((function(){var t=o.a.schedulePlanLeaderSchedulePlan.url;return r.a.request(t)}))}function v(t){return Object(i.a)().then((function(){var e=o.a.schedulePlanGetByFirstProject.url;return r.a.request(e,t)}))}},a828:function(t,e,a){"use strict";(function(t){a("6d57"),a("06a2");var i=a("07d2"),r=a("774b"),o=a("e68e"),n=a("3c64"),s=a("7136"),l=a("3122"),c=a("e2a7"),d=a("e89f");e.a={name:"SchedulePlanBack",components:{item:i.default,Scroller:r.default,ItemImgList:o.a,ItemTextarea:n.a},mixins:[d.a],data:function(){return{show:!1,backData:{img:[],remark:""},nodeId:""}},methods:{openPopup:function(t){this.nodeId=t.id,this.callback=t.callback,this.backData={img:[],remark:""},this.value=!0,this.show=!0,this.$emit("open")},closePopup:function(){this.value=!1,this.show=!1,this.$emit("close")},closeEvent:function(){this.closePopup()},submit:function(){var e=this,a=[];if(!t.isEmpty(this.backData.remark))return t.each(this.backData.img,(function(t){!t.url&&t.temp?a.push(l.a.uploadImage(t.temp).then((function(e){t.url=e,delete t.temp}))):delete t.temp,!t.video_url&&t.videoTemp?a.push(l.a.uploadImage(t.videoTemp).then((function(e){t.video_url=e,delete t.videoTemp}))):delete t.videoTemp})),Promise.all(a).then((function(){return e.backData.img=t.map(e.backData.img,(function(t){return{id:t.id,url:t.url,videoUrl:t.video_url||""}})),s.a.reviewRequest(e.nodeId,2,e.backData).then((function(){e.closePopup(),e.callback&&e.callback()})).catch((function(t){c.a.alert(t)}))}));c.a.alert("补充说明必填")}}}}).call(this,a("391c"))},c070:function(t,e,a){var i=a("574c");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);(0,a("85cb").default)("35590dcb",i,!0,{sourceMap:!1,shadowMode:!1})},c2d2:function(t,e,a){"use strict";a.r(e);var i=a("6e43").a,r=(a("26cb"),a("17cc")),o=Object(r.a)(i,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("page-content",{attrs:{title:t.fromReport?"节点汇报":"节点详情","show-go-root":!t.fromReport||"Report"}},[t.isLoading?t._e():a("scroller",[t.currentStatus?a("problem-detail-header",{staticClass:"bg-white",attrs:{status:t.currentStatus,"status-text":t.currentStatus}}):t._e(),a("item",{attrs:{label:"所属计划",text:t.detailData.schedule_plan_name}}),a("item",{attrs:{label:"节点级别",text:t.detailData.schedule_node_level_value}}),a("item",{attrs:{label:"节点名称",text:t.detailData.name}}),a("item",{attrs:{label:"计划开始",text:t.detailData.start_time?t.dateFormat(t.detailData.start_time,"YYYY-MM-DD"):""}}),a("item",{attrs:{label:"计划完成",text:t.detailData.deadline?t.dateFormat(t.detailData.deadline,"YYYY-MM-DD"):""}}),t.detailData.complete_time?t._e():a("item",{attrs:{label:"预计完成",text:t.detailData.expect_complete_time?t.dateFormat(t.detailData.expect_complete_time,"YYYY-MM-DD"):""}}),t.detailData.complete_time?a("item",{class:{"item-empty-tip":!t.detailData.complete_time},attrs:{label:"实际完成",editabled:t.detailData.complete_time&&t.allowModifyCompleteTime},on:{click:t.modifyCompleteDate}},[a("div",{staticClass:"item-text",attrs:{slot:"right"},slot:"right"},[t._v("\n        "+t._s(t.completeDate)+"\n      ")])]):t._e(),t.isSystem&&t.detailData.complete_time?a("item",{staticClass:"item-system-tip",attrs:{label:"",text:"系统导入"}}):t._e(),a("user-select",{attrs:{title:"主责人",mode:"view",editabled:!1},model:{value:t.detailData.in_charge_by,callback:function(e){t.$set(t.detailData,"in_charge_by",e)},expression:"detailData.in_charge_by"}}),t.detailData.checker&&t.detailData.checker.length?a("user-select",{attrs:{title:"审核人",multi:!0,mode:"view",editabled:!1},model:{value:t.detailData.checker,callback:function(e){t.$set(t.detailData,"checker",e)},expression:"detailData.checker"}}):t._e(),t.showLog?a("item",{staticClass:"item-log",attrs:{label:"",text:"审核日志"},on:{click:t.viewLog}}):t._e(),t.isInCharge?a("user-select",{attrs:{title:"抄送人",multi:!0,mode:"view",editabled:!1},model:{value:t.detailData.cc,callback:function(e){t.$set(t.detailData,"cc",e)},expression:"detailData.cc"}}):t._e(),t.detailData.reports&&t.detailData.reports.length?t._e():a("item",{staticClass:"item-empty-tip",attrs:{label:"进展汇报",text:"暂无汇报"}}),t.isInCharge?t._e():a("user-select",{attrs:{title:"抄送人",multi:!0,mode:"view",editabled:!1},model:{value:t.detailData.cc,callback:function(e){t.$set(t.detailData,"cc",e)},expression:"detailData.cc"}}),t.detailData.task&&t.detailData.task.length?a("div",{staticClass:"pb10"},[a("p",{staticClass:"item-task"},[t._v("相关任务")]),t._l(t.detailData.task,(function(e){return a("div",{key:e.id},[a("item",{attrs:{mode:"edit","icon-right":"arrow-right",label:e.name},on:{click:function(a){t.goTask(e)}}},[a("div",{staticClass:"item-text align-r",style:{color:e.status===t.SCHEDULE_PLAN_STATUS.UNFINISHED&&t.currentDate>e.deadline?"#FF3C46":"#666666"},attrs:{slot:"right"},slot:"right"},[t._v("\n            "+t._s(e.status===t.SCHEDULE_PLAN_STATUS.UNFINISHED?t.currentDate>e.deadline?t.SCHEDULE_PLAN_STATUS.OVERDUE_UNFINISHED:t.SCHEDULE_PLAN_STATUS.UNFINISHED:e.complete_time>e.deadline?t.SCHEDULE_PLAN_STATUS.OVERDUE_FINISHED:t.SCHEDULE_PLAN_STATUS.FINISHED)+"\n          ")])])],1)}))],2):t._e(),t.detailData.reports&&t.detailData.reports.length&&!t.isSystem?t._l(t.detailData.reports,(function(e,i){return a("item",{key:i,attrs:{label:i?"":"进展汇报"}},[a("div",{staticClass:"item-con",attrs:{slot:"right"},slot:"right"},[e.remark?a("p",{staticClass:"item-text"},[t._v(t._s(e.remark))]):t._e(),e.pictures&&e.pictures.length?a("item-img-list",{attrs:{editabled:!1,"online-mode":!0},model:{value:e.pictures,callback:function(a){t.$set(e,"pictures",a)},expression:"report.pictures"}}):t._e(),a("p",{staticClass:"item-text color-light"},[t._v("\n            "+t._s(t.dateFormat(e.report_on,"YYYY-MM-DD HH:mm"))+"\n          ")]),a("p",{directives:[{name:"show",rawName:"v-show",value:-1!==Number(e.progress),expression:"Number(report.progress) !== -1"}],staticClass:"color-light",staticStyle:{"line-height":"14px"}},[t._v("\n            节点进度："+t._s(e.progress||0)+"%\n          ")])],1)])})):t._e(),t.allowReport?a("div",{staticClass:"bg-white mt10"},[a("item",{attrs:{border:"bottom"}},[a("item-img-list",{attrs:{maxlength:15,"online-mode":!0},model:{value:t.reportData.pictures,callback:function(e){t.$set(t.reportData,"pictures",e)},expression:"reportData.pictures"}})],1),a("item",{staticClass:"item-van-slider",attrs:{border:"bottom"}},[a("p",{staticClass:"color-gray"},[t._v("节点进度")]),a("div",{staticClass:"van-slider-wrap",on:{touchstart:function(t){t.stopPropagation()},touchend:function(t){t.stopPropagation()}}},[a("van-slider",{attrs:{step:5},on:{change:t.progressChange},model:{value:t.reportData.progress,callback:function(e){t.$set(t.reportData,"progress",e)},expression:"reportData.progress"}},[a("div",{staticClass:"custom-button",attrs:{slot:"button"},slot:"button"})]),a("span",{staticClass:"percent",class:{disabled:t.reportData.isComplete}},[t._v(t._s(t.reportData.progress)+"%")])],1)]),a("item-textarea",{staticClass:"border-none",attrs:{placeholder:"补充说明(必填)"},model:{value:t.reportData.remark,callback:function(e){t.$set(t.reportData,"remark",e)},expression:"reportData.remark"}})],1):t._e(),t.showNodeFinishCheckbox?a("checkbox",{staticClass:"p15",attrs:{text:"节点已完成",type:"square"},on:{change:t.nodeCompleteChange},model:{value:t.reportData.isComplete,callback:function(e){t.$set(t.reportData,"isComplete",e)},expression:"reportData.isComplete"}}):t._e(),t.allowReport&&(t.isFinishCondition||!t.isFinishCondition&&!t.reportData.isComplete)?a("item",{class:t.showNodeFinishCheckbox?"":"mt10",attrs:{label:"预计完成",text:t._f("formatDate")(t.reportData.expect_complete_time||"","YYYY-MM-DD"),mode:"edit"},on:{click:t.selectExpectCompleteDate}}):t._e(),t.reportData.isComplete&&!t.isFinishCondition?a("item",{attrs:{label:"实际完成",text:t._f("formatDate")(t.reportData.complete_time||new Date,"YYYY-MM-DD"),editabled:t.editableCompleteTime,mode:"edit"},on:{click:t.selectReportDate}}):t._e(),t.fromReport||!t.allowReport&&!t.isReview?a("div",{staticClass:"schedule-links"},[a("span",{staticClass:"schedule-links-label"},[t._v("相关查阅")]),a("app-button",{attrs:{type:"skip"},on:{click:t.gotoImageProcess}},[t._v("形象进度")]),t.showProcessLink?a("app-button",{attrs:{type:"skip"},on:{click:t.gotoCheckAccept}},[t._v("工序移交")]):t._e(),a("app-button",{attrs:{type:"skip"},on:{click:t.gotoMeasure}},[t._v("实测实量")])],1):t._e()],2),!t.isLoading&&t.allowReport?a("app-button-group",{attrs:{"fixed-bottom":""}},[a("app-button",{attrs:{"disable-need-click":t.erpNeedReport},on:{click:t.submit}},[t._v("提交")])],1):t._e(),t.isLoading||!t.isReview||t.fromReport?t._e():a("app-button-group",{attrs:{"fixed-bottom":"",seamless:""}},[a("app-button",{staticStyle:{width:"50%"},attrs:{type:"warning",plain:""},on:{click:t.back}},[t._v("退回")]),a("app-button",{on:{click:t.pass}},[t._v("通过")])],1),a("loading-status",{attrs:{"is-loading":t.isLoading}})],1)}),[],!1,null,"3046f55f",null);e.default=o.exports},cf0c:function(t,e,a){var i=a("2305");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);(0,a("85cb").default)("663ba995",i,!0,{sourceMap:!1,shadowMode:!1})},cf0d:function(t,e,a){(t.exports=a("690e")(!1)).push([t.i,'.zjapp .layout-main[data-v-0a266c44] .layout-content{overflow:auto}.zjapp .datepicker-hd[data-v-0a266c44]{display:flex;text-align:center;padding:5px 5px 15px 5px}.zjapp .datepicker-hd-center[data-v-0a266c44]{flex:1;display:flex;padding:10px 5px}.zjapp .datepicker-month[data-v-0a266c44],.zjapp .datepicker-year[data-v-0a266c44]{position:relative;flex:1;border:none;border-bottom:1px solid #4374ea;padding:0;line-height:26px;font-size:14px;text-align:center}.zjapp .datepicker-month[data-v-0a266c44]{margin-left:10px}.zjapp .datepicker-month[data-v-0a266c44]:after,.zjapp .datepicker-year[data-v-0a266c44]:after{position:absolute;top:50%;right:5px;margin-top:-3px;width:0;height:0;border-top:5px solid;border-right:5px solid transparent;border-left:5px solid transparent;content:"";pointer-events:none;color:#4374ea}.zjapp .datepicker-next[data-v-0a266c44],.zjapp .datepicker-prev[data-v-0a266c44]{width:10%;padding:10px 5px;font-size:24px;color:#4374ea}.zjapp .select-list[data-v-0a266c44]{position:absolute;top:27px;left:0;width:100%;max-height:380px;overflow:auto;background-color:#fff;box-shadow:0 0 5px #333}.zjapp .select-item[data-v-0a266c44]{padding:5px;height:38px;line-height:28px}.zjapp .item-selected[data-v-0a266c44]{background-color:#4374ea;color:#fff}.zjapp .weeks-row[data-v-0a266c44]{padding:5px;display:flex}.zjapp .weeks-cell[data-v-0a266c44]{flex:1;line-height:20px;text-align:center;font-size:14px;font-weight:700}.zjapp .date-row[data-v-0a266c44]{padding:0 5px;display:flex}.zjapp .date-cell[data-v-0a266c44]{flex:1;height:50px;line-height:50px;text-align:center;font-size:14px}.zjapp .date-cell-selected[data-v-0a266c44]{background-color:#4374ea;color:#fff;font-weight:700}.zjapp .date-cell.today[data-v-0a266c44]{border:1px solid #4374ea}.zjapp .disabled[data-v-0a266c44]{pointer-events:none;color:#aaa}',""])},cfe4:function(t,e,a){var i=a("5454");(t.exports=a("690e")(!1)).push([t.i,".zjapp .item-empty-tip[data-v-3046f55f] .item-text{color:#b2b2b2}.zjapp .item-system-tip[data-v-3046f55f]{padding-top:0}.zjapp .item-system-tip[data-v-3046f55f] .item-text{color:#b2b2b2;padding:0}.zjapp .item-log[data-v-3046f55f]{padding-top:0}.zjapp .item-log[data-v-3046f55f] .item-text{padding:0;color:#4275e8;font-size:14px}.zjapp .schedule-links[data-v-3046f55f]{padding:10px 15px;text-align:center;font-size:0}.zjapp .schedule-links-label[data-v-3046f55f]{display:inline-block;vertical-align:top;height:22px;line-height:22px;margin-right:8px;color:#999;font-size:12px}.zjapp .app-btn-skip[data-v-3046f55f]{margin-right:8px}.zjapp .item-text>.task[data-v-3046f55f]{display:flex;margin:0 0 10px}.zjapp .item-text>.task .circle[data-v-3046f55f]{display:block;flex:0 0 16px;width:16px;height:16px;margin:2px 5px 0 0;line-height:16px;text-align:center;color:#fff;background:#b9ceff;border-radius:50%;font-size:12px}.zjapp .item-text>.tips[data-v-3046f55f]{color:#ff3c46;font-size:12px}.zjapp .item.item-van-slider[data-v-3046f55f]{display:block}.zjapp .item.item-van-slider .van-slider-wrap[data-v-3046f55f]{display:flex;align-items:center;width:100%;margin:35px 0 20px}.zjapp .item.item-van-slider .van-slider-wrap .van-slider[data-v-3046f55f]{flex:1}.zjapp .item.item-van-slider .van-slider-wrap .custom-button[data-v-3046f55f]{background:url("+i(a("10e9"))+") no-repeat 50%;background-size:cover;box-shadow:0 1px 8px 0 rgba(77,125,255,.32);border:none;border-radius:104px;width:24px;height:24px}.zjapp .item.item-van-slider .van-slider-wrap .percent[data-v-3046f55f]{flex:0 0 30px;text-align:right;color:#666;font-size:12px;margin:0 0 0 20px}.zjapp .item.item-van-slider .van-slider-wrap .percent.disabled[data-v-3046f55f]{color:#999}.zjapp .item-task[data-v-3046f55f]{font-size:12px;color:#999;padding:10px 0 5px 15px}",""])},da1c:function(t,e,a){"use strict";a.r(e);a("163d");var i=a("65a8"),r={name:"ProblemHeader",props:{status:{type:String,default:""},statusText:{type:String,default:""},level:{type:String,default:""},isTimeout:{type:Boolean,default:!1},sentBackTimes:{type:[Number,String],default:0}},data:function(){return{edOptions:{}}},created:function(){var t=this;i.a.getOptions("紧急程度").then((function(e){t.edOptions=e}))}},o=(a("14dd"),a("17cc")),n=Object(o.a)(r,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",t._g({staticClass:"problem-detail-header border-bottom"},t.$listeners),[a("div",{staticClass:"status",class:{"待整改":"status-red","不合格":"status-red","已退回":"status-red","待复验":"status-orange","已放水待验收":"status-orange","检查中":"status-orange","待验收":"status-orange","已通过":"status-green","已整改":"status-green","已提交":"status-green","合格":"status-green","检查完毕":"status-green","已验收":"status-green","已关闭":"status-black","进度正常":"status-green","进度滞后":"status-red","验收中":"status-orange","已抽验":"status-green","逾期未完成":"status-red","未完成":"status-orange","逾期完成":"status-green","按时完成":"status-green"}[t.status]},[t._v(t._s(t.statusText||t.status))]),"紧急"===t.level||"特急"===t.level?a("span",{staticClass:"urgent"},[t._v(t._s(t.edOptions[t.level]))]):t._e(),t.isTimeout?a("span",{staticClass:"timeout"},[t._v("超时")]):t._e(),t.sentBackTimes>0?a("span",{staticClass:"return"},[t._v("退回"+t._s(t.sentBackTimes)+"次")]):t._e(),t._t("operat")],2)}),[],!1,null,"1894f361",null);e.default=n.exports},e5a0:function(t,e,a){(t.exports=a("690e")(!1)).push([t.i,'.zjapp .checkbox[data-v-afcfdff2]{font-size:14px;line-height:20px}.zjapp .icon[data-v-afcfdff2]{vertical-align:top;margin-top:1px;margin-right:7px}.zjapp .semiCheckbox[data-v-afcfdff2]{font-family:Chinese Quote,-apple-system,BlinkMacSystemFont,Segoe UI,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Helvetica Neue,Helvetica,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol;font-size:14px;font-variant:tabular-nums;line-height:1.5;color:rgba(0,0,0,.65);box-sizing:border-box;margin:0;padding:0;list-style:none;white-space:nowrap;cursor:pointer;outline:none;display:inline-block;line-height:1;position:relative;vertical-align:middle}.zjapp .semiCheckbox-inner[data-v-afcfdff2]{position:relative;top:0;left:0;display:block;width:18px;height:18px;border:1px solid #d9d9d9;border-radius:2px;background-color:#fff;transition:all .3s}.zjapp .semiCheckbox-indeterminate .semiCheckbox-inner[data-v-afcfdff2]:after{content:" ";transform:translate(-50%,-50%) scale(1);border:0;left:50%;top:50%;width:8px;height:8px;background-color:#4275e8;opacity:1}.zjapp .semiCheckbox-inner[data-v-afcfdff2]:after{transform:rotate(45deg) scale(0);position:absolute;left:5.57142857px;top:2.14285714px;display:table;width:5.71428571px;height:9.14285714px;border:2px solid #fff;border-top:0;border-left:0;content:" ";transition:all .1s cubic-bezier(.71,-.46,.88,.6),opacity .1s;opacity:0}.zjapp .semiCheckbox-checked .semiCheckbox-inner[data-v-afcfdff2]{background-color:#4275e8;border-color:#4275e8}.zjapp .semiCheckbox-checked .semiCheckbox-inner[data-v-afcfdff2]:after{transform:rotate(45deg) scale(1);position:absolute;display:table;border:2px solid #fff;border-top:0;border-left:0;content:" ";transition:opacity .2s cubic-bezier(.12,.4,.29,1.46) .1s;opacity:1}',""])},e60b:function(t,e,a){var i=a("cf0d");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);(0,a("85cb").default)("1be2b028",i,!0,{sourceMap:!1,shadowMode:!1})}}]);