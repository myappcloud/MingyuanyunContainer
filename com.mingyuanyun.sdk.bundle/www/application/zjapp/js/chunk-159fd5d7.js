(window.webpackJsonp_module_entry_zjapp_=window.webpackJsonp_module_entry_zjapp_||[]).push([["chunk-159fd5d7"],{1711:function(a,e,t){(a.exports=t("690e")(!1)).push([a.i,'.zjapp .page-clear[data-v-4b9a369c]{background:#f2f2f2}.zjapp .page-clear .canvas[data-v-4b9a369c]{background-color:#fff;border-bottom:1px solid #e6e6e6;overflow:hidden;position:relative;z-index:1}.zjapp .page-clear .canvas .circular_pos[data-v-4b9a369c]{width:100%;height:260px;position:absolute;left:0;top:0;text-align:center;line-height:260px;font-size:16px}.zjapp .page-clear .canvas .circular[data-v-4b9a369c]{border:10px solid #4275e8;width:200px;height:200px;margin:30px auto;border-radius:50%}.zjapp .page-clear .afterClear[data-v-4b9a369c]{height:auto;width:100%;position:absolute;z-index:10;left:0;top:260px;overflow:hidden}.zjapp .page-clear .tips-content[data-v-4b9a369c]{padding:15px 40px 5px;line-height:2em;color:#888;text-align:center}.zjapp .loader[data-v-4b9a369c],.zjapp .loader[data-v-4b9a369c]:after,.zjapp .loader[data-v-4b9a369c]:before{border-radius:50%;width:200px;height:200px}.zjapp .loader[data-v-4b9a369c]{margin:30px auto;border:10px solid #e2e2e2;border-top:10px solid #4275e8;transform:rotate(30deg);position:relative}.zjapp .loader-ani[data-v-4b9a369c]{-webkit-animation:load8-data-v-4b9a369c 1.1s linear infinite;animation:load8-data-v-4b9a369c 1.1s linear infinite}.zjapp .loader[data-v-4b9a369c]:after{border:10px solid transparent;border-top:10px solid #e2e2e2;transform:rotate(30deg);position:absolute;left:-10px;top:-10px;content:"";display:block}@-webkit-keyframes load8-data-v-4b9a369c{0%{transform:rotate(30deg)}to{transform:rotate(390deg)}}@keyframes load8-data-v-4b9a369c{0%{transform:rotate(30deg)}to{transform:rotate(390deg)}}',""])},3553:function(a,e,t){"use strict";t.r(e);var r=t("7194").a,n=(t("cddb"),t("17cc")),o=Object(n.a)(r,(function(){var a=this,e=a.$createElement,t=a._self._c||e;return t("page-content",{attrs:{title:"清除数据"}},[t("div",{directives:[{name:"show",rawName:"v-show",value:!a.isBackUp,expression:"!isBackUp"}],staticClass:"page-clear"},[t("div",{staticClass:"canvas"},[t("div",{staticClass:"circular_pos",attrs:{id:"circular_pos"}}),t("div",{directives:[{name:"show",rawName:"v-show",value:"clearing"===a.clearStatus,expression:"clearStatus === 'clearing'"}],staticClass:"loader loader-ani",attrs:{id:"loader"}}),t("div",{directives:[{name:"show",rawName:"v-show",value:"clearing"!==a.clearStatus,expression:"clearStatus !== 'clearing'"}],staticClass:"circular",attrs:{id:"circular"}})]),"success"===a.clearStatus?t("div",{staticClass:"afterClear",attrs:{id:"afterClear"}},[t("div",{staticClass:"tips-content",attrs:{id:"tips-content"}},[t("p",[a._v("已清除所有数据")])]),t("app-button-group",[t("app-button",{on:{click:a.gotoIndex}},[a._v("\n          返回\n        ")])],1)],1):a._e(),"error"===a.clearStatus?t("app-button-group",[t("app-button",{on:{click:a.doClear}},[a._v("\n        重试\n      ")])],1):a._e()],1)])}),[],!1,null,"4b9a369c",null);e.default=o.exports},7194:function(a,e,t){"use strict";(function(a){t("cc57");var r=t("fd50"),n=t("e2a7"),o=t("48f4"),i=t("60af"),c=t("6900"),s=t("3516"),l=t("6144"),d=t("aaa9"),u=t("162a"),p=t("1b7e");e.a={name:"SuperDataClear",data:function(){return{clearStatus:"clearing",isBackUp:!0}},activated:function(){this.isBackUp=!0,this.backupData()},methods:{backupData:function(){var e=this;return $rootScope.execCheckAppUpdate?(this.gotoMe(),n.a.alert("后台正在进行App更新检测，请稍后重试")):u.a.isBackgroundTaskWorking()?(this.gotoMe(),n.a.alert("后台正在进行问题数据更新，请稍后重试")):p.a.getHasNetwork().then((function(a){if(!a)return r.a.reject({errmsg:"当前网络无法同步数据"})})).then((function(){o.default.clearDownloadImageQueue();var t="";n.a.loading("正在备份数据..."),$log.log("正在上传数据库文件..."),d.a.uploadDebugData().then((function(a){return t=a,$log.log("正在提交备份数据..."),d.a.backupDatabase(a)})).then((function(){n.a.hideLoading()})).catch((function(e){return n.a.hideLoading(),r.a.when().then((function(){if(e&&e.isNotify)n.a.alert(e.msg);else{if("当前网络无法同步数据"!==e)return a.isString(e)||(e=JSON.stringify(e)),$log.error("备份数据失败",e),n.a.alert("备份数据失败，产品团队会排查问题并通知您"),d.a.submitFeedback({remark:e,debug_file:t,is_sys_submit:1}).catch((function(a){}));n.a.alert(e)}})).then((function(){return n.a.confirm("备份数据失败，是否继续清除数据？").then((function(a){if(!a)return r.a.reject(e)}))}))})).then((function(){var r=!1;return u.a.beginManualUpdate(),o.default.executeUpload().then((function(){e.isBackUp=!1,r=!0,e.doClear()})).catch((function(o){if(o&&o.isNotify)n.a.alert(o.msg);else if("当前网络无法同步数据"===o)n.a.alert(o);else if(!r)return a.isString(o)||(o=JSON.stringify(o)),n.a.alert("上传数据失败，产品团队会排查问题并通知您"),d.a.submitFeedback({remark:o,debug_file:t,is_sys_submit:1}).then((function(){return n.a.confirm("上传数据失败，是否继续清除数据？").then((function(a){a?(e.isBackUp=!1,e.doClear()):e.gotoMe()}))}))})).finally((function(){u.a.endManualUpdate()}))}))})).catch((function(a){n.a.alert(a.errmsg||a),e.gotoMe()}))},clearData:function(a){var e=this,t=document.getElementById("loader"),n=r.a.defer(),o=2e3+1e3*Math.random();return setTimeout((function(){circular_pos.innerHTML=a?"清除完毕":"清除失败,请重试",t.style.display="none",e.clearStatus=a?"success":"error",n.resolve()}),o),n.promise},doClear:function(){var a=this,e=document.getElementById("loader"),t=document.getElementById("circular_pos");this.clearStatus="clearing",t.innerHTML="数据清除中...",e.style.display="block",setTimeout((function(){var e=a.$router.currentRoute.name;i.a.createGlobalTask((function(){return c.a.clearData().then((function(e){return a.clearData(!0)})).then((function(){o.default.setLocalChanged(),s.a.setLocalChanged()}))}),"清除数据").then((function(){return o.default.executeSync().then(null,null,(function(e){e&&e.basedataDownloaded&&a.gotoIndex()}))})).then((function(){a.$router.currentRoute.name===e&&a.gotoIndex()})).catch((function(e){return a.clearData(!1),$log.error(e),r.a.reject(e)}))}),1e3)},gotoIndex:function(){l.a.saveString("userIsNotFirstLogin",1,l.a.level.user),this.gotoMe()},gotoMe:function(){window.__YL__.router.me()}}}}).call(this,t("391c"))},"953f":function(a,e,t){var r=t("1711");"string"==typeof r&&(r=[[a.i,r,""]]),r.locals&&(a.exports=r.locals);(0,t("85cb").default)("f43039d6",r,!0,{sourceMap:!1,shadowMode:!1})},cddb:function(a,e,t){"use strict";t("953f")}}]);