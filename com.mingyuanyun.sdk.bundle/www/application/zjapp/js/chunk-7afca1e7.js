(window.webpackJsonp_module_entry_zjapp_=window.webpackJsonp_module_entry_zjapp_||[]).push([["chunk-7afca1e7"],{"0907":function(t,e,i){"use strict";(function(t){i("5ab2"),i("6d57"),i("e10e"),i("f548"),i("e204");var a=i("28f8"),n=(i("cc57"),i("163d"),i("774b")),o=i("07d2"),r=i("9baf"),s=i("0f7b"),l=(i("3c64"),i("46ae")),c=i("f764"),p=i("e2a7"),d=i("162a"),u=i("1b7e"),h=i("6bf2"),f=i.n(h),m=i("6f9e"),g=i("6144");function b(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,a)}return i}e.a={name:"MeetingIndex",components:{Scroller:n.a,Item:o.a,DateSelect:r.a,AppStepper:s.a,SlideUpSelect:l.a,BorderTitle:c.a},data:function(){return{api:{getList:"/online/ncov-supplies-inventory/get-supplies-inventory-list",addMaterial:"/online/ncov-supplies-inventory/save-supplies",delMaterial:"/online/ncov-supplies-inventory/deleted-supplies",addRecord:"/online/ncov-supplies-inventory/save-supplies-inventory"},isBack:!1,isLoading:!1,isAddMaterialVisible:!1,date:"",beforeEditData:[],renderData:[],materialData:{name:"",unit:"",inventory:0,demand_number:0},emptyTips:"暂无防疫物资",type:"common",dateMax:"",bidsectionId:""}},beforeRouteLeave:function(t,e,i){this.checkEditing()||this.isBack?i():p.a.confirm("未提交返回，填写的数据将丢失",{okText:"返回",cancelText:"继续编辑"}).then((function(t){t?i():i(!1)}))},computed:{projId:function(){return this.$store.state.global.currentProject.id}},watch:{isAddMaterialVisible:function(t){var e=this;t&&this.$nextTick((function(){e.$refs.materialNameInp.focus()}))}},activated:function(){this.isBack=!1,this.bidsectionId=(g.a.getObject("ncov-index-section-default"+this.projId,g.a.level.user)||{}).id,this.getNowDay(),this.getList()},methods:{onClick:function(t){m.a.$emit("pageContentClick",t)},getNowDay:function(){var t=new Date,e=t.getFullYear(),i=t.getMonth()+1,a=t.getDate();a<10&&(a="0"+a),i<10&&(i="0"+i),this.date=e+"-"+i+"-"+a,this.dateMax=f()().toDate()},checkNetWork:function(){var t=this;return u.a.getHasNetwork().then((function(e){if(!e)return t.type="error",Promise.reject({errmsg:"当前网络无法同步数据"});t.emptyTips="暂无防疫物资"}))},checkEditing:function(){return JSON.stringify(this.beforeEditData)===JSON.stringify(this.renderData)},getList:function(){var e=this;return this.checkNetWork().then((function(){return e.isLoading=!0,d.a.request(e.api.getList,{proj_id:e.projId,bidsection_id:e.bidsectionId})})).then((function(i){e.renderData=i.data.map((function(t){return t.demand_number=Number(t.demand_number||0),t.inventory=Number(t.inventory||0),t})),e.beforeEditData=t.cloneDeep(e.renderData)})).catch((function(t){e.type="error",e.emptyTips=t.errmsg||"加载数据失败",e.renderData=[],p.a.alert(t.errmsg||t)})).finally((function(){e.isLoading=!1}))},remove:function(t,e){var i=this;p.a.popBox({title:"删除后物资将不再展示，确定删除吗？",cancelText:"取消",okText:"删除"}).then((function(a){a&&i.checkNetWork().then((function(){p.a.loading("正在删除...");var a={id:e};return d.a.post(i.api.delMaterial,{},a).then((function(e){p.a.alert("删除成功"),p.a.hideLoading(),i.renderData.splice(t,1)}))})).catch((function(t){$log.log("防疫物资删除失败",t),p.a.hideLoading(),p.a.alert(t.errmsg)}))}))},showMaterial:function(){this.materialData={name:"",unit:"",inventory:0,demand_number:0},this.isAddMaterialVisible=!0},addMaterial:function(t,e){var i=this;if("cancel"!==t){if(this.checkData())return this.checkNetWork().then((function(){return d.a.post(i.api.addMaterial,{},{unit:i.materialData.unit,name:i.materialData.name,proj_id:i.projId,bidsection_id:i.bidsectionId})})).then((function(t){$log.log("添加防疫物资成功"),e(),i.renderData.unshift(function(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?b(Object(i),!0).forEach((function(e){Object(a.a)(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):b(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}({id:t},i.materialData))})).catch((function(t){$log.log("添加防疫物资失败"),e(!1),p.a.alert(t.errmsg||t)}));e(!1)}else e()},checkData:function(){var e=this;if(t.isEmpty(this.materialData.name))return p.a.alert("请填写物资名称"),!1;if(t.isEmpty(this.materialData.unit))return p.a.alert("请填写物资单位"),!1;var i=t.findIndex(this.renderData,(function(t){return t.name===e.materialData.name}));return i>-1?(p.a.alert("添加的物资已存在"),!1):(console.log(i),!0)},submit:function(){var t=this;return this.checkNetWork().then((function(){var e={proj_id:t.projId,inventory_date:t.date,data:t.renderData.map((function(e){return e.inventory_date=t.date,e}))};return p.a.loading("正在提交..."),d.a.post(t.api.addRecord,{},e).then((function(e){return p.a.alert("提交成功").then((function(){return t.isBack=!0,t.$router.replace({name:"NocvMaterialInventory"})}))})).then((function(){p.a.hideLoading()}))})).catch((function(t){p.a.hideLoading(),p.a.alert(t.errmsg||"提交失败"),console.error(t)}))}}}}).call(this,i("391c"))},"0c52":function(t,e,i){(t.exports=i("690e")(!1)).push([t.i,".zjapp .app-stepper[data-v-03df57b7]{display:inline-block;width:110px;height:34px;margin:-2px 0;white-space:nowrap;font-size:0;line-height:0;vertical-align:top}.zjapp .app-stepper .number-input[data-v-03df57b7]{width:51px;height:34px;border:1px solid #dcdcdc;border-radius:0;font-size:14px;text-align:center;background-color:#fff;color:#111;box-sizing:border-box}.zjapp .app-stepper .number-input-focus[data-v-03df57b7]{border-color:#4275e8}.zjapp .btn-add[data-v-03df57b7],.zjapp .btn-minus[data-v-03df57b7]{display:inline-block;width:28px;height:34px;line-height:34px;padding:0;border:1px solid #dcdcdc;color:#666;text-align:center;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;box-sizing:border-box;background-color:#fff}.zjapp .btn-minus[data-v-03df57b7]{border-right:none;border-radius:4px 0 0 4px}.zjapp .btn-add[data-v-03df57b7]{border-left:none;border-radius:0 4px 4px 0}.zjapp .icon-add[data-v-03df57b7],.zjapp .icon-minus[data-v-03df57b7]{font-size:11px;vertical-align:top;display:inline-block;margin-top:10.5px}.zjapp .disabled[data-v-03df57b7]{color:#c8c8c8}.zjapp .activing[data-v-03df57b7]{color:#4275e8}",""])},"0f7b":function(t,e,i){"use strict";i("f548"),i("163d");var a,n,o={name:"AppStepper",components:{NumberInput:i("6948").a},props:{value:{type:[String,Number],default:""},max:{type:[String,Number],default:200},range:{type:Array}},data:function(){return{addActiving:!1,minusActiving:!1}},computed:{rangeMin:function(){return this.range&&this.range[0]||0},rangeMax:function(){return this.range&&this.range[1]?this.range[1]:this.max},allowAdd:function(){return""!==this.value&&this.value<this.rangeMax},allowMinus:function(){return""!==this.value&&this.value>this.rangeMin}},methods:{onChange:function(t){t&&(t=String(t).replace(/\D/g,"")),parseInt(t,10)>parseInt(this.max,10)&&(t=this.max),this.$emit("input",Number(t)),this.$emit("change",Number(t))},add:function(){if(this.allowAdd){var t=parseInt(this.value,10)+1;this.isInRange(t)&&(this.$emit("input",t),this.$emit("change",t)),this.setActiving("add")}},minus:function(){if(this.allowMinus){var t=parseInt(this.value,10)-1;this.isInRange(t)&&(this.$emit("input",t),this.$emit("change",t)),this.setActiving("minus")}},isInRange:function(t){return t>=this.rangeMin&&t<=this.rangeMax},setActiving:function(t){var e=this;t&&("minus"===t?(this.minusActiving=!0,clearTimeout(n),n=setTimeout((function(){e.minusActiving=!1}),300)):(this.addActiving=!0,clearTimeout(a),a=setTimeout((function(){e.addActiving=!1}),300)))}}},r=(i("91cb"),i("17cc")),s=Object(r.a)(o,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"app-stepper"},[i("button",{staticClass:"btn-minus",class:{disabled:!t.allowMinus,activing:t.minusActiving},on:{click:t.minus}},[i("icon",{attrs:{name:"minus"}})],1),i("number-input",{attrs:{value:t.value,type:"int",range:t.range},on:{input:t.onChange}}),i("button",{staticClass:"btn-add",class:{disabled:!t.allowAdd,activing:t.addActiving},on:{click:t.add}},[i("icon",{attrs:{name:"add"}})],1)],1)}),[],!1,null,"03df57b7",null);e.a=s.exports},"0ff8":function(t,e,i){var a=i("9b79");"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);(0,i("85cb").default)("2f55dd56",a,!0,{sourceMap:!1,shadowMode:!1})},"16ff":function(t,e,i){var a=i("39e4");"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);(0,i("85cb").default)("801e728a",a,!0,{sourceMap:!1,shadowMode:!1})},"2c76":function(t,e,i){"use strict";i("c070")},"30c7":function(t,e,i){"use strict";i("69c5")},"38a7":function(t,e,i){"use strict";i("16ff")},"39e4":function(t,e,i){(t.exports=i("690e")(!1)).push([t.i,".zjapp .content[data-v-73ce749f]{display:flex;flex-direction:column;justify-content:flex-end;position:fixed;top:0;left:0;width:100%;height:100%;background-color:rgba(0,0,0,.4);overflow:hidden}",""])},"3b61":function(t,e,i){(t.exports=i("690e")(!1)).push([t.i,"[data-v-338c45a1] .dialog-body .item-label{width:auto}[data-v-338c45a1] .item{padding:8px 14px}[data-v-338c45a1] .material-item .item-label{width:31%}[data-v-338c45a1] .van-stepper .van-stepper__minus:before,[data-v-338c45a1] .van-stepper .van-stepper__plus:before{width:12px;height:1.5px;color:#666;transform:none}[data-v-338c45a1] .van-stepper .van-stepper__plus:after{height:12px;width:1.5px;color:#666;transform:none}[data-v-338c45a1] .van-stepper .van-stepper__input{width:60px}.zjapp .title[data-v-338c45a1]{font-size:12px;color:#999;padding:10px 15px;margin:0}.zjapp .material-item[data-v-338c45a1]{margin-bottom:10px}.zjapp .dialog-body[data-v-338c45a1]{padding-bottom:10px}.zjapp .dialog-title[data-v-338c45a1],.zjapp .input[data-v-338c45a1]{text-align:center}.zjapp .input[data-v-338c45a1]{border:1px solid #e5e5e5;line-height:28px}.zjapp .input.right[data-v-338c45a1]{min-width:48px;width:48px}.zjapp .input.left[data-v-338c45a1]{width:96%}.zjapp .material-dialog[data-v-338c45a1]{min-width:260px;max-width:260px}.zjapp .material-dialog[data-v-338c45a1] .van-stepper__input{width:60}",""])},"3c64":function(t,e,i){"use strict";i("163d");var a={name:"ItemTextarea",components:{},props:{value:{type:String,default:""},placeholder:{type:String,default:""},maxlength:{type:Number,default:200},borderBottom:{type:Boolean,default:!0}},data:function(){return{textareaHeight:40,isLock:!1,blurTime:null}},computed:{lastLength:function(){var t=this.value&&this.value.length||0,e=this.maxlength-t;return e>0?e:0}},mounted:function(){var t=this;this.$nextTick((function(){t.textareaHeight=t.$refs.rule&&t.$refs.rule.offsetHeight||40}))},methods:{onfocus:function(){var t=(new Date).getTime();this.blurTime&&t-this.blurTime<300&&window.cordova&&window.cordova.plugins&&window.cordova.plugins.Keyboard&&(this.$refs.input.blur(),window.cordova.plugins.Keyboard.close()),this.blurTime=null,this.$emit("focus")},onblur:function(){this.blurTime=(new Date).getTime(),this.$emit("blur")},setStatus:function(t){console.log(t),this.isLock=t},oninput:function(t){var e=this;setTimeout((function(){if(!e.isLock){var i=t.target.value;i.length>e.maxlength&&(i=i.substring(0,e.maxlength),e.$refs.input.value=i),e.$refs.rule.innerText=i,e.textareaHeight=e.$refs.rule&&e.$refs.rule.offsetHeight+20,e.$emit("input",i),e.$emit("change",i)}}),0)}}},n=(i("2c76"),i("17cc")),o=Object(n.a)(a,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"item-textarea",class:{"border-bottom":t.borderBottom}},[i("div",{staticClass:"item-textarea-content"},[i("textarea",{ref:"input",style:{height:t.textareaHeight+"px"},attrs:{placeholder:t.placeholder},domProps:{value:t.value},on:{focus:t.onfocus,blur:t.onblur,compositionstart:function(e){t.setStatus(!0)},compositionend:function(e){t.setStatus(!1)},input:t.oninput}}),i("div",{ref:"rule",staticClass:"rule"},[t._v("\n      "+t._s(t.value)+"\n    ")]),t.maxlength!==1/0?i("p",{staticClass:"counter"},[t._v("\n      "+t._s(t.lastLength)+"\n    ")]):t._e()])])}),[],!1,null,null,null);e.a=o.exports},"46ae":function(t,e,i){"use strict";var a=i("e1e7").a,n=i("17cc"),o=Object(n.a)(a,(function(){var t=this,e=t.$createElement;return(t._self._c||e)("item",{attrs:{label:t.title,text:t.text,mode:t.mode,editabled:t.editabled,placeholder:t.placeholder},on:{click:t.openSelect}},[t.$slots.right?t._t("right",null,{slot:"right"}):t._e()],2)}),[],!1,null,null,null);e.a=o.exports},"4e8c":function(t,e,i){"use strict";var a=i("329b"),n=i("b056").a,o=(i("30c7"),i("17cc")),r=Object(o.a)(n,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.show?i("div",{staticClass:"content",on:{click:function(e){return e.target!==e.currentTarget?null:t.closePopup(e)}}},[i("transition",{attrs:{name:"slide-up"},on:{enter:function(e){t.isOpening=!0},"after-enter":function(e){t.isOpening=!1},leave:function(e){t.isClosing=!0},"after-leave":t.afterClose}},[t.showList?i("div",{staticClass:"box",style:{height:t.listHeight+"px"}},[t.allowSearching?t._e():i("div",{staticClass:"hd border-bottom"},[t._v("\n        "+t._s(t.title)+"\n        "),i("icon",{attrs:{name:"unqualified"},on:{click:t.closePopup}})],1),t.allowSearch?i("app-search-bar",{ref:"app-search-bar-checkitem-select",staticClass:"bg-white",attrs:{"history-key":t.historyKey},on:{changeSearchStatus:t.setSearchMode},model:{value:t.searchKeyword,callback:function(e){t.searchKeyword=e},expression:"searchKeyword"}}):t._e(),t.renderData&&t.renderData.length?i("scroller",{ref:"scroller",attrs:{"has-next":t.hasNextPage},on:{loadNext:t.loadNext}},[i("div",{attrs:{id:"slideUpSelectDialog"}},t._l(t.renderData,(function(e){return i("item",{key:e.id,attrs:{"icon-right":e.id===t.selected.id?"qualified":"",border:"bottom"},on:{click:function(i){t.select(e)}}},[t.showNote?[i("div",{staticClass:"item-con"},[i("p",{staticClass:"text"},[t._v(t._s(e.name))]),i("p",{staticClass:"note"},[t._v(t._s(e[t.showNote]))])])]:i("div",{staticClass:"item-text",domProps:{innerHTML:t._s(t.keywordFilter(e.name))}})],2)})))]):t._e(),i("loading-status",{attrs:{"is-empty":!t.options||!t.options.length,type:"search","empty-text":t.emptyText}},[t.allowSearching&&t.allowSearch?i("template",{slot:"empty-text"},[t._v("\n          未搜索到包含"),i("span",{staticClass:"color-blue"},[t._v(t._s(t.searchKeyword))]),t._v("的结果\n        ")]):t._e()],2)],1):t._e()])],1):t._e()}),[],!1,null,"c4404120",null).exports,s=!1;s||(s=new(a.default.extend(r))({el:document.createElement("div")}),document.body.appendChild(s.$el));e.a=s},"574c":function(t,e,i){(t.exports=i("690e")(!1)).push([t.i,".zjapp .item-textarea{background-color:#fff;padding:5px 15px}.zjapp .item-textarea-content{position:relative}.zjapp .item-textarea .rule,.zjapp .item-textarea textarea{width:100%;min-height:40px;line-height:20px;font-size:16px;padding:0;border:none}.zjapp .item-textarea .rule{position:absolute;top:0;left:0;visibility:hidden;word-break:break-all}.zjapp .item-textarea .counter{text-align:right;margin:0 0 -5px 0;height:15px;line-height:15px;color:#b2b2b2;font-size:12px}",""])},6140:function(t,e,i){"use strict";i.r(e);var a=i("0907").a,n=(i("d966"),i("17cc")),o=Object(n.a)(a,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("page-content",{attrs:{title:"新增盘点记录","show-go-root":!0}},[i("div",{staticClass:"header-btn",attrs:{slot:"header-bar-right"},on:{click:t.showMaterial},slot:"header-bar-right"},[t._v("添加物资")]),i("scroller",{attrs:{"is-empty":!t.renderData.length}},[i("van-cell",{attrs:{title:"盘点时间",value:t.date||"无",size:"large"}}),i("h3",{staticClass:"title"},[t._v("防疫物资")]),t._l(t.renderData,(function(e,a){return i("div",{key:e.id,staticClass:"material-item"},[i("border-title",{attrs:{text:e.name}},[i("icon",{attrs:{slot:"",name:"remove"},on:{click:function(i){t.remove(a,e.id)}},slot:"default"})],1),i("item",{attrs:{mode:"edit",label:"需求量"}},[i("template",{slot:"right"},[i("div",{staticClass:"item-con align-r"},[i("van-stepper",{attrs:{max:"999999",integer:!0,min:"0","button-size":30,step:"1"},model:{value:e.demand_number,callback:function(i){t.$set(e,"demand_number",i)},expression:"item.demand_number"}})],1),i("div",{staticClass:"item-font ml5"},[t._v(t._s(e.unit))])])],2),i("item",{attrs:{mode:"edit",border:"none",label:"库存"}},[i("template",{slot:"right"},[i("div",{staticClass:"item-con align-r"},[i("van-stepper",{attrs:{min:"0",max:"999999",integer:!0,step:"1","button-size":30},model:{value:e.inventory,callback:function(i){t.$set(e,"inventory",i)},expression:"item.inventory"}})],1),i("div",{staticClass:"item-font ml5"},[t._v(t._s(e.unit))])])],2)],1)})),i("loading-status",{attrs:{type:t.type,"is-loading":t.isLoading,"is-empty":!t.isLoading&&!t.renderData.length,"empty-text":t.emptyTips}},[i("div",{staticStyle:{"margin-top":"24px"},attrs:{slot:"empty-content"},slot:"empty-content"},[i("app-button",{attrs:{size:"small"},on:{click:t.showMaterial}},[t._v("去添加")])],1)])],2),t.renderData.length?i("app-button-group",{attrs:{"fixed-bottom":""}},[i("app-button",{on:{click:t.submit}},[t._v("提交")])],1):t._e(),i("van-dialog",{attrs:{"show-cancel-button":"","get-container":"body","class-name":"material-dialog","cancel-button-color":"#666","before-close":t.addMaterial},nativeOn:{click:function(e){return t.onClick(e)}},model:{value:t.isAddMaterialVisible,callback:function(e){t.isAddMaterialVisible=e},expression:"isAddMaterialVisible"}},[i("div",{staticClass:"dialog-body"},[i("h2",{staticClass:"dialog-title"},[t._v("添加防疫物资")]),i("item",{attrs:{mode:"edit",border:"none",label:"物资名"}},[i("template",{slot:"right"},[i("div",{staticClass:"item-con"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.materialData.name,expression:"materialData.name"}],ref:"materialNameInp",staticClass:"input left",attrs:{placeholder:"请输入",maxlength:"10"},domProps:{value:t.materialData.name},on:{input:function(e){e.target.composing||t.$set(t.materialData,"name",e.target.value)}}})]),i("input",{directives:[{name:"model",rawName:"v-model",value:t.materialData.unit,expression:"materialData.unit"}],staticClass:"input right",attrs:{placeholder:"单位",maxlength:"5"},domProps:{value:t.materialData.unit},on:{input:function(e){e.target.composing||t.$set(t.materialData,"unit",e.target.value)}}})])],2),i("item",{attrs:{mode:"edit",border:"none",label:"需求量"}},[i("template",{slot:"right"},[i("div",{staticClass:"item-con align-r"},[i("van-stepper",{attrs:{max:"999999",integer:!0,min:"0","button-size":30,step:"1"},model:{value:t.materialData.demand_number,callback:function(e){t.$set(t.materialData,"demand_number",e)},expression:"materialData.demand_number"}})],1)])],2),i("item",{attrs:{mode:"edit",border:"none",label:"库存"}},[i("template",{slot:"right"},[i("div",{staticClass:"item-con align-r"},[i("van-stepper",{attrs:{max:"999999",integer:!0,min:"0","button-size":30,step:"1"},model:{value:t.materialData.inventory,callback:function(e){t.$set(t.materialData,"inventory",e)},expression:"materialData.inventory"}})],1)])],2)],1)])],1)}),[],!1,null,"338c45a1",null);e.default=o.exports},"69c5":function(t,e,i){var a=i("7d2b");"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);(0,i("85cb").default)("172b2e44",a,!0,{sourceMap:!1,shadowMode:!1})},"774b":function(t,e,i){"use strict";var a=i("d18d").a,n=(i("b225"),i("17cc")),o=Object(n.a)(a,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{ref:"scroll-warp",staticClass:"scroll-warp",class:{"scroll-warp-pulling":t.pulling,"scroll-warp-complete":!t.hasNext&&!t.isEmpty,"scroll-warp-empty":t.isEmpty},style:{"padding-bottom":t.numberKeyboardCoverHeight+"px"},on:{scroll:t.onScroll,touchstart:t.onTouchstart,touchmove:t.onTouchmove,touchend:t.onTouchend}},[t.allowPullDown?i("div",{staticClass:"pull-refresh-warp",style:{height:t.pullDist+"px"}},[i("div",{staticClass:"pull-refresh"},[i("div",{staticClass:"animation-refresher",class:{refreshing:t.refreshing}}),t.updateTime?i("p",{staticClass:"pull-refresh-date"},[t._v("最后成功同步："+t._s(t.updateTime))]):t._e()])]):t._e(),t._t("default"),t.loading?i("div",{staticClass:"page-loading"},[i("svg",{staticClass:"svg-loading",attrs:{viewBox:"0 0 80 80"}},[i("circle",{attrs:{cx:"40",cy:"40",r:"36"}})])]):t._e(),t.hasNext||t.isEmpty?t._e():[t.$slots.end?t._t("end"):t._e(),!t.$slots.end&&t.endText?i("div",{staticClass:"end-text"},[t._v("\n      "+t._s(t.endText)+"\n    ")]):t._e()]],2)}),[],!1,null,"2b1a346c",null);e.a=o.exports},"7d2b":function(t,e,i){(t.exports=i("690e")(!1)).push([t.i,".zjapp .content[data-v-c4404120]{position:fixed;top:0;left:0;width:100%;height:100%;background-color:rgba(0,0,0,.4);overflow:hidden}.zjapp .box[data-v-c4404120]{position:absolute;left:0;bottom:0;width:100%;flex-direction:column}.zjapp .box[data-v-c4404120],.zjapp .list-wrap[data-v-c4404120]{display:flex;background-color:#fff}.zjapp .list-wrap[data-v-c4404120]{flex-direction:row;align-items:flex-start;flex:1;height:465px}.zjapp #slideUpSelectDialog[data-v-c4404120]{padding:0 15px 0}.zjapp .hd[data-v-c4404120]{position:relative;padding:10px 45px;height:44px;line-height:22px;font-size:16px;color:#666;text-align:center;background-color:#fff}.zjapp .hd .icon-unqualified[data-v-c4404120]{position:absolute;width:44px;height:44px;top:0;right:0;line-height:44px;font-size:14px;text-align:center;color:#999}.zjapp .item[data-v-c4404120]{padding-left:0;padding-right:0}.zjapp .text[data-v-c4404120]{font-size:14px;line-height:20px;color:#333}.zjapp .note[data-v-c4404120]{font-size:12px;line-height:18px;color:#999}[data-v-c4404120] .icon-qualified{width:34px;height:34px;line-height:34px;text-align:center;color:#4275e8}",""])},8474:function(t,e,i){"use strict";var a=i("329b"),n=(i("ed6c"),i("591c")),o=i("e89f"),r=i("4360"),s={name:"DateSelectDialog",components:{DatetimePicker:n.a},mixins:[o.a],store:r.a,data:function(){return{show:!1,showCon:!1,date:"",type:"",min:"",max:"",confirmFn:function(){}}},watch:{show:function(t){var e=this;t&&this.$nextTick((function(){e.showCon=!0}))}},methods:{open:function(t){this.date=t.date,this.type=t.type||"datetime",this.min=t.min||void 0,this.max=t.max||void 0,this.confirmFn=t.onConfirm,this.show=!0},close:function(){this.showCon=!1},afterClose:function(){this.show=!1},onConfirm:function(t){this.confirmFn&&this.confirmFn(t),this.close()},onCancel:function(t){this.close()}}},l=(i("38a7"),i("17cc")),c=Object(l.a)(s,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.show?i("div",{staticClass:"content",on:{click:function(e){return e.target!==e.currentTarget?null:t.close(e)}}},[i("transition",{attrs:{name:"slide-up"},on:{"after-leave":t.afterClose}},[t.showCon?i("van-datetime-picker",{attrs:{type:t.type,"min-date":t.min,"max-date":t.max},on:{confirm:t.onConfirm,cancel:t.onCancel},model:{value:t.date,callback:function(e){t.date=e},expression:"date"}}):t._e()],1)],1):t._e()}),[],!1,null,"73ce749f",null).exports,p=!1;p||(p=new(a.default.extend(c))({el:document.createElement("div")}),document.body.appendChild(p.$el));e.a=p},"91cb":function(t,e,i){"use strict";i("c82d")},"9b79":function(t,e,i){(t.exports=i("690e")(!1)).push([t.i,".zjapp .problem-detail-header[data-v-26783058]{display:flex;align-items:center;justify-content:center;height:40px;line-height:40px;background-color:#fff;padding-right:15px}.zjapp .problem-detail-header .status[data-v-26783058]{flex:1;height:16px;line-height:16px;border-left:5px solid #ddd;padding-left:10px;padding-right:5px;color:#111;font-size:16px;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.zjapp .problem-detail-header .status-red[data-v-26783058]{border-color:#ff3d3d}.zjapp .problem-detail-header .status-blue[data-v-26783058]{border-color:#4275e8}.zjapp .problem-detail-header .status-green[data-v-26783058]{border-color:#0bc666}.zjapp .problem-detail-header .status-orange[data-v-26783058]{border-color:#fc8b01}.zjapp .problem-detail-header .status-black[data-v-26783058]{border-color:#333}.zjapp .problem-detail-header .status-gray[data-v-26783058]{border-color:#999}.zjapp .problem-detail-header .return[data-v-26783058],.zjapp .problem-detail-header .timeout[data-v-26783058],.zjapp .problem-detail-header .urgent[data-v-26783058]{display:block;padding:0 5px;margin-left:6px;height:16px;line-height:16px;color:#fff;font-size:12px;border-radius:2px;-webkit-border-radius:2px}.zjapp .problem-detail-header .urgent[data-v-26783058]{background-color:#ff3d3d}.zjapp .problem-detail-header .timeout[data-v-26783058]{background-color:#954cfe}.zjapp .problem-detail-header .return[data-v-26783058]{background-color:#fc8b01}.zjapp .problem-detail-header .operat[data-v-26783058]{height:40px;line-height:40px;white-space:nowrap;font-size:16px;color:#6b7ba9}",""])},"9baf":function(t,e,i){"use strict";var a=i("8474"),n=i("07d2"),o=i("6bf2"),r=i.n(o),s={name:"CheckitemSelect",components:{Item:n.a},props:{label:{type:String,default:""},mode:{type:String,default:"edit"},value:{type:String,default:""},text:{type:String,default:""},placeholder:{type:String,default:"请选择"},format:{type:String,default:"YYYY-MM-DD"},editabled:{type:Boolean,default:!0},min:{type:Date},max:{type:Date},type:{type:String,default:""},formCheck:{type:Boolean,default:!1}},data:function(){return{}},computed:{showText:function(){return this.text?this.text:this.value?r()(this.value).format(this.format):""}},methods:{open:function(){var t=this;a.a.open({date:this.value?r()(this.value).toDate():new Date,min:this.min,max:this.max,type:this.type,onConfirm:function(e){var i=r()(e).format("YYYY-MM-DD HH:mm:ss");t.$emit("input",i),t.$emit("change",i)}})},close:function(){a.a.close()}}},l=i("17cc"),c=Object(l.a)(s,(function(){var t=this.$createElement;return(this._self._c||t)("item",{attrs:{label:this.label,text:this.showText,mode:this.mode,placeholder:this.placeholder,editabled:!0,"form-check":this.formCheck},on:{click:this.open}})}),[],!1,null,null,null);e.a=c.exports},"9d55":function(t,e,i){(t.exports=i("690e")(!1)).push([t.i,'.zjapp .scroll-warp[data-v-2b1a346c]{flex:1;overflow:auto;-webkit-overflow-scrolling:touch}.zjapp .scroll-warp-pulling[data-v-2b1a346c]{overflow:hidden}.zjapp .scroll-warp-complete[data-v-2b1a346c]:after{content:"";display:block;height:100px}.zjapp .scroll-warp-empty[data-v-2b1a346c]{display:flex;flex-direction:column}.zjapp .pull-refresh-warp[data-v-2b1a346c]{position:relative;height:0;overflow:hidden}.zjapp .pull-refresh[data-v-2b1a346c]{position:absolute;left:0;bottom:0;height:70px;width:100%;padding:6px;text-align:center}.zjapp .pull-refresh-date[data-v-2b1a346c]{margin-top:4px;height:16px;line-height:16px;font-size:12px;color:#bcbcbc}.zjapp .page-loading[data-v-2b1a346c]{padding:10px;text-align:center}.zjapp .end-text[data-v-2b1a346c]{color:#c8c8c8;background:#f4f4f4;position:relative;line-height:76px;height:76px;text-align:center}.zjapp .end-text[data-v-2b1a346c]:after,.zjapp .end-text[data-v-2b1a346c]:before{content:"";position:absolute;width:48px;height:1px;background:#e4e4e4;top:50%;margin-top:-1px}.zjapp .end-text[data-v-2b1a346c]:after{left:50%;transform:translateX(-92px)}.zjapp .end-text[data-v-2b1a346c]:before{right:50%;transform:translateX(90px)}.zjapp .end-slot[data-v-2b1a346c]{padding:30px;line-height:18px;text-align:center;color:#c8c8c8}',""])},a693:function(t,e,i){var a=i("3b61");"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);(0,i("85cb").default)("218050c2",a,!0,{sourceMap:!1,shadowMode:!1})},b056:function(t,e,i){"use strict";(function(t){i("f548"),i("cc57"),i("9dd9");var a,n=i("07d2"),o=i("6f9e"),r=i("e89f"),s=i("9eea"),l=i("774b");e.a={name:"SlideUpSelectDialog",components:{Item:n.a,appSearchBar:s.a,Scroller:l.a},mixins:[r.a],data:function(){return{show:!1,showList:!1,isOpening:!1,isClosing:!1,title:"",selected:{},options:[],showNote:"",emptyText:"",initHeight:null,listHeight:null,componentUid:"",searchKeyword:"",allowSearch:!1,allowSearching:!1,timer:null,historyKey:null,searchOptions:[],listLimit:100,listLimitSize:100}},computed:{renderData:function(){var t=this.options;return t&&t.length>this.listLimit?t.slice(0,this.listLimit):t||[]},hasNextPage:function(){return this.options&&this.options.length>this.listLimit}},watch:{searchKeyword:function(e){var i=this;this.$nextTick((function(){i.options=e?i.fitlerByKeyword(t.cloneDeep(i.searchOptions),e):t.cloneDeep(i.searchOptions)}))},show:function(t){var e=this;t&&this.$nextTick((function(){e.showList=!0}))},showList:function(t){t&&this.scrollToSelect()}},created:function(){o.a.$on("routerBeforeEach",this.closePopup),o.a.$on("pageContentClick",this.closePopup),window.addEventListener("native.keyboardshow",this.onResize,!1),window.addEventListener("native.keyboardhide",this.onResize,!1)},destroyed:function(){o.a.$off("routerBeforeEach",this.closePopup),o.a.$off("pageContentClick",this.closePopup)},methods:{openPopup:function(e){this.componentUid=e.componentUid||"",this.title="选择"+e.title,this.options=e.options,this.searchOptions=t.cloneDeep(e.options),this.selected=t.clone(e.selected),this.showNote=e.showNote,this.emptyText=e.emptyText,this.allowSearch=e.allowSearch,this.initHeight=e.initHeight,this.historyKey=e.historyKey,a=e.callback,this.show=!0,this.onResize(),this.clearScrollToTimeout()},closePopup:function(){var t=this;if(!this.isOpening)return this.showList=!1,this.clearScrollToTimeout(),this.cloneSearch(),new Promise((function(e){t.$on("afterClosePopup",e)}))},afterClose:function(){this.show=!1,this.isClosing=!1,this.$emit("afterClosePopup")},select:function(t){a(t),this.saveHistory(),this.closePopup()},scrollToSelect:function(){var t=this;this.$nextTick((function(){t.timer=window.setTimeout((function(){var e=document.querySelector("#slideUpSelectDialog .item .item-icon-right");e&&e.scrollIntoViewIfNeeded({block:"start",behavior:"smooth"}),t.clearScrollToTimeout()}),400)}))},clearScrollToTimeout:function(){clearTimeout(this.timer),this.timer=null},cloneSearch:function(){this.options=t.cloneDeep(this.searchOptions),this.searchKeyword="",this.$refs["app-search-bar-checkitem-select"]&&this.$refs["app-search-bar-checkitem-select"].cancelSearch()},saveHistory:function(){this.$refs["app-search-bar-checkitem-select"]&&this.$refs["app-search-bar-checkitem-select"].saveHistory()},setSearchMode:function(t){this.allowSearching=t,this.onResize()},onResize:function(e){var i=null,a=window.innerHeight;a-=$rootScope.viewSize.headerHeight-44,i=this.allowSearch&&this.allowSearching?a:t.minBy([.8*a,this.initHeight]),this.listHeight=i},fitlerByKeyword:function(e,i){var a=this,n=[];return t.each(e,(function(e){if(new RegExp(i,"gm").test(e.name))e.isOpen=!0,n.push(e);else if(!t.isEmpty(e.children)){var o=a.fitlerByKeyword(e.children,i);t.isEmpty(o)||(e.isOpen=!0,e.children=o,n.push(e))}})),n},keywordFilter:function(t){return this.searchKeyword?t.replace(new RegExp(this.searchKeyword,"gm"),'<span class="color-blue">'+this.searchKeyword+"</span>"):t},loadNext:function(){this.listLimit+=this.listLimitSize,this.listLimit>this.options.length&&(this.listLimit=this.options.length)},resultListLimit:function(){this.listLimit=this.listLimitSize}}}}).call(this,i("391c"))},b225:function(t,e,i){"use strict";i("ef48")},b6b4:function(t,e,i){"use strict";i("0ff8")},c070:function(t,e,i){var a=i("574c");"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);(0,i("85cb").default)("35590dcb",a,!0,{sourceMap:!1,shadowMode:!1})},c82d:function(t,e,i){var a=i("0c52");"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);(0,i("85cb").default)("26e0fa2e",a,!0,{sourceMap:!1,shadowMode:!1})},d18d:function(t,e,i){"use strict";(function(t){i("2b45");var a,n=i("4360"),o=i("48f4"),r=i("162a"),s=i("e2a7"),l=i("a500"),c=i("6f9e"),p={};e.a={name:"Scroller",props:{buildingId:{type:String,default:""},hasNext:{type:Boolean,default:!1},isEmpty:{type:Boolean,default:!1},isSync:{type:Boolean,default:!0},endText:{type:String,default:""},memoryScrollTop:{type:Boolean,default:!0},keepScrollTop:{type:Boolean},hasPullDown:{type:Boolean,default:!0},onPullDown:{type:Function}},data:function(){return{pullDist:0,refreshing:!1,pulling:!1,loading:!1,scrollTop:0,isCurrKeyboard:!1,gapBottom:0}},computed:{allowPullDown:function(){return this.hasPullDown&&(!!this.$listeners.pullDown||!!this.onPullDown)},updateTime:function(){return n.a.state.global.businessDownloadTime},numberKeyboardCoverHeight:function(){return n.a.state.global.isNumberInputOpen?n.a.state.global.numberKeyboardHeight-this.gapBottom:0}},mounted:function(){var t=this;c.a.$on("numberKeyboardOpen",this.onNumberKeyboardOpen),this.$nextTick((function(){var e=t.$refs["scroll-warp"]&&t.$refs["scroll-warp"].getBoundingClientRect&&t.$refs["scroll-warp"].getBoundingClientRect();e&&(t.gapBottom=document.documentElement.clientHeight-e.bottom),t.$el&&t.$el.addEventListener("focus",(function(e){var i=e&&e.target,a=i&&i.tagName&&i.tagName.toLowerCase();if("input"===a||"textarea"===a){window.addEventListener("resize",(function e(){var a=i.getBoundingClientRect(),n=t.$el.getBoundingClientRect(),o=a.bottom-n.bottom;o>0&&t.scrollBy(o),window.removeEventListener("resize",e,!1)}),!1)}}),!0)}))},destroyed:function(){c.a.$off("numberKeyboardOpen",this.onNumberKeyboardOpen)},activated:function(){var t=this.keepScrollTop||this.$router.isBack&&this.memoryScrollTop;this.scrollTop&&t&&(this.$refs["scroll-warp"].scrollTop=this.scrollTop)},deactivated:function(){this.memoryScrollTop&&(this.scrollTop=this.$refs["scroll-warp"].scrollTop)},methods:{onScroll:function(t){var e=this,i=this.$refs["scroll-warp"].scrollTop,a=this.$refs["scroll-warp"].scrollHeight;if(i+this.$refs["scroll-warp"].clientHeight>=a-5&&!this.loading&&this.hasNext){this.loading=!0;var n=this.$listeners.loadNext();n&&n.then&&"function"==typeof n.then?n.then((function(){e.loading=!1})):this.loading=!1}this.$emit("scroll",t)},getTouchDiretion:function(t){if(!(p&&t&&t.touches&&t.touches[0]))return"";var e=t.touches[0].clientX,i=t.touches[0].clientY;return Math.abs(i-p.y)>Math.abs(e-p.x)&&Math.abs(i-p.y)>=3?i>p.y?"down":"up":""},onTouchstart:function(t){this.allowPullDown&&t.touches&&1===t.touches.length&&(p={x:t.touches[0].clientX,y:t.touches[0].clientY,scrollTop:this.$refs["scroll-warp"].scrollTop,pullDist:this.pullDist})},onTouchmove:function(t){if(this.allowPullDown&&t.touches&&1===t.touches.length){var e=this.$refs["scroll-warp"].scrollTop,i=t.touches[0].clientY,a=i-p.y,n=this.getTouchDiretion(t);"down"===n?!this.refreshing&&e<=0?(this.pulling=!0,this.pullDist=(a-p.scrollTop)/2,t.preventDefault()):this.pulling=!1:"up"===n?this.pullDist>0&&(this.pullDist=p.pullDist-(p.y-i),t.preventDefault()):this.pullDist=p.pullDist}},onTouchend:function(){var t=this;this.allowPullDown&&(p={},this.pulling=!1,this.pullDist>=70&&this.isSync?this.refreshing?this.makePullTo(70):this.makePullTo(70).then((function(){if(t.refreshing=!0,t.onPullDown){var e=t.onPullDown();e&&e.then&&"function"==typeof e?e.finally((function(){t.refreshing=!1,t.makePullTo(0)})):(t.refreshing=!1,t.makePullTo(0))}else t.dataSync().then((function(){t.refreshing=!1,t.makePullTo(0),t.$emit("pullDown")})).catch((function(){t.refreshing=!1,t.makePullTo(0),t.$emit("pullDown")}))})):(this.refreshing=!1,this.makePullTo(0)))},makePullTo:function(t){var e=this,i=this.pullDist,a=t,n=a-i,o=i;return i===a?Promise.resolve():new Promise((function(t){!function r(){window.requestAnimationFrame((function(){o+=n/6,e.pullDist=o,i<a&&o<a||i>a&&o>a?r():(e.pullDist=a,e.refreshing=!1,t())}))}()}))},dataSync:function(){var t,e=o.default.getCurrentModuleCode(),i=o.default.getCurrentRoute(),a=i.meta&&i.meta.isTodo;if(o.default.isModuleNeedBuilding(e)&&!a){if(!this.buildingId)return new Promise((function(t){setTimeout((function(){t()}),500)}));t=this.buildingId}return l.a.addTrack("公共-手动下拉刷新","",""),r.a.beginManualUpdate(),o.default.checkSync(t).then((function(t){return r.a.endManualUpdate(),t})).catch((function(t){$log.error("下拉刷新错误",t),t&&"Error: Network Error"===t.toString()?s.a.alert("当前网络无法同步数据"):s.a.alert(t),r.a.endManualUpdate()}))},getScrollHeight:function(){return this.$refs["scroll-warp"].offsetHeight},getScrollTop:function(){return this.$refs["scroll-warp"].scrollTop},setScrollTop:function(t){this.$refs["scroll-warp"].scrollTop=t},scrollBy:function(t){var e=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:200,n=this.getScrollTop(),o=n+t,r=Math.round(i/16.7),s=t/r,l=n,c=a=+new Date;return n===o?Promise.resolve():new Promise((function(t){!function i(){window.requestAnimationFrame((function(){c===a&&(l+=s,e.$refs["scroll-warp"].scrollTop=l,n<o&&l<o||n>o&&l>o?i():(e.$refs["scroll-warp"].scrollTop=o,t()))}))}()}))},scrollTo:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:200,i=this.getScrollTop(),a=t-i;return this.scrollBy(a,e)},scrollToEle:function(t){var e=t.keyboardHeight||232,i=(t=t.$el?t.$el:t).getBoundingClientRect(),a=this.$refs["scroll-warp"].getBoundingClientRect();if(i&&a){var o=document.documentElement.clientHeight-(n.a.state.global.isNumberInputOpen?e:0),r=a.bottom<o?a.bottom:o,s=a.top-i.top,l=i.bottom-r;s>0?this.scrollBy(-s-10):l>0&&this.scrollBy(l+10)}},isCurrent:function(e,i){var a=this;e.length&&t.each(e,(function(t){t._uid===i?a.isCurrKeyboard=!0:a.isCurrent(t.$children,i)}))},onNumberKeyboardOpen:function(t){this.isCurrKeyboard=!1,this.isCurrent(this.$children,t._uid),this.isCurrKeyboard&&this.scrollToEle(t)}}}}).call(this,i("391c"))},d966:function(t,e,i){"use strict";i("a693")},e1e7:function(t,e,i){"use strict";(function(t){i("cc57"),i("163d");var a=i("07d2"),n=i("4e8c");e.a={name:"SlideUpSelect",components:{Item:a.a},props:{title:{type:String,default:""},value:{type:Object,default:function(){return{}}},options:{type:Array,default:function(){return[]}},placeholder:{type:String,default:"请选择"},emptyText:{type:String,default:"暂无数据"},mode:{type:String,default:"edit"},editabled:{type:Boolean,default:!0},showNote:{type:String},allowSearch:{type:Boolean,defalut:!1},initHeight:{type:Number,default:400},historyKey:{type:String,default:"historyHey"}},data:function(){return{isOpen:!1}},computed:{text:function(){return t.isEmpty(this.value)?this.editabled?"":"无":this.value.name}},created:function(){var t=this;n.a.$on("afterClosePopup",(function(){t.isOpen=!1}))},activated:function(){n.a.resultListLimit()},methods:{openSelect:function(){var t=this;n.a.openPopup({title:this.title,options:this.options,selected:this.value,showNote:this.showNote,emptyText:this.emptyText,allowSearch:this.allowSearch,initHeight:this.initHeight,historyKey:this.historyKey,componentUid:this._uid,callback:function(e){t.$emit("input",e),t.$emit("onSelect",e)}}),this.isOpen=!0}}}}).call(this,i("391c"))},e89f:function(t,e,i){"use strict";var a=i("04f3"),n=i("cf09"),o=i("4360"),r=0;e.a={name:"PopupMixin",data:function(){return{backButtonEvent:null}},watch:{show:function(t){var e=this;if(t){if(this.$nextTick((function(){e.$el&&e.$el.style&&(e.$el.style.zIndex=++n.a.zIndex,r++,o.a.commit("app/SET_HAS_POPUP",!!r))})),!this.backButtonEvent){var i=this.close||this.closePopup;this.backButtonEvent=Object(a.a)(i)}}else--r<0&&(r=0),o.a.commit("app/SET_HAS_POPUP",!!r),this.backButtonEvent&&(Object(a.c)(this.backButtonEvent),this.backButtonEvent=null)}},methods:{}}},ef48:function(t,e,i){var a=i("9d55");"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);(0,i("85cb").default)("a1a65c0c",a,!0,{sourceMap:!1,shadowMode:!1})},f764:function(t,e,i){"use strict";i("65a8");var a={name:"NocBorderTitle",props:{text:{type:String,default:""}},data:function(){return{}}},n=(i("b6b4"),i("17cc")),o=Object(n.a)(a,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",this._g({staticClass:"problem-detail-header border-bottom"},this.$listeners),[e("div",{staticClass:"status status-blue"},[this._v(this._s(this.text))]),this._t("default")],2)}),[],!1,null,"26783058",null);e.a=o.exports}}]);