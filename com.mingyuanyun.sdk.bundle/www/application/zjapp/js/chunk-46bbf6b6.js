(window.webpackJsonp_module_entry_zjapp_=window.webpackJsonp_module_entry_zjapp_||[]).push([["chunk-46bbf6b6"],{"03c3":function(e,t,o){e.exports=o.p+"img/ncov4.fef570e5.png"},"04e7":function(e,t,o){var n=o("6623");"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);(0,o("85cb").default)("dcf5ba2a",n,!0,{sourceMap:!1,shadowMode:!1})},"23b5":function(e,t,o){"use strict";o.r(t);o("f548"),o("cc57"),o("e10e"),o("6d57");var n=o("774b"),i=o("162a"),r=(o("4ad6"),o("3bd5")),l=o("6144"),a=o("2137"),s=o("c745"),c=(o("391c"),[{routerName:"NcovWorkConditions",moduleName:"复工条件准备",icon:o("d280"),describe:"项目经理",role:406},{routerName:"NcovPersonBackRecord",moduleName:"个人返程记录",icon:o("d73f"),describe:"甲方、监理、施工方驻场人员",role:405},{routerName:"ncovEnter",moduleName:"人员进出场登记",icon:o("bfdc"),describe:"专职出入口登记人员",role:401},{routerName:"NcovTemperatureIndex",moduleName:"在场人员日常测温",icon:o("03c3"),describe:"专职卫生员",role:402},{routerName:"NcovTemperatureGemdaleIndex",moduleName:"在场人员日常测温",icon:o("03c3"),describe:"专职卫生员",role:407},{routerName:"NcovDisinfectIndex",moduleName:"防疫消杀",icon:o("ed20"),describe:"专职卫生员",role:403},{routerName:"NocvMaterialInventory",moduleName:"防疫物资盘点",icon:o("f6c8"),describe:"专职卫生员",role:404}]),u={name:"NcovIndex",components:{Scroller:n.a,DropDownSelectSingle:a.a},data:function(){return{isLoading:!0,menuList:c,h5Site:"",sectionOptions:[],currentSection:{},roles:[]}},computed:{projectSelected:function(){return this.$store.state.global.currentProject}},created:function(){var e=this;i.a.request("/site/get-site-url",{name:"MobileCheckQualityH5Site"}).then((function(t){e.h5Site=t}))},activated:function(){this.getRoles(),this.getSectionList()},deactivated:function(){this.$refs["home-index-section-select"].closePopup()},methods:{getRoles:function(){var e=this;return this.menuList=[],s.a.getRoles().then((function(t){if(!t.length)return!1;c.forEach((function(o){~t.indexOf(o.role)&&e.menuList.push(o)}))}))},onSelectSection:function(e){console.log(e),this.currentSection=e,l.a.saveObject("ncov-index-section-default"+this.projectSelected.id,e,l.a.level.user)},getSectionList:function(){var e=this;i.a.request("/online/project/get-bidsection-list",{proj_id:this.projectSelected.id}).then((function(t){e.sectionOptions=t;var o=l.a.getObject("ncov-index-section-default"+e.projectSelected.id,l.a.level.user)||{},n=t.filter((function(e){return o.id===e.id})),i=Object.keys(o).length>0&&n.length>0?n[0]:t[0];e.currentSection=i,l.a.saveObject("ncov-index-section-default"+e.projectSelected.id,i,l.a.level.user)})).finally((function(){e.isLoading=!1}))},goModulesView:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if("NcovPersonBackRecord"===e.routerName&&this.h5Site){var t=r.a.getUser().tenant_code,o=r.a.getUser().user_id,n="".concat(this.h5Site,"/return-trip?tenant_code=").concat(t,"&proj_id=").concat(this.projectSelected.id,"&bidsection_id=").concat(this.currentSection.id),i=(n+="&t="+(new Date).getTime()+"&o=".concat(t))+"&app_user_id="+o;console.log({shareUrl:n}),this.$router.push({path:"/ncov-iframe",query:{url:i,title:"个人返程记录",share_url:n,share_description:this.projectSelected.name+this.currentSection.name+"个人返程记录",qrCodeId:this.currentSection.id,name:this.projectSelected.name+this.currentSection.name}})}else this.$router.push({name:e.routerName,query:{sectionId:this.currentSection.id}})},goBack:function(){this.$router.replace({name:"WorkBench"},!0)}}},d=(o("f10f"),o("17cc")),p=Object(d.a)(u,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("page-content",[!e.isLoading&&e.sectionOptions.length?o("drop-down-select-single",{ref:"home-index-section-select",attrs:{slot:"header-bar-center",options:e.sectionOptions,selected:e.currentSection},on:{select:e.onSelectSection},slot:"header-bar-center"}):e._e(),e.sectionOptions.length?o("scroller",{staticClass:"scroller-ncov"},e._l(e.menuList,(function(t,n){return o("div",{key:n,staticClass:"menu-list van-hairline--bottom",on:{click:function(o){e.goModulesView(t)}}},[o("div",{staticClass:"module-img",style:{"background-image":"url("+t.icon+")"}}),o("div",{staticClass:"module-content"},[o("p",{staticClass:"module-place"},[e._v(e._s(t.moduleName))]),o("div",{staticClass:"module-describe"},[e._v("适用人员："+e._s(t.describe))])]),o("div",{staticClass:"arrow-icon"},[o("icon",{attrs:{name:"arrow-right"}})],1)])}))):e._e(),o("loading-status",{attrs:{"is-loading":e.isLoading,"is-empty":!e.sectionOptions.length,"empty-text":"该项目下无标段"}})],1)}),[],!1,null,"5d230a6d",null);t.default=p.exports},6623:function(e,t,o){var n=o("5454");(e.exports=o("690e")(!1)).push([e.i,".zjapp .scroller-ncov[data-v-5d230a6d]{padding:10px 20px;background:#fff}.zjapp .building-select-con[data-v-5d230a6d]{display:inline-block;position:relative;padding-right:23px;max-width:calc(100% - 220px);overflow:hidden;text-overflow:ellipsis;white-space:nowrap;vertical-align:top}.zjapp .building-select-con .arrow[data-v-5d230a6d]{position:absolute;top:13px;right:0;width:18px;height:18px;background:url("+n(o("7fb27"))+") no-repeat;background-size:100% 100%;transition:transform .2s}.zjapp .building-select-con .arrow.active[data-v-5d230a6d]{transform:rotate(180deg)}.zjapp .menu-list[data-v-5d230a6d]{display:flex;align-items:center;padding:18px 0}.zjapp .menu-list .module-img[data-v-5d230a6d]{position:relative;flex:0 0 48px;width:48px;height:48px;background:no-repeat 50%;background-size:cover;margin:0 20px 0 0}.zjapp .menu-list .module-content[data-v-5d230a6d]{flex:1;overflow:hidden}.zjapp .menu-list .module-content .module-place[data-v-5d230a6d]{width:100%;line-height:22px;font-weight:500;margin:1px 0 5px 0;font-size:16px;color:#333;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.zjapp .menu-list .module-content .module-describe[data-v-5d230a6d]{line-height:20px;color:#999}.zjapp .menu-list .arrow-icon[data-v-5d230a6d]{color:#c8c8c8}.zjapp .loading-status-button[data-v-5d230a6d]{padding:5px 16px;background:linear-gradient(270deg,#55abff,#4c7aff);border-radius:15px;margin-top:30px;color:#fff;font-size:14px}",""])},"774b":function(e,t,o){"use strict";var n=o("d18d").a,i=(o("b225"),o("17cc")),r=Object(i.a)(n,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{ref:"scroll-warp",staticClass:"scroll-warp",class:{"scroll-warp-pulling":e.pulling,"scroll-warp-complete":!e.hasNext&&!e.isEmpty,"scroll-warp-empty":e.isEmpty},style:{"padding-bottom":e.numberKeyboardCoverHeight+"px"},on:{scroll:e.onScroll,touchstart:e.onTouchstart,touchmove:e.onTouchmove,touchend:e.onTouchend}},[e.allowPullDown?o("div",{staticClass:"pull-refresh-warp",style:{height:e.pullDist+"px"}},[o("div",{staticClass:"pull-refresh"},[o("div",{staticClass:"animation-refresher",class:{refreshing:e.refreshing}}),e.updateTime?o("p",{staticClass:"pull-refresh-date"},[e._v("最后成功同步："+e._s(e.updateTime))]):e._e()])]):e._e(),e._t("default"),e.loading?o("div",{staticClass:"page-loading"},[o("svg",{staticClass:"svg-loading",attrs:{viewBox:"0 0 80 80"}},[o("circle",{attrs:{cx:"40",cy:"40",r:"36"}})])]):e._e(),e.hasNext||e.isEmpty?e._e():[e.$slots.end?e._t("end"):e._e(),!e.$slots.end&&e.endText?o("div",{staticClass:"end-text"},[e._v("\n      "+e._s(e.endText)+"\n    ")]):e._e()]],2)}),[],!1,null,"2b1a346c",null);t.a=r.exports},"9d55":function(e,t,o){(e.exports=o("690e")(!1)).push([e.i,'.zjapp .scroll-warp[data-v-2b1a346c]{flex:1;overflow:auto;-webkit-overflow-scrolling:touch}.zjapp .scroll-warp-pulling[data-v-2b1a346c]{overflow:hidden}.zjapp .scroll-warp-complete[data-v-2b1a346c]:after{content:"";display:block;height:100px}.zjapp .scroll-warp-empty[data-v-2b1a346c]{display:flex;flex-direction:column}.zjapp .pull-refresh-warp[data-v-2b1a346c]{position:relative;height:0;overflow:hidden}.zjapp .pull-refresh[data-v-2b1a346c]{position:absolute;left:0;bottom:0;height:70px;width:100%;padding:6px;text-align:center}.zjapp .pull-refresh-date[data-v-2b1a346c]{margin-top:4px;height:16px;line-height:16px;font-size:12px;color:#bcbcbc}.zjapp .page-loading[data-v-2b1a346c]{padding:10px;text-align:center}.zjapp .end-text[data-v-2b1a346c]{color:#c8c8c8;background:#f4f4f4;position:relative;line-height:76px;height:76px;text-align:center}.zjapp .end-text[data-v-2b1a346c]:after,.zjapp .end-text[data-v-2b1a346c]:before{content:"";position:absolute;width:48px;height:1px;background:#e4e4e4;top:50%;margin-top:-1px}.zjapp .end-text[data-v-2b1a346c]:after{left:50%;transform:translateX(-92px)}.zjapp .end-text[data-v-2b1a346c]:before{right:50%;transform:translateX(90px)}.zjapp .end-slot[data-v-2b1a346c]{padding:30px;line-height:18px;text-align:center;color:#c8c8c8}',""])},b225:function(e,t,o){"use strict";o("ef48")},bfdc:function(e,t,o){e.exports=o.p+"img/ncov3.83da804a.png"},d18d:function(e,t,o){"use strict";(function(e){o("2b45");var n,i=o("4360"),r=o("48f4"),l=o("162a"),a=o("e2a7"),s=o("a500"),c=o("6f9e"),u={};t.a={name:"Scroller",props:{buildingId:{type:String,default:""},hasNext:{type:Boolean,default:!1},isEmpty:{type:Boolean,default:!1},isSync:{type:Boolean,default:!0},endText:{type:String,default:""},memoryScrollTop:{type:Boolean,default:!0},keepScrollTop:{type:Boolean},hasPullDown:{type:Boolean,default:!0},onPullDown:{type:Function}},data:function(){return{pullDist:0,refreshing:!1,pulling:!1,loading:!1,scrollTop:0,isCurrKeyboard:!1,gapBottom:0}},computed:{allowPullDown:function(){return this.hasPullDown&&(!!this.$listeners.pullDown||!!this.onPullDown)},updateTime:function(){return i.a.state.global.businessDownloadTime},numberKeyboardCoverHeight:function(){return i.a.state.global.isNumberInputOpen?i.a.state.global.numberKeyboardHeight-this.gapBottom:0}},mounted:function(){var e=this;c.a.$on("numberKeyboardOpen",this.onNumberKeyboardOpen),this.$nextTick((function(){var t=e.$refs["scroll-warp"]&&e.$refs["scroll-warp"].getBoundingClientRect&&e.$refs["scroll-warp"].getBoundingClientRect();t&&(e.gapBottom=document.documentElement.clientHeight-t.bottom),e.$el&&e.$el.addEventListener("focus",(function(t){var o=t&&t.target,n=o&&o.tagName&&o.tagName.toLowerCase();if("input"===n||"textarea"===n){window.addEventListener("resize",(function t(){var n=o.getBoundingClientRect(),i=e.$el.getBoundingClientRect(),r=n.bottom-i.bottom;r>0&&e.scrollBy(r),window.removeEventListener("resize",t,!1)}),!1)}}),!0)}))},destroyed:function(){c.a.$off("numberKeyboardOpen",this.onNumberKeyboardOpen)},activated:function(){var e=this.keepScrollTop||this.$router.isBack&&this.memoryScrollTop;this.scrollTop&&e&&(this.$refs["scroll-warp"].scrollTop=this.scrollTop)},deactivated:function(){this.memoryScrollTop&&(this.scrollTop=this.$refs["scroll-warp"].scrollTop)},methods:{onScroll:function(e){var t=this,o=this.$refs["scroll-warp"].scrollTop,n=this.$refs["scroll-warp"].scrollHeight;if(o+this.$refs["scroll-warp"].clientHeight>=n-5&&!this.loading&&this.hasNext){this.loading=!0;var i=this.$listeners.loadNext();i&&i.then&&"function"==typeof i.then?i.then((function(){t.loading=!1})):this.loading=!1}this.$emit("scroll",e)},getTouchDiretion:function(e){if(!(u&&e&&e.touches&&e.touches[0]))return"";var t=e.touches[0].clientX,o=e.touches[0].clientY;return Math.abs(o-u.y)>Math.abs(t-u.x)&&Math.abs(o-u.y)>=3?o>u.y?"down":"up":""},onTouchstart:function(e){this.allowPullDown&&e.touches&&1===e.touches.length&&(u={x:e.touches[0].clientX,y:e.touches[0].clientY,scrollTop:this.$refs["scroll-warp"].scrollTop,pullDist:this.pullDist})},onTouchmove:function(e){if(this.allowPullDown&&e.touches&&1===e.touches.length){var t=this.$refs["scroll-warp"].scrollTop,o=e.touches[0].clientY,n=o-u.y,i=this.getTouchDiretion(e);"down"===i?!this.refreshing&&t<=0?(this.pulling=!0,this.pullDist=(n-u.scrollTop)/2,e.preventDefault()):this.pulling=!1:"up"===i?this.pullDist>0&&(this.pullDist=u.pullDist-(u.y-o),e.preventDefault()):this.pullDist=u.pullDist}},onTouchend:function(){var e=this;this.allowPullDown&&(u={},this.pulling=!1,this.pullDist>=70&&this.isSync?this.refreshing?this.makePullTo(70):this.makePullTo(70).then((function(){if(e.refreshing=!0,e.onPullDown){var t=e.onPullDown();t&&t.then&&"function"==typeof t?t.finally((function(){e.refreshing=!1,e.makePullTo(0)})):(e.refreshing=!1,e.makePullTo(0))}else e.dataSync().then((function(){e.refreshing=!1,e.makePullTo(0),e.$emit("pullDown")})).catch((function(){e.refreshing=!1,e.makePullTo(0),e.$emit("pullDown")}))})):(this.refreshing=!1,this.makePullTo(0)))},makePullTo:function(e){var t=this,o=this.pullDist,n=e,i=n-o,r=o;return o===n?Promise.resolve():new Promise((function(e){!function l(){window.requestAnimationFrame((function(){r+=i/6,t.pullDist=r,o<n&&r<n||o>n&&r>n?l():(t.pullDist=n,t.refreshing=!1,e())}))}()}))},dataSync:function(){var e,t=r.default.getCurrentModuleCode(),o=r.default.getCurrentRoute(),n=o.meta&&o.meta.isTodo;if(r.default.isModuleNeedBuilding(t)&&!n){if(!this.buildingId)return new Promise((function(e){setTimeout((function(){e()}),500)}));e=this.buildingId}return s.a.addTrack("公共-手动下拉刷新","",""),l.a.beginManualUpdate(),r.default.checkSync(e).then((function(e){return l.a.endManualUpdate(),e})).catch((function(e){$log.error("下拉刷新错误",e),e&&"Error: Network Error"===e.toString()?a.a.alert("当前网络无法同步数据"):a.a.alert(e),l.a.endManualUpdate()}))},getScrollHeight:function(){return this.$refs["scroll-warp"].offsetHeight},getScrollTop:function(){return this.$refs["scroll-warp"].scrollTop},setScrollTop:function(e){this.$refs["scroll-warp"].scrollTop=e},scrollBy:function(e){var t=this,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:200,i=this.getScrollTop(),r=i+e,l=Math.round(o/16.7),a=e/l,s=i,c=n=+new Date;return i===r?Promise.resolve():new Promise((function(e){!function o(){window.requestAnimationFrame((function(){c===n&&(s+=a,t.$refs["scroll-warp"].scrollTop=s,i<r&&s<r||i>r&&s>r?o():(t.$refs["scroll-warp"].scrollTop=r,e()))}))}()}))},scrollTo:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:200,o=this.getScrollTop(),n=e-o;return this.scrollBy(n,t)},scrollToEle:function(e){var t=e.keyboardHeight||232,o=(e=e.$el?e.$el:e).getBoundingClientRect(),n=this.$refs["scroll-warp"].getBoundingClientRect();if(o&&n){var r=document.documentElement.clientHeight-(i.a.state.global.isNumberInputOpen?t:0),l=n.bottom<r?n.bottom:r,a=n.top-o.top,s=o.bottom-l;a>0?this.scrollBy(-a-10):s>0&&this.scrollBy(s+10)}},isCurrent:function(t,o){var n=this;t.length&&e.each(t,(function(e){e._uid===o?n.isCurrKeyboard=!0:n.isCurrent(e.$children,o)}))},onNumberKeyboardOpen:function(e){this.isCurrKeyboard=!1,this.isCurrent(this.$children,e._uid),this.isCurrKeyboard&&this.scrollToEle(e)}}}}).call(this,o("391c"))},d280:function(e,t,o){e.exports=o.p+"img/ncov1.9ffe39a7.png"},d73f:function(e,t,o){e.exports=o.p+"img/ncov2.54a2819c.png"},ed20:function(e,t,o){e.exports=o.p+"img/ncov5.287a5fb7.png"},ef48:function(e,t,o){var n=o("9d55");"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);(0,o("85cb").default)("a1a65c0c",n,!0,{sourceMap:!1,shadowMode:!1})},f10f:function(e,t,o){"use strict";o("04e7")},f6c8:function(e,t,o){e.exports=o.p+"img/ncov6.e05edb1a.png"}}]);