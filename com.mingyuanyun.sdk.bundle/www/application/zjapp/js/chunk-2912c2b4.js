(window.webpackJsonp_module_entry_zjapp_=window.webpackJsonp_module_entry_zjapp_||[]).push([["chunk-2912c2b4"],{4276:function(e,t,a){"use strict";a.r(t);a("5ab2"),a("e10e"),a("6d57");var s=a("28f8"),c=(a("cc57"),a("07d2")),i=a("774b"),n=a("409e"),r=a("f7ab"),o=a("3e47"),l=a("e2a7"),h=a("0f1f"),d=a("ef39"),p=a("ed08"),u=a("04f3");function f(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,s)}return a}function b(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?f(Object(a),!0).forEach((function(t){Object(s.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):f(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var g={name:"TemplateManage",components:{Item:c.a,Scroller:i.a,ProgressRound:n.a,SynchronizeTipBar:r.a,AppSearchBar:h.a,TemplateItem:d.a},data:function(){return{isSecondary:!1,localTemplateList:[],keyword:"",searchKeyword:"",mass:!1,checkAll:!1,pageTitle:"离线文档",searchBack:null}},computed:{filterList:function(){var e=this;return this.searchKeyword?this.localTemplateList.filter((function(t){return t.name.indexOf(e.searchKeyword)>-1})):this.localTemplateList},hasList:function(){return!!this.filterList.length},isIOSBezelLess:function(){return this.$store.state.app.isIOSBezelLess}},activated:function(){console.log("this.$router.isBack",this.$router.isBack),this.$router.isBack||(this.init(),this.getList())},methods:{init:function(){this.keyword="",this.searchKeyword="",this.pageTitle="离线文档",this.checkAll=!1,this.mass=!1,this.$refs["app-search-bar"]&&(this.$refs["app-search-bar"].isSeaching=!1)},getList:function(){var e=this;o.a._getLocalTemplateList().then((function(t){e.localTemplateList=t.reverse().map((function(e){return b(b({},e),{},{file_type:p.a.formatFiletypes(e.url||e.name),isLocal:!0,checked:!1})}))}))},onRefresh:function(){this.handleCancelSelectMulti(),this.getList()},keywordChange:function(e){this.keyword=e,this.keyword||(this.searchKeyword=""),this.calcIsSelectAll()},onSearch:function(e){this.searchKeyword=e,this.calcIsSelectAll()},onSelectMulti:function(){var e=this;this.mass=!0,this.pageTitle="已选择0个文件",this.searchBack=Object(u.a)((function(){e.handleCancelSelectMulti()}))},handleSelectNone:function(){this.localTemplateList.forEach((function(e){return e.checked=!1,e})),this.calcIsSelectAll()},handleSelectAll:function(){this.localTemplateList.forEach((function(e){return e.checked=!0,e})),this.calcIsSelectAll()},handleCancelSelectMulti:function(){this.handleSelectNone(),this.mass=!1,this.pageTitle="离线文档",Object(u.e)()},handleRemoveSelected:function(){var e=this,t=[];this.filterList.forEach((function(e){e.checked&&t.push(e.id)})),t.length?l.a.confirm("是否确定删除文件？").then((function(e){return e?o.a.removeTemplate(t):Promise.reject()})).then((function(){e.handleCancelSelectMulti(),e.onRefresh()})):l.a.alert("请先选择文件")},calcIsSelectAll:function(){var e=this;if(this.mass&&this.hasList){var t=0,a=!0;this.filterList.forEach((function(e){e.checked&&t++,e.checked||(a=!1)})),this.checkAll=a,this.pageTitle="已选择".concat(t,"个文件"),this.searchBack&&Object(u.c)(this.searchBack),this.searchBack=Object(u.a)((function(){e.handleCancelSelectMulti()}))}else Object(u.e)(),this.pageTitle="离线文档"}}},m=(a("8db6"),a("17cc")),k=Object(m.a)(g,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("page-content",{attrs:{title:e.pageTitle,"show-go-root":!e.mass||!e.hasList,"show-go-back":!e.mass||!e.hasList}},[e.mass&&e.hasList?a("div",{staticClass:"header-btn",attrs:{slot:"header-bar-left"},on:{click:e.handleCancelSelectMulti},slot:"header-bar-left"},[e._v("\n    取消\n  ")]):e._e(),!e.mass&&e.hasList?a("div",{staticClass:"header-btn",attrs:{slot:"header-bar-right"},on:{click:e.onSelectMulti},slot:"header-bar-right"},[e._v("\n    批量删除\n  ")]):e.mass&&e.hasList&&e.checkAll?a("div",{staticClass:"header-btn",attrs:{slot:"header-bar-right"},on:{click:e.handleSelectNone},slot:"header-bar-right"},[e._v("\n    全不选\n  ")]):e.mass&&e.hasList&&!e.checkAll?a("div",{staticClass:"header-btn",attrs:{slot:"header-bar-right"},on:{click:e.handleSelectAll},slot:"header-bar-right"},[e._v("\n    全选\n  ")]):e._e(),a("synchronize-tip-bar"),a("app-search-bar",{ref:"app-search-bar",attrs:{placeholder:"搜索",value:e.keyword},on:{keywordChange:e.keywordChange,search:e.onSearch}}),a("div",{staticClass:"border-block"}),a("scroller",{attrs:{"has-pull-down":!e.mass,"is-empty":!e.hasList},on:{pullDown:e.onRefresh}},[a("div",{staticClass:"local-content"},e._l(e.filterList,(function(t,s){return a("template-item",{key:s,attrs:{"data-source":t,keyword:e.searchKeyword,"show-trash":!0,"is-mass":e.mass,checked:t.checked},on:{refresh:e.onRefresh,calcIsSelectAll:e.calcIsSelectAll}})}))),a("loading-status",{attrs:{"is-loading":!1,"is-empty":!e.hasList,"empty-text":"暂无可查看文档"}})],1),e.mass&&e.hasList?a("div",{staticClass:"bottom",class:{"ios-bezel-less":e.isIOSBezelLess},on:{click:e.handleRemoveSelected}},[e._v("\n    删除\n  ")]):e._e()],1)}),[],!1,null,"07e544c6",null);t.default=k.exports},6163:function(e,t,a){(e.exports=a("690e")(!1)).push([e.i,".zjapp .border-block[data-v-07e544c6]{height:1px;border:none;background-image:linear-gradient(0deg,#dcdcdc,#dcdcdc 50%,transparent 0);background-size:100% 1px;background-repeat:no-repeat;background-position:bottom}.zjapp .downed-icon img[data-v-07e544c6]{padding:10px 15px;box-sizing:content-box;width:22px}.zjapp .local-content[data-v-07e544c6]{overflow:hidden}.zjapp .local-content[data-v-07e544c6] .template-item-wrapper .item{padding:10px 13px}.zjapp .bottom[data-v-07e544c6]{height:46px;line-height:46px;font-size:16px;color:#ff3b30;text-align:center;position:absolute;bottom:0;width:100%;background-color:#fff;border:none;background-image:linear-gradient(180deg,#ececec,#ececec 50%,transparent 0);background-size:100% 1px;background-repeat:no-repeat;background-position:top}.zjapp .bottom.ios-bezel-less[data-v-07e544c6]{height:84px;line-height:64px}",""])},"8db6":function(e,t,a){"use strict";a("bee2")},bee2:function(e,t,a){var s=a("6163");"string"==typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);(0,a("85cb").default)("31bef718",s,!0,{sourceMap:!1,shadowMode:!1})}}]);