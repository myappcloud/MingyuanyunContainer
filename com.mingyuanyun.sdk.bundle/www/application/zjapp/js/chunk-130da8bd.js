(window.webpackJsonp_module_entry_zjapp_=window.webpackJsonp_module_entry_zjapp_||[]).push([["chunk-130da8bd"],{"1cf0":function(t,e,i){var o=i("5454");(t.exports=i("690e")(!1)).push([t.i,'.zjapp .item-part-title[data-v-469910f2]{position:relative;padding:12px 15px;line-height:22px;font-size:16px;color:#333;font-weight:500;background-color:#fff}.zjapp .item-part-title[data-v-469910f2]:before{content:"";position:absolute;top:15px;left:0;width:4px;height:16px;background-color:#4275e8}.zjapp .item-list[data-v-469910f2]{padding:10px;display:flex;align-items:center;background-color:#fff;min-height:100px}.zjapp .item-list .img[data-v-469910f2]{display:block;width:80px;height:80px;background:no-repeat 50%;background-size:cover;background-color:#ddd}.zjapp .item-list .item-list-con[data-v-469910f2]{flex:1;padding:0 15px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.zjapp .item-list .title[data-v-469910f2]{color:#111;font-size:16px;padding-top:6px;margin:0;padding-right:10px;margin-right:-10px;font-weight:400}.zjapp .item-list .text[data-v-469910f2],.zjapp .item-list .title[data-v-469910f2]{height:30px;line-height:24px;white-space:nowrap!important;overflow:hidden!important;text-overflow:ellipsis!important}.zjapp .item-list .text[data-v-469910f2]{color:#8c8c8c;font-size:14px;padding-bottom:6px;padding-right:11px;margin-right:-10px}.zjapp .item-list .time[data-v-469910f2]{height:20px;line-height:20px;color:#b3b3b3;font-size:14px;padding-right:11px!important;margin-right:-10px!important;white-space:nowrap!important;overflow:hidden!important;text-overflow:ellipsis!important}.zjapp .item-list .icon-travel[data-v-469910f2]{display:inline-block;background:url('+o(i("6cd7"))+") no-repeat;background-size:cover;width:20px;height:6.6px;margin:0 8px 3px}.zjapp .item-list .item-list-status[data-v-469910f2]{min-width:4em;line-height:18px;text-align:right;white-space:normal;font-size:14px;color:#666}.zjapp .item-list .item-list-danger[data-v-469910f2]{background-color:#ff3c46}.zjapp .icon-temporary[data-v-469910f2],.zjapp .item-list .item-list-danger[data-v-469910f2]{height:16px;line-height:16px;padding:0 2px;font-size:12px;color:#fff;border-radius:2px}.zjapp .icon-temporary[data-v-469910f2]{display:inline-block;vertical-align:top;margin-top:4px;margin-left:5px;background-color:#b8c1cf}",""])},"306d":function(t,e,i){"use strict";i("887a")},"6cd7":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADYAAAASCAYAAAAQeC39AAAB7ElEQVRYR93WP09TURgG8Oe5/6oTBZo4aByMmjgpBSbjglCIJvoFTIs2unRx8CO4wOAn4BPclYSYiIPin0ShtFSXEicnBxMWk8rtOY9pSRN7MXiZOOHO7z3n+eU978khTunHU+qCc7A4lj96xSxAegrpp7V6Pj+d+3LcBjgHe7nVueyBrwFe7GOIpgUqC8WoeRycc7D1reSWhd4OIchmwKA2M8H3WXHOwQ51bCAR2gSrc1Phuyw452Cx5OcbyUMISxDG/kYQ2PEZlmeK/O+xdA7Wg8RfFeX3kzIslgGMpnHwWZu7cXTnnIT1cZJfqJv7XdiVNA5Emx6rR+GchQ1wY9tmUdKSoPHUbLXgoVyaiBr/mjmnYb3Am5sK9zxTttAypKGZA9DyAtZmr4cbaZzzsEHnxuvmnpFdAYcvFAC7XsBqGteHre0ql/uFgjzkslylJ1FjDXzabkXQM2A4J8FWYlW5Mx1tD7Ix/vD9bD4690TEI4KFkwideU8igPqz5h8+emx50uLtqajef7Csf+5csr7/BtKFzBu4WkiulYrh3QNYo3PVGv8ToBFX82bNRfDjbDG4SVJ89U0j2EteiHwAKcq6iHN14g/RPJ6fPLN68HaGuLGD/L7pXgN43rnAGQIZ4besaZcmozZJ2/vlD51RrxMIgrw4AAAAAElFTkSuQmCC"},"774b":function(t,e,i){"use strict";var o=i("d18d").a,n=(i("b225"),i("17cc")),a=Object(n.a)(o,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{ref:"scroll-warp",staticClass:"scroll-warp",class:{"scroll-warp-pulling":t.pulling,"scroll-warp-complete":!t.hasNext&&!t.isEmpty,"scroll-warp-empty":t.isEmpty},style:{"padding-bottom":t.numberKeyboardCoverHeight+"px"},on:{scroll:t.onScroll,touchstart:t.onTouchstart,touchmove:t.onTouchmove,touchend:t.onTouchend}},[t.allowPullDown?i("div",{staticClass:"pull-refresh-warp",style:{height:t.pullDist+"px"}},[i("div",{staticClass:"pull-refresh"},[i("div",{staticClass:"animation-refresher",class:{refreshing:t.refreshing}}),t.updateTime?i("p",{staticClass:"pull-refresh-date"},[t._v("最后成功同步："+t._s(t.updateTime))]):t._e()])]):t._e(),t._t("default"),t.loading?i("div",{staticClass:"page-loading"},[i("svg",{staticClass:"svg-loading",attrs:{viewBox:"0 0 80 80"}},[i("circle",{attrs:{cx:"40",cy:"40",r:"36"}})])]):t._e(),t.hasNext||t.isEmpty?t._e():[t.$slots.end?t._t("end"):t._e(),!t.$slots.end&&t.endText?i("div",{staticClass:"end-text"},[t._v("\n      "+t._s(t.endText)+"\n    ")]):t._e()]],2)}),[],!1,null,"2b1a346c",null);e.a=a.exports},"887a":function(t,e,i){var o=i("1cf0");"string"==typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);(0,i("85cb").default)("27a5ec73",o,!0,{sourceMap:!1,shadowMode:!1})},"8c0f":function(t,e,i){"use strict";i.r(e);var o=i("931b").a,n=(i("306d"),i("17cc")),a=Object(n.a)(o,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("page-content",{attrs:{title:"人员返程明细","show-go-root":!0}},[i("div",{staticClass:"header-btn",attrs:{slot:"header-bar-right"},on:{click:t.gotoSearch},slot:"header-bar-right"},[i("icon",{attrs:{name:"nav-search"}})],1),i("div",{staticClass:"item-part-title"},[t._v(t._s(t.projName)+t._s(t.bidsectionName))]),i("scroller",{staticClass:"mt10",attrs:{"is-empty":t.isLoading||!t.list||!t.list.length,"has-next":t.list.length<t.total},on:{loadNext:t.nextPage}},[t.isLoading?t._e():t._l(t.list,(function(e){return i("div",{key:e.userCode,staticClass:"item-list border-bottom",on:{click:function(i){t.gotoAdd(e)}}},[i("div",{staticClass:"img",style:{"background-image":"url("+e.thumbnail+")"}}),i("div",{staticClass:"item-list-con"},[i("h2",{staticClass:"title"},[t._v("\n            "+t._s(e.fullname)+"\n          ")]),i("p",{staticClass:"text"},[t._v(t._s(e.fromCity)+" "),i("i",{directives:[{name:"show",rawName:"v-show",value:e.fromCity||e.toCity,expression:"user.fromCity || user.toCity"}],staticClass:"icon-travel"}),t._v(" "+t._s(e.toCity))]),i("p",{staticClass:"time"},[t._v(t._s(t._f("formatDate")(e.arrival_time,"YYYY-MM-DD"))+"到达")])]),e.is_temporary?i("div",{staticClass:"icon-temporary"},[t._v("临时")]):t._e(),e.is_danger?i("div",{staticClass:"item-list-danger"},[t._v("\n          风险\n        ")]):t._e()])})),i("loading-status",{attrs:{"is-loading":t.isLoading,"is-empty":!t.list||!t.list.length,"empty-text":t.emptyTips}})],2)],1)}),[],!1,null,"469910f2",null);e.default=a.exports},"931b":function(t,e,i){"use strict";(function(t){i("5ab2"),i("6d57"),i("e10e");var o=i("28f8"),n=(i("cc57"),i("774b")),a=i("07d2"),r=i("6bf2"),s=i.n(r),l=i("3122"),c=(i("1b7e"),i("162a")),p=i("6144");function u(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,o)}return i}function d(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?u(Object(i),!0).forEach((function(e){Object(o.a)(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):u(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}e.a={name:"NcovEnterList",components:{Scroller:n.a,Item:a.a},data:function(){return{bidsectionId:"",bidsectionName:"",date:s()().format("YYYY-MM-DD"),isLoading:!0,emptyTips:"",pageindex:1,pagesize:15,total:0,list:[]}},computed:{projId:function(){return this.$store.state.global.currentProject.id},projName:function(){return this.$store.state.global.currentProject.name}},activated:function(){var t=p.a.getUserObject("ncov-index-section-default"+this.projId)||{};this.bidsectionId=t.id||"",this.bidsectionName=t.name||"",this.$router.isBack||(this.pageindex=1,this.getList())},methods:{getList:function(){var e=this;return 1===this.pageindex&&(this.isLoading=!0),c.a.request("/online/ncov-approach/get-return-trip-user",{bidsection_id:this.bidsectionId,page:this.pageindex,pageSize:this.pagesize}).then((function(i){if(!i)return Promise.reject({errmsg:"获取数据失败"});var o=t.map(i.list||[],(function(i){var o;try{o=JSON.parse(i.image)}catch(t){o=[]}return d(d({},i),{},{thumbnail:t.isEmpty(o)?"static/photo-empty.png":l.a.getThumbnailFromUrl(o[0].url),fromCity:e.cityNameReset(i.from_city),toCity:e.cityNameReset(i.to_city),is_danger:parseInt(i.is_danger),is_temporary:parseInt(i.source)})}));1===e.pageindex?e.list=o:e.list=e.list.concat(o),e.total=parseInt(i&&i.total?i.total:0),t.isEmpty(e.list)&&(e.emptyTips="暂无人员返程明细"),e.isLoading=!1})).catch((function(t){console.error(t),e.isLoading=!1}))},cityNameReset:function(t){return t&&"市"===t.substr(-1)?t.substr(0,t.length-1):t},gotoAdd:function(t){this.$router.push({name:"ncovEnterAdd",query:{id:t.user_id}})},gotoSearch:function(){this.$router.push({name:"ncovEnterSearch"})},nextPage:function(){return this.pageindex++,this.getList()}}}}).call(this,i("391c"))},"9d55":function(t,e,i){(t.exports=i("690e")(!1)).push([t.i,'.zjapp .scroll-warp[data-v-2b1a346c]{flex:1;overflow:auto;-webkit-overflow-scrolling:touch}.zjapp .scroll-warp-pulling[data-v-2b1a346c]{overflow:hidden}.zjapp .scroll-warp-complete[data-v-2b1a346c]:after{content:"";display:block;height:100px}.zjapp .scroll-warp-empty[data-v-2b1a346c]{display:flex;flex-direction:column}.zjapp .pull-refresh-warp[data-v-2b1a346c]{position:relative;height:0;overflow:hidden}.zjapp .pull-refresh[data-v-2b1a346c]{position:absolute;left:0;bottom:0;height:70px;width:100%;padding:6px;text-align:center}.zjapp .pull-refresh-date[data-v-2b1a346c]{margin-top:4px;height:16px;line-height:16px;font-size:12px;color:#bcbcbc}.zjapp .page-loading[data-v-2b1a346c]{padding:10px;text-align:center}.zjapp .end-text[data-v-2b1a346c]{color:#c8c8c8;background:#f4f4f4;position:relative;line-height:76px;height:76px;text-align:center}.zjapp .end-text[data-v-2b1a346c]:after,.zjapp .end-text[data-v-2b1a346c]:before{content:"";position:absolute;width:48px;height:1px;background:#e4e4e4;top:50%;margin-top:-1px}.zjapp .end-text[data-v-2b1a346c]:after{left:50%;transform:translateX(-92px)}.zjapp .end-text[data-v-2b1a346c]:before{right:50%;transform:translateX(90px)}.zjapp .end-slot[data-v-2b1a346c]{padding:30px;line-height:18px;text-align:center;color:#c8c8c8}',""])},b225:function(t,e,i){"use strict";i("ef48")},d18d:function(t,e,i){"use strict";(function(t){i("2b45");var o,n=i("4360"),a=i("48f4"),r=i("162a"),s=i("e2a7"),l=i("a500"),c=i("6f9e"),p={};e.a={name:"Scroller",props:{buildingId:{type:String,default:""},hasNext:{type:Boolean,default:!1},isEmpty:{type:Boolean,default:!1},isSync:{type:Boolean,default:!0},endText:{type:String,default:""},memoryScrollTop:{type:Boolean,default:!0},keepScrollTop:{type:Boolean},hasPullDown:{type:Boolean,default:!0},onPullDown:{type:Function}},data:function(){return{pullDist:0,refreshing:!1,pulling:!1,loading:!1,scrollTop:0,isCurrKeyboard:!1,gapBottom:0}},computed:{allowPullDown:function(){return this.hasPullDown&&(!!this.$listeners.pullDown||!!this.onPullDown)},updateTime:function(){return n.a.state.global.businessDownloadTime},numberKeyboardCoverHeight:function(){return n.a.state.global.isNumberInputOpen?n.a.state.global.numberKeyboardHeight-this.gapBottom:0}},mounted:function(){var t=this;c.a.$on("numberKeyboardOpen",this.onNumberKeyboardOpen),this.$nextTick((function(){var e=t.$refs["scroll-warp"]&&t.$refs["scroll-warp"].getBoundingClientRect&&t.$refs["scroll-warp"].getBoundingClientRect();e&&(t.gapBottom=document.documentElement.clientHeight-e.bottom),t.$el&&t.$el.addEventListener("focus",(function(e){var i=e&&e.target,o=i&&i.tagName&&i.tagName.toLowerCase();if("input"===o||"textarea"===o){window.addEventListener("resize",(function e(){var o=i.getBoundingClientRect(),n=t.$el.getBoundingClientRect(),a=o.bottom-n.bottom;a>0&&t.scrollBy(a),window.removeEventListener("resize",e,!1)}),!1)}}),!0)}))},destroyed:function(){c.a.$off("numberKeyboardOpen",this.onNumberKeyboardOpen)},activated:function(){var t=this.keepScrollTop||this.$router.isBack&&this.memoryScrollTop;this.scrollTop&&t&&(this.$refs["scroll-warp"].scrollTop=this.scrollTop)},deactivated:function(){this.memoryScrollTop&&(this.scrollTop=this.$refs["scroll-warp"].scrollTop)},methods:{onScroll:function(t){var e=this,i=this.$refs["scroll-warp"].scrollTop,o=this.$refs["scroll-warp"].scrollHeight;if(i+this.$refs["scroll-warp"].clientHeight>=o-5&&!this.loading&&this.hasNext){this.loading=!0;var n=this.$listeners.loadNext();n&&n.then&&"function"==typeof n.then?n.then((function(){e.loading=!1})):this.loading=!1}this.$emit("scroll",t)},getTouchDiretion:function(t){if(!(p&&t&&t.touches&&t.touches[0]))return"";var e=t.touches[0].clientX,i=t.touches[0].clientY;return Math.abs(i-p.y)>Math.abs(e-p.x)&&Math.abs(i-p.y)>=3?i>p.y?"down":"up":""},onTouchstart:function(t){this.allowPullDown&&t.touches&&1===t.touches.length&&(p={x:t.touches[0].clientX,y:t.touches[0].clientY,scrollTop:this.$refs["scroll-warp"].scrollTop,pullDist:this.pullDist})},onTouchmove:function(t){if(this.allowPullDown&&t.touches&&1===t.touches.length){var e=this.$refs["scroll-warp"].scrollTop,i=t.touches[0].clientY,o=i-p.y,n=this.getTouchDiretion(t);"down"===n?!this.refreshing&&e<=0?(this.pulling=!0,this.pullDist=(o-p.scrollTop)/2,t.preventDefault()):this.pulling=!1:"up"===n?this.pullDist>0&&(this.pullDist=p.pullDist-(p.y-i),t.preventDefault()):this.pullDist=p.pullDist}},onTouchend:function(){var t=this;this.allowPullDown&&(p={},this.pulling=!1,this.pullDist>=70&&this.isSync?this.refreshing?this.makePullTo(70):this.makePullTo(70).then((function(){if(t.refreshing=!0,t.onPullDown){var e=t.onPullDown();e&&e.then&&"function"==typeof e?e.finally((function(){t.refreshing=!1,t.makePullTo(0)})):(t.refreshing=!1,t.makePullTo(0))}else t.dataSync().then((function(){t.refreshing=!1,t.makePullTo(0),t.$emit("pullDown")})).catch((function(){t.refreshing=!1,t.makePullTo(0),t.$emit("pullDown")}))})):(this.refreshing=!1,this.makePullTo(0)))},makePullTo:function(t){var e=this,i=this.pullDist,o=t,n=o-i,a=i;return i===o?Promise.resolve():new Promise((function(t){!function r(){window.requestAnimationFrame((function(){a+=n/6,e.pullDist=a,i<o&&a<o||i>o&&a>o?r():(e.pullDist=o,e.refreshing=!1,t())}))}()}))},dataSync:function(){var t,e=a.default.getCurrentModuleCode(),i=a.default.getCurrentRoute(),o=i.meta&&i.meta.isTodo;if(a.default.isModuleNeedBuilding(e)&&!o){if(!this.buildingId)return new Promise((function(t){setTimeout((function(){t()}),500)}));t=this.buildingId}return l.a.addTrack("公共-手动下拉刷新","",""),r.a.beginManualUpdate(),a.default.checkSync(t).then((function(t){return r.a.endManualUpdate(),t})).catch((function(t){$log.error("下拉刷新错误",t),t&&"Error: Network Error"===t.toString()?s.a.alert("当前网络无法同步数据"):s.a.alert(t),r.a.endManualUpdate()}))},getScrollHeight:function(){return this.$refs["scroll-warp"].offsetHeight},getScrollTop:function(){return this.$refs["scroll-warp"].scrollTop},setScrollTop:function(t){this.$refs["scroll-warp"].scrollTop=t},scrollBy:function(t){var e=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:200,n=this.getScrollTop(),a=n+t,r=Math.round(i/16.7),s=t/r,l=n,c=o=+new Date;return n===a?Promise.resolve():new Promise((function(t){!function i(){window.requestAnimationFrame((function(){c===o&&(l+=s,e.$refs["scroll-warp"].scrollTop=l,n<a&&l<a||n>a&&l>a?i():(e.$refs["scroll-warp"].scrollTop=a,t()))}))}()}))},scrollTo:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:200,i=this.getScrollTop(),o=t-i;return this.scrollBy(o,e)},scrollToEle:function(t){var e=t.keyboardHeight||232,i=(t=t.$el?t.$el:t).getBoundingClientRect(),o=this.$refs["scroll-warp"].getBoundingClientRect();if(i&&o){var a=document.documentElement.clientHeight-(n.a.state.global.isNumberInputOpen?e:0),r=o.bottom<a?o.bottom:a,s=o.top-i.top,l=i.bottom-r;s>0?this.scrollBy(-s-10):l>0&&this.scrollBy(l+10)}},isCurrent:function(e,i){var o=this;e.length&&t.each(e,(function(t){t._uid===i?o.isCurrKeyboard=!0:o.isCurrent(t.$children,i)}))},onNumberKeyboardOpen:function(t){this.isCurrKeyboard=!1,this.isCurrent(this.$children,t._uid),this.isCurrKeyboard&&this.scrollToEle(t)}}}}).call(this,i("391c"))},ef48:function(t,e,i){var o=i("9d55");"string"==typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);(0,i("85cb").default)("a1a65c0c",o,!0,{sourceMap:!1,shadowMode:!1})}}]);