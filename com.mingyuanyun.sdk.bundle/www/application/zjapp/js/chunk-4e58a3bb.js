(window.webpackJsonp_module_entry_zjapp_=window.webpackJsonp_module_entry_zjapp_||[]).push([["chunk-4e58a3bb"],{"0e5e":function(a,e,t){"use strict";t.r(e);var o=t("996e").a,n=(t("29e0e"),t("17cc")),i=Object(n.a)(o,(function(){var a=this,e=a.$createElement,t=a._self._c||e;return t("page-content",{attrs:{title:"反馈问题"}},[t("div",{staticClass:"header-btn",attrs:{slot:"header-bar-right"},on:{click:a.feedbackHistory},slot:"header-bar-right"},[a._v("\n    历史\n    "),a.$store.state.global.hasNewFeedbackReply?t("i",{staticClass:"badge"}):a._e()]),t("div",{staticClass:"page-addproblem"},[t("div",{staticClass:"item item-toggle"},[a._v("\n      摇一摇反馈问题\n      "),t("van-switch",{attrs:{size:"26px"},on:{change:a.switchChecked},model:{value:a.checked,callback:function(e){a.checked=e},expression:"checked"}})],1),t("div",{staticClass:"list textarea-wrap"},[t("div",{staticClass:"item feedback-textarea"},[t("textarea",{directives:[{name:"model",rawName:"v-model",value:a.remark,expression:"remark"}],staticClass:"textarea",staticStyle:{height:"100px",width:"100%"},attrs:{"ng-class":"{placeholder:!problem.remark}",placeholder:"描述您遇到的系统错误或改进建议",maxlength:"200","ng-change":"saveRemark(remark)"},domProps:{value:a.remark},on:{input:function(e){e.target.composing||(a.remark=e.target.value)}}}),t("div",{staticClass:"word-num align-r"},[t("span",{attrs:{"ng-class":"{'color-red':remark.length>200}"}},[a._v(a._s(a.remark.length))]),a._v("/200\n        ")])])]),t("div",{staticClass:"list"},[t("div",{staticClass:"item"},[t("div",{staticClass:"feedback-imglist clearfix"},[a._l(a.photoList,(function(e,o){return t("div",{key:o,staticClass:"img"},[t("img",{attrs:{src:e.img_localpath,width:"60",height:"60"},on:{click:function(t){a.showLargeImg(e.img_localpath)}}}),t("span",{staticClass:"del-wrap",on:{click:function(e){a.removeImg(o)}}},[t("span",{staticClass:"del-icon"},[t("span")])])])})),t("i",{directives:[{name:"show",rawName:"v-show",value:a.photoList.length<3,expression:"photoList.length < 3"}],staticClass:"icon icon-addpic",on:{click:a.uploadImg}})],2)])]),t("app-button-group",[t("app-button",{on:{click:a.addFeedback}},[a._v("提交")])],1)],1)])}),[],!1,null,"5448a154",null);e.default=i.exports},"133a":function(a,e,t){a.exports=t.p+"img/icomoon.fc53c94f.svg"},"1a01":function(a,e,t){a.exports=t.p+"fonts/icomoon.3c409b04.woff"},"29e0e":function(a,e,t){"use strict";t("4170")},4170:function(a,e,t){var o=t("cf60");"string"==typeof o&&(o=[[a.i,o,""]]),o.locals&&(a.exports=o.locals);(0,t("85cb").default)("6f5e7240",o,!0,{sourceMap:!1,shadowMode:!1})},"8f50":function(a,e,t){a.exports=t.p+"fonts/icomoon.b693a9df.ttf"},"996e":function(a,e,t){"use strict";(function(a){var o=t("4ad6"),n=t("e2a7"),i=t("fd50"),c=t("6144"),r=t("bc69"),p=t("aaa9"),s=t("24de"),d=t("3122");e.a={name:"Feedback",data:function(){return{checked:!0,remark:"",photoList:[]}},mounted:function(){this.checked="on"===(c.a.getString(r.a.SHAKE_TO_FEED_BACK,c.a.level.user)||"on")},activated:function(){var a=this;p.a.getUnreadCount().then((function(e){a.$store.commit("global/SET_HAS_NEW_FEEDBACK_REPLY",!!e)}))},methods:{switchChecked:function(a){var e=a?"on":"off";c.a.saveString(r.a.SHAKE_TO_FEED_BACK,e,c.a.level.user)},uploadImg:function(a){var e=this;o.a.selectPicture({waterMark:!1,edit:!1}).then((function(a){return console.log("image",a),"dev"===APP_ENV?d.a.uploadImage(a[0]):a[0]})).then((function(a){e.photoList.push({img_localpath:a})}))},removeImg:function(a){var e=this;n.a.confirm("确定要删除图片吗？",(function(){e.photoList.splice(a,1)}))},showLargeImg:function(a){a&&o.a.openImageBrowser([a],0)},addFeedback:function(){var e=this,t=this.remark,o=this.photoList;return""===t?n.a.alert("请输入反馈意见"):t.length>200?n.a.alert("字数不能超过200字"):(n.a.loading("正在提交..."),void s.a.hasNetWork((function(){var c="";p.a.uploadDebugData(!0).then((function(a){c=a})).then((function(){var i=a.map(o,(function(a){return a.img_localpath}));return p.a.submitFeedback({images:i,remark:t,debug_file:c}).then((function(){n.a.alert("反馈成功"),setTimeout((function(){e.$router.back()}),500),e.remark="",e.photoList=[]}))})).catch((function(a){if(a)return $log.error(a),n.a.alert("提交失败，请稍后重试"),i.a.reject(a);n.a.alert("反馈成功"),setTimeout((function(){e.$router.back()}),500),e.remark="",e.photoList=[]})).finally((function(){}))})).catch((function(){n.a.hideLoading(),n.a.alert("提交失败，请稍后重试")})))},feedbackHistory:function(){this.$router.push({name:"FeedbackHistory"})}}}}).call(this,t("391c"))},a2b6:function(a,e,t){a.exports=t.p+"fonts/icomoon.f815833c.eot"},cf60:function(a,e,t){var o=t("5454");(a.exports=t("690e")(!1)).push([a.i,"@font-face{font-family:icomoon;src:url("+o(t("a2b6"))+");src:url("+o(t("a2b6"))+'#iefix) format("embedded-opentype"),url('+o(t("8f50"))+') format("truetype"),url('+o(t("1a01"))+') format("woff"),url('+o(t("133a"))+'#icomoon) format("svg");font-weight:400;font-style:normal}.zjapp [class*=" icon-"][data-v-5448a154],.zjapp [class^=icon-][data-v-5448a154]{font-family:icomoon!important;speak:none;font-style:normal;font-weight:400;font-variant:normal;text-transform:none;line-height:1;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.zjapp .icon-about[data-v-5448a154]:before{content:"\\E900"}.zjapp .icon-addpic[data-v-5448a154]:before{content:"\\E901"}.zjapp .icon-camera[data-v-5448a154]:before{content:"\\E902"}.zjapp .icon-delivery[data-v-5448a154]:before{content:"\\E903"}.zjapp .icon-delivery-focus[data-v-5448a154]:before{content:"\\E904"}.zjapp .icon-feedback[data-v-5448a154]:before{content:"\\E905"}.zjapp .icon-help[data-v-5448a154]:before{content:"\\E906"}.zjapp .icon-inputdel[data-v-5448a154]:before{content:"\\E907"}.zjapp .icon-login-corp[data-v-5448a154]:before{content:"\\E908"}.zjapp .icon-login-pwd[data-v-5448a154]:before{content:"\\E909"}.zjapp .icon-login-user[data-v-5448a154]:before{content:"\\E90A"}.zjapp .icon-opening[data-v-5448a154]:before{content:"\\E90B"}.zjapp .icon-opening-focus[data-v-5448a154]:before{content:"\\E90C"}.zjapp .icon-pwd-hide[data-v-5448a154]:before{content:"\\E90D"}.zjapp .icon-pwd-show[data-v-5448a154]:before{content:"\\E90E"}.zjapp .icon-search[data-v-5448a154]:before{content:"\\E90F"}.zjapp .icon-selected-multi[data-v-5448a154]:before{content:"\\E910"}.zjapp .icon-setting[data-v-5448a154]:before{content:"\\E911"}.zjapp .icon-simulate[data-v-5448a154]:before{content:"\\E912"}.zjapp .icon-simulate-focus[data-v-5448a154]:before{content:"\\E913"}.zjapp .icon-star[data-v-5448a154]:before{content:"\\E914"}.zjapp .icon-star-focus[data-v-5448a154]:before{content:"\\E915"}.zjapp .icon-unselected-multi[data-v-5448a154]:before{content:"\\E916"}.zjapp .icon-update[data-v-5448a154]:before{content:"\\E917"}.zjapp .icon-user[data-v-5448a154]:before{content:"\\E918"}.zjapp .icon-user-focus[data-v-5448a154]:before{content:"\\E919"}.zjapp .page-addproblem[data-v-5448a154]{background:#f2f2f2}.zjapp .page-addproblem .item[data-v-5448a154]{background-color:#fff;position:relative;z-index:2;display:block;margin:0 0 10px 0;padding:16px;font-size:16px}.zjapp .page-addproblem .item .van-switch[data-v-5448a154]{position:absolute;top:12px;right:16px;z-index:3}.zjapp .page-addproblem .feedback-textarea[data-v-5448a154]{position:relative}.zjapp .page-addproblem .feedback-textarea textarea[data-v-5448a154]{border:0}.zjapp .page-addproblem .feedback-textarea .word-num[data-v-5448a154]{position:absolute;right:15px;bottom:0;color:#999;font-size:12px}.zjapp .page-addproblem .feedback-imglist .img[data-v-5448a154]{float:left;margin-right:15px;width:60px;height:60px;position:relative}.zjapp .page-addproblem .feedback-imglist .img img[data-v-5448a154]{width:60px;height:60px}.zjapp .page-addproblem .feedback-imglist .icon-camera[data-v-5448a154]{float:left;font-size:72px;margin:-5px 0 0 -5px;color:#4275e8}.zjapp .page-addproblem .feedback-imglist .img .del-wrap[data-v-5448a154]{display:inline-block;position:absolute;right:-10px;top:-10px;padding:5px}.zjapp .page-addproblem .feedback-imglist .img .del-icon[data-v-5448a154]{position:relative;display:inline-block;width:15px;height:15px;text-align:center;overflow:hidden;border-radius:15px;background-color:#ff4545}.zjapp .page-addproblem .feedback-imglist .img .del-icon span[data-v-5448a154]{display:inline-block;width:9px;height:2px;position:absolute;top:6px;left:3px;background-color:#fff}.zjapp .page-addproblem .feedback-imglist .icon-addpic[data-v-5448a154]{float:left;font-size:72px;margin:-5px 0 0 -5px;color:#4275e8}',""])}}]);