(window.webpackJsonp_module_entry_zjapp_=window.webpackJsonp_module_entry_zjapp_||[]).push([["report-process-accept-project-process-v3"],{"0053":function(t,e,a){var i=a("e821");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);(0,a("85cb").default)("4f272cb4",i,!0,{sourceMap:!1,shadowMode:!1})},d5a3:function(t,e,a){"use strict";a.r(e);a("6a61");var i,n=a("2e91"),r=a("4c09"),o=(a("cc57"),a("6d57"),a("e2a7")),s=a("1b7e"),c=(a("162a"),a("918e")),l=a("7cb8"),d=a("6bf2"),u=a.n(d),p=a("391c"),m=a("c77f"),h={components:{TableChart:c.a},data:function(){return{loading:!0,viewSize:$rootScope.viewSize,renderDatas:[],activeUnitIndex:0,isHasNetwork:!0,pageTitle:""}},computed:{legendData:function(){var t=Object(p.get)(this.activeRenderData,"floor",[]),e=0,a=0,i=0;return t.forEach((function(t){t.item.forEach((function(t){t.status&&("验收中"===t.status&&e++,"已验收"===t.status&&a++,"已抽验"===t.status&&i++)}))})),[{name:"已报验 (".concat(e+a+i,"/").concat(this.allFloorItemsCount,")"),color:"blue-shallow"},{name:"已验收 (".concat(a+i,"/").concat(this.allFloorItemsCount,")"),color:"green"},{name:"已抽验 (".concat(i,"/").concat(this.allFloorItemsCount,")"),color:"purple"}]},activeRenderData:function(){return this.renderDatas[this.activeUnitIndex]||null},tableChartXItems:function(){var t=Object(p.get)(this.activeRenderData,"floor[0].item",[]).map((function(t){return{id:t.id,name:t.name}}));return[].concat(Object(r.a)(t),[{id:"",name:"",__isEmptyItem__:!0},{id:"",name:"",__isEmptyItem__:!0},{id:"",name:"",__isEmptyItem__:!0},{id:"",name:"",__isEmptyItem__:!0}])},tableChartYItems:function(){var t=Object(p.get)(this.activeRenderData,"floor",[]).map((function(t){return{id:t.floor_name,name:t.floor_name}}));return[].concat(Object(r.a)(t),[{id:"",name:"",__isEmptyItem__:!0},{id:"",name:"",__isEmptyItem__:!0},{id:"",name:"",__isEmptyItem__:!0},{id:"",name:"",__isEmptyItem__:!0}])},tableChartDatas:function(){var t=[],e=Object(p.get)(this.activeRenderData,"floor",[]),a={"验收中":"blue-shallow","已验收":"green","已抽验":"purple"};return e.forEach((function(e){e.item.forEach((function(i){i.status&&t.push({x:i.id,y:e.floor_name,status:a[i.status]||"",content:i.date?u()(i.date).format("MM-DD"):" "})}))})),t},allFloorItemsCount:function(){return this.tableChartXItems.filter((function(t){return!t.__isEmptyItem__})).length*this.tableChartYItems.filter((function(t){return!t.__isEmptyItem__})).length}},activated:function(){this.$router.isBack?this.loading=!1:this.init()},methods:{addSuffix:l.a,init:(i=Object(n.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.$route.query.building_title&&(this.pageTitle=this.$route.query.building_title),this.activeUnitIndex=0,this.activeUnitIndex=0,this.renderDatas=[],t.next=6,this.getRenderDatas();case 6:case"end":return t.stop()}}),t,this)}))),function(){return i.apply(this,arguments)}),getRenderDatas:function(){var t=this;return this.loading=!0,s.a.getHasNetwork().then((function(e){if(t.isHasNetwork=e,!e)return Promise.reject("当前无网络")})).then((function(){var e={building_id:t.$route.query.building_id,bidsection_id:t.$route.query.section_id||""};return Object(m.j)(e)})).then((function(e){console.log("renderDatas",e),t.renderDatas=e,t.loading=!1})).catch((function(e){t.loading=!1,o.a.alert(e.errmsg||e)}))},tableChartClickHandler:function(t){var e=this.$route.query,a=e.building_id,i=e.building_title,n=e.proj_id,r=e.section_id,o=Object(p.get)(t,"x");if(o&&o.id){var s={projId:n,dateType:1,startDate:"",endDate:"",currentBuild:[{id:a,name:i}],currentCheckList:o?[o]:[]};this.$store.commit("defaultValues/SET_REPORT_PROCESS_FILTER",s),console.log("params...",s),this.$router.push({path:"/report-process-accept-v3/index",query:{proj_id:n,bidsection_id:r,building_id:a}})}}}},_=(a("ef95"),a("17cc")),f=Object(_.a)(h,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("page-content",{attrs:{title:t.pageTitle}},[!t.loading&&t.renderDatas.length>1?a("div",{staticClass:"tabs border-bottom"},[a("div",{staticClass:"tabs-scroll"},t._l(t.renderDatas,(function(e,i){return a("div",{key:i,staticClass:"tab",class:{cur:i===t.activeUnitIndex},on:{click:function(e){t.activeUnitIndex=i}}},[t._v("\n            "+t._s(t.addSuffix(e.unit_name,"单元"))+"\n            ")])})))]):t._e(),t.isHasNetwork&&!t.loading&&t.activeRenderData?a("table-chart",{staticClass:"table-chart",attrs:{"x-items":t.tableChartXItems,"y-items":t.tableChartYItems,datas:t.tableChartDatas,"show-all-color-cell-contain":!0,"cell-width":50,legend:t.legendData},on:{click:t.tableChartClickHandler}}):t._e(),t.isHasNetwork&&!t.loading&&0===t.renderDatas.length?a("loading-status",{attrs:{"is-empty":!0,"empty-text":"无验收进度",type:"report"}}):t._e(),t.isHasNetwork?t._e():a("loading-status",{attrs:{"is-loading":t.isLoading,"is-empty":!t.isHasNetwork,"empty-text":"当前无网络连接",type:"error"}}),a("loading-status",{attrs:{"is-loading":t.loading,"is-empty":!1,type:"report"}})],1)}),[],!1,null,"80bcc0d4",null);e.default=f.exports},e821:function(t,e,a){(t.exports=a("690e")(!1)).push([t.i,'.zjapp .tabs[data-v-80bcc0d4]{height:40px;font-size:0;text-align:center;background-color:#fff;overflow:visible}.zjapp .tabs-scroll[data-v-80bcc0d4]{padding:10px 0;margin:-10px 0;white-space:nowrap;overflow-x:auto}.zjapp .tabs-scroll[data-v-80bcc0d4]::-webkit-scrollbar{display:none}.zjapp .tab[data-v-80bcc0d4]{display:inline-block;padding:10px 15px;line-height:20px;font-size:16px;color:#333;white-space:nowrap}.zjapp .tab.cur[data-v-80bcc0d4]{position:relative;z-index:3;color:#4275e8}.zjapp .tab.cur[data-v-80bcc0d4]:after{content:"";position:absolute;z-index:3;bottom:-3px;left:50%;margin-left:-3px;width:7px;height:7px;border-radius:50%;background-color:#4275e8}.zjapp .table-chart[data-v-80bcc0d4]{flex:1}',""])},ef95:function(t,e,a){"use strict";a("0053")}}]);