(window.webpackJsonp_module_entry_zjapp_=window.webpackJsonp_module_entry_zjapp_||[]).push([["chunk-d0d9e32a"],{"3bbe":function(e,t,r){"use strict";r.d(t,"a",(function(){return p}));var n=r("5e8d"),i=r("162a"),a=r("bcc78");function p(e){return Object(n.a)().then((function(){var t=a.a.templetPlanV1UpdateReviewer.url;return i.a.post(t,null,e)}))}},"8b31":function(e,t,r){"use strict";(function(e){var n=r("fc9f");t.a={getTempletPlanList:function(e,t,r){var i="select * from templet_plan tp where proj_id = ?",a=[e];return r||(i+="and           (              exists               (                  select 1 from templet_plan_detail t                  where t.templet_plan_id = tp.id and (t.in_charge_by = ? or exists                       (select 1 from templet_plan_detail_reviewer r where r.templet_plan_detail_id = t.id and  r.user_id = ?)                  )              )          )",a=a.concat([t,t])),i+=" order by tp.created_on desc",n.a.query(i,a)},getTempletList:function(e,t){var r="select t.*, u.name as in_charge_by_name, c.name as contractor_name from templet_plan_detail t               join user u on u.id = t.in_charge_by               left join contractor c on c.id = t.contractor               where t.templet_plan_id = ? "+(t?"and (t.name like '%".concat(t,"%' ) "):"")+"order by t.sort";return n.a.query(r,[e])},getTempletView:function(e,t){return n.a.queryOne("select t.*, tp.name as templet_plan_name, c.name as contractor_name,              (select count(1) cnt from templet_plan_detail_reviewer r where r.templet_plan_detail_id = t.id and r.user_id = ? and ifnull(r.review_at, '') = '') as canReview           from templet_plan_detail t           join templet_plan tp on tp.id = t.templet_plan_id          left join contractor c on c.id = t.contractor           where t.id = ?",[t,e])},getTempletCheckpoints:function(e){return n.a.query("select * from templet_plan_checkpoint where templet_plan_detail_id = ? order by sort",[e])},getReviewList:function(e){return n.a.query("select * from templet_plan_detail_reviewer r where templet_plan_detail_id = ? order by review_at desc",[e])},delReviewList:function(e){return n.a.executeSql("delete from templet_plan_detail_reviewer where templet_plan_detail_id = ?",[e])},deleteReview:function(t){var r="delete from templet_plan_detail_reviewer where "+("id in ("+e.map(t,(function(){return"?"})).join(", ")+")");return n.a.executeSql(r,t)},insertReview:function(e){return n.a.insertObject("templet_plan_detail_reviewer",e)},getTempletReviewStatusList:function(e,t){return n.a.query("select t.*, \n      (select count(1) from templet_plan_detail_reviewer r where r.templet_plan_detail_id = t.id and r.user_id = ?) as isReviewer,\n      (select count(1) cnt from templet_plan_detail_reviewer r where r.templet_plan_detail_id = t.id and r.user_id = ? and ifnull(r.review_at, '') != '') as isReviewComplete,\n      (select count(1) cnt from templet_plan_detail_reviewer r where r.templet_plan_detail_id = t.id and ifnull(r.review_at, '') = '') as noReviewNum\n      from templet_plan_detail t\n      where t.templet_plan_id = ?",[t,t,e])},saveReview:function(e,t){return n.a.update("templet_plan_detail_reviewer",t,{id:e})},saveTemplet:function(e,t){return n.a.update("templet_plan_detail",t,{id:e})},saveCheckpoint:function(e,t){return n.a.update("templet_plan_checkpoint",t,{id:e})},getTempletData:function(e){return n.a.queryOne("select tpd.*, tpd.id as templet_id, tpd.name as templet_name, tp.id as plan_id, tp.name as plan_name, up.id as proj_id, up.name as proj_name,           c.id as contractor_id, c.name as contractor_name           from templet_plan_detail tpd           left join templet_plan tp on tp.id = tpd.templet_plan_id           left join user_project up on up.id = tp.proj_id           left join contractor c on c.id = tpd.contractor           where tpd.id = ?",[e])},getTempletDetail:function(e){return n.a.queryOne("select * from templet_plan_detail where id = ?",[e])},getProblemList:function(e){return n.a.query("select tpr.*, tp.name as plan_name, tpd.name as templet_name,           case when tpr.status = '草稿' then tpr.created_on else 0 end as order_weight           from templet_problem tpr           left join templet_plan_detail tpd on tpd.id = tpr.templet_plan_detail_id           left join templet_plan tp on tp.id = tpd.templet_plan_id           where templet_plan_detail_id = ? order by order_weight desc, tpr.repair_deadline asc, tpr.created_on desc",[e])},getProblemDetail:function(e){return n.a.queryOne("select tpr.*, tpr.templet_plan_id as plan_id, tp.name as plan_name, tpd.id as templet_id, tpd.name as templet_name,           up.name as proj_name,           u.id as repair_id , u.name as repair_name,           ur.id as reinspect_id , ur.name as reinspect_name,           ure.id as regist_id , ure.name as regist_name, ure.mobile as regist_mobile, ure.is_im_user as regist_is_im_user,           c.id as contractor_id, c.name as contractor_name           from templet_problem tpr           left join templet_plan_detail tpd on tpd.id = tpr.templet_plan_detail_id           left join templet_plan tp on tp.id = tpd.templet_plan_id           left join user_project up on up.id = tpr.proj_id           left join templet_problem_repair tpre on tpre.templet_problem_id = tpr.id           left join user u on u.id = tpr.repair_by           left join user ur on ur.id = tpr.reinspect_by           left join user ure on ure.id = tpr.regist_by           left join contractor c on c.id = tpr.contractor_id           where tpr.id = ?",[e])},getProblemRepair:function(e){return n.a.queryOne("select u.* from templet_problem_repair tpr           left join user u on u.id = tpr.repair           where tpr.templet_problem_id = ?",[e])},getProblemRepairBy:function(e){return n.a.queryOne("select u.* from templet_problem tp           left join user u on u.id = tp.repair_by           where tp.id = ?",[e])},insertProblem:function(e){return n.a.insertObject("templet_problem",e)},updateProblem:function(e){return n.a.update("templet_problem",e,{id:e.id})},deleteProblem:function(e){return n.a.delete("templet_problem",{id:e.id})},insertRepair:function(e){return n.a.insertObject("templet_problem_repair",e)},deleteRepair:function(e){return n.a.delete("templet_problem_repair",{templet_problem_id:e})},getProblemReinspect:function(e){return n.a.queryOne("select u.*, tprb.reinspect_date as reinspect_date, tprb.reinspect_image_file as reinspect_image_file, tprb.reinspect_remark as reinspect_remark,           tprb.id as reinspect_record_id           from templet_problem_reinspect_by tprb           left join user u on u.id = tprb.reinspect           where tprb.templet_problem_id = ?",[e])},insertRepository:function(e){return n.a.insertObject("templet_problem_reinspect_by",e)},deleteRepository:function(e){return n.a.delete("templet_problem_reinspect_by",{templet_problem_id:e})},updateRepositoryByProblem:function(e,t){return n.a.update("templet_problem_reinspect_by",e,{templet_problem_id:t})},updateRepositoryByProblemAndUser:function(e,t,r){return n.a.update("templet_problem_reinspect_by",e,{templet_problem_id:t,reinspect:r})},getProblemCc:function(e){return n.a.query("select u.*, tpc.type as type from templet_problem_cc tpc           left join user u on u.id = tpc.cc           where tpc.templet_problem_id = ? and type = '被抄送'",[e])},getProblemAllCc:function(e){return n.a.query("select u.*, tpc.type as type from templet_problem_cc tpc           left join user u on u.id = tpc.cc           where tpc.templet_problem_id = ?",[e])},insertCc:function(e){return n.a.insertObject("templet_problem_cc",e)},deleteCc:function(e){return n.a.delete("templet_problem_cc",{templet_problem_id:e,type:"被抄送"})}}}).call(this,r("391c"))},c130:function(e,t,r){"use strict";(function(e){r("5ab2"),r("e10e"),r("6d57"),r("06a2");var n=r("28f8"),i=(r("e697"),r("fd50")),a=r("e2a7"),p=r("3bd5"),o=r("ed08"),d=r("48f4"),l=r("c745"),c=r("8b31"),_=r("e87d"),u=r("0136"),m=r("6bf2"),s=r.n(m),f=r("4360"),b=r("3bbe");function g(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function h(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?g(Object(r),!0).forEach((function(t){Object(n.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):g(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var y={getTempletPlanList:function(e){return l.a.hasRole(33).then((function(t){return c.a.getTempletPlanList(e,p.a.getUser().user_id,t)}))},getTempletList:function(t,r){return c.a.getTempletList(t,r).then((function(r){var n=p.a.getUser();return c.a.getTempletReviewStatusList(t,n.user_id).then((function(t){console.log("reviewData ======",t);var i={},a={},p={};return e.each(t||[],(function(e){i[e.id]=e.isReviewer,a[e.id]=e.isReviewComplete,p[e.id]=e.noReviewNum})),e.each(r,(function(e){e.isInChargeBy=e.in_charge_by===n.user_id,e.isReviewer=i[e.id]>0,e.isReviewComplete=a[e.id]>0,e.noReviewNum=p[e.id]})),r}))})).then((function(t){var r=s()().startOf("day");return e.each(t,(function(e){var t;if(!e.deadline)return e.leftday="",void(e.overday="");var n=s()(e.deadline).startOf("day");if("已验收"===e.status){e.leftday="";var i=s()(e.complete_time).startOf("day");i.isAfter(n)?(t=i.diff(n,"days"),e.overday="超时"+t+"天验收"):e.overday=""}else if(r.isAfter(n))e.leftday="",t=r.diff(n,"days"),e.overday="超时"+t+"天";else{e.overday="";var a=n.diff(r,"days");e.leftday=0===a?"今天":a<=7?"还剩"+a+"天":""}})),t}))},getTempletView:function(t){var r=p.a.getUser();return c.a.getTempletView(t,r.user_id).then((function(n){return n?(n.canSubmit=n.in_charge_by===r.user_id&&!n.complete_time,n.canReview=n.canReview>0&&!n.canSubmit,_.a.getUser(n.in_charge_by).then((function(e){n.in_charge_by=e})).then((function(){return c.a.getReviewList(t).then((function(t){return _.a.getUsersByIds(e.map(t,"user_id")).then((function(r){n.participants=r,n.reviews=e.filter(t,(function(e){return!!e.review_at})),n.remark=n.remark||"",e.each(n.reviews,(function(t){t.user=e.find(r,e.matches({id:t.user_id})),t.pictures=JSON.parse(t.pictures||"[]"),t.review_at=t.review_at?s()(t.review_at).format("YYYY-MM-DD HH:mm"):""}));var i=p.a.getUser();n.myReview=e.find(t,(function(e){return!e.review_at&&e.user_id===i.user_id})),n.myReview&&(n.myReview.pictures=JSON.parse(n.myReview.pictures||"[]"),n.myReview.remark=n.myReview.remark||"")}))}))})).then((function(){return c.a.getTempletCheckpoints(t).then((function(t){n.checkpoints=e.map(t,(function(e){return h(h({},e),{},{images:JSON.parse(e.images||"[]")})}))}))})).then((function(){return n.pictures=JSON.parse(n.pictures||"[]"),n.complete_time=n.complete_time?s()(n.complete_time).format("YYYY-MM-DD HH:mm"):"",n}))):n}))},saveReview:function(e){return c.a.saveReview(e.id,{pictures:JSON.stringify(e.pictures),remark:e.remark,review_at:e.review_at})},saveChangeUser:function(t,r){return Object(b.a)({user_id:t,templet_plan_detail_id:r}).then((function(e){return a.a.alert("修改成功"),i.a.all([c.a.delReviewList(r),e])})).then((function(t){var r=t[1];return i.a.all(e.map(r,(function(e){return c.a.insertReview(e)})))})).catch((function(e){return $log.log("修改参与人错误信息",e),a.a.alert("修改失败")}))},submitReview:function(t,r){return e.isEmpty(t.remark)?i.a.reject({msg:"点评内容必填"}):(t.review_at=o.a.now(),y.saveReview(t).then((function(){return d.default.addSyncGroup([["templet_plan_detail_reviewer",t.id]])})).then((function(){return u.a.saveTodo({biz_id:t.id,type:2,module_code:"templet-plan",proj_id:r})})))},save:function(t){return c.a.saveTemplet(t.id,{status:t.status,complete_time:t.complete_time,remark:t.remark}).then((function(){return Promise.all(e.map(t.checkpoints||[],(function(e){return c.a.saveCheckpoint(e.id,{images:JSON.stringify(e.images)})})))}))},submit:function(e){return e.status="已验收",e.complete_time=o.a.now(),y.save(e).then((function(){return d.default.addSyncGroup([["templet_plan_detail",e.id],["templet_plan_checkpoint",e.id]])})).then((function(){var t=p.a.getUser();return c.a.getTempletView(e.id,t.user_id).then((function(t){var r;return r=t?1:2,u.a.saveTodo({biz_id:e.id,type:r,module_code:"templet-plan",proj_id:e.proj_id})}))}))},getProblemList:function(t){return c.a.getProblemList(t).then((function(t){var r=s()().format("YYYY-MM-DD");return e.each(t,(function(e){var t=s()(e.repair_deadline).format("YYYY-MM-DD");e.is_timeout=t<r})),t}))},getProblemDetail:function(t){return c.a.getProblemDetail(t).then((function(e){return e||i.a.reject("获取问题详情失败"),{id:e.id,status:e.status,project:{id:e.proj_id,name:e.proj_name},plan:{id:e.plan_id,name:e.plan_name},templet:{id:e.templet_id,name:e.templet_name},image_file:JSON.parse(e.image_file||"[]"),remark:e.remark,regist:{id:e.regist_id,name:e.regist_name,mobile:e.regist_mobile,is_im_user:e.regist_is_im_user},regist_date:e.regist_date,deadline:e.deadline||7,repair:{id:e.repair_id,name:e.repair_name},repair_deadline:e.repair_deadline,repair_image_file:JSON.parse(e.repair_image_file||"[]"),repair_remark:e.repair_remark,repair_date:e.repair_date,contractor:{id:e.contractor_id,name:e.contractor_name},reinspect:{id:e.reinspect_id,name:e.reinspect_name},reinspect_image_file:[],reinspect_remark:"",reinspect_date:"",created_by:e.created_by,sent_back_times:e.sent_back_times,sent_back_image_file:JSON.parse(e.sent_back_image_file||"[]"),sent_back_remark:e.sent_back_remark,close_date:e.close_date,close_reason:e.close_reason}})).then((function(e){return"草稿"===e.status||"待整改"===e.status?c.a.getProblemRepair(e.id).then((function(t){return e.repair=t||{},e})):c.a.getProblemRepairBy(e.id).then((function(t){return e.repair=t||{},e}))})).then((function(t){return c.a.getProblemReinspect(t.id).then((function(r){return e.isEmpty(r)?(t.reinspect={},t.reinspect_image_file=[],t.reinspect_remark="",t.reinspect_date="",t.reinspect_record_id=""):(t.reinspect=r,t.reinspect_image_file=JSON.parse(r.reinspect_image_file||"[]"),t.reinspect_remark=r.reinspect_remark||"",t.reinspect_date=r.reinspect_date||"",t.reinspect_record_id=r.reinspect_record_id||""),t}))})).then((function(e){return c.a.getProblemCc(e.id).then((function(t){return e.cc=t||[],e}))}))},createNewProblem:function(e){var t=p.a.getUser();return c.a.getTempletData(e).then((function(e){return{project:{id:e.proj_id,name:e.proj_name},plan:{id:e.plan_id,name:e.plan_name},templet:{id:e.templet_id,name:e.templet_name},image_file:[],remark:"",deadline:7,repair:{},contractor:{id:e.contractor_id,name:e.contractor_name},reinspect:{id:t.user_id,name:t.user_name},cc:[],regist:{}}}))},saveProblem:function(e){var t=p.a.getUser().user_id,r=new Date;r.setDate(r.getDate()+e.deadline);var n,i={id:e.id,proj_id:e.project.id,templet_plan_id:e.plan.id,templet_plan_detail_id:e.templet.id,contractor_id:e.contractor.id,remark:e.remark||"",image_file:JSON.stringify(e.image_file||[]),status:e.status||"草稿",deadline:e.deadline||7,repair_by:e.repair.id||"",repair_deadline:s()(r).format("YYYY-MM-DD"),repair_image_file:JSON.stringify(e.repair_image_file||[]),repair_remark:e.repair_remark||"",reinspect_by:e.reinspect.id||"",regist_by:e.regist_by||"",regist_date:e.regist_date||""};return i.id?n=c.a.updateProblem(i):(i.id=o.a.uuid(),i.created_on=o.a.now(),i.created_by=t,e.id=i.id,n=c.a.insertProblem(i)),n.then((function(){return y.saveRepair(e)})).then((function(){return y.saveReinspect(e)})).then((function(){return y.saveCc(e,e.cc)})).then((function(){return d.default.setLocalChanged(),i.id}))},addProblem:function(t){if(f.a.state.global.isPhotoRequired.TEMPLET_PROBLEM&&e.isEmpty(t.image_file))return i.a.reject("请拍摄问题照片");var r=p.a.getUser().user_id;return t.remark?e.isEmpty(t.repair)?i.a.reject("请选择整改人"):e.isEmpty(t.contractor)?i.a.reject("请选择责任单位"):e.isEmpty(t.reinspect)?i.a.reject("请选择复验人"):(t.status="待整改",t.regist_by=r,t.regist_date=o.a.now(),y.saveProblem(t).then((function(){return y.appendToCC(t.id,"登记人")})).then((function(){return d.default.addSyncGroup([["templet_problem",t.id],["templet_problem_repair",t.id],["templet_problem_reinspect_by",t.id],["templet_problem_cc",t.id]])})).then((function(){var e=2;return t.repair.id===r&&(e=1),u.a.saveTodo({biz_id:t.id,type:e,module_code:"templet-plan-problem",proj_id:t.project.id})}))):i.a.reject("请输入补充说明")},delProblem:function(e){return c.a.deleteProblem(e).then((function(){return d.default.setLocalChanged(),u.a.removeTodo(e.id)}))},saveRepair:function(e){var t=p.a.getUser().user_id;return c.a.deleteRepair(e.id).then((function(){return c.a.insertRepair({id:o.a.uuid(),templet_problem_id:e.id,repair:e.repair.id,created_on:o.a.now(),created_by:t})}))},saveReinspect:function(e){var t=p.a.getUser().user_id;return c.a.deleteRepository(e.id).then((function(){return c.a.insertRepository({id:o.a.uuid(),templet_problem_id:e.id,reinspect:e.reinspect.id,created_on:o.a.now(),created_by:t})}))},saveCc:function(t,r){var n=p.a.getUser().user_id;return c.a.deleteCc(t.id).then((function(){return i.a.all(e.map(r,(function(e){return c.a.insertCc({id:o.a.uuid(),templet_problem_id:t.id,cc:e.id,type:"被抄送",created_on:o.a.now(),created_by:n})})))}))},changeRepairDeadline:function(e){return c.a.updateProblem({id:e.id,repair_deadline:e.repair_deadline}).then((function(){return y.appendToCC(e.id,"操作人")})).then((function(){return d.default.setLocalChanged(),d.default.addSyncGroup([["templet_problem",e.id]])}))},changeContractor:function(e){return c.a.updateProblem({id:e.id,contractor_id:e.contractor.id||""}).then((function(){return y.appendToCC(e.id,"操作人")})).then((function(){return d.default.setLocalChanged(),d.default.addSyncGroup([["templet_problem",e.id]])}))},changeRepair:function(e,t){return y.saveRepair(e).then((function(){if(t)return y.changeContractor(e)})).then((function(){return y.appendToCC(e.id,"操作人")})).then((function(){return d.default.addSyncGroup([["templet_problem",e.id],["templet_problem_repair",e.id],["templet_problem_cc",e.id]])})).then((function(){var t=2,r=p.a.getUser().user_id;return e.repair.id===r&&(t=1),d.default.setLocalChanged(),u.a.saveTodo({biz_id:e.id,type:t,proj_id:e.project.id,module_code:"templet-plan-problem"})}))},changeReinspect:function(e){return y.saveReinspect(e).then((function(){return y.appendToCC(e.id,"操作人")})).then((function(){return d.default.setLocalChanged(),d.default.addSyncGroup([["templet_problem",e.id],["templet_problem_reinspect_by",e.id],["templet_problem_cc",e.id]])}))},changeCc:function(e){return y.saveCc(e,e.cc).then((function(){return d.default.setLocalChanged(),d.default.addSyncGroup([["templet_problem",e.id],["templet_problem_cc",e.id]])}))},saveRepairInfo:function(e){return c.a.updateProblem({id:e.id,repair_remark:e.repair_remark||"",repair_image_file:JSON.stringify(e.repair_image_file)})},appendToCC:function(t,r){var n=p.a.getUser().user_id;return c.a.getProblemAllCc(t).then((function(i){if(!e.some(i,(function(e){return e.id===n&&e.type===r}))){var a={id:o.a.uuid(),templet_problem_id:t,cc:n,type:r,created_on:o.a.now(),created_by:n};return c.a.insertCc(a)}}))},repairProblem:function(t){return f.a.state.global.isPhotoRequired.TEMPLET_REPAIR&&e.isEmpty(t.repair_image_file)?i.a.reject("请拍摄整改照片"):c.a.updateProblem({id:t.id,repair_by:t.repair.id,repair_remark:t.repair_remark||"",repair_image_file:JSON.stringify(t.repair_image_file),status:"待复验",repair_date:o.a.now()}).then((function(){return y.appendToCC(t.id,"操作人")})).then((function(){return d.default.addSyncGroup([["templet_problem",t.id],["templet_problem_cc",t.id]])})).then((function(){var e=2;return p.a.getUser().user_id===t.reinspect.id&&(e=1),d.default.setLocalChanged(),u.a.saveTodo({biz_id:t.id,type:e,module_code:"templet-plan-problem",proj_id:t.project.id})}))},reinspectProblem:function(e){var t=o.a.now(),r=p.a.getUser().user_id;return c.a.updateProblem({id:e.id,reinspect_by:e.reinspect.id,reinspect_completed_date:t,status:"已通过"}).then((function(){c.a.updateRepositoryByProblemAndUser({reinspect_date:o.a.now(),reinspect_image_file:JSON.stringify(e.reinspect_image_file||[]),reinspect_remark:e.reinspect_remark||""},e.id,r)})).then((function(){return y.appendToCC(e.id,"操作人")})).then((function(){return d.default.addSyncGroup([["templet_problem",e.id],["templet_problem_reinspect_by",e.id],["templet_problem_cc",e.id]])})).then((function(){return d.default.setLocalChanged(),u.a.saveTodo({biz_id:e.id,type:2,module_code:"templet-plan-problem",proj_id:e.project.id})}))},reinspectReject:function(e){var t,r=p.a.getUser().user_id;return"待复验"!==e.status?i.a.reject("问题单状态异常"):e.sent_back_remark?(t={id:e.id,status:"待整改",sent_back_by:r,sent_back_remark:e.sent_back_remark,sent_back_image_file:JSON.stringify(e.sent_back_image_file||[]),sent_back_date:o.a.now(),sent_back_times:(e.sent_back_times||0)+1},c.a.updateProblem(t).then((function(){return c.a.updateRepositoryByProblem({reinspect_date:"",reinspect_image_file:"[]",reinspect_remark:""},e.id)})).then((function(){return y.appendToCC(e.id,"操作人")})).then((function(){return d.default.addSyncGroup([["templet_problem",e.id],["templet_problem_cc",e.id]])})).then((function(){var t=2;return r===e.repair.id&&(t=1),d.default.setLocalChanged(),u.a.saveTodo({biz_id:e.id,type:t,module_code:"templet-plan-problem",proj_id:e.project.id})}))):i.a.reject("请填写退回原因")},close:function(e){var t;return"待整改"!==e.status?i.a.reject("问题单状态异常"):e.close_reason?(t={id:e.id,status:"已关闭",close_date:o.a.now(),close_reason:e.close_reason},c.a.updateProblem(t).then((function(){return y.appendToCC(e.id,"操作人")})).then((function(){return d.default.addSyncGroup([["templet_problem",e.id],["templet_problem_cc",e.id]])})).then((function(){return d.default.setLocalChanged(),u.a.saveTodo({biz_id:e.id,type:2,module_code:"templet-plan-problem",proj_id:e.project.id})})).catch((function(e){return $log.error(e),i.a.reject(e)}))):i.a.reject("请填写关闭原因")},getTempletDetail:function(e){return c.a.getTempletDetail(e)}};t.a=y}).call(this,r("391c"))}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9fX21vZHVsZV9lbnRyeV96amFwcF9fLy4vc3JjL2FwaS90ZW1wbGV0LXBsYW4tdjEvaW5kZXguanMiLCJ3ZWJwYWNrOi8vX19tb2R1bGVfZW50cnlfemphcHBfXy8uL3NyYy9yZXBvc2l0b3JpZXMvdGVtcGxldC1wbGFuLXJlcG9zaXRvcnkuanMiLCJ3ZWJwYWNrOi8vX19tb2R1bGVfZW50cnlfemphcHBfXy8uL3NyYy9zZXJ2aWNlL3RlbXBsZXQtcGxhbi90ZW1wbGV0LXBsYW4tc2VydmljZS5qcyJdLCJuYW1lcyI6WyJ1cGRhdGVSZXZpZXdlciIsImFjY2VwdERhdGEiLCJnZXRIYXNOZXR3b3JrIiwidGhlbiIsInVybCIsIkVTQVBJIiwidGVtcGxldFBsYW5WMVVwZGF0ZVJldmlld2VyIiwiV2ViU2VydmljZSIsInBvc3QiLCJnZXRUZW1wbGV0UGxhbkxpc3QiLCJwcm9qSWQiLCJ1c2VySWQiLCJoYXNBbGxSaWdodCIsInNxbCIsInBzIiwiY29uY2F0IiwibG9jYWxEQiIsInF1ZXJ5IiwiZ2V0VGVtcGxldExpc3QiLCJwbGFuSWQiLCJrZXl3b3JkcyIsImdldFRlbXBsZXRWaWV3IiwidGVtcGxldElkIiwicXVlcnlPbmUiLCJnZXRUZW1wbGV0Q2hlY2twb2ludHMiLCJnZXRSZXZpZXdMaXN0IiwiZGVsUmV2aWV3TGlzdCIsImRldGFpbElkIiwiZXhlY3V0ZVNxbCIsImRlbGV0ZVJldmlldyIsImlkcyIsIl8iLCJtYXAiLCJqb2luIiwiaW5zZXJ0UmV2aWV3IiwiZGF0YSIsImluc2VydE9iamVjdCIsImdldFRlbXBsZXRSZXZpZXdTdGF0dXNMaXN0Iiwic2F2ZVJldmlldyIsInJldmlld0lkIiwidXBkYXRlIiwiaWQiLCJzYXZlVGVtcGxldCIsInNhdmVDaGVja3BvaW50IiwiY2hlY2twb2ludElkIiwiZ2V0VGVtcGxldERhdGEiLCJnZXRUZW1wbGV0RGV0YWlsIiwiZ2V0UHJvYmxlbUxpc3QiLCJnZXRQcm9ibGVtRGV0YWlsIiwiZ2V0UHJvYmxlbVJlcGFpciIsImdldFByb2JsZW1SZXBhaXJCeSIsImluc2VydFByb2JsZW0iLCJwcm9ibGVtRGF0YSIsInVwZGF0ZVByb2JsZW0iLCJkZWxldGVQcm9ibGVtIiwiZGVsZXRlIiwiaW5zZXJ0UmVwYWlyIiwicmVwYWlyIiwiZGVsZXRlUmVwYWlyIiwicHJvYmxlbUlkIiwidGVtcGxldF9wcm9ibGVtX2lkIiwiZ2V0UHJvYmxlbVJlaW5zcGVjdCIsImluc2VydFJlcG9zaXRvcnkiLCJyZXBvc2l0b3J5IiwiZGVsZXRlUmVwb3NpdG9yeSIsInVwZGF0ZVJlcG9zaXRvcnlCeVByb2JsZW0iLCJ1cGRhdGVSZXBvc2l0b3J5QnlQcm9ibGVtQW5kVXNlciIsInJlaW5zcGVjdCIsImdldFByb2JsZW1DYyIsImdldFByb2JsZW1BbGxDYyIsImluc2VydENjIiwiY2MiLCJkZWxldGVDYyIsInR5cGUiLCJfc2VsZiIsIkNvbW1vbkJhc2VkYXRhU2VydmljZSIsImhhc1JvbGUiLCJUZW1wbGV0UGxhblJlcG9zaXRvcnkiLCJjb250ZXh0IiwiZ2V0VXNlciIsInVzZXJfaWQiLCJsaXN0IiwidXNlciIsInJldmlld0RhdGEiLCJjb25zb2xlIiwibG9nIiwiaXNSZXZpZXdlck1hcCIsImlzUmV2aWV3Q29tcGxldGVNYXAiLCJub1Jldmlld051bU1hcCIsImVhY2giLCJyZXZpZXciLCJpc1Jldmlld2VyIiwiaXNSZXZpZXdDb21wbGV0ZSIsIm5vUmV2aWV3TnVtIiwicmVjb3JkIiwiaXNJbkNoYXJnZUJ5IiwiaW5fY2hhcmdlX2J5Iiwibm93IiwibW9tZW50Iiwic3RhcnRPZiIsIm92ZXJkYXlzIiwiZGVhZGxpbmUiLCJsZWZ0ZGF5Iiwib3ZlcmRheSIsInN0YXR1cyIsImNvbXBsZXRlVGltZSIsImNvbXBsZXRlX3RpbWUiLCJpc0FmdGVyIiwiZGlmZiIsImxlZnRkYXlzIiwiY2FuU3VibWl0IiwiY2FuUmV2aWV3IiwiVXNlclJlcG9zaXRvcnkiLCJyZXZpZXdMaXN0IiwiZ2V0VXNlcnNCeUlkcyIsInVzZXJzIiwicGFydGljaXBhbnRzIiwicmV2aWV3cyIsImZpbHRlciIsInJldmlld19hdCIsInJlbWFyayIsImZpbmQiLCJtYXRjaGVzIiwicGljdHVyZXMiLCJKU09OIiwicGFyc2UiLCJmb3JtYXQiLCJjdXJyZW50VXNlciIsIm15UmV2aWV3IiwiY2hlY2twb2ludHMiLCJjaGVja3BvaW50IiwiaW1hZ2VzIiwic3RyaW5naWZ5Iiwic2F2ZUNoYW5nZVVzZXIiLCJ0ZW1wbGV0X3BsYW5fZGV0YWlsX2lkIiwiUG9wdXAiLCJhbGVydCIsIiRxIiwiYWxsIiwiaW5zZXJ0RGF0YSIsInVzZXJPYmoiLCJjYXRjaCIsImVycm9yIiwiJGxvZyIsInN1Ym1pdFJldmlldyIsImlzRW1wdHkiLCJyZWplY3QiLCJtc2ciLCJVdGlscyIsIkRhdGFTeW5jaHJvbml6ZXIiLCJhZGRTeW5jR3JvdXAiLCJUb2RvU2VydmljZSIsInNhdmVUb2RvIiwiYml6X2lkIiwibW9kdWxlX2NvZGUiLCJwcm9qX2lkIiwic2F2ZSIsIlByb21pc2UiLCJzdWJtaXQiLCJ0b2RheSIsIml0ZW0iLCJyZXBhaXJfZGVhZGxpbmUiLCJpc190aW1lb3V0IiwicHJvamVjdCIsIm5hbWUiLCJwcm9qX25hbWUiLCJwbGFuIiwicGxhbl9pZCIsInBsYW5fbmFtZSIsInRlbXBsZXQiLCJ0ZW1wbGV0X2lkIiwidGVtcGxldF9uYW1lIiwiaW1hZ2VfZmlsZSIsInJlZ2lzdCIsInJlZ2lzdF9pZCIsInJlZ2lzdF9uYW1lIiwibW9iaWxlIiwicmVnaXN0X21vYmlsZSIsImlzX2ltX3VzZXIiLCJyZWdpc3RfaXNfaW1fdXNlciIsInJlZ2lzdF9kYXRlIiwicmVwYWlyX2lkIiwicmVwYWlyX25hbWUiLCJyZXBhaXJfaW1hZ2VfZmlsZSIsInJlcGFpcl9yZW1hcmsiLCJyZXBhaXJfZGF0ZSIsImNvbnRyYWN0b3IiLCJjb250cmFjdG9yX2lkIiwiY29udHJhY3Rvcl9uYW1lIiwicmVpbnNwZWN0X2lkIiwicmVpbnNwZWN0X25hbWUiLCJyZWluc3BlY3RfaW1hZ2VfZmlsZSIsInJlaW5zcGVjdF9yZW1hcmsiLCJyZWluc3BlY3RfZGF0ZSIsImNyZWF0ZWRfYnkiLCJzZW50X2JhY2tfdGltZXMiLCJzZW50X2JhY2tfaW1hZ2VfZmlsZSIsInNlbnRfYmFja19yZW1hcmsiLCJjbG9zZV9kYXRlIiwiY2xvc2VfcmVhc29uIiwiZGV0YWlsIiwicmVpbnNwZWN0X3JlY29yZF9pZCIsImNyZWF0ZU5ld1Byb2JsZW0iLCJ0ZW1wbGV0RGF0YSIsInVzZXJfbmFtZSIsInNhdmVQcm9ibGVtIiwiRGF0ZSIsInNldERhdGUiLCJnZXREYXRlIiwicHJvbWlzZSIsInRlbXBsZXRfcGxhbl9pZCIsInJlcGFpcl9ieSIsInJlaW5zcGVjdF9ieSIsInJlZ2lzdF9ieSIsInV1aWQiLCJjcmVhdGVkX29uIiwic2F2ZVJlcGFpciIsInNhdmVSZWluc3BlY3QiLCJzYXZlQ2MiLCJzZXRMb2NhbENoYW5nZWQiLCJhZGRQcm9ibGVtIiwic3RvcmUiLCJzdGF0ZSIsImdsb2JhbCIsImlzUGhvdG9SZXF1aXJlZCIsImFwcGVuZFRvQ0MiLCJkZWxQcm9ibGVtIiwicmVtb3ZlVG9kbyIsImNoYW5nZVJlcGFpckRlYWRsaW5lIiwiY2hhbmdlQ29udHJhY3RvciIsImNoYW5nZVJlcGFpciIsImlzQ29udHJhY3RvckNoYW5nZSIsImNoYW5nZVJlaW5zcGVjdCIsImNoYW5nZUNjIiwic2F2ZVJlcGFpckluZm8iLCJjY19saXN0Iiwic29tZSIsInJlcGFpclByb2JsZW0iLCJyZWluc3BlY3RQcm9ibGVtIiwicmVpbnNwZWN0X2NvbXBsZXRlZF9kYXRlIiwicmVpbnNwZWN0UmVqZWN0IiwidXBkYXRlRGF0YSIsInNlbnRfYmFja19ieSIsInNlbnRfYmFja19kYXRlIiwiY2xvc2UiXSwibWFwcGluZ3MiOiJvSkFBQSwyRUFVTyxTQUFTQSxFQUFlQyxHQUM3QixPQUFPQyxjQUFnQkMsTUFBSyxXQUMxQixJQUFNQyxFQUFNQyxJQUFNQyw0QkFBNEJGLElBQzlDLE9BQU9HLElBQVdDLEtBQUtKLEVBQUssS0FBTUgsUSxx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QUFJLFVBRXpDdEMsTUFBSyxXQUNKLE9BQU9rSixVQUFpQkMsYUFBYSxDQUNuQyxDQUFDLGtCQUFtQmxHLEVBQVlYLElBQ2hDLENBQUMscUJBQXNCVyxFQUFZWCxTQUd0Q3RDLE1BQUssV0FHSixPQUZBa0osVUFBaUJzRSxrQkFFVnBFLElBQVlDLFNBQVMsQ0FDMUJDLE9BQVFyRyxFQUFZWCxHQUNwQmdDLEtBQU0sRUFDTmlGLFlBQWEsdUJBQ2JDLFFBQVN2RyxFQUFZK0csUUFBUTFILFFBR2hDb0csT0FBTSxTQUFTQyxHQUVkLE9BREFDLEtBQUtELE1BQU1BLEdBQ0pMLElBQUdTLE9BQU9KLE9BakNaTCxJQUFHUyxPQUFPLFlBcUNyQnBHLGlCQTk2QlUsU0E4NkJPTCxHQUNmLE9BQU9vQyxJQUFzQi9CLGlCQUFpQkwsS0FJbkNpQyxRIiwiZmlsZSI6ImpzL2NodW5rLWQwZDllMzJhLmpzP3YxNjA4NzE0NDUxMTk1Iiwic291cmNlc0NvbnRlbnQiOlsiLypcbiAqIEBBdXRob3I6IOeOi+S8n++8iOS6kemTvu+8iVxuICogQERhdGU6IDIwMjAtMTAtMTQgMTU6MTg6MzRcbiAqIEBMYXN0IE1vZGlmaWVkIGJ5OiAgIOeOi+S8n++8iOS6kemTvu+8iVxuICogQExhc3QgTW9kaWZpZWQgdGltZTogMjAyMC0xMC0xNCAxNToxODozNFxuICovXG5pbXBvcnQgeyBnZXRIYXNOZXR3b3JrIH0gZnJvbSAnQHNyYy9hcGkvY29tbW9uL25ldHdvcmsnO1xuaW1wb3J0IFdlYlNlcnZpY2UgZnJvbSAnQHNyYy9zZXJ2aWNlL2NvbW1vbi93ZWItc2VydmljZSc7XG5pbXBvcnQgRVNBUEkgZnJvbSAnLi4vZXMtY29uZmlnLmpzJztcblxuZXhwb3J0IGZ1bmN0aW9uIHVwZGF0ZVJldmlld2VyKGFjY2VwdERhdGEpIHtcbiAgcmV0dXJuIGdldEhhc05ldHdvcmsoKS50aGVuKCgpID0+IHtcbiAgICBjb25zdCB1cmwgPSBFU0FQSS50ZW1wbGV0UGxhblYxVXBkYXRlUmV2aWV3ZXIudXJsO1xuICAgIHJldHVybiBXZWJTZXJ2aWNlLnBvc3QodXJsLCBudWxsLCBhY2NlcHREYXRhKTtcbiAgfSk7XG59XG4iLCJcbmltcG9ydCBsb2NhbERCIGZyb20gJ0BzcmMvZnJhbWV3b3JrL2xvY2FsREInO1xuXG5leHBvcnQgZGVmYXVsdCB7XG4gIC8qKlxuICAgKiDojrflj5bmoLfmnb/orqHliJLliJfooahcbiAgICogQHBhcmFtIHByb2pJZFxuICAgKiBAcGFyYW0gdXNlcklkXG4gICAqIEBwYXJhbSBoYXNBbGxSaWdodCDmmK/lkKbmi6XmnInmiYDmnInmnYPpmZBcbiAgICogQHJldHVybnMgeyp8e21ldGhvZCwgaXNBcnJheX18cHJvbWlzZX1cbiAgICovXG4gIGdldFRlbXBsZXRQbGFuTGlzdDogZnVuY3Rpb24ocHJvaklkLCB1c2VySWQsIGhhc0FsbFJpZ2h0KSB7XG4gICAgdmFyIHNxbCA9IFwic2VsZWN0ICogZnJvbSB0ZW1wbGV0X3BsYW4gdHAgd2hlcmUgcHJval9pZCA9ID9cIjtcbiAgICB2YXIgcHMgPSBbcHJvaklkXTtcbiAgICBpZiAoIWhhc0FsbFJpZ2h0KSB7XG4gICAgICBzcWwgKz0gXCJhbmQgXFxcbiAgICAgICAgICAoXFxcbiAgICAgICAgICAgICAgZXhpc3RzIFxcXG4gICAgICAgICAgICAgIChcXFxuICAgICAgICAgICAgICAgICAgc2VsZWN0IDEgZnJvbSB0ZW1wbGV0X3BsYW5fZGV0YWlsIHRcXFxuICAgICAgICAgICAgICAgICAgd2hlcmUgdC50ZW1wbGV0X3BsYW5faWQgPSB0cC5pZCBhbmQgKHQuaW5fY2hhcmdlX2J5ID0gPyBvciBleGlzdHMgXFxcbiAgICAgICAgICAgICAgICAgICAgICAoc2VsZWN0IDEgZnJvbSB0ZW1wbGV0X3BsYW5fZGV0YWlsX3Jldmlld2VyIHIgd2hlcmUgci50ZW1wbGV0X3BsYW5fZGV0YWlsX2lkID0gdC5pZCBhbmQgIHIudXNlcl9pZCA9ID8pXFxcbiAgICAgICAgICAgICAgICAgIClcXFxuICAgICAgICAgICAgICApXFxcbiAgICAgICAgICApXCI7XG4gICAgICBwcyA9IHBzLmNvbmNhdChbdXNlcklkLCB1c2VySWRdKTtcbiAgICB9XG4gICAgc3FsICs9IFwiIG9yZGVyIGJ5IHRwLmNyZWF0ZWRfb24gZGVzY1wiO1xuICAgIHJldHVybiBsb2NhbERCLnF1ZXJ5KHNxbCwgcHMpO1xuICB9LFxuXG4gIGdldFRlbXBsZXRMaXN0OiBmdW5jdGlvbihwbGFuSWQsIGtleXdvcmRzKSB7XG4gICAgdmFyIHNxbCA9IFwic2VsZWN0IHQuKiwgdS5uYW1lIGFzIGluX2NoYXJnZV9ieV9uYW1lLCBjLm5hbWUgYXMgY29udHJhY3Rvcl9uYW1lIGZyb20gdGVtcGxldF9wbGFuX2RldGFpbCB0IFxcXG4gICAgICAgICAgICAgIGpvaW4gdXNlciB1IG9uIHUuaWQgPSB0LmluX2NoYXJnZV9ieSBcXFxuICAgICAgICAgICAgICBsZWZ0IGpvaW4gY29udHJhY3RvciBjIG9uIGMuaWQgPSB0LmNvbnRyYWN0b3IgXFxcbiAgICAgICAgICAgICAgd2hlcmUgdC50ZW1wbGV0X3BsYW5faWQgPSA/IFwiICsgKGtleXdvcmRzID8gYGFuZCAodC5uYW1lIGxpa2UgJyUke2tleXdvcmRzfSUnICkgYCA6ICcnKSArIFwib3JkZXIgYnkgdC5zb3J0XCI7XG4gICAgcmV0dXJuIGxvY2FsREIucXVlcnkoc3FsLCBbcGxhbklkXSk7XG4gIH0sXG5cbiAgZ2V0VGVtcGxldFZpZXc6IGZ1bmN0aW9uKHRlbXBsZXRJZCwgdXNlcklkKSB7XG4gICAgdmFyIHNxbCA9IFwic2VsZWN0IHQuKiwgdHAubmFtZSBhcyB0ZW1wbGV0X3BsYW5fbmFtZSwgYy5uYW1lIGFzIGNvbnRyYWN0b3JfbmFtZSxcXFxuICAgICAgICAgICAgICAoc2VsZWN0IGNvdW50KDEpIGNudCBmcm9tIHRlbXBsZXRfcGxhbl9kZXRhaWxfcmV2aWV3ZXIgciB3aGVyZSByLnRlbXBsZXRfcGxhbl9kZXRhaWxfaWQgPSB0LmlkIGFuZCByLnVzZXJfaWQgPSA/IGFuZCBpZm51bGwoci5yZXZpZXdfYXQsICcnKSA9ICcnKSBhcyBjYW5SZXZpZXcgXFxcbiAgICAgICAgICBmcm9tIHRlbXBsZXRfcGxhbl9kZXRhaWwgdCBcXFxuICAgICAgICAgIGpvaW4gdGVtcGxldF9wbGFuIHRwIG9uIHRwLmlkID0gdC50ZW1wbGV0X3BsYW5faWRcXFxuICAgICAgICAgIGxlZnQgam9pbiBjb250cmFjdG9yIGMgb24gYy5pZCA9IHQuY29udHJhY3RvciBcXFxuICAgICAgICAgIHdoZXJlIHQuaWQgPSA/XCI7XG4gICAgcmV0dXJuIGxvY2FsREIucXVlcnlPbmUoc3FsLCBbdXNlcklkLCB0ZW1wbGV0SWRdKTtcbiAgfSxcblxuICBnZXRUZW1wbGV0Q2hlY2twb2ludHModGVtcGxldElkKSB7XG4gICAgbGV0IHNxbCA9IGBzZWxlY3QgKiBmcm9tIHRlbXBsZXRfcGxhbl9jaGVja3BvaW50IHdoZXJlIHRlbXBsZXRfcGxhbl9kZXRhaWxfaWQgPSA/IG9yZGVyIGJ5IHNvcnRgO1xuXG4gICAgcmV0dXJuIGxvY2FsREIucXVlcnkoc3FsLCBbdGVtcGxldElkXSk7XG4gIH0sXG5cbiAgZ2V0UmV2aWV3TGlzdDogZnVuY3Rpb24odGVtcGxldElkKSB7XG4gICAgdmFyIHNxbCA9IFwic2VsZWN0ICogZnJvbSB0ZW1wbGV0X3BsYW5fZGV0YWlsX3Jldmlld2VyIHIgd2hlcmUgdGVtcGxldF9wbGFuX2RldGFpbF9pZCA9ID8gb3JkZXIgYnkgcmV2aWV3X2F0IGRlc2NcIjtcbiAgICByZXR1cm4gbG9jYWxEQi5xdWVyeShzcWwsIFt0ZW1wbGV0SWRdKTtcbiAgfSxcblxuICAvLyDliKDpmaTlj4LkuI7kurrorrDlvZVcbiAgZGVsUmV2aWV3TGlzdDogZnVuY3Rpb24oZGV0YWlsSWQpIHtcbiAgICB2YXIgc3FsID0gXCJkZWxldGUgZnJvbSB0ZW1wbGV0X3BsYW5fZGV0YWlsX3Jldmlld2VyIHdoZXJlIHRlbXBsZXRfcGxhbl9kZXRhaWxfaWQgPSA/XCI7XG4gICAgcmV0dXJuIGxvY2FsREIuZXhlY3V0ZVNxbChzcWwsIFtkZXRhaWxJZF0pO1xuICB9LFxuXG4gIC8qKlxuICAgKiDliKDpmaTljrvmjonnmoTlj4LkuI7kurrorrDlvZVcbiAgICogQHBhcmFtIHsqfSBpZHMgXG4gICAqL1xuICBkZWxldGVSZXZpZXc6IGZ1bmN0aW9uKGlkcykge1xuICAgIHZhciB3aGVyZSA9IFwiaWQgaW4gKFwiICsgXy5tYXAoaWRzLCBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiAnPyc7XG4gICAgfSkuam9pbignLCAnKSArICcpJztcbiAgICB2YXIgc3FsID0gXCJkZWxldGUgZnJvbSB0ZW1wbGV0X3BsYW5fZGV0YWlsX3Jldmlld2VyIHdoZXJlIFwiICsgd2hlcmU7XG4gICAgcmV0dXJuIGxvY2FsREIuZXhlY3V0ZVNxbChzcWwsIGlkcyk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIOa3u+WKoOaWsOeahOWPguS4juS6ulxuICAgKiBAcGFyYW0geyp9IGRhdGEgXG4gICAqL1xuICBpbnNlcnRSZXZpZXc6IGZ1bmN0aW9uKGRhdGEpIHtcbiAgICByZXR1cm4gbG9jYWxEQi5pbnNlcnRPYmplY3QoJ3RlbXBsZXRfcGxhbl9kZXRhaWxfcmV2aWV3ZXInLCBkYXRhKTtcbiAgfSxcblxuICAvKipcbiAgICog6I635Y+W5qC35p2/6K6h5YiS5Lit55qE5qC35p2/5YiX6KGo5piv5ZCm6IO96K+E6K66XG4gICAqIEBwYXJhbSBwbGFuSWRcbiAgICovXG4gIGdldFRlbXBsZXRSZXZpZXdTdGF0dXNMaXN0OiBmdW5jdGlvbihwbGFuSWQsIHVzZXJJZCkge1xuICAgIHZhciBzcWwgPSBgc2VsZWN0IHQuKiwgXG4gICAgICAoc2VsZWN0IGNvdW50KDEpIGZyb20gdGVtcGxldF9wbGFuX2RldGFpbF9yZXZpZXdlciByIHdoZXJlIHIudGVtcGxldF9wbGFuX2RldGFpbF9pZCA9IHQuaWQgYW5kIHIudXNlcl9pZCA9ID8pIGFzIGlzUmV2aWV3ZXIsXG4gICAgICAoc2VsZWN0IGNvdW50KDEpIGNudCBmcm9tIHRlbXBsZXRfcGxhbl9kZXRhaWxfcmV2aWV3ZXIgciB3aGVyZSByLnRlbXBsZXRfcGxhbl9kZXRhaWxfaWQgPSB0LmlkIGFuZCByLnVzZXJfaWQgPSA/IGFuZCBpZm51bGwoci5yZXZpZXdfYXQsICcnKSAhPSAnJykgYXMgaXNSZXZpZXdDb21wbGV0ZSxcbiAgICAgIChzZWxlY3QgY291bnQoMSkgY250IGZyb20gdGVtcGxldF9wbGFuX2RldGFpbF9yZXZpZXdlciByIHdoZXJlIHIudGVtcGxldF9wbGFuX2RldGFpbF9pZCA9IHQuaWQgYW5kIGlmbnVsbChyLnJldmlld19hdCwgJycpID0gJycpIGFzIG5vUmV2aWV3TnVtXG4gICAgICBmcm9tIHRlbXBsZXRfcGxhbl9kZXRhaWwgdFxuICAgICAgd2hlcmUgdC50ZW1wbGV0X3BsYW5faWQgPSA/YDtcbiAgICByZXR1cm4gbG9jYWxEQi5xdWVyeShzcWwsIFt1c2VySWQsIHVzZXJJZCwgcGxhbklkXSk7XG4gIH0sXG5cbiAgc2F2ZVJldmlldzogZnVuY3Rpb24ocmV2aWV3SWQsIGRhdGEpIHtcbiAgICByZXR1cm4gbG9jYWxEQi51cGRhdGUoJ3RlbXBsZXRfcGxhbl9kZXRhaWxfcmV2aWV3ZXInLCBkYXRhLCB7IGlkOiByZXZpZXdJZCB9KTtcbiAgfSxcblxuICBzYXZlVGVtcGxldDogZnVuY3Rpb24odGVtcGxldElkLCBkYXRhKSB7XG4gICAgcmV0dXJuIGxvY2FsREIudXBkYXRlKCd0ZW1wbGV0X3BsYW5fZGV0YWlsJywgZGF0YSwgeyBpZDogdGVtcGxldElkIH0pO1xuICB9LFxuXG4gIHNhdmVDaGVja3BvaW50OiBmdW5jdGlvbihjaGVja3BvaW50SWQsIGRhdGEpIHtcbiAgICByZXR1cm4gbG9jYWxEQi51cGRhdGUoJ3RlbXBsZXRfcGxhbl9jaGVja3BvaW50JywgZGF0YSwgeyBpZDogY2hlY2twb2ludElkIH0pO1xuICB9LFxuXG5cbiAgLy8g6I635Y+W5qC35p2/6K+m5oOFXG4gIGdldFRlbXBsZXREYXRhOiBmdW5jdGlvbih0ZW1wbGV0SWQpIHtcbiAgICB2YXIgc3FsID0gXCJzZWxlY3QgdHBkLiosIHRwZC5pZCBhcyB0ZW1wbGV0X2lkLCB0cGQubmFtZSBhcyB0ZW1wbGV0X25hbWUsIHRwLmlkIGFzIHBsYW5faWQsIHRwLm5hbWUgYXMgcGxhbl9uYW1lLCB1cC5pZCBhcyBwcm9qX2lkLCB1cC5uYW1lIGFzIHByb2pfbmFtZSwgXFxcbiAgICAgICAgICBjLmlkIGFzIGNvbnRyYWN0b3JfaWQsIGMubmFtZSBhcyBjb250cmFjdG9yX25hbWUgXFxcbiAgICAgICAgICBmcm9tIHRlbXBsZXRfcGxhbl9kZXRhaWwgdHBkIFxcXG4gICAgICAgICAgbGVmdCBqb2luIHRlbXBsZXRfcGxhbiB0cCBvbiB0cC5pZCA9IHRwZC50ZW1wbGV0X3BsYW5faWQgXFxcbiAgICAgICAgICBsZWZ0IGpvaW4gdXNlcl9wcm9qZWN0IHVwIG9uIHVwLmlkID0gdHAucHJval9pZCBcXFxuICAgICAgICAgIGxlZnQgam9pbiBjb250cmFjdG9yIGMgb24gYy5pZCA9IHRwZC5jb250cmFjdG9yIFxcXG4gICAgICAgICAgd2hlcmUgdHBkLmlkID0gP1wiO1xuXG4gICAgcmV0dXJuIGxvY2FsREIucXVlcnlPbmUoc3FsLCBbdGVtcGxldElkXSk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIEBkZXNjcmlwdGlvbjog6I635Y+W5qC35p2/6K+m5oOFXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBpZFxuICAgKiBAcmV0dXJuOiBQcm9taXNlXG4gICAqL1xuICBnZXRUZW1wbGV0RGV0YWlsKGlkKSB7XG4gICAgbGV0IHNxbCA9IGBzZWxlY3QgKiBmcm9tIHRlbXBsZXRfcGxhbl9kZXRhaWwgd2hlcmUgaWQgPSA/YDtcbiAgICByZXR1cm4gbG9jYWxEQi5xdWVyeU9uZShzcWwsIFtpZF0pO1xuICB9LFxuXG5cblxuXG4gIC8vIOiOt+WPluaVtOaUuemXrumimOWIl+ihqFxuICBnZXRQcm9ibGVtTGlzdDogZnVuY3Rpb24odGVtcGxldElkKSB7XG4gICAgdmFyIHNxbCA9IFwic2VsZWN0IHRwci4qLCB0cC5uYW1lIGFzIHBsYW5fbmFtZSwgdHBkLm5hbWUgYXMgdGVtcGxldF9uYW1lLCBcXFxuICAgICAgICAgIGNhc2Ugd2hlbiB0cHIuc3RhdHVzID0gJ+iNieeovycgdGhlbiB0cHIuY3JlYXRlZF9vbiBlbHNlIDAgZW5kIGFzIG9yZGVyX3dlaWdodCBcXFxuICAgICAgICAgIGZyb20gdGVtcGxldF9wcm9ibGVtIHRwciBcXFxuICAgICAgICAgIGxlZnQgam9pbiB0ZW1wbGV0X3BsYW5fZGV0YWlsIHRwZCBvbiB0cGQuaWQgPSB0cHIudGVtcGxldF9wbGFuX2RldGFpbF9pZCBcXFxuICAgICAgICAgIGxlZnQgam9pbiB0ZW1wbGV0X3BsYW4gdHAgb24gdHAuaWQgPSB0cGQudGVtcGxldF9wbGFuX2lkIFxcXG4gICAgICAgICAgd2hlcmUgdGVtcGxldF9wbGFuX2RldGFpbF9pZCA9ID8gb3JkZXIgYnkgb3JkZXJfd2VpZ2h0IGRlc2MsIHRwci5yZXBhaXJfZGVhZGxpbmUgYXNjLCB0cHIuY3JlYXRlZF9vbiBkZXNjXCI7XG5cbiAgICByZXR1cm4gbG9jYWxEQi5xdWVyeShzcWwsIFt0ZW1wbGV0SWRdKTtcbiAgfSxcblxuICAvLyDojrflj5bmlbTmlLnpl67popjor6bmg4VcbiAgZ2V0UHJvYmxlbURldGFpbDogZnVuY3Rpb24oaWQpIHtcbiAgICB2YXIgc3FsID0gXCJzZWxlY3QgdHByLiosIHRwci50ZW1wbGV0X3BsYW5faWQgYXMgcGxhbl9pZCwgdHAubmFtZSBhcyBwbGFuX25hbWUsIHRwZC5pZCBhcyB0ZW1wbGV0X2lkLCB0cGQubmFtZSBhcyB0ZW1wbGV0X25hbWUsIFxcXG4gICAgICAgICAgdXAubmFtZSBhcyBwcm9qX25hbWUsIFxcXG4gICAgICAgICAgdS5pZCBhcyByZXBhaXJfaWQgLCB1Lm5hbWUgYXMgcmVwYWlyX25hbWUsIFxcXG4gICAgICAgICAgdXIuaWQgYXMgcmVpbnNwZWN0X2lkICwgdXIubmFtZSBhcyByZWluc3BlY3RfbmFtZSwgXFxcbiAgICAgICAgICB1cmUuaWQgYXMgcmVnaXN0X2lkICwgdXJlLm5hbWUgYXMgcmVnaXN0X25hbWUsIHVyZS5tb2JpbGUgYXMgcmVnaXN0X21vYmlsZSwgdXJlLmlzX2ltX3VzZXIgYXMgcmVnaXN0X2lzX2ltX3VzZXIsIFxcXG4gICAgICAgICAgYy5pZCBhcyBjb250cmFjdG9yX2lkLCBjLm5hbWUgYXMgY29udHJhY3Rvcl9uYW1lIFxcXG4gICAgICAgICAgZnJvbSB0ZW1wbGV0X3Byb2JsZW0gdHByIFxcXG4gICAgICAgICAgbGVmdCBqb2luIHRlbXBsZXRfcGxhbl9kZXRhaWwgdHBkIG9uIHRwZC5pZCA9IHRwci50ZW1wbGV0X3BsYW5fZGV0YWlsX2lkIFxcXG4gICAgICAgICAgbGVmdCBqb2luIHRlbXBsZXRfcGxhbiB0cCBvbiB0cC5pZCA9IHRwZC50ZW1wbGV0X3BsYW5faWQgXFxcbiAgICAgICAgICBsZWZ0IGpvaW4gdXNlcl9wcm9qZWN0IHVwIG9uIHVwLmlkID0gdHByLnByb2pfaWQgXFxcbiAgICAgICAgICBsZWZ0IGpvaW4gdGVtcGxldF9wcm9ibGVtX3JlcGFpciB0cHJlIG9uIHRwcmUudGVtcGxldF9wcm9ibGVtX2lkID0gdHByLmlkIFxcXG4gICAgICAgICAgbGVmdCBqb2luIHVzZXIgdSBvbiB1LmlkID0gdHByLnJlcGFpcl9ieSBcXFxuICAgICAgICAgIGxlZnQgam9pbiB1c2VyIHVyIG9uIHVyLmlkID0gdHByLnJlaW5zcGVjdF9ieSBcXFxuICAgICAgICAgIGxlZnQgam9pbiB1c2VyIHVyZSBvbiB1cmUuaWQgPSB0cHIucmVnaXN0X2J5IFxcXG4gICAgICAgICAgbGVmdCBqb2luIGNvbnRyYWN0b3IgYyBvbiBjLmlkID0gdHByLmNvbnRyYWN0b3JfaWQgXFxcbiAgICAgICAgICB3aGVyZSB0cHIuaWQgPSA/XCI7XG5cbiAgICByZXR1cm4gbG9jYWxEQi5xdWVyeU9uZShzcWwsIFtpZF0pO1xuICB9LFxuXG4gIC8vIOiOt+WPlumXrumimOaVtOaUueS6ulxuICBnZXRQcm9ibGVtUmVwYWlyOiBmdW5jdGlvbihpZCkge1xuICAgIHZhciBzcWwgPSBcInNlbGVjdCB1LiogZnJvbSB0ZW1wbGV0X3Byb2JsZW1fcmVwYWlyIHRwciBcXFxuICAgICAgICAgIGxlZnQgam9pbiB1c2VyIHUgb24gdS5pZCA9IHRwci5yZXBhaXIgXFxcbiAgICAgICAgICB3aGVyZSB0cHIudGVtcGxldF9wcm9ibGVtX2lkID0gP1wiO1xuXG4gICAgcmV0dXJuIGxvY2FsREIucXVlcnlPbmUoc3FsLCBbaWRdKTtcbiAgfSxcbiAgZ2V0UHJvYmxlbVJlcGFpckJ5OiBmdW5jdGlvbihpZCkge1xuICAgIHZhciBzcWwgPSBcInNlbGVjdCB1LiogZnJvbSB0ZW1wbGV0X3Byb2JsZW0gdHAgXFxcbiAgICAgICAgICBsZWZ0IGpvaW4gdXNlciB1IG9uIHUuaWQgPSB0cC5yZXBhaXJfYnkgXFxcbiAgICAgICAgICB3aGVyZSB0cC5pZCA9ID9cIjtcblxuICAgIHJldHVybiBsb2NhbERCLnF1ZXJ5T25lKHNxbCwgW2lkXSk7XG4gIH0sXG5cblxuXG5cblxuICAvLyDmj5LlhaXmlbTmlLnpl67pophcbiAgaW5zZXJ0UHJvYmxlbTogZnVuY3Rpb24ocHJvYmxlbURhdGEpIHtcbiAgICByZXR1cm4gbG9jYWxEQi5pbnNlcnRPYmplY3QoJ3RlbXBsZXRfcHJvYmxlbScsIHByb2JsZW1EYXRhKTtcbiAgfSxcblxuICB1cGRhdGVQcm9ibGVtOiBmdW5jdGlvbihwcm9ibGVtRGF0YSkge1xuICAgIHJldHVybiBsb2NhbERCLnVwZGF0ZSgndGVtcGxldF9wcm9ibGVtJywgcHJvYmxlbURhdGEsIHsgaWQ6IHByb2JsZW1EYXRhLmlkIH0pO1xuICB9LFxuXG4gIGRlbGV0ZVByb2JsZW06IGZ1bmN0aW9uKHByb2JsZW1EYXRhKSB7XG4gICAgcmV0dXJuIGxvY2FsREIuZGVsZXRlKCd0ZW1wbGV0X3Byb2JsZW0nLCB7IGlkOiBwcm9ibGVtRGF0YS5pZCB9KTtcbiAgfSxcblxuXG4gIC8vIOaPkuWFpeaVtOaUueS6ulxuICBpbnNlcnRSZXBhaXI6IGZ1bmN0aW9uKHJlcGFpcikge1xuICAgIHJldHVybiBsb2NhbERCLmluc2VydE9iamVjdCgndGVtcGxldF9wcm9ibGVtX3JlcGFpcicsIHJlcGFpcik7XG4gIH0sXG4gIC8vIOWIoOmZpOaVtOaUueS6ulxuICBkZWxldGVSZXBhaXI6IGZ1bmN0aW9uKHByb2JsZW1JZCkge1xuICAgIHJldHVybiBsb2NhbERCLmRlbGV0ZSgndGVtcGxldF9wcm9ibGVtX3JlcGFpcicsIHsgdGVtcGxldF9wcm9ibGVtX2lkOiBwcm9ibGVtSWQgfSk7XG4gIH0sXG5cbiAgLy8g6I635Y+W6Zeu6aKY5aSN6aqM5Lq6XG4gIGdldFByb2JsZW1SZWluc3BlY3Q6IGZ1bmN0aW9uKGlkKSB7XG4gICAgdmFyIHNxbCA9IFwic2VsZWN0IHUuKiwgdHByYi5yZWluc3BlY3RfZGF0ZSBhcyByZWluc3BlY3RfZGF0ZSwgdHByYi5yZWluc3BlY3RfaW1hZ2VfZmlsZSBhcyByZWluc3BlY3RfaW1hZ2VfZmlsZSwgdHByYi5yZWluc3BlY3RfcmVtYXJrIGFzIHJlaW5zcGVjdF9yZW1hcmssIFxcXG4gICAgICAgICAgdHByYi5pZCBhcyByZWluc3BlY3RfcmVjb3JkX2lkIFxcXG4gICAgICAgICAgZnJvbSB0ZW1wbGV0X3Byb2JsZW1fcmVpbnNwZWN0X2J5IHRwcmIgXFxcbiAgICAgICAgICBsZWZ0IGpvaW4gdXNlciB1IG9uIHUuaWQgPSB0cHJiLnJlaW5zcGVjdCBcXFxuICAgICAgICAgIHdoZXJlIHRwcmIudGVtcGxldF9wcm9ibGVtX2lkID0gP1wiO1xuXG4gICAgcmV0dXJuIGxvY2FsREIucXVlcnlPbmUoc3FsLCBbaWRdKTtcbiAgfSxcbiAgLy8g5o+S5YWl5aSN6aqM5Lq6XG4gIGluc2VydFJlcG9zaXRvcnk6IGZ1bmN0aW9uKHJlcG9zaXRvcnkpIHtcbiAgICByZXR1cm4gbG9jYWxEQi5pbnNlcnRPYmplY3QoJ3RlbXBsZXRfcHJvYmxlbV9yZWluc3BlY3RfYnknLCByZXBvc2l0b3J5KTtcbiAgfSxcbiAgLy8g5Yig6Zmk5aSN6aqM5Lq6XG4gIGRlbGV0ZVJlcG9zaXRvcnk6IGZ1bmN0aW9uKHByb2JsZW1JZCkge1xuICAgIHJldHVybiBsb2NhbERCLmRlbGV0ZSgndGVtcGxldF9wcm9ibGVtX3JlaW5zcGVjdF9ieScsIHsgdGVtcGxldF9wcm9ibGVtX2lkOiBwcm9ibGVtSWQgfSk7XG4gIH0sXG4gIC8vIOS/ruaUueWkjemqjOS6ulxuICB1cGRhdGVSZXBvc2l0b3J5QnlQcm9ibGVtOiBmdW5jdGlvbihwcm9ibGVtRGF0YSwgcHJvYmxlbUlkKSB7XG4gICAgcmV0dXJuIGxvY2FsREIudXBkYXRlKCd0ZW1wbGV0X3Byb2JsZW1fcmVpbnNwZWN0X2J5JywgcHJvYmxlbURhdGEsIHsgdGVtcGxldF9wcm9ibGVtX2lkOiBwcm9ibGVtSWQgfSk7XG4gIH0sXG4gIC8vIOS/ruaUueWkjemqjOS6ulxuICB1cGRhdGVSZXBvc2l0b3J5QnlQcm9ibGVtQW5kVXNlcjogZnVuY3Rpb24ocHJvYmxlbURhdGEsIHByb2JsZW1JZCwgdXNlcklkKSB7XG4gICAgcmV0dXJuIGxvY2FsREIudXBkYXRlKCd0ZW1wbGV0X3Byb2JsZW1fcmVpbnNwZWN0X2J5JywgcHJvYmxlbURhdGEsIHsgdGVtcGxldF9wcm9ibGVtX2lkOiBwcm9ibGVtSWQsIHJlaW5zcGVjdDogdXNlcklkIH0pO1xuICB9LFxuXG4gIC8vIOiOt+WPlumXrumimOaKhOmAgeS6ulxuICBnZXRQcm9ibGVtQ2M6IGZ1bmN0aW9uKGlkKSB7XG4gICAgdmFyIHNxbCA9IFwic2VsZWN0IHUuKiwgdHBjLnR5cGUgYXMgdHlwZSBmcm9tIHRlbXBsZXRfcHJvYmxlbV9jYyB0cGMgXFxcbiAgICAgICAgICBsZWZ0IGpvaW4gdXNlciB1IG9uIHUuaWQgPSB0cGMuY2MgXFxcbiAgICAgICAgICB3aGVyZSB0cGMudGVtcGxldF9wcm9ibGVtX2lkID0gPyBhbmQgdHlwZSA9ICfooqvmioTpgIEnXCI7XG5cbiAgICByZXR1cm4gbG9jYWxEQi5xdWVyeShzcWwsIFtpZF0pO1xuICB9LFxuICAvLyDojrflj5bmiYDmnInmioTpgIHkurpcbiAgZ2V0UHJvYmxlbUFsbENjOiBmdW5jdGlvbihpZCkge1xuICAgIHZhciBzcWwgPSBcInNlbGVjdCB1LiosIHRwYy50eXBlIGFzIHR5cGUgZnJvbSB0ZW1wbGV0X3Byb2JsZW1fY2MgdHBjIFxcXG4gICAgICAgICAgbGVmdCBqb2luIHVzZXIgdSBvbiB1LmlkID0gdHBjLmNjIFxcXG4gICAgICAgICAgd2hlcmUgdHBjLnRlbXBsZXRfcHJvYmxlbV9pZCA9ID9cIjtcblxuICAgIHJldHVybiBsb2NhbERCLnF1ZXJ5KHNxbCwgW2lkXSk7XG4gIH0sXG4gIC8vIOaPkuWFpeaKhOmAgeS6ulxuICBpbnNlcnRDYzogZnVuY3Rpb24oY2MpIHtcbiAgICByZXR1cm4gbG9jYWxEQi5pbnNlcnRPYmplY3QoJ3RlbXBsZXRfcHJvYmxlbV9jYycsIGNjKTtcbiAgfSxcbiAgLy8g5Yig6Zmk5oqE6YCB5Lq6XG4gIGRlbGV0ZUNjOiBmdW5jdGlvbihwcm9ibGVtSWQpIHtcbiAgICByZXR1cm4gbG9jYWxEQi5kZWxldGUoJ3RlbXBsZXRfcHJvYmxlbV9jYycsIHsgdGVtcGxldF9wcm9ibGVtX2lkOiBwcm9ibGVtSWQsIHR5cGU6ICfooqvmioTpgIEnIH0pO1xuICB9LFxufTtcblxuIiwiaW1wb3J0ICRxIGZyb20gJ0BzdGF0aWMvbGliL3Byb21pc2UnO1xuaW1wb3J0IFBvcHVwIGZyb20gJ0BzcmMvdXRpbHMvcG9wdXAnO1xuaW1wb3J0IGNvbnRleHQgZnJvbSAnQHNyYy9mcmFtZXdvcmsvY29udGV4dCc7XG5pbXBvcnQgVXRpbHMgZnJvbSAnQHNyYy91dGlscy9pbmRleCc7XG5pbXBvcnQgRGF0YVN5bmNocm9uaXplciBmcm9tICdAc3JjL3NlcnZpY2UvY29tbW9uL2RhdGEtc3luY2hyb25pemVyJztcbmltcG9ydCBDb21tb25CYXNlZGF0YVNlcnZpY2UgZnJvbSAnQHNyYy9zZXJ2aWNlL2NvbW1vbi9jb21tb24tYmFzZWRhdGEtc2VydmljZSc7XG5pbXBvcnQgVGVtcGxldFBsYW5SZXBvc2l0b3J5IGZyb20gJ0BzcmMvcmVwb3NpdG9yaWVzL3RlbXBsZXQtcGxhbi1yZXBvc2l0b3J5JztcbmltcG9ydCBVc2VyUmVwb3NpdG9yeSBmcm9tICdAc3JjL3JlcG9zaXRvcmllcy91c2VyLXJlcG9zaXRvcnknO1xuaW1wb3J0IFRvZG9TZXJ2aWNlIGZyb20gJ0BzcmMvc2VydmljZS90b2RvL3RvZG8tc2VydmljZSc7XG5pbXBvcnQgbW9tZW50IGZyb20gJ21vbWVudCc7XG5pbXBvcnQgc3RvcmUgZnJvbSAnQHN0b3JlJztcbmltcG9ydCB7IHVwZGF0ZVJldmlld2VyIH0gZnJvbSAnQHNyYy9hcGkvdGVtcGxldC1wbGFuLXYxJztcblxubGV0IF9zZWxmID0ge1xuICBnZXRUZW1wbGV0UGxhbkxpc3Q6IGZ1bmN0aW9uKHByb2pJZCkge1xuICAgIHJldHVybiBDb21tb25CYXNlZGF0YVNlcnZpY2UuaGFzUm9sZSgzMykudGhlbihmdW5jdGlvbihoYXNBbGxSaWdodCkge1xuICAgICAgcmV0dXJuIFRlbXBsZXRQbGFuUmVwb3NpdG9yeS5nZXRUZW1wbGV0UGxhbkxpc3QoXG4gICAgICAgIHByb2pJZCxcbiAgICAgICAgY29udGV4dC5nZXRVc2VyKCkudXNlcl9pZCxcbiAgICAgICAgaGFzQWxsUmlnaHRcbiAgICAgICk7XG4gICAgfSk7XG4gIH0sXG5cbiAgZ2V0VGVtcGxldExpc3Q6IGZ1bmN0aW9uKHBsYW5JZCwga2V5d29yZHMpIHtcbiAgICByZXR1cm4gVGVtcGxldFBsYW5SZXBvc2l0b3J5LmdldFRlbXBsZXRMaXN0KHBsYW5JZCwga2V5d29yZHMpXG4gICAgICAudGhlbihmdW5jdGlvbihsaXN0KSB7XG4gICAgICAgIHZhciB1c2VyID0gY29udGV4dC5nZXRVc2VyKCk7XG4gICAgICAgIHJldHVybiBUZW1wbGV0UGxhblJlcG9zaXRvcnkuZ2V0VGVtcGxldFJldmlld1N0YXR1c0xpc3QocGxhbklkLCB1c2VyLnVzZXJfaWQpLnRoZW4oZnVuY3Rpb24oXG4gICAgICAgICAgcmV2aWV3RGF0YVxuICAgICAgICApIHtcbiAgICAgICAgICBjb25zb2xlLmxvZygncmV2aWV3RGF0YSA9PT09PT0nLCByZXZpZXdEYXRhKTtcbiAgICAgICAgICAvLyDmmK/lkKbmmK/lj4LkuI7kurpcbiAgICAgICAgICB2YXIgaXNSZXZpZXdlck1hcCA9IHt9O1xuICAgICAgICAgIC8vIOW9k+WJjeWPguS4juS6uuaYr+WQpuW3sueCueivhFxuICAgICAgICAgIHZhciBpc1Jldmlld0NvbXBsZXRlTWFwID0ge307XG4gICAgICAgICAgLy8g5pyq54K56K+E55qE5Y+C5LiO5Lq65pWw6YePXG4gICAgICAgICAgdmFyIG5vUmV2aWV3TnVtTWFwID0ge307XG5cbiAgICAgICAgICBfLmVhY2gocmV2aWV3RGF0YSB8fCBbXSwgcmV2aWV3ID0+IHtcbiAgICAgICAgICAgIGlzUmV2aWV3ZXJNYXBbcmV2aWV3LmlkXSA9IHJldmlldy5pc1Jldmlld2VyO1xuICAgICAgICAgICAgaXNSZXZpZXdDb21wbGV0ZU1hcFtyZXZpZXcuaWRdID0gcmV2aWV3LmlzUmV2aWV3Q29tcGxldGU7XG4gICAgICAgICAgICBub1Jldmlld051bU1hcFtyZXZpZXcuaWRdID0gcmV2aWV3Lm5vUmV2aWV3TnVtO1xuICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgXy5lYWNoKGxpc3QsIGZ1bmN0aW9uKHJlY29yZCkge1xuICAgICAgICAgICAgLy8g5piv5ZCm5piv5Li76LSj5Lq6XG4gICAgICAgICAgICByZWNvcmQuaXNJbkNoYXJnZUJ5ID0gcmVjb3JkLmluX2NoYXJnZV9ieSA9PT0gdXNlci51c2VyX2lkO1xuICAgICAgICAgICAgLy8g5piv5ZCm5piv5Y+C5LiO5Lq6XG4gICAgICAgICAgICByZWNvcmQuaXNSZXZpZXdlciA9IGlzUmV2aWV3ZXJNYXBbcmVjb3JkLmlkXSA+IDA7XG4gICAgICAgICAgICAvLyDlvZPliY3lj4LkuI7kurrmmK/lkKbngrnor4RcbiAgICAgICAgICAgIHJlY29yZC5pc1Jldmlld0NvbXBsZXRlID0gaXNSZXZpZXdDb21wbGV0ZU1hcFtyZWNvcmQuaWRdID4gMDtcbiAgICAgICAgICAgIC8vIOacqueCueivhOeahOWPguS4juS6uuaVsOmHj1xuICAgICAgICAgICAgcmVjb3JkLm5vUmV2aWV3TnVtID0gbm9SZXZpZXdOdW1NYXBbcmVjb3JkLmlkXTtcbiAgICAgICAgICB9KTtcblxuICAgICAgICAgIHJldHVybiBsaXN0O1xuICAgICAgICB9KTtcbiAgICAgIH0pXG4gICAgICAudGhlbihmdW5jdGlvbihsaXN0KSB7XG4gICAgICAgIHZhciBub3cgPSBtb21lbnQoKS5zdGFydE9mKCdkYXknKTtcbiAgICAgICAgXy5lYWNoKGxpc3QsIGZ1bmN0aW9uKHJlY29yZCkge1xuICAgICAgICAgIHZhciBvdmVyZGF5cztcbiAgICAgICAgICBpZiAoIXJlY29yZC5kZWFkbGluZSkge1xuICAgICAgICAgICAgcmVjb3JkLmxlZnRkYXkgPSAnJztcbiAgICAgICAgICAgIHJlY29yZC5vdmVyZGF5ID0gJyc7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgdmFyIGRlYWRsaW5lID0gbW9tZW50KHJlY29yZC5kZWFkbGluZSkuc3RhcnRPZignZGF5Jyk7XG4gICAgICAgICAgaWYgKHJlY29yZC5zdGF0dXMgPT09ICflt7LpqozmlLYnKSB7XG4gICAgICAgICAgICByZWNvcmQubGVmdGRheSA9ICcnO1xuICAgICAgICAgICAgdmFyIGNvbXBsZXRlVGltZSA9IG1vbWVudChyZWNvcmQuY29tcGxldGVfdGltZSkuc3RhcnRPZignZGF5Jyk7XG4gICAgICAgICAgICBpZiAoY29tcGxldGVUaW1lLmlzQWZ0ZXIoZGVhZGxpbmUpKSB7XG4gICAgICAgICAgICAgIC8vIOi2heaXtlxuICAgICAgICAgICAgICBvdmVyZGF5cyA9IGNvbXBsZXRlVGltZS5kaWZmKGRlYWRsaW5lLCAnZGF5cycpO1xuICAgICAgICAgICAgICByZWNvcmQub3ZlcmRheSA9ICfotoXml7YnICsgb3ZlcmRheXMgKyAn5aSp6aqM5pS2JztcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIC8vIOaMieaXtuWujOaIkFxuICAgICAgICAgICAgICByZWNvcmQub3ZlcmRheSA9ICcnO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBpZiAobm93LmlzQWZ0ZXIoZGVhZGxpbmUpKSB7XG4gICAgICAgICAgICAgIC8vIOi2heaXtlxuICAgICAgICAgICAgICByZWNvcmQubGVmdGRheSA9ICcnO1xuICAgICAgICAgICAgICBvdmVyZGF5cyA9IG5vdy5kaWZmKGRlYWRsaW5lLCAnZGF5cycpO1xuICAgICAgICAgICAgICByZWNvcmQub3ZlcmRheSA9ICfotoXml7YnICsgb3ZlcmRheXMgKyAn5aSpJztcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHJlY29yZC5vdmVyZGF5ID0gJyc7XG4gICAgICAgICAgICAgIHZhciBsZWZ0ZGF5cyA9IGRlYWRsaW5lLmRpZmYobm93LCAnZGF5cycpO1xuICAgICAgICAgICAgICBpZiAobGVmdGRheXMgPT09IDApIHtcbiAgICAgICAgICAgICAgICByZWNvcmQubGVmdGRheSA9ICfku4rlpKknO1xuICAgICAgICAgICAgICB9IGVsc2UgaWYgKGxlZnRkYXlzIDw9IDcpIHtcbiAgICAgICAgICAgICAgICByZWNvcmQubGVmdGRheSA9ICfov5jliaknICsgbGVmdGRheXMgKyAn5aSpJztcbiAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByZWNvcmQubGVmdGRheSA9ICcnO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICByZXR1cm4gbGlzdDtcbiAgICAgIH0pO1xuICB9LFxuXG4gIC8qKlxuICAgKiDojrflj5bmoLfmnb/or6bmg4Xop4blm75cbiAgICogQHBhcmFtIHRlbXBsZXRJZFxuICAgKiBAcmV0dXJucyB7KnxQcm9taXNlLjxUUmVzdWx0Pn1cbiAgICovXG4gIGdldFRlbXBsZXRWaWV3OiBmdW5jdGlvbih0ZW1wbGV0SWQpIHtcbiAgICB2YXIgdXNlciA9IGNvbnRleHQuZ2V0VXNlcigpO1xuICAgIHJldHVybiBUZW1wbGV0UGxhblJlcG9zaXRvcnkuZ2V0VGVtcGxldFZpZXcodGVtcGxldElkLCB1c2VyLnVzZXJfaWQpLnRoZW4oZnVuY3Rpb24ocmVjb3JkKSB7XG4gICAgICBpZiAoIXJlY29yZCkge1xuICAgICAgICByZXR1cm4gcmVjb3JkO1xuICAgICAgfVxuXG4gICAgICByZWNvcmQuY2FuU3VibWl0ID0gcmVjb3JkLmluX2NoYXJnZV9ieSA9PT0gdXNlci51c2VyX2lkICYmICFyZWNvcmQuY29tcGxldGVfdGltZTtcbiAgICAgIHJlY29yZC5jYW5SZXZpZXcgPSByZWNvcmQuY2FuUmV2aWV3ID4gMCAmJiAhcmVjb3JkLmNhblN1Ym1pdDtcblxuICAgICAgcmV0dXJuIFVzZXJSZXBvc2l0b3J5LmdldFVzZXIocmVjb3JkLmluX2NoYXJnZV9ieSlcbiAgICAgICAgLnRoZW4oZnVuY3Rpb24odXNlcikge1xuICAgICAgICAgIHJlY29yZC5pbl9jaGFyZ2VfYnkgPSB1c2VyO1xuICAgICAgICB9KVxuICAgICAgICAudGhlbihmdW5jdGlvbigpIHtcbiAgICAgICAgICAvLyDojrflj5blj4LkuI7kurpcbiAgICAgICAgICByZXR1cm4gVGVtcGxldFBsYW5SZXBvc2l0b3J5LmdldFJldmlld0xpc3QodGVtcGxldElkKS50aGVuKGZ1bmN0aW9uKHJldmlld0xpc3QpIHtcbiAgICAgICAgICAgIHJldHVybiBVc2VyUmVwb3NpdG9yeS5nZXRVc2Vyc0J5SWRzKF8ubWFwKHJldmlld0xpc3QsICd1c2VyX2lkJykpLnRoZW4oZnVuY3Rpb24odXNlcnMpIHtcbiAgICAgICAgICAgICAgcmVjb3JkLnBhcnRpY2lwYW50cyA9IHVzZXJzO1xuICAgICAgICAgICAgICAvLyDngrnor4Tml7bpl7TmnInlgLznmoTkvZzkuLrlt7LlrozmiJDngrnor4RcbiAgICAgICAgICAgICAgcmVjb3JkLnJldmlld3MgPSBfLmZpbHRlcihyZXZpZXdMaXN0LCBmdW5jdGlvbihyZXZpZXcpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gISFyZXZpZXcucmV2aWV3X2F0O1xuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgcmVjb3JkLnJlbWFyayA9IHJlY29yZC5yZW1hcmsgfHwgJyc7XG5cbiAgICAgICAgICAgICAgXy5lYWNoKHJlY29yZC5yZXZpZXdzLCBmdW5jdGlvbihyZXZpZXcpIHtcbiAgICAgICAgICAgICAgICByZXZpZXcudXNlciA9IF8uZmluZCh1c2VycywgXy5tYXRjaGVzKHsgaWQ6IHJldmlldy51c2VyX2lkIH0pKTtcbiAgICAgICAgICAgICAgICByZXZpZXcucGljdHVyZXMgPSBKU09OLnBhcnNlKHJldmlldy5waWN0dXJlcyB8fCAnW10nKTtcbiAgICAgICAgICAgICAgICByZXZpZXcucmV2aWV3X2F0ID0gcmV2aWV3LnJldmlld19hdFxuICAgICAgICAgICAgICAgICAgPyBtb21lbnQocmV2aWV3LnJldmlld19hdCkuZm9ybWF0KCdZWVlZLU1NLUREIEhIOm1tJylcbiAgICAgICAgICAgICAgICAgIDogJyc7XG4gICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgIC8vIOWPr+S7peaPkOS6pOeahOeCueivhFxuICAgICAgICAgICAgICB2YXIgY3VycmVudFVzZXIgPSBjb250ZXh0LmdldFVzZXIoKTtcbiAgICAgICAgICAgICAgcmVjb3JkLm15UmV2aWV3ID0gXy5maW5kKHJldmlld0xpc3QsIGZ1bmN0aW9uKHJldmlldykge1xuICAgICAgICAgICAgICAgIHJldHVybiAhcmV2aWV3LnJldmlld19hdCAmJiByZXZpZXcudXNlcl9pZCA9PT0gY3VycmVudFVzZXIudXNlcl9pZDtcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgIGlmIChyZWNvcmQubXlSZXZpZXcpIHtcbiAgICAgICAgICAgICAgICByZWNvcmQubXlSZXZpZXcucGljdHVyZXMgPSBKU09OLnBhcnNlKHJlY29yZC5teVJldmlldy5waWN0dXJlcyB8fCAnW10nKTtcbiAgICAgICAgICAgICAgICByZWNvcmQubXlSZXZpZXcucmVtYXJrID0gcmVjb3JkLm15UmV2aWV3LnJlbWFyayB8fCAnJztcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0pXG4gICAgICAgIC50aGVuKCgpID0+IHtcbiAgICAgICAgICAvLyDojrflj5bpqozmlLbngrlcbiAgICAgICAgICByZXR1cm4gVGVtcGxldFBsYW5SZXBvc2l0b3J5LmdldFRlbXBsZXRDaGVja3BvaW50cyh0ZW1wbGV0SWQpLnRoZW4oY2hlY2twb2ludHMgPT4ge1xuICAgICAgICAgICAgcmVjb3JkLmNoZWNrcG9pbnRzID0gXy5tYXAoY2hlY2twb2ludHMsIGNoZWNrcG9pbnQgPT4ge1xuICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIC4uLmNoZWNrcG9pbnQsXG4gICAgICAgICAgICAgICAgaW1hZ2VzOiBKU09OLnBhcnNlKGNoZWNrcG9pbnQuaW1hZ2VzIHx8ICdbXScpLFxuICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0pXG4gICAgICAgIC50aGVuKGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHJlY29yZC5waWN0dXJlcyA9IEpTT04ucGFyc2UocmVjb3JkLnBpY3R1cmVzIHx8ICdbXScpO1xuICAgICAgICAgIHJlY29yZC5jb21wbGV0ZV90aW1lID0gcmVjb3JkLmNvbXBsZXRlX3RpbWVcbiAgICAgICAgICAgID8gbW9tZW50KHJlY29yZC5jb21wbGV0ZV90aW1lKS5mb3JtYXQoJ1lZWVktTU0tREQgSEg6bW0nKVxuICAgICAgICAgICAgOiAnJztcblxuICAgICAgICAgIHJldHVybiByZWNvcmQ7XG4gICAgICAgIH0pO1xuICAgIH0pO1xuICB9LFxuXG4gIC8qKlxuICAgKiDkv53lrZjngrnor4RcbiAgICogQHBhcmFtIGRhdGFcbiAgICovXG4gIHNhdmVSZXZpZXc6IGZ1bmN0aW9uKGRhdGEpIHtcbiAgICByZXR1cm4gVGVtcGxldFBsYW5SZXBvc2l0b3J5LnNhdmVSZXZpZXcoZGF0YS5pZCwge1xuICAgICAgcGljdHVyZXM6IEpTT04uc3RyaW5naWZ5KGRhdGEucGljdHVyZXMpLFxuICAgICAgcmVtYXJrOiBkYXRhLnJlbWFyayxcbiAgICAgIHJldmlld19hdDogZGF0YS5yZXZpZXdfYXQsXG4gICAgfSk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIOS/neWtmOS/ruaUueS6ulxuICAgKiBAcGFyYW0geyp9IHVzZXJcbiAgICogQHBhcmFtIHsqfSBpZFxuICAgKi9cbiAgc2F2ZUNoYW5nZVVzZXI6IGZ1bmN0aW9uKHVzZXJfaWQsIGlkKSB7XG4gICAgcmV0dXJuIHVwZGF0ZVJldmlld2VyKHsgdXNlcl9pZDogdXNlcl9pZCwgdGVtcGxldF9wbGFuX2RldGFpbF9pZDogaWQgfSlcbiAgICAgIC50aGVuKGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgUG9wdXAuYWxlcnQoJ+S/ruaUueaIkOWKnycpO1xuICAgICAgICByZXR1cm4gJHEuYWxsKFtUZW1wbGV0UGxhblJlcG9zaXRvcnkuZGVsUmV2aWV3TGlzdChpZCksIGRhdGFdKTtcbiAgICAgIH0pXG4gICAgICAudGhlbihmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgIHZhciBpbnNlcnREYXRhID0gZGF0YVsxXTtcbiAgICAgICAgcmV0dXJuICRxLmFsbChcbiAgICAgICAgICBfLm1hcChpbnNlcnREYXRhLCBmdW5jdGlvbih1c2VyT2JqKSB7XG4gICAgICAgICAgICByZXR1cm4gVGVtcGxldFBsYW5SZXBvc2l0b3J5Lmluc2VydFJldmlldyh1c2VyT2JqKTtcbiAgICAgICAgICB9KVxuICAgICAgICApO1xuICAgICAgfSlcbiAgICAgIC5jYXRjaChmdW5jdGlvbihlcnJvcikge1xuICAgICAgICAkbG9nLmxvZygn5L+u5pS55Y+C5LiO5Lq66ZSZ6K+v5L+h5oGvJywgZXJyb3IpO1xuICAgICAgICByZXR1cm4gUG9wdXAuYWxlcnQoJ+S/ruaUueWksei0pScpO1xuICAgICAgfSk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIOaPkOS6pOeCueivhFxuICAgKiBAcGFyYW0gZGF0YVxuICAgKiBAcmV0dXJucyB7KnxQcm9taXNlLjxUUmVzdWx0Pn1cbiAgICovXG4gIHN1Ym1pdFJldmlldzogZnVuY3Rpb24oZGF0YSwgcHJvaklkKSB7XG4gICAgaWYgKF8uaXNFbXB0eShkYXRhLnJlbWFyaykpIHtcbiAgICAgIHJldHVybiAkcS5yZWplY3QoeyBtc2c6ICfngrnor4TlhoXlrrnlv4XloasnIH0pO1xuICAgIH1cblxuICAgIGRhdGFbJ3Jldmlld19hdCddID0gVXRpbHMubm93KCk7XG4gICAgcmV0dXJuIF9zZWxmXG4gICAgICAuc2F2ZVJldmlldyhkYXRhKVxuICAgICAgLnRoZW4oZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiBEYXRhU3luY2hyb25pemVyLmFkZFN5bmNHcm91cChbWyd0ZW1wbGV0X3BsYW5fZGV0YWlsX3Jldmlld2VyJywgZGF0YS5pZF1dKTtcbiAgICAgIH0pXG4gICAgICAudGhlbihmdW5jdGlvbigpIHtcbiAgICAgICAgLy8g5pu05paw5b6F5YqeXG4gICAgICAgIHJldHVybiBUb2RvU2VydmljZS5zYXZlVG9kbyh7XG4gICAgICAgICAgYml6X2lkOiBkYXRhLmlkLFxuICAgICAgICAgIHR5cGU6IDIsXG4gICAgICAgICAgbW9kdWxlX2NvZGU6ICd0ZW1wbGV0LXBsYW4nLFxuICAgICAgICAgIHByb2pfaWQ6IHByb2pJZCxcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgfSxcblxuICBzYXZlOiBmdW5jdGlvbihkYXRhKSB7XG4gICAgcmV0dXJuIFRlbXBsZXRQbGFuUmVwb3NpdG9yeS5zYXZlVGVtcGxldChkYXRhLmlkLCB7XG4gICAgICBzdGF0dXM6IGRhdGEuc3RhdHVzLFxuICAgICAgY29tcGxldGVfdGltZTogZGF0YS5jb21wbGV0ZV90aW1lLFxuICAgICAgcmVtYXJrOiBkYXRhLnJlbWFyayxcbiAgICB9KS50aGVuKCgpID0+IHtcbiAgICAgIC8vIOabtOaWsOmqjOaUtueCuVxuICAgICAgcmV0dXJuIFByb21pc2UuYWxsKFxuICAgICAgICBfLm1hcChkYXRhLmNoZWNrcG9pbnRzIHx8IFtdLCBjaGVja3BvaW50ID0+IHtcbiAgICAgICAgICByZXR1cm4gVGVtcGxldFBsYW5SZXBvc2l0b3J5LnNhdmVDaGVja3BvaW50KGNoZWNrcG9pbnQuaWQsIHtcbiAgICAgICAgICAgIGltYWdlczogSlNPTi5zdHJpbmdpZnkoY2hlY2twb2ludC5pbWFnZXMpLFxuICAgICAgICAgIH0pO1xuICAgICAgICB9KVxuICAgICAgKTtcbiAgICB9KTtcbiAgfSxcblxuICBzdWJtaXQ6IGZ1bmN0aW9uKGRhdGEpIHtcbiAgICBkYXRhWydzdGF0dXMnXSA9ICflt7LpqozmlLYnO1xuICAgIGRhdGFbJ2NvbXBsZXRlX3RpbWUnXSA9IFV0aWxzLm5vdygpO1xuICAgIHJldHVybiBfc2VsZlxuICAgICAgLnNhdmUoZGF0YSlcbiAgICAgIC50aGVuKGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gRGF0YVN5bmNocm9uaXplci5hZGRTeW5jR3JvdXAoW1xuICAgICAgICAgIFsndGVtcGxldF9wbGFuX2RldGFpbCcsIGRhdGEuaWRdLFxuICAgICAgICAgIFsndGVtcGxldF9wbGFuX2NoZWNrcG9pbnQnLCBkYXRhLmlkXSxcbiAgICAgICAgXSk7XG4gICAgICB9KVxuICAgICAgLnRoZW4oZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciB1c2VyID0gY29udGV4dC5nZXRVc2VyKCk7XG4gICAgICAgIHJldHVybiBUZW1wbGV0UGxhblJlcG9zaXRvcnkuZ2V0VGVtcGxldFZpZXcoZGF0YS5pZCwgdXNlci51c2VyX2lkKS50aGVuKGZ1bmN0aW9uKFxuICAgICAgICAgIGlzUmV2aWV3ZXJcbiAgICAgICAgKSB7XG4gICAgICAgICAgdmFyIHR5cGU7XG4gICAgICAgICAgaWYgKGlzUmV2aWV3ZXIpIHtcbiAgICAgICAgICAgIHR5cGUgPSAxO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0eXBlID0gMjtcbiAgICAgICAgICB9XG4gICAgICAgICAgLy8g5pu05paw5b6F5YqeXG4gICAgICAgICAgcmV0dXJuIFRvZG9TZXJ2aWNlLnNhdmVUb2RvKHtcbiAgICAgICAgICAgIGJpel9pZDogZGF0YS5pZCxcbiAgICAgICAgICAgIHR5cGU6IHR5cGUsXG4gICAgICAgICAgICBtb2R1bGVfY29kZTogJ3RlbXBsZXQtcGxhbicsXG4gICAgICAgICAgICBwcm9qX2lkOiBkYXRhLnByb2pfaWQsXG4gICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gIH0sXG5cbiAgZ2V0UHJvYmxlbUxpc3Q6IGZ1bmN0aW9uKHRlbXBsZXRJZCkge1xuICAgIC8vIHRlbXBsZXRJZFxuICAgIC8qIHJldHVybiAkcS5yZXNvbHZlKFtcbiAgICAgIHtcbiAgICAgICAgaWQ6ICcxJyxcbiAgICAgICAgcGxhbl9uYW1lOiAn6K6h5YiS5ZCN56ewJyxcbiAgICAgICAgdGVtcGxldF9uYW1lOiAn5qC35p2/5ZCN56ewJyxcbiAgICAgICAgcmVtYXJrOiAn6KGl5YWF6K+05piOJyxcbiAgICAgICAgZGVhZGxpbmU6ICcyMDE4LTA2LTMwJyxcbiAgICAgICAgc3RhdHVzOiAn5b6F5pW05pS5JyxcbiAgICAgICAgaXNfdGltZW91dDogMVxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgaWQ6ICcyJyxcbiAgICAgICAgcGxhbl9uYW1lOiAn6K6h5YiS5ZCN56ewJyxcbiAgICAgICAgdGVtcGxldF9uYW1lOiAn5qC35p2/5ZCN56ewJyxcbiAgICAgICAgcmVtYXJrOiAn6KGl5YWF6K+05piOMicsXG4gICAgICAgIGRlYWRsaW5lOiAnMjAxOC0wNi0yMCcsXG4gICAgICAgIHN0YXR1czogJ+W+heWkjemqjCcsXG4gICAgICAgIGlzX3RpbWVvdXQ6IDBcbiAgICAgIH1cbiAgICBdKTsgKi9cblxuICAgIHJldHVybiBUZW1wbGV0UGxhblJlcG9zaXRvcnkuZ2V0UHJvYmxlbUxpc3QodGVtcGxldElkKS50aGVuKGZ1bmN0aW9uKGxpc3QpIHtcbiAgICAgIHZhciB0b2RheSA9IG1vbWVudCgpLmZvcm1hdCgnWVlZWS1NTS1ERCcpO1xuXG4gICAgICBfLmVhY2gobGlzdCwgZnVuY3Rpb24oaXRlbSkge1xuICAgICAgICB2YXIgcmVwYWlyX2RlYWRsaW5lID0gbW9tZW50KGl0ZW0ucmVwYWlyX2RlYWRsaW5lKS5mb3JtYXQoJ1lZWVktTU0tREQnKTtcblxuICAgICAgICBpdGVtLmlzX3RpbWVvdXQgPSByZXBhaXJfZGVhZGxpbmUgPCB0b2RheTtcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIGxpc3Q7XG4gICAgfSk7XG4gIH0sXG5cbiAgLy8g6I635Y+W6Zeu6aKY6K+m5oOFXG4gIGdldFByb2JsZW1EZXRhaWw6IGZ1bmN0aW9uKGlkKSB7XG4gICAgcmV0dXJuIFRlbXBsZXRQbGFuUmVwb3NpdG9yeS5nZXRQcm9ibGVtRGV0YWlsKGlkKVxuICAgICAgLnRoZW4oZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICBpZiAoIWRhdGEpIHtcbiAgICAgICAgICAkcS5yZWplY3QoJ+iOt+WPlumXrumimOivpuaDheWksei0pScpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgaWQ6IGRhdGEuaWQsXG4gICAgICAgICAgc3RhdHVzOiBkYXRhLnN0YXR1cyxcbiAgICAgICAgICBwcm9qZWN0OiB7IGlkOiBkYXRhLnByb2pfaWQsIG5hbWU6IGRhdGEucHJval9uYW1lIH0sXG4gICAgICAgICAgcGxhbjogeyBpZDogZGF0YS5wbGFuX2lkLCBuYW1lOiBkYXRhLnBsYW5fbmFtZSB9LFxuICAgICAgICAgIHRlbXBsZXQ6IHsgaWQ6IGRhdGEudGVtcGxldF9pZCwgbmFtZTogZGF0YS50ZW1wbGV0X25hbWUgfSxcblxuICAgICAgICAgIGltYWdlX2ZpbGU6IEpTT04ucGFyc2UoZGF0YS5pbWFnZV9maWxlIHx8ICdbXScpLFxuICAgICAgICAgIHJlbWFyazogZGF0YS5yZW1hcmssXG4gICAgICAgICAgcmVnaXN0OiB7XG4gICAgICAgICAgICBpZDogZGF0YS5yZWdpc3RfaWQsXG4gICAgICAgICAgICBuYW1lOiBkYXRhLnJlZ2lzdF9uYW1lLFxuICAgICAgICAgICAgbW9iaWxlOiBkYXRhLnJlZ2lzdF9tb2JpbGUsXG4gICAgICAgICAgICBpc19pbV91c2VyOiBkYXRhLnJlZ2lzdF9pc19pbV91c2VyLFxuICAgICAgICAgIH0sXG4gICAgICAgICAgcmVnaXN0X2RhdGU6IGRhdGEucmVnaXN0X2RhdGUsXG4gICAgICAgICAgZGVhZGxpbmU6IGRhdGEuZGVhZGxpbmUgfHwgNyxcblxuICAgICAgICAgIHJlcGFpcjogeyBpZDogZGF0YS5yZXBhaXJfaWQsIG5hbWU6IGRhdGEucmVwYWlyX25hbWUgfSxcbiAgICAgICAgICByZXBhaXJfZGVhZGxpbmU6IGRhdGEucmVwYWlyX2RlYWRsaW5lLFxuICAgICAgICAgIHJlcGFpcl9pbWFnZV9maWxlOiBKU09OLnBhcnNlKGRhdGEucmVwYWlyX2ltYWdlX2ZpbGUgfHwgJ1tdJyksXG4gICAgICAgICAgcmVwYWlyX3JlbWFyazogZGF0YS5yZXBhaXJfcmVtYXJrLFxuICAgICAgICAgIHJlcGFpcl9kYXRlOiBkYXRhLnJlcGFpcl9kYXRlLFxuXG4gICAgICAgICAgY29udHJhY3Rvcjoge1xuICAgICAgICAgICAgaWQ6IGRhdGEuY29udHJhY3Rvcl9pZCxcbiAgICAgICAgICAgIG5hbWU6IGRhdGEuY29udHJhY3Rvcl9uYW1lLFxuICAgICAgICAgIH0sXG5cbiAgICAgICAgICByZWluc3BlY3Q6IHsgaWQ6IGRhdGEucmVpbnNwZWN0X2lkLCBuYW1lOiBkYXRhLnJlaW5zcGVjdF9uYW1lIH0sXG4gICAgICAgICAgcmVpbnNwZWN0X2ltYWdlX2ZpbGU6IFtdLFxuICAgICAgICAgIHJlaW5zcGVjdF9yZW1hcms6ICcnLFxuICAgICAgICAgIHJlaW5zcGVjdF9kYXRlOiAnJyxcblxuICAgICAgICAgIGNyZWF0ZWRfYnk6IGRhdGEuY3JlYXRlZF9ieSxcblxuICAgICAgICAgIHNlbnRfYmFja190aW1lczogZGF0YS5zZW50X2JhY2tfdGltZXMsXG4gICAgICAgICAgc2VudF9iYWNrX2ltYWdlX2ZpbGU6IEpTT04ucGFyc2UoZGF0YS5zZW50X2JhY2tfaW1hZ2VfZmlsZSB8fCAnW10nKSxcbiAgICAgICAgICBzZW50X2JhY2tfcmVtYXJrOiBkYXRhLnNlbnRfYmFja19yZW1hcmssXG5cbiAgICAgICAgICBjbG9zZV9kYXRlOiBkYXRhLmNsb3NlX2RhdGUsXG4gICAgICAgICAgY2xvc2VfcmVhc29uOiBkYXRhLmNsb3NlX3JlYXNvbixcbiAgICAgICAgfTtcbiAgICAgIH0pXG4gICAgICAudGhlbihmdW5jdGlvbihkZXRhaWwpIHtcbiAgICAgICAgLy8g5aaC5p6c6I2J56i/IOWSjCDlvoXmlbTmlLkg54q25oCB77yM6KaB6I635Y+W5pW05pS55Lq66KGo55qE5pW05pS55Lq6XG4gICAgICAgIGlmIChkZXRhaWwuc3RhdHVzID09PSAn6I2J56i/JyB8fCBkZXRhaWwuc3RhdHVzID09PSAn5b6F5pW05pS5Jykge1xuICAgICAgICAgIHJldHVybiBUZW1wbGV0UGxhblJlcG9zaXRvcnkuZ2V0UHJvYmxlbVJlcGFpcihkZXRhaWwuaWQpLnRoZW4oZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgICAgZGV0YWlsLnJlcGFpciA9IGRhdGEgfHwge307XG4gICAgICAgICAgICByZXR1cm4gZGV0YWlsO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIHJldHVybiBkZXRhaWw7XG4gICAgICAgICAgcmV0dXJuIFRlbXBsZXRQbGFuUmVwb3NpdG9yeS5nZXRQcm9ibGVtUmVwYWlyQnkoZGV0YWlsLmlkKS50aGVuKGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICAgIGRldGFpbC5yZXBhaXIgPSBkYXRhIHx8IHt9O1xuICAgICAgICAgICAgcmV0dXJuIGRldGFpbDtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICAgIC50aGVuKGZ1bmN0aW9uKGRldGFpbCkge1xuICAgICAgICAvLyDojrflj5blpI3pqozkurpcbiAgICAgICAgcmV0dXJuIFRlbXBsZXRQbGFuUmVwb3NpdG9yeS5nZXRQcm9ibGVtUmVpbnNwZWN0KGRldGFpbC5pZCkudGhlbihmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgaWYgKF8uaXNFbXB0eShkYXRhKSkge1xuICAgICAgICAgICAgZGV0YWlsLnJlaW5zcGVjdCA9IHt9O1xuICAgICAgICAgICAgZGV0YWlsLnJlaW5zcGVjdF9pbWFnZV9maWxlID0gW107XG4gICAgICAgICAgICBkZXRhaWwucmVpbnNwZWN0X3JlbWFyayA9ICcnO1xuICAgICAgICAgICAgZGV0YWlsLnJlaW5zcGVjdF9kYXRlID0gJyc7XG4gICAgICAgICAgICBkZXRhaWwucmVpbnNwZWN0X3JlY29yZF9pZCA9ICcnO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBkZXRhaWwucmVpbnNwZWN0ID0gZGF0YTtcbiAgICAgICAgICAgIGRldGFpbC5yZWluc3BlY3RfaW1hZ2VfZmlsZSA9IEpTT04ucGFyc2UoZGF0YS5yZWluc3BlY3RfaW1hZ2VfZmlsZSB8fCAnW10nKTtcbiAgICAgICAgICAgIGRldGFpbC5yZWluc3BlY3RfcmVtYXJrID0gZGF0YS5yZWluc3BlY3RfcmVtYXJrIHx8ICcnO1xuICAgICAgICAgICAgZGV0YWlsLnJlaW5zcGVjdF9kYXRlID0gZGF0YS5yZWluc3BlY3RfZGF0ZSB8fCAnJztcbiAgICAgICAgICAgIGRldGFpbC5yZWluc3BlY3RfcmVjb3JkX2lkID0gZGF0YS5yZWluc3BlY3RfcmVjb3JkX2lkIHx8ICcnO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHJldHVybiBkZXRhaWw7XG4gICAgICAgIH0pO1xuICAgICAgfSlcbiAgICAgIC50aGVuKGZ1bmN0aW9uKGRldGFpbCkge1xuICAgICAgICAvLyDojrflj5bmioTpgIHkurpcbiAgICAgICAgcmV0dXJuIFRlbXBsZXRQbGFuUmVwb3NpdG9yeS5nZXRQcm9ibGVtQ2MoZGV0YWlsLmlkKS50aGVuKGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICBkZXRhaWwuY2MgPSBkYXRhIHx8IFtdO1xuICAgICAgICAgIHJldHVybiBkZXRhaWw7XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gIH0sXG5cbiAgY3JlYXRlTmV3UHJvYmxlbTogZnVuY3Rpb24odGVtcGxldElkKSB7XG4gICAgdmFyIHVzZXIgPSBjb250ZXh0LmdldFVzZXIoKTtcblxuICAgIHJldHVybiBUZW1wbGV0UGxhblJlcG9zaXRvcnkuZ2V0VGVtcGxldERhdGEodGVtcGxldElkKS50aGVuKGZ1bmN0aW9uKHRlbXBsZXREYXRhKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBwcm9qZWN0OiB7XG4gICAgICAgICAgaWQ6IHRlbXBsZXREYXRhLnByb2pfaWQsXG4gICAgICAgICAgbmFtZTogdGVtcGxldERhdGEucHJval9uYW1lLFxuICAgICAgICB9LFxuICAgICAgICBwbGFuOiB7XG4gICAgICAgICAgaWQ6IHRlbXBsZXREYXRhLnBsYW5faWQsXG4gICAgICAgICAgbmFtZTogdGVtcGxldERhdGEucGxhbl9uYW1lLFxuICAgICAgICB9LFxuICAgICAgICB0ZW1wbGV0OiB7XG4gICAgICAgICAgaWQ6IHRlbXBsZXREYXRhLnRlbXBsZXRfaWQsXG4gICAgICAgICAgbmFtZTogdGVtcGxldERhdGEudGVtcGxldF9uYW1lLFxuICAgICAgICB9LFxuXG4gICAgICAgIGltYWdlX2ZpbGU6IFtdLFxuICAgICAgICByZW1hcms6ICcnLFxuICAgICAgICBkZWFkbGluZTogNyxcbiAgICAgICAgcmVwYWlyOiB7fSxcbiAgICAgICAgY29udHJhY3Rvcjoge1xuICAgICAgICAgIGlkOiB0ZW1wbGV0RGF0YS5jb250cmFjdG9yX2lkLFxuICAgICAgICAgIG5hbWU6IHRlbXBsZXREYXRhLmNvbnRyYWN0b3JfbmFtZSxcbiAgICAgICAgfSxcbiAgICAgICAgcmVpbnNwZWN0OiB7IGlkOiB1c2VyLnVzZXJfaWQsIG5hbWU6IHVzZXIudXNlcl9uYW1lIH0sXG4gICAgICAgIGNjOiBbXSxcblxuICAgICAgICByZWdpc3Q6IHt9LFxuICAgICAgfTtcbiAgICB9KTtcbiAgfSxcblxuICAvLyDkv53lrZjpl67pophcbiAgc2F2ZVByb2JsZW06IGZ1bmN0aW9uKHByb2JsZW1EYXRhKSB7XG4gICAgdmFyIHVzZXJfaWQgPSBjb250ZXh0LmdldFVzZXIoKS51c2VyX2lkO1xuXG4gICAgdmFyIHJlcGFpcl9kZWFkbGluZSA9IG5ldyBEYXRlKCk7XG4gICAgcmVwYWlyX2RlYWRsaW5lLnNldERhdGUocmVwYWlyX2RlYWRsaW5lLmdldERhdGUoKSArIHByb2JsZW1EYXRhLmRlYWRsaW5lKTtcblxuICAgIHZhciBkYXRhID0ge1xuICAgICAgaWQ6IHByb2JsZW1EYXRhLmlkLFxuICAgICAgcHJval9pZDogcHJvYmxlbURhdGEucHJvamVjdC5pZCxcbiAgICAgIHRlbXBsZXRfcGxhbl9pZDogcHJvYmxlbURhdGEucGxhbi5pZCxcbiAgICAgIHRlbXBsZXRfcGxhbl9kZXRhaWxfaWQ6IHByb2JsZW1EYXRhLnRlbXBsZXQuaWQsXG4gICAgICBjb250cmFjdG9yX2lkOiBwcm9ibGVtRGF0YS5jb250cmFjdG9yLmlkLFxuICAgICAgcmVtYXJrOiBwcm9ibGVtRGF0YS5yZW1hcmsgfHwgJycsXG4gICAgICBpbWFnZV9maWxlOiBKU09OLnN0cmluZ2lmeShwcm9ibGVtRGF0YS5pbWFnZV9maWxlIHx8IFtdKSxcbiAgICAgIHN0YXR1czogcHJvYmxlbURhdGEuc3RhdHVzIHx8ICfojYnnqL8nLFxuICAgICAgZGVhZGxpbmU6IHByb2JsZW1EYXRhLmRlYWRsaW5lIHx8IDcsXG5cbiAgICAgIHJlcGFpcl9ieTogcHJvYmxlbURhdGEucmVwYWlyLmlkIHx8ICcnLFxuICAgICAgcmVwYWlyX2RlYWRsaW5lOiBtb21lbnQocmVwYWlyX2RlYWRsaW5lKS5mb3JtYXQoJ1lZWVktTU0tREQnKSxcbiAgICAgIHJlcGFpcl9pbWFnZV9maWxlOiBKU09OLnN0cmluZ2lmeShwcm9ibGVtRGF0YS5yZXBhaXJfaW1hZ2VfZmlsZSB8fCBbXSksXG4gICAgICByZXBhaXJfcmVtYXJrOiBwcm9ibGVtRGF0YS5yZXBhaXJfcmVtYXJrIHx8ICcnLFxuXG4gICAgICByZWluc3BlY3RfYnk6IHByb2JsZW1EYXRhLnJlaW5zcGVjdC5pZCB8fCAnJyxcblxuICAgICAgcmVnaXN0X2J5OiBwcm9ibGVtRGF0YS5yZWdpc3RfYnkgfHwgJycsXG4gICAgICByZWdpc3RfZGF0ZTogcHJvYmxlbURhdGEucmVnaXN0X2RhdGUgfHwgJycsXG4gICAgfTtcblxuICAgIHZhciBwcm9taXNlO1xuXG4gICAgaWYgKGRhdGEuaWQpIHtcbiAgICAgIHByb21pc2UgPSBUZW1wbGV0UGxhblJlcG9zaXRvcnkudXBkYXRlUHJvYmxlbShkYXRhKTtcbiAgICB9IGVsc2Uge1xuICAgICAgZGF0YS5pZCA9IFV0aWxzLnV1aWQoKTtcbiAgICAgIGRhdGEuY3JlYXRlZF9vbiA9IFV0aWxzLm5vdygpO1xuICAgICAgZGF0YS5jcmVhdGVkX2J5ID0gdXNlcl9pZDtcblxuICAgICAgcHJvYmxlbURhdGEuaWQgPSBkYXRhLmlkO1xuXG4gICAgICBwcm9taXNlID0gVGVtcGxldFBsYW5SZXBvc2l0b3J5Lmluc2VydFByb2JsZW0oZGF0YSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHByb21pc2VcbiAgICAgIC50aGVuKGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gX3NlbGYuc2F2ZVJlcGFpcihwcm9ibGVtRGF0YSk7XG4gICAgICB9KVxuICAgICAgLnRoZW4oZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiBfc2VsZi5zYXZlUmVpbnNwZWN0KHByb2JsZW1EYXRhKTtcbiAgICAgIH0pXG4gICAgICAudGhlbihmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIF9zZWxmLnNhdmVDYyhwcm9ibGVtRGF0YSwgcHJvYmxlbURhdGEuY2MpO1xuICAgICAgfSlcbiAgICAgIC50aGVuKGZ1bmN0aW9uKCkge1xuICAgICAgICBEYXRhU3luY2hyb25pemVyLnNldExvY2FsQ2hhbmdlZCgpO1xuICAgICAgICByZXR1cm4gZGF0YS5pZDtcbiAgICAgIH0pO1xuICB9LFxuXG4gIC8vIOaWsOWinumXrumimFxuICBhZGRQcm9ibGVtOiBmdW5jdGlvbihwcm9ibGVtRGF0YSkge1xuICAgIGxldCByZXF1aXJlZCA9IHN0b3JlLnN0YXRlLmdsb2JhbC5pc1Bob3RvUmVxdWlyZWQ7XG4gICAgbGV0IHByb2JsZW1SZXF1aXJlZCA9IHJlcXVpcmVkWydURU1QTEVUX1BST0JMRU0nXTtcbiAgICBpZiAocHJvYmxlbVJlcXVpcmVkICYmIF8uaXNFbXB0eShwcm9ibGVtRGF0YS5pbWFnZV9maWxlKSkge1xuICAgICAgcmV0dXJuICRxLnJlamVjdCgn6K+35ouN5pGE6Zeu6aKY54Wn54mHJyk7XG4gICAgfVxuICAgIHZhciB1c2VyX2lkID0gY29udGV4dC5nZXRVc2VyKCkudXNlcl9pZDtcblxuICAgIGlmICghcHJvYmxlbURhdGEucmVtYXJrKSB7XG4gICAgICByZXR1cm4gJHEucmVqZWN0KCfor7fovpPlhaXooaXlhYXor7TmmI4nKTtcbiAgICB9XG5cbiAgICBpZiAoXy5pc0VtcHR5KHByb2JsZW1EYXRhLnJlcGFpcikpIHtcbiAgICAgIHJldHVybiAkcS5yZWplY3QoJ+ivt+mAieaLqeaVtOaUueS6uicpO1xuICAgIH1cblxuICAgIGlmIChfLmlzRW1wdHkocHJvYmxlbURhdGEuY29udHJhY3RvcikpIHtcbiAgICAgIHJldHVybiAkcS5yZWplY3QoJ+ivt+mAieaLqei0o+S7u+WNleS9jScpO1xuICAgIH1cblxuICAgIGlmIChfLmlzRW1wdHkocHJvYmxlbURhdGEucmVpbnNwZWN0KSkge1xuICAgICAgcmV0dXJuICRxLnJlamVjdCgn6K+36YCJ5oup5aSN6aqM5Lq6Jyk7XG4gICAgfVxuXG4gICAgcHJvYmxlbURhdGEuc3RhdHVzID0gJ+W+heaVtOaUuSc7XG4gICAgcHJvYmxlbURhdGEucmVnaXN0X2J5ID0gdXNlcl9pZDtcbiAgICBwcm9ibGVtRGF0YS5yZWdpc3RfZGF0ZSA9IFV0aWxzLm5vdygpO1xuXG4gICAgcmV0dXJuIF9zZWxmXG4gICAgICAuc2F2ZVByb2JsZW0ocHJvYmxlbURhdGEpXG4gICAgICAudGhlbihmdW5jdGlvbigpIHtcbiAgICAgICAgLy8g5bCG5b2T5YmN5Lq65Yqg5YWl5oqE6YCB5Lq66ZuG5ZCIXG4gICAgICAgIHJldHVybiBfc2VsZi5hcHBlbmRUb0NDKHByb2JsZW1EYXRhLmlkLCAn55m76K6w5Lq6Jyk7XG4gICAgICB9KVxuICAgICAgLnRoZW4oZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiBEYXRhU3luY2hyb25pemVyLmFkZFN5bmNHcm91cChbXG4gICAgICAgICAgWyd0ZW1wbGV0X3Byb2JsZW0nLCBwcm9ibGVtRGF0YS5pZF0sXG4gICAgICAgICAgWyd0ZW1wbGV0X3Byb2JsZW1fcmVwYWlyJywgcHJvYmxlbURhdGEuaWRdLFxuICAgICAgICAgIFsndGVtcGxldF9wcm9ibGVtX3JlaW5zcGVjdF9ieScsIHByb2JsZW1EYXRhLmlkXSxcbiAgICAgICAgICBbJ3RlbXBsZXRfcHJvYmxlbV9jYycsIHByb2JsZW1EYXRhLmlkXSxcbiAgICAgICAgXSk7XG4gICAgICB9KVxuICAgICAgLnRoZW4oZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciB0eXBlID0gMjtcbiAgICAgICAgaWYgKHByb2JsZW1EYXRhLnJlcGFpci5pZCA9PT0gdXNlcl9pZCkge1xuICAgICAgICAgIHR5cGUgPSAxO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBUb2RvU2VydmljZS5zYXZlVG9kbyh7XG4gICAgICAgICAgYml6X2lkOiBwcm9ibGVtRGF0YS5pZCxcbiAgICAgICAgICB0eXBlOiB0eXBlLFxuICAgICAgICAgIG1vZHVsZV9jb2RlOiAndGVtcGxldC1wbGFuLXByb2JsZW0nLFxuICAgICAgICAgIHByb2pfaWQ6IHByb2JsZW1EYXRhLnByb2plY3QuaWQsXG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gIH0sXG5cbiAgLy8g5Yig6Zmk6Zeu6aKYXG4gIGRlbFByb2JsZW06IGZ1bmN0aW9uKHByb2JsZW1EYXRhKSB7XG4gICAgcmV0dXJuIFRlbXBsZXRQbGFuUmVwb3NpdG9yeS5kZWxldGVQcm9ibGVtKHByb2JsZW1EYXRhKS50aGVuKGZ1bmN0aW9uKCkge1xuICAgICAgRGF0YVN5bmNocm9uaXplci5zZXRMb2NhbENoYW5nZWQoKTtcbiAgICAgIHJldHVybiBUb2RvU2VydmljZS5yZW1vdmVUb2RvKHByb2JsZW1EYXRhLmlkKTtcbiAgICB9KTtcbiAgfSxcblxuICAvLyDkv53lrZjmlbTmlLnkurpcbiAgc2F2ZVJlcGFpcjogZnVuY3Rpb24ocHJvYmxlbURhdGEpIHtcbiAgICB2YXIgdXNlcl9pZCA9IGNvbnRleHQuZ2V0VXNlcigpLnVzZXJfaWQ7XG5cbiAgICByZXR1cm4gVGVtcGxldFBsYW5SZXBvc2l0b3J5LmRlbGV0ZVJlcGFpcihwcm9ibGVtRGF0YS5pZCkudGhlbihmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiBUZW1wbGV0UGxhblJlcG9zaXRvcnkuaW5zZXJ0UmVwYWlyKHtcbiAgICAgICAgaWQ6IFV0aWxzLnV1aWQoKSxcbiAgICAgICAgdGVtcGxldF9wcm9ibGVtX2lkOiBwcm9ibGVtRGF0YS5pZCxcbiAgICAgICAgcmVwYWlyOiBwcm9ibGVtRGF0YS5yZXBhaXIuaWQsXG4gICAgICAgIGNyZWF0ZWRfb246IFV0aWxzLm5vdygpLFxuICAgICAgICBjcmVhdGVkX2J5OiB1c2VyX2lkLFxuICAgICAgfSk7XG4gICAgfSk7XG4gIH0sXG5cbiAgLy8g5L+d5a2Y5aSN6aqM5Lq6XG4gIHNhdmVSZWluc3BlY3Q6IGZ1bmN0aW9uKHByb2JsZW1EYXRhKSB7XG4gICAgdmFyIHVzZXJfaWQgPSBjb250ZXh0LmdldFVzZXIoKS51c2VyX2lkO1xuXG4gICAgcmV0dXJuIFRlbXBsZXRQbGFuUmVwb3NpdG9yeS5kZWxldGVSZXBvc2l0b3J5KHByb2JsZW1EYXRhLmlkKS50aGVuKGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIFRlbXBsZXRQbGFuUmVwb3NpdG9yeS5pbnNlcnRSZXBvc2l0b3J5KHtcbiAgICAgICAgaWQ6IFV0aWxzLnV1aWQoKSxcbiAgICAgICAgdGVtcGxldF9wcm9ibGVtX2lkOiBwcm9ibGVtRGF0YS5pZCxcbiAgICAgICAgcmVpbnNwZWN0OiBwcm9ibGVtRGF0YS5yZWluc3BlY3QuaWQsXG4gICAgICAgIGNyZWF0ZWRfb246IFV0aWxzLm5vdygpLFxuICAgICAgICBjcmVhdGVkX2J5OiB1c2VyX2lkLFxuICAgICAgfSk7XG4gICAgfSk7XG4gIH0sXG5cbiAgLy8g5L+d5a2Y5oqE6YCB5Lq6XG4gIHNhdmVDYzogZnVuY3Rpb24ocHJvYmxlbURhdGEsIGNjKSB7XG4gICAgdmFyIHVzZXJfaWQgPSBjb250ZXh0LmdldFVzZXIoKS51c2VyX2lkO1xuXG4gICAgcmV0dXJuIFRlbXBsZXRQbGFuUmVwb3NpdG9yeS5kZWxldGVDYyhwcm9ibGVtRGF0YS5pZCkudGhlbihmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiAkcS5hbGwoXG4gICAgICAgIF8ubWFwKGNjLCBmdW5jdGlvbih1c2VyKSB7XG4gICAgICAgICAgcmV0dXJuIFRlbXBsZXRQbGFuUmVwb3NpdG9yeS5pbnNlcnRDYyh7XG4gICAgICAgICAgICBpZDogVXRpbHMudXVpZCgpLFxuICAgICAgICAgICAgdGVtcGxldF9wcm9ibGVtX2lkOiBwcm9ibGVtRGF0YS5pZCxcbiAgICAgICAgICAgIGNjOiB1c2VyLmlkLFxuICAgICAgICAgICAgdHlwZTogJ+iiq+aKhOmAgScsXG4gICAgICAgICAgICBjcmVhdGVkX29uOiBVdGlscy5ub3coKSxcbiAgICAgICAgICAgIGNyZWF0ZWRfYnk6IHVzZXJfaWQsXG4gICAgICAgICAgfSk7XG4gICAgICAgIH0pXG4gICAgICApO1xuICAgIH0pO1xuICB9LFxuXG4gIC8vIOS/ruaUueaVtOaUueacn+mZkFxuICBjaGFuZ2VSZXBhaXJEZWFkbGluZTogZnVuY3Rpb24ocHJvYmxlbURhdGEpIHtcbiAgICByZXR1cm4gVGVtcGxldFBsYW5SZXBvc2l0b3J5LnVwZGF0ZVByb2JsZW0oe1xuICAgICAgaWQ6IHByb2JsZW1EYXRhLmlkLFxuICAgICAgcmVwYWlyX2RlYWRsaW5lOiBwcm9ibGVtRGF0YS5yZXBhaXJfZGVhZGxpbmUsXG4gICAgfSlcbiAgICAgIC50aGVuKGZ1bmN0aW9uKCkge1xuICAgICAgICAvLyDlsIblvZPliY3kurrliqDlhaXmioTpgIHkurrpm4blkIhcbiAgICAgICAgcmV0dXJuIF9zZWxmLmFwcGVuZFRvQ0MocHJvYmxlbURhdGEuaWQsICfmk43kvZzkuronKTtcbiAgICAgIH0pXG4gICAgICAudGhlbihmdW5jdGlvbigpIHtcbiAgICAgICAgRGF0YVN5bmNocm9uaXplci5zZXRMb2NhbENoYW5nZWQoKTtcbiAgICAgICAgcmV0dXJuIERhdGFTeW5jaHJvbml6ZXIuYWRkU3luY0dyb3VwKFtbJ3RlbXBsZXRfcHJvYmxlbScsIHByb2JsZW1EYXRhLmlkXV0pO1xuICAgICAgfSk7XG4gIH0sXG4gIC8vIOS/ruaUuei0o+S7u+WNleS9jVxuICBjaGFuZ2VDb250cmFjdG9yOiBmdW5jdGlvbihwcm9ibGVtRGF0YSkge1xuICAgIHJldHVybiBUZW1wbGV0UGxhblJlcG9zaXRvcnkudXBkYXRlUHJvYmxlbSh7XG4gICAgICBpZDogcHJvYmxlbURhdGEuaWQsXG4gICAgICBjb250cmFjdG9yX2lkOiBwcm9ibGVtRGF0YS5jb250cmFjdG9yLmlkIHx8ICcnLFxuICAgIH0pXG4gICAgICAudGhlbihmdW5jdGlvbigpIHtcbiAgICAgICAgLy8g5bCG5b2T5YmN5Lq65Yqg5YWl5oqE6YCB5Lq66ZuG5ZCIXG4gICAgICAgIHJldHVybiBfc2VsZi5hcHBlbmRUb0NDKHByb2JsZW1EYXRhLmlkLCAn5pON5L2c5Lq6Jyk7XG4gICAgICB9KVxuICAgICAgLnRoZW4oZnVuY3Rpb24oKSB7XG4gICAgICAgIERhdGFTeW5jaHJvbml6ZXIuc2V0TG9jYWxDaGFuZ2VkKCk7XG4gICAgICAgIHJldHVybiBEYXRhU3luY2hyb25pemVyLmFkZFN5bmNHcm91cChbWyd0ZW1wbGV0X3Byb2JsZW0nLCBwcm9ibGVtRGF0YS5pZF1dKTtcbiAgICAgIH0pO1xuICB9LFxuICAvLyDkv67mlLnmlbTmlLnkurpcbiAgY2hhbmdlUmVwYWlyOiBmdW5jdGlvbihwcm9ibGVtRGF0YSwgaXNDb250cmFjdG9yQ2hhbmdlKSB7XG4gICAgcmV0dXJuIF9zZWxmXG4gICAgICAuc2F2ZVJlcGFpcihwcm9ibGVtRGF0YSlcbiAgICAgIC50aGVuKGZ1bmN0aW9uKCkge1xuICAgICAgICBpZiAoaXNDb250cmFjdG9yQ2hhbmdlKSB7XG4gICAgICAgICAgcmV0dXJuIF9zZWxmLmNoYW5nZUNvbnRyYWN0b3IocHJvYmxlbURhdGEpO1xuICAgICAgICB9XG4gICAgICB9KVxuICAgICAgLnRoZW4oZnVuY3Rpb24oKSB7XG4gICAgICAgIC8vIOWwhuW9k+WJjeS6uuWKoOWFpeaKhOmAgeS6uumbhuWQiFxuICAgICAgICByZXR1cm4gX3NlbGYuYXBwZW5kVG9DQyhwcm9ibGVtRGF0YS5pZCwgJ+aTjeS9nOS6uicpO1xuICAgICAgfSlcbiAgICAgIC50aGVuKGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gRGF0YVN5bmNocm9uaXplci5hZGRTeW5jR3JvdXAoW1xuICAgICAgICAgIFsndGVtcGxldF9wcm9ibGVtJywgcHJvYmxlbURhdGEuaWRdLFxuICAgICAgICAgIFsndGVtcGxldF9wcm9ibGVtX3JlcGFpcicsIHByb2JsZW1EYXRhLmlkXSxcbiAgICAgICAgICBbJ3RlbXBsZXRfcHJvYmxlbV9jYycsIHByb2JsZW1EYXRhLmlkXSxcbiAgICAgICAgXSk7XG4gICAgICB9KVxuICAgICAgLnRoZW4oZnVuY3Rpb24oKSB7XG4gICAgICAgIGxldCB0eXBlID0gMjtcbiAgICAgICAgbGV0IHVzZXJfaWQgPSBjb250ZXh0LmdldFVzZXIoKS51c2VyX2lkO1xuICAgICAgICBpZiAocHJvYmxlbURhdGEucmVwYWlyLmlkID09PSB1c2VyX2lkKSB7XG4gICAgICAgICAgdHlwZSA9IDE7XG4gICAgICAgIH1cbiAgICAgICAgRGF0YVN5bmNocm9uaXplci5zZXRMb2NhbENoYW5nZWQoKTtcblxuICAgICAgICByZXR1cm4gVG9kb1NlcnZpY2Uuc2F2ZVRvZG8oe1xuICAgICAgICAgIGJpel9pZDogcHJvYmxlbURhdGEuaWQsXG4gICAgICAgICAgdHlwZTogdHlwZSxcbiAgICAgICAgICBwcm9qX2lkOiBwcm9ibGVtRGF0YS5wcm9qZWN0LmlkLFxuICAgICAgICAgIG1vZHVsZV9jb2RlOiAndGVtcGxldC1wbGFuLXByb2JsZW0nLFxuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICB9LFxuICAvLyDkv67mlLnlpI3pqozkurpcbiAgY2hhbmdlUmVpbnNwZWN0OiBmdW5jdGlvbihwcm9ibGVtRGF0YSkge1xuICAgIHJldHVybiBfc2VsZlxuICAgICAgLnNhdmVSZWluc3BlY3QocHJvYmxlbURhdGEpXG4gICAgICAudGhlbihmdW5jdGlvbigpIHtcbiAgICAgICAgLy8g5bCG5b2T5YmN5Lq65Yqg5YWl5oqE6YCB5Lq66ZuG5ZCIXG4gICAgICAgIHJldHVybiBfc2VsZi5hcHBlbmRUb0NDKHByb2JsZW1EYXRhLmlkLCAn5pON5L2c5Lq6Jyk7XG4gICAgICB9KVxuICAgICAgLnRoZW4oZnVuY3Rpb24oKSB7XG4gICAgICAgIERhdGFTeW5jaHJvbml6ZXIuc2V0TG9jYWxDaGFuZ2VkKCk7XG4gICAgICAgIHJldHVybiBEYXRhU3luY2hyb25pemVyLmFkZFN5bmNHcm91cChbXG4gICAgICAgICAgWyd0ZW1wbGV0X3Byb2JsZW0nLCBwcm9ibGVtRGF0YS5pZF0sXG4gICAgICAgICAgWyd0ZW1wbGV0X3Byb2JsZW1fcmVpbnNwZWN0X2J5JywgcHJvYmxlbURhdGEuaWRdLFxuICAgICAgICAgIFsndGVtcGxldF9wcm9ibGVtX2NjJywgcHJvYmxlbURhdGEuaWRdLFxuICAgICAgICBdKTtcbiAgICAgIH0pO1xuICB9LFxuICAvLyDkv67mlLnmioTpgIHkurpcbiAgY2hhbmdlQ2M6IGZ1bmN0aW9uKHByb2JsZW1EYXRhKSB7XG4gICAgcmV0dXJuIF9zZWxmLnNhdmVDYyhwcm9ibGVtRGF0YSwgcHJvYmxlbURhdGEuY2MpLnRoZW4oZnVuY3Rpb24oKSB7XG4gICAgICBEYXRhU3luY2hyb25pemVyLnNldExvY2FsQ2hhbmdlZCgpO1xuICAgICAgcmV0dXJuIERhdGFTeW5jaHJvbml6ZXIuYWRkU3luY0dyb3VwKFtcbiAgICAgICAgWyd0ZW1wbGV0X3Byb2JsZW0nLCBwcm9ibGVtRGF0YS5pZF0sXG4gICAgICAgIFsndGVtcGxldF9wcm9ibGVtX2NjJywgcHJvYmxlbURhdGEuaWRdLFxuICAgICAgXSk7XG4gICAgfSk7XG4gIH0sXG5cbiAgLy8g5pqC5a2Y5pW05pS55Lq65Li05pe257yW6L6R55qE5L+h5oGvXG4gIHNhdmVSZXBhaXJJbmZvOiBmdW5jdGlvbihwcm9ibGVtRGF0YSkge1xuICAgIHJldHVybiBUZW1wbGV0UGxhblJlcG9zaXRvcnkudXBkYXRlUHJvYmxlbSh7XG4gICAgICBpZDogcHJvYmxlbURhdGEuaWQsXG4gICAgICByZXBhaXJfcmVtYXJrOiBwcm9ibGVtRGF0YS5yZXBhaXJfcmVtYXJrIHx8ICcnLFxuICAgICAgcmVwYWlyX2ltYWdlX2ZpbGU6IEpTT04uc3RyaW5naWZ5KHByb2JsZW1EYXRhLnJlcGFpcl9pbWFnZV9maWxlKSxcbiAgICB9KTtcbiAgfSxcblxuICAvLyDlsIblvZPliY3kurrmt7vliqDliLDmioTpgIHkurpcbiAgYXBwZW5kVG9DQzogZnVuY3Rpb24oaWQsIHR5cGUpIHtcbiAgICB2YXIgdXNlcl9pZCA9IGNvbnRleHQuZ2V0VXNlcigpLnVzZXJfaWQ7XG5cbiAgICByZXR1cm4gVGVtcGxldFBsYW5SZXBvc2l0b3J5LmdldFByb2JsZW1BbGxDYyhpZCkudGhlbihmdW5jdGlvbihjY19saXN0KSB7XG4gICAgICB2YXIgaXNFeGlzdCA9IF8uc29tZShjY19saXN0LCBmdW5jdGlvbihpdGVtKSB7XG4gICAgICAgIHJldHVybiBpdGVtLmlkID09PSB1c2VyX2lkICYmIGl0ZW0udHlwZSA9PT0gdHlwZTtcbiAgICAgIH0pO1xuICAgICAgLy8g5bCG5b2T5YmN5Lq65Yqg5YWl5oqE6YCB5Lq66ZuG5ZCIXG4gICAgICAvLyDlpoLmnpzmioTpgIHkurrpm4blkIjlt7Lnu4/ljIXlkKvpl67popjnmoTnmbvorrDkurrvvIzliJnkuI3lho3ph43lpI3mt7vliqBcbiAgICAgIGlmICghaXNFeGlzdCkge1xuICAgICAgICB2YXIgY2MgPSB7XG4gICAgICAgICAgaWQ6IFV0aWxzLnV1aWQoKSxcbiAgICAgICAgICB0ZW1wbGV0X3Byb2JsZW1faWQ6IGlkLFxuICAgICAgICAgIGNjOiB1c2VyX2lkLFxuICAgICAgICAgIHR5cGU6IHR5cGUsXG4gICAgICAgICAgY3JlYXRlZF9vbjogVXRpbHMubm93KCksXG4gICAgICAgICAgY3JlYXRlZF9ieTogdXNlcl9pZCxcbiAgICAgICAgfTtcblxuICAgICAgICByZXR1cm4gVGVtcGxldFBsYW5SZXBvc2l0b3J5Lmluc2VydENjKGNjKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfSxcblxuICAvLyDmlbTmlLnpl67pophcbiAgcmVwYWlyUHJvYmxlbTogZnVuY3Rpb24ocHJvYmxlbURhdGEpIHtcbiAgICBsZXQgcmVxdWlyZWQgPSBzdG9yZS5zdGF0ZS5nbG9iYWwuaXNQaG90b1JlcXVpcmVkO1xuICAgIGxldCBwcm9ibGVtUmVxdWlyZWQgPSByZXF1aXJlZFsnVEVNUExFVF9SRVBBSVInXTtcblxuICAgIGlmIChwcm9ibGVtUmVxdWlyZWQgJiYgXy5pc0VtcHR5KHByb2JsZW1EYXRhLnJlcGFpcl9pbWFnZV9maWxlKSkge1xuICAgICAgcmV0dXJuICRxLnJlamVjdCgn6K+35ouN5pGE5pW05pS554Wn54mHJyk7XG4gICAgfVxuICAgIHJldHVybiBUZW1wbGV0UGxhblJlcG9zaXRvcnkudXBkYXRlUHJvYmxlbSh7XG4gICAgICBpZDogcHJvYmxlbURhdGEuaWQsXG4gICAgICByZXBhaXJfYnk6IHByb2JsZW1EYXRhLnJlcGFpci5pZCxcbiAgICAgIHJlcGFpcl9yZW1hcms6IHByb2JsZW1EYXRhLnJlcGFpcl9yZW1hcmsgfHwgJycsXG4gICAgICByZXBhaXJfaW1hZ2VfZmlsZTogSlNPTi5zdHJpbmdpZnkocHJvYmxlbURhdGEucmVwYWlyX2ltYWdlX2ZpbGUpLFxuICAgICAgc3RhdHVzOiAn5b6F5aSN6aqMJyxcbiAgICAgIHJlcGFpcl9kYXRlOiBVdGlscy5ub3coKSxcbiAgICB9KVxuICAgICAgLnRoZW4oZnVuY3Rpb24oKSB7XG4gICAgICAgIC8vIOWwhuW9k+WJjeS6uuWKoOWFpeaKhOmAgeS6uumbhuWQiFxuICAgICAgICByZXR1cm4gX3NlbGYuYXBwZW5kVG9DQyhwcm9ibGVtRGF0YS5pZCwgJ+aTjeS9nOS6uicpO1xuICAgICAgfSlcbiAgICAgIC50aGVuKGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gRGF0YVN5bmNocm9uaXplci5hZGRTeW5jR3JvdXAoW1xuICAgICAgICAgIFsndGVtcGxldF9wcm9ibGVtJywgcHJvYmxlbURhdGEuaWRdLFxuICAgICAgICAgIFsndGVtcGxldF9wcm9ibGVtX2NjJywgcHJvYmxlbURhdGEuaWRdLFxuICAgICAgICBdKTtcbiAgICAgIH0pXG4gICAgICAudGhlbihmdW5jdGlvbigpIHtcbiAgICAgICAgbGV0IHR5cGUgPSAyO1xuICAgICAgICBsZXQgdXNlciA9IGNvbnRleHQuZ2V0VXNlcigpO1xuXG4gICAgICAgIGlmICh1c2VyLnVzZXJfaWQgPT09IHByb2JsZW1EYXRhLnJlaW5zcGVjdC5pZCkge1xuICAgICAgICAgIHR5cGUgPSAxO1xuICAgICAgICB9XG4gICAgICAgIERhdGFTeW5jaHJvbml6ZXIuc2V0TG9jYWxDaGFuZ2VkKCk7XG5cbiAgICAgICAgcmV0dXJuIFRvZG9TZXJ2aWNlLnNhdmVUb2RvKHtcbiAgICAgICAgICBiaXpfaWQ6IHByb2JsZW1EYXRhLmlkLFxuICAgICAgICAgIHR5cGU6IHR5cGUsXG4gICAgICAgICAgbW9kdWxlX2NvZGU6ICd0ZW1wbGV0LXBsYW4tcHJvYmxlbScsXG4gICAgICAgICAgcHJval9pZDogcHJvYmxlbURhdGEucHJvamVjdC5pZCxcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgfSxcblxuICAvLyDlpI3pqozpgJrov4dcbiAgcmVpbnNwZWN0UHJvYmxlbTogZnVuY3Rpb24ocHJvYmxlbURhdGEpIHtcbiAgICB2YXIgbm93ID0gVXRpbHMubm93KCk7XG4gICAgdmFyIHVzZXJfaWQgPSBjb250ZXh0LmdldFVzZXIoKS51c2VyX2lkO1xuXG4gICAgLy8g5pu05paw5Li76KGo5pWw5o2uXG4gICAgcmV0dXJuIFRlbXBsZXRQbGFuUmVwb3NpdG9yeS51cGRhdGVQcm9ibGVtKHtcbiAgICAgIGlkOiBwcm9ibGVtRGF0YS5pZCxcbiAgICAgIHJlaW5zcGVjdF9ieTogcHJvYmxlbURhdGEucmVpbnNwZWN0LmlkLFxuICAgICAgcmVpbnNwZWN0X2NvbXBsZXRlZF9kYXRlOiBub3csXG4gICAgICBzdGF0dXM6ICflt7LpgJrov4cnLFxuICAgIH0pXG4gICAgICAudGhlbihmdW5jdGlvbigpIHtcbiAgICAgICAgLy8g5L+d5a2Y5aSN6aqM6KGo5pWw5o2uXG4gICAgICAgIFRlbXBsZXRQbGFuUmVwb3NpdG9yeS51cGRhdGVSZXBvc2l0b3J5QnlQcm9ibGVtQW5kVXNlcihcbiAgICAgICAgICB7XG4gICAgICAgICAgICByZWluc3BlY3RfZGF0ZTogVXRpbHMubm93KCksXG4gICAgICAgICAgICByZWluc3BlY3RfaW1hZ2VfZmlsZTogSlNPTi5zdHJpbmdpZnkocHJvYmxlbURhdGEucmVpbnNwZWN0X2ltYWdlX2ZpbGUgfHwgW10pLFxuICAgICAgICAgICAgcmVpbnNwZWN0X3JlbWFyazogcHJvYmxlbURhdGEucmVpbnNwZWN0X3JlbWFyayB8fCAnJyxcbiAgICAgICAgICB9LFxuICAgICAgICAgIHByb2JsZW1EYXRhLmlkLFxuICAgICAgICAgIHVzZXJfaWRcbiAgICAgICAgKTtcbiAgICAgIH0pXG4gICAgICAudGhlbihmdW5jdGlvbigpIHtcbiAgICAgICAgLy8g5bCG5b2T5YmN5Lq65Yqg5YWl5oqE6YCB5Lq66ZuG5ZCIXG4gICAgICAgIHJldHVybiBfc2VsZi5hcHBlbmRUb0NDKHByb2JsZW1EYXRhLmlkLCAn5pON5L2c5Lq6Jyk7XG4gICAgICB9KVxuICAgICAgLnRoZW4oZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiBEYXRhU3luY2hyb25pemVyLmFkZFN5bmNHcm91cChbXG4gICAgICAgICAgWyd0ZW1wbGV0X3Byb2JsZW0nLCBwcm9ibGVtRGF0YS5pZF0sXG4gICAgICAgICAgWyd0ZW1wbGV0X3Byb2JsZW1fcmVpbnNwZWN0X2J5JywgcHJvYmxlbURhdGEuaWRdLFxuICAgICAgICAgIFsndGVtcGxldF9wcm9ibGVtX2NjJywgcHJvYmxlbURhdGEuaWRdLFxuICAgICAgICBdKTtcbiAgICAgIH0pXG4gICAgICAudGhlbihmdW5jdGlvbigpIHtcbiAgICAgICAgRGF0YVN5bmNocm9uaXplci5zZXRMb2NhbENoYW5nZWQoKTtcblxuICAgICAgICByZXR1cm4gVG9kb1NlcnZpY2Uuc2F2ZVRvZG8oe1xuICAgICAgICAgIGJpel9pZDogcHJvYmxlbURhdGEuaWQsXG4gICAgICAgICAgdHlwZTogMixcbiAgICAgICAgICBtb2R1bGVfY29kZTogJ3RlbXBsZXQtcGxhbi1wcm9ibGVtJyxcbiAgICAgICAgICBwcm9qX2lkOiBwcm9ibGVtRGF0YS5wcm9qZWN0LmlkLFxuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICB9LFxuXG4gIC8vIOmAgOWbnumXrumimFxuICByZWluc3BlY3RSZWplY3Q6IGZ1bmN0aW9uKHByb2JsZW1EYXRhKSB7XG4gICAgdmFyIHVzZXJfaWQgPSBjb250ZXh0LmdldFVzZXIoKS51c2VyX2lkO1xuICAgIHZhciB1cGRhdGVEYXRhO1xuXG4gICAgaWYgKHByb2JsZW1EYXRhLnN0YXR1cyAhPT0gJ+W+heWkjemqjCcpIHtcbiAgICAgIHJldHVybiAkcS5yZWplY3QoJ+mXrumimOWNleeKtuaAgeW8guW4uCcpO1xuICAgIH1cblxuICAgIGlmICghcHJvYmxlbURhdGEuc2VudF9iYWNrX3JlbWFyaykge1xuICAgICAgcmV0dXJuICRxLnJlamVjdCgn6K+35aGr5YaZ6YCA5Zue5Y6f5ZugJyk7XG4gICAgfVxuXG4gICAgdXBkYXRlRGF0YSA9IHtcbiAgICAgIGlkOiBwcm9ibGVtRGF0YS5pZCxcbiAgICAgIHN0YXR1czogJ+W+heaVtOaUuScsXG4gICAgICBzZW50X2JhY2tfYnk6IHVzZXJfaWQsXG4gICAgICBzZW50X2JhY2tfcmVtYXJrOiBwcm9ibGVtRGF0YS5zZW50X2JhY2tfcmVtYXJrLFxuICAgICAgc2VudF9iYWNrX2ltYWdlX2ZpbGU6IEpTT04uc3RyaW5naWZ5KHByb2JsZW1EYXRhLnNlbnRfYmFja19pbWFnZV9maWxlIHx8IFtdKSxcbiAgICAgIHNlbnRfYmFja19kYXRlOiBVdGlscy5ub3coKSxcbiAgICAgIHNlbnRfYmFja190aW1lczogKHByb2JsZW1EYXRhLnNlbnRfYmFja190aW1lcyB8fCAwKSArIDEsXG4gICAgfTtcblxuICAgIHJldHVybiBUZW1wbGV0UGxhblJlcG9zaXRvcnkudXBkYXRlUHJvYmxlbSh1cGRhdGVEYXRhKVxuICAgICAgLnRoZW4oZnVuY3Rpb24oKSB7XG4gICAgICAgIC8vIOaKiuaJgOacieWkjemqjOS6uueahOWkjemqjOaVsOaNrua4heepulxuICAgICAgICByZXR1cm4gVGVtcGxldFBsYW5SZXBvc2l0b3J5LnVwZGF0ZVJlcG9zaXRvcnlCeVByb2JsZW0oXG4gICAgICAgICAge1xuICAgICAgICAgICAgcmVpbnNwZWN0X2RhdGU6ICcnLFxuICAgICAgICAgICAgcmVpbnNwZWN0X2ltYWdlX2ZpbGU6ICdbXScsXG4gICAgICAgICAgICByZWluc3BlY3RfcmVtYXJrOiAnJyxcbiAgICAgICAgICB9LFxuICAgICAgICAgIHByb2JsZW1EYXRhLmlkXG4gICAgICAgICk7XG4gICAgICB9KVxuICAgICAgLnRoZW4oZnVuY3Rpb24oKSB7XG4gICAgICAgIC8vIOWwhuW9k+WJjeS6uuWKoOWFpeaKhOmAgeS6uumbhuWQiFxuICAgICAgICByZXR1cm4gX3NlbGYuYXBwZW5kVG9DQyhwcm9ibGVtRGF0YS5pZCwgJ+aTjeS9nOS6uicpO1xuICAgICAgfSlcbiAgICAgIC50aGVuKGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gRGF0YVN5bmNocm9uaXplci5hZGRTeW5jR3JvdXAoW1xuICAgICAgICAgIFsndGVtcGxldF9wcm9ibGVtJywgcHJvYmxlbURhdGEuaWRdLFxuICAgICAgICAgIFsndGVtcGxldF9wcm9ibGVtX2NjJywgcHJvYmxlbURhdGEuaWRdLFxuICAgICAgICBdKTtcbiAgICAgIH0pXG4gICAgICAudGhlbihmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIHR5cGUgPSAyO1xuICAgICAgICBpZiAodXNlcl9pZCA9PT0gcHJvYmxlbURhdGEucmVwYWlyLmlkKSB7XG4gICAgICAgICAgdHlwZSA9IDE7XG4gICAgICAgIH1cblxuICAgICAgICBEYXRhU3luY2hyb25pemVyLnNldExvY2FsQ2hhbmdlZCgpO1xuXG4gICAgICAgIHJldHVybiBUb2RvU2VydmljZS5zYXZlVG9kbyh7XG4gICAgICAgICAgYml6X2lkOiBwcm9ibGVtRGF0YS5pZCxcbiAgICAgICAgICB0eXBlOiB0eXBlLFxuICAgICAgICAgIG1vZHVsZV9jb2RlOiAndGVtcGxldC1wbGFuLXByb2JsZW0nLFxuICAgICAgICAgIHByb2pfaWQ6IHByb2JsZW1EYXRhLnByb2plY3QuaWQsXG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gIH0sXG5cbiAgLy8g5YWz6Zet6Zeu6aKYXG4gIGNsb3NlOiBmdW5jdGlvbihwcm9ibGVtRGF0YSkge1xuICAgIHZhciB1cGRhdGVEYXRhO1xuICAgIGlmIChwcm9ibGVtRGF0YS5zdGF0dXMgIT09ICflvoXmlbTmlLknKSB7XG4gICAgICByZXR1cm4gJHEucmVqZWN0KCfpl67popjljZXnirbmgIHlvILluLgnKTtcbiAgICB9XG5cbiAgICBpZiAoIXByb2JsZW1EYXRhLmNsb3NlX3JlYXNvbikge1xuICAgICAgcmV0dXJuICRxLnJlamVjdCgn6K+35aGr5YaZ5YWz6Zet5Y6f5ZugJyk7XG4gICAgfVxuXG4gICAgdXBkYXRlRGF0YSA9IHtcbiAgICAgIGlkOiBwcm9ibGVtRGF0YS5pZCxcbiAgICAgIHN0YXR1czogJ+W3suWFs+mXrScsXG4gICAgICBjbG9zZV9kYXRlOiBVdGlscy5ub3coKSxcbiAgICAgIGNsb3NlX3JlYXNvbjogcHJvYmxlbURhdGEuY2xvc2VfcmVhc29uLFxuICAgIH07XG5cbiAgICByZXR1cm4gVGVtcGxldFBsYW5SZXBvc2l0b3J5LnVwZGF0ZVByb2JsZW0odXBkYXRlRGF0YSlcbiAgICAgIC50aGVuKGZ1bmN0aW9uKCkge1xuICAgICAgICAvLyDlsIblvZPliY3kurrliqDlhaXmioTpgIHkurrpm4blkIhcbiAgICAgICAgcmV0dXJuIF9zZWxmLmFwcGVuZFRvQ0MocHJvYmxlbURhdGEuaWQsICfmk43kvZzkuronKTtcbiAgICAgIH0pXG4gICAgICAudGhlbihmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIERhdGFTeW5jaHJvbml6ZXIuYWRkU3luY0dyb3VwKFtcbiAgICAgICAgICBbJ3RlbXBsZXRfcHJvYmxlbScsIHByb2JsZW1EYXRhLmlkXSxcbiAgICAgICAgICBbJ3RlbXBsZXRfcHJvYmxlbV9jYycsIHByb2JsZW1EYXRhLmlkXSxcbiAgICAgICAgXSk7XG4gICAgICB9KVxuICAgICAgLnRoZW4oZnVuY3Rpb24oKSB7XG4gICAgICAgIERhdGFTeW5jaHJvbml6ZXIuc2V0TG9jYWxDaGFuZ2VkKCk7XG5cbiAgICAgICAgcmV0dXJuIFRvZG9TZXJ2aWNlLnNhdmVUb2RvKHtcbiAgICAgICAgICBiaXpfaWQ6IHByb2JsZW1EYXRhLmlkLFxuICAgICAgICAgIHR5cGU6IDIsXG4gICAgICAgICAgbW9kdWxlX2NvZGU6ICd0ZW1wbGV0LXBsYW4tcHJvYmxlbScsXG4gICAgICAgICAgcHJval9pZDogcHJvYmxlbURhdGEucHJvamVjdC5pZCxcbiAgICAgICAgfSk7XG4gICAgICB9KVxuICAgICAgLmNhdGNoKGZ1bmN0aW9uKGVycm9yKSB7XG4gICAgICAgICRsb2cuZXJyb3IoZXJyb3IpO1xuICAgICAgICByZXR1cm4gJHEucmVqZWN0KGVycm9yKTtcbiAgICAgIH0pO1xuICB9LFxuXG4gIGdldFRlbXBsZXREZXRhaWwoaWQpIHtcbiAgICByZXR1cm4gVGVtcGxldFBsYW5SZXBvc2l0b3J5LmdldFRlbXBsZXREZXRhaWwoaWQpO1xuICB9LFxufTtcblxuZXhwb3J0IGRlZmF1bHQgX3NlbGY7XG4iXSwic291cmNlUm9vdCI6IiJ9