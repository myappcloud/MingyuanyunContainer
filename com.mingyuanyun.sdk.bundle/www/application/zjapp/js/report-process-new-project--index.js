(window.webpackJsonp_module_entry_zjapp_=window.webpackJsonp_module_entry_zjapp_||[]).push([["report-process-new-project--index"],{3969:function(e,t,r){"use strict";r("9a0c")},5685:function(e,t,r){"use strict";(function(e){var n=r("162a"),a=r("6144"),u=r("9cd1"),i=r("da2f"),o=r("c77f");function s(e,t){return e?(e-t)/e*100:0}var c={getProcessCheckNewBuilding:function(e){var t=a.a.getString("reportDateType",a.a.level.user)||"month";return Object(i.d)({proj_id:e,query_type:t})},getProjTotalData:function(){return n.a.request("/report/project-over-view")},getDailyCheckData:function(e,t,r,a,u){var i={proj_id:e,bidsection_id:t,begin_date:r,end_date:a};return u&&(i.module=u),n.a.request("/report/check",i)},getReportCheckList:function(e){return n.a.request("/report/check-batch-problem-list",{batch_id:e.batchId,begin_date:e.dateStart,end_date:e.dateEnd})},getReportCheckTimeoutList:function(e,t,r){return n.a.request("/report/get-over-due-check",{proj_id:e,key:t,page:r,pageSize:15})},getOverDueCheckConfig:function(e){return n.a.request("/report/get-over-due-check-config",{proj_id:e})},getReportCheckDetail:function(e){return n.a.request("/report/check-batch-problem-detail",{id:e})},postReportCheckUpdate:function(e){return n.a.post("/checkquality-comment/upload",{},e)},postReportCheckSendBack:function(e){return n.a.post("/checkquality-comment/send-back",{},e)},measureProjectData:[],waterPercolationData:[],getMeasureData:function(t){return n.a.request("/report/measure",{proj_id:t}).then((function(t){return e.each(t,(function(t){t.repair_data={measurement_points_num:0,problem_points_num:0,checkitem_num:0,passport:0},t.supervision_data={measurement_points_num:0,problem_points_num:0,checkitem_num:0,passport:0},t.construct_data={measurement_points_num:0,problem_points_num:0,checkitem_num:0,passport:0},e.each(t.buildings,(function(r){r.repair_data={measurement_points_num:0,problem_points_num:0,checkitem_num:0,passport:0},r.supervision_data={measurement_points_num:0,problem_points_num:0,checkitem_num:0,passport:0},r.construct_data={measurement_points_num:0,problem_points_num:0,checkitem_num:0,passport:0},e.each(r.check_items,(function(n){n.repair_data={measurement_points_num:0,problem_points_num:0,checkitem_num:0,passport:0},n.supervision_data={measurement_points_num:0,problem_points_num:0,checkitem_num:0,passport:0},n.construct_data={measurement_points_num:0,problem_points_num:0,checkitem_num:0,passport:0},e.each(n.children,(function(a){t.repair_data.measurement_points_num+=a.measure_data[0].measurement_points,t.repair_data.problem_points_num+=a.measure_data[0].problem_points,t.repair_data.checkitem_num+=a.measure_data[0].measurement_points?1:0,t.supervision_data.measurement_points_num+=a.measure_data[1].measurement_points,t.supervision_data.problem_points_num+=a.measure_data[1].problem_points,t.supervision_data.checkitem_num+=a.measure_data[1].measurement_points?1:0,t.construct_data.measurement_points_num+=a.measure_data[2].measurement_points,t.construct_data.problem_points_num+=a.measure_data[2].problem_points,t.construct_data.checkitem_num+=a.measure_data[2].measurement_points?1:0,r.repair_data.measurement_points_num+=a.measure_data[0].measurement_points,r.repair_data.problem_points_num+=a.measure_data[0].problem_points,r.repair_data.checkitem_num+=a.measure_data[0].measurement_points?1:0,r.supervision_data.measurement_points_num+=a.measure_data[1].measurement_points,r.supervision_data.problem_points_num+=a.measure_data[1].problem_points,r.supervision_data.checkitem_num+=a.measure_data[1].measurement_points?1:0,r.construct_data.measurement_points_num+=a.measure_data[2].measurement_points,r.construct_data.problem_points_num+=a.measure_data[2].problem_points,r.construct_data.checkitem_num+=a.measure_data[2].measurement_points?1:0,n.repair_data.measurement_points_num+=a.measure_data[0].measurement_points,n.repair_data.problem_points_num+=a.measure_data[0].problem_points,n.repair_data.checkitem_num+=a.measure_data[0].measurement_points?1:0,n.supervision_data.measurement_points_num+=a.measure_data[1].measurement_points,n.supervision_data.problem_points_num+=a.measure_data[1].problem_points,n.supervision_data.checkitem_num+=a.measure_data[1].measurement_points?1:0,n.construct_data.measurement_points_num+=a.measure_data[2].measurement_points,n.construct_data.problem_points_num+=a.measure_data[2].problem_points,n.construct_data.checkitem_num+=a.measure_data[2].measurement_points?1:0,e.each(a.measure_data,(function(e){e.measurement_points?e.passport=(e.measurement_points-e.problem_points)/e.measurement_points*100:e.passport=0}))})),n.repair_data.passport=s(n.repair_data.measurement_points_num,n.repair_data.problem_points_num),n.supervision_data.passport=s(n.supervision_data.measurement_points_num,n.supervision_data.problem_points_num),n.construct_data.passport=s(n.construct_data.measurement_points_num,n.construct_data.problem_points_num)})),r.repair_data.passport=s(r.repair_data.measurement_points_num,r.repair_data.problem_points_num),r.supervision_data.passport=s(r.supervision_data.measurement_points_num,r.supervision_data.problem_points_num),r.construct_data.passport=s(r.construct_data.measurement_points_num,r.construct_data.problem_points_num)})),t.repair_data.passport=s(t.repair_data.measurement_points_num,t.repair_data.problem_points_num),t.supervision_data.passport=s(t.supervision_data.measurement_points_num,t.supervision_data.problem_points_num),t.construct_data.passport=s(t.construct_data.measurement_points_num,t.construct_data.problem_points_num)})),t}))},measureBuildData:{},setMeasureBuildData:function(e){c.measureBuildData=e},getMeasureBuildData:function(t){return e.isEmpty(c.measureBuildData)?c.getMeasureData(t).then((function(e){return e[0]})):Promise.resolve(c.measureBuildData)},getCheckAcceptData:function(e){return n.a.request("/report/check-accept",{proj_id:e})},getCheckAcceptDataOfBuilding:function(e,t,r){return n.a.request("/report/check-accept-detail",{section_id:e,building_id:t,unit:r||""})},getProcessCheckData:function(e,t){return n.a.request("/report/processcheck",{building_id:e,unit:t})},getProcessCheckData2:function(e){return Object(i.g)({building_id:e})},getMaterialData:function(e,t,r){return n.a.request("/report/material",{proj_id:e,begin_date:t,end_date:r})},getProcessAcceptBuilding:function(e){var t=a.a.getString("reportDateType",a.a.level.user)||"month";return Object(o.n)({proj_id:e,query_type:t})},getWaterPercolation:function(e){return n.a.request("/report/close-water-test",{proj_id:e})},getProcessAcceptData:function(e,t,r,n){return Object(o.o)({building_id:e,unit:t,start:r||"",end:n||""})},getProcessAcceptPileItem:function(e){return n.a.request("/report/get-pile-check-items",{bidsection_id:e})},getProcessAcceptPileData:function(e,t){return n.a.request("/report/process-accept-with-pile",{building_id:e,item_id:t})},getMeasureCheckedData:function(){return n.a.request("/report/leader-measure")},getSchedulePlanData:function(){return Object(u.i)()},getSchedulePlanProjectData:function(e){return Object(u.a)({proj_id:e})},getCheckProblemStatisticsData:function(e){return n.a.request("/report/leader-secure",e)},getProcessCheckStatisticsData:function(){return Object(i.k)()},schedulePlanNodeList:function(e){return Object(u.e)({plan_id:e})}};t.a=c}).call(this,r("391c"))},"9a0c":function(e,t,r){var n=r("f0c5");"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);(0,r("85cb").default)("4a05a4bf",n,!0,{sourceMap:!1,shadowMode:!1})},"9cd1":function(e,t,r){"use strict";r.d(t,"h",(function(){return i})),r.d(t,"m",(function(){return o})),r.d(t,"g",(function(){return s})),r.d(t,"f",(function(){return c})),r.d(t,"d",(function(){return p})),r.d(t,"l",(function(){return d})),r.d(t,"k",(function(){return m})),r.d(t,"j",(function(){return l})),r.d(t,"b",(function(){return _})),r.d(t,"e",(function(){return f})),r.d(t,"c",(function(){return h})),r.d(t,"i",(function(){return b})),r.d(t,"a",(function(){return g}));var n=r("5e8d"),a=r("162a"),u=r("bcc78");function i(e){return Object(n.a)().then((function(){var t=u.a.schedulePlanTaskInfo.url;return a.a.request(t,e)}))}function o(e){return Object(n.a)().then((function(){var t=u.a.schedulePlanSaveTask.url;return a.a.post(t,null,e)}))}function s(e){return Object(n.a)().then((function(){var t=u.a.schedulePlanPlanList.url;return a.a.request(t,e)}))}function c(e){return Object(n.a)().then((function(){var t=u.a.schedulePlanNodeList.url;return a.a.request(t,e)}))}function p(e){return Object(n.a)().then((function(){var t=u.a.schedulePlanNodeInfo.url;return a.a.request(t,e)}))}function d(e){return Object(n.a)().then((function(){var t=u.a.schedulePlanSaveReport.url;return a.a.post(t,null,e)}))}function m(e){return Object(n.a)().then((function(){var t=u.a.schedulePlanSaveCompleteTime.url;return a.a.post(t,null,e)}))}function l(e){return Object(n.a)().then((function(){var t=u.a.schedulePlanSaveChecker.url;return a.a.post(t,null,e)}))}function _(e){return Object(n.a)().then((function(){var t=u.a.schedulePlanCheckerLogList.url;return a.a.request(t,e)}))}function f(e){return Object(n.a)().then((function(){var t=u.a.schedulePlanNodeLevel.url;return a.a.request(t,e)}))}function h(){return Object(n.a)().then((function(){var e=u.a.schedulePlanCompletedTimeSetting.url;return a.a.request(e)}))}function b(){return Object(n.a)().then((function(){var e=u.a.schedulePlanLeaderSchedulePlan.url;return a.a.request(e)}))}function g(e){return Object(n.a)().then((function(){var t=u.a.schedulePlanGetByFirstProject.url;return a.a.request(t,e)}))}},c77f:function(e,t,r){"use strict";r.d(t,"h",(function(){return o})),r.d(t,"g",(function(){return s})),r.d(t,"a",(function(){return c})),r.d(t,"e",(function(){return p})),r.d(t,"f",(function(){return d})),r.d(t,"d",(function(){return m})),r.d(t,"n",(function(){return l})),r.d(t,"o",(function(){return _})),r.d(t,"b",(function(){return f})),r.d(t,"i",(function(){return h})),r.d(t,"k",(function(){return b})),r.d(t,"c",(function(){return g})),r.d(t,"l",(function(){return v})),r.d(t,"p",(function(){return j})),r.d(t,"m",(function(){return k})),r.d(t,"j",(function(){return P}));var n=r("5e8d"),a=r("162a"),u=r("bcc78"),i=r("da71");function o(e){return Object(n.a)().then((function(){var t=u.a.commonGetProblemClassTree.url;return a.a.request(t,e)}))}function s(e){return Object(n.a)().then((function(){var t=u.a.pileAcceptGetPileBuildingSummary.url;return a.a.request(t,e)}))}function c(e){return Object(n.a)().then((function(){var t=u.a.pileAcceptGetBidsectionBuildingTree.url;return a.a.request(t,e)}))}function p(){return Object(n.a)().then((function(){var e=u.a.pileAcceptGetPileAcceptItems.url;return a.a.request(e)}))}function d(e){return Object(n.a)().then((function(){var t=u.a.pileAcceptGetPileAcceptList.url;return a.a.request(t,e)}))}function m(e){return Object(n.a)().then((function(){var t=u.a.pileAcceptGetPileAcceptInfo.url;return a.a.request(t,e)}))}function l(e){return Object(n.a)().then((function(){var t=u.a.processAcceptBuilding.url;return a.a.request(t,e)}))}function _(e){return Object(n.a)().then((function(){var t=u.a.processAcceptCollect.url;return a.a.request(t,e)}))}function f(e){return Object(n.a)().then((function(){var t=u.a.processAcceptv3GetBuildingList.url;return a.a.request(t,e)}))}function h(e){return Object(n.a)().then((function(){var t=u.a.processAcceptv3GetProcessAcceptv3List.url;return a.a.request(t,e)}))}function b(e){return Object(n.a)().then((function(){var t=i.a.getReportOrgTree.url;return a.a.request(t,e)}))}function g(e){return Object(n.a)().then((function(){var t=i.a.getHomeReports.url;return a.a.request(t,e)}))}function v(e){return Object(n.a)().then((function(){var t=i.a.getReportPools.url;return a.a.request(t,e)}))}function j(e){return Object(n.a)().then((function(){var t=i.a.saveMyReportsSetting.url;return a.a.post(t,null,e)}))}function k(e){return Object(n.a)().then((function(){var t=u.a.getUrlReportAuth.url;return a.a.request(t,e)}))}function P(e){return Object(n.a)().then((function(){var t=u.a.getProgressV3Summary.url;return a.a.request(t,e)}))}},c8a4:function(e,t,r){"use strict";(function(e){r("f548"),r("cc57");var n=r("07d2"),a=r("5685");t.a={name:"ReportProcessNewProjectIndex",components:{item:n.default},data:function(){return{isLoading:!0,sections:{},curBuilding:{},buildIndex:0}},computed:{projectSelected:function(){return this.$store.state.global.currentReportProject},sectionIsEmpty:function(){return e.isEmpty(this.sections)},fromScheduleManage:function(){return this.$store.state.global.prevRouter&&"SchedulePlanDetail"===this.$store.state.global.prevRouter.name}},activated:function(){this.getReportData()},methods:{getReportData:function(){var t=this;return a.a.getProcessCheckNewBuilding(this.projectSelected.id).then((function(r){var n=[],a={},u={};e.each(r,(function(e){a[e.bidsection_id]||(a[e.bidsection_id]={id:e.bidsection_id,name:e.bidsection_name,buildings:[]},n.push(a[e.bidsection_id])),u[e.building_id]||(u[e.building_id]={id:e.building_id,name:e.building_name,units:[]},a[e.bidsection_id].buildings.push(u[e.building_id])),e.unit&&u[e.building_id].units.push({id:e.unit,name:e.unit.replace("单元","")+"单元",has_new:1===e.has_new}),1===e.has_new&&(u[e.building_id].has_new=!0)})),t.sections=a,console.log(a)})).catch((function(e){Popup.alert(e&&e.errmsg||e)})).finally((function(){t.isLoading=!1}))},clickBuilding:function(e,t,r){this.curBuilding=e,this.buildIndex=t,e.units&&e.units.length||this.goProcessProgress(r,e,"")},clickUnit:function(e,t){this.goProcessProgress(t,this.curBuilding,e.id)},goProcessProgress:function(e,t,r){this.$router.push({name:"ReportProcessNewProjectDetail",query:{proj_id:this.projectSelected.id,section_id:e,building_id:t.id,building_name:t.name,unit:r}})}}}}).call(this,r("391c"))},f003:function(e,t,r){"use strict";r.r(t);var n=r("c8a4").a,a=(r("3969"),r("17cc")),u=Object(a.a)(n,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("page-content",{attrs:{title:"报表-工序移交","show-go-root":e.fromScheduleManage}},[e.isLoading?e._e():r("div",{staticClass:"report-process-accept-wrap"},[e._l(e.sections,(function(t,n){return r("div",{key:n},[r("div",{staticClass:"list-title"},[e._v(e._s(t.name))]),r("div",{staticClass:"list list-room van-hairline--top-bottom pr0"},[r("div",{staticClass:"clearfix"},[e._l(t.buildings,(function(a,u){return r("div",{key:u,staticClass:"item-list-room",class:{selected:e.curBuilding.id===a.id,"new-progress":a.has_new},on:{click:function(r){e.clickBuilding(a,n,t.id)}}},[e._v(e._s(a.name))])})),t.buildings.length?e._e():r("div",{staticClass:"color-light pb10"},[e._v("此标段未设楼栋范围")])],2),e.curBuilding.units&&e.curBuilding.units.length&&e.buildIndex===n?r("div",{staticClass:"clearfix border-top pt10"},e._l(e.curBuilding.units,(function(n,a){return r("div",{key:a,staticClass:"item-list-room",class:{"new-progress":n.has_new},on:{click:function(r){e.clickUnit(n,t.id)}}},[e._v(e._s(n.name))])}))):e._e()])])})),r("loading-status",{attrs:{"is-loading":e.isLoading,"is-empty":e.sectionIsEmpty,"empty-text":"此项目未设置标段楼栋信息",type:"report"}})],2)])}),[],!1,null,"470d4c96",null);t.default=u.exports},f0c5:function(e,t,r){(e.exports=r("690e")(!1)).push([e.i,".zjapp .report-process-accept-wrap[data-v-470d4c96]{height:100%;overflow:auto}.zjapp .report-process-accept-wrap .item-select-project>*[data-v-470d4c96]{pointer-events:none}.zjapp .report-process-accept-wrap .list-title[data-v-470d4c96]{position:relative;color:#888;font-size:14px;line-height:30px;min-height:40px;margin-bottom:0;margin-top:0;padding:8px 16px 2px}.zjapp .report-process-accept-wrap .list-room[data-v-470d4c96]{padding:15px 20px 0;background-color:#fff;overflow:hidden}.zjapp .report-process-accept-wrap .item-list-room[data-v-470d4c96]{float:left;min-width:65px;min-height:30px;line-height:30px;margin:0 25px 15px 0;padding:0 15px;text-align:center;border:1px solid #dcdcdc;border-radius:3px}.zjapp .report-process-accept-wrap .item-list-room.selected[data-v-470d4c96]{border-color:#4275e8;background-color:#4275e8;color:#fff}.zjapp .report-process-accept-wrap .item-list-room.disabled[data-v-470d4c96]{background-color:#f2f2f2;color:#999}.zjapp .report-process-accept-wrap .item-list-room.bg-green[data-v-470d4c96]{color:#fff;border-color:#0bc666}.zjapp .report-process-accept-wrap .item-list-room.bg-blue[data-v-470d4c96]{color:#fff;border-color:#4174e9}.zjapp .report-process-accept-wrap .item-list-room.bg-orange[data-v-470d4c96]{color:#fff;border-color:#ff8400}.zjapp .report-process-accept-wrap .item-list-room.bg-red[data-v-470d4c96]{color:#fff;border-color:#ff3d3d}.zjapp .report-process-accept-wrap .item-list-room.bg-brown[data-v-470d4c96]{color:#fff;border-color:#ff7439}.zjapp .report-process-accept-wrap .item-list-room.bg-part[data-v-470d4c96]{border:1px solid #0bc666;position:relative;color:#0bc666}",""])}}]);