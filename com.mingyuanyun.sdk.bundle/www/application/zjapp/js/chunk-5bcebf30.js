(window.webpackJsonp_module_entry_zjapp_=window.webpackJsonp_module_entry_zjapp_||[]).push([["chunk-5bcebf30"],{"21c0":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAAAXNSR0IArs4c6QAAA7pJREFUaAXtWEtPE1EU/s5YRDE+NuqGmGjagmCmJSx0Jz4WBlaauBETn0SJOxXfMT4WxGh0I4nxkRAXRhdufSx8/ASKEtpSNWokLojIAkyl9HimqOmUmencYQZd9CaTmXvmnPOd75x779w7QKVVMlDJQCUD/zIDFBQ4J6JbAL4j1yiqqnZQw+DHILACIcAJfREw8Q6Mlb+DfkXxzOYgCGhBOAV+dBYFb0Bs4v7wxiCwfCfAH1oWyLA5PiNYpnMzZD4IfCeAsS8dJdmfDpN5KyfCG3yI2eTCVwI80DgfhBMmhOJOAFXwlQCmJveCubY4ZvMzt3FfuMksm13PNwLMLSEJ/lTZcMjfueAbAfQPtwuB1WUJgLfzQENjeT13Gr4Q4KFwNTh/1hUkyyzJTV50petCyfOHjPmChuTDVchOrROcw7J0trnAK1bpQWjeY1BokBoHvha/UHkuS4CTdYsxiTrwVB1Acuf63/eIAC1UAXPQHROfKRCnAC0pyUghVJXE/J8ZimSyDnZSTpvGich6cdQja3qzjUrwYkJeiD1DtdZB9alhK0CHOcB3/2nwRrQMTSreiixfsgrekDkQwFI7o7mX8wo7THsCROXXdDuvfst5Xo+dS1sCpA89kAIdszOcMzlRF8WTz+3wbAkYBhRPX4fPX067QKzldJ5iQ9es301LbVehYiPui1yWGRXIdrgYx/RM6KZY5oxJZtFxRcCwk2X1qqwIM/f5Fk5nL9JuSPWPuvHjmoDhTHaSN+V2xI1jzzpEt2TYdLq1VyPATOiP3Jb1+aBbADU96kUsvZ+I2K2d4yQudVJwrO8+JBP7Sem7WfeJXiDWfkAleANTqQJ/guS30Rhy+b4/fV/umtZKevqpqi+lCvx1TjKU/G4aRry49EYgh7VewBxtcpBdrnrzRgBsnAH8bp5OaR4JwBOYM2NvSfFIgAKowBwR4OHmGvmkrXbOpoe3hFWF05+iqXoFRsbXFg4aikBl1Y3DfjbfUFavREGdAOfdDp/XIK1Dwjoo18sSXJuu+jAK2XhyEJcBIbyRwE/JR6n4a32PE3XbgPwV2RDqts5ZU14cPFSAw5YBED5Do33Qd8dLgi+oUyz1DHp7k5DbIxX5ZO0jv8ZS7iBUJ0A0UeLvuwR+Ektqo3KK6yW6IH8SrJvxjmLp+6hBVPZTXUJk1KTJ2ntT30VHeUsgf6DDyGUfiu/lspV6BFrQTfobcyAugA0V/hBfhrHx00Jkl/TSCFXvlJ9c31yaV9QqGahkoJKB/yADvwCwKfUADObhFgAAAABJRU5ErkJggg=="},"2e80":function(t,e,i){var n=i("9e2b");"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);(0,i("85cb").default)("3ccc3358",n,!0,{sourceMap:!1,shadowMode:!1})},"3e1e":function(t,e,i){"use strict";i("2e80")},4277:function(t,e,i){"use strict";i("5ab2"),i("e10e");var n=i("4c09"),r=(i("06a2"),i("28f8")),c=(i("163d"),i("6d57"),i("fc9f")),o=function(t){var e="select * from batch where id = '".concat(t,"'");return c.a.queryOne(e)},a=function(t){var e="select sipc.*,\n      si.checkitem_id, si.checkitem_parent_id, si.score \n      from special_inspect_place_checkitem sipc\n      join special_inspect si on si.id = sipc.special_inspect_id\n      where (sipc.status = '合格' or sipc.status = '不合格') and sipc.batch_id = '".concat(t,"'\n      order by si.checkitem_code");return c.a.query(e)},s=function(t){var e="select * from special_inspect \n      where batch_id = '".concat(t,"'\n      order by checkitem_code");return c.a.query(e)},l=i("7cb8");function u(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function d(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?u(Object(i),!0).forEach((function(e){Object(r.a)(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):u(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function f(t){return isNaN(t)?t:Math.round(100*t)/100}e.a={getPassrateMode:function(t){return o(t).then((function(t){var e;try{e=JSON.parse(t.template_extension).mode11_passrate_mode||1}catch(t){e=1}return e}))},getMode1TotalData:function(t){return a(t).then((function(t){if(!t&&!t.length)return[];var e={};t.forEach((function(t){e[t.special_inspect_id]||(e[t.special_inspect_id]={total:0,score:t.score,deduction:0,qualified:0}),e[t.special_inspect_id].total+=1,e[t.special_inspect_id].deduction+=Number(t.deduction)||0,"合格"===t.status&&(e[t.special_inspect_id].qualified+=1)}));var i=[];for(var n in e)i.push(d(d({},e[n]),{},{id:n}));return i}))},getMode2TotalData:function(t){var e=this;return Promise.all([s(t),a(t)]).then((function(t){var i=t[0],r=t[1],c={};(i||[]).forEach((function(t){try{var e=JSON.parse(t.checkitem_extension);t.isDeductionItem=!!e.is_deduction_item}catch(e){t.isDeductionItem=!1}c[t.checkitem_id]=t})),(r||[]).forEach((function(t){c[t.checkitem_id]&&(c[t.checkitem_id].problems||(c[t.checkitem_id].problems=[]),c[t.checkitem_id].problems.push(t))}));var o=Object(l.c)(i,{key:"checkitem_id",relationKey:"checkitem_parent_id"});return(o||[]).forEach((function(t){var i=e.getItemAllProblems(t,(function(t){return!t.isDeductionItem})),r=i.filter((function(t){return"合格"===t.status})),c=i.filter((function(t){return"不合格"===t.status})).reduce((function(t,e){return t+(e.deduction||0)}),0),o=e.getItemAllProblems(t,(function(t){return t.isDeductionItem})),a=o.reduce((function(t,e){return t+(e.deduction||0)}),0);t.allProblems=[].concat(Object(n.a)(i),Object(n.a)(o)),i&&i.length?(t.rejection=!1,t.passrate=r.length/i.length,t.deductionTotal=f(c),t.ducuctionItemTotal=f(a),t.result=t.score*t.passrate-t.deductionTotal-t.ducuctionItemTotal):t.rejection=!0})),o}))},getItemAllProblems:function(t,e){var i=this,n=[];return t.children&&t.children.length?t.children.forEach((function(t){n=n.concat(i.getItemAllProblems(t,e))})):e?e(t)&&(n=t.problems||[]):n=t.problems||[],n}}},"4aef":function(t,e,i){"use strict";var n=i("dd16").a,r=i("17cc"),c=Object(r.a)(n,(function(){var t=this.$createElement;return(this._self._c||t)("span",{class:this.classSet[this.status]},[this._v(this._s(this.text||this.status))])}),[],!1,null,null,null);e.a=c.exports},"4e84":function(t,e,i){"use strict";i("5ab2"),i("6d57"),i("e10e");var n=i("28f8"),r=(i("cc57"),i("fc9f")),c=function(t){var e="select * from section \n      where proj_id = '".concat(t,"' \n      order by name");return r.a.query(e)},o=function(t){var e="select b.*, sb.section_id from building b\n      join section_building sb on b.id = sb.building_id\n      where b.proj_id = '".concat(t,"' \n      order by b.sort, b.code");return r.a.query(e)},a=function(t){var e="select b.* from section_building sb \n      left join building b on sb.building_id = b.id \n      where sb.section_id = '".concat(t,"' \n      order by b.sort, b.code");return r.a.query(e)},s=function(t){var e="select * from build_unit \n      where building_id = '".concat(t,"'\n      order by sort");return r.a.query(e)},l=function(t){var e="select * from building_floor \n      where building_id = '".concat(t,"' \n      order by sort");return r.a.query(e)},u=function(t,e,i){var n=e?" and unit = '".concat(e,"' "):"",c="select * from room where \n      building_id = '".concat(t,"' and floor = '").concat(i,"' ").concat(n," \n      order by sort");return r.a.query(c)},d=i("7cb8");function f(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function p(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?f(Object(i),!0).forEach((function(e){Object(n.a)(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):f(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}e.a={getSections:function(t){return c(t)},getBuildingsByProject:function(t){return o(t)},getBuildingsBySection:function(t){return a(t)},getUnits:function(t){return s(t).then((function(t){return((t=t.filter((function(t){return!!t.name})))||[]).map((function(t){return p(p({},t),{},{id:t.name,name:Object(d.a)(t.name,"单元")})}))}))},getFloors:function(t){return l(t).then((function(t){return(t||[]).map((function(t){return p(p({},t),{},{id:t.floor,name:Object(d.a)(t.floor,"层")})}))}))},getRooms:function(t,e,i){return u(t,e,i).then((function(t){return(t||[]).map((function(t){return p(p({},t),{},{name:t.room_no})}))}))}}},"5d02":function(t,e,i){"use strict";(function(t){i("cc57"),i("6d57");var n=i("07d2"),r=i("4aef"),c=i("f369"),o=i("c726"),a=i("6e1b"),s=i("37d5"),l=i("3516"),u=i("e2a7"),d=i("3bd5"),f=i("4277"),p=!1;e.a={name:"SpecialInspectCheckitemList",components:{Item:n.default,StatusText:r.a,CheckGuide:c.a},props:{batchData:{type:Object},placeId:{type:String}},data:function(){return{isLoading:!1,placeData:{},listData:[],passrateMode:1,isBatchChecker:!1,editable:!1,version:1}},created:function(){var t=this;this.$on("reload",(function(){return t.version++})),this.$watch((function(){var e=t.batchData&&t.batchData.id||"";return"".concat(t.placeId,"-").concat(e,"-").concat(t.version)}),this.init,{immediate:!0})},activated:function(){p=!1},methods:{init:function(){var e=this;return this.placeId&&this.batchData&&this.batchData.id?this.getPassrateMode().then((function(){return e.getPlaceData()})).then((function(){return e.getListData()})).then((function(){var i=d.a.getUser().user_id,n=e.batchData.root_id||e.batchData.parent_id||e.batchData.id;return l.a.getBatchUsers(n).then((function(n){e.isBatchChecker=t.some(n,{user_id:i}),e.editable="检查完毕"!==e.batchData.status&&e.isBatchChecker}))})).finally((function(){e.isLoading=!1})).catch((function(t){$log.error(t),e.listData=[],e.isLoading=!1})):(this.listData=[],Promise.resolve())},getPassrateMode:function(){var t=this;return f.a.getPassrateMode(this.batchData.id).then((function(e){t.passrateMode=e}))},getPlaceData:function(){var t=this;return a.a.getBatchPlace(this.placeId).then((function(e){if(!e&&!p)return p=!0,t.$router.go(-1),u.a.alert("测区不存在"),Promise.reject("测区不存在");t.placeData=e||{}}))},getListData:function(){var t=this;return this.placeId?a.a.getBatchPlaceCheckitems(this.placeId).then((function(e){(e||[]).forEach((function(e){t.setUnqualifiedNum(e)})),t.listData=e})):Promise.reject("缺少测区id")},setUnqualifiedNum:function(t){var e=this;if(!t)return 0;if(t.children&&t.children.length){var i=0;return t.children.forEach((function(t){i+=e.setUnqualifiedNum(t)})),t.unqualifiedNum=i,t.unqualifiedNum}return"检查完毕"===this.batchData.status&&"未设置"===t.status&&(t.status="已甩项"),t.unqualifiedNum="不合格"===t.status?1:0,t.unqualifiedNum},editPlace:function(){var t=this;if(this.editable){var e={building_id:this.placeData.building_id,unit_id:this.placeData.unit,floor:this.placeData.floor,room_id:this.placeData.room_id,full_name:this.placeData.name};o.a.open({title:"选择测区",selected:e,projectId:this.batchData.proj_id,callback:function(e){o.a.close();var i={id:t.placeData.id,name:e.fullname,building_id:e.building&&e.building.id||"",unit:e.unit&&e.unit.id||"",floor:e.floor&&e.floor.id||"",room_id:e.room&&e.room.id||""};return a.a.updateBatchPlace(i).then((function(){return t.init()})).catch((function(t){$log.error(t),u.a.alert("修改测区失败")}))}})}},getPlaceOptions:function(){return s.default.getPlaceList(this.batchData.proj_id)},deletePlace:function(){var t=this;return u.a.popBox({title:"确定删除测区吗？",cancelText:"取消",okText:"删除"}).then((function(e){if(e)return a.a.deleteBatchPlace(t.placeData).then((function(){t.$router.go(-1)}))})).catch((function(t){$log.log(t),u.a.alert(t)}))},toggleItem:function(t){t.isOpen=!t.isOpen,a.a.saveCheckitemOpenStatus(t.id,t.isOpen)},tapItem:function(t){t.children&&t.children.length?this.toggleItem(t):["合格","不合格","草稿"].some((function(e){return e===t.status}))&&(this.editable?this.$router.push({name:"SpecialInspecDetailEdit",query:{specialInspectId:t.special_inspect_id,placeId:t.place_id}}):this.$router.push({name:"SpecialInspecDetailView",query:{specialInspectId:t.special_inspect_id,placeId:t.place_id}}))},setQualified:function(t){var e={id:t.id,status:"合格"};return a.a.submitPlaceSpecialInspectData(e).then((function(){t.status="合格"}))},setUnqualified:function(t){this.$router.push({name:"SpecialInspecDetailEdit",query:{specialInspectId:t.special_inspect_id,placeId:t.place_id}})}}}}).call(this,i("391c"))},6608:function(t,e,i){var n=i("b0d2");"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);(0,i("85cb").default)("21e92f9a",n,!0,{sourceMap:!1,shadowMode:!1})},"9e2b":function(t,e,i){(t.exports=i("690e")(!1)).push([t.i,"[data-v-0f3c0354] .layout-content{display:flex;flex-direction:column;overflow:hidden;background:#fff}.zjapp .page-scroll[data-v-0f3c0354]{flex:1;overflow:auto;padding-bottom:100px}.zjapp .bread-crumb[data-v-0f3c0354]{padding:8px 15px;font-size:16px;line-height:30px;color:#999}.zjapp .bread-crumb .level-item i[data-v-0f3c0354]{font-size:12px;margin:0 10px}.zjapp .bread-crumb .level-item:last-child>i[data-v-0f3c0354]{display:none}.zjapp .bread-crumb .active[data-v-0f3c0354]{color:#4275e8}.zjapp .empty-msg[data-v-0f3c0354]{display:flex;align-items:center;justify-content:center;color:#c8c8c8;margin-top:30px}.zjapp .empty-msg .line[data-v-0f3c0354]{width:48px;margin:0 8px;border-top:1px solid #e4e4e4}[data-v-0f3c0354] .icon-qualified{color:#4275e8}.zjapp .place-item[data-v-0f3c0354]{align-items:center}",""])},b0d2:function(t,e,i){var n=i("5454");(t.exports=i("690e")(!1)).push([t.i,".zjapp .app-btn-operate[data-v-7b385de6]{height:30px;line-height:28px;padding:0 15px;border:1px solid #4275e8;color:#4275e8;background-color:#fff;background-image:none;font-size:16px;min-width:auto;border-radius:15px}[data-v-7b385de6] .app-btn-operate .svg-loading{margin-top:4px}.zjapp .bg-level-end[data-v-7b385de6]{background-color:#fafafa}.zjapp .item-rule[data-v-7b385de6] .item-text{color:#999}.zjapp .header-btn[data-v-7b385de6]{height:30px;padding:4px 0;color:#4275e8}.zjapp .icon-mark[data-v-7b385de6]{width:20px;height:30px;background:url("+n(i("21c0"))+") 0 no-repeat;background-size:16px 16px}",""])},b786:function(t,e,i){"use strict";i("6608")},c726:function(t,e,i){"use strict";var n=i("329b"),r=(i("5ab2"),i("28f8")),c=(i("ed63"),i("8cf2"),i("e697"),i("6d57"),i("e10e"),i("cc57"),i("e204"),i("e89f")),o=i("07d2"),a=i("4e84");function s(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function l(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?s(Object(i),!0).forEach((function(e){Object(r.a)(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):s(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}var u=["building","unit","floor","room"],d=["unit"],f={name:"PlaceSelectDialog",components:{Item:o.default},mixins:[c.a],data:function(){return{show:!1,isLoading:!0,title:"",items:[],optionalItems:[],curItem:"",options:[],hasUnit:!1,projectId:"",sectionId:"",selected:{},defaultSelected:{},beforeConfirm:function(){},callback:function(){}}},computed:{crumbs:function(){var t=[],e=this.items,i=this.curItem,n=e.findIndex((function(t){return t===i}));if(n>=0)for(var r=0;r<=n;r++){var c=e[r],o=e[r-1],a=o?this.selected[o]&&this.selected[o].name:"全部";("unit"!==o||a)&&t.push({name:a,item:c})}return t},hasSelected:function(){return!!this.selected&&!!Object.keys(this.selected).length},prevItem:function(){var t=this,e=this.items.findIndex((function(e){return e===t.curItem}));return this.items[e-1]},nextItem:function(){var t=this,e=this.items.findIndex((function(e){return e===t.curItem}));return this.items[e+1]}},methods:{open:function(t){if(this.items=t.items||u,this.optionalItems=t.optionalItems||d,!this.items||!this.items.length)return Promise.reject(new Error("palce-select open() 参数错误"));this.curItem=this.items[0],this.projectId=t.projectId,this.sectionId=t.sectionId,this.defaultSelected=t.selected,this.title=t.title,this.beforeConfirm="function"==typeof t.beforeConfirm?t.beforeConfirm:function(){},this.callback="function"==typeof t.callback?t.callback:function(){},this.init(),this.show=!0},close:function(){this.show=!1},getDefaultId:function(t){if(!this.defaultSelected)return"";var e=this.defaultSelected[t];switch(t){case"section":return e&&e.id||"";case"building":return this.defaultSelected.building_id||e&&e.id||"";case"unit":return this.defaultSelected.unit_id||e&&e.id||"";case"floor":return("string"==typeof e?e:e&&e.id)||"";case"room":return this.defaultSelected.room_id||e&&e.id||""}},init:function(){var t=this,e=Promise.resolve(),i=!0;return this.selected={},this.curItem=this.items[0],this.items.forEach((function(n){e=e.then((function(){if(i)return t.getOptions(n).then((function(e){var r=t.getDefaultId(n),c=r&&(e||[]).find((function(t){return t.id===r}));if(!e||!e.length)return t.$set(t.selected,n,null),void(i=!!t.optionalItems.includes(n));c?(t.$set(t.selected,n,l({},c)),t.options=e,t.curItem=n,i=!0):(n===t.items[0]&&(t.options=e),i=!1)}))}))})),e},crumbClick:function(t){var e=this;this.curItem=t.item;var i=this.items.findIndex((function(t){return t===e.curItem}));return this.clearChildrenFromIndex(i),this.getOptions().then((function(t){if(e.options=t,"unit"===e.curItem&&(!e.options||!e.options.length)&&e.nextItem)return e.curItem=e.nextItem,e.getOptions().then((function(t){e.options=t}))}))},clearChildrenFromIndex:function(t){for(var e=this.items,i=t;i<e.length;i++){var n=e[i];this.$delete(this.selected,n)}},getOptions:function(t){var e=this;this.isLoading=!0,t=t||this.curItem;var i=this.items;return Promise.resolve().then((function(){var n=e.projectId,r=e.sectionId||e.selected&&e.selected.section&&e.selected.section.id,c=e.selected&&e.selected.building&&e.selected.building.id,o=e.selected&&e.selected.unit&&e.selected.unit.id,s=e.selected&&e.selected.floor&&e.selected.floor.id;switch(t){case"section":return a.a.getSections(n);case"building":return i.some((function(t){return"section"===t}))?a.a.getBuildingsBySection(r):a.a.getBuildingsByProject(n);case"unit":return a.a.getUnits(c);case"floor":return a.a.getFloors(c);case"room":return a.a.getRooms(c,o,s)}})).then((function(i){return"unit"===t&&(e.hasUnit=i&&i.length),i})).catch((function(t){$log.error(t)})).finally((function(){e.isLoading=!1}))},selectedItem:function(t){var e=this,i=this.items,n=this.curItem;if(n&&t){this.$set(this.selected,n,l({},t));var r=i.findIndex((function(t){return t===n}));this.clearChildrenFromIndex(r+1),this.nextItem?(this.curItem=this.nextItem,this.getOptions().then((function(t){if(e.options=t,"unit"===e.curItem&&(!e.options||!e.options.length)&&e.nextItem)return e.curItem=e.nextItem,e.getOptions().then((function(t){e.options=t}))})).then((function(){e.options&&e.options.length||e.finish()}))):this.finish()}},finish:function(){var t=this,e={fullname:""};this.items.forEach((function(i){var n=t.selected[i];n&&(e[i]=n,"floor"===i&&t.selected.room||(e.fullname+=n.name))}));var i=this.beforeConfirm&&this.beforeConfirm(e);i instanceof Promise||(i=Promise.resolve(i)),i.then((function(i){if(!1===i)return!1;t.callback&&t.callback(e)}))}}},p=(i("3e1e"),i("17cc")),h=Object(p.a)(f,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("transition",{attrs:{name:"slide-right"}},[t.show?i("page-content",{attrs:{mode:"dialog",title:t.title,"on-close":t.close}},[i("div",{staticClass:"bread-crumb"},t._l(t.crumbs,(function(e){return i("span",{key:e.item,staticClass:"level-item",class:{active:e.item===(t.hasUnit||"unit"!==t.prevItem?t.curItem:t.prevItem)},on:{click:function(i){t.crumbClick(e)}}},[t._v("\n        "+t._s(e.name)),i("icon",{attrs:{name:"arrow-right"}})],1)}))),!t.isLoading&&t.options.length?i("div",{ref:"placeSelectScroll",staticClass:"page-scroll"},[t._l(t.options,(function(e,n){return i("item",{key:n,staticClass:"border-bottom place-item",attrs:{text:e.name,"icon-right":t.selected[t.curItem]&&t.selected[t.curItem].id===e.id?"qualified":""},on:{click:function(i){t.selectedItem(e)}}})})),i("div",{staticClass:"empty-msg"},[i("span",{staticClass:"line"}),t._v("\n        就这么多了\n        "),i("span",{staticClass:"line"})])],2):t._e(),!t.isLoading&&t.options.length?i("app-button-group",{attrs:{"fixed-bottom":""}},[i("app-button",{attrs:{disabled:!t.hasSelected},on:{click:t.finish}},[t._v("\n        确定\n      ")])],1):t._e(),i("loading-status",{attrs:{"is-loading":t.isLoading,"is-empty":!t.options||!t.options.length,"empty-text":"没有信息"}})],1):t._e()],1)}),[],!1,null,"0f3c0354",null).exports,m=!1;m||(m=new(n.default.extend(h))({el:document.createElement("div")}),document.body.appendChild(m.$el));e.a=m},dd16:function(t,e,i){"use strict";(function(t){e.a={name:"StatusText",props:{status:{type:String},text:{type:String},extend:{type:Object,default:function(){return{}}},statusStyles:{type:Object,default:function(){return{}}}},data:function(){return{classSet:t.extend({"草稿":"color-gray","暂存":"color-gray","检查中":"color-orange","待整改":"color-red","待复验":"color-orange","待验收":"color-red","待报验":"color-red","待申请进场":"color-red","待初验":"color-red","待送检":"color-red","待上传报告":"color-red","待退场":"color-red","待建设单位验收":"color-red","待区域验收":"color-red","供应链退回":"color-red","预创建":"color-status-blue","已提交":"color-green","已整改":"color-green","已验收":"color-green","已通过":"color-green","已退场":"color-gray","已关闭":"color-gray","非正常关闭":"color-gray","已退回":"color-red","已完成":"color-green","已甩项":"color-gray","检查完毕":"color-green","送检合格":"color-green","复验合格":"color-green","验收合格":"color-green","验收不合格":"color-red","未验收":"color-orange","待点评":"color-orange","已点评":"color-green","合格":"color-green","不合格":"color-red","待审核":"color-orange","已发布":"color-green","已拒绝":"color-red","进度正常":"color-green","进度滞后":"color-red","正常":"color-green","滞后":"color-red","施工单位验收合格":"color-green","监理单位验收合格":"color-green","建设单位验收合格":"color-green","施工单位验收不合格":"color-red","监理单位验收不合格":"color-red","建设单位验收不合格":"color-red"},this.extend)}},mounted:function(){}}}).call(this,i("391c"))},e89f:function(t,e,i){"use strict";var n=i("04f3"),r=i("cf09"),c=i("4360"),o=0;e.a={name:"PopupMixin",data:function(){return{backButtonEvent:null}},watch:{show:function(t){var e=this;if(t){if(this.$nextTick((function(){e.$el&&e.$el.style&&(e.$el.style.zIndex=++r.a.zIndex,o++,c.a.commit("app/SET_HAS_POPUP",!!o))})),!this.backButtonEvent){var i=this.close||this.closePopup;this.backButtonEvent=Object(n.a)(i)}}else--o<0&&(o=0),c.a.commit("app/SET_HAS_POPUP",!!o),this.backButtonEvent&&(Object(n.c)(this.backButtonEvent),this.backButtonEvent=null)}},methods:{}}},eaf7:function(t,e,i){"use strict";i.r(e);var n=i("5d02").a,r=(i("b786"),i("17cc")),c=Object(r.a)(n,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("item",{staticClass:"bg-sub-theme",attrs:{border:"bottom","icon-right":t.editable?"arrow-right":""},on:{click:t.editPlace}},[i("div",{staticClass:"item-text"},[t._v(t._s(t.placeData.name))]),t.editable?i("div",{staticClass:"item-font color-gray"},[t._v("修改")]):t._e()]),t._l(t.listData,(function(e){return i("div",{key:e.id,staticClass:"mb10"},[i("item",{attrs:{"icon-left":"part-title"},on:{click:function(i){t.tapItem(e)}}},[2!==t.passrateMode||!e.isDeductionItem||e.children&&e.children.length?t._e():i("i",{staticClass:"icon-mark"}),i("div",{staticClass:"item-text"},[t._v(t._s(e.name))]),e.children&&e.children.length?i("div",{staticClass:"item-font color-gray3 ws-nowrap"},[t._v("\n        "+t._s(e.unqualifiedNum)+"项不合格\n      ")]):t._e(),e.children&&e.children.length?t._e():["不合格"===e.status?i("div",{staticClass:"item-font color-gray3 mr5"},[t._v("\n          -"+t._s(e.deduction)+"分\n        ")]):t._e(),"未设置"!==e.status?i("div",{staticClass:"item-font"},[i("status-text",{attrs:{status:e.status,extend:{"草稿":"color-orange"}}})],1):t._e(),"未设置"===e.status&&t.editable?i("div",{staticClass:"item-operate"},[i("app-button",{attrs:{type:"operate","has-loading":!1},on:{click:function(i){i.stopPropagation(),t.setUnqualified(e)}}},[t._v("\n            不合格\n          ")])],1):t._e(),"未设置"===e.status&&t.editable?i("div",{staticClass:"item-operate"},[i("app-button",{attrs:{type:"operate","has-loading":!1},on:{click:function(i){i.stopPropagation(),t.setQualified(e)}}},[t._v("\n            合格\n          ")])],1):t._e()],e.children&&e.children.length?i("icon",{attrs:{name:e.isOpen?"arrow-up":"arrow-down"}}):t._e()],2),e.children&&e.children.length?t._e():i("item",{staticClass:"item-rule",attrs:{border:"top"}},[i("div",{staticClass:"item-text"},[t._v(t._s(e.rule&&e.rule.value||""))]),i("check-guide",{attrs:{"item-id":e.special_inspect_id,module:"special-inspect"}})],1),e.isOpen?t._l(e.children,(function(e){return i("div",{key:e.id},[i("item",{attrs:{border:"top"},on:{click:function(i){t.tapItem(e)}}},[2!==t.passrateMode||!e.isDeductionItem||e.children&&e.children.length?t._e():i("i",{staticClass:"icon-mark"}),i("div",{staticClass:"item-text pr10"},[t._v(t._s(e.name))]),e.children&&e.children.length?t._e():["不合格"===e.status?i("div",{staticClass:"item-font color-gray3 mr5"},[t._v("\n              -"+t._s(e.deduction)+"分\n            ")]):t._e(),"未设置"!==e.status?i("div",{staticClass:"item-font"},[i("status-text",{attrs:{status:e.status,extend:{"草稿":"color-orange"}}})],1):t._e(),"未设置"===e.status&&t.editable?i("div",{staticClass:"item-operate"},[i("app-button",{attrs:{type:"operate","has-loading":!1},on:{click:function(i){i.stopPropagation(),t.setUnqualified(e)}}},[t._v("\n                不合格\n              ")])],1):t._e(),"未设置"===e.status&&t.editable?i("div",{staticClass:"item-operate"},[i("app-button",{attrs:{type:"operate","has-loading":!1},on:{click:function(i){i.stopPropagation(),t.setQualified(e)}}},[t._v("\n                合格\n              ")])],1):t._e()],e.children&&e.children.length?i("icon",{attrs:{name:e.isOpen?"arrow-up":"arrow-down"}}):t._e()],2),e.children&&e.children.length?t._e():i("item",{staticClass:"item-rule",attrs:{border:"top"}},[i("div",{staticClass:"item-text"},[t._v(t._s(e.rule&&e.rule.value||""))]),i("check-guide",{attrs:{"item-id":e.special_inspect_id,module:"special-inspect"}})],1),e.children&&e.children.length&&e.isOpen?[t._l(e.children,(function(e){return[i("item",{key:e.id,staticClass:"bg-enditem bg-level-end",attrs:{border:"top"},on:{click:function(i){t.tapItem(e)}}},[2!==t.passrateMode||!e.isDeductionItem||e.children&&e.children.length?t._e():i("i",{staticClass:"icon-mark"}),i("div",{staticClass:"item-text"},[t._v(t._s(e.name))]),"不合格"===e.status?i("div",{staticClass:"item-font color-gray3 mr5"},[t._v("\n                -"+t._s(e.deduction)+"分\n              ")]):t._e(),"未设置"!==e.status?i("div",{staticClass:"item-font"},[i("status-text",{attrs:{status:e.status,extend:{"草稿":"color-orange"}}})],1):t._e(),"未设置"===e.status&&t.editable?i("div",{staticClass:"item-operate"},[i("button",{staticClass:"btn btn-operate",on:{click:function(i){i.stopPropagation(),t.setUnqualified(e)}}},[t._v("\n                  不合格\n                ")])]):t._e(),"未设置"===e.status&&t.editable?i("div",{staticClass:"item-operate"},[i("button",{staticClass:"btn btn-operate",on:{click:function(i){i.stopPropagation(),t.setQualified(e)}}},[t._v("\n                  合格\n                ")])]):t._e()]),e.children&&e.children.length?t._e():i("item",{key:"rule-"+e.id,staticClass:"item-rule bg-level-end",attrs:{border:"top"}},[i("div",{staticClass:"item-text"},[t._v(t._s(e.rule&&e.rule.value||""))]),i("check-guide",{attrs:{"item-id":e.special_inspect_id,module:"special-inspect"}})],1)]}))]:t._e()],2)})):t._e()],2)})),t.editable?i("app-button-group",[i("app-button",{attrs:{type:"text"},on:{click:t.deletePlace}},[t._v("\n      删除测区\n    ")])],1):t._e()],2)}),[],!1,null,"7b385de6",null);e.default=c.exports}}]);