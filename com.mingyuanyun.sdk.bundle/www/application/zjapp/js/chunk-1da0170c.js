(window.webpackJsonp_module_entry_zjapp_=window.webpackJsonp_module_entry_zjapp_||[]).push([["chunk-1da0170c"],{"1f71":function(e,t,s){var i=s("d501");"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);(0,s("85cb").default)("19587aa2",i,!0,{sourceMap:!1,shadowMode:!1})},"2a67":function(e,t,s){"use strict";(function(e){s("cc57"),s("163d");var i=s("d152");t.a={name:"DropDownSelect",props:{value:{type:Array,default:function(){return[]}},options:{type:Array,default:function(){return[]}},stage:{type:Number,default:1},minSelectStage:{type:Number},needFullSelecte:{type:Boolean,default:!0},optionsMap:{type:Array,default:function(){return[]}},emptyText:{type:Array,default:function(){return[]}},editabled:{type:Boolean,default:!0},showTextLevel:{type:Number,default:0},onlyShowLastText:{type:Boolean,default:!1},keepStage:{type:Array,default:function(){return[]}},showNote:{type:Boolean,default:!0}},data:function(){return{isOpen:!1}},computed:{hdText:function(){return e.isEmpty(this.value)||e.isEmpty(this.value[0])?this.editabled?"请选择":"无":this.value[0].name},bdText:function(){var t="",s=this.showTextLevel||this.value.length;if(e.isEmpty(this.value)||e.isEmpty(this.value[1]))t=this.editabled?"请选择":"无";else if(this.onlyShowLastText){var i=this.value.length;t=this.value[i]&&this.value[i].name?this.value[i].name:this.value[i-1].name}else for(var o=1;o<s;o++)t+=this.value[o]&&this.value[o].name?this.value[o].name:"";return t}},created:function(){var e=this;i.a.$on("afterClosePopup",(function(){e.isOpen=!1}))},methods:{openDialog:function(){var e=this;i.a.openPopup({options:this.options,selected:this.value,stage:this.stage,minSelectStage:this.minSelectStage,needFullSelecte:this.needFullSelecte,optionsMap:this.optionsMap,emptyText:this.emptyText,keepStage:this.keepStage,el:this.$refs["select-con"],componentUid:this._uid,showNote:this.showNote,callback:function(t){e.$emit("input",t),e.$emit("onSelect",t)}}),this.isOpen=!0}}}}).call(this,s("391c"))},"47df":function(e,t,s){var i=s("cc4c");"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);(0,s("85cb").default)("1ffcc628",i,!0,{sourceMap:!1,shadowMode:!1})},"7fbc":function(e,t,s){"use strict";s("1f71")},ad46:function(e,t,s){"use strict";(function(e){s("f548"),s("e697"),s("cc57"),s("9dd9");var i,o=s("07d2"),a=s("9eea"),n=s("6f9e"),l=s("e89f"),c=[],r=[],p=[],d=!0,h=null,u=["没有标段","没有楼栋","没有单元","没有楼层"],f=["","list bg-gray6","list bg-gray5","list bg-gray4"];t.a={name:"DropDownSelectDialog",components:{Item:o.a,appSearchBar:a.a},mixins:[l.a],data:function(){return{show:!1,showList:!1,isOpening:!1,isClosing:!1,isSearching:!1,contentTop:64,listHeight:510,target:"",selectedSet:[],stage:1,layoutMap:[],keepStage:[],componentUid:"",showNote:!0,hasSearch:!1,searchTimer:null,keyword:""}},watch:{show:function(e){var t=this;e&&this.$nextTick((function(){t.showList=!0}))},showList:function(t){var s=this;t&&this.$nextTick((function(){s.$refs["list-wrap"]&&e.each(s.$refs["list-wrap"].querySelectorAll(".selected")||[],(function(e){setTimeout((function(){e.scrollIntoViewIfNeeded(!0)}),400)}))}))},keyword:function(e){var t=this;clearTimeout(this.searchTimer),this.searchTimer=setTimeout((function(){t.initSelectedSet(c,r)}),100)}},created:function(){n.a.$on("routerBeforeEach",this.closePopup),n.a.$on("pageContentClick",this.onClickOther)},destroyed:function(){n.a.$off("routerBeforeEach",this.closePopup),n.a.$off("pageContentClick",this.onClickOther)},methods:{openPopup:function(t){var s=this;if(this.show)return t.componentUid===this.componentUid?void this.closePopup():void this.closePopup().then((function(){s.openPopup(t)}));this.stage=t.stage,this.componentUid=t.componentUid||"";var o=document.querySelector(".layout-main .layout-header");this.contentTop=o.offsetHeight;var a=t.el&&t.el.$el?t.el.$el:t.el;if(a){var n=a.getBoundingClientRect();this.contentTop=n.bottom}this.target=a,this.listHeight=e.minBy([window.innerHeight-this.contentTop-50,510]),c=t.options,r=e.clone(t.selected),p=t.optionsMap||[],d=!1!==t.needFullSelecte||t.needFullSelecte,h=t.minSelectStage||this.stage,i=t.callback,this.showNote=t.showNote,this.layoutMap=[];for(var l=0;l<t.stage;l++)this.layoutMap.push({level:l,bgColor:t.hasBgColor?f[l]:"",emptyText:t.emptyText&&t.emptyText[l]?t.emptyText[l]:u[l],keep:!!e.isEmpty(t.keepStage)||!!t.keepStage[l]});this.hasSearch=!!t.hasSearch,this.initSelectedSet(t.options,t.selected),this.show=!0,this.$emit("open")},closePopup:function(){var e=this;if(!this.isOpening)return this.$refs["app-search-bar"]&&this.$refs["app-search-bar"].cancelSearch(),this.showList=!1,this.$emit("close"),new Promise((function(t){e.$on("afterClosePopup",t)}))},afterClose:function(){this.show=!1,this.keyword="",this.isClosing=!1,this.$emit("afterClosePopup")},onClickOther:function(e){e&&e.target&&e.target!==this.target&&this.show&&this.closePopup()},getLevelOptionsKey:function(e){return p&&p[e]&&p[e].key?p[e].key:"children"},initSelectedSet:function(){var t=this,s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];this.selectedSet=[],e.each(i||[],(function(i,o){var a=t.getLevelOptionsKey(o);if(i&&!(o>t.stage-1)){if(!t.selectedSet[o]){var n;n=o?t.selectedSet[o-1].selected&&t.selectedSet[o-1].selected[a]||[]:s;var l=o||e.isEmpty(t.keyword)?n:e.filter(n,(function(e){return new RegExp(t.keyword,"gm").test(e.name)}));t.selectedSet[o]={selected:{},options:l}}var c=t.selectedSet[o].options,r=e.find(c,{id:i.id});r&&(t.selectedSet[o].selected=r)}})),e.isEmpty(this.selectedSet)&&(this.selectedSet=[{selected:{},options:s}])},showName:function(e){var t=e;return t=(t=t.replace(new RegExp("<","gm"),"&lt;")).replace(new RegExp(">","gm"),"&gt;")},highLightKeyword:function(e){if(this.keyword){var t="";return t=e.replace(new RegExp(this.keyword,"gm"),"-----hightLightTagL-----"+this.keyword+"-----hightLightTagR-----"),t=(t=(t=this.showName(t)).replace(/-----hightLightTagL-----/gm,'<span class="color-blue">')).replace(/-----hightLightTagR-----/gm,"</span>")}return this.showName(e)},getResult:function(){var t=this,s=[];return e.each(this.selectedSet,(function(i,o){var a=e.extend({},i.selected);delete a[t.getLevelOptionsKey(o+1)],e.isEmpty(a)||s.push(a)})),s},select:function(t,s){var o=this,a=this.getLevelOptionsKey(s+1),n=e.isEmpty(t[a]),l=s>=this.stage-1||s>=h-1&&n||!d&&n;this.selectedSet.splice(s+1),this.selectedSet[s].selected=t,r.splice(s),r.push(t),this.$refs["app-search-bar"]&&this.$refs["app-search-bar"].saveHistory(),l?setTimeout((function(){i&&i(o.getResult()),o.closePopup()}),100):this.selectedSet.push({selected:{},options:t[a]})},onSearchTypeChange:function(e){this.isSearching=e}}}}).call(this,s("391c"))},cc4c:function(e,t,s){(e.exports=s("690e")(!1)).push([e.i,".zjapp .content[data-v-1fa2658d]{position:fixed;width:100%;bottom:0;background-color:rgba(0,0,0,.4);overflow:hidden}.zjapp .box[data-v-1fa2658d]{flex-direction:column}.zjapp .box[data-v-1fa2658d],.zjapp .list-wrap[data-v-1fa2658d]{display:flex;background-color:#fff}.zjapp .list-wrap[data-v-1fa2658d]{flex-direction:row;align-items:flex-start;flex:1;overflow:hidden}.zjapp .list[data-v-1fa2658d]{padding:0 10px}.zjapp .list[data-v-1fa2658d],.zjapp .list-single[data-v-1fa2658d]{flex:1;overflow:auto;height:100%;scroll-behavior:smooth}.zjapp .item-dropdown[data-v-1fa2658d]{padding:6px 0;background-color:transparent}.zjapp .item-dropdown[data-v-1fa2658d] .item-text{font-size:14px}.zjapp .item-dropdown.selected[data-v-1fa2658d]{color:#4275e8;padding-bottom:5px;border-bottom:1px solid #4275e8}.zjapp .item-dropdown.selected[data-v-1fa2658d] .item-text{color:#4275e8}.zjapp .empty-tips[data-v-1fa2658d]{padding:13px 0;line-height:20px;color:#b2b2b2;font-size:14px}.zjapp .select-note[data-v-1fa2658d]{line-height:16px;font-size:12px;color:#8c8c8c}[data-v-1fa2658d] .icon-qualified{width:30px;height:30px;line-height:30px;text-align:center;color:#4275e8}",""])},d152:function(e,t,s){"use strict";var i=s("329b"),o=s("ad46").a,a=(s("fc72"),s("17cc")),n=Object(a.a)(o,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return e.show?s("div",{staticClass:"content",style:{top:e.contentTop+"px"},on:{click:function(t){return t.target!==t.currentTarget?null:e.closePopup(t)}}},[s("transition",{attrs:{name:"slide-down"},on:{enter:function(t){e.isOpening=!0},"after-enter":function(t){e.isOpening=!1},leave:function(t){e.isClosing=!0},"after-leave":e.afterClose}},[e.showList?s("div",{staticClass:"box",style:{height:e.listHeight+"px"}},[e.hasSearch?s("app-search-bar",{ref:"app-search-bar",attrs:{placeholder:"输入项目名称搜索","simple-mode":"","history-key":"drop-down-search-history-key"},on:{changeSearchStatus:e.onSearchTypeChange},model:{value:e.keyword,callback:function(t){e.keyword=t},expression:"keyword"}}):e._e(),!e.isSearching||e.keyword&&e.selectedSet[0]&&e.selectedSet[0].options.length?s("div",{ref:"list-wrap",staticClass:"list-wrap"},[1===e.stage?e._l(e.layoutMap,(function(t,i){var o;return s("div",{key:"map"+i,staticClass:"list-single",class:(o={},o[t.bgColor]=!0,o),style:{height:e.listHeight-(e.hasSearch?44:0)+"px"}},e._l(e.selectedSet[t.level]&&e.selectedSet[t.level].options||[],(function(o,a){return s("item",{key:a,class:{selected:e.selectedSet[t.level].selected&&e.selectedSet[t.level].selected.id===o.id},attrs:{border:"bottom"},on:{click:function(s){e.select(o,t.level)}}},[s("div",{staticClass:"item-text",class:{"color-theme":o.note&&e.selectedSet[t.level].selected&&e.selectedSet[t.level].selected.id===o.id},domProps:{innerHTML:e._s(i?e.showName(o.nameShow||o.name):e.highLightKeyword(o.nameShow||o.name))}}),!o.note&&e.selectedSet[t.level].selected&&e.selectedSet[t.level].selected.id===o.id?s("icon",{attrs:{name:"qualified"}}):e._e(),o.note?s("div",{staticClass:"item-font color-gray2 f14"},[e._v(e._s(o.note))]):e._e()],1)})))})):[e._l(e.layoutMap,(function(t,i){var o;return[t.keep||e.selectedSet[t.level]&&e.selectedSet[t.level].options&&e.selectedSet[t.level].options.length?s("div",{key:"map"+i,staticClass:"list",class:(o={},o[t.bgColor]=!0,o),style:{height:e.listHeight-(e.hasSearch?44:0)+"px"}},[e._l(e.selectedSet[t.level]&&e.selectedSet[t.level].options||[],(function(o,a){return s("item",{key:a,staticClass:"item-dropdown",class:{selected:e.selectedSet[t.level].selected&&e.selectedSet[t.level].selected.id===o.id},on:{click:function(s){e.select(o,t.level)}}},[s("div",{staticClass:"item-text"},[s("p",{domProps:{innerHTML:e._s(i?e.showName(o.nameShow||o.name):e.highLightKeyword(o.nameShow||o.name))}}),s("p",{staticClass:"select-note"},[e._v(e._s(o.note))])])])})),e.selectedSet[t.level]&&e.selectedSet[t.level].options&&e.selectedSet[t.level].options.length?e._e():s("div",{staticClass:"empty-tips"},[e._v("\n                "+e._s(e.selectedSet[t.level-1]&&e.selectedSet[t.level-1].selected&&e.selectedSet[t.level-1].selected.id?t.emptyText:"请选择")+"\n              ")])],2):e._e()]}))]],2):e._e(),!e.isSearching||!e.keyword||e.selectedSet[0]&&e.selectedSet[0].options.length?e._e():s("loading-status",{attrs:{"is-empty":!0,type:"search","empty-text":"未搜索到相关内容"}})],1):e._e()])],1):e._e()}),[],!1,null,"1fa2658d",null).exports,l=!1;l||(l=new(i.default.extend(n))({el:document.createElement("div")}),document.body.appendChild(l.$el));t.a=l},d501:function(e,t,s){(e.exports=s("690e")(!1)).push([e.i,".zjapp .select-con[data-v-7ec13e18]{position:relative;padding:7px 40px 7px 15px;height:50px;overflow:hidden}.zjapp .select-con[data-v-7ec13e18]:not(:first-child){border:none;background-image:linear-gradient(90deg,#d7e0f7,#d7e0f7 50%,transparent 0);background-size:1px 100%;background-repeat:no-repeat;background-position:0 0}.zjapp .select-con>*[data-v-7ec13e18]{pointer-events:none}.zjapp .select-hd[data-v-7ec13e18]{line-height:14px;font-size:10px;color:#333;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.zjapp .select-bd[data-v-7ec13e18]{margin-top:2px;font-size:14px}.zjapp .select-bd[data-v-7ec13e18],.zjapp .select-text[data-v-7ec13e18]{line-height:20px;color:#333;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.zjapp .select-text[data-v-7ec13e18]{padding:8px 0;font-size:16px}.zjapp .select-arrow[data-v-7ec13e18]{position:absolute;top:5px;right:0;width:40px;height:40px;line-height:40px;font-size:16px;color:#c8c8c8;text-align:center}",""])},d623:function(e,t,s){"use strict";var i=s("2a67").a,o=(s("7fbc"),s("17cc")),a=Object(o.a)(i,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{ref:"select-con",staticClass:"select-con",on:{click:e.openDialog}},[e.$slots.default?[e._t("default")]:[s("div",{staticClass:"select-hd"},[e._v(e._s(e.hdText))]),s("div",{staticClass:"select-bd"},[e._v(e._s(e.bdText))])],s("icon",{staticClass:"select-arrow",attrs:{name:e.isOpen?"arrow-up":"arrow-down"}})],2)}),[],!1,null,"7ec13e18",null);t.a=a.exports},fc72:function(e,t,s){"use strict";s("47df")}}]);