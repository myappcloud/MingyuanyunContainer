(window.webpackJsonp_module_entry_zjapp_=window.webpackJsonp_module_entry_zjapp_||[]).push([["chunk-11cbc228"],{"234e":function(t,e,a){(t.exports=a("690e")(!1)).push([t.i,".zjapp .inventory-detail[data-v-f4906592]{opacity:1;max-height:100%;overflow:auto}.zjapp .inventory-detail .item-special_center[data-v-f4906592] .item-text{display:flex;align-items:center}.zjapp .inventory-detail .item-price_p[data-v-f4906592]{margin:7px 0 15px}",""])},"5ab9":function(t,e,a){"use strict";a.r(e);var i=a("3e83"),n=(a("9a33"),a("6d57"),a("e10e"),a("07d2")),r=a("e68e"),s=a("cd05"),o=a("1b7e"),d=a("f3a3"),u={name:"InventoryDetail",components:{Item:n.a,ItemImgList:r.a,UserSelect:s.a},data:function(){return{isDraftLoading:!1,id:"",data:{}}},computed:{dateTime:function(){var t=this.data.submit_time;return t?t.slice(0,t.length-3):""},title:function(){if(Object.keys(this.data).length<=0)return"盘点详情";var t=this.data.inventory_date;return t?this.data.material_name+" "+t.split("-")[1]+"-"+t.split("-")[2]:this.data.material_name}},activated:function(){this.data={},this.id=this.$route.query.id,this.isDraftLoading=!0,this.page=1,this.getHasNetwork()},methods:{getDetail:function(){var t=this,e={id:this.id};return!!e.id&&Object(d.a)(e).then((function(e){e?(e.images=e.images&&t.jsonJudeg(e.images)?JSON.parse(e.images):[],e.submitter={id:e.user_id,name:e.user_name,mobile:e.mobile,is_im_user:e.is_im_user},e.next_inventory_time=(e.start_date||"开工")+" 至 "+e.end_date,e.used_quantity=e.used_quantity+e.unit,e.remainder_quantity=e.remainder_quantity+e.unit,e.occurrence_quantity=e.occurrence_quantity+e.unit,t.data=e):t.data={},t.isDraftLoading=!1})).catch((function(e){t.isDraftLoading=!1,$log.error("材料盘点详情error：",e)}))},jsonJudeg:function(t){try{if("object"===Object(i.a)(JSON.parse(t)))return!0}catch(t){return!1}},getHasNetwork:function(){var t=this;o.a.getHasNetwork().then((function(e){e?t.getDetail():(t.$toast("当前无网络！"),t.isDraftLoading=!1)}))}}},l=(a("9856"),a("17cc")),c=Object(l.a)(u,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("page-content",{attrs:{"show-go-root":!0,title:t.title}},[a("div",{staticClass:"inventory-detail"},[a("div",{directives:[{name:"show",rawName:"v-show",value:Object.keys(t.data).length,expression:"Object.keys(data).length"}],staticClass:"list bg-white pt10 pb10 border"},[a("item",{attrs:{label:"材料",text:t.data.material_name}}),a("item",{attrs:{label:"盘点时段",text:t.data.next_inventory_time}}),a("item",{attrs:{label:"本期进场",text:t.data.occurrence_quantity}}),a("item",{staticClass:"item-special_center",attrs:{label:"本期已施工设计用量",text:t.data.used_quantity}}),a("item",{attrs:{label:"现场剩余",text:t.data.remainder_quantity}}),a("item",{attrs:{label:"备注"}},[a("div",{staticClass:"item-con",attrs:{slot:"right"},slot:"right"},[a("div",[a("p",{staticClass:"item-price_p"},[t._v(t._s(t.data.remark))]),a("item-img-list",{attrs:{"online-mode":!0,editabled:!1},model:{value:t.data.images,callback:function(e){t.$set(t.data,"images",e)},expression:"data.images"}})],1)])]),a("user-select",{attrs:{title:"提交人",date:t.dateTime,mode:"view",editabled:!1},model:{value:t.data.submitter,callback:function(e){t.$set(t.data,"submitter",e)},expression:"data.submitter"}})],1),a("loading-status",{attrs:{"is-loading":t.isDraftLoading,"is-empty":!Object.keys(t.data).length,"empty-text":"暂无盘点记录"}})],1)])}),[],!1,null,"f4906592",null);e.default=c.exports},9856:function(t,e,a){"use strict";a("d04d")},d04d:function(t,e,a){var i=a("234e");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);(0,a("85cb").default)("0bd8b20a",i,!0,{sourceMap:!1,shadowMode:!1})},f3a3:function(t,e,a){"use strict";a.d(e,"c",(function(){return n})),a.d(e,"e",(function(){return r})),a.d(e,"b",(function(){return s})),a.d(e,"a",(function(){return o})),a.d(e,"d",(function(){return d}));var i=a("162a");function n(t){return i.a.request("/online/material-inventory/list",t)}function r(t){return i.a.post("/online/material-inventory/save-data",null,t)}function s(t){return i.a.request("/online/material-inventory/history",t)}function o(t){return i.a.request("/online/material-inventory/detail",t)}function d(t){return i.a.post("/online/material-inventory/change-status",null,t)}}}]);