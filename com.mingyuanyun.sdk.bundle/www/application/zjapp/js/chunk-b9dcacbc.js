(window.webpackJsonp_module_entry_zjapp_=window.webpackJsonp_module_entry_zjapp_||[]).push([["chunk-b9dcacbc"],{3680:function(e,t,a){var i=a("5454");(e.exports=a("690e")(!1)).push([e.i,".zjapp .app-search-bar[data-v-21aa6e06]{display:flex;flex-direction:column;min-height:44px}.zjapp .app-search-bar.has-history-list[data-v-21aa6e06]{flex:1;min-height:100%}.zjapp .app-search-input-wrap[data-v-21aa6e06]{display:flex;flex-direction:row;padding:8px;background-color:#fff}.zjapp .app-search-input-box[data-v-21aa6e06]{position:relative;flex:1;height:28px}.zjapp .app-search-label[data-v-21aa6e06]{position:absolute;z-index:2;top:0;left:50%;height:28px;line-height:28px;display:flex;align-items:center;padding-left:0;transform:translateX(-50%);transition:left .4s cubic-bezier(.4,.6,.2,1),transform .4s cubic-bezier(.4,.6,.2,1)}.zjapp .app-search-label-focus[data-v-21aa6e06]{left:12px;transform:translateX(0)}.zjapp .app-search-input[data-v-21aa6e06]{height:28px;padding:5px 32px 5px 33px;width:100%;overflow:hidden;background-color:#f4f4f4;border:none;border-radius:14px}.zjapp .app-search-icon[data-v-21aa6e06]{position:absolute;top:7px;left:0;color:#cacaca;font-size:14px}.zjapp .app-search-placeholder[data-v-21aa6e06]{color:#999;font-size:14px;margin-left:21px;white-space:nowrap}.zjapp .app-search-clear[data-v-21aa6e06]{position:absolute;top:-8px;right:-8px;width:60px;height:44px;background:url("+i(a("7b08"))+") 50% no-repeat;background-size:16px 16px}.zjapp .app-search-cancel[data-v-21aa6e06]{height:44px;line-height:44px;padding:0 15px;margin:-8px -8px -8px 0;font-size:16px;color:#4275e8}.zjapp .app-search-history[data-v-21aa6e06]{flex:1;overflow:auto}.zjapp .app-search-history-empty[data-v-21aa6e06]{display:flex;flex-direction:column}.zjapp .list-title[data-v-21aa6e06]{font-size:14px;line-height:30px;padding:8px 16px 2px}.zjapp .item-history-title[data-v-21aa6e06] .item-text{color:#999}.zjapp .item-history-title[data-v-21aa6e06] .icon{position:relative;display:block;min-width:24px;height:30px;line-height:30px;text-align:right;font-size:14px;color:#999}.zjapp .item-history[data-v-21aa6e06] .item-text{color:#666}.zjapp .item-text[data-v-21aa6e06],.zjapp .van-icon[data-v-21aa6e06]{font-size:14px}.zjapp .search-box[data-v-21aa6e06]{padding:5px 15px}.zjapp .search-box .item-tag[data-v-21aa6e06]{display:inline-block;padding:8px 15px;border-radius:23px;line-height:20px;font-size:14px;font-weight:400;color:#333;background-color:#f4f5f7;margin:0 10px 10px 0}",""])},"36f0":function(e,t,a){var i=a("3680");"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);(0,a("85cb").default)("b156f4b6",i,!0,{sourceMap:!1,shadowMode:!1})},"3a6a":function(e,t,a){"use strict";a("36f0")},"3ac7":function(e,t,a){e.exports=a.p+"img/qr-code.bc3452b1.png"},"3c41":function(e,t,a){(e.exports=a("690e")(!1)).push([e.i,".zjapp .about-content-wrip .item-label{flex:1}.zjapp .about-content-wrip .item-text{color:#aaa!important;font-size:14px}.zjapp .about-content .scroll{padding-bottom:30px}.zjapp .about-con{background-color:#f2f2f2}.zjapp .about-logo{text-align:center;padding:30px 30px 10px}.zjapp .about-logo img{width:30%;max-width:180px}.zjapp .about-version{padding:0 30px 20;color:#111;text-align:center;font-size:16px}.zjapp .about-synopsis{padding:0 30px 30px;color:#656565;text-indent:2em}.zjapp .about-copyright{position:absolute;bottom:0;left:0;width:100%;text-align:center;font-size:12px;color:#ccc;padding:5px 0;background-color:#f2f2f2}.zjapp .about-copyright p{margin:0}",""])},"4ffd":function(e,t,a){e.exports=a.p+"img/logo.d4c3ab5d.png"},5025:function(e,t,a){"use strict";a.r(t);a("198f");var i,o=a("b3e2"),s=a("4ad6"),n=a("3bd5"),r=a("07d2"),l=a("3122"),c=a("774b"),p=a("24de"),d=a("a078"),h=a("329b"),u=(a("f548"),a("e697"),a("cc57"),a("9dd9"),a("c04d"),a("f585")),f=a("391c"),g=a.n(f),m=a("c644"),v={props:{value:{type:String,default:""},placeholder:{type:String,default:"搜索"},simpleMode:{type:Boolean},historyKey:{type:String,default:"app-search-history-key"}},data:function(){return{isSeaching:!1,searchHistory:[]}},watch:{},mounted:function(){this.searchHistory=m.a.getObject(this.historyKey,m.a.level.user)||[],console.log("this.searchHistory",this.searchHistory)},methods:{onFocus:function(){this.isSeaching=!0,this.$emit("changeSearchStatus",this.isSeaching)},cancelSearch:function(){this.clearValue(),this.isSeaching=!1,this.$emit("changeSearchStatus",this.isSeaching)},clearValue:function(e){e&&this.$refs["app-search-bar-input"].focus(),this.$emit("input","")},oninput:function(){this.$emit("input",this.$refs["app-search-bar-input"].value)},selectHistory:function(e){this.$emit("input",e.val)},hasHistory:function(e){return g.a.some(this.searchHistory,(function(t){return t.val===e}))},saveHistory:function(){this.value&&!this.hasHistory(this.value)&&(this.searchHistory.unshift({val:this.value}),m.a.saveUserObject(this.historyKey,this.searchHistory))},deleteHistoryAll:function(){this.searchHistory=[],m.a.saveUserObject(this.historyKey,[])}}},b=(a("3a6a"),a("17cc")),x=Object(b.a)(v,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-search-bar",class:{"has-history-list":e.isSeaching&&!e.value}},[a("div",{staticClass:"app-search-input-wrap border-bottom"},[a("div",{staticClass:"app-search-input-box"},[a("div",{staticClass:"app-search-label",class:{"app-search-label-focus":e.isSeaching},on:{click:function(t){e.$refs["app-search-bar-input"].focus()}}},[a("icon",{staticClass:"app-search-icon",attrs:{name:"sousuo-user"}}),e.isSeaching&&e.value?e._e():a("span",{staticClass:"app-search-placeholder"},[e._v(e._s(e.placeholder))])],1),a("input",{ref:"app-search-bar-input",staticClass:"app-search-input",attrs:{id:"app-search-bar-input",type:"text"},domProps:{value:e.value},on:{focus:e.onFocus,input:e.oninput}}),e.value?a("div",{staticClass:"app-search-clear",on:{click:function(t){e.clearValue(!0)}}}):e._e()]),e.isSeaching?a("div",{staticClass:"app-search-cancel",on:{click:e.cancelSearch}},[e._v("取消")]):e._e()]),e.isSeaching&&!e.value?a("div",{staticClass:"app-search-history",class:{"app-search-history-empty":!e.searchHistory.length}},[e.simpleMode?e._e():a("div",{staticClass:"list-title"},[e._v("搜索历史")]),e.simpleMode?a("div",{staticClass:"item item-history-title van-hairline--bottom",attrs:{text:"搜索历史"}},[a("div",{staticClass:"item-text"},[e._v("\n        搜索历史\n      ")]),e.searchHistory&&e.searchHistory.length?a("van-icon",{attrs:{slot:"icon-right",name:"cross"},on:{click:e.deleteHistoryAll},slot:"icon-right"}):e._e()],1):e._e(),a("div",{staticClass:"search-box"},e._l(e.searchHistory,(function(t,i){return a("div",{key:i,staticClass:"item-tag",on:{click:function(a){e.selectHistory(t)}}},[e._v("\n        "+e._s(t.val)+"\n      ")])}))),a("loading-status",{attrs:{"is-empty":!e.searchHistory.length,type:"search","empty-text":"没有搜索历史"}})],1):e._e(),!e.simpleMode&&e.isSeaching&&!e.value&&e.searchHistory.length?a("app-button-group",{attrs:{"fixed-bottom":""}},[a("app-button",{attrs:{type:"warning",plain:""},on:{click:function(t){e.deleteHistoryAll()}}},[e._v("清空搜索历史")])],1):e._e()],1)}),[],!1,null,"21aa6e06",null).exports,y=(a("6144"),a("4360")),w=a("915f"),k=a("48f4"),S=[],z=[],T=[],C=!0,j=null,_=["没有标段","没有楼栋","没有单元","没有楼层"],$=["","list bg-gray6","list bg-gray5","list bg-gray4"],P={name:"ProjectDropDownDialog",components:{appSearchBar:x},mixins:[w.a],data:function(){return{show:!1,showList:!1,isOpening:!1,isClosing:!1,isSearching:!1,contentTop:64,listHeight:450,target:"",selectedSet:[],stage:2,layoutMap:[],keepStage:[],componentUid:"",showNote:!0,hasSearch:!1,searchTimer:null,keyword:""}},watch:{show:function(e){var t=this;e&&this.$nextTick((function(){t.showList=!0}))},showList:function(e){var t=this;e&&this.$nextTick((function(){t.$refs["list-wrap"]&&g.a.each(t.$refs["list-wrap"].querySelectorAll(".selected")||[],(function(e){setTimeout((function(){e.scrollIntoViewIfNeeded(!0)}),400)}))}))},keyword:function(e){var t=this;clearTimeout(this.searchTimer),this.searchTimer=setTimeout((function(){t.initSelectedSet(S,z)}),100)}},created:function(){},methods:{openPopup:function(e){var t=this;if(!e.options.length)return Object(u.a)("未建项目、项目未授权或项目未建标段，请先检查后台设置");if(console.log({params:e}),this.show)return e.componentUid===this.componentUid?void this.closePopup():void this.closePopup().then((function(){t.openPopup(e)}));this.componentUid=e.componentUid||"";var a=e.el&&e.el.$el?e.el.$el:e.el;if(a){var o=a.getBoundingClientRect();this.contentTop=o.bottom}this.target=a,this.listHeight=g.a.min([window.innerHeight-this.contentTop-150,450]),S=e.options,z=g.a.clone(e.selected),T=e.optionsMap||[],C=!1,j=e.minSelectStage||this.stage,i=e.callback,this.showNote=e.showNote,this.layoutMap=[];for(var s=0;s<this.stage;s++)this.layoutMap.push({level:s,bgColor:$[s],emptyText:e.emptyText&&e.emptyText[s]?e.emptyText[s]:_[s],keep:!!g.a.isEmpty(e.keepStage)||!!e.keepStage[s]});this.hasSearch=!0,this.initSelectedSet(e.options,e.selected),this.show=!0,this.$emit("open")},closePopup:function(){var e=this;if(!this.isOpening)return this.$refs["app-search-bar"]&&this.$refs["app-search-bar"].cancelSearch(),this.showList=!1,this.$emit("close"),new Promise((function(t){e.$on("afterClosePopup",t)}))},afterClose:function(){this.show=!1,this.keyword="",this.isClosing=!1,this.$emit("afterClosePopup")},onClickOther:function(e){e&&e.target&&e.target!==this.target&&this.show&&this.closePopup()},getLevelOptionsKey:function(e){return T&&T[e]&&T[e].key?T[e].key:"children"},initSelectedSet:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];this.selectedSet=[],g.a.each(a||[],(function(a,i){var o=e.getLevelOptionsKey(i);if(a&&!(i>e.stage-1)){if(!e.selectedSet[i]){var s;s=i?e.selectedSet[i-1].selected&&e.selectedSet[i-1].selected[o]||[]:t;var n=i||g.a.isEmpty(e.keyword)?s:g.a.filter(s,(function(t){return new RegExp(e.keyword,"gm").test(t.name)}));e.selectedSet[i]={selected:{},options:n}}var r=e.selectedSet[i].options,l=g.a.find(r,{id:a.id});l&&(e.selectedSet[i].selected=l)}})),g.a.isEmpty(this.selectedSet)&&(this.selectedSet=[{selected:{},options:t}])},showName:function(e){var t=e;return t=(t=t.replace(new RegExp("<","gm"),"&lt;")).replace(new RegExp(">","gm"),"&gt;")},highLightKeyword:function(e){if(this.keyword){var t="";return t=e.replace(new RegExp(this.keyword,"gm"),"-----hightLightTagL-----"+this.keyword+"-----hightLightTagR-----"),t=(t=(t=this.showName(t)).replace(/-----hightLightTagL-----/gm,'<span class="color-blue">')).replace(/-----hightLightTagR-----/gm,"</span>")}return this.showName(e)},getResult:function(){var e=this,t=[];g.a.each(this.selectedSet,(function(a,i){var o=g.a.extend({},a.selected);delete o[e.getLevelOptionsKey(i+1)],g.a.isEmpty(o)||t.push(o)})),console.log("result",g.a.clone(t));var a=g.a.clone(t).pop();return y.a.commit("global/SET_CURRENT_PROJECT",a),y.a.state.global.isLeader&&(k.default.setLocalChanged(),k.default.showTopProgress(),k.default.executeSync()),a},select:function(e,t){var a=this,o=this.getLevelOptionsKey(t+1),s=g.a.isEmpty(e[o]),n=t>=this.stage-1||t>=j-1&&s||!C&&s;this.selectedSet.splice(t+1),this.selectedSet[t].selected=e,z.splice(t),z.push(e),this.$refs["app-search-bar"]&&this.$refs["app-search-bar"].saveHistory(),n?setTimeout((function(){i&&i(a.getResult()),a.closePopup()}),100):this.selectedSet.push({selected:{},options:e[o]})},onSearchTypeChange:function(e){this.isSearching=e}}},N=(a("871a"),Object(b.a)(P,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.show?a("div",{staticClass:"zjapp",style:{top:e.contentTop+"px"}},[a("div",{staticClass:"zjapp-content",style:{top:e.contentTop+"px"},on:{click:function(t){return t.target!==t.currentTarget?null:e.closePopup(t)}}},[a("transition",{attrs:{name:"slide-down"},on:{enter:function(t){e.isOpening=!0},"after-enter":function(t){e.isOpening=!1},leave:function(t){e.isClosing=!0},"after-leave":e.afterClose}},[e.showList?a("div",{staticClass:"box",style:{height:e.listHeight+"px"}},[e.hasSearch?a("app-search-bar",{ref:"app-search-bar",attrs:{placeholder:"输入项目名称搜索","simple-mode":"","history-key":"drop-down-search-history-key"},on:{changeSearchStatus:e.onSearchTypeChange},model:{value:e.keyword,callback:function(t){e.keyword=t},expression:"keyword"}}):e._e(),!e.isSearching||e.keyword&&e.selectedSet[0]&&e.selectedSet[0].options.length?a("div",{ref:"list-wrap",staticClass:"list-wrap"},[e._l(e.layoutMap,(function(t,i){var o;return[t.keep||e.selectedSet[t.level]&&e.selectedSet[t.level].options&&e.selectedSet[t.level].options.length?a("div",{key:"map"+i,staticClass:"list",class:(o={},o[t.bgColor]=!0,o),style:{height:e.listHeight-(e.hasSearch?44:0)+"px"}},[e._l(e.selectedSet[t.level]&&e.selectedSet[t.level].options||[],(function(o,s){return a("div",{key:s,staticClass:"item item-dropdown",class:{selected:e.selectedSet[t.level].selected&&e.selectedSet[t.level].selected.id===o.id},on:{click:function(a){e.select(o,t.level)}}},[a("div",{staticClass:"item-text"},[a("p",{domProps:{innerHTML:e._s(i?e.showName(o.nameShow||o.name):e.highLightKeyword(o.nameShow||o.name))}}),a("p",{staticClass:"select-note"},[e._v(e._s(o.note))])])])})),e.selectedSet[t.level]&&e.selectedSet[t.level].options&&e.selectedSet[t.level].options.length?e._e():a("div",{staticClass:"empty-tips"},[e._v("\n                "+e._s(e.selectedSet[t.level-1]&&e.selectedSet[t.level-1].selected&&e.selectedSet[t.level-1].selected.id?t.emptyText:"请选择")+"\n              ")])],2):e._e()]}))],2):e._e(),!e.isSearching||!e.keyword||e.selectedSet[0]&&e.selectedSet[0].options.length?e._e():a("loading-status",{attrs:{"is-empty":!0,type:"search","empty-text":"未搜索到相关内容"}})],1):e._e()])],1)]):e._e()}),[],!1,null,"abcb555c",null).exports),H=!1;H||(H=new(h.default.extend(N))({el:document.createElement("div")}),document.body.appendChild(H.$el));var D=H,E={name:"About",components:{item:r.a,Scroller:c.a},data:function(){return{qrCodeSrc:a("4ffd"),APP_ENV:"",version:"",clickNumber:0,special_user:!0}},computed:{fullYear:function(){return(new Date).getFullYear()},tenant_code:function(){return n.a.getUser().tenant_code}},mounted:function(){var e=this,t=n.a.getUser(),a=t.tenant_code+"_"+t.user_code;this.special_user="mysoft_appstore"===a.toLocaleLowerCase()||"mysoft_android"===a.toLocaleLowerCase(),s.a.getAppFullVersion().then((function(t){e.version="v"+t.fullVersion}))},methods:{isGreenTown:function(){return window.APP_NAME&&window.APP_NAME.indexOf("绿城")>-1},debuggerClick:function(){this.clickNumber++,6===this.clickNumber?this.$router.push({name:"DebuggerInfo"}):this.clickNumber>6&&(this.clickNumber=0)},copyIosUrl:function(){var e=this.isGreenTown()?"http://appcloud.mypaas.com.cn/open/qr-code/redirect?id=67":"https://itunes.apple.com/us/app/ming-yuan-yi-dong-zhi-jian/id994771539?l=zh&ls=1&mt=8";s.a.saveTextToClipboard(e).then((function(){o.a.alert({message:"已复制iOS版下载链接，可通过微信、QQ等发给你的朋友。"}).then((function(){}))}))},copyAndroidUrl:function(){var e=this.isGreenTown()?"http://appcloud.mypaas.com.cn/open/qr-code/redirect?id=67":"http://appcloud.mypaas.com.cn/open/qr-code/redirect?id=82";s.a.saveTextToClipboard(e).then((function(){o.a.alert({message:"已复制Android版下载链接，可通过微信、QQ等发给你的朋友。"}).then((function(){}))}))},copyPcUrl:function(){var e=d.a.myAboutPcUrl[this.tenant_code]||d.a.myAboutPcUrl.default,t="已复制PC端网址：".concat(e,"。可通过微信、QQ等发送至PC访问。");s.a.saveTextToClipboard(e).then((function(){o.a.alert({message:t,className:"word-break-all"}).then((function(){}))}))},copyServiceCode:function(){s.a.saveTextToClipboard("53395479").then((function(){o.a.alert({message:"已复制号码53395479，可在微信或QQ添加好友直接对话（无验证）"}).then((function(){}))}))},showQRCode:function(){var e=l.a.fixUrl(s.a.appCodePath()+a(this.isGreenTown()?"9589":"3ac7"));s.a.openImageBrowser([e],0)},goUserAgreement:function(){p.a.checkHasNetwork().then((function(){s.a.openUrl("https://bbx.mysre.cn/Operation400/web/index.html#/productAnnouncement/reviewIndex?id=39f2018f-e724-e15f-aa4d-923206555da7&product_id=c2a55e1a-1b35-11ea-bd79-6c92bf61e29e&key=0d1201a55291549dd5fdf99f50228a5b&time=1575975037&_k=19mls3","用户协议")}))},goPrivacyStatement:function(){p.a.checkHasNetwork().then((function(){s.a.openUrl("https://bbx.mysre.cn/Operation400/web/index.html#/productAnnouncement/reviewIndex?id=39f170b5-e9d9-4565-d13f-56a7ee52e623&product_id=0dc1973a-a67c-11e8-bd79-6c92bf61e29e&key=cc9fa379ab02b499f066087bb4c8b92a&time=1575973483&_k=wg3jdk","隐私声明")}))},dropDown:function(e){D.show?D.closePopup():D.openPopup({el:e.target,emptyText:["","无分期"],callback:function(e){console.log({project:e})}})}}},O=(a("86f6"),Object(b.a)(E,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("page-content",{attrs:{title:"关于"}},[a("scroller",[a("div",{staticClass:"about-content-wrip"},[a("div",{staticClass:"about-con clearfix"},[a("div",{staticClass:"about-logo"},[a("img",{attrs:{src:e.qrCodeSrc},on:{click:e.debuggerClick}})]),a("p",{staticClass:"about-version"},[a("span",[e._v(e._s(e.version))])]),a("p",{staticClass:"about-synopsis"},[e._v("\n          明源移动质检致力于帮助房地产开发商控制质量风险、防治安全隐患、把控施工进度，适用于现场检查、实测实量、工序移交、材料验收、材料盘点、样板管理、形象进度、进度管理、闭水试验、专项巡检、视频监控、工程案例管理等业务场景。用户可在APP中进行各类业务数据采集，并且可以在线上进行问题登记、指派、整改回复、复验的完整流程。支持离线操作，解决建筑工地无网或弱网的数据采集难题。\n        ")]),a("div",{directives:[{name:"show",rawName:"v-show",value:!e.special_user,expression:"!special_user"}],staticClass:"list"},[a("item",{directives:[{name:"track",rawName:"v-track",value:"我-关于-复制iOS下载链接",expression:"'我-关于-复制iOS下载链接'"}],attrs:{mode:"edit","icon-right":"arrow-right",label:"iOS 版下载",text:"复制链接地址"},on:{click:e.copyIosUrl}}),a("item",{directives:[{name:"track",rawName:"v-track",value:"我-关于-复制Android下载链接",expression:"'我-关于-复制Android下载链接'"}],attrs:{mode:"edit","icon-right":"arrow-right",label:"Android 版下载",text:"复制链接地址"},on:{click:e.copyAndroidUrl}}),a("item",{directives:[{name:"track",rawName:"v-track",value:"我-关于-复制二维码",expression:"'我-关于-复制二维码'"}],attrs:{mode:"edit","icon-right":"arrow-right",label:"二维码下载",text:"iOS与Android通用"},on:{click:e.showQRCode}}),a("item",{directives:[{name:"track",rawName:"v-track",value:"我-关于-复制链接地址",expression:"'我-关于-复制链接地址'"}],attrs:{mode:"edit","icon-right":"arrow-right",label:"PC端网址",text:"复制链接地址"},on:{click:e.copyPcUrl}})],1),a("div",{staticClass:"list"},[a("item",{directives:[{name:"track",rawName:"v-track",value:"我-关于-复制客服微信/QQ",expression:"'我-关于-复制客服微信/QQ'"}],attrs:{mode:"edit","icon-right":"arrow-right",label:"客服微信/QQ",text:"53395497"},on:{click:e.copyServiceCode}}),a("item",{directives:[{name:"track",rawName:"v-track",value:"我-关于-用户协议",expression:"'我-关于-用户协议'"}],staticClass:"mt10",attrs:{mode:"edit","icon-right":"arrow-right",label:"用户协议",placeholder:""},on:{click:e.goUserAgreement}}),a("item",{directives:[{name:"track",rawName:"v-track",value:"我-关于-隐私声明",expression:"'我-关于-隐私声明'"}],attrs:{mode:"edit","icon-right":"arrow-right",label:"隐私声明",placeholder:""},on:{click:e.goPrivacyStatement}})],1)])])]),a("div",{staticClass:"about-copyright"},[a("p",[e._v("Copyright © 2015-"+e._s(e.fullYear)+" 明源云链 版权所有")])])],1)}),[],!1,null,null,null));t.default=O.exports},"774b":function(e,t,a){"use strict";var i=a("d18d").a,o=(a("b225"),a("17cc")),s=Object(o.a)(i,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{ref:"scroll-warp",staticClass:"scroll-warp",class:{"scroll-warp-pulling":e.pulling,"scroll-warp-complete":!e.hasNext&&!e.isEmpty,"scroll-warp-empty":e.isEmpty},style:{"padding-bottom":e.numberKeyboardCoverHeight+"px"},on:{scroll:e.onScroll,touchstart:e.onTouchstart,touchmove:e.onTouchmove,touchend:e.onTouchend}},[e.allowPullDown?a("div",{staticClass:"pull-refresh-warp",style:{height:e.pullDist+"px"}},[a("div",{staticClass:"pull-refresh"},[a("div",{staticClass:"animation-refresher",class:{refreshing:e.refreshing}}),e.updateTime?a("p",{staticClass:"pull-refresh-date"},[e._v("最后成功同步："+e._s(e.updateTime))]):e._e()])]):e._e(),e._t("default"),e.loading?a("div",{staticClass:"page-loading"},[a("svg",{staticClass:"svg-loading",attrs:{viewBox:"0 0 80 80"}},[a("circle",{attrs:{cx:"40",cy:"40",r:"36"}})])]):e._e(),e.hasNext||e.isEmpty?e._e():[e.$slots.end?e._t("end"):e._e(),!e.$slots.end&&e.endText?a("div",{staticClass:"end-text"},[e._v("\n      "+e._s(e.endText)+"\n    ")]):e._e()]],2)}),[],!1,null,"2b1a346c",null);t.a=s.exports},"7d53":function(e,t,a){(e.exports=a("690e")(!1)).push([e.i,".zjapp .zjapp-content[data-v-abcb555c]{position:fixed;width:100%;bottom:0;background-color:rgba(0,0,0,.4);overflow:hidden;z-index:9999}.zjapp .zjapp-content .box[data-v-abcb555c]{flex-direction:column}.zjapp .zjapp-content .box[data-v-abcb555c],.zjapp .zjapp-content .list-wrap[data-v-abcb555c]{display:flex;background-color:#fff;border-radius:0 0 20px 20px}.zjapp .zjapp-content .list-wrap[data-v-abcb555c]{flex-direction:row;align-items:flex-start;flex:1;overflow:hidden}.zjapp .zjapp-content .list[data-v-abcb555c]{padding:0 10px}.zjapp .zjapp-content .list[data-v-abcb555c],.zjapp .zjapp-content .list-single[data-v-abcb555c]{flex:1;overflow:auto;height:100%;scroll-behavior:smooth}.zjapp .zjapp-content .item-dropdown[data-v-abcb555c]{padding:6px 0;background-color:transparent}.zjapp .zjapp-content .item-dropdown[data-v-abcb555c] .item-text{font-size:14px}.zjapp .zjapp-content .item-dropdown.selected[data-v-abcb555c]{color:#4275e8;padding-bottom:5px;border-bottom:1px solid #4275e8}.zjapp .zjapp-content .item-dropdown.selected[data-v-abcb555c] .item-text{color:#4275e8}.zjapp .zjapp-content .empty-tips[data-v-abcb555c]{padding:13px 0;line-height:20px;color:#b2b2b2;font-size:14px}.zjapp .zjapp-content .select-note[data-v-abcb555c]{line-height:16px;font-size:12px;color:#8c8c8c}.zjapp .zjapp-content[data-v-abcb555c] .icon-qualified{width:34px;height:34px;line-height:34px;text-align:center;color:#4275e8}",""])},"86f6":function(e,t,a){"use strict";a("b9c3")},"871a":function(e,t,a){"use strict";a("ddcf")},9589:function(e,t,a){e.exports=a.p+"img/qr-greentown-code.120c1d5a.png"},"9d55":function(e,t,a){(e.exports=a("690e")(!1)).push([e.i,'.zjapp .scroll-warp[data-v-2b1a346c]{flex:1;overflow:auto;-webkit-overflow-scrolling:touch}.zjapp .scroll-warp-pulling[data-v-2b1a346c]{overflow:hidden}.zjapp .scroll-warp-complete[data-v-2b1a346c]:after{content:"";display:block;height:100px}.zjapp .scroll-warp-empty[data-v-2b1a346c]{display:flex;flex-direction:column}.zjapp .pull-refresh-warp[data-v-2b1a346c]{position:relative;height:0;overflow:hidden}.zjapp .pull-refresh[data-v-2b1a346c]{position:absolute;left:0;bottom:0;height:70px;width:100%;padding:6px;text-align:center}.zjapp .pull-refresh-date[data-v-2b1a346c]{margin-top:4px;height:16px;line-height:16px;font-size:12px;color:#bcbcbc}.zjapp .page-loading[data-v-2b1a346c]{padding:10px;text-align:center}.zjapp .end-text[data-v-2b1a346c]{color:#c8c8c8;background:#f4f4f4;position:relative;line-height:76px;height:76px;text-align:center}.zjapp .end-text[data-v-2b1a346c]:after,.zjapp .end-text[data-v-2b1a346c]:before{content:"";position:absolute;width:48px;height:1px;background:#e4e4e4;top:50%;margin-top:-1px}.zjapp .end-text[data-v-2b1a346c]:after{left:50%;transform:translateX(-92px)}.zjapp .end-text[data-v-2b1a346c]:before{right:50%;transform:translateX(90px)}.zjapp .end-slot[data-v-2b1a346c]{padding:30px;line-height:18px;text-align:center;color:#c8c8c8}',""])},b225:function(e,t,a){"use strict";a("ef48")},b9c3:function(e,t,a){var i=a("3c41");"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);(0,a("85cb").default)("4a782d5d",i,!0,{sourceMap:!1,shadowMode:!1})},d18d:function(e,t,a){"use strict";(function(e){a("2b45");var i,o=a("4360"),s=a("48f4"),n=a("162a"),r=a("e2a7"),l=a("a500"),c=a("6f9e"),p={};t.a={name:"Scroller",props:{buildingId:{type:String,default:""},hasNext:{type:Boolean,default:!1},isEmpty:{type:Boolean,default:!1},isSync:{type:Boolean,default:!0},endText:{type:String,default:""},memoryScrollTop:{type:Boolean,default:!0},keepScrollTop:{type:Boolean},hasPullDown:{type:Boolean,default:!0},onPullDown:{type:Function}},data:function(){return{pullDist:0,refreshing:!1,pulling:!1,loading:!1,scrollTop:0,isCurrKeyboard:!1,gapBottom:0}},computed:{allowPullDown:function(){return this.hasPullDown&&(!!this.$listeners.pullDown||!!this.onPullDown)},updateTime:function(){return o.a.state.global.businessDownloadTime},numberKeyboardCoverHeight:function(){return o.a.state.global.isNumberInputOpen?o.a.state.global.numberKeyboardHeight-this.gapBottom:0}},mounted:function(){var e=this;c.a.$on("numberKeyboardOpen",this.onNumberKeyboardOpen),this.$nextTick((function(){var t=e.$refs["scroll-warp"]&&e.$refs["scroll-warp"].getBoundingClientRect&&e.$refs["scroll-warp"].getBoundingClientRect();t&&(e.gapBottom=document.documentElement.clientHeight-t.bottom),e.$el&&e.$el.addEventListener("focus",(function(t){var a=t&&t.target,i=a&&a.tagName&&a.tagName.toLowerCase();if("input"===i||"textarea"===i){window.addEventListener("resize",(function t(){var i=a.getBoundingClientRect(),o=e.$el.getBoundingClientRect(),s=i.bottom-o.bottom;s>0&&e.scrollBy(s),window.removeEventListener("resize",t,!1)}),!1)}}),!0)}))},destroyed:function(){c.a.$off("numberKeyboardOpen",this.onNumberKeyboardOpen)},activated:function(){var e=this.keepScrollTop||this.$router.isBack&&this.memoryScrollTop;this.scrollTop&&e&&(this.$refs["scroll-warp"].scrollTop=this.scrollTop)},deactivated:function(){this.memoryScrollTop&&(this.scrollTop=this.$refs["scroll-warp"].scrollTop)},methods:{onScroll:function(e){var t=this,a=this.$refs["scroll-warp"].scrollTop,i=this.$refs["scroll-warp"].scrollHeight;if(a+this.$refs["scroll-warp"].clientHeight>=i-5&&!this.loading&&this.hasNext){this.loading=!0;var o=this.$listeners.loadNext();o&&o.then&&"function"==typeof o.then?o.then((function(){t.loading=!1})):this.loading=!1}this.$emit("scroll",e)},getTouchDiretion:function(e){if(!(p&&e&&e.touches&&e.touches[0]))return"";var t=e.touches[0].clientX,a=e.touches[0].clientY;return Math.abs(a-p.y)>Math.abs(t-p.x)&&Math.abs(a-p.y)>=3?a>p.y?"down":"up":""},onTouchstart:function(e){this.allowPullDown&&e.touches&&1===e.touches.length&&(p={x:e.touches[0].clientX,y:e.touches[0].clientY,scrollTop:this.$refs["scroll-warp"].scrollTop,pullDist:this.pullDist})},onTouchmove:function(e){if(this.allowPullDown&&e.touches&&1===e.touches.length){var t=this.$refs["scroll-warp"].scrollTop,a=e.touches[0].clientY,i=a-p.y,o=this.getTouchDiretion(e);"down"===o?!this.refreshing&&t<=0?(this.pulling=!0,this.pullDist=(i-p.scrollTop)/2,e.preventDefault()):this.pulling=!1:"up"===o?this.pullDist>0&&(this.pullDist=p.pullDist-(p.y-a),e.preventDefault()):this.pullDist=p.pullDist}},onTouchend:function(){var e=this;this.allowPullDown&&(p={},this.pulling=!1,this.pullDist>=70&&this.isSync?this.refreshing?this.makePullTo(70):this.makePullTo(70).then((function(){if(e.refreshing=!0,e.onPullDown){var t=e.onPullDown();t&&t.then&&"function"==typeof t?t.finally((function(){e.refreshing=!1,e.makePullTo(0)})):(e.refreshing=!1,e.makePullTo(0))}else e.dataSync().then((function(){e.refreshing=!1,e.makePullTo(0),e.$emit("pullDown")})).catch((function(){e.refreshing=!1,e.makePullTo(0),e.$emit("pullDown")}))})):(this.refreshing=!1,this.makePullTo(0)))},makePullTo:function(e){var t=this,a=this.pullDist,i=e,o=i-a,s=a;return a===i?Promise.resolve():new Promise((function(e){!function n(){window.requestAnimationFrame((function(){s+=o/6,t.pullDist=s,a<i&&s<i||a>i&&s>i?n():(t.pullDist=i,t.refreshing=!1,e())}))}()}))},dataSync:function(){var e,t=s.default.getCurrentModuleCode(),a=s.default.getCurrentRoute(),i=a.meta&&a.meta.isTodo;if(s.default.isModuleNeedBuilding(t)&&!i){if(!this.buildingId)return new Promise((function(e){setTimeout((function(){e()}),500)}));e=this.buildingId}return l.a.addTrack("公共-手动下拉刷新","",""),n.a.beginManualUpdate(),s.default.checkSync(e).then((function(e){return n.a.endManualUpdate(),e})).catch((function(e){$log.error("下拉刷新错误",e),e&&"Error: Network Error"===e.toString()?r.a.alert("当前网络无法同步数据"):r.a.alert(e),n.a.endManualUpdate()}))},getScrollHeight:function(){return this.$refs["scroll-warp"].offsetHeight},getScrollTop:function(){return this.$refs["scroll-warp"].scrollTop},setScrollTop:function(e){this.$refs["scroll-warp"].scrollTop=e},scrollBy:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:200,o=this.getScrollTop(),s=o+e,n=Math.round(a/16.7),r=e/n,l=o,c=i=+new Date;return o===s?Promise.resolve():new Promise((function(e){!function a(){window.requestAnimationFrame((function(){c===i&&(l+=r,t.$refs["scroll-warp"].scrollTop=l,o<s&&l<s||o>s&&l>s?a():(t.$refs["scroll-warp"].scrollTop=s,e()))}))}()}))},scrollTo:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:200,a=this.getScrollTop(),i=e-a;return this.scrollBy(i,t)},scrollToEle:function(e){var t=e.keyboardHeight||232,a=(e=e.$el?e.$el:e).getBoundingClientRect(),i=this.$refs["scroll-warp"].getBoundingClientRect();if(a&&i){var s=document.documentElement.clientHeight-(o.a.state.global.isNumberInputOpen?t:0),n=i.bottom<s?i.bottom:s,r=i.top-a.top,l=a.bottom-n;r>0?this.scrollBy(-r-10):l>0&&this.scrollBy(l+10)}},isCurrent:function(t,a){var i=this;t.length&&e.each(t,(function(e){e._uid===a?i.isCurrKeyboard=!0:i.isCurrent(e.$children,a)}))},onNumberKeyboardOpen:function(e){this.isCurrKeyboard=!1,this.isCurrent(this.$children,e._uid),this.isCurrKeyboard&&this.scrollToEle(e)}}}}).call(this,a("391c"))},ddcf:function(e,t,a){var i=a("7d53");"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);(0,a("85cb").default)("642986e7",i,!0,{sourceMap:!1,shadowMode:!1})},ef48:function(e,t,a){var i=a("9d55");"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);(0,a("85cb").default)("a1a65c0c",i,!0,{sourceMap:!1,shadowMode:!1})}}]);