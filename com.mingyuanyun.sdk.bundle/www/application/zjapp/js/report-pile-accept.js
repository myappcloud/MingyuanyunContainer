(window.webpackJsonp_module_entry_zjapp_=window.webpackJsonp_module_entry_zjapp_||[]).push([["report-pile-accept","chunk-1cd94a56","chunk-7cd8882d"],{"0732":function(t,e,i){var a=i("81f2");"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);(0,i("85cb").default)("1b5b07de",a,!0,{sourceMap:!1,shadowMode:!1})},"0c16":function(t,e,i){var a=i("ab6c");"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);(0,i("85cb").default)("1a340048",a,!0,{sourceMap:!1,shadowMode:!1})},"120a":function(t,e,i){(t.exports=i("690e")(!1)).push([t.i,".zjapp .list[data-v-a87b83a2]{margin-bottom:10px}.zjapp .item-base[data-v-a87b83a2]{align-items:center;border:none;background-image:linear-gradient(0deg,#dcdcdc,#dcdcdc 33.3333%,transparent 0);background-size:100% 1px;background-repeat:no-repeat;background-position:bottom}.zjapp .item-base[data-v-a87b83a2] .van-icon{position:relative;display:block;padding-right:10px;margin-right:-10px;width:34px;height:34px;line-height:34px;text-align:right;font-size:20px;color:#c8c8c8}.zjapp .btn[data-v-a87b83a2]{border-radius:0}.zjapp .btn-link[data-v-a87b83a2]{background:#fff;color:#4275e8}.zjapp .item.pile-type[data-v-a87b83a2] .item-label-gray{color:#333}.zjapp .item.pile-type[data-v-a87b83a2] .item-text{text-align:right}",""])},"16ff":function(t,e,i){var a=i("39e4");"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);(0,i("85cb").default)("801e728a",a,!0,{sourceMap:!1,shadowMode:!1})},"17da":function(t,e,i){"use strict";i("2bcf")},"20cd":function(t,e,i){"use strict";(function(t){i("ed63"),i("8cf2"),i("6a61");var a,n=i("2e91"),s=(i("e10e"),i("6d57"),i("cc57"),i("fd50")),o=(i("e2a7"),i("7bac")),r=i("a7c3"),c=i("d152"),l=i("e3b4"),p=i("f7ab"),d=i("774b"),h=i("ccf5"),u=i("fa50"),f=i("1b7e"),g=i("c77f"),m=i("6bf2"),v=i.n(m),b=i("391c"),x=i("6144"),y=i("bc69");e.a={components:{DropDownSelect:c.a,SynchronizeTipBar:p.a,Scroller:d.default,DrawingPile:h.a,AppSearchBar:l.a,PileAcceptConditionFilter:u.a},data:function(){return{isLoading:!0,currentBuilding:[],placeOptions:[],isSearching:!1,tabData:[{name:"全部",statusText:"",status:"all",number:0},{name:"部分验收",statusText:"待验收",status:"partAccept",number:0},{name:"已验收",statusText:"已验收",status:"alreadyAccept",number:0}],filterType:"all",pileImage:"",allPileList:[],currentPileList:[],showPileImg:!1,projId:"",buildingId:"",start:"",end:"",emptyTips:"",errorType:"report",currentCheckItem:[],checkItemList:[],allCheckItemList:[],dateType:6,buildingShowType:x.a.getObject(y.a.PILE_ACCEPT_CURRENT_BUILDING_SHOW_TYPE,x.a.level.user)||{}}},computed:{isBuildingSelectOpen:function(){return c.a.show},currentBuildName:function(){return this.currentBuilding.length>1?this.currentBuilding[0].name+this.currentBuilding[1].name:""},projectSelected:function(){return this.$store.state.global.currentReportProject},currentPileDateSortList:function(){var t={};this.currentPileList.forEach((function(e){var i=v()(e.created_on).format("YYYY-MM-DD");t[i]||(t[i]=[]),t[i].push(e)}));var e=[];return Object.keys(t).forEach((function(i){e.push({date:i,items:t[i]})})),Object(b.sortBy)(e,(function(t){return-v()(t.date).valueOf()}))}},activated:function(){this.$router.isBack||(this.isLoading=!1,this.isSearching=!1,this.projId=this.$route.query.projId||this.projectSelected(),this.buildingId=this.$route.query.buildingId,this.start=this.$route.query.start||"",this.end=this.$route.query.end||"",this.dateType=6,this.filterType="all",this.init())},deactivated:function(){this.showPileImg||(this.isSearching=!1,this.$refs["app-search-bar"]&&this.$refs["app-search-bar"].cancelSearch())},methods:{init:(a=Object(n.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getPlaceOptions();case 2:return t.next=4,this.getSelectedPlace();case 4:return t.next=6,this.getCheckItemList();case 6:return t.next=8,this.getIndexFilterPileType();case 8:return t.next=10,this.getPileData();case 10:case"end":return t.stop()}}),t,this)}))),function(){return a.apply(this,arguments)}),dropDown:function(t){var e=this;c.a.show?c.a.closePopup():c.a.openPopup({options:this.placeOptions,selected:this.currentBuilding,stage:2,minSelectStage:2,needFullSelecte:this.needFullSelecte,optionsMap:[{name:"标段"},{key:"children",name:"楼栋"}],emptyText:["无标段","无楼栋"],el:t.target,callback:function(t){console.log({res:t}),e.currentBuilding=t,e.buildingId=e.currentBuilding[1]?e.currentBuilding[1].id:"",e.getPileData(),e.$refs["app-search-bar"]&&e.$refs["app-search-bar"].cancelSearch()}})},getPlaceOptions:function(){var t=this;return f.a.getHasNetwork().then((function(t){if(!t)return s.a.reject({errmsg:"当前无网络连接"})})).then((function(){return Object(g.a)({proj_id:t.projId||""}).then((function(e){t.placeOptions=e,console.log("this.placeOptions",t.placeOptions)}))})).catch((function(t){console.log("error",t)}))},getSelectedPlace:function(){var e=this,i=[];t.each(this.placeOptions,(function(a){t.isEmpty(a.children)||t.each(a.children,(function(t){t.id===e.buildingId&&i.push({id:a.id,name:a.name},{id:t.id,name:t.name})}))})),this.currentBuilding=i},getPileData:function(){var e=this;return this.filterType="all",this.isLoading=!0,this.emptyTips="",this.allPileList=[],this.pileImage="",this.errorType="report",this.currentPileList=[],this.showPileImg=!1,f.a.getHasNetwork().then((function(t){if(!t)return s.a.reject({errmsg:"当前无网络连接"})})).then((function(){return Object(g.f)({building_id:e.buildingId,start_date:e.start,end_date:e.end}).then((function(i){if(t.isEmpty(i))e.emptyTips="没有报表数据";else{e.currentCheckItem.length?(i.list=t.filter(i.list,(function(t){return e.currentCheckItem.includes(t.item_id)})),i.list.length||(e.emptyTips="没有报表数据",i.diagram_file="{}")):(i.list=[],e.emptyTips="没有报表数据",i.diagram_file="{}"),console.log("data.list",i.list);var a=i.list,n=JSON.parse(i.diagram_file),s=[a.length,0,0],o=s[0],r=s[1],c=s[2];t.each(a,(function(t){t.x=JSON.parse(t.pile_data).x,t.y=JSON.parse(t.pile_data).y,t.color="#0bc666",t.style="待验收"===t.status?"not_fill":"","待验收"===t.status?r++:"已验收"===t.status&&c++})),e.tabData[0].number=o,e.tabData[1].number=r,e.tabData[2].number=c;var l=!(!n||!n.url);if(l){var p=e.buildingShowType[e.buildingId];e.showPileImg=void 0===p?l:p}else e.switchShowType(!1);e.allPileList=a,e.currentPileList=a,e.pileImage=n.url}e.isLoading=!1}))})).catch((function(t){e.errorType="error",e.emptyTips=t.errmsg||"获取数据失败",e.isLoading=!1}))},switchShowType:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;this.showPileImg=void 0===t?!this.showPileImg:t,this.$refs["app-search-bar"]&&this.$refs["app-search-bar"].cancelSearch(),this.buildingShowType[this.buildingId]=this.showPileImg,x.a.saveObject(y.a.PILE_ACCEPT_CURRENT_BUILDING_SHOW_TYPE,this.buildingShowType,x.a.level.user)},getIndexFilterPileType:function(){var e=this;return o.a.getUserObject(r.a.REPORT_PILE_ACCEPT_INDEX_FILTER_PILE_TYPE).then((function(i){var a=t.map(e.allCheckItemList,(function(t){return t.id}));console.log({res:i,allList:a}),e.currentCheckItem=i||a}))},getCheckItemList:function(){var e=this;return f.a.getHasNetwork().then((function(t){if(!t)return s.a.reject({errmsg:"当前无网络连接"})})).then((function(){return Object(g.e)().then((function(i){console.log("checkItemList",i),e.checkItemList=i;var a=[];t.each(i,(function(e){t.each(e.subitem,(function(t){a.push(t)}))})),e.allCheckItemList=a}))})).catch((function(t){console.log("error",t)}))},openSearchByCheckItem:function(){var t=this;console.log(this.$refs,this.$refs["pile-accept-condition-filter"]),this.$refs["pile-accept-condition-filter"].open({selectedPileTypes:this.currentCheckItem,dateType:this.dateType,startDate:this.start,endDate:this.end,onConfirm:function(e){t.currentCheckItem=e.currentCheckItem,t.dateType=e.dateType,t.start=e.startDate,t.end=e.endDate,t.getPileData()}})},setIndexFilterPileType:function(t){return o.a.saveUserObject(r.a.REPORT_PILE_ACCEPT_INDEX_FILTER_PILE_TYPE,t)},onSearchTypeChange:function(t){this.isSearching=t},changeTab:function(e,i){this.filterType=e,this.currentPileList=i?t.filter(this.allPileList,(function(t){return t.status===i})):this.allPileList},onDrawingClick:function(t){"point"===t.type&&this.goDetail(t.point)},goDetail:function(t){this.$router.push({name:"ReportPileAcceptDetail",query:{id:t.id}})},drawingPileLayout:function(){this.$refs["drawing-pile"]&&this.$refs["drawing-pile"].refreshLayout()}}}}).call(this,i("391c"))},"22bf":function(t,e,i){var a=i("a6d9");"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);(0,i("85cb").default)("3d042250",a,!0,{sourceMap:!1,shadowMode:!1})},2747:function(t,e,i){var a=i("4356");"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);(0,i("85cb").default)("1df675f1",a,!0,{sourceMap:!1,shadowMode:!1})},2853:function(t,e,i){"use strict";(function(t){i("e697");var a=i("07d2"),n=i("774b"),s=i("fd50"),o=i("6bf2"),r=i.n(o),c=i("1b7e"),l=i("8474"),p=i("3cd7"),d=i("6144"),h=i("c77f");e.a={name:"ReportLeaserMeeting",components:{item:a.default,Scroller:n.default},data:function(){return{isLoading:!0,emptyTips:"",list:[],start:"",end:"",errorType:"report",project:{}}},computed:{projectSelected:function(){return this.$store.state.global.currentReportProject}},activated:function(){if(!this.$router.isBack){this.$route.query.projId?this.project=t.find(this.$store.state.global.allProjects,{id:this.$route.query.projId}):this.project=this.projectSelected;var e=new Date,i=e.getFullYear(),a=e.getMonth()+1,n=e.getDate(),s=d.a.getString("reportDateType",d.a.level.user),o=r()(i+"-"+a+"-"+n,"YYYY-MM-DD").format("E"),c=r()().subtract(o-1,"days").format("YYYY-MM-DD");this.start="week"===s?c:r()().date(1).format("YYYY-MM-DD"),this.end=r()().format("YYYY-MM-DD"),this.getData()}},methods:{dropInfo:function(){p.a.openPopup()},getData:function(){var e=this;return this.isLoading=!0,this.emptyTips="",this.list=[],this.errorType="report",c.a.getHasNetwork().then((function(t){if(!t)return s.a.reject({errmsg:"当前无网络连接"})})).then((function(){return Object(h.g)({start_date:e.start,end_date:e.end,proj_id:e.project.id||""}).then((function(i){e.list=i||[],t.isEmpty(e.list)&&(e.emptyTips="没有报表数据"),t.each(e.list,(function(t){e.$set(t,"isOpen",!0)})),e.isLoading=!1}))})).catch((function(t){e.emptyTips=t.errmsg||"获取数据失败",e.errorType="error",e.isLoading=!1}))},selectDate:function(t){var e=this,i=r()(this.start).toDate(),a=r()(this.end).toDate(),n="start"===t?i:a,s="start"===t?"":i,o="start"===t?a:"";l.a.open({date:n,type:"date",min:s,max:o,onConfirm:function(i){var a=r()(i).format("YYYY-MM-DD");"start"===t?e.start=a:e.end=a,e.getData()}})},toggleItem:function(t){this.$set(t,"isOpen",!t.isOpen)},onClickProject:function(t){this.$router.push({name:"ReportPileAcceptIndex",query:{projId:this.project.id,buildingId:t.building_id,start:this.start,end:this.end}})}}}}).call(this,i("391c"))},"2a23":function(t,e,i){"use strict";i.r(e);var a=i("2853").a,n=(i("dd56"),i("17cc")),s=Object(n.a)(a,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("page-content",{attrs:{title:"报表-桩基验收"}},[i("div",{staticClass:"header-btn",attrs:{slot:"header-bar-right"},on:{click:t.dropInfo},slot:"header-bar-right"},[i("icon",{attrs:{name:"nav-info"}})],1),i("item",{staticClass:"bg-sub-theme border-bottom"},[i("div",{staticClass:"item-label date-filter-label"},[t._v("验收时间")]),i("div",{staticClass:"item-con align-r"},[i("div",{staticClass:"date-filter-item",on:{click:function(e){t.selectDate("start")}}},[t._v(t._s(t.start))]),i("span",{staticClass:"date-filter-split"},[t._v("至")]),i("div",{staticClass:"date-filter-item",on:{click:function(e){t.selectDate("end")}}},[t._v(t._s(t.end))])])]),!t.emptyTips&&t.list.length?i("div",{staticClass:"tree-title"},[i("div",{staticClass:"tree-text pr15"},[t._v("标段/楼栋")]),i("div",{staticClass:"tree-info"},[t._v("验收桩数")]),i("div",{staticClass:"tree-info"},[t._v("总进度")]),i("div",{staticClass:"tree-info"},[t._v("完成率")])]):t._e(),i("scroller",{attrs:{"is-empty":!t.list.length}},[t._l(t.list,(function(e,a){return[i("div",{key:a,staticClass:"tree-item border-top bg-white",on:{click:function(i){t.toggleItem(e)}}},[i("div",{class:{"tree-icon":!0,"icon-dropdown":e.building&&e.building.length&&e.isOpen,"icon-dropright":e.building&&e.building.length&&!e.isOpen}}),i("div",{staticClass:"tree-text color-black pl15 pile-word-break",class:{"pile-new-progress":e.pile_count}},[i("span",[t._v(t._s(e.bidsection_name))])]),i("div",{staticClass:"tree-info"},[t._v(t._s(e.pile_count))]),i("div",{staticClass:"tree-info"},[t._v(t._s(e.pile_total+"/"+e.building_pile_num))]),e.building_pile_num?i("div",{staticClass:"tree-info"},[t._v(t._s((Number(e.pile_total)/Number(e.building_pile_num)*100).toFixed(1)+"%"))]):i("div",{staticClass:"tree-info color-blank"},[t._v("/")])]),e.isOpen?t._l(e.building,(function(e,n){return i("div",{key:a+"-"+n,staticClass:"tree-item tree-item-child border-top",on:{click:function(i){t.onClickProject(e)}}},[i("div",{staticClass:"tree-text pl15 color-gray1 pile-word-break",class:{"pile-new-progress":e.pile_count}},[i("span",[t._v(t._s(e.building_name))])]),i("div",{staticClass:"tree-info"},[t._v(t._s(e.pile_count))]),i("div",{staticClass:"tree-info"},[t._v(t._s(e.pile_total+"/"+e.building_pile_num))]),e.building_pile_num?i("div",{staticClass:"tree-info"},[t._v(t._s((Number(e.pile_total)/Number(e.building_pile_num)*100).toFixed(1)+"%"))]):i("div",{staticClass:"tree-info color-blank"},[t._v("/")])])})):t._e()]})),i("loading-status",{attrs:{"is-loading":t.isLoading,type:t.errorType,"is-empty":!t.isLoading&&!t.list.length,"empty-text":t.emptyTips||"没有报表数据"}})],2)],1)}),[],!1,null,"562728a8",null);e.default=s.exports},"2aa3":function(t,e,i){"use strict";var a=i("6179"),n=i("5a88");t.exports=i("fea3")("Set",(function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}}),{add:function(t){return a.def(n(this,"Set"),t=0===t?0:t,t)}},a)},"2b7d":function(t,e,i){"use strict";i("2747")},"2bcf":function(t,e,i){var a=i("bffa");"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);(0,i("85cb").default)("508dd916",a,!0,{sourceMap:!1,shadowMode:!1})},"2c6f":function(t,e,i){"use strict";i("7ff3")},"2d6e":function(t,e,i){var a=i("7eb2");"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);(0,i("85cb").default)("53a2fbaa",a,!0,{sourceMap:!1,shadowMode:!1})},"2ddf":function(t,e,i){var a=i("b18d");"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);(0,i("85cb").default)("e47df44c",a,!0,{sourceMap:!1,shadowMode:!1})},"302b":function(t,e,i){"use strict";i("8934")},"30e2":function(t,e){t.exports="data:image/png;base64,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"},3411:function(t,e,i){"use strict";i("ef1c")},3882:function(t,e,i){var a=i("120a");"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);(0,i("85cb").default)("686e5f13",a,!0,{sourceMap:!1,shadowMode:!1})},"38a7":function(t,e,i){"use strict";i("16ff")},"39e4":function(t,e,i){(t.exports=i("690e")(!1)).push([t.i,".zjapp .content[data-v-73ce749f]{display:flex;flex-direction:column;justify-content:flex-end;position:fixed;top:0;left:0;width:100%;height:100%;background-color:rgba(0,0,0,.4);overflow:hidden}",""])},"3cd7":function(t,e,i){"use strict";var a=i("329b"),n=i("f137").a,s=(i("f996"),i("17cc")),o=Object(s.a)(n,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.show?i("div",{staticClass:"main",style:{top:t.contentTop+"px"}},[i("i",{staticClass:"arrow"}),i("div",{staticClass:"content",on:{click:function(e){return e.target!==e.currentTarget?null:t.closePopup(e)}}},[i("transition",{attrs:{name:"slide-down"},on:{enter:function(e){t.isOpening=!0},"after-enter":function(e){t.isOpening=!1},leave:function(e){t.isClosing=!0},"after-leave":t.afterClose}},[t.showList?i("div",{staticClass:"box",style:{height:t.listHeight+"px"}},[i("ul",{staticClass:"pile-content"},[i("li",{staticClass:"border-bottom"},[i("div",{staticClass:"pile-title"},[t._v("1.验收桩数")]),i("div",{staticClass:"pile-legend"},[t._v("所选时间段内验收的桩基数 (含验收状态为部分验收的桩);")])]),i("li",{staticClass:"border-bottom"},[i("div",{staticClass:"pile-title"},[t._v("2.总进度")]),i("div",{staticClass:"pile-legend"},[t._v("累计已验的桩数/总桩数，总进度与所筛选的时间段无关，总桩数可在后台预设;")])]),i("li",{staticClass:"border-bottom"},[i("div",{staticClass:"pile-title"},[t._v("3.完成率")]),i("div",{staticClass:"pile-legend"},[t._v("总进度*100%;")])])])]):t._e()])],1)]):t._e()}),[],!1,null,"7a2f6f17",null).exports,r=!1;r||(r=new(a.default.extend(o))({el:document.createElement("div")}),document.body.appendChild(r.$el));e.a=r},4356:function(t,e,i){(t.exports=i("690e")(!1)).push([t.i,".zjapp .process-accept-detail-header{background-color:#fff;padding:10px 15px}.zjapp .process-accept-detail-header .process-accept-detail-title{font-size:18px;color:#111;margin-top:10px;margin-bottom:10px}.zjapp .process-accept-detail-header .process-accept-detail-content{height:auto;line-height:20px;font-size:16px;color:#8c8c8c}.zjapp .process-accept-detail-list{position:relative;padding-top:1px;padding-bottom:1px;padding-left:0}.zjapp .process-accept-detail-list .process-accept-detail-item-header{position:relative;align-items:center}.zjapp .content-bottom-btn-con{text-align:center}.zjapp .process-accept-icon-sys{position:absolute;left:0;width:4px;height:16px;background-color:#4275e8}.zjapp .required-icon{color:#ff3d3d}.zjapp .process-accept-entrys-viewer{font-size:16px;padding:15px}.zjapp .no-entry-text{font-size:16px;color:#999}.zjapp .process-accept-point-content{font-size:16px;background-color:#f0f0f0;padding:10px;color:#666;border-radius:3px;word-break:break-all}",""])},"436b":function(t,e,i){"use strict";i.r(e);var a=i("5149").a,n=(i("dc50"),i("2b7d"),i("17cc")),s=Object(n.a)(a,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("page-content",{attrs:{title:"桩基验收","show-go-root":"Report"}},[i("check-guide",{attrs:{slot:"header-bar-right","item-id":t.pileData.item_id||""},slot:"header-bar-right"}),t.isLoading||t.isEmpty?t._e():i("scroller",{staticClass:"footer-blank"},[i("div",{staticClass:"list process-accept-detail-header"},[i("h4",{staticClass:"process-accept-detail-title f18 color-black"},[t._v(t._s(t.pileData.bidsection_name)+"("+t._s(t.pileData.proj_name)+")")]),i("p",{staticClass:"process-accept-detail-content"},[t._v("楼栋："+t._s(t.pileData.building_name))]),i("p",{staticClass:"process-accept-detail-content"},[t._v("类型："+t._s(t.pileData.item_name))]),i("p",{staticClass:"process-accept-detail-content"},[t._v("桩号："+t._s(t.pileData.pile_address))])]),[i("div",{staticClass:"list bg-white process-accept-detail-list"},t._l(t.pileData.detail,(function(e,a){return i("div",{key:a},[i("div",{staticClass:"item-base border-none process-accept-detail-item-header"},[i("i",{staticClass:"process-accept-icon-sys"}),parseInt(e.is_fill)?i("i",{staticClass:"required-icon"},[t._v("*")]):t._e(),i("div",{staticClass:"item-text"},[t._v(t._s(e.title))])]),i("div",{staticClass:"process-accept-entrys-viewer"},[e.enter_type===t.CHECKPOINT_ENTER_TYPE.IMAGE?i("item-img-list",{attrs:{editabled:!1,group:"process-accept-view"},model:{value:e.image_file,callback:function(i){t.$set(e,"image_file",i)},expression:"point.image_file"}}):i("div",[t._v("\n              "+t._s(e.enter_content)+"\n            ")]),e.enter_type===t.CHECKPOINT_ENTER_TYPE.IMAGE&&(!e.image_file||0===e.image_file.length)||e.enter_type!==t.CHECKPOINT_ENTER_TYPE.IMAGE&&!e.enter_content?i("div",{staticClass:"no-entry-text"},[t._v("\n              未录入\n            ")]):t._e()],1),e.content?i("div",{staticClass:"pl15 pr15 pb10"},[i("div",{staticClass:"process-accept-point-content"},[t._v("\n              "+t._s(e.content)+"\n            ")])]):t._e()])})))],i("div",{staticClass:"list bg-white"},t._l(t.pileData.acceptor,(function(e,a){return i("div",{key:a,staticClass:"process-accept-user-list"},[0===a?i("user-select",{attrs:{title:"验收人",date:t._f("formatDate")(e.accept_date),mode:"view",editabled:!1},model:{value:t.pileData.acceptor[a],callback:function(e){t.$set(t.pileData.acceptor,a,e)},expression:"pileData.acceptor[index]"}}):t._e(),0!==a?i("user-select",{attrs:{title:"",date:t._f("formatDate")(e.accept_date),mode:"view",editabled:!1},model:{value:t.pileData.acceptor[a],callback:function(e){t.$set(t.pileData.acceptor,a,e)},expression:"pileData.acceptor[index]"}}):t._e()],1)}))),i("user-select",{attrs:{title:"共同验收人",multi:!0,mode:"view",editabled:!1,required:!1},model:{value:t.pileData.accept_together,callback:function(e){t.$set(t.pileData,"accept_together",e)},expression:"pileData.accept_together"}}),i("user-select",{attrs:{title:"抄送人",multi:!0,mode:"view",editabled:!1,required:!1},model:{value:t.pileData.cc,callback:function(e){t.$set(t.pileData,"cc",e)},expression:"pileData.cc"}})],2),i("loading-status",{attrs:{"is-loading":t.isLoading,"is-empty":!t.isLoading&&t.isEmpty,type:t.errorType,"empty-text":t.emptyTips||"没有报表数据"}})],1)}),[],!1,null,"a87b83a2",null);e.default=s.exports},4611:function(t,e,i){"use strict";i("0c16")},"47df":function(t,e,i){var a=i("cc4c");"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);(0,i("85cb").default)("1ffcc628",a,!0,{sourceMap:!1,shadowMode:!1})},"48de":function(t,e,i){"use strict";(function(t){i("ed63"),i("8cf2");var a=i("07d2"),n=i("6144");e.a={components:{Item:a.default},props:{placeholder:{type:String,default:"搜索"},simpleMode:{type:Boolean},historyKey:{type:String,default:"pile-search-history-key"},pileList:{type:Array,default:function(){return[]}}},data:function(){return{isSeaching:!1,value:"",searchHistory:[],searchPileList:[]}},mounted:function(){this.searchHistory=n.a.getObject(this.historyKey)||[]},methods:{onFocus:function(){this.isSeaching=!0,this.$emit("changeSearchStatus",this.isSeaching)},cancelSearch:function(){this.clearValue(),this.isSeaching=!1,this.$emit("changeSearchStatus",this.isSeaching)},clearValue:function(){this.value=""},onInput:function(){var e=this,i=this.$refs["app-search-bar-input"].value;console.log({value:i}),this.value=i,this.searchPileList=t.filter(this.pileList,(function(t){return t.pile_address&&t.pile_address.includes(i)})),setTimeout((function(){e.saveHistory()}),500)},selectHistory:function(e){this.value=e.val,this.searchPileList=t.filter(this.pileList,(function(t){return t.pile_address&&t.pile_address.includes(e.val)}))},hasHistory:function(e){return t.some(this.searchHistory,(function(t){return t.val===e}))},saveHistory:function(){this.value&&!this.hasHistory(this.value)&&(this.searchHistory.unshift({val:this.value}),n.a.saveObject(this.historyKey,this.searchHistory))},deleteHistory:function(t){$log.log("with-history 删除单个搜索历史，key:",this.historyKey);var e=this.searchHistory.indexOf(t);this.searchHistory.splice(e,1),n.a.saveObject(this.historyKey,this.searchHistory)},deleteHistoryAll:function(){$log.log("with-history 删除所有搜索历史，key:",this.historyKey),this.searchHistory=[],n.a.saveObject(this.historyKey,[])},selectPlace:function(t){this.$emit("selectPlace",t),this.clearValue(),this.isSeaching=!1,this.$emit("changeSearchStatus",this.isSeaching)}}}}).call(this,i("391c"))},"4a35":function(t,e,i){(t.exports=i("690e")(!1)).push([t.i,".zjapp .layout-main[data-v-145a7a3f]{height:calc(100% - 50px)}.zjapp .layout-main.iOS-bezel-less[data-v-145a7a3f]{height:calc(100% - 60px)}[data-v-145a7a3f] .layout-content{background:#fff;overflow:auto}[data-v-145a7a3f] .layout-content .filter-wrap{margin:0 0 10px 0;padding:15px 15px 0}[data-v-145a7a3f] .layout-content .filter-wrap .title{font-size:14px;font-weight:400;color:#999;line-height:20px;margin:0 0 14px}[data-v-145a7a3f] .layout-content .filter-wrap .title .select-button{float:right;color:#4275e8}[data-v-145a7a3f] .layout-content .filter-wrap .button-box{display:flex;flex-flow:wrap}[data-v-145a7a3f] .layout-content .filter-wrap .button-box.date-box{justify-content:space-between}[data-v-145a7a3f] .layout-content .filter-wrap .button-box .section{height:28px;line-height:28px;padding:0 12px;border-radius:100px;border:1px solid #dcdcdc;font-size:14px;font-weight:400;color:#666;margin:0 10px 10px 0;max-width:300px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}[data-v-145a7a3f] .layout-content .filter-wrap .button-box .section.active{background:#4275e8;border-color:#4275e8;color:#fff}[data-v-145a7a3f] .layout-content .filter-wrap .button-box .date{flex:0 0 30%;height:26px;line-height:26px;text-align:center;border-radius:100px;margin:0 5px 10px 0;color:#666;border:1px solid #dcdcdc}[data-v-145a7a3f] .layout-content .filter-wrap .button-box .date.active{background:#4275e8;color:#fff;border-color:#4275e8}[data-v-145a7a3f] .layout-content .filter-wrap .button-box .process{background:#ededed;border:none}[data-v-145a7a3f] .layout-content .filter-wrap .button-box .process .van-icon{font-size:12px}.zjapp .popup-toolbar[data-v-145a7a3f]{position:-webkit-sticky;position:sticky;width:100%;top:0;z-index:100;height:46px;line-height:46px}.zjapp .popup-toolbar div[data-v-145a7a3f]{position:absolute}.zjapp .popup-toolbar .popup-cancel[data-v-145a7a3f]{left:15px;font-size:14px;color:#999}.zjapp .popup-toolbar .popup-title[data-v-145a7a3f]{left:50%;transform:translateX(-50%);-webkit-transform:translateX(-50%);font-size:16px;color:#333}.zjapp .popup-toolbar .popup-confirm[data-v-145a7a3f]{right:10px;font-size:14px;color:#4275e8}.zjapp .tabs-date[data-v-145a7a3f]{display:flex;flex-direction:row;justify-content:center;position:-webkit-sticky;position:sticky;top:46px;z-index:100;padding:6px 0}.zjapp .tabs-date div[data-v-145a7a3f]{height:32px;line-height:32px;text-align:center}.zjapp .tabs-date div[data-v-145a7a3f]:first-child,.zjapp .tabs-date div[data-v-145a7a3f]:last-child{width:160px;color:#666;font-size:14px;border:1px solid #ececec;border-radius:16px}.zjapp .tabs-date div[data-v-145a7a3f]:nth-child(2){padding:0 7px}.zjapp .tabs-date .filter-date-current[data-v-145a7a3f]{border:1px solid #4275e8!important}.zjapp .pile-type-select-item[data-v-145a7a3f]{display:flex;flex-direction:row;padding:0 15px}.zjapp .pile-type-select-item .label[data-v-145a7a3f]{height:46px;line-height:46px;font-size:14px;color:#999}.zjapp .pile-type-select-item .select-content[data-v-145a7a3f]{font-size:14px;flex:1;text-align:right;height:46px;line-height:46px}.zjapp .pile-type-select-item .select-content .selected-pile-text[data-v-145a7a3f]{margin-right:6px;color:#c8c8c8}.zjapp .pile-type-select-item .select-content .selected-pile-text.active[data-v-145a7a3f]{color:#666}.zjapp .pile-type-select-item .select-content .arrow-right[data-v-145a7a3f]{margin-top:3px;color:#c8c8c8}",""])},5149:function(t,e,i){"use strict";(function(t){i("6a61");var a,n=i("2e91"),s=i("fd50"),o=i("3bd5"),r=i("1b7e"),c=i("774b"),l=i("07d2"),p=i("e68e"),d=i("cd05"),h=i("f369"),u=i("c77f"),f=i("b9cd");e.a={components:{Scroller:c.default,Item:l.default,ItemImgList:p.a,UserSelect:d.a,CheckGuide:h.a},data:function(){return{CHECKPOINT_ENTER_TYPE:f.b,isLoading:!0,curUser:o.a.getUser(),pileData:{},isView:!1,pileAcceptId:"",emptyTips:"",isEmpty:!1,errorType:"report"}},computed:{},activated:function(){var t=this.$route.query.id;this.pileAcceptId=t,this.init(status)},methods:{init:(a=Object(n.a)(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getPileData();case 2:case"end":return t.stop()}}),t,this)}))),function(t){return a.apply(this,arguments)}),getPileData:function(){var e=this;return this.isLoading=!0,this.emptyTips="",this.pileData={},this.errorType="report",r.a.getHasNetwork().then((function(t){if(!t)return s.a.reject({errmsg:"当前无网络连接"})})).then((function(){return Object(u.d)({id:e.pileAcceptId}).then((function(i){i.detail&&t.each(i.detail,(function(e){e.image_file=t.filter(JSON.parse(e.image_file),(function(t){return t.id}))})),e.pileData=i||{},t.isEmpty(e.pileData)?(e.emptyTips="没有报表数据",e.isEmpty=!0):e.isEmpty=!1,e.isLoading=!1}))})).catch((function(t){e.errorType="error",e.emptyTips=t.errmsg||"获取数据失败",e.isEmpty=!0,e.isLoading=!1}))}}}}).call(this,i("391c"))},"515e":function(t,e,i){"use strict";var a=i("329b"),n=i("f1e4").a,s=(i("302b"),i("17cc")),o=Object(s.a)(n,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("transition",{attrs:{name:"slide-right"}},[t.show?i("page-content",{class:{"content-not-empty":t.content.length},attrs:{mode:"dialog",title:"检查指引","on-close":t.closePopup}},[!t.isLoading&&t.title?i("div",{staticClass:"check-guide-detail-hd border-bottom"},[i("h2",{staticClass:"check-guide-detail-title pb10"},[t._v(t._s(t.title))])]):t._e(),!t.isLoading&&t.content.length?i("div",{staticClass:"check-guide-detail-content"},t._l(t.content,(function(e,a){return i("span",{key:a},[e.isImg&&e.src?i("p",[i("img",{class:{"img-not-ready":!e.ready,error:"rejected"===e.status},attrs:{src:t.getThumbnail(e)},on:{error:function(i){t.imgError(e,a)},click:function(i){t.imgClick(e)}}})]):t._e(),e.isHref&&e.url?i("span",{staticClass:"href-text",on:{click:function(i){t.openHref(e.url)}}},[t._v("\n          "+t._s(e.val)+"\n        ")]):i("span",[t._v("\n          "+t._s(e.val)+"\n        ")]),e.joinBrToSplitLine?i("br"):t._e()])}))):t._e(),i("loading-status",{attrs:{"is-loading":t.isLoading,"is-empty":!t.content.length,"empty-text":"PC端未设置检查指引"}})],1):t._e()],1)}),[],!1,null,"092cce02",null).exports,r=!1;r||(r=new(a.default.extend(o))({el:document.createElement("div")}),document.body.appendChild(r.$el));e.a=r},"5ede":function(t,e,i){var a=i("bd09");"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);(0,i("85cb").default)("cbd1d3d6",a,!0,{sourceMap:!1,shadowMode:!1})},6481:function(t,e,i){(t.exports=i("690e")(!1)).push([t.i,".zjapp .content-not-empty[data-v-092cce02] .layout-content{display:auto;overflow:auto;padding-bottom:100px}.zjapp .check-guide-detail-hd[data-v-092cce02]{margin-left:30px;padding:25px 30px 5px 0}.zjapp .check-guide-detail-title[data-v-092cce02]{margin:0;line-height:20px;font-size:18px;color:#111;font-weight:700;word-break:break-all}.zjapp .check-guide-detail-info[data-v-092cce02]{line-height:20px;font-size:14px;color:#8c8c8c}.zjapp .check-guide-detail-content[data-v-092cce02]{padding:30px;line-height:30px;color:#333;font-size:16px}.zjapp .check-guide-detail-content p[data-v-092cce02]{margin-bottom:30px;min-height:1em}.zjapp .check-guide-detail-content img[data-v-092cce02]{max-width:100%}.zjapp .check-guide-detail-content .img-not-ready[data-v-092cce02]{width:80px;height:auto}.zjapp .check-guide-detail-content .href-text[data-v-092cce02]{text-decoration:underline;color:#4275e8}.zjapp .error[data-v-092cce02]{max-width:50%}",""])},"65e9":function(t,e,i){"use strict";(function(t){i("5ab2"),i("6d57"),i("e10e");var a=i("28f8"),n=i("4360"),s=i("48f4"),o=i("162a"),r=i("f2d3"),c=i("6906"),l=i("a18c"),p=i("c745");function d(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,a)}return i}function h(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?d(Object(i),!0).forEach((function(e){Object(a.a)(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):d(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}e.a={name:"SynchronizeTipBar",props:{isTodo:{type:Boolean},useDownload:{type:Boolean,default:!0},enterDoCheck:{type:Boolean,default:!0},buildingId:{type:String,default:""},automaticUpdateCallback:{type:Function,default:null}},data:function(){return{currentModuleCode:"",oneUpdateData:!0}},computed:{projId:function(){return n.a.state.global.currentProject.id},waitUploadNum:function(){return n.a.state.global.waitUploadNum},hasTopProgress:function(){return n.a.state.global.hasTopProgress},hasChanged:function(){if(!this.useDownload)return!1;if(this.currentModuleCode){var t,e=s.default.isModuleNeedBuilding(this.currentModuleCode)&&!this.isTodo;return!(e&&!this.buildingId)&&(t=this.isTodo?n.a.state.global.todoChangedStatus||{}:n.a.state.global.businessChangedStatus||{},e?!!t[this.currentModuleCode]&&t[this.currentModuleCode][this.buildingId]:t[this.currentModuleCode])}return!1},show:function(){return(this.hasChanged||this.waitUploadNum)&&!this.hasTopProgress},oneDataSync:function(){return this.$store.state.app.oneDataSync}},watch:{hasChanged:function(t){var e=this;t&&this.$nextTick((function(){setTimeout((function(){var t=e.$refs["synchronize-tip-bar"];if(t&&t.style){t.style.display="none";t.offsetHeight;t.style.display="block"}}),100)}))},buildingId:function(t){this.currentModuleCode&&s.default.isModuleNeedBuilding(this.currentModuleCode)&&t&&(console.log("楼栋重新加载，是否再次自动加载数据：",this.oneUpdateData),this.oneUpdateData&&this.automaticLogic(),this.checkSync())},show:function(t){t?this.$emit("show"):this.$emit("hide")}},activated:function(){this.init()},methods:{init:function(){this.getCurrentModuleCode(),this.enterDoCheck&&!l.a.isBack&&this.checkSync(),this.automaticLogic()},automaticLogic:function(){var t=this;this.$router.isBack||(this.oneUpdateData=!0,p.a.getAutomaticLoadData().then((function(e){$log.log("是否要自动加载 ===> ",e&&t.oneDataSync&&"function"==typeof t.automaticUpdateCallback),e&&t.oneDataSync&&"function"==typeof t.automaticUpdateCallback&&t.dataSync().then((function(e){console.log("是否需要初始化页面 ====> ",Boolean(e)),e&&t.automaticUpdateCallback()}))})))},getCurrentModuleCode:function(){var t=s.default.getCurrentModuleCode(),e=this.isTodo?"todo":"";this.currentModuleCode=t||e},checkSync:function(){var e=this,i="checkDataUpdate",a=this.currentModuleCode,o=this.buildingId,l=n.a.state.global.isLeader?this.projId:"";return!s.default.isModuleNeedBuilding(a)||o||this.isTodo?(this.isTodo&&(i+="_todo"),a&&(i+="_".concat(a)),o&&(i+="_".concat(o)),c.a.execAfterInterval(120,i).then((function(){return e.isTodo?"todo"===a?r.a.getModuleList().then((function(e){var i=t.map(e,"code");return s.default.hasTodoChangedData("",i)})):s.default.hasTodoChangedData("",[a]):s.default.hasBusinessChangedData(l,[a],o)})).then((function(t){if(e.isTodo){var i=h({},n.a.state.global.todoChangedStatus);i[a]=t,n.a.commit("global/SET_TODO_CHANGED_STATUS",i)}else{var s=h({},n.a.state.global.businessChangedStatus);if(o){var r=s[a]?s[a]:{};r[o]=t,s[a]=r}else s[a]=t;n.a.commit("global/SET_BUSINESS_CHANGED_STATUS",s)}})).catch((function(t){return t&&!0===t.timeNotTo?($log.debug(t.msg),!1):$q.reject(t)}))):Promise.resolve()},dataSync:function(){var t=this.currentModuleCode,e=this.buildingId,i=s.default.isModuleNeedBuilding(t),a=i&&!e;return $log.log(["模块名：",t," 楼栋id：",e," 当前模块是否需要楼栋id：",i," 判断是否终止自动更新：",a]),a?Promise.resolve():(this.oneUpdateData=!1,o.a.beginManualUpdate(),s.default.checkSync(e).then((function(t){return o.a.endManualUpdate(),t})).catch((function(t){$log.error("自动更新错误",t),o.a.endManualUpdate()})))}}}}).call(this,i("391c"))},"6dba":function(t,e){t.exports="data:image/png;base64,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"},"7eb2":function(t,e,i){(t.exports=i("690e")(!1)).push([t.i,".zjapp .synchronize-tip-bar[data-v-66826030]{height:30px;padding:5px 15px;line-height:20px;text-align:center;background-color:#ffe6e6;color:#ff6060;font-size:14px}.zjapp .synchronize-tip-bar .icon-caution[data-v-66826030]{line-height:20px;margin-right:5px}@media screen and (-webkit-min-device-pixel-ratio:1){.zjapp .synchronize-tip-bar[data-v-66826030]{border:none;background-image:linear-gradient(0deg,#ffd3d3,#ffd3d3 100%,transparent 0);background-size:100% 1px;background-repeat:no-repeat;background-position:bottom}}@media screen and (-webkit-min-device-pixel-ratio:1.5){.zjapp .synchronize-tip-bar[data-v-66826030]{border:none;background-image:linear-gradient(0deg,#ffd3d3,#ffd3d3 66.6667%,transparent 0);background-size:100% 1px;background-repeat:no-repeat;background-position:bottom}}@media screen and (-webkit-min-device-pixel-ratio:2){.zjapp .synchronize-tip-bar[data-v-66826030]{border:none;background-image:linear-gradient(0deg,#ffd3d3,#ffd3d3 50%,transparent 0);background-size:100% 1px;background-repeat:no-repeat;background-position:bottom}}@media screen and (-webkit-min-device-pixel-ratio:2.625){.zjapp .synchronize-tip-bar[data-v-66826030]{border:none;background-image:linear-gradient(0deg,#ffd3d3,#ffd3d3 38.0952%,transparent 0);background-size:100% 1px;background-repeat:no-repeat;background-position:bottom}}@media screen and (-webkit-min-device-pixel-ratio:3){.zjapp .synchronize-tip-bar[data-v-66826030]{border:none;background-image:linear-gradient(0deg,#ffd3d3,#ffd3d3 33.3333%,transparent 0);background-size:100% 1px;background-repeat:no-repeat;background-position:bottom}}@media screen and (-webkit-min-device-pixel-ratio:4){.zjapp .synchronize-tip-bar[data-v-66826030]{border:none;background-image:linear-gradient(0deg,#ffd3d3,#ffd3d3 25%,transparent 0);background-size:100% 1px;background-repeat:no-repeat;background-position:bottom}}",""])},"7ff3":function(t,e,i){var a=i("4a35");"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);(0,i("85cb").default)("b9292df0",a,!0,{sourceMap:!1,shadowMode:!1})},"81f2":function(t,e,i){(t.exports=i("690e")(!1)).push([t.i,'.zjapp .main[data-v-2cac8864]{position:fixed;width:100%;bottom:0}.zjapp .arrow[data-v-2cac8864]{position:absolute;top:-7px;right:18px;width:0;height:0;border-bottom:7px solid #fff;border-right:7px solid transparent;border-left:7px solid transparent}.zjapp .content[data-v-2cac8864]{position:absolute;top:0;left:0;width:100%;height:100%;background-color:rgba(0,0,0,.4);overflow:hidden}.zjapp .box[data-v-2cac8864]{display:flex;flex-direction:column;background-color:#fff;overflow:auto}.zjapp .box-single[data-v-2cac8864]{display:flex;flex-direction:column;flex:1}.zjapp .detail-hd[data-v-2cac8864]{display:flex;padding:6px 15px}.zjapp .detail-arrow-right[data-v-2cac8864]{width:13px;height:34px;overflow:hidden}.zjapp .detail-arrow-right[data-v-2cac8864]:before{display:block;content:"";width:0;height:0;margin-top:12px;border:5px solid transparent;border-left:5px solid #c8c8c8}.zjapp .detail-arrow-down[data-v-2cac8864]{width:13px;height:34px;overflow:hidden}.zjapp .detail-arrow-down[data-v-2cac8864]:before{display:block;content:"";width:0;height:0;margin-top:15px;border:5px solid transparent;border-top:5px solid #c8c8c8}.zjapp .detail-title[data-v-2cac8864]{flex:1;line-height:34px;color:#111;font-size:16px}.zjapp .detail-bd[data-v-2cac8864]{padding:8px 15px 8px 35px;background-color:#fafafa}.zjapp .text-line[data-v-2cac8864]{font-size:14px;color:#666;line-height:30px;margin-bottom:30px}.zjapp .detail-hd-single[data-v-2cac8864]{padding:6px 0;margin:0 15px}.zjapp .detail-bd-single[data-v-2cac8864]{display:flex;flex-direction:column;flex:1;padding:8px 15px;background-color:#fff}',""])},8474:function(t,e,i){"use strict";var a=i("329b"),n=(i("ed6c"),i("591c")),s=i("e89f"),o=i("4360"),r={name:"DateSelectDialog",components:{DatetimePicker:n.a},mixins:[s.a],store:o.a,data:function(){return{show:!1,showCon:!1,date:"",type:"",min:"",max:"",confirmFn:function(){}}},watch:{show:function(t){var e=this;t&&this.$nextTick((function(){e.showCon=!0}))}},methods:{open:function(t){this.date=t.date,this.type=t.type||"datetime",this.min=t.min||void 0,this.max=t.max||void 0,this.confirmFn=t.onConfirm,this.show=!0},close:function(){this.showCon=!1},afterClose:function(){this.show=!1},onConfirm:function(t){this.confirmFn&&this.confirmFn(t),this.close()},onCancel:function(t){this.close()}}},c=(i("38a7"),i("17cc")),l=Object(c.a)(r,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.show?i("div",{staticClass:"content",on:{click:function(e){return e.target!==e.currentTarget?null:t.close(e)}}},[i("transition",{attrs:{name:"slide-up"},on:{"after-leave":t.afterClose}},[t.showCon?i("van-datetime-picker",{attrs:{type:t.type,"min-date":t.min,"max-date":t.max},on:{confirm:t.onConfirm,cancel:t.onCancel},model:{value:t.date,callback:function(e){t.date=e},expression:"date"}}):t._e()],1)],1):t._e()}),[],!1,null,"73ce749f",null).exports,p=!1;p||(p=new(a.default.extend(l))({el:document.createElement("div")}),document.body.appendChild(p.$el));e.a=p},8934:function(t,e,i){var a=i("6481");"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);(0,i("85cb").default)("266da06d",a,!0,{sourceMap:!1,shadowMode:!1})},"8aaa":function(t,e,i){var a=i("b877");"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);(0,i("85cb").default)("56085726",a,!0,{sourceMap:!1,shadowMode:!1})},"91c1":function(t,e,i){"use strict";(function(t){i("5ab2"),i("6d57"),i("e10e"),i("9a33");var a=i("28f8"),n=i("e68e"),s=i("6f9e"),o=i("bcc7"),r=i("e89f");function c(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,a)}return i}function l(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?c(Object(i),!0).forEach((function(e){Object(a.a)(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):c(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}e.a={name:"CheckGuideDetailDrop",components:{ItemImgList:n.a},mixins:[r.a],data:function(){return{show:!1,showList:!1,isLoading:!1,isOpening:!1,isClosing:!1,contentTop:64,listHeight:510,module:"",itemIds:[],data:[],target:""}},watch:{show:function(t){var e=this;t&&this.$nextTick((function(){e.showList=!0}))}},created:function(){s.a.$on("routerBeforeEach",this.closePopup),s.a.$on("pageContentClick",this.onClickOther)},destroyed:function(){s.a.$off("routerBeforeEach",this.closePopup),s.a.$off("pageContentClick",this.onClickOther)},methods:{openPopup:function(e){this.show=!0,this.$emit("open"),this.module=e.module,this.itemIds=e.itemIds,this.options=e.options;var i=document.querySelector(".layout-main .layout-header");if(this.contentTop=i.offsetHeight,e.el){var a=e.el.getBoundingClientRect();this.contentTop=a.bottom}this.target=e.el,this.listHeight=t.minBy([window.innerHeight-this.contentTop-50,510]),this.getData()},closePopup:function(){var t=this;if(!this.isOpening)return this.showList=!1,this.$emit("close"),new Promise((function(e){t.$on("afterClosePopup",e)}))},afterClose:function(){this.show=!1,this.isClosing=!1,this.$emit("afterClosePopup")},onClickOther:function(t){t&&t.target&&t.target!==this.target&&this.show&&this.closePopup()},getData:function(){var e=this;return this.options&&this.options.length?(this.data=t.map(this.options,(function(t){return l(l({},t),{},{isOpen:!1})})),Promise.resolve()):o.a.getMeasureCheckItem(this.itemIds).then((function(i){e.data=t.map(i,(function(e){var i=e.content?e.content.trim():"",a=i?i.split("\n"):[],n=e.content_image?JSON.parse(e.content_image):[],s=t.filter(a,(function(t){return!/<img([\s\S]*)>/gm.test(t)}));return t.each(n,(function(t){t.url=t.url.split("@")[0]})),{id:e.id,name:e.full_name,textArr:s,contentImage:n,isOpen:!1}}))})).catch((function(t){console.error(t)}))},toggleItem:function(t){this.data.length>1&&this.$set(t,"isOpen",!t.isOpen)}}}}).call(this,i("391c"))},9251:function(t,e,i){var a=i("fb68"),n=i("f71f").onFreeze;i("f0cc")("freeze",(function(t){return function(e){return t&&a(e)?t(n(e)):e}}))},a6d9:function(t,e,i){var a=i("5454");(t.exports=i("690e")(!1)).push([t.i,".zjapp .project-select[data-v-562728a8]{text-align:center;line-height:44px;padding:0 88px}.zjapp .project-select .text[data-v-562728a8]{pointer-events:none}.zjapp .project-select-con[data-v-562728a8]{display:inline-block;position:relative;padding-right:23px;max-width:100%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;pointer-events:none;vertical-align:top}.zjapp .project-select-con .arrow[data-v-562728a8]{position:absolute;top:13px;right:0;width:18px;height:18px;background:url("+a(i("7fb27"))+') no-repeat;background-size:100% 100%;transition:transform .2s}.zjapp .project-select-con .arrow.active[data-v-562728a8]{transform:rotate(180deg)}.zjapp .date-filter-label[data-v-562728a8]{width:100px}.zjapp .date-filter-item[data-v-562728a8]{height:30px;padding:4px 9px;border:1px solid #d7e0f7;border-radius:15px;background-color:#fff}.zjapp .date-filter-item[data-v-562728a8],.zjapp .date-filter-split[data-v-562728a8]{display:inline-block;vertical-align:top;line-height:20px;font-size:14px;color:#666}.zjapp .date-filter-split[data-v-562728a8]{padding:5px}.zjapp .tree-title[data-v-562728a8]{padding:0 15px;display:flex;color:#888;background-color:#fafafa}.zjapp .tree-item[data-v-562728a8]{position:relative;display:flex;align-items:center;padding:8px 15px}.zjapp .tree-item-child[data-v-562728a8]{background-color:#fafafa}.zjapp .tree-text[data-v-562728a8]{flex:2;padding:5px 0;line-height:20px;font-size:14px}.zjapp .tree-info[data-v-562728a8]{flex:1;padding:5px;line-height:20px;text-align:center;font-size:14px}.zjapp .tree-icon[data-v-562728a8]{position:absolute;width:15px;height:30px}.zjapp .icon-dropdown[data-v-562728a8]{top:20px;left:13px}.zjapp .icon-dropright[data-v-562728a8]{top:16px;left:15px}.zjapp .icon-dropdown[data-v-562728a8]:before,.zjapp .icon-dropright[data-v-562728a8]:before{display:block;content:"";width:0;height:0;border:6px solid #c8c8c8}.zjapp .icon-dropdown[data-v-562728a8]:before{border-left-color:transparent}.zjapp .icon-dropdown[data-v-562728a8]:before,.zjapp .icon-dropright[data-v-562728a8]:before{border-right-color:transparent;border-bottom-color:transparent}.zjapp .icon-dropright[data-v-562728a8]:before{border-top-color:transparent}.zjapp .color-blank[data-v-562728a8]{color:#c8c8c8}.zjapp .pile-word-break[data-v-562728a8]{position:relative}.zjapp .pile-word-break span[data-v-562728a8]{word-break:break-all;overflow:hidden;text-overflow:ellipsis;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical}.zjapp .pile-new-progress[data-v-562728a8]:before{content:"";display:inline-block;background:#ff3d3d;height:6px;width:6px;border-radius:50%;position:absolute;margin-top:7px}.zjapp .pile-new-progress span[data-v-562728a8]{margin-left:11px}',""])},ab6c:function(t,e,i){var a=i("5454");(t.exports=i("690e")(!1)).push([t.i,".zjapp .building-select[data-v-4948f96e]{text-align:center;padding:0 10px;line-height:44px}.zjapp .building-select .text[data-v-4948f96e]{pointer-events:none}.zjapp .building-select-con[data-v-4948f96e]{display:inline-block;position:relative;padding-right:23px;max-width:calc(100% - 220px);overflow:hidden;pointer-events:none;text-overflow:ellipsis;white-space:nowrap;vertical-align:top}.zjapp .building-select-con .arrow[data-v-4948f96e]{position:absolute;top:13px;right:0;width:18px;height:18px;background:url("+a(i("6dba"))+') no-repeat;background-size:100% 100%;transition:transform .2s}.zjapp .building-select-con .arrow.active[data-v-4948f96e]{transform:rotate(180deg)}.zjapp .filter-tabs[data-v-4948f96e]{display:flex}.zjapp .filter-tab[data-v-4948f96e]{flex:1;min-height:44px;line-height:16px;padding:10px 5px 0;text-align:center;font-size:12px;color:#999;background-color:#fafafa;border-right:1px solid #ececec;border-bottom:1px solid #ececec}.zjapp .filter-tab .status[data-v-4948f96e]{display:inline-block;width:8px;height:8px;margin:0 0 1px 0;border-radius:50%;border:1px solid #dcdcdc;background-color:#fff}.zjapp .filter-tab .status.save[data-v-4948f96e]{border-color:#ff8e24;background-color:#ff8e24}.zjapp .filter-tab .status.alreadyAccept[data-v-4948f96e]{border-color:#0bc666;background-color:#0bc666}.zjapp .filter-tab .status.partAccept[data-v-4948f96e]{border-color:#0bc666;background-color:#fff}.zjapp .filter-tab[data-v-4948f96e]:last-child{border-right:none}.zjapp .filter-tab.current[data-v-4948f96e]{border-bottom:none;background-color:#fff;color:#666}.zjapp .pile-list-wrap[data-v-4948f96e]{padding-top:5px}.zjapp .pile-list-wrap .pile-list-date-wrap .date-title[data-v-4948f96e]{margin-top:11px;margin-bottom:14px;padding-left:15px;line-height:20px;font-size:14px;color:#999}.zjapp .pile-list-wrap .pile-list-date-wrap .items-list-wrapper[data-v-4948f96e]{display:flex;flex-flow:row wrap;width:100%;align-content:center;padding:0 7px;background-color:#fff}.zjapp .pile-list-wrap .pile-list-date-wrap .items-list-wrapper .item-list-pile[data-v-4948f96e]{flex:0 0 33.3%;padding:0 8px;overflow:hidden;margin-bottom:15px;position:relative}.zjapp .pile-list-wrap .pile-list-date-wrap .items-list-wrapper .item-list-pile .item-list-pile-name[data-v-4948f96e]{text-align:center;border-radius:100px;padding:0 10px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;height:28px;line-height:28px}.zjapp .pile-list-wrap .pile-list-date-wrap .items-list-wrapper .item-list-pile .item-list-pile-name.bg-green[data-v-4948f96e]{color:#fff;font-size:14px;border-color:#0bc666}.zjapp .pile-list-wrap .pile-list-date-wrap .items-list-wrapper .item-list-pile .item-list-pile-name.bg-orange[data-v-4948f96e]{font-size:14px;color:#fff;border-color:#ff8400}.zjapp .pile-list-wrap .pile-list-date-wrap .items-list-wrapper .item-list-pile .item-list-pile-name.bg-part[data-v-4948f96e]{border:1px solid #0bc666;color:#0bc666}.zjapp .pile-list-wrap .pile-list-date-wrap .items-list-wrapper .item-list-pile .item-list-pile-name.bg-part[data-v-4948f96e]:after{content:"";display:inline-block;width:27px;height:15px;background:url('+a(i("30e2"))+");background-repeat:no-repeat;background-size:100% 100%;position:absolute;right:0;top:0}.zjapp .scroller-pile-image[data-v-4948f96e]{display:flex;flex-direction:column}.zjapp .scroller-pile-image .drawing-con[data-v-4948f96e]{flex:1}.zjapp .pile-height-auto[data-v-4948f96e]{flex:none}.zjapp .pile-height-auto[data-v-4948f96e]:after{height:auto}",""])},ad46:function(t,e,i){"use strict";(function(t){i("f548"),i("e697"),i("cc57"),i("9dd9");var a,n=i("07d2"),s=i("9eea"),o=i("6f9e"),r=i("e89f"),c=[],l=[],p=[],d=!0,h=null,u=["没有标段","没有楼栋","没有单元","没有楼层"],f=["","list bg-gray6","list bg-gray5","list bg-gray4"];e.a={name:"DropDownSelectDialog",components:{Item:n.default,appSearchBar:s.default},mixins:[r.a],data:function(){return{show:!1,showList:!1,isOpening:!1,isClosing:!1,isSearching:!1,contentTop:64,listHeight:510,target:"",selectedSet:[],stage:1,layoutMap:[],keepStage:[],componentUid:"",showNote:!0,hasSearch:!1,searchTimer:null,keyword:""}},watch:{show:function(t){var e=this;t&&this.$nextTick((function(){e.showList=!0}))},showList:function(e){var i=this;e&&this.$nextTick((function(){i.$refs["list-wrap"]&&t.each(i.$refs["list-wrap"].querySelectorAll(".selected")||[],(function(t){setTimeout((function(){t.scrollIntoViewIfNeeded(!0)}),400)}))}))},keyword:function(t){var e=this;clearTimeout(this.searchTimer),this.searchTimer=setTimeout((function(){e.initSelectedSet(c,l)}),100)}},created:function(){o.a.$on("routerBeforeEach",this.closePopup),o.a.$on("pageContentClick",this.onClickOther)},destroyed:function(){o.a.$off("routerBeforeEach",this.closePopup),o.a.$off("pageContentClick",this.onClickOther)},methods:{openPopup:function(e){var i=this;if(this.show)return e.componentUid===this.componentUid?void this.closePopup():void this.closePopup().then((function(){i.openPopup(e)}));this.stage=e.stage,this.componentUid=e.componentUid||"";var n=document.querySelector(".layout-main .layout-header");this.contentTop=n.offsetHeight;var s=e.el&&e.el.$el?e.el.$el:e.el;if(s){var o=s.getBoundingClientRect();this.contentTop=o.bottom}this.target=s,this.listHeight=t.minBy([window.innerHeight-this.contentTop-50,510]),c=e.options,l=t.clone(e.selected),p=e.optionsMap||[],d=!1!==e.needFullSelecte||e.needFullSelecte,h=e.minSelectStage||this.stage,a=e.callback,this.showNote=e.showNote,this.layoutMap=[];for(var r=0;r<e.stage;r++)this.layoutMap.push({level:r,bgColor:e.hasBgColor?f[r]:"",emptyText:e.emptyText&&e.emptyText[r]?e.emptyText[r]:u[r],keep:!!t.isEmpty(e.keepStage)||!!e.keepStage[r]});this.hasSearch=!!e.hasSearch,this.initSelectedSet(e.options,e.selected),this.show=!0,this.$emit("open")},closePopup:function(){var t=this;if(!this.isOpening)return this.$refs["app-search-bar"]&&this.$refs["app-search-bar"].cancelSearch(),this.showList=!1,this.$emit("close"),new Promise((function(e){t.$on("afterClosePopup",e)}))},afterClose:function(){this.show=!1,this.keyword="",this.isClosing=!1,this.$emit("afterClosePopup")},onClickOther:function(t){t&&t.target&&t.target!==this.target&&this.show&&this.closePopup()},getLevelOptionsKey:function(t){return p&&p[t]&&p[t].key?p[t].key:"children"},initSelectedSet:function(){var e=this,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];this.selectedSet=[],t.each(a||[],(function(a,n){var s=e.getLevelOptionsKey(n);if(a&&!(n>e.stage-1)){if(!e.selectedSet[n]){var o;o=n?e.selectedSet[n-1].selected&&e.selectedSet[n-1].selected[s]||[]:i;var r=n||t.isEmpty(e.keyword)?o:t.filter(o,(function(t){return new RegExp(e.keyword,"gm").test(t.name)}));e.selectedSet[n]={selected:{},options:r}}var c=e.selectedSet[n].options,l=t.find(c,{id:a.id});l&&(e.selectedSet[n].selected=l)}})),t.isEmpty(this.selectedSet)&&(this.selectedSet=[{selected:{},options:i}])},showName:function(t){var e=t;return e=(e=e.replace(new RegExp("<","gm"),"&lt;")).replace(new RegExp(">","gm"),"&gt;")},highLightKeyword:function(t){if(this.keyword){var e="";return e=t.replace(new RegExp(this.keyword,"gm"),"-----hightLightTagL-----"+this.keyword+"-----hightLightTagR-----"),e=(e=(e=this.showName(e)).replace(/-----hightLightTagL-----/gm,'<span class="color-blue">')).replace(/-----hightLightTagR-----/gm,"</span>")}return this.showName(t)},getResult:function(){var e=this,i=[];return t.each(this.selectedSet,(function(a,n){var s=t.extend({},a.selected);delete s[e.getLevelOptionsKey(n+1)],t.isEmpty(s)||i.push(s)})),i},select:function(e,i){var n=this,s=this.getLevelOptionsKey(i+1),o=t.isEmpty(e[s]),r=i>=this.stage-1||i>=h-1&&o||!d&&o;this.selectedSet.splice(i+1),this.selectedSet[i].selected=e,l.splice(i),l.push(e),this.$refs["app-search-bar"]&&this.$refs["app-search-bar"].saveHistory(),r?setTimeout((function(){a&&a(n.getResult()),n.closePopup()}),100):this.selectedSet.push({selected:{},options:e[s]})},onSearchTypeChange:function(t){this.isSearching=t}}}}).call(this,i("391c"))},b18d:function(t,e,i){(t.exports=i("690e")(!1)).push([t.i,".zjapp .main[data-v-7a2f6f17]{position:fixed;width:100%;bottom:0}.zjapp .arrow[data-v-7a2f6f17]{position:absolute;top:-7px;right:18px;width:0;height:0;border-bottom:7px solid #fff;border-right:7px solid transparent;border-left:7px solid transparent}.zjapp .content[data-v-7a2f6f17]{position:absolute;top:0;left:0;width:100%;height:100%;background-color:rgba(0,0,0,.4);overflow:hidden}.zjapp .box[data-v-7a2f6f17]{display:flex;flex-direction:column;background-color:#fff;overflow:auto}.zjapp .box-single[data-v-7a2f6f17]{display:flex;flex-direction:column;flex:1}.zjapp .pile-content li[data-v-7a2f6f17]{padding:20px 15px 15px 15px}.zjapp .pile-content .pile-title[data-v-7a2f6f17]{color:#333;font-size:14px;font-weight:600;line-height:20px}.zjapp .pile-content .pile-legend[data-v-7a2f6f17]{color:#666;font-size:14px;line-height:24px;margin-top:5px}",""])},b877:function(t,e,i){var a=i("5454");(t.exports=i("690e")(!1)).push([t.i,".zjapp .drawing-con[data-v-45a47aae]{display:flex;flex-direction:column;align-items:center;justify-content:center;height:100%;font-size:0;line-height:0}.zjapp .drawing-con canvas[data-v-45a47aae]{display:block;height:100%;width:100%;background:url("+a(i("eb66"))+") #fff;background-size:4px 4px}.zjapp .loading-text[data-v-45a47aae]{margin-top:15px;color:#aaa}.zjapp .error-text[data-v-45a47aae],.zjapp .loading-text[data-v-45a47aae]{padding:0 15px;line-height:20px;text-align:center;font-size:16px}.zjapp .error-text[data-v-45a47aae]{color:#ff3d3d}",""])},b9cd:function(t,e,i){"use strict";i.d(e,"b",(function(){return a})),i.d(e,"d",(function(){return n})),i.d(e,"c",(function(){return s})),i.d(e,"a",(function(){return o}));var a={IMAGE:"image",NUMBER:"number",TEXT:"text",DATE:"date",RADIO:"radio",DATETIME:"datetime"},n={CONSTRUCTION:31,SUPERVISING:32,DEVELOPMENT:33},s={ROAD_WORK:1,OTHER:0},o={V1:"accept",V3:"acceptV3"}},bd09:function(t,e,i){(t.exports=i("690e")(!1)).push([t.i,".zjapp .popup-title[data-v-a03eccbc]{display:flex;align-items:center;justify-content:space-between;height:44px;padding:0 15px}.zjapp .popup-title .left-button[data-v-a03eccbc],.zjapp .popup-title .right-button[data-v-a03eccbc]{font-size:14px;color:#666}.zjapp .popup-title .right-button[data-v-a03eccbc]{color:#4981ff}.zjapp .popup-title .title-name[data-v-a03eccbc]{font-size:16px;color:#333}.zjapp .popup-content[data-v-a03eccbc]{display:flex;height:calc(100% - 44px);overflow:auto}.zjapp .popup-content .van-collapse[data-v-a03eccbc] {width:100%}.zjapp .popup-content .van-collapse[data-v-a03eccbc] .van-collapse-item__content{padding:0}.zjapp .popup-content .item-checkbox[data-v-a03eccbc]{display:flex;align-items:center;font-size:16px;padding:13px 15px;background-color:#fafafa}.zjapp .popup-content .item-checkbox[data-v-a03eccbc] .van-checkbox{width:100%;height:100%}.zjapp .popup-content .item-checkbox[data-v-a03eccbc] .van-checkbox__icon{background:#fafafa}",""])},bfbc2:function(t,e,i){"use strict";i("8aaa")},bffa:function(t,e,i){var a=i("5454");(t.exports=i("690e")(!1)).push([t.i,".zjapp .app-search-bar[data-v-fc0189e6]{display:flex;flex-direction:column;min-height:44px}.zjapp .app-search-bar.has-history-list[data-v-fc0189e6]{flex:1;min-height:100%}.zjapp .app-search-input-wrap[data-v-fc0189e6]{display:flex;flex-direction:row;padding:8px;background-color:#fff}.zjapp .app-search-input-box[data-v-fc0189e6]{position:relative;flex:1;height:28px}.zjapp .app-search-label[data-v-fc0189e6]{position:absolute;z-index:2;top:0;left:50%;height:28px;line-height:28px;display:flex;align-items:center;padding-left:0;transform:translateX(-50%);transition:left .4s cubic-bezier(.4,.6,.2,1),transform .4s cubic-bezier(.4,.6,.2,1)}.zjapp .app-search-label-focus[data-v-fc0189e6]{left:12px;transform:translateX(0)}.zjapp .app-search-input[data-v-fc0189e6]{height:28px;padding:5px 32px 5px 33px;width:100%;overflow:hidden;background-color:#f4f4f4;border:none;border-radius:14px}.zjapp .app-search-icon[data-v-fc0189e6]{position:absolute;top:7px;left:0;color:#cacaca;font-size:14px}.zjapp .app-search-placeholder[data-v-fc0189e6]{color:#999;font-size:14px;margin-left:21px;white-space:nowrap}.zjapp .app-search-clear[data-v-fc0189e6]{position:absolute;top:-8px;right:-8px;width:60px;height:44px;background:url("+a(i("7b08"))+') 50% no-repeat;background-size:16px 16px}.zjapp .app-search-cancel[data-v-fc0189e6]{height:44px;line-height:44px;padding:0 15px;margin:-8px -8px -8px 0;font-size:16px;color:#4275e8}.zjapp .app-search-history[data-v-fc0189e6]{flex:1;overflow:auto}.zjapp .app-search-history-empty[data-v-fc0189e6]{display:flex;flex-direction:column}.zjapp .list-title[data-v-fc0189e6]{font-size:14px;line-height:30px;padding:8px 16px 2px}.zjapp .item-history-title[data-v-fc0189e6] .item{align-items:center}.zjapp .item-history-title[data-v-fc0189e6] .item-text{color:#999}.zjapp .item-history-title[data-v-fc0189e6] .icon{position:relative;display:block;min-width:24px;height:30px;line-height:30px;text-align:right;font-size:14px;color:#999}.zjapp .item-history[data-v-fc0189e6] .item-text{color:#666}.zjapp .pile-list-wrap[data-v-fc0189e6]{display:flex;flex-flow:row wrap;align-content:center;padding:15px 10px 0;background-color:#fff;overflow:hidden;width:100%}.zjapp .pile-list-wrap .item-list-pile[data-v-fc0189e6]{flex:0 0 33.3%;padding:4px 8px;overflow:hidden;margin-bottom:15px;position:relative}.zjapp .pile-list-wrap .item-list-pile .item-list-pile-name[data-v-fc0189e6]{text-align:center;border-radius:100px;padding:0 10px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;height:28px;line-height:28px}.zjapp .pile-list-wrap .item-list-pile .item-list-pile-name.bg-green[data-v-fc0189e6]{color:#fff;font-size:14px;border-color:#0bc666}.zjapp .pile-list-wrap .item-list-pile .item-list-pile-name.bg-orange[data-v-fc0189e6]{font-size:14px;color:#fff;border-color:#ff8400}.zjapp .pile-list-wrap .item-list-pile .item-list-pile-name.bg-part[data-v-fc0189e6]{border:1px solid #0bc666;color:#0bc666}.zjapp .pile-list-wrap .item-list-pile .item-list-pile-name.bg-part[data-v-fc0189e6]:after{content:"";display:inline-block;width:27px;height:15px;background:url('+a(i("30e2"))+");background-repeat:no-repeat;background-size:100% 100%;position:absolute;right:0;top:0}",""])},c652:function(t,e,i){"use strict";(function(t){var a=i("e3ee"),n=(i("6f84"),i("6d57"),i("163d"),i("a32d")),s=i.n(n),o=i("e900"),r=i("3122"),c=i("4ad6"),l=i("3bd5"),p=i("1b7e");function d(t){var e=t.changedTouches.length,i=t.touches.length;return 1===e||2===e||2===i}function h(t){return 1===t.touches.length}e.a={name:"Drawing",props:{url:{type:String},points:{type:Array,default:function(){return[]}},pointColor:{type:String,default:"#ff4546"},pointRadius:{type:Number,default:8},scaleMax:{type:Number,default:4},clickDelay:{type:Number,default:500},folder:{type:String,default:"house-image"}},data:function(){return{isDownloading:!1,error:"",canvas:null,ctx:null,img:null,src:"",width:0,height:0,x:0,y:0,scale:1,defaultScale:1,pixelRatio:1,markPosition:null,markPositionImageData:[],markCoordinates:[],pinchRatio:0,xRange:null,yRange:null,scaleBetween:[],isPinch:!1,clickPoints:[],touchStart:{x:0,y:0,cx:0,cy:0,time:0},popupPoint:null,popupCallback:function(){},isMoving:!1,pinchCenter:{}}},watch:{url:function(){this.getImage()},points:function(t){this.ctx&&this.draw()}},mounted:function(){this.getImage()},destroyed:function(){this.canvas&&(this.canvas.width=0,this.canvas.height=0)},methods:{getImage:function(){var e=this;if(this.isDownloading=!0,this.url){var i=l.a.getUser().user_id,a=s.a.replaceAll(this.url,"\\?x-oss-process=image\\/resize,","@"),n=s.a.strRightBack(a,"/");if(!n)return this.error="户型图地址错误",void(this.isDownloading=!1);this.error="";var o=[c.a.appImagePath()+i+"/house-image/"+n,c.a.appImagePath()+i+"/drawing/"+n,c.a.appImagePath()+i+"/images/"+n,c.a.appDataPath()+i+"/house-image/"+n,c.a.appDataPath()+i+"/drawing/"+n,c.a.appDataPath()+i+"/images/"+n],d=Promise.resolve();return"dev"===APP_ENV?d=d.then((function(){return e.url})):t.each(o,(function(t){d=d.then((function(e){return e||c.a.isFileExists(t).then((function(e){if(e)return r.a._fixPath(t)}))}))})),d.then((function(t){if(!t)return p.a.getHasNetwork().then((function(t){return t?r.a.download(e.url,!0,e.folder).then((function(t){e.src=t})):Promise.reject("当前无网络")}));e.src=t})).then((function(){e.src?(e.img=new Image,e.img.onload=function(){e.img.complete?(e.isDownloading=!1,e.$nextTick(e.init)):(e.error="加载图片失败",e.isDownloading=!1)},e.img.onerror=function(){e.error="加载图片失败",e.isDownloading=!1},e.img.src=e.src):(e.error="下载户型图失败",e.isDownloading=!1)})).catch((function(i){e.error=t.isString(i)?i:"下载户型图失败",e.isDownloading=!1}))}this.error="户型图地址错误",this.isDownloading=!1},init:function(){if(this.$refs["drawing-canvas"]){var t=this.$refs.content;this.canvas=this.$refs["drawing-canvas"],this.ctx=this.canvas.getContext("2d"),this.width=t.offsetWidth,this.height=t.offsetHeight,this.pixelRatio=this.getPixelRatio(this.ctx),this.canvas.style.height=this.height+"px",this.canvas.style.width=this.width+"px",this.canvas.width=this.width*this.pixelRatio,this.canvas.height=this.height*this.pixelRatio,!this.ctx.extended&&Object(o.a)(this.ctx),this.bindTouchEvent(),this.calc(),this.draw()}},getPixelRatio:function(t){var e=t.backingStorePixelRatio||CanvasRenderingContext2D.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1;return(window.devicePixelRatio||1)/e},winToCanvas:function(t,e){var i=this.canvas.getBoundingClientRect();return{x:t-i.left*(this.canvas.width/(i.width*this.pixelRatio)),y:e-i.top*(this.canvas.height/(i.height*this.pixelRatio))}},calc:function(){var t,e;this.width/this.img.width<this.height/this.img.height?(t=this.width/this.img.width,this.x=0,this.y=(this.height-this.img.height*t)/2*this.pixelRatio):(t=this.height/this.img.height,this.x=(this.width-this.img.width*t)/2*this.pixelRatio,this.y=0),this.scale=t*this.pixelRatio,e=this.scale<.25?2:8*this.scale,this.scaleBetween=[this.scale,e],this.xRange=[this.x,this.x],this.yRange=[this.y,this.y]},bindTouchEvent:function(){this.canvas.addEventListener("touchstart",this.onTouchstart),this.canvas.addEventListener("touchmove",this.onTouchmove),this.canvas.addEventListener("touchend",this.onTouchend)},unbindTouchEvent:function(){this.canvas.removeEventListener("touchstart",this.onTouchstart),this.canvas.removeEventListener("touchmove",this.onTouchmove),this.canvas.removeEventListener("touchend",this.onTouchend)},onTouchstart:function(t){if(t.preventDefault(),t.stopPropagation(),this.isPinch=!1,h(t))this.touchStartHandler(t);else if(d(t)){var e,i=t.touches[0],a=t.touches[1],n=this.winToCanvas(i.clientX,i.clientY),s=this.winToCanvas(a.clientX,a.clientY);e=Math.sqrt(Math.pow(s.x-n.x,2)+Math.pow(s.y-n.y,2)),this.pinchRatio=this.scale/e}},onTouchmove:function(t){var e=t.touches[0];t.preventDefault(),t.stopPropagation(),h(t)?(Math.abs(e.clientX-this.touchStart.cx)>3||Math.abs(e.clientY-this.touchStart.cy)>3)&&this.touchMoveHandler(t):d(t)&&this.touchPinchHandler(t)},onTouchend:function(t){t.preventDefault(),t.stopPropagation(),this.touchEndHandler(t)},touchStartHandler:function(t){var e=t.touches[0],i=this.winToCanvas(e.clientX,e.clientY);this.touchStart={x:i.x,y:i.y,cx:e.clientX,cy:e.clientY,time:Date.now()}},touchMoveHandler:function(t){var e=t.touches[0],i=this.winToCanvas(e.clientX,e.clientY),a=(i.x-this.touchStart.x)*this.pixelRatio,n=(i.y-this.touchStart.y)*this.pixelRatio,s=this.getMoveOverflow();this.isPinch||(this.touchStart.x=i.x,this.touchStart.y=i.y,this.x<this.xRange[0]||this.x>this.xRange[1]?this.x+=a*Math.abs(this.canvas.width/2-s.x)/this.canvas.width/2:this.x+=a,this.y<this.yRange[0]||this.y>this.yRange[1]?this.y+=n*Math.abs(this.canvas.height/2-s.y)/this.canvas.height/2:this.y+=n,this.draw())},touchPinchHandler:function(t){var e,i,a,n,s,o=t.touches[0],r=t.touches[1],c=this.winToCanvas(o.clientX,o.clientY),l=this.winToCanvas(r.clientX,r.clientY),p=Math.sqrt(Math.pow(l.x-c.x,2)+Math.pow(l.y-c.y,2));this.isPinch=!0,e=this.pinchRatio*p,a=this.getScaleOverflow(e),n=this.scaleBetween[0]/2,s=(Math.abs(a)>n?1:Math.abs(a)/n)/2,e-=a?a*s:0,this.pinchCenter=i={x:(c.x+l.x)/2*this.pixelRatio,y:(c.y+l.y)/2*this.pixelRatio},this.x=i.x-e/this.scale*(i.x-this.x),this.y=i.y-e/this.scale*(i.y-this.y),e!==this.scale&&(this.scale=e,this.setMoveRange(),this.draw())},touchEndHandler:function(t){var e=t.changedTouches[0];Date.now()-this.touchStart.time<this.clickDelay&&Math.abs(e.clientX-this.touchStart.cx)<6&&Math.abs(e.clientY-this.touchStart.cy)<6&&this.clickHandler(t),this.straighten(t)},clickHandler:function(t){var e,i=t.changedTouches[0],a=this.winToCanvas(i.clientX,i.clientY),n={x:(a.x-this.x/this.pixelRatio)/this.scale*this.pixelRatio,y:(a.y-this.y/this.pixelRatio)/this.scale*this.pixelRatio},s=this.getClickPoint(n),o=this.getClickBtn(a);e=o?{type:"btn",pos:a,x:n.x,y:n.y,point:this.popupPoint,btn:o}:{type:s?"point":"",pos:a,x:n.x,y:n.y,point:s,btn:""},o?this.popupCallback(e):n.x>=0&&n.x<=this.img.width&&n.y>=0&&n.y<=this.img.height&&this.$emit("onclick",e)},moveTo:function(t,e){var i=this;t===this.x&&e===this.y||(this.isMoving=!0,setTimeout((function(){var a=!1;Math.abs(t-i.x)<1?i.x=t:(i.x+=.5*(t-i.x),a=!0),Math.abs(e-i.y)<1?i.y=e:(i.y+=.5*(e-i.y),a=!0),a?(i.moveTo(t,e),i.draw()):i.isMoving=!1}),20))},getClickPoint:function(t){var e,i=this,a=2*this.pointRadius+1;return this.points.forEach((function(n){var s=Math.sqrt(Math.pow(Math.abs(t.x-n.x),2)+Math.pow(Math.abs(t.y-n.y),2))*i.scale/i.pixelRatio;s<=2*i.pointRadius&&s<a&&(e=n,a=s)})),e},getClickBtn:function(t){var e,i;return this.popupPoint&&(e=this.getPopupPos(),this.isPointInArea(t.x,t.y,e.x,e.y,80,44)?i="cancel":this.isPointInArea(t.x,t.y,e.x+80,e.y,120,44)&&(i="ok")),i},isPointInArea:function(t,e,i,a,n,s){return t>i&&t<i+n&&e>a&&e<a+s},setMoveRange:function(){var t=this.getMoveRange(this.scale);this.xRange=t.x,this.yRange=t.y},getMoveRange:function(t){var e,i,a,n,s,o,r,c=this.getPopupPos();return t=t||this.scale,i=(e=this.width*this.pixelRatio-this.img.width*t)>0?e/=2:0,n=(a=this.height*this.pixelRatio-this.img.height*t)>0?a/=2:0,this.popupPoint&&(s=(s=this.x-c.x*this.pixelRatio)>0&&s>i?s-i:0,e+=o=(o=this.x+this.img.width*this.scale-(c.x+200)*this.pixelRatio)<0&&o+i>this.img.width*this.scale?o+i-this.img.width*this.scale:0,i+=s,n+=r=(r=this.y-c.y*this.pixelRatio)>0&&r>n?r-n:0),{x:[e,i],y:[a,n]}},straighten:function(t){var e=this;if(!(t&&"touchend"===t.type&&0!==t.touches.length||this.isMoving)){var i=this.scale<this.scaleBetween[0]?this.scaleBetween[0]:this.scale>this.scaleBetween[1]?this.scaleBetween[1]:this.scale,a=this.getMoveRange(i),n=a.x,s=a.y;(this.x<n[0]||this.x>n[1]||this.y<s[0]||this.y>s[1]||this.scale<this.scaleBetween[0]||this.scale>this.scaleBetween[1])&&setTimeout((function(){var t=e.pinchCenter.x?e.pinchCenter.x-i*(e.pinchCenter.x-e.x)/e.scale:e.x,a=e.pinchCenter.y?e.pinchCenter.y-i*(e.pinchCenter.y-e.y)/e.scale:e.y,o=!1;t=t<n[0]?n[0]:t>n[1]?n[1]:t,a=a<s[0]?s[0]:a>s[1]?s[1]:a,Math.abs(t-e.x)<1?e.x=t:(e.x+=.5*(t-e.x),o=!0),Math.abs(a-e.y)<1?e.y=a:(e.y+=.5*(a-e.y),o=!0),Math.abs(i-e.scale)*e.img.width*e.img.height<5?e.scale=i:(e.scale+=.5*(i-e.scale),o=!0),o&&(e.straighten(),e.draw())}),20)}},getMoveOverflow:function(){return{x:this.x<this.xRange[0]?this.x-this.xRange[0]:this.x>this.xRange[1]?this.x-this.xRange[1]:0,y:this.y<this.yRange[0]?this.y-this.yRange[0]:this.y>this.yRange[1]?this.y-this.yRange[1]:0}},getScaleOverflow:function(t){return(t=t||this.scale)<this.scaleBetween[0]?t-this.scaleBetween[0]:t>this.scaleBetween[1]?t-this.scaleBetween[1]:0},openPopup:function(t){var e,i=0,a=0;this.popupPoint=t.point,this.popupCallback=t.callback,this.draw(),(e=this.getPopupPos()).x<0?i=e.x*this.pixelRatio:e.x+200>this.width&&(i=(e.x+200-this.width)*this.pixelRatio),e.y<0&&(a=e.y*this.pixelRatio);var n=this.getMoveRange(this.scale);this.xRange=n.x,this.yRange=n.y,this.moveTo(this.x-i,this.y-a)},closePopup:function(){this.popupPoint=null,this.draw(),this.straighten()},draw:function(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.drawImage(),this.drawPoints(),this.drawPopup()},drawImage:function(){this.ctx.drawImage(this.img,0,0,this.img.width,this.img.height,this.x,this.y,this.img.width*this.scale,this.img.height*this.scale)},drawPoints:function(t){var e=this;this.points.forEach((function(i,a){e.drawPoint(i.x*e.scale/e.pixelRatio+e.x/e.pixelRatio,i.y*e.scale/e.pixelRatio+e.y/e.pixelRatio,e.pointRadius,a,t,i.color,i.style),i.index=a}))},drawPoint:function(t,e,i,a,n,s,o){this.ctx.save(),this.ctx.beginPath(),this.ctx.shadowBlur=0,this.ctx.shadowColor="transparent",this.ctx.arc(t,e,i,0,2*Math.PI,!1),this.ctx.globalAlpha="not_fill"===o?.5:.6,s&&(this.ctx.fillStyle="not_fill"===o?"#fff":s),this.ctx.fill(),this.ctx.globalAlpha=1,s&&(this.ctx.strokeStyle=s),this.ctx.lineWidth="not_fill"===o?2:1,this.ctx.stroke()},drawPopup:function(){var t,e,i,a,n;this.popupPoint&&(t=(n=this.getPopupPos()).x,e=n.y,i=200,a=44,4,this.ctx.shadowBlur=5,this.ctx.shadowColor="#999",this.ctx.lineWidth=0,this.ctx.strokeStyle="transparent",this.ctx.fillStyle="#ffffff",this.ctx.beginPath(),this.ctx.arc(t+4,e+4,4,Math.PI,3*Math.PI/2),this.ctx.lineTo(t+80,e),this.ctx.lineTo(t+80,e+a),this.ctx.lineTo(t-4,e+a),this.ctx.arc(4+t,40+e,4,1*Math.PI/2,Math.PI),this.ctx.closePath(),this.ctx.fill(),this.ctx.fillStyle="#4275e8",this.ctx.beginPath(),this.ctx.arc(196+t,4+e,4,3*Math.PI/2,2*Math.PI),this.ctx.lineTo(i+t,a+e-4),this.ctx.arc(196+t,40+e,4,0,1*Math.PI/2),this.ctx.lineTo(i+t-67.5,a+e),this.ctx.lineTo(i+t-60,a+e+7),this.ctx.lineTo(i+t-52.5,a+e),this.ctx.lineTo(t+80,a+e),this.ctx.lineTo(t+80,e),this.ctx.closePath(),this.ctx.fill(),this.ctx.shadowColor="transparent",this.ctx.font='18px -apple-system, "Helvetica Neue", Roboto, "Segoe UI", sans-serif',this.ctx.textAlign="center",this.ctx.fillStyle="#111111",this.ctx.fillText("取消",t+40,e+30),this.ctx.font='18px -apple-system, "Helvetica Neue", Roboto, "Segoe UI", sans-serif',this.ctx.textAlign="center",this.ctx.fillStyle="#ffffff",this.ctx.fillText("开始验收",t+140,e+30))},getPopupPos:function(){var t=54+this.pointRadius+3;return this.popupPoint?{x:this.popupPoint.x*this.scale/this.pixelRatio+this.x/this.pixelRatio-140,y:this.popupPoint.y*this.scale/this.pixelRatio+this.y/this.pixelRatio-t}:{}},refreshLayout:function(){var t=this;this.$nextTick((function(){var e=t.$refs.content;if(e&&t.canvas){t.width=e.offsetWidth,t.height=e.offsetHeight,t.canvas.style.height=t.height+"px",t.canvas.style.width=t.width+"px",t.canvas.width=t.width*t.pixelRatio,t.canvas.height=t.height*t.pixelRatio,t.calc();var i=Object(a.a)(t.xRange,2),n=i[0],s=i[1],o=Object(a.a)(t.yRange,2),r=o[0],c=o[1],l=Object(a.a)(t.scaleBetween,2),p=l[0],d=l[1];t.x<n?t.x=n:t.x>s&&(t.x=s),t.y<r?t.y=r:t.y>c&&(t.y=c),t.scale<p?t.scale=p:t.scale>d&&(t.scale=d),t.draw()}}))}}}}).call(this,i("391c"))},c77f:function(t,e,i){"use strict";i.d(e,"h",(function(){return r})),i.d(e,"g",(function(){return c})),i.d(e,"a",(function(){return l})),i.d(e,"e",(function(){return p})),i.d(e,"f",(function(){return d})),i.d(e,"d",(function(){return h})),i.d(e,"n",(function(){return u})),i.d(e,"o",(function(){return f})),i.d(e,"b",(function(){return g})),i.d(e,"i",(function(){return m})),i.d(e,"k",(function(){return v})),i.d(e,"c",(function(){return b})),i.d(e,"l",(function(){return x})),i.d(e,"p",(function(){return y})),i.d(e,"m",(function(){return w})),i.d(e,"j",(function(){return k}));var a=i("5e8d"),n=i("162a"),s=i("bcc78"),o=i("da71");function r(t){return Object(a.a)().then((function(){var e=s.a.commonGetProblemClassTree.url;return n.a.request(e,t)}))}function c(t){return Object(a.a)().then((function(){var e=s.a.pileAcceptGetPileBuildingSummary.url;return n.a.request(e,t)}))}function l(t){return Object(a.a)().then((function(){var e=s.a.pileAcceptGetBidsectionBuildingTree.url;return n.a.request(e,t)}))}function p(){return Object(a.a)().then((function(){var t=s.a.pileAcceptGetPileAcceptItems.url;return n.a.request(t)}))}function d(t){return Object(a.a)().then((function(){var e=s.a.pileAcceptGetPileAcceptList.url;return n.a.request(e,t)}))}function h(t){return Object(a.a)().then((function(){var e=s.a.pileAcceptGetPileAcceptInfo.url;return n.a.request(e,t)}))}function u(t){return Object(a.a)().then((function(){var e=s.a.processAcceptBuilding.url;return n.a.request(e,t)}))}function f(t){return Object(a.a)().then((function(){var e=s.a.processAcceptCollect.url;return n.a.request(e,t)}))}function g(t){return Object(a.a)().then((function(){var e=s.a.processAcceptv3GetBuildingList.url;return n.a.request(e,t)}))}function m(t){return Object(a.a)().then((function(){var e=s.a.processAcceptv3GetProcessAcceptv3List.url;return n.a.request(e,t)}))}function v(t){return Object(a.a)().then((function(){var e=o.a.getReportOrgTree.url;return n.a.request(e,t)}))}function b(t){return Object(a.a)().then((function(){var e=o.a.getHomeReports.url;return n.a.request(e,t)}))}function x(t){return Object(a.a)().then((function(){var e=o.a.getReportPools.url;return n.a.request(e,t)}))}function y(t){return Object(a.a)().then((function(){var e=o.a.saveMyReportsSetting.url;return n.a.post(e,null,t)}))}function w(t){return Object(a.a)().then((function(){var e=s.a.getUrlReportAuth.url;return n.a.request(e,t)}))}function k(t){return Object(a.a)().then((function(){var e=s.a.getProgressV3Summary.url;return n.a.request(e,t)}))}},cc4c:function(t,e,i){(t.exports=i("690e")(!1)).push([t.i,".zjapp .content[data-v-1fa2658d]{position:fixed;width:100%;bottom:0;background-color:rgba(0,0,0,.4);overflow:hidden}.zjapp .box[data-v-1fa2658d]{flex-direction:column}.zjapp .box[data-v-1fa2658d],.zjapp .list-wrap[data-v-1fa2658d]{display:flex;background-color:#fff}.zjapp .list-wrap[data-v-1fa2658d]{flex-direction:row;align-items:flex-start;flex:1;overflow:hidden}.zjapp .list[data-v-1fa2658d]{padding:0 10px}.zjapp .list[data-v-1fa2658d],.zjapp .list-single[data-v-1fa2658d]{flex:1;overflow:auto;height:100%;scroll-behavior:smooth}.zjapp .item-dropdown[data-v-1fa2658d]{padding:6px 0;background-color:transparent}.zjapp .item-dropdown[data-v-1fa2658d] .item-text{font-size:14px}.zjapp .item-dropdown.selected[data-v-1fa2658d]{color:#4275e8;padding-bottom:5px;border-bottom:1px solid #4275e8}.zjapp .item-dropdown.selected[data-v-1fa2658d] .item-text{color:#4275e8}.zjapp .empty-tips[data-v-1fa2658d]{padding:13px 0;line-height:20px;color:#b2b2b2;font-size:14px}.zjapp .select-note[data-v-1fa2658d]{line-height:16px;font-size:12px;color:#8c8c8c}[data-v-1fa2658d] .icon-qualified{width:30px;height:30px;line-height:30px;text-align:center;color:#4275e8}",""])},ccf5:function(t,e,i){"use strict";var a=i("c652").a,n=(i("bfbc2"),i("17cc")),s=Object(n.a)(a,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",t._g({ref:"content",staticClass:"drawing-con"},t.$listeners),[t.isDownloading?[i("p",[i("svg",{staticClass:"svg-loading",attrs:{viewBox:"0 0 80 80"}},[i("circle",{attrs:{cx:"40",cy:"40",r:"36"}})])]),i("p",{staticClass:"loading-text"},[t._v("正在下载...")])]:[t.error?t._e():i("canvas",{ref:"drawing-canvas"}),t.error?i("p",{staticClass:"error-text"},[t._v(t._s(t.error))]):t._e()]],2)}),[],!1,null,"45a47aae",null);e.a=s.exports},d152:function(t,e,i){"use strict";var a=i("329b"),n=i("ad46").a,s=(i("fc72"),i("17cc")),o=Object(s.a)(n,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.show?i("div",{staticClass:"content",style:{top:t.contentTop+"px"},on:{click:function(e){return e.target!==e.currentTarget?null:t.closePopup(e)}}},[i("transition",{attrs:{name:"slide-down"},on:{enter:function(e){t.isOpening=!0},"after-enter":function(e){t.isOpening=!1},leave:function(e){t.isClosing=!0},"after-leave":t.afterClose}},[t.showList?i("div",{staticClass:"box",style:{height:t.listHeight+"px"}},[t.hasSearch?i("app-search-bar",{ref:"app-search-bar",attrs:{placeholder:"输入项目名称搜索","simple-mode":"","history-key":"drop-down-search-history-key"},on:{changeSearchStatus:t.onSearchTypeChange},model:{value:t.keyword,callback:function(e){t.keyword=e},expression:"keyword"}}):t._e(),!t.isSearching||t.keyword&&t.selectedSet[0]&&t.selectedSet[0].options.length?i("div",{ref:"list-wrap",staticClass:"list-wrap"},[1===t.stage?t._l(t.layoutMap,(function(e,a){var n;return i("div",{key:"map"+a,staticClass:"list-single",class:(n={},n[e.bgColor]=!0,n),style:{height:t.listHeight-(t.hasSearch?44:0)+"px"}},t._l(t.selectedSet[e.level]&&t.selectedSet[e.level].options||[],(function(n,s){return i("item",{key:s,class:{selected:t.selectedSet[e.level].selected&&t.selectedSet[e.level].selected.id===n.id},attrs:{border:"bottom"},on:{click:function(i){t.select(n,e.level)}}},[i("div",{staticClass:"item-text",class:{"color-theme":n.note&&t.selectedSet[e.level].selected&&t.selectedSet[e.level].selected.id===n.id},domProps:{innerHTML:t._s(a?t.showName(n.nameShow||n.name):t.highLightKeyword(n.nameShow||n.name))}}),!n.note&&t.selectedSet[e.level].selected&&t.selectedSet[e.level].selected.id===n.id?i("icon",{attrs:{name:"qualified"}}):t._e(),n.note?i("div",{staticClass:"item-font color-gray2 f14"},[t._v(t._s(n.note))]):t._e()],1)})))})):[t._l(t.layoutMap,(function(e,a){var n;return[e.keep||t.selectedSet[e.level]&&t.selectedSet[e.level].options&&t.selectedSet[e.level].options.length?i("div",{key:"map"+a,staticClass:"list",class:(n={},n[e.bgColor]=!0,n),style:{height:t.listHeight-(t.hasSearch?44:0)+"px"}},[t._l(t.selectedSet[e.level]&&t.selectedSet[e.level].options||[],(function(n,s){return i("item",{key:s,staticClass:"item-dropdown",class:{selected:t.selectedSet[e.level].selected&&t.selectedSet[e.level].selected.id===n.id},on:{click:function(i){t.select(n,e.level)}}},[i("div",{staticClass:"item-text"},[i("p",{domProps:{innerHTML:t._s(a?t.showName(n.nameShow||n.name):t.highLightKeyword(n.nameShow||n.name))}}),i("p",{staticClass:"select-note"},[t._v(t._s(n.note))])])])})),t.selectedSet[e.level]&&t.selectedSet[e.level].options&&t.selectedSet[e.level].options.length?t._e():i("div",{staticClass:"empty-tips"},[t._v("\n                "+t._s(t.selectedSet[e.level-1]&&t.selectedSet[e.level-1].selected&&t.selectedSet[e.level-1].selected.id?e.emptyText:"请选择")+"\n              ")])],2):t._e()]}))]],2):t._e(),!t.isSearching||!t.keyword||t.selectedSet[0]&&t.selectedSet[0].options.length?t._e():i("loading-status",{attrs:{"is-empty":!0,type:"search","empty-text":"未搜索到相关内容"}})],1):t._e()])],1):t._e()}),[],!1,null,"1fa2658d",null).exports,r=!1;r||(r=new(a.default.extend(o))({el:document.createElement("div")}),document.body.appendChild(r.$el));e.a=r},d1d1:function(t,e,i){"use strict";(function(t){var a=i("fd50"),n=i("bcc7"),s=i("515e"),o=i("07d2"),r=i("7bac"),c=i("a7c3"),l=i("4360");e.a={name:"CheckGuideList",components:{Item:o.default},store:l.a,data:function(){return{isLoading:!0,listData:[],module:"",itemId:"",batchId:"",sectionId:"",options:""}},computed:{moduleAttribute:function(){return this.$store.state.global.moduleAttribute}},methods:{init:function(e){var i,n=this;for(var s in this.module=e.module,this.itemId=e.itemId,this.batchId=e.batchId,this.sectionId=e.sectionId,this.options=e.options,e)this[s]=e[s];this.checkType={check:31,"check-safety":36,"check-quality":37,"measure-v3":41,process:32,"fly-inspect":101}[this.module];var o=!1;t.isEmpty(this.itemId)?!t.isEmpty(this.checkType)&&t.isEmpty(this.sectionId)?i=this.initByType():t.isEmpty(this.batchId)?t.isEmpty(this.options)?t.isEmpty(this.sectionId)?i=a.a.when():(o=!0,i=this.initByBidsection()):i=this.initByOptions():i=this.initByBatch():i=this.initById(),this.isLoading=!0,i.then((function(e){var i=n.moduleAttribute[n.module]||{};!t.isEmpty(i)&&i.setUsualItems&&o?r.a.getUserKey(n.mmkvCode()).then((function(t){t=null===t?e:n.mergeArray(n.deepClone(e),t),n.listData=t||[],n.isLoading=!1})):(n.listData=e||[],n.isLoading=!1)}))},mmkvCode:function(){var t=this.moduleAttribute[this.module]||{};return c.a[t.mmkv_item]+"_"+this.sectionId},mergeArray:function(e,i){var a=this;return t.filter(e,(function(e){var n=i[e.id];return t.isEmpty(e.subitem)||(e.subitem=a.mergeArray(e.subitem,i)),!t.isEmpty(n)||"desc"===e.type}))},clickItem:function(t){t.subitem&&t.subitem.length?this.$set(t,"isOpen",!t.isOpen):"special-inspect"===this.module?s.a.openPopup({itemId:t.id,module:this.module}):s.a.openPopup({itemId:t.item_id,module:this.module})},initById:function(){var t=this;if("special-inspect"!==this.module)return n.a.getCheckItem(this.itemId,this.checkType).then((function(e){return e?t.sectionId?n.a.getBidSectionCheckItemListByCode(t.sectionId,e.code):n.a.getCheckItemTreeByCode(e.code):a.a.when()}))},initByType:function(){return n.a.getCheckItemGuidelineList(this.checkType)},initByBatch:function(){return a.a.when()},initByBidsection:function(){return n.a.getBidSectionCheckItemTreeByType(this.sectionId,this.checkType)},initByOptions:function(){return a.a.resolve(this.options)},deepClone:function(t){return JSON.parse(JSON.stringify(t))}}}}).call(this,i("391c"))},d57d:function(t,e,i){"use strict";i("5ede")},dc50:function(t,e,i){"use strict";i("3882")},dc98:function(t,e,i){"use strict";i("0732")},dd56:function(t,e,i){"use strict";i("22bf")},e3b4:function(t,e,i){"use strict";var a=i("48de").a,n=(i("17da"),i("17cc")),s=Object(n.a)(a,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"app-search-bar",class:{"has-history-list":t.isSeaching&&!t.value}},[i("div",{staticClass:"app-search-input-wrap border-bottom"},[i("div",{staticClass:"app-search-input-box"},[i("app-label",{staticClass:"app-search-label",class:{"app-search-label-focus":t.isSeaching},attrs:{for:"app-search-bar-input"}},[i("icon",{staticClass:"app-search-icon",attrs:{name:"sousuo-user"}}),t.isSeaching&&t.value?t._e():i("span",{staticClass:"app-search-placeholder"},[t._v(t._s(t.placeholder))])],1),i("input",{ref:"app-search-bar-input",staticClass:"app-search-input",attrs:{id:"app-search-bar-input",type:"text"},domProps:{value:t.value},on:{focus:t.onFocus,input:t.onInput}}),t.value?i("app-label",{staticClass:"app-search-clear",attrs:{for:"app-search-bar-input"},on:{click:t.clearValue}}):t._e()],1),t.isSeaching?i("div",{staticClass:"app-search-cancel",on:{click:t.cancelSearch}},[t._v("取消")]):t._e()]),t.isSeaching&&!t.value?i("div",{staticClass:"app-search-history",class:{"app-search-history-empty":!t.searchHistory.length}},[i("item",{directives:[{name:"show",rawName:"v-show",value:t.searchHistory.length,expression:"searchHistory.length"}],staticClass:"item-history-title",attrs:{text:"搜索历史",border:"bottom"}},[t.searchHistory&&t.searchHistory.length?i("icon",{attrs:{slot:"icon-right",name:"delete"},on:{click:t.deleteHistoryAll},slot:"icon-right"}):t._e()],1),t._l(t.searchHistory,(function(e,a){return i("item",{key:a,staticClass:"item-history",attrs:{border:"bottom"},on:{click:function(i){t.selectHistory(e)}}},[i("div",{staticClass:"item-text"},[t._v(t._s(e.val))]),i("icon",{attrs:{name:"nav-close"},on:{click:function(i){i.stopPropagation(),t.deleteHistory(e)}}})],1)})),i("loading-status",{staticStyle:{"margin-top":"50px"},attrs:{"is-empty":!t.searchHistory.length,type:"search","empty-text":"没有搜索历史"}})],2):t._e(),t.value?i("div",{staticClass:"pile-list-wrap"},[t._l(t.searchPileList,(function(e,a){return i("div",{key:a,staticClass:"item-list-pile",class:[{"待验收":"bg-pile-part"}[e.status]],on:{click:function(i){t.selectPlace(e)}}},[i("div",{staticClass:"item-list-pile-name border",class:[{"已验收":"bg-green","待移交":"bg-orange","待验收":"bg-part"}[e.status],{"item-list-not-pile-name":!e.pile_address}]},[t._v("\n        "+t._s(e.pile_address||"桩号未填")+"\n      ")])])})),i("loading-status",{staticStyle:{"margin-top":"50px"},attrs:{"is-empty":!t.searchPileList.length,type:"search","empty-text":"没有查询到结果"}})],2):t._e()])}),[],!1,null,"fc0189e6",null);e.a=s.exports},e660:function(t,e,i){"use strict";i.r(e);var a=i("20cd").a,n=(i("4611"),i("17cc")),s=Object(n.a)(a,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("page-content",[i("div",{staticClass:"building-select",attrs:{slot:"header-bar-center"},on:{click:t.dropDown},slot:"header-bar-center"},[t.isLoading?[i("span",{staticClass:"text"},[t._v("...")])]:[t.placeOptions.length?[i("div",{staticClass:"building-select-con"},[t._v("\n          "+t._s(t.currentBuildName)+"\n          "),i("i",{class:{arrow:!0,active:t.isBuildingSelectOpen}})])]:[i("span",{staticClass:"text"},[t._v("无标段")])]]],2),i("div",{staticClass:"header-btn",attrs:{slot:"header-bar-right"},slot:"header-bar-right"},[t.pileImage?i("span",{staticStyle:{"margin-right":"24px"},on:{click:function(e){t.switchShowType()}}},[i("icon",{attrs:{name:t.showPileImg?"qiehuanliebiao":"dianweitu"}})],1):t._e(),i("div",{staticStyle:{display:"inline-block"},on:{click:t.openSearchByCheckItem}},[i("icon",{attrs:{name:"nav-filter"}})],1)]),!t.isLoading&&t.allPileList.length?i("scroller",{staticClass:"place-box bg-white",class:{"scroller-pile-image":t.showPileImg,"pile-height-auto":!t.showPileImg&&!t.currentPileList.length&&!t.isSearching},attrs:{"building-id":t.currentBuilding[1]&&t.currentBuilding[1].id}},[t.showPileImg?t._e():i("app-search-bar",{ref:"app-search-bar",attrs:{placeholder:"搜索","history-key":"pile-accept-search-history-key","pile-list":t.allPileList},on:{changeSearchStatus:t.onSearchTypeChange,selectPlace:t.goDetail}}),i("div",{directives:[{name:"show",rawName:"v-show",value:!t.isSearching,expression:"!isSearching"}],staticClass:"filter-tabs"},t._l(t.tabData,(function(e,a){return i("div",{key:a,staticClass:"filter-tab",class:{current:t.filterType===e.status},on:{click:function(i){t.changeTab(e.status,e.statusText)}}},[i("i",{directives:[{name:"show",rawName:"v-show",value:a>0,expression:"index > 0"}],staticClass:"status",class:e.status}),t._v("\n        "+t._s(e.name)+"\n        "),i("br"),t._v("\n        "+t._s(e.number)+"\n      ")])}))),t.showPileImg?i("drawing-pile",{directives:[{name:"show",rawName:"v-show",value:!t.isSearching,expression:"!isSearching"}],ref:"drawing-pile",staticStyle:{"padding-top":"10px"},attrs:{url:t.pileImage,points:t.currentPileList},on:{onclick:t.onDrawingClick}}):i("div",{directives:[{name:"show",rawName:"v-show",value:!t.isSearching,expression:"!isSearching"}],staticClass:"pile-list-wrap"},t._l(t.currentPileDateSortList,(function(e){return i("div",{key:e.date,staticClass:"pile-list-date-wrap"},[i("div",{staticClass:"date-title"},[t._v("\n            "+t._s(e.date)+"\n          ")]),i("div",{staticClass:"items-list-wrapper"},t._l(e.items,(function(e,a){return i("div",{key:a,staticClass:"item-list-pile",class:[{"待验收":"bg-pile-part"}[e.status]],on:{click:function(i){t.goDetail(e)}}},[i("div",{staticClass:"item-list-pile-name border",class:[{"已验收":"bg-green","待移交":"bg-orange","待验收":"bg-part"}[e.status],{"item-list-not-pile-name":!e.pile_address}]},[t._v(t._s(e.pile_address||"桩号未填"))])])})))])})))],1):t._e(),i("pile-accept-condition-filter",{ref:"pile-accept-condition-filter",attrs:{"check-item-list":t.checkItemList}}),i("loading-status",{attrs:{"is-loading":t.isLoading,"is-empty":!t.showPileImg&&!t.currentPileList.length&&!t.isSearching,type:t.errorType,"empty-text":t.emptyTips||"没有报表数据"}})],1)}),[],!1,null,"4948f96e",null);e.default=s.exports},e7b6:function(t,e,i){"use strict";(function(t){i("6d57"),i("06a2"),i("2aa3");var a=i("4c09"),n=(i("ed63"),i("8cf2"),i("e2a7"),i("774b"));e.a={name:"PilePickerMulti",components:{Scroller:n.default},props:{checkList:{type:Array,default:function(){return[]}},current:{type:Array,default:function(){return[]}}},data:function(){return{show:!1,options:[],activeNames:[],result:[]}},methods:{open:function(){var e=this;this.show=!0;var i=[],n=t.clone(this.checkList),s=t.clone(this.current);console.log({current:s,options:n}),s&&s.length&&(n=t.each(n,(function(a){t.each(a.subitem,(function(t){s.includes(t.id)&&(e.$set(t,"checked",!0),i.push(a.id))}))}))),this.activeNames=Object(a.a)(new Set(i)),this.options=n},setValue:function(t,e){},confirm:function(){var e=[];t.each(this.options,(function(i){t.each(i.subitem,(function(t){t.checked&&e.push(t.id)}))})),this.show=!1,this.$emit("selected",e)}}}}).call(this,i("391c"))},e900:function(t,e,i){"use strict";i.d(e,"a",(function(){return a})),i.d(e,"b",(function(){return n}));i("f548");function a(t){var e,i,a,n=(i=(e=t).backingStorePixelRatio||CanvasRenderingContext2D.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1,(window.devicePixelRatio||1)/i);1!==n&&(!function(t,e){for(var i in t)t.hasOwnProperty(i)&&e(t[i],i)}({fillRect:"all",clearRect:"all",strokeRect:"all",moveTo:"all",lineTo:"all",arc:[0,1,2],arcTo:"all",bezierCurveTo:"all",isPointinPath:"all",isPointinStroke:"all",quadraticCurveTo:"all",rect:"all",translate:"all",createRadialGradient:"all",createLinearGradient:"all"},(function(e,i){var a;t[i]=(a=t[i],function(){var t,i,s=Array.prototype.slice.call(arguments);if("all"===e)s=s.map((function(t){return t*n}));else if(Array.isArray(e))for(t=0,i=e.length;t<i;t++)s[e[t]]*=n;return a.apply(this,s)})})),t.stroke=(a=t.stroke,function(){this.lineWidth*=n,a.apply(this,arguments),this.lineWidth/=n}),t.fillText=function(t){return function(){var e=Array.prototype.slice.call(arguments);e[1]*=n,e[2]*=n,this.font=this.font.replace(/(\d+)(px|em|rem|pt)/g,(function(t,e,i){return e*n+i})),t.apply(this,e),this.font=this.font.replace(/(\d+)(px|em|rem|pt)/g,(function(t,e,i){return e/n+i}))}}(t.fillText),t.strokeText=function(t){return function(){var e=Array.prototype.slice.call(arguments);e[1]*=n,e[2]*=n,this.font=this.font.replace(/(\d+)(px|em|rem|pt)/g,(function(t,e,i){return e*n+i})),t.apply(this,e),this.font=this.font.replace(/(\d+)(px|em|rem|pt)/g,(function(t,e,i){return e/n+i}))}}(t.strokeText),t.extended=!0)}var n=function(t){var e,i;(e=t).getContext=(i=e.getContext,function(t){var e,n,s=i.call(this,t);return"2d"===t&&(e=s.backingStorePixelRatio||CanvasRenderingContext2D.webkitBackingStorePixelRatio||s.mozBackingStorePixelRatio||s.msBackingStorePixelRatio||s.oBackingStorePixelRatio||s.backingStorePixelRatio||1,(n=(window.devicePixelRatio||1)/e)>1&&(this.style.height=this.height+"px",this.style.width=this.width+"px",this.width*=n,this.height*=n)),a(s),s})}},e9ea:function(t,e,i){(t.exports=i("690e")(!1)).push([t.i,".zjapp .guide-box[data-v-ff0679ce]{flex:1;display:flex}.zjapp .page-scroll[data-v-ff0679ce]{flex:1;overflow:auto;padding-bottom:100px;transform:translateZ(0)}.zjapp .sublist[data-v-ff0679ce]{padding-left:25px;padding-top:1px;background-color:#fff}.zjapp .sublist>.sublist[data-v-ff0679ce]{padding-left:10px;padding-top:0}",""])},ef1c:function(t,e,i){var a=i("e9ea");"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);(0,i("85cb").default)("2e832052",a,!0,{sourceMap:!1,shadowMode:!1})},f137:function(t,e,i){"use strict";(function(t){var a=i("6f9e"),n=i("e89f");e.a={name:"DropSelectpileAccept",mixins:[n.a],data:function(){return{show:!1,showList:!1,isLoading:!1,isOpening:!1,isClosing:!1,contentTop:64,listHeight:510,target:""}},watch:{show:function(t){var e=this;t&&this.$nextTick((function(){e.showList=!0}))}},created:function(){a.a.$on("routerBeforeEach",this.closePopup),a.a.$on("pageContentClick",this.onClickOther)},destroyed:function(){a.a.$off("routerBeforeEach",this.closePopup),a.a.$off("pageContentClick",this.onClickOther)},methods:{openPopup:function(){this.show=!0,this.$emit("open");var e=document.querySelector(".layout-main .layout-header");this.contentTop=e.offsetHeight,this.listHeight=t.minBy([window.innerHeight-this.contentTop-50,510])},closePopup:function(){var t=this;if(!this.isOpening)return this.showList=!1,this.$emit("close"),new Promise((function(e){t.$on("afterClosePopup",e)}))},afterClose:function(){this.show=!1,this.isClosing=!1,this.$emit("afterClosePopup")},onClickOther:function(t){t&&t.target&&t.target!==this.target&&this.show&&this.closePopup()}}}}).call(this,i("391c"))},f1e4:function(t,e,i){"use strict";(function(t){i("5ab2"),i("e10e");var a=i("28f8"),n=(i("9dd9"),i("616f"),i("9e76"),i("ed63"),i("8cf2"),i("6d57"),i("9a33"),i("f548"),i("cc57"),i("4ad6")),s=i("e89f"),o=i("bcc7"),r=i("3122"),c=i("6e1b"),l=i("c130"),p=i("0636");function d(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,a)}return i}function h(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?d(Object(i),!0).forEach((function(e){Object(a.a)(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):d(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}e.a={name:"CheckGuideDetail",components:{},mixins:[s.a],data:function(){return{show:!1,isLoading:!0,isImageDownloading:!1,title:"",content:[],module:"",itemId:""}},methods:{openPopup:function(e){var i=this;for(var a in this.value=!0,this.show=!0,this.module=e.module,this.itemId=e.itemId,this.$emit("open"),e)this[a]=e[a];this.checkType={check:31,"check-safety":36,"check-quality":37,"measure-v3":41,process:32,"fly-inspect":101}[this.module],this.isLoading=!0,("special-inspect"===this.module?c.a.getSpecialInspectCheckItemDetail(this.itemId):"templet-plan"===this.module?l.a.getTempletDetail(this.itemId):"material"===this.module?p.a.getMaterialDetail(this.itemId):o.a.getCheckItem(this.itemId,this.checkType)).then((function(e){console.log("checkitemData",e),e=e||{},i.checkitemData=e,i.title=e.full_name||e.name,"special-inspect"!==i.module&&"inspect"!==i.module&&"fly-inspect"!==i.module&&"material"!==i.module||(e.content=e.guideline||e.content);var a=e.content?e.content.trim():"",n="【------<REPLACE_SRT>-------】";a=(a=(a=(a=(a=(a=a.replace(/<\/p><p>/gm,"\n")).replace(/<p>/gm,"")).replace(/<\/p>/gm,"")).replace(/<br>/gm,"")).replace(/<br \/>/gm,"")).replace(/\n/gm,"".concat(n,"\n"));var s=/(<img[^\>]*>|<a[^>]*href=['"][^"]*['"][^>]*>.*?<\/a>)/gm;if(s.test(a)){var o=a.split(s);(o=o.filter((function(t){return!!t}))).forEach((function(t,e){t&&!/^\s*\n/.test(t)&&e&&!/\n\s*$/.test(o[e-1])&&(o[e]="\n"+t)})),a=o.join("")}var r=a?a.split("\n"):[],c=t.map(r,(function(t,e){if(t!==n&&!t.includes(n)){var i=r[e+1];i&&i===n&&(t+=n)}var a;if(/<img([\s\S]*)>/gm.test(t)){var s=t.split(/\ssrc="([^"]*)"/gm)[1],o=s?s.match(/[\w|-]{36}/gm)[0]:(new Date).getTime()+"-"+e;a={isImg:!0,isHref:!1,src:"",url:s,status:"pending",id:o,ready:!0}}else if(/<a.*<\/a>/gm.test(t)){var c=t.split(/href="([^"]*)".*>(.*)<\/a>/);a={isImg:!1,isHref:!0,val:c[2],url:c[1]}}else a={isImg:!1,isHref:!1,val:t};return a.val&&(a.joinBrToSplitLine=t!==n&&t.endsWith(n)),a}));i.content=[];for(var l=0;l<c.length;l++){var p=c[l];!(p.val===n)&&(p.val&&(p.val=p.val.replace(new RegExp("".concat(n),"gm"),"")),i.content.push(p))}i.downloadImage(),i.isLoading=!1})).catch((function(t){$log.log(t)}))},openHref:function(t){n.a.openUrl(t)},closePopup:function(){this.value=!1,this.show=!1,this.$emit("close")},getThumbnail:function(t){return"pending"===t.status?r.a.IMAGE_LOADING:"rejected"===t.status?r.a.IMAGE_RELOAD:"dev"===APP_ENV?t.url:"fulfilled"===t.status?t.src:($log.log("检查指引-显示图片：",t),r.a.IMAGE_PLACEHOLD)},imgError:function(t,e){$log.error("检查指引-加载图片出现错误：",t);var i=h({},t);i.status="rejected",this.$set(this.content,e,i)},downloadImage:function(e){var i=this;e=e?[e]:this.imageList(),t.each(e,(function(e){var a=h({},e),n=t.map(i.content,(function(t){return t.id})).indexOf(e.id);r.a.isNeedDownload(e.url).then((function(t){t?r.a.download(e.url).then((function(t){a.status="fulfilled",a.src=r.a.fixUrl(t),i.$set(i.content,n,a)})).catch((function(t){$log.error("检查指引-下载图片：",t)})):(a.status="fulfilled",a.src=r.a.fixUrl(r.a.getPathFromUrl(e.url)),i.$set(i.content,n,a))}))}))},imageList:function(){return t.filter(this.content,(function(t){return t.isImg}))},imgClick:function(e){var i=this;if("pending"===e.status)return!1;if("rejected"===e.status)return this.downloadImage(e),$log.log("检查指引-点击重新加载-重新下载图片：",e),!1;var a=this.imageList(),s=t.map(a,(function(t){return t.id})).indexOf(e.id);a=t.map(a,(function(t){return i.getThumbnail(t)})),n.a.openImageBrowser(a,s)}}}}).call(this,i("391c"))},f369:function(t,e,i){"use strict";var a=i("fd50"),n=i("bcc7"),s=i("329b"),o=i("d1d1").a,r=(i("3411"),i("17cc")),c={name:"CheckGuideList",components:{GuideList:Object(r.a)(o,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"guide-box"},[!t.isLoading&&t.listData.length?i("div",{staticClass:"page-scroll"},t._l(t.listData,(function(e,a){return i("div",{key:a},[i("item",{attrs:{border:"bottom","icon-right":e.subitem&&e.subitem.length?e.isOpen?"arrow-up":"arrow-down":"arrow-right"},on:{click:function(i){t.clickItem(e)}}},[i("div",{staticClass:"item-text fw-b color-blue one-line"},[t._v(t._s(e.item_name))])]),e.isOpen?t._l(e.subitem,(function(e,a){return i("div",{key:a,staticClass:"sublist"},[i("item",{staticClass:"pl0",attrs:{border:"bottom","icon-right":e.subitem&&e.subitem.length?e.isOpen?"arrow-up":"arrow-down":"arrow-right"},on:{click:function(i){t.clickItem(e)}}},[i("div",{staticClass:"item-text checkitem-list-name"},[t._v(t._s(e.item_name))])]),e.isOpen?t._l(e.subitem,(function(e,a){return i("div",{key:a,staticClass:"sublist"},[i("item",{staticClass:"pl0",attrs:{border:"bottom","icon-right":e.subitem&&e.subitem.length?e.isOpen?"arrow-up":"arrow-down":"arrow-right"},on:{click:function(i){t.clickItem(e)}}},[i("div",{staticClass:"item-text checkitem-list-name"},[t._v(t._s(e.item_name))])]),e.isOpen?t._l(e.subitem,(function(e,a){return i("div",{key:a,staticClass:"sublist"},[i("item",{staticClass:"pl0",attrs:{border:"bottom","icon-right":e.subitem&&e.subitem.length?e.isOpen?"arrow-up":"arrow-down":"arrow-right"},on:{click:function(i){t.clickItem(e)}}},[i("div",{staticClass:"item-text checkitem-list-name"},[t._v(t._s(e.item_name))])])],1)})):t._e()],2)})):t._e()],2)})):t._e()],2)}))):t._e(),i("loading-status",{attrs:{"is-loading":t.isLoading,"is-empty":!t.listData.length,"empty-text":"没有检查项"}})],1)}),[],!1,null,"ff0679ce",null).exports},mixins:[i("e89f").a],data:function(){return{show:!1}},methods:{openPopup:function(t){var e=this;this.value=!0,this.show=!0,this.$nextTick((function(){e.$refs["guide-list"].init(t),e.$emit("open")}))},closePopup:function(){this.value=!1,this.show=!1,this.$emit("close")}}},l=Object(r.a)(c,(function(){var t=this.$createElement,e=this._self._c||t;return e("transition",{attrs:{name:"slide-right"}},[this.show?e("page-content",{attrs:{mode:"dialog",title:"检查指引","on-close":this.closePopup}},[e("guide-list",{ref:"guide-list"})],1):this._e()],1)}),[],!1,null,null,null).exports,p=!1;p||(p=new(s.default.extend(l))({el:document.createElement("div")}),document.body.appendChild(p.$el));var d=p,h=i("515e"),u=i("91c1").a,f=(i("dc98"),Object(r.a)(u,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.show?i("div",{staticClass:"main",style:{top:t.contentTop+"px"}},[i("i",{staticClass:"arrow"}),i("div",{staticClass:"content",on:{click:function(e){return e.target!==e.currentTarget?null:t.closePopup(e)}}},[i("transition",{attrs:{name:"slide-down"},on:{enter:function(e){t.isOpening=!0},"after-enter":function(e){t.isOpening=!1},leave:function(e){t.isClosing=!0},"after-leave":t.afterClose}},[t.showList?i("div",{staticClass:"box",style:{height:t.listHeight+"px"}},t._l(t.data,(function(e,a){return i("div",{key:a,class:{"border-bottom":t.data.length>1,"box-single":1===t.data.length}},[i("div",{staticClass:"detail-hd",class:{"border-bottom":t.data.length<=1,"detail-hd-single":t.data.length<=1},on:{click:function(i){t.toggleItem(e)}}},[t.data.length>1?i("i",{class:{"detail-arrow-right":!e.isOpen,"detail-arrow-down":e.isOpen}}):t._e(),i("div",{staticClass:"detail-title"},[t._v(t._s(e.name))])]),t.data.length<=1||e.isOpen?i("div",{staticClass:"detail-bd",class:{"detail-bd-single":t.data.length<=1}},[t._l(e.textArr,(function(e,a){return i("p",{key:a,staticClass:"text-line"},[t._v("\n              "+t._s(e)+"\n            ")])})),i("item-img-list",{attrs:{editabled:!1},model:{value:e.contentImage,callback:function(i){t.$set(e,"contentImage",i)},expression:"item.contentImage"}}),i("loading-status",{attrs:{"is-empty":!e.textArr.length&&!e.contentImage.length,"empty-text":"PC端未设置检查指引"}})],2):t._e()])}))):t._e()])],1)]):t._e()}),[],!1,null,"2cac8864",null).exports),g=!1;g||(g=new(s.default.extend(f))({el:document.createElement("div")}),document.body.appendChild(g.$el));var m=g,v={name:"CheckGuide",components:{},props:{module:{type:String,default:""},mode:{type:String,default:"page"},itemId:{type:String,default:""},itemIds:{type:Array,default:function(){return[]}},batchId:{type:String,default:""},sectionId:{type:String,default:""},options:{type:Array,default:function(){return[]}},optionsPromise:{type:Function,default:function(){}},beforeOpen:{type:Function,default:function(){}}},data:function(){return{isLoading:!1}},methods:{openCheckGuide:function(){var t=this,e=this.beforeOpen&&this.beforeOpen();e instanceof Promise||(e=Promise.resolve(e)),e.then((function(e){!1!==e&&("drop"===t.mode?m.openPopup({itemIds:t.itemIds,el:t.$refs["check-guide-btn"],options:t.options}):("templet-plan"===t.module?a.a.when(!1):t.itemId&&t.sectionId?n.a.hasChildSectionCheckItem(t.itemId,t.sectionId):t.itemId?n.a.hasChildCheckItem(t.itemId):a.a.when(!0)).then((function(e){e?d.openPopup({module:t.module,itemId:t.itemId,batchId:t.batchId,sectionId:t.sectionId,options:t.options}):h.a.openPopup({itemId:t.itemId,module:t.module})})))}))}}},b=Object(r.a)(v,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{ref:"check-guide-btn",staticClass:"header-btn",on:{click:function(e){t.openCheckGuide()}}},[i("icon",{attrs:{name:"nav-info"}})],1)}),[],!1,null,null,null);e.a=b.exports},f7ab:function(t,e,i){"use strict";var a=i("65e9").a,n=(i("f7d4"),i("17cc")),s=Object(n.a)(a,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.show?i("div",{ref:"synchronize-tip-bar",staticClass:"synchronize-tip-bar"},[i("icon",{attrs:{name:"caution"}}),t.waitUploadNum?i("span",[t._v("您有"+t._s(t.waitUploadNum)+"条数据待上传")]):t._e(),!t.waitUploadNum&&t.hasChanged?i("span",[t._v("有新数据")]):t._e(),t._v("\n  ，下拉可"+t._s(t.waitUploadNum?"上传":"刷新")+"\n")],1):t._e()}),[],!1,null,"66826030",null);e.a=s.exports},f7d4:function(t,e,i){"use strict";i("2d6e")},f996:function(t,e,i){"use strict";i("2ddf")},fa50:function(t,e,i){"use strict";i("9251");var a=i("e2a7"),n=i("e7b6").a,s=(i("d57d"),i("17cc")),o=Object(s.a)(n,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("van-popup",{style:{height:"70%"},attrs:{position:"bottom"},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[i("div",{staticClass:"popup-title van-hairline--bottom"},[i("div",{staticClass:"left-button",on:{click:function(e){t.show=!1}}},[t._v("取消")]),i("div",{staticClass:"title-name"},[t._v("要显示的桩基类型")]),i("div",{staticClass:"right-button",on:{click:t.confirm}},[t._v("确定")])]),i("scroller",{staticClass:"popup-content"},[i("van-collapse",{model:{value:t.activeNames,callback:function(e){t.activeNames=e},expression:"activeNames"}},t._l(t.options,(function(e,a){return i("van-collapse-item",{key:a,attrs:{title:e.name,name:e.id}},t._l(e.subitem,(function(e,a){return i("div",{key:a,staticClass:"item-checkbox",class:{"van-hairline--top":a}},[i("van-checkbox",{on:{change:function(i){t.setValue(i,e.id)}},model:{value:e.checked,callback:function(i){t.$set(e,"checked",i)},expression:"subItem.checked"}},[t._v(t._s(e.name))])],1)})))})))],1)],1)],1)}),[],!1,null,"a03eccbc",null).exports,r=(i("8cf5"),i("04f3")),c=i("6bf2"),l=i.n(c),p={components:{PilePicker:o},props:{checkItemList:{type:Array,default:function(){return[]}}},data:function(){return{backButtonEvent:null,show:!1,dateList:Object.freeze([{value:1,label:"全部",active:!0},{value:2,label:"上周",active:!1},{value:3,label:"本周",active:!1},{value:4,label:"上月",active:!1},{value:5,label:"本月",active:!1},{value:6,label:"自定义",active:!1}]),dateType:1,startDate:"",endDate:"",start:new Date,end:new Date,showTime:!1,type:"start",currentDate:"",minDate:"",maxDate:"",confirmFn:function(){},selectedPileTypes:[]}},computed:{isIOSBezelLess:function(){return this.$store.state.app.isIOSBezelLess},selectedPileTypesText:function(){var t=this.selectedPileTypes.length;return 0===t?"请选择":"已选".concat(t,"项")}},methods:{moment:l.a,backEvent:function(){this.close(),this.backButtonEvent&&(Object(r.c)(this.backButtonEvent),this.backButtonEvent=null)},dateTagChange:function(t){this.dateType=t.value,6!==t.value&&this.getSelTimes(t.value),6===t.value&&(this.showTime=!0,this.start=this.startDate?new Date(this.startDate):new Date,this.end=this.endDate?new Date(this.endDate):new Date,this.currentDate="start"===this.type?this.start:this.end,console.log("this.currentDate",this.currentDate),this.setDateRange())},getSelTimes:function(t){var e,i;switch(t){case 1:e="",i="";break;case 2:e=l()().subtract(parseInt(l()().format("E"))+6,"days").format("YYYY-MM-DD"),i=l()().subtract(parseInt(l()().format("E")),"days").format("YYYY-MM-DD");break;case 3:e=l()().weekday(1).format("YYYY-MM-DD"),i=l()().format("YYYY-MM-DD");break;case 4:e=l()().month(l()().month()-1).startOf("month").format("YYYY-MM-DD"),i=l()().month(l()().month()-1).endOf("month").format("YYYY-MM-DD");break;case 5:e=l()().startOf("month").format("YYYY-MM-DD"),i=l()().format("YYYY-MM-DD")}this.startDate=e,this.endDate=i},setDateRange:function(){var t=(new Date).getFullYear(),e=t-10,i=t+10,a=l()("".concat(e,"-01-01")).startOf("year").format("YYYY-MM-DD"),n=l()("".concat(i,"-01-01")).endOf("year").format("YYYY-MM-DD");"start"===this.type?(this.minDate=new Date(l()(a).format("YYYY-MM-DD")),this.maxDate=new Date(l()(this.end).format("YYYY-MM-DD"))):(this.minDate=new Date(l()(this.start).format("YYYY-MM-DD")),this.maxDate=new Date(l()(n).format("YYYY-MM-DD")))},toggleTime:function(t){this.type=t,this.currentDate="start"===t?this.start:this.end,this.setDateRange()},customDate:function(t){"start"===this.type?this.start=l()(t).format("YYYY-MM-DD"):this.end=l()(t).format("YYYY-MM-DD")},setSelectedPileTypes:function(t){t&&(this.selectedPileTypes=t)},selectDate:function(){console.log(this.start,this.end),this.startDate=l()(this.start).format("YYYY-MM-DD"),this.endDate=l()(this.end).format("YYYY-MM-DD"),this.showTime=!1},open:function(t){this.selectedPileTypes=t.selectedPileTypes||[],this.confirmFn=t.onConfirm,this.dateType=t.dateType||1,this.startDate=t.startDate||"",this.endDate=t.endDate||"",this.show=!0,this.backButtonEvent=Object(r.a)(this.backEvent)},close:function(){this.show=!1},onConfirm:function(){var t={currentCheckItem:this.selectedPileTypes,dateType:this.dateType,startDate:this.startDate?l()(this.startDate).format("YYYY-MM-DD"):"",endDate:this.endDate?l()(this.endDate).format("YYYY-MM-DD"):""};this.confirmFn&&this.confirmFn(t),this.close()},openSearchByCheckItem:function(){this.checkItemList.length?this.$refs["pile-picker"].open():a.a.alert("桩基类型为空")}}},d=(i("2c6f"),Object(s.a)(p,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("van-popup",{style:{width:"100%",height:"100%"},attrs:{position:"right","get-container":"body"},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[i("page-content",{class:{"iOS-bezel-less":t.isIOSBezelLess},attrs:{"show-bar-left":"",title:"筛选","on-close":t.backEvent}},[i("div",{staticClass:"filter-wrap"},[i("div",{staticClass:"title"},[t._v("提交时间")]),i("div",{staticClass:"button-box date-box"},t._l(t.dateList,(function(e,a){return i("div",{key:a,staticClass:"date",class:{active:e.value===t.dateType},on:{click:function(i){t.dateTagChange(e)}}},[t._v(t._s(e.label))])})))]),i("div",{staticClass:"pile-type-select-item",on:{click:t.openSearchByCheckItem}},[i("div",{staticClass:"label"},[t._v("桩基类型")]),i("div",{staticClass:"select-content"},[i("span",{staticClass:"selected-pile-text",class:{active:t.selectedPileTypes.length>0}},[t._v(t._s(t.selectedPileTypesText))]),i("icon",{staticClass:"arrow-right",attrs:{name:"arrow-right"}})],1)])]),i("app-button-group",{attrs:{"fixed-bottom":""}},[i("app-button",{on:{click:t.onConfirm}},[t._v("\n            确认\n        ")])],1),i("van-popup",{style:{height:"40%"},attrs:{position:"bottom","get-container":"body",round:""},model:{value:t.showTime,callback:function(e){t.showTime=e},expression:"showTime"}},[i("div",{staticClass:"popup-toolbar bg-white border-bottom"},[i("div",{staticClass:"popup-cancel",on:{click:function(e){t.showTime=!1}}},[t._v("取消")]),i("div",{staticClass:"popup-title"},[t._v("筛选")]),i("div",{staticClass:"popup-confirm",on:{click:t.selectDate}},[t._v("确定")])]),i("div",{staticClass:"tabs-date bg-white"},[i("div",{staticClass:"tabs-start-date",class:{"filter-date-current":"start"===t.type},on:{click:function(e){t.toggleTime("start")}}},[t._v("\n            "+t._s(t.moment(t.start).format("YYYY-MM-DD"))+"\n            ")]),i("div",[t._v("~")]),i("div",{staticClass:"tabs-start-date",class:{"filter-date-current":"end"===t.type},on:{click:function(e){t.toggleTime("end")}}},[t._v("\n            "+t._s(t.moment(t.end).format("YYYY-MM-DD"))+"\n            ")])]),i("van-datetime-picker",{attrs:{type:"date","show-toolbar":!1,"min-date":t.minDate,"max-date":t.maxDate},on:{change:function(e){t.customDate(t.currentDate)}},model:{value:t.currentDate,callback:function(e){t.currentDate=e},expression:"currentDate"}})],1),i("pile-picker",{ref:"pile-picker",attrs:{current:t.selectedPileTypes,"check-list":t.checkItemList},on:{selected:t.setSelectedPileTypes}})],1)}),[],!1,null,"145a7a3f",null));e.a=d.exports},fc72:function(t,e,i){"use strict";i("47df")}}]);