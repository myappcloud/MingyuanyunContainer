(window.webpackJsonp_module_entry_zjapp_=window.webpackJsonp_module_entry_zjapp_||[]).push([["chunk-3b91cbcc","chunk-0b5b35be","chunk-b1eec014"],{"0732":function(t,e,a){var i=a("81f2");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);(0,a("85cb").default)("1b5b07de",i,!0,{sourceMap:!1,shadowMode:!1})},"0cb6":function(t,e,a){(t.exports=a("690e")(!1)).push([t.i,".zjapp .problem-detail-header[data-v-0901aadd]{display:flex;align-items:center;justify-content:center;height:40px;padding:0 15px;line-height:40px;background-color:#f2f2f2}.zjapp .problem-detail-header .status[data-v-0901aadd]{flex:1;height:16px;line-height:16px;border-left:5px solid #ddd;padding-left:5px;color:#111;font-size:16px}.zjapp .problem-detail-header .status-red[data-v-0901aadd]{border-color:#ff3d3d}.zjapp .problem-detail-header .status-blue[data-v-0901aadd]{border-color:#4275e8}.zjapp .problem-detail-header .status-green[data-v-0901aadd]{border-color:#0bc666}.zjapp .problem-detail-header .status-orange[data-v-0901aadd]{border-color:#fc8b01}.zjapp .problem-detail-header .status-black[data-v-0901aadd]{border-color:#333}.zjapp .problem-detail-header .status-gray[data-v-0901aadd]{border-color:#999}.zjapp .problem-detail-header .return[data-v-0901aadd],.zjapp .problem-detail-header .timeout[data-v-0901aadd],.zjapp .problem-detail-header .urgent[data-v-0901aadd]{display:block;padding:0 5px;margin-left:6px;height:16px;line-height:16px;color:#fff;font-size:12px;border-radius:2px;-webkit-border-radius:2px}.zjapp .problem-detail-header .urgent[data-v-0901aadd]{background-color:#ff3d3d}.zjapp .problem-detail-header .timeout[data-v-0901aadd]{background-color:#954cfe}.zjapp .problem-detail-header .return[data-v-0901aadd]{background-color:#fc8b01}.zjapp .problem-detail-header .operat[data-v-0901aadd]{height:40px;line-height:40px;white-space:nowrap;font-size:16px;color:#6b7ba9}",""])},1304:function(t,e,a){"use strict";var i=a("c5a7");e.__esModule=!0,e.SlotsMixin=void 0;var n=i(a("329b")).default.extend({methods:{slots:function(t,e){void 0===t&&(t="default");var a=this.$slots,i=this.$scopedSlots[t];return i?i(e):a[t]}}});e.SlotsMixin=n},1700:function(t,e,a){"use strict";a("9bd1")},"19a9":function(t,e,a){"use strict";a("7d4e")},"1bc5":function(t,e,a){(t.exports=a("690e")(!1)).push([t.i,'.zjapp .number-input[data-v-3efcb2a2]{position:relative;display:inline-block;vertical-align:top;width:61px;height:30px;border:1px solid #e5e5e5;border-radius:3px;text-align:center;font-size:14px;color:#333}@media screen and (min-width:320px){.zjapp .number-input[data-v-3efcb2a2]{width:50px}}@media screen and (min-width:360px){.zjapp .number-input[data-v-3efcb2a2]{width:58px}}@media screen and (min-width:375px){.zjapp .number-input[data-v-3efcb2a2]{width:61px}}.zjapp .text[data-v-3efcb2a2]{position:relative;display:inline-block;vertical-align:top;width:100%;height:100%;line-height:28px;overflow:hidden}.zjapp .value[data-v-3efcb2a2]{position:absolute;top:50%;right:0;margin-top:-14px;min-width:100%;height:28px;color:inherit}.zjapp .placeholder[data-v-3efcb2a2],.zjapp .value[data-v-3efcb2a2]{line-height:28px;pointer-events:none}.zjapp .placeholder[data-v-3efcb2a2]{display:inline-block;vertical-align:top;width:100%;height:100%;color:#b2b2b2}.zjapp .number-input-focus[data-v-3efcb2a2]{border-color:#4275e8;box-shadow:0 0 8px 0 rgba(66,117,232,.37)}.zjapp .icon-minus[data-v-3efcb2a2]{position:absolute;top:-9px;right:-9px;width:18px;height:18px;border-radius:9px;background-color:#ff4546}.zjapp .icon-minus[data-v-3efcb2a2]:before{content:"";position:absolute;left:4px;top:8px;width:10px;height:2px;background-color:#fff}.zjapp .icon-minus[data-v-3efcb2a2]:after{content:"";position:absolute;left:-5px;top:-5px;width:28px;height:28px;border-radius:9px}.zjapp .unqualified[data-v-3efcb2a2]{color:#ff5050;background-color:#fff3f3!important}.zjapp .number-input-select-all .value-handle[data-v-3efcb2a2]{background-color:#cbdaf9}',""])},"1f63":function(t,e,a){"use strict";a("7434")},2064:function(t,e,a){"use strict";e.__esModule=!0,e.addUnit=function(t){if(!(0,i.isDef)(t))return;return t=String(t),(0,n.isNumber)(t)?t+"px":t};var i=a("b7b4"),n=a("f24f")},"25ca":function(t,e,a){"use strict";a("2acc")},"27c4":function(t,e,a){var i=a("db6b2");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);(0,a("85cb").default)("42e360af",i,!0,{sourceMap:!1,shadowMode:!1})},2939:function(t,e,a){(t.exports=a("690e")(!1)).push([t.i,".zjapp .page-scroll[data-v-74102c05]{flex:1;overflow:auto;padding-bottom:100px;transform:translateZ(0)}.zjapp .sublist[data-v-74102c05]{padding-left:25px;padding-top:1px;background-color:#fff}.zjapp .sublist>.sublist[data-v-74102c05]{padding-left:10px;padding-top:0}",""])},"29be":function(t,e,a){"use strict";(function(t){a("5ab2"),a("6d57"),a("e10e");var i=a("28f8"),n=(a("cc57"),a("163d"),a("07d2")),s=a("a5c6"),o=a("6144");function r(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,i)}return a}function c(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?r(Object(a),!0).forEach((function(e){Object(i.a)(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):r(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}e.a={name:"SingleSelect",components:{Item:n.a},props:{title:{type:String,default:""},pageTitle:{type:String,default:""},placeholder:{type:String,default:""},value:{type:Object,default:function(){return{}}},options:{type:Array,default:function(){return[]}},optionsDisabled:{type:Array,default:function(){return[]}},required:{type:Boolean,default:!0},mode:{type:String,default:"edit"},editabled:{type:Boolean,default:!0},memory:{type:Boolean,default:!1},autoSelect:{type:Boolean,default:!1},beforeOpen:{type:Function,default:function(){}},searchBar:{type:Boolean,default:!0},grouping:{type:String,default:""},autoOpen:{type:Boolean,default:!1},rightBtn:{type:String,default:""},rightBtnEvent:{type:Function,default:function(){return 0}},ifToggle:{type:Boolean,default:!1},formCheck:{type:Boolean,default:!1},editorAddData:{type:Boolean,default:!1},lineLimit:{type:[Number,String],default:1}},data:function(){return{memoryKey:this.$route.name+encodeURI(this.title)}},watch:{options:function(){this.setSelected()}},mounted:function(){this.setSelected()},methods:{openSelect:function(){var e=this;if(this.editabled){var a=this.beforeOpen();a&&a.then&&t.isFunction(a.then)?a.then((function(t){!1!==t&&e.openPopup()})):!1!==a&&this.openPopup()}},openPopup:function(){var e=this;if(this.optionsDisabled&&this.optionsDisabled.length){var a={};t.each(this.optionsDisabled,(function(t){t.id&&(a[t.id]=t)})),t.each(this.options,(function(t,i){a[t.id]?e.options[i].disabled=!0:e.options[i].disabled=!1}))}s.a.openPopup({title:this.pageTitle||"选择"+this.title,selected:this.value,options:this.options,required:this.required,searchBar:this.searchBar,grouping:this.grouping,autoOpen:this.autoOpen,rightBtn:this.rightBtn,ifToggle:this.ifToggle,lineLimit:this.lineLimit,editorAddData:this.editorAddData,onSelect:function(a){var i=t.cloneDeep(e.value);a=t.isArray(a)?t.map(a,(function(t){return c({},t)})):c({},a),e.$emit("input",a,i),e.$emit("onSelect",a,i)},rightBtnEvent:function(a){var i=t.cloneDeep(e.value);e.$emit("rightBtnEvent",a,i)}})},closePopup:function(){s.a.closePopup()},onSelect:function(t){o.a.saveObject(this.memoryKey,t,o.a.level.user),this.$emit("input",t[0]),this.$emit("onSelect",t[0])},setSelected:function(){var e=o.a.getObject(this.memoryKey,o.a.level.user);!1===this.editabled||t.isEmpty(this.options)||(t.isEmpty(this.value)?this.memory&&!t.isEmpty(e)&&t.some(this.options,{id:e.id})&&(this.$emit("input",e),this.autoSelect&&this.$emit("onSelect",e)):this.autoSelect&&this.$emit("onSelect",this.value))}}}}).call(this,a("391c"))},"2acc":function(t,e,a){var i=a("e7ac");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);(0,a("85cb").default)("c9c3cdb6",i,!0,{sourceMap:!1,shadowMode:!1})},"2c76":function(t,e,a){"use strict";a("c070")},"2dd6":function(t,e,a){(t.exports=a("690e")(!1)).push([t.i,".zjapp .single-item[data-v-6920dde7]{min-height:44px}.zjapp .single-item>div[data-v-6920dde7]{display:flex}.zjapp .single-item>div>span[data-v-6920dde7]{flex:1;overflow:hidden;text-overflow:ellipsis;display:-webkit-box;-webkit-box-orient:vertical}.zjapp .single-item>div>span[data-v-6920dde7] label{color:#4174e9}.zjapp .single-item i[data-v-6920dde7]{line-height:24px;font-size:24px;color:#4275e8}.zjapp .single-item .disabled-item[data-v-6920dde7]{color:#aaa}",""])},"2ddb":function(t,e,a){(t.exports=a("690e")(!1)).push([t.i,".zjapp .supplier-editor[data-v-e465319c]{margin-bottom:10px;padding:8px;display:flex;justify-content:space-between;align-items:center;height:52px;color:#4275e8;background-color:#fff}.zjapp .supplier-editor .icon[data-v-e465319c]{border-left:1px solid #c8c8c8;padding-left:12px}.zjapp .supplier-editor .icon-edit[data-v-e465319c]{color:#c8c8c8;font-size:18px}.zjapp .supplier-editor .icon-qualified[data-v-e465319c]{color:#4275e8}.zjapp .supplier-editor .margin-r[data-v-e465319c]{margin-right:10px}.zjapp .list-title[data-v-e465319c]{position:relative;top:0;color:#888;font-size:14px;line-height:30px;min-height:40px;margin-bottom:0;margin-top:0;padding:8px 16px 2px}.zjapp .search-item>div[data-v-e465319c]{padding-right:35px}.zjapp .search-item i[data-v-e465319c]{position:absolute;color:#ccc;font-size:26px;right:0;top:50%;transform:translateY(-50%)}.zjapp .van-popup--right[data-v-e465319c]{width:100%;height:100%}[data-v-e465319c] .van-cell__title{color:#4174e9;font-weight:700}[data-v-e465319c] .van-collapse-item__content{transform:translateZ(0);padding:0 0 0 25px}[data-v-e465319c] .van-collapse-item__content .van-cell{padding-left:0}",""])},3050:function(t,e,a){"use strict";e.__esModule=!0,e.default=void 0;e.default={name:"姓名",tel:"电话",save:"保存",confirm:"确认",cancel:"取消",delete:"删除",complete:"完成",loading:"加载中...",telEmpty:"请填写电话",nameEmpty:"请填写姓名",confirmDelete:"确定要删除么",telInvalid:"请填写正确的电话",vanContactCard:{addText:"添加联系人"},vanContactList:{addText:"新建联系人"},vanPagination:{prev:"上一页",next:"下一页"},vanPullRefresh:{pulling:"下拉即可刷新...",loosing:"释放即可刷新..."},vanSubmitBar:{label:"合计："},vanCoupon:{valid:"有效期",unlimited:"无使用门槛",discount:function(t){return t+"折"},condition:function(t){return"满"+t+"元可用"}},vanCouponCell:{title:"优惠券",tips:"使用优惠",count:function(t){return t+"张可用"}},vanCouponList:{empty:"暂无优惠券",exchange:"兑换",close:"不使用优惠",enable:"可使用优惠券",disabled:"不可使用优惠券",placeholder:"请输入优惠码"},vanAddressEdit:{area:"地区",postal:"邮政编码",areaEmpty:"请选择地区",addressEmpty:"请填写详细地址",postalEmpty:"邮政编码格式不正确",defaultAddress:"设为默认收货地址",telPlaceholder:"收货人手机号",namePlaceholder:"收货人姓名",areaPlaceholder:"选择省 / 市 / 区"},vanAddressEditDetail:{label:"详细地址",placeholder:"街道门牌、楼层房间号等信息"},vanAddressList:{add:"新增地址"}}},"3156b":function(t,e,a){"use strict";a("163d");var i={name:"SingleSelectItem",props:{item:{type:Object,default:function(){return{id:"",name:""}}},checked:{type:Boolean,default:!1},renderField:{type:String,default:"name"},lineLimit:{type:[Number,String],default:1}},methods:{selectItem:function(t){t.disabled||this.$emit("click",t)}}},n=(a("9788"),a("17cc")),s=Object(n.a)(i,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("van-cell",{staticClass:"single-item",attrs:{clickable:!0},on:{click:function(e){t.selectItem(t.item)}}},[a("span",{class:{"disabled-item":t.item.disabled},style:{"-webkit-line-clamp":"unlimited"===t.lineLimit?"initial":t.lineLimit},domProps:{innerHTML:t._s(t.item[t.renderField])}}),t.checked?a("van-icon",{attrs:{name:"success"}}):t._e()],1)}),[],!1,null,"6920dde7",null);e.a=s.exports},3455:function(t,e,a){(t.exports=a("690e")(!1)).push([t.i,".zjapp .number-keyboard-con[data-v-7fdd42c6]{position:absolute;left:0;bottom:0;width:100%;padding:4px 0;background-color:#fafafa;box-shadow:0 -4px 8px 0 rgba(0,0,0,.08);-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.zjapp .ios-bezel-less[data-v-7fdd42c6]{padding-bottom:34px}.zjapp .keyboard-row[data-v-7fdd42c6]{display:flex}.zjapp .keys[data-v-7fdd42c6]{flex:1;height:48px;line-height:48px;text-align:center;font-size:18px;margin:4px;border:1px solid rgba(5,5,5,.07);border-radius:8px;background-color:#fff;padding:0}.zjapp .keys-add[data-v-7fdd42c6],.zjapp .keys-next[data-v-7fdd42c6],.zjapp .keys-prev[data-v-7fdd42c6]{font-size:14px;color:#4275e8}.zjapp .keys-add[data-v-7fdd42c6]{height:104px;line-height:104px;flex:initial}.zjapp .keys-ok[data-v-7fdd42c6]{font-size:14px;color:#999}.zjapp .keys-delete[data-v-7fdd42c6]{color:#999}.zjapp .icon[data-v-7fdd42c6]{pointer-events:none}.zjapp .icon-keyboard-close[data-v-7fdd42c6]{font-size:20px;color:#999}.zjapp .icon-keyboard-delete[data-v-7fdd42c6]{vertical-align:top;margin-top:13px;font-size:14px;color:#333}.zjapp .activing[data-v-7fdd42c6]{background-color:#ececec}.zjapp .disabled[data-v-7fdd42c6]{color:#999}.zjapp .right-btns[data-v-7fdd42c6]{width:25%}.zjapp .col[data-v-7fdd42c6],.zjapp .right-btns[data-v-7fdd42c6]{display:flex;flex-direction:column}.zjapp .col[data-v-7fdd42c6]{justify-content:center;align-items:center;height:104px;line-height:36px}",""])},3869:function(t,e,a){"use strict";a("6d57");var i=a("0287"),n=a("7bac"),s={defaultDraft:Object(i.a)({key:function(t){return t=t||this.options,"".concat(i.a.keys.PROBLEM_RECTIFICATION,"_").concat(t.bizId)}}),createPrimaryKeys:function(t){return function(e){return e.primaryKeys=e.primaryKeys||{},e.primaryKeys.uuId===t.uuId}},getBizList:function(t){var e="".concat(i.a.keys.PROBLEM_RECTIFICATION,"_").concat(t);return n.a.getUserKey(e)}};e.a=s},"3bf2":function(t,e,a){"use strict";(function(t){a("e697"),a("163d"),a("e2a7");var i=a("8593"),n=a("e68e"),s=a("cd05"),o=a("07d2"),r=a("3c64"),c=a("da95");e.a={name:"ProcessAcceptDetail",components:{NumberInput:i.a,ItemImgList:n.a,UserSelect:s.a,Item:o.a,ItemTextarea:r.a},props:{detailData:Object,userOptions:Array,mode:String,processMode:Number,acceptId:{type:String,default:""},isEditStatus:{type:Boolean,default:!1},checkType:{type:String,default:"check"},disEditForce:{type:Boolean,default:!1}},data:function(){return{viewSize:$rootScope.viewSize,flag:!1}},computed:{emptyText:function(){var t=["暂无记录"];return this.detailData&&this.detailData.detailsError&&(t=["该检查项未设置主控或一般项目"]),t}},activated:function(){this.detailData&&t.each(this.detailData.process_type,(function(e){t.each(e.problem_values,(function(t){t.key=t.key||+new Date}))})),console.log(this.detailData)},methods:{removePoint:function(e,a,i){t.isArray(e.problem_values)||(e.problem_values=[]),e.problem_values.length<=1||this.$nextTick((function(){var n=e.problem_values.length-1,s=n>a?this.$refs["ipt-".concat(i,"-").concat(a)]:this.$refs["ipt-".concat(i,"-").concat(n-1)],o=n>a?e.problem_values[a].key:e.problem_values[n-1].key;t.find(s,(function(t){return t.mykey===o})).openKeyboard(),e.problem_values.splice(a,1)}))},addPoint:function(e,a,i){t.isArray(e.problem_values)||(e.problem_values=[]),e.problem_values.splice(a+1,0,{val:"",key:+new Date}),this.$nextTick((function(){console.log(this.$refs["ipt-".concat(i,"-").concat(a+1)],e.problem_values);var n=this.$refs["ipt-".concat(i,"-").concat(a+1)],s=t.last(t.filter(e.problem_values,(function(t){return void 0===t.isExceed}))).key;t.find(n,(function(t){return t.mykey===s})).openKeyboard()}))},problemValueChange:function(){this.$emit("problemValueChange",this.detailData)},setDetailStatus:function(t,e,a){console.log("detail, status, identityData",t,e,a),this.$emit("setDetailStatus",t,e,a)},detailFilter:function(t,e){return t.filter((function(t){return t.proj_type===e}))},togglePoint:function(t){if("string"==typeof t.is_open&&"true"===t.is_open?t.is_open=!0:"string"==typeof t.is_open&&"false"===t.is_open&&(t.is_open=!1),t.is_open=!t.is_open,t.id&&t.accept_status_id)return c.a.uploadCheckpointDetail(t.id,t.is_open)},changeOperator:function(t,e){console.log("user",t),this.$emit("changeOperator",t,e)},changeCc:function(t){console.log("user",t),this.$emit("changeCc",t)},changeAcceptor:function(t){this.$emit("changeAcceptor",t)}}}}).call(this,a("391c"))},"3c64":function(t,e,a){"use strict";a("163d");var i={name:"ItemTextarea",components:{},props:{value:{type:String,default:""},placeholder:{type:String,default:""},maxlength:{type:Number,default:200},borderBottom:{type:Boolean,default:!0}},data:function(){return{textareaHeight:40,isLock:!1,blurTime:null}},computed:{lastLength:function(){var t=this.value&&this.value.length||0,e=this.maxlength-t;return e>0?e:0}},mounted:function(){var t=this;this.$nextTick((function(){t.textareaHeight=t.$refs.rule&&t.$refs.rule.offsetHeight||40}))},methods:{onfocus:function(){var t=(new Date).getTime();this.blurTime&&t-this.blurTime<300&&window.cordova&&window.cordova.plugins&&window.cordova.plugins.Keyboard&&(this.$refs.input.blur(),window.cordova.plugins.Keyboard.close()),this.blurTime=null,this.$emit("focus")},onblur:function(){this.blurTime=(new Date).getTime(),this.$emit("blur")},setStatus:function(t){console.log(t),this.isLock=t},oninput:function(t){var e=this;setTimeout((function(){if(!e.isLock){var a=t.target.value;a.length>e.maxlength&&(a=a.substring(0,e.maxlength),e.$refs.input.value=a),e.$refs.rule.innerText=a,e.textareaHeight=e.$refs.rule&&e.$refs.rule.offsetHeight+20,e.$emit("input",a),e.$emit("change",a)}}),0)}}},n=(a("2c76"),a("17cc")),s=Object(n.a)(i,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"item-textarea",class:{"border-bottom":t.borderBottom}},[a("div",{staticClass:"item-textarea-content"},[a("textarea",{ref:"input",style:{height:t.textareaHeight+"px"},attrs:{placeholder:t.placeholder},domProps:{value:t.value},on:{focus:t.onfocus,blur:t.onblur,compositionstart:function(e){t.setStatus(!0)},compositionend:function(e){t.setStatus(!1)},input:t.oninput}}),a("div",{ref:"rule",staticClass:"rule"},[t._v("\n      "+t._s(t.value)+"\n    ")]),t.maxlength!==1/0?a("p",{staticClass:"counter"},[t._v("\n      "+t._s(t.lastLength)+"\n    ")]):t._e()])])}),[],!1,null,null,null);e.a=s.exports},"3cd8":function(t,e,a){var i=a("5c19");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);(0,a("85cb").default)("67c16200",i,!0,{sourceMap:!1,shadowMode:!1})},"414f":function(t,e,a){"use strict";(function(t){a("6d57");var i=a("0287"),n=a("7bac"),s=a("19e7"),o={defaultDraft:Object(i.a)({key:function(t){return t=t||this.options,"".concat(i.a.keys.PROCESS_ACCEPT_V3,"_").concat(t.bizId)}}),createPrimaryKeys:function(t){return function(e){return e.primaryKeys=e.primaryKeys||{},e.primaryKeys.uuId===t.uuId}},getBizList:function(t){var e="".concat(i.a.keys.PROCESS_ACCEPT_V3,"_").concat(t);return n.a.getUserKey(e)},getMd5OnlyId:function(e){var a,i,n,o,r="process-accept-v3"+encodeURI(e);return a=Object(s.b)(r),i=a,n=[],o=0,t.each([8,4,4,4,12],(function(t){n.push(i.substr(o,t)),o+=t})),i=n.join("-")}};e.a=o}).call(this,a("391c"))},"43c9":function(t,e,a){(t.exports=a("690e")(!1)).push([t.i,".zjapp .multiple-place-content[data-v-440d4b89]{z-index:99999;max-height:134px;border-bottom:1px solid #ececec;overflow:auto;scroll-behavior:smooth}.zjapp .multiple-place-content.-fixed[data-v-440d4b89]{position:absolute;left:0;right:0;top:0}.zjapp .selected[data-v-440d4b89]{position:relative;display:flex;padding:13px 15px;font-size:15px;background-color:#fff;overflow:scroll}.zjapp .selected label[data-v-440d4b89]{margin-right:10px;color:#999;white-space:nowrap}.zjapp .select-wrap[data-v-440d4b89]{flex:1;background-color:#fff;overflow:auto;scroll-behavior:smooth}.zjapp .van-collapse[data-v-440d4b89] .van-cell{align-items:center}.zjapp .van-collapse[data-v-440d4b89] .icon{margin-right:10px;vertical-align:middle}.zjapp .van-collapse[data-v-440d4b89] .van-collapse-item__content{padding:0}.zjapp .group.-border-bottom[data-v-440d4b89]{border-bottom:1px solid #ececec}.zjapp .group-name[data-v-440d4b89]{font-size:14px;color:#999;height:34px;padding-top:15px}.zjapp .element-list[data-v-440d4b89]{display:flex;flex-wrap:wrap}.zjapp .element[data-v-440d4b89]{min-width:75px;height:28px;line-height:28px;text-align:center;margin:10px 6px 10px 0;padding:0 10px;background:#fff;border-radius:100px;color:#333;font-size:14px;border:1px solid #dcdcdc}.zjapp .element.all[data-v-440d4b89]{margin-right:15px}.zjapp .element.disabled[data-v-440d4b89]{background:#ececec;color:#999;border-color:#ececec}.zjapp .element.checked[data-v-440d4b89]{background:#4275e8;color:#fff;border-color:#4275e8}.zjapp .element.disabled-all[data-v-440d4b89]{background:#ececec;color:#999;border-color:#ececec}",""])},4412:function(t,e,a){"use strict";e.__esModule=!0,e.createBEM=function(t){return function(e,a){return e&&"string"!=typeof e&&(a=e,e=""),e=i(t,e,"__"),a?[e,n(e,a)]:e}};function i(t,e,a){return e?t+a+e:t}function n(t,e){if("string"==typeof e)return i(t,e,"--");if(Array.isArray(e))return e.map((function(e){return n(t,e)}));var a={};return e&&Object.keys(e).forEach((function(i){a[t+"--"+i]=e[i]})),a}},"4aef":function(t,e,a){"use strict";var i=a("dd16").a,n=a("17cc"),s=Object(n.a)(i,(function(){var t=this.$createElement;return(this._self._c||t)("span",{class:this.classSet[this.status]},[this._v(this._s(this.text||this.status))])}),[],!1,null,null,null);e.a=s.exports},"4d1b":function(t,e,a){"use strict";var i=a("c5a7");e.__esModule=!0,e.default=void 0;var n=i(a("329b")),s=a("53a5"),o=i(a("3050")),r=n.default.prototype,c=n.default.util.defineReactive;c(r,"$vantLang","zh-CN"),c(r,"$vantMessages",{"zh-CN":o.default});var l={messages:function(){return r.$vantMessages[r.$vantLang]},use:function(t,e){var a;r.$vantLang=t,this.add(((a={})[t]=e,a))},add:function(t){void 0===t&&(t={}),(0,s.deepAssign)(r.$vantMessages,t)}};e.default=l},5079:function(t,e,a){"use strict";a.r(e);var i=a("6fc8").a,n=(a("25ca"),a("17cc")),s=Object(n.a)(i,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("page-content",{attrs:{title:t.checkitemData.name||"...","show-go-root":!t.isFromReport||"Report"}},[t.isLoading?t._e():a("check-guide",{attrs:{slot:"header-bar-right","item-id":t.checkItemId},slot:"header-bar-right"}),a("van-tabs",{staticClass:"process-accept-v3-tabs",attrs:{animated:"",swipeable:""},on:{change:t.onTabChange},nativeOn:{click:function(e){return t.onClickTab(e)}},model:{value:t.tabIndex,callback:function(e){t.tabIndex=e},expression:"tabIndex"}},[a("van-tab",{attrs:{disabled:t.computedBatchFlowDisable,title:"验收信息"}},[!t.isLoading&&t.isHasNetwork?a("scroller",{ref:"scroller"},[t.isLoading?t._e():a("problem-detail-header",{staticClass:"bg-white",attrs:{status:t.currentStatus,"status-text":t.currentStatus}}),a("detail-header-content",{attrs:{"checkitem-data":t.checkitemData,"place-data":t.placeData,construct:t.construct,"process-mode":t.process_mode,"accept-id":t.accept_id,"batch-name":t.batchName,"is-batch-operation":t.isBatchOperation,"batch-data":t.batchData}}),t.accept_id?t._e():a("single-select",{staticClass:"mt10",attrs:{title:"施工单位",editabled:!t.accept_id,options:t.contractorOptions},model:{value:t.construct,callback:function(e){t.construct=e},expression:"construct"}}),a("div",{staticClass:"mt10"}),t.processNodes&&t.processNodes.length?a("div",{staticClass:"process-accept-v3-nodes"},[a("van-tabs",{on:{disabled:t.onClickDisabledNode,change:t.changeNode},model:{value:t.currentNode,callback:function(e){t.currentNode=e},expression:"currentNode"}},t._l(t.processNodes,(function(e,i){return a("van-tab",{key:i,attrs:{border:!1,ellipsis:!1,disabled:t.isCurrentNodeDisable(e,i)}},[a("template",{slot:"title"},[a("div",{staticClass:"node-content",class:{"node-content-first":0===i,"node-content-complete":"已验收"===e.status},on:{touchmove:t.preventTouch}},[a("div",{staticClass:"node-avatar",style:{"background-image":"url("+(i>0?t.getThumbnail(e.operator_headimg_url):"")+")"}},[0===i?a("icon",{staticClass:"icon-avatar-start",attrs:{name:"baoyan"}}):t._e(),"已验收"===e.status?a("icon",{staticClass:"icon-avatar-complete",attrs:{name:"yiwancheng"}}):t._e(),!e.operator_headimg_url&&i>0?a("span",{staticClass:"node-avatar-name",class:{"node-avatar-complete-name":"已验收"===e.status}},[t._v(t._s(e.operator_user_info&&e.operator_user_info.name?e.operator_user_info.name.substr(-2):"暂无"))]):t._e()],1),a("div",{staticClass:"node-name"},[a("span",[t._v(t._s(e.name))])]),i>0?a("div",{staticClass:"node-line"}):t._e()])]),a("process-accept-detail",{attrs:{"detail-data":e,"user-options":t.userOptions,"process-mode":Number(t.process_mode),"accept-id":t.accept_id,"is-edit-status":t.isEditStatus,"dis-edit-force":!t.showCtrlBtns},on:{problemValueChange:t.problemValueChange,setDetailStatus:t.setDetailStatus,changeOperator:t.changeOperator,changeCc:t.changeCc,changeAcceptor:t.changeAcceptor}}),t.hasDraft&&t.current_draft_process_id===e.process_id&&!t.spotCheckShowTab?a("app-button-group",[a("app-button",{attrs:{type:"text",name:"删除此草稿"},on:{click:function(e){t.delDraft()}}})],1):t._e()],2)})))],1):t._e()],1):t._e(),0===Number(t.tabIndex)?[t.showCtrlBtns?a("app-button-group",{staticClass:"process-accept-v3-btns",attrs:{"fixed-bottom":"",seamless:!t.isEditStatus}},[t.isFormV3List&&!t.isEditStatus?a("app-button",{class:{"btn-color-gray":t.isBatchOperation},staticStyle:{width:"50%"},attrs:{plain:""},on:{click:t.save}},[t._v("\n            暂存\n          ")]):t._e(),a("app-button",{ref:"processButton",on:{click:function(e){t.submit("process")}}},[t._v(t._s(t.accept_id&&!t.isEditStatus?"通过":"提交"))])],1):t._e(),!t.isLoading&&t.currentNode===t.editNodeIndex&&t.processNodes&&t.processNodes.length&&!t.isEditStatus?a("app-button-group",{attrs:{"fixed-bottom":""}},[a("app-button",{on:{click:t.editInfo}},[t._v("修改")])],1):t._e()]:t._e(),t.isLoading||!t.isHasNetwork?a("loading-status",{attrs:{"is-loading":t.isLoading,"is-empty":!t.isHasNetwork,"empty-text":t.emptyTips||"暂无数据",type:t.emptyTips?"error":"common","content-height":t.viewSize.contentHeight}}):t._e()],2),a("van-tab",{attrs:{disabled:t.isBatchOperation,title:"整改问题"}},[a("scroller",{attrs:{"has-next":t.listLimit<t.problemList.length,"is-empty":!t.problemList.length},on:{loadNext:t.loadList}},[t.listLoading?t._e():t._l(t.problemListShow,(function(e,i){return a("item-list",{key:i,attrs:{"is-timeout":e.is_timeout,"is-show-new-status":!0,title:e.name,detail:e.remark||"",footer:t.modifyDate(e),status:e.status,img:e.image_file||"static/photo-empty.png","status-text":"已关闭"===e.status?"非正常关闭":e.status},on:{click:function(a){t.editDetail(e.id,e.uuId)}}})})),a("loading-status",{attrs:{"is-loading":t.listLoading,"is-empty":!t.problemList||!t.problemList.length,type:t.problemEmptyTips?"error":"common","empty-text":t.emptyTips||t.problemEmptyTips||"暂无数据"}})],2),1===Number(t.tabIndex)?a("app-button-group",{attrs:{"fixed-bottom":""}},[a("app-button",{attrs:{disabled:!t.accept_id},on:{click:t.addProblem}},[t._v("新增问题")])],1):t._e()],1),t.spotCheckShowTab?a("van-tab",{attrs:{disabled:t.computedBatchSampleDisable,title:"抽验信息"}},[a("scroller",[(t.spotCheckEdit||t.spotCheckView)&&t.isHasNetwork?[t.isLoading?t._e():a("problem-detail-header",{staticClass:"bg-white",attrs:{status:t.currentStatus,"status-text":t.currentStatus}}),a("detail-header-content",{attrs:{"checkitem-data":t.checkitemData,"place-data":t.placeData,construct:t.construct,"process-mode":t.process_mode,"accept-id":t.accept_id,"is-batch-operation":t.isBatchOperation,"batch-data":t.batchData}}),a("process-accept-detail",{staticClass:"mt10",attrs:{"check-type":"spotcheck","detail-data":t.spotcheck,"user-options":t.userOptions,"process-mode":Number(t.process_mode),"accept-id":t.accept_id,"is-edit-status":t.isEditStatus,"dis-edit-force":!t.showSpotCheckEditBtns},on:{problemValueChange:t.problemValueChange,setDetailStatus:t.setDetailStatus}}),t.hasDraft&&2===Number(t.tabIndex)?a("app-button-group",[a("app-button",{attrs:{type:"text",name:"删除此草稿"},on:{click:function(e){t.delDraft()}}})],1):t._e()]:t._e(),(t.spotCheckEdit||t.spotCheckView)&&t.isHasNetwork?t._e():a("loading-status",{attrs:{"is-empty":!t.spotCheckEdit&&!t.spotCheckView,type:t.isHasNetwork?"common":"error","empty-text":t.isHasNetwork?"暂无抽验记录":"当前无网络"}})],2),t.showSpotCheckEditBtns?a("app-button-group",{attrs:{seamless:"","fixed-bottom":""}},[t.isFormV3List?a("app-button",{class:{"btn-color-gray":t.isBatchOperation},staticStyle:{width:"50%"},attrs:{plain:""},on:{click:t.save}},[t._v("\n          暂存\n        ")]):t._e(),a("app-button",{ref:"spotcheckButton",on:{click:function(e){t.submit("spotcheck")}}},[t._v("通过")])],1):t._e()],1):t._e()],1),a("van-dialog",{attrs:{theme:"round","confirm-button-text":"我知道了",message:"数据后台处理中，预计需1~2分钟可先离开当前界面，稍后回来查看结果?"},model:{value:t.isShowBatchOpertionComfirmDialog,callback:function(e){t.isShowBatchOpertionComfirmDialog=e},expression:"isShowBatchOpertionComfirmDialog"}})],1)}),[],!1,null,"700082ea",null);e.default=s.exports},"515e":function(t,e,a){"use strict";var i=a("329b"),n=a("f1e4").a,s=(a("fe9e"),a("17cc")),o=Object(s.a)(n,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("transition",{attrs:{name:"slide-right"}},[t.show?a("page-content",{class:{"content-not-empty":t.content.length},attrs:{mode:"dialog",title:"检查指引","on-close":t.closePopup}},[t.isLoading?t._e():a("div",{staticClass:"check-guide-detail-hd border-bottom"},[a("h2",{staticClass:"check-guide-detail-title pb10"},[t._v(t._s(t.title))])]),!t.isLoading&&t.content.length?a("div",{staticClass:"check-guide-detail-content"},t._l(t.content,(function(e,i){return a("p",{key:i},[e.isImg&&e.src?a("img",{class:{"img-not-ready":!e.ready,error:"rejected"===e.status},attrs:{src:t.getThumbnail(e)},on:{error:function(a){t.imgError(e,i)},click:function(a){t.imgClick(e)}}}):t._e(),e.isImg?t._e():a("span",[t._v("\n          "+t._s(e.val)+"\n        ")])])}))):t._e(),a("loading-status",{attrs:{"is-loading":t.isLoading,"is-empty":!t.content.length,"empty-text":"PC端未设置检查指引"}})],1):t._e()],1)}),[],!1,null,"43042f0d",null).exports,r=!1;r||(r=new(i.default.extend(o))({el:document.createElement("div")}),document.body.appendChild(r.$el));e.a=r},"53a5":function(t,e,a){"use strict";e.__esModule=!0,e.deepAssign=s;var i=a("b7b4"),n=Object.prototype.hasOwnProperty;function s(t,e){return Object.keys(e).forEach((function(a){!function(t,e,a){var o=e[a];(0,i.isDef)(o)&&(n.call(t,a)&&(0,i.isObj)(o)&&"function"!=typeof o?t[a]=s(Object(t[a]),e[a]):t[a]=o)}(t,e,a)})),t}},"574c":function(t,e,a){(t.exports=a("690e")(!1)).push([t.i,".zjapp .item-textarea{background-color:#fff;padding:5px 15px}.zjapp .item-textarea-content{position:relative}.zjapp .item-textarea .rule,.zjapp .item-textarea textarea{width:100%;min-height:40px;line-height:20px;font-size:16px;padding:0;border:none}.zjapp .item-textarea .rule{position:absolute;top:0;left:0;visibility:hidden;word-break:break-all}.zjapp .item-textarea .counter{text-align:right;margin:0 0 -5px 0;height:15px;line-height:15px;color:#b2b2b2;font-size:12px}",""])},5750:function(t,e,a){"use strict";a.d(e,"h",(function(){return o})),a.d(e,"e",(function(){return r})),a.d(e,"f",(function(){return c})),a.d(e,"i",(function(){return l})),a.d(e,"a",(function(){return d})),a.d(e,"g",(function(){return p})),a.d(e,"j",(function(){return u})),a.d(e,"d",(function(){return h})),a.d(e,"b",(function(){return m})),a.d(e,"c",(function(){return f})),a.d(e,"r",(function(){return b})),a.d(e,"k",(function(){return g})),a.d(e,"p",(function(){return _})),a.d(e,"l",(function(){return v})),a.d(e,"q",(function(){return y})),a.d(e,"o",(function(){return x})),a.d(e,"m",(function(){return k})),a.d(e,"n",(function(){return C}));var i=a("5e8d"),n=a("162a"),s=a("bcc78");function o(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(i.a)().then((function(){var e=s.a.processAcceptv3ItemList.url;return n.a.request(e,t)}))}function r(t){return Object(i.a)().then((function(){var e=s.a.processAcceptv3BidsectionBuildingUnit.url;return n.a.request(e,t)}))}function c(t){return Object(i.a)().then((function(){var e=s.a.processAcceptv3BidsectionInspectionLot.url;return n.a.request(e,t)}))}function l(t){return Object(i.a)().then((function(){var e=s.a.processAcceptv3ItemPlaceList.url;return n.a.request(e,t)}))}function d(t){return Object(i.a)().then((function(){var e=s.a.processAcceptv3AddInspectionLot.url;return n.a.post(e,null,t)}))}function p(t){return Object(i.a)().then((function(){var e=s.a.processAcceptv3Info.url;return n.a.request(e,t)}))}function u(t){return Object(i.a)().then((function(){var e=s.a.processAcceptv3ItemProcess.url;return n.a.request(e,t)}))}function h(t){return Object(i.a)().then((function(){var e=s.a.processAcceptv3ChangeUser.url;return n.a.post(e,null,t)}))}function m(t){return Object(i.a)().then((function(){var e=s.a.processAcceptv3ChangeCc.url;return n.a.post(e,null,t)}))}function f(t){return Object(i.a)().then((function(){var e=s.a.processAcceptv3ChangeProcessAcceptor.url;return n.a.post(e,null,t)}))}function b(t){return Object(i.a)().then((function(){var e=s.a.processAcceptv3SpotcheckAccept.url;return n.a.post(e,null,t)}))}function g(t){return Object(i.a)().then((function(){var e=s.a.processAcceptv3Accept.url;return n.a.post(e,null,t)}))}function _(t){return Object(i.a)().then((function(){var e=s.a.processAcceptv3BatchFirstAccept.url;return n.a.post(e,null,t)}))}function v(t){return Object(i.a)().then((function(){var e=s.a.processAcceptv3BatchAccept.url;return n.a.post(e,null,t)}))}function y(t){return Object(i.a)().then((function(){var e=s.a.processAcceptv3BatchSpotcheckAccept.url;return n.a.post(e,null,t)}))}function x(t){return Object(i.a)().then((function(){var e=s.a.processAcceptv3BatchChangeUser.url;return n.a.post(e,null,t)}))}function k(t){return Object(i.a)().then((function(){var e=s.a.processAcceptv3BatchChangeCc.url;return n.a.post(e,null,t)}))}function C(t){return Object(i.a)().then((function(){var e=s.a.processAcceptv3BatchChangeProcessAcceptor.url;return n.a.post(e,null,t)}))}},"5a71":function(t,e,a){"use strict";var i=a("29be").a,n=a("17cc"),s=Object(n.a)(i,(function(){var t=this,e=t.$createElement;return(t._self._c||e)("item",{class:t.required,attrs:{label:t.title,text:t.value&&t.value.id?t.value.name:"view"===t.mode?"无":"",mode:t.mode,editabled:t.editabled,placeholder:t.required?t.placeholder||"请选择":"选填","form-check":t.formCheck},on:{click:t.openSelect}})}),[],!1,null,null,null);e.a=s.exports},"5c19":function(t,e,a){(t.exports=a("690e")(!1)).push([t.i,".zjapp .content-not-empty[data-v-43042f0d] .layout-content{display:auto;overflow:auto;padding-bottom:100px}.zjapp .check-guide-detail-hd[data-v-43042f0d]{margin-left:30px;padding:25px 30px 5px 0}.zjapp .check-guide-detail-title[data-v-43042f0d]{margin:0;line-height:20px;font-size:18px;color:#111;font-weight:700;word-break:break-all}.zjapp .check-guide-detail-info[data-v-43042f0d]{line-height:20px;font-size:14px;color:#8c8c8c}.zjapp .check-guide-detail-content[data-v-43042f0d]{padding:30px;line-height:30px;color:#333;font-size:16px}.zjapp .check-guide-detail-content p[data-v-43042f0d]{margin-bottom:30px;min-height:1em}.zjapp .check-guide-detail-content img[data-v-43042f0d]{max-width:100%}.zjapp .check-guide-detail-content .img-not-ready[data-v-43042f0d]{width:80px;height:auto}.zjapp .error[data-v-43042f0d]{max-width:50%}",""])},6147:function(t,e,a){"use strict";e.__esModule=!0,e.createNamespace=function(t){return t="van-"+t,[(0,n.createComponent)(t),(0,i.createBEM)(t),(0,s.createI18N)(t)]};var i=a("4412"),n=a("7e06"),s=a("65af")},"65af":function(t,e,a){"use strict";var i=a("c5a7");e.__esModule=!0,e.createI18N=function(t){var e=(0,s.camelize)(t)+".";return function(t){for(var a=(0,n.get)(o.default.messages(),e+t)||(0,n.get)(o.default.messages(),t),i=arguments.length,s=new Array(i>1?i-1:0),r=1;r<i;r++)s[r-1]=arguments[r];return"function"==typeof a?a.apply(void 0,s):a}};var n=a("b7b4"),s=a("a1aa"),o=i(a("4d1b"))},6718:function(t,e,a){"use strict";a.d(e,"a",(function(){return o}));a("163d"),a("cc57");var i=a("b7b4"),n={name:"SwipeTab",props:{title:{type:String}},data:function(){return{offset:0,style:{},bem:Object(i.createNamespace)("swipe-item")[1](),parent:{}}},computed:{index:function(){return this.parent.tabs.indexOf(this)}},beforeCreate:function(){this.$parent.swipes.push(this)},created:function(){this.findParent("SwipeTabs")},destroyed:function(){this.$parent.swipes.splice(this.$parent.swipes.indexOf(this),1)},mounted:function(){var t=this,e=this.parent.tabs,a=this.parent.$slots.default.indexOf(this.$vnode);e.splice(-1===a?e.length:a,0,this),this.$nextTick((function(){var e=t.$parent,a=e.vertical,i=e.computedWidth,n=e.computedHeight;t.style={width:i+"px",height:a?i+"px":n+"px",transform:"translate".concat(a?"Y":"X","(").concat(t.offset,"px)")}}))},methods:{findParent:function(t){for(var e=this.$parent;e;){if(e.$options.name===t){this.parent=e;break}e=e.$parent}}}},s=a("17cc"),o=Object(s.a)(n,(function(){var t=this.$createElement;return(this._self._c||t)("div",this._g({class:this.bem,style:this.style},this.$listeners),[this._t("default")],2)}),[],!1,null,null,null).exports,r={name:"SwipeTabs",model:{prop:"tabIndex",event:"change"},props:{tabIndex:{type:Number,default:0},markType:{type:String,default:"line"},showTabs:{type:Boolean,default:!0},touchable:{type:Boolean,default:!0}},data:function(){return{curIndex:0,initIndex:0,tabs:[],tabScrollVersion:null}},computed:{tabsPadding:function(){return Math.max(24-4*this.tabs.length,0)},markLeft:function(){var t=(100-2*this.tabsPadding)/this.tabs.length;return this.tabsPadding+(this.curIndex+.5)*t}},watch:{tabIndex:function(t){t!==this.curIndex&&(this.curIndex=t,this.$refs.swipe.swipeTo(t,{immediate:!0}))},curIndex:function(){this.scrollTabsTocurrent()}},created:function(){this.initIndex=this.tabIndex,this.curIndex=this.tabIndex},activated:function(){this.initIndex=this.tabIndex,this.curIndex=this.tabIndex},mounted:function(){this.$nextTick(this.scrollTabsTocurrent)},methods:{changeIndex:function(t){this.$refs.swipe.swipeTo(t)},onChange:function(t){this.curIndex=t,this.$emit("change",t)},scrollTabsTocurrent:function(){var t=this.$refs["tabs-scroll"],e=this.$refs["tab-point"]?this.$refs["tab-point"][this.curIndex]:null;if(t&&e){var a=t.getBoundingClientRect(),i=e.getBoundingClientRect(),n=i.left-a.left,s=a.right-i.right;n<0&&this.tabScrollBy(n),s<0&&this.tabScrollBy(-s)}},tabScrollBy:function(t){var e=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:200,i=this.$refs["tabs-scroll"];if(i){var n=i.scrollLeft,s=n+t,o=Math.round(a/16.7),r=t/o,c=n,l=this.tabScrollVersion=+new Date;return n===s?Promise.resolve():new Promise((function(t){!function a(){window.requestAnimationFrame((function(){l===e.tabScrollVersion&&(c+=r,i.scrollLeft=c,n<s&&c<s||n>s&&c>s?a():(i.scrollTop=s,t()))}))}()}))}}}},c=(a("bcf4"),Object(s.a)(r,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"swipe-tabs"},[t.showTabs?["line"===t.markType?a("div",{staticClass:"tabs border-bottom",style:{padding:"0 "+Math.max(24-4*t.tabs.length,0)+"%"}},[t._l(t.tabs,(function(e){return a("div",{key:e.index,staticClass:"tab",class:{"tab-current":e.index===t.curIndex},on:{click:function(a){t.changeIndex(e.index)}}},[t._v("\n        "+t._s(e.title)+"\n      ")])})),a("div",{staticClass:"mark-line",style:{left:t.markLeft+"%"}})],2):t._e(),"point"===t.markType?a("div",{staticClass:"tabs-point border-bottom"},[a("div",{ref:"tabs-scroll",staticClass:"tabs-scroll"},t._l(t.tabs,(function(e){return a("div",{key:e.index,ref:"tab-point",refInFor:!0,staticClass:"tab-point",class:{"tab-current":e.index===t.curIndex},on:{click:function(a){t.changeIndex(e.index)}}},[t._v("\n          "+t._s(e.title)+"\n        ")])})))]):t._e()]:t._e(),t._t("fixed"),a("van-swipe",{ref:"swipe",attrs:{"initial-swipe":t.initIndex,"show-indicators":!1,duration:250,loop:!1,touchable:t.touchable},on:{change:t.onChange}},[t._t("default")],2)],2)}),[],!1,null,"025feb99",null));e.b=c.exports},"6c2c":function(t,e,a){"use strict";var i=a("0e4d"),n=a("94ef"),s=function(){function t(e){Object(i.a)(this,t),this.data=e,this.buildData()}return Object(n.a)(t,[{key:"buildData",value:function(){this.data.template_extension=JSON.parse(this.data.template_extension||"{}")}}]),t}();e.a=s},"6fc8":function(t,e,a){"use strict";(function(t){a("5ab2"),a("e10e"),a("06a2"),a("c904"),a("9a33"),a("6d57"),a("6a61");var i=a("2e91"),n=(a("e204"),a("8cf2"),a("28f8")),s=(a("e697"),a("cc57"),a("ed63"),a("163d"),a("fd50")),o=a("6bf2"),r=a.n(o),c=a("ed08"),l=a("07d2"),d=a("774b"),p=a("1b7e"),u=a("e2a7"),h=a("6718"),m=a("5a71"),f=a("9428"),b=a("9715"),g=a("37d5"),_=(a("91c5"),a("f369")),v=a("fa4f"),y=a("da1c"),x=a("aab3"),k=a("bcc7"),C=a("bc69"),w=a("6144"),j=a("3bd5"),D=a("06f6"),S=a("5ff0"),O=a("3869"),I=a("4ad6"),z=a("3122"),N=a("7f8d"),P=a("5750"),E=a("7fc0"),$=a("d474"),B=a("414f"),T=(a("6c2c"),a("019f"));function A(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,i)}return a}function L(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?A(Object(a),!0).forEach((function(e){Object(n.a)(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):A(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var M,R,F=B.a.defaultDraft,H=null;e.a={components:{Item:l.a,SingleSelect:m.a,Scroller:d.a,ProcessAcceptDetail:f.a,CheckGuide:_.a,SwipeTabs:h.b,SwipeTab:h.a,ItemList:v.a,ProblemDetailHeader:y.a,DetailHeaderContent:function(){return a.e("chunk-3fd61a6e").then(a.bind(null,"8b99"))}},data:function(){return{tabIndex:0,proj_id:"",process_mode:1,currentUserId:j.a.getUser().user_id,processDetails:{},isFormV3List:!1,currentNode:0,defaultNodeIndex:"",editNodeIndex:"",accept_id:"",current_draft_process_id:"",current_process_id:"",next_process_id:"",isEditStatus:!1,processNodes:{},spotcheck:{},currentStatus:"",currentDataStatus:"",tabStatus:"",isAccept:!1,userOptions:[],viewSize:$rootScope.viewSize,isLoading:!0,placeData:{},checkitemData:{},checkItemId:"",construct:{},contractorOptions:[],bgClass:{"待报验":"bg-purple b-color","验收中":"bg-orange2 b-color","已验收":"bg-green2 b-color","草稿":"bg-purple b-color"},listLoading:!0,problemList:[],listLimit:10,isFromReport:!1,isHasNetwork:!0,emptyTips:"",problemEmptyTips:"",batchId:"",batchName:"",bidsection_id:"",bidsection_name:"",hasDraft:!1,uuId:"",primaryKeys:{},spotCheckEdit:!1,spotCheckView:!1,spotCheckShowTab:!1,batchData:[],isBatchOperation:!1,operationType:null,isShowBatchOpertionComfirmDialog:!1}},computed:{tabsWidth:function(){return window.innerWidth/2},problemListShow:function(){return this.problemList&&this.problemList.length?this.problemList.slice(0,this.listLimit):[]},showCtrlBtns:function(){return!this.isLoading&&this.currentNode===this.defaultNodeIndex&&this.processNodes&&this.processNodes.length||this.isEditStatus},showSpotCheckEditBtns:function(){return this.spotCheckEdit&&2===Number(this.tabIndex)},computedBatchFlowDisable:function(){return this.isBatchOperation&&this.operationType===N.g.SAMPLE},computedBatchSampleDisable:function(){return this.isBatchOperation&&this.operationType!==N.g.SAMPLE},computedIsBatchAcceptance:function(){return this.isBatchOperation&&this.operationType===N.g.ACCEPTANCE}},activated:function(){var t=this;if(this.$router.isBack)this.getProblemList();else{var e=this.$route.query,a=e.item_id,i=e.building_id,n=e.unit,s=e.floor,o=e.room_id,r=e.deliver_type,l=e.accept_id,d=e.isReport,p=e.batch_id,u=e.batch_name,h=e.bidsection_id,m=e.bidsection_name,f=e.uuId,b=e.batchData,g=e.operationType;this.batchData=b||[],this.isBatchOperation=!1,this.$nextTick((function(){t.isBatchOperation=!!b})),this.operationType=g,this.tabIndex=0,g===N.g.SAMPLE&&this.$nextTick((function(){t.tabIndex=2})),this.accept_id=l,this.isHasNetwork=!0,this.emptyTips="",this.problemEmptyTips="",this.isFromReport=d,this.batchId=p,this.batchName=u,this.bidsection_id=h,this.bidsection_name=m,this.hasDraft=!!f,this.uuId=f||c.a.uuid(),this.checkItemId=a,this.buildingId=i,this.unit=n,this.floor=s,this.room_id=o,this.proj_id=this.$store.state.global.currentProject.id,this.process_mode=Number(r),this.tabStatus="",this.current_process_id="",this.next_process_id="",this.spotCheckShowTab=!1,this.init()}},beforeRouteEnter:function(t,e,a){a((function(t){t.isFormV3List=["ProcessAcceptV3","zjapp-ProcessAcceptV3"].includes(e.name)}))},methods:{init:function(){var t=this;return this.isLoading=!0,this.currentNode=0,this.editNodeIndex="",this.isAccept=!1,this.defaultNodeIndex=this.accept_id?"":0,this.problemList=[],this.processNodes={},this.isEditStatus=!1,this.construct={},this.loadDetails().then((function(){t.accept_id||t.loadBaseInfo(t.buildingId,t.unit,t.floor,t.room_id,t.checkItemId)})).then((function(){t.getUserOptions()})).finally((function(){t.isLoading=!1}))},loadDetails:function(){var e=this;return p.a.getHasNetwork().then((function(t){if(!t)return e.isHasNetwork=!1,Promise.reject("当前无网络");e.isHasNetwork=!0})).then((function(){var t={};return e.accept_id?t.id=e.accept_id:t.item_id=e.checkItemId,e.accept_id?Object(P.g)(t):Object(P.j)(t)})).then((function(t){return e.currentDataStatus=t.status||"待报验",e.primaryKeys={uuId:e.uuId},H=B.a.createPrimaryKeys(e.primaryKeys),e.setMMKVModel(),F.get(H).then((function(a){if(a){e.spotcheck=a.spotcheck;var i=a.processNodes,n=!1;i=i.map((function(e){var i=t.process.find((function(t){return t.process_id===e.process_id}));return i?e.process_id===a.currentProcessId?(n=e.operator!==i.operator,L(L({},e),{},{__operator_is_change__:e.operator!==i.operator,__last_operator__:e.operator})):L(L({},i),{},{__operator_is_change__:e.operator!==i.operator,__last_operator__:e.operator}):e})),e.current_draft_process_id=a.currentProcessId,e.$set(t,"process",i),e.$set(t,"__current_operator_has_change__",n),e.$set(t,"placeData",a.placeData),e.$set(t,"__original_status__",t.status||"待报验"),e.$set(t,"__draft_current_process_id__",a.currentProcessId),e.$set(t,"__draft_status__",a.draftStatus),e.$set(t,"__has_spotcheck__",!!a.spotcheck),e.$set(t,"status",a.status),e.$set(t,"contractor_id",a.contractor_id),e.$set(t,"contractor_name",a.contractor_name),e.hasDraft=!0}else e.hasDraft=!1;return t}))})).then((function(a){(e.accept_id||a.contractor_id&&a.contractor_name)&&(e.construct={id:a.contractor_id,name:a.contractor_name}),e.accept_id&&(e.checkitemData={process_mode:e.process_mode,process_mode_real:e.process_mode,id:a.item_id,name:a.item_name,full_name:a.item_full_name},e.placeData={project_id:a.proj_id,project_name:a.proj_name,section_id:a.bidsection_id,section_name:a.bidsection_name,building_id:a.building_id,building_name:a.building_name,unit:a.unit||"",unit_name:a.unit?"单元"!==a.unit.substr(a.unit.length-2)?a.unit+"单元":a.unit:"",floor:a.floor,floor_name:a.floor?"层"!==a.floor.substr(a.floor.length-1)?a.floor+"层":a.floor:"",room_id:a.room_id||"",room_name:a.room_no||""},6===e.process_mode&&(e.batchId=a.inspection_lot_id,e.batchName=a.inspection_lot_name)),t.each(a.process,(function(i,n){i.status=i.status||"",i.mode="已验收"===i.status?"view":"edit",i.__operator_is_change__&&i.__last_operator__===e.currentUserId?i.isDisable=!1:i.isDisable=n>0&&"已验收"!==i.status&&e.currentUserId!==i.operator,i.acceptor_user=i.acceptor_user||[],i.next_process_operator=i.next_process_operator||{},i.cc_set=a.cc||[],i.remark=i.remark||"",i.hasMasterDetail=0,i.hasCommonDetail=0,i.process_id!==a.current_process_id||i.__operator_is_change__||e.currentUserId===i.operator&&(e.currentNode=n,e.defaultNodeIndex=n,e.isAccept=!0),i.operator_headimg_url=i.operator_user_info&&i.operator_user_info.headimg_url?i.operator_user_info.headimg_url:"",i.sum={commonStatus:i.common_status||"未验",lowest:i.measure_lowest_rate||"",masterStatus:i.master_status||"未验",status:"已验收"===i.status?"合格":"未验"},i.hasMasterNum=i.process_type.filter((function(t){return["1",1].includes(t.proj_type)})).length,i.hasCommonNum=i.process_type.filter((function(t){return["2",2].includes(t.proj_type)})).length,i.hasJudgeNum=i.process_type.filter((function(t){return["1",1].includes(t.accept_type)})).length,i.hasMeasureNum=i.process_type.filter((function(t){return["2",2].includes(t.accept_type)})).length,i.process_type&&i.process_type.length&&t.each(i.process_type,(function(t){if(t.status=t.status||"",t.rate=t.rate||"",t.accept_type=Number(t.accept_type),t.proj_type=Number(t.proj_type),e.setDetailStandard(t),t.problem_values)try{t.problem_values=JSON.parse(t.problem_values)}catch(t){}else 2===Number(t.accept_type)?t.problem_values=[{val:""}]:t.problem_values=[];1===t.proj_type?i.hasMasterDetail+=1:2===t.proj_type&&(i.hasCommonDetail+=1)})),i.process_checkpoint&&i.process_checkpoint.length&&t.each(i.process_checkpoint,(function(t){try{t.image_file=JSON.parse(t.image_file||"[]")}catch(t){}t.is_open=!0}))}));var i=a.process.findIndex((function(t){return"已验收"!==t.status}));return i>0&&a.process[i-1].operator===e.currentUserId&&(e.editNodeIndex=i-1),e.processNodes=a.process||[],e.currentStatus=a.status||"待报验",e.setSpotcheckAuthority(!a.__has_spotcheck__),e.currentStatus!==N.h||a.__has_spotcheck__||e.getSpotcheck(a.spotcheck,a.cc),e.processNodes&&!e.processNodes.length?u.a.notify("当前工序未设置验收流程，请在后台设置后再试。","知道了").then((function(){e.$router.go(-1)})):(e.processDetails=a,e.changeNode(e.currentNode),e.identityDataStatusHandler(e.processNodes[e.currentNode]),a)})).then((function(t){if(!t)return!1;var a=function(){u.a.confirm("验收信息已变，是否删除草稿并立即刷新",{okText:"立即刷新",cancelText:"下次再说"}).then((function(t){t&&(F.remove(H),e.init())}))};t.__current_operator_has_change__?a():"已验收"===t.__original_status__||"已抽验"===t.__original_status__?t.__original_status__!==t.__draft_status__&&a():t.current_process_id&&t.hasOwnProperty("__draft_current_process_id__")&&t.current_process_id!==t.__draft_current_process_id__&&a()})).then((function(){e.isAccept&&e.accept_id&&e.getProblemList(!0)})).catch((function(t){console.log(t),e.emptyTips=t.errmsg||t,u.a.alert(t.errmsg||t)}))},isCurrentNodeDisable:function(t,e){if(this.isBatchOperation){var a=t.isDisable||this.isEditStatus,i=Number(e)<Number(this.currentNode);return a||i}return t.isDisable||this.isEditStatus},loadBaseInfo:(R=Object(i.a)(regeneratorRuntime.mark((function t(e,a,i,n,s){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getCheckitemData(e,s);case 2:return t.next=4,this.getPlaceData(e,a,i,n);case 4:return t.next=6,this.getConstructorOptions();case 6:case"end":return t.stop()}}),t,this)}))),function(t,e,a,i,n){return R.apply(this,arguments)}),getSpotcheck:function(t,e){t.cc_set=e||[],this.spotcheck=b.a.getSpotcheckDetails(t)},setSpotcheck:function(){var e=t.cloneDeep(this.processNodes[this.processNodes.length-1]);e.mode="edit",e.acceptor_user=[],e.cc_set=this.processDetails.cc||[],e.remark="",e.status="",e.sum={commonStatus:N.i,lowest:"",masterStatus:N.i,status:N.i},e.process_type&&e.process_type.length&&t.forEach(e.process_type,(function(t){t.status="",t.rate="",t.problem_values.length&&(t.problem_values=[{val:""}])})),e.process_checkpoint&&e.process_checkpoint.length&&t.forEach(e.process_checkpoint,(function(t){t.image_file=[]})),this.spotcheck=e},setSpotcheckAuthority:(M=Object(i.a)(regeneratorRuntime.mark((function t(){var e,a,i,n=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=!(n.length>0&&void 0!==n[0])||n[0],t.next=3,b.a.getSpotCheckAuthority();case 3:a=t.sent,i=this.currentDataStatus,this.spotCheckShowTab=i===N.a||i===N.h,this.spotCheckEdit=[N.a,N.d].includes(i)&&a,this.spotCheckView=i===N.h,this.spotCheckEdit&&e&&this.setSpotcheck();case 9:case"end":return t.stop()}}),t,this)}))),function(){return M.apply(this,arguments)}),getDefaultContractor:function(){var t=this;return b.a.getSectionContractor(this.placeData.section_id).then((function(e){t.construct.id||(t.construct=e||{})}))},getCheckitemData:function(t,e){var a=this;return k.a.getCheckItem(e).then((function(t){t.process_mode_real=a.process_mode,a.checkitemData=t}))},getPlaceData:function(t,e,a,i){var n=this;return x.a.getBuildingInfo(t).then((function(t){var o=t[0]||{};return(i?D.default.getRoomById(i):s.a.when()).then((function(t){w.a.getObject("process-accept-v3-index-building",w.a.level.user);var s=w.a.getObject(C.a.HOME_PAGE_DEFAULT_PROJECT,w.a.level.user)||{};n.placeData={project_id:o.proj_id,project_name:o.proj_name,section_id:o.sec_id,section_name:o.sec_name,building_id:o.id,building_name:o.name,unit:e||"",unit_name:e?"单元"!==e.substr(e.length-2)?e+"单元":e:"",floor:a,floor_name:a?"层"!==a.substr(a.length-1)?a+"层":a:"",room_id:i||"",room_name:t?t.room_no:""},6===n.process_mode&&(n.placeData.project_id=s.id,n.placeData.project_name=s.name,n.placeData.section_id=n.bidsection_id,n.placeData.section_name=n.bidsection_name)}))}))},getConstructorOptions:function(){var t=this;return S.a.getContractorList(this.placeData.section_id).then((function(e){t.contractorOptions=e}))},getUserOptions:function(){var e=this;return g.default.getProjectUsers(this.proj_id,[31,32,33]).then((function(a){e.userOptions=t.clone(a)}))},changeNode:function(t){var e=this.processNodes[t];this.next_process_id=e.next_process_id,this.current_process_id=e.process_id},onClickDisabledNode:function(t){return this.isBatchOperation&&t<this.currentNode?this.process_mode===$.a.USER_DEFINED&&this.currentNode===t+1?u.a.alert("此节点验收后才可以查看"):u.a.alert("批量验收场景下不支持查看前置节点验收信息"):this.isEditStatus?u.a.alert("当前节点保存后，才可以切换"):u.a.alert("此节点验收后才可以查看")},problemValueChange:function(t){this.identityDataStatusHandler(t)},setDetailStatus:function(t,e,a){var i;i=t.status===e?"":e,this.$set(t,"status",i),this.identityDataStatusHandler(a)},identityDataStatusHandler:function(e){var a,i,n,s=this,o=[];t.isEmpty(e)||(t.each(e.process_type,(function(e){var a=[];2===e.accept_type?(t.each(e.problem_values,(function(t){s.hasVal(t.val)?"人工判断"===e.standard_symbol?t.isExceed=0===t.val:">"===e.standard_symbol?t.isExceed=t.val<=e.standard_min:"<"===e.standard_symbol?t.isExceed=t.val>=e.standard_max:t.isExceed=t.val<e.standard_min||t.val>e.standard_max:t.isExceed=!1})),(a=t.filter(e.problem_values,(function(t){return s.hasVal(t.val)}))).length?(e.rate=t.filter(a,{isExceed:!1}).length/a.length,o.push(e.rate)):e.rate=""):e.accept_type,e.problem_points=t.filter(a,{isExceed:!0}).length,e.measurement_points=a.length})),n=this.getDetailsEnterStatus(e),a=t.some(e.process_type,(function(t){return 1===t.proj_type&&(1===t.accept_type&&"不合格"===t.status||2===t.accept_type&&s.hasVal(t.rate)&&t.rate<1)})),i=t.some(e.process_type,(function(t){return 2===t.proj_type&&(1===t.accept_type&&"不合格"===t.status||2===t.accept_type&&s.hasVal(t.rate)&&t.rate<.8)})),e.sum={status:n.masterRecorded>0||n.commonRecorded>0?a||i?"不合格":"合格":"未验",masterStatus:n.masterRecorded>0?a?"不合格":"合格":"未验",commonStatus:n.commonRecorded>0?i?"不合格":"合格":"未验",lowest:t.isEmpty(o)?"":t.minBy(o)})},hasVal:function(t){return""!==t&&null!=t},getDetailsEnterStatus:function(e){var a=this,i={masterRecorded:0,masterEmpty:0,commonRecorded:0,commonEmpty:0};return t.each(e.process_type,(function(t){var e=1===t.accept_type&&a.hasVal(t.status)||2===t.accept_type&&a.hasVal(t.rate);1===t.proj_type?e?i.masterRecorded+=1:i.masterEmpty+=1:2===t.proj_type&&(e?i.commonRecorded+=1:i.commonEmpty+=1)})),i},setDetailStandard:function(t){var e;"±"===t.standard_symbol?(t.standard_min=-t.standard,t.standard_max=t.standard,t.standard_text=t.standard_symbol+t.standard):"+"===t.standard_symbol?(t.standard_min=0,t.standard_max=t.standard,t.standard_text=t.standard_symbol+t.standard):"-"===t.standard_symbol?(t.standard_min=-t.standard,t.standard_max=0,t.standard_text=t.standard_symbol+t.standard):"≥"===t.standard_symbol||">"===t.standard_symbol?(t.standard_min=t.standard,t.standard_max=1/0,t.standard_text=t.standard_symbol+t.standard):"≤"===t.standard_symbol||"<"===t.standard_symbol?(t.standard_min=-1/0,t.standard_max=t.standard,t.standard_text=t.standard_symbol+t.standard):"区间"===t.standard_symbol?(e=t.standard&&t.standard.split(",")||[],t.standard_min=e[0]||-1/0,t.standard_max=e[1]||1/0,t.standard_text="["+(t.standard_min===-1/0?"不限":t.standard_min)+","+(t.standard_max===1/0?"不限":t.standard_max)+"]"):"人工判断"===t.standard_symbol&&(t.standard_text="人工判断"),t.standard_min=parseFloat(t.standard_min),t.standard_max=parseFloat(t.standard_max)},detailFilter:function(t){return t.filter((function(t){return 1===t.proj_type}))},onClickTab:function(t){if(this.isBatchOperation)switch(t.target.innerText){case"整改问题":u.a.alert("批量操作模式下暂不支持查看和登记问题")}},onTabChange:function(t){1===t&&this.accept_id?this.getProblemList():this.listLoading=!1},editInfo:function(){this.isEditStatus=!0,this.processNodes[this.editNodeIndex].mode="edit"},submit:function(e){var a,n=this;if("process"===e)if(this.accept_id){var s=t.filter(this.processNodes,(function(t){return t.process_id===n.current_process_id}));a=s&&s.length?s[0]:{}}else a=this.processNodes[0];else a=this.spotcheck;var o=this.getDetailsEnterStatus(a),r="确定要提交？",c="提交",l="取消";if(this.construct.id)if(a.process_type&&a.process_type.length&&0===o.masterRecorded&&0===o.commonRecorded)u.a.alert("主控项或一般项至少填一项");else if(!t.filter(a.process_checkpoint,(function(t){return!t.image_file.length})).length||"dev"===APP_ENV)if(!a.next_process_id||a.next_process_operator.id){if(a.sum.status&&"不合格"!==a.sum.status)return(o.masterEmpty>0||o.commonEmpty>0)&&(r=o.masterEmpty>0?"有"+o.masterEmpty+"个主控项":"",r+=o.masterEmpty>0?o.commonEmpty>0?"和":"":"有",r+=o.commonEmpty>0?o.commonEmpty+"个一般项":"",r+="未填",c="继续提交",l="去填写"),u.a.confirm(r,{okText:c,cancelText:l}).then((function(t){return t?"process"===e?n.submitData(a):n.spotcheckAccept():Promise.reject()})).then(Object(i.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.isEditStatus){t.next=4;break}return n.hasDraft=!1,t.next=4,F.remove(H);case 4:case"end":return t.stop()}}),t)})))).then((function(){n.init()})).catch((function(t){return u.a.alert(t.errmsg||t)})).finally((function(){n.$refs.processButton&&n.$refs.processButton.setNormal()}));u.a.alert("当前总体结果不合格，不可发起验收")}else u.a.alert("请选择下一节点验收人");else u.a.alert("照片必填，请拍照");else u.a.alert("请选择施工单位")},submitData:function(e){var a=this,i=[],n=[];return this.$refs.processButton&&this.$refs.processButton.setActive(),t.each(e.process_checkpoint||[],(function(t){n.push(a.uploadImages(t.image_file).then((function(e){i.push({id:t.id,image_file:JSON.stringify(e)})})))})),s.a.all(n).then((function(){var n,s=[];t.each(e.process_type||[],(function(t){s.push({id:t.id,status:t.status,rate:t.rate,problem_values:JSON.stringify(t.problem_values)})}));var o={process_type_data:JSON.stringify(s),checkpoint_data:JSON.stringify(i),master_status:e.sum.masterStatus,common_status:e.sum.commonStatus,measure_lowest_rate:e.sum.lowest,remark:e.remark||""};if(a.accept_id)n=L({accept_id:a.accept_id,process_id:a.current_process_id},o);else{var r=[{unit:a.placeData.unit,floor:a.placeData.floor,room_id:a.placeData.room_id}],c=JSON.stringify(t.map(e.acceptor_user||[],"id")),l=JSON.stringify(t.map(e.cc_set||[],"id"));n=L({proj_id:a.proj_id,bidsection_id:a.placeData.section_id,item_id:a.checkItemId,building_id:a.placeData.building_id,place:JSON.stringify(r),process_mode:a.process_mode,next_process_operator:e.next_process_operator.id||"",acceptor_user:c,cc:l,contractor_id:a.construct.id||""},o)}return 6===a.process_mode&&(n.inspection_lot_id=a.batchId,n.inspection_lot_name=a.batchName),a.isBatchOperation?a.onSubmitBatchOpertion(n):Object(P.k)(n).then((function(t){!a.accept_id&&t.accept_id&&(a.accept_id=t.accept_id)}))}))},onSubmitBatchOpertion:function(t){var e=this,a=this.getPlaceDataForBatchData(),i=function(t,e){if(e===$.a.USER_DEFINED){var a=Object(T.a)(t);return{inspection_lots:a=a.map((function(t){return{inspection_lot_id:t.id,inspection_lot_name:t.name}}))}}return{}}(this.batchData,this.process_mode),n=function(t){switch(t){case N.g.INSPECTION:return P.p;case N.g.ACCEPTANCE:return P.l;case N.g.SAMPLE:return P.q}}(this.operationType),s=Object.assign({},{places:a},i,t);return this.isShowBatchOpertionComfirmDialog=!0,n(s).then((function(t){e.$router.go(-1),e.isShowBatchOpertionComfirmDialog=!1})).catch((function(t){-1===t.errcode&&u.a.notify(t.errmsg).then((function(){return e.$router.go(-1)}))})).finally((function(t){e.$refs.processButton&&e.$refs.processButton.setNormal()}))},getPlaceDataForBatchData:function(t){var e=this,a=this;return this.batchData.map((function(i){var n=i.unit,s=i.floor,o=i.room_id,r=i.current_process_id,c=i.next_process_id,l=i.accept_id,d=(i.room_no,i.name,function(t){var e=t.floorName,i=t.room_no,n=t.name;switch(a.process_mode){case $.a.HAS_HOUSEHOLDS:return i;case $.a.NON_UNIT_WHOLE_LAYER:case $.a.HAS_UNIT_WHOLE_LAYER:return e;case $.a.USER_DEFINED:return n;default:return""}}(i));switch(e.operationType){case N.g.INSPECTION:return{place_name:d,unit:n,floor:s,room_id:o};case N.g.ACCEPTANCE:return{place_name:d,accept_id:l,process_id:0===t?c:r};case N.g.SAMPLE:return{place_name:d,accept_id:l};default:return{place_name:d,unit:n,floor:s,room_id:o,process_id:r}}}))},spotcheckAccept:function(){var e=this,a=this.spotcheck,i=[],n=[];return this.$refs.spotcheckButton&&this.$refs.spotcheckButton.setActive(),t.each(a.process_checkpoint||[],(function(t){n.push(e.uploadImages(t.image_file).then((function(e){i.push({checkpoint_id:t.id,title:t.title,content:t.content,sort:t.sort,image_file:JSON.stringify(e)})})))})),s.a.all(n).then((function(){var n=[];t.each(a.process_type||[],(function(t){n.push({item_type_id:t.id,proj_type:t.proj_type,accept_type:t.accept_type,name:t.name,content:t.content,sort:t.sort,status:t.status,rate:t.rate,problem_values:JSON.stringify(t.problem_values),problem_points:t.problem_points,measurement_points:t.measurement_points,standard_symbol:t.standard_symbol||"",standard:t.standard||""})}));var s=t.map(a.acceptor_user,"id"),o=t.map(a.cc_set,"id"),r={accept_id:e.accept_id,project_type_data:JSON.stringify(n),checkpoint_data:JSON.stringify(i),master_status:a.sum.masterStatus,common_status:a.sum.commonStatus,measure_lowest_rate:a.sum.lowest,remark:a.remark||"",acceptor_user:JSON.stringify(s),cc:JSON.stringify(o)};return e.isBatchOperation?e.onSubmitBatchOpertion(r):Object(P.r)(r)}))},getThumbnail:function(t){try{return t?z.a.getThumbnailFromUrl(t):""}catch(t){return""}},uploadImages:function(e){var a=[];return t.each(e,(function(t){!t.url&&t.temp?a.push(z.a.uploadImage(t.temp).then((function(e){t.url=e,delete t.temp}))):delete t.temp,!t.videoUrl&&t.videoTemp?a.push(z.a.uploadImage(t.videoTemp).then((function(e){t.videoUrl=e,delete t.videoTemp}))):delete t.videoTemp})),Promise.all(a).then((function(){return e}))},preventTouch:function(t){t.stopPropagation()},loadList:function(){this.listLimit=this.listLimit+10},getProblemList:function(e){var a=this;return this.listLoading=!0,p.a.getHasNetwork().then((function(t){if(!t)return Promise.reject("当前无网络")})).then((function(){var t={biz_id:a.accept_id,module_code:"process-accept-v3"};return Object(E.g)(t)})).then((function(e){var i=r()().format("YYYY-MM-DD");return t.each(e,(function(t){t.is_timeout=t.repair_deadline<i,t.name=t.item_name})),a.problemList=e,a.listLoading=!1,a.getProblemDraftList().then((function(e){e&&e.length&&t.each(e,(function(t){var e=t.images&&t.images.length?t.images[0].temp:"",n=I.a.fixDataPath(e);a.problemList.unshift({id:"",name:a.checkitemData.full_name,status:"草稿",uuId:t.uuId,image_file:n,remark:t.remark||"",repair_deadline:t.deadline||i,is_timeout:!1})}))}))})).then((function(){if(e){var i=t.filter(a.problemList,(function(t){return"待整改"===t.status||"待复验"===t.status}));i&&i.length&&u.a.notify("当前有未闭合的问题，请先处理。","知道了").then((function(){a.tabIndex=1}))}})).catch((function(t){a.listLoading=!1,a.problemEmptyTips=t.errmsg||t,u.a.alert(t.errmsg||t)}))},changeOperator:function(t,e){var a=this,i={accept_id:this.accept_id,process_id:Number(e)?this.current_process_id:this.next_process_id,operator:t.id||""};this.computedIsBatchAcceptance?(Object.assign(i,{places:this.getPlaceDataForBatchData(e)}),Object(P.n)(i).then((function(){Number(e)&&a.init()}))):Object(P.c)(i).then((function(){Number(e)&&a.init()}))},changeCc:function(e){var a={accept_id:this.accept_id,cc:JSON.stringify(t.map(e||[],"id"))};this.computedIsBatchAcceptance?(Object.assign(a,{places:this.getPlaceDataForBatchData()}),Object(P.m)(a)):Object(P.b)(a)},changeAcceptor:function(e){var a={accept_id:this.accept_id,process_id:this.current_process_id,acceptor_user:JSON.stringify(t.map(e||[],"id"))};this.computedIsBatchAcceptance?(Object.assign(a,{places:this.getPlaceDataForBatchData()}),Object(P.o)(a)):Object(P.d)(a)},getProblemDraftList:function(){return O.a.getBizList(this.accept_id)},modifyDate:function(t){return"整改期限："+r()(t.repair_deadline).format("YYYY-MM-DD")},addProblem:function(){this.problemDetail(!0)},editDetail:function(t,e){this.problemDetail(!1,t,e)},problemDetail:function(t,e,a){var i,n={moduleCode:"process-accept-v3",biz_id:this.accept_id};i=L(t?{checkItemId:this.checkItemId,projId:this.proj_id,building_id:this.placeData.building_id,unit:this.placeData.unit,floor:this.placeData.floor,room_id:this.placeData.room_id,bidsection_id:this.placeData.section_id,deliverType:this.process_mode}:{id:e||"",uuId:a||""},n),console.log({querys:i}),this.$router.push({name:"ProblemRectification",query:i})},save:function(){var t=this;return this.isBatchOperation?(u.a.alert("批量操作模式下不可暂存"),null):(this.setMMKVModel(),F.save(H).then((function(){return t.hasDraft=!0,t.current_draft_process_id=t.current_process_id,u.a.alert("暂存成功")})))},setMMKVModel:function(){var t=this.processNodes,e=this.batchName,a="",i="";6===this.process_mode?(a=this.batchId,i=this.checkItemId+this.bidsection_id+this.process_mode):(a=this.buildingId+(this.unit||"")+(this.floor||"")+(this.room_id||""),i=this.checkItemId+this.buildingId+(this.unit||"")+this.process_mode);var n=B.a.getMd5OnlyId(i),s=B.a.getMd5OnlyId(a),o={primaryKeys:this.primaryKeys,bizId:n,uuId:this.uuId,status:"草稿",acceptId:s,processNodes:t,name:e,currentProcessId:this.current_process_id,draftStatus:this.currentDataStatus,placeData:this.placeData,spotcheck:this.spotcheck,contractor_id:this.construct.id,contractor_name:this.construct.name};F.config({model:o,bizId:n,modelKeys:["primaryKeys","processNodes","uuId","bizId","acceptId","status","name","currentProcessId","draftStatus","placeData","spotcheck","contractor_id","contractor_name"]})},delDraft:function(){var t=this;u.a.confirm("确定要删除此草稿吗？",(function(){return F.remove(H).then((function(){return u.a.alert("删除成功").then((function(){t.hasDraft=!1,t.$router.go(-1)}))}))}))}}}}).call(this,a("391c"))},7434:function(t,e,a){var i=a("0cb6");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);(0,a("85cb").default)("f6a1180a",i,!0,{sourceMap:!1,shadowMode:!1})},"79f7":function(t,e,a){"use strict";(function(t){var i=a("e89f"),n=a("1df9"),s=a("774b"),o=a("e2a7");e.a={components:{PageContent:n.a,Scroller:s.a},mixins:[i.a],data:function(){return{actionTabs:[],show:!1,title:"",type:90,options:[],current:null,selectedRoom:"",selectedRoomNumber:1,allChecked:!1,allDisabled:!1,callback:null,checkStatus:{partSelected:"-indeterminate",fullSelected:"-checked"}}},methods:{openPopup:function(e){this.show=!0,this.title=e.title,this.type=e.type,this.options=t.cloneDeep(e.options),this.current=e.current,this.selectedRoom="",this.selectedRoomNumber=1,this.allChecked=!1,this.allDisabled=!1,this.callback=e.callback,this.actionTabs=[],this.getSelectedRoom(),this.$emit("open")},closePopup:function(){this.show=!1,this.$emit("close")},getSelected:function(){var e=[];return 99===this.type&&t.each(this.options,(function(a){t.each(a.floors,(function(i){t.each(i.rooms,(function(t){t.checked&&(t.unit=a.unit,t.unit_name=a.unit_name,t.floor=i.floor,t.floor_name=i.floor_name,e.push(t))}))}))})),2===this.type&&t.each(this.options,(function(t){t.checked&&(t.unit="",t.unit_name="",e.push(t))})),5===this.type&&t.each(this.options,(function(a){t.each(a.floors,(function(t){t.checked&&(t.unit=a.unit,t.unit_name=a.unit_name,e.push(t))}))})),1===this.type&&t.each(this.options,(function(a){t.each(a.rooms,(function(t){t.checked&&(t.unit="",t.unit_name="",t.floor_name=a.floor_name,t.room_id=t.id,e.push(t))}))})),e},toggleGroup:function(t){t.isOpen=!t.isOpen},selectFloor:function(e,a){e.status||e.floor+(a?a.unit_name:"")===this.current?e.status&&!e.checked&&o.a.alert(e.status):(e.checked=!e.checked,a?a.allChecked=t.every(a.floors,(function(t){return t.checked})):this.allChecked=t.every(this.options,(function(t){return t.checked})),this.getSelectedRoom())},selectAll:function(e,a){var i=this;99===this.type&&(e&&t.each(e.floors,(function(a){t.each(a.rooms,(function(t){t.status||t.id+(t.unit_name||"")===i.current||(t.checked="fullSelected"!==e.allChecked)}))})),a&&t.each(a.rooms,(function(t){t.status||t.id+(t.unit_name||"")===i.current||(t.checked=!a.allChecked)}))),2===this.type&&t.each(this.options,(function(t){t.status||t.floor+(t.unit_name||"")===i.current||(t.checked=!i.allChecked)})),5===this.type&&t.each(e.floors,(function(t){t.status||t.floor+(e.unit_name||"")===i.current||(t.checked=!e.allChecked)})),1===this.type&&t.each(e.rooms,(function(t){t.status||t.id+(t.unit_name||"")===i.current||(t.checked=!e.allChecked)})),this.getSelectedRoom()},selectRoom:function(t,e,a){t.status||t.id+(a?a.unit_name:"")===this.current?t.status&&!t.checked&&o.a.alert(t.status):(t.checked=!t.checked,a&&(a.allChecked="partSelected"),this.getSelectedRoom())},select:function(){var t=this,e=this.getSelected();if(!e||!e.length)return o.a.alert("未选择移交房间");return o.a.confirm("确定批量提交吗",{okText:"提交",cancelText:"取消"}).then((function(a){a&&(t.callback&&t.callback(e),t.closePopup())}))},getSelectedRoom:function(){var e=this,a=0;this.selectedRoom="",99===this.type&&t.each(this.options,(function(i){i.checkedNumber=0,i.count=0,t.each(i.floors,(function(n){t.each(n.rooms,(function(t){t.checked&&!t.disabled&&(a++,e.selectedRoom+=""===e.selectedRoom?t.unit_name+t.room_name:"、"+t.unit_name+t.room_name,i.checkedNumber++),t.status&&t.id+t.unit_name!==e.current||i.count++})),n.allChecked=t.every(n.rooms,(function(t){return t.checked||t.status})),n.disabed=t.every(n.rooms,(function(t){return t.status}))})),i.checkedNumber>0?i.allChecked="partSelected":i.allChecked="",i.checkedNumber===i.count&&(i.allChecked="fullSelected")})),2===this.type&&(t.each(this.options,(function(t){t.checked&&!t.disabled&&(a++,e.selectedRoom+=""===e.selectedRoom?t.floor_name:"、"+t.floor_name)})),this.allChecked=t.every(this.options,(function(t){return t.checked||t.status})),this.allDisabled=t.every(this.options,(function(t){return t.status}))),5===this.type&&t.each(this.options,(function(i){t.each(i.floors,(function(t){t.checked&&!t.disabled&&(a++,e.selectedRoom+=""===e.selectedRoom?i.unit_name+t.floor_name:"、"+i.unit_name+t.floor_name)})),i.allChecked=t.every(i.floors,(function(t){return t.checked||t.status})),i.disabed=t.every(i.floors,(function(t){return t.status}))})),1===this.type&&t.each(this.options,(function(i){t.each(i.rooms,(function(t){t.checked&&!t.disabled&&(a++,e.selectedRoom+=""===e.selectedRoom?t.room_name:"、"+t.room_name)})),i.allChecked=t.every(i.rooms,(function(t){return t.checked||t.status})),i.disabed=t.every(i.rooms,(function(t){return t.status}))})),console.log(this.type,this.selectedRoom,"======="),this.selectedRoomNumber=a}}}}).call(this,a("391c"))},"7d4e":function(t,e,a){var i=a("c59b");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);(0,a("85cb").default)("62c5f5a2",i,!0,{sourceMap:!1,shadowMode:!1})},"7db0":function(t,e,a){var i=a("1bc5");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);(0,a("85cb").default)("5e6311fb",i,!0,{sourceMap:!1,shadowMode:!1})},"7e06":function(t,e,a){"use strict";var i=a("c5a7");e.__esModule=!0,e.unifySlots=r,e.createComponent=function(t){return function(e){var a;return"function"==typeof e&&(e={functional:!0,props:(a=e).props,model:a.model,render:function(t,e){return a(t,e.props,r(e),e)}}),e.functional||(e.mixins=e.mixins||[],e.mixins.push(s.SlotsMixin)),e.name=t,e.install=o,e}},a("4d1b");var n=a("a1aa"),s=a("1304");i(a("329b"));function o(t){var e=this.name;t.component(e,this),t.component((0,n.camelize)("-"+e),this)}function r(t){var e=t.scopedSlots||t.data.scopedSlots||{},a=t.slots();return Object.keys(a).forEach((function(t){e[t]||(e[t]=function(){return a[t]})})),e}},"7f8d":function(t,e,a){"use strict";a.d(e,"i",(function(){return n})),a.d(e,"a",(function(){return s})),a.d(e,"h",(function(){return o})),a.d(e,"d",(function(){return r})),a.d(e,"b",(function(){return c})),a.d(e,"e",(function(){return l})),a.d(e,"g",(function(){return d})),a.d(e,"f",(function(){return p})),a.d(e,"c",(function(){return u}));var i=a("d474"),n="未验",s="已验收",o="已抽验",r="草稿",c=[i.a.HAS_HOUSEHOLDS,i.a.NON_UNIT_WHOLE_LAYER,i.a.HAS_UNIT_WHOLE_LAYER,i.a.USER_DEFINED],l="1",d={INSPECTION:"1",ACCEPTANCE:"2",SAMPLE:"3"},p=[{text:"批量报验",code:null,type:d.INSPECTION,alertText:"该部位的状态不是待报验"},{text:"批量验收",code:"验收中",type:d.ACCEPTANCE,alertText:"该部位状态、验收表单、当前流程节点或当前流程节点验收人与其他部位不同"},{text:"批量抽验",code:"已验收",type:d.SAMPLE,alertText:"该部位的状态不是已验收"}],u={"验收中":"bg-orange","已验收":"bg-green","已抽验":"bg-spotcheck","草稿":"bg-draft","草稿_验收中":"bg-draft-orange","草稿_已验收":"bg-draft-green","草稿_已抽验":"bg-draft-spotcheck","已选择":"border-blue-selected","不可选":"bg-gray-unselected"}},"7fc0":function(t,e,a){"use strict";a.d(e,"g",(function(){return o})),a.d(e,"d",(function(){return r})),a.d(e,"e",(function(){return c})),a.d(e,"f",(function(){return l})),a.d(e,"k",(function(){return d})),a.d(e,"a",(function(){return p})),a.d(e,"c",(function(){return u})),a.d(e,"i",(function(){return h})),a.d(e,"h",(function(){return m})),a.d(e,"j",(function(){return f})),a.d(e,"l",(function(){return b})),a.d(e,"b",(function(){return g}));var i=a("5e8d"),n=a("162a"),s=a("bcc78");function o(t){return Object(i.a)().then((function(){var e=s.a.problemList.url;return n.a.request(e,t)}))}function r(t,e){return Object(i.a)().then((function(){return n.a.request(t,e)}))}function c(t,e){return Object(i.a)().then((function(){return n.a.request(t,e)}))}function l(t){return Object(i.a)().then((function(){var e=s.a.problemInfo.url;return n.a.request(e,t)}))}function d(t){return Object(i.a)().then((function(){var e=s.a.problemCreate.url;return n.a.post(e,null,t)}))}function p(t){return Object(i.a)().then((function(){var e=s.a.problemChangeCc.url;return n.a.post(e,null,t)}))}function u(t){return Object(i.a)().then((function(){var e=s.a.problemClose.url;return n.a.post(e,null,t)}))}function h(t){return Object(i.a)().then((function(){var e=s.a.problemRepair.url;return n.a.post(e,null,t)}))}function m(t){return Object(i.a)().then((function(){var e=s.a.problemReinspect.url;return n.a.post(e,null,t)}))}function f(t){return Object(i.a)().then((function(){var e=s.a.problemSendBack.url;return n.a.post(e,null,t)}))}function b(t){return Object(i.a)().then((function(){var e=s.a.problemUpdateInfo.url;return n.a.post(e,null,t)}))}function g(t){return Object(i.a)().then((function(){var e=s.a.problemChangeUser.url;return n.a.post(e,null,t)}))}},"80fd":function(t,e,a){var i=a("ce46");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);(0,a("85cb").default)("8a0a2928",i,!0,{sourceMap:!1,shadowMode:!1})},"81f2":function(t,e,a){(t.exports=a("690e")(!1)).push([t.i,'.zjapp .main[data-v-2cac8864]{position:fixed;width:100%;bottom:0}.zjapp .arrow[data-v-2cac8864]{position:absolute;top:-7px;right:18px;width:0;height:0;border-bottom:7px solid #fff;border-right:7px solid transparent;border-left:7px solid transparent}.zjapp .content[data-v-2cac8864]{position:absolute;top:0;left:0;width:100%;height:100%;background-color:rgba(0,0,0,.4);overflow:hidden}.zjapp .box[data-v-2cac8864]{display:flex;flex-direction:column;background-color:#fff;overflow:auto}.zjapp .box-single[data-v-2cac8864]{display:flex;flex-direction:column;flex:1}.zjapp .detail-hd[data-v-2cac8864]{display:flex;padding:6px 15px}.zjapp .detail-arrow-right[data-v-2cac8864]{width:13px;height:34px;overflow:hidden}.zjapp .detail-arrow-right[data-v-2cac8864]:before{display:block;content:"";width:0;height:0;margin-top:12px;border:5px solid transparent;border-left:5px solid #c8c8c8}.zjapp .detail-arrow-down[data-v-2cac8864]{width:13px;height:34px;overflow:hidden}.zjapp .detail-arrow-down[data-v-2cac8864]:before{display:block;content:"";width:0;height:0;margin-top:15px;border:5px solid transparent;border-top:5px solid #c8c8c8}.zjapp .detail-title[data-v-2cac8864]{flex:1;line-height:34px;color:#111;font-size:16px}.zjapp .detail-bd[data-v-2cac8864]{padding:8px 15px 8px 35px;background-color:#fafafa}.zjapp .text-line[data-v-2cac8864]{font-size:14px;color:#666;line-height:30px;margin-bottom:30px}.zjapp .detail-hd-single[data-v-2cac8864]{padding:6px 0;margin:0 15px}.zjapp .detail-bd-single[data-v-2cac8864]{display:flex;flex-direction:column;flex:1;padding:8px 15px;background-color:#fff}',""])},8593:function(t,e,a){"use strict";a("2b45"),a("163d");var i=a("329b"),n=a("f766").a,s=(a("cf8c"),a("17cc")),o=Object(s.a)(n,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("transition",{attrs:{name:"slide-up"},on:{leave:t.startClose,afterLeave:t.onClose}},[t.show?a("div",{staticClass:"number-keyboard-con",class:{"ios-bezel-less":t.isIOSBezelLess},style:{"z-index":t.zIndex},on:{touchstart:t.keyTouchstart,touchend:t.keyTouchend}},[a("div",{staticClass:"keyboard-row"},[a("div",{staticStyle:{flex:"1"}},["number"===t.inputComponent.type?[a("div",{staticClass:"keyboard-row"},[a("div",{staticClass:"keys",attrs:{direct:"1"}},[t._v("1")]),a("div",{staticClass:"keys",attrs:{direct:"2"}},[t._v("2")]),a("div",{staticClass:"keys",attrs:{direct:"3"}},[t._v("3")])]),a("div",{staticClass:"keyboard-row"},[a("div",{staticClass:"keys",attrs:{direct:"4"}},[t._v("4")]),a("div",{staticClass:"keys",attrs:{direct:"5"}},[t._v("5")]),a("div",{staticClass:"keys",attrs:{direct:"6"}},[t._v("6")])]),a("div",{staticClass:"keyboard-row"},[a("div",{staticClass:"keys",attrs:{direct:"7"}},[t._v("7")]),a("div",{staticClass:"keys",attrs:{direct:"8"}},[t._v("8")]),a("div",{staticClass:"keys",attrs:{direct:"9"}},[t._v("9")])]),a("div",{staticClass:"keyboard-row"},[a("div",{staticClass:"keys",class:{disabled:t.isDisabledMinus},attrs:{direct:"-"}},[t._v("-")]),a("div",{staticClass:"keys",attrs:{direct:"0"}},[t._v("0")]),a("div",{staticClass:"keys",class:{disabled:t.isDisabledPoint},attrs:{direct:"."}},[t._v(".")])])]:t._e(),"text"===t.inputComponent.type?[a("div",{staticClass:"keyboard-row"},[a("div",{staticClass:"keys col color-green",attrs:{direct:"1"}},[a("icon",{attrs:{name:"qualified"}}),t._v("\n              合格\n            ")],1),a("div",{staticClass:"keys col color-red",attrs:{direct:"0"}},[a("icon",{attrs:{name:"unqualified"}}),t._v("\n              不合格\n            ")],1)])]:t._e()],2),a("div",{staticClass:"right-btns"},[a("div",{staticClass:"keys keys-ok",attrs:{direct:"closeKeyboard"}},[a("icon",{attrs:{name:"keyboard-close"}})],1),String(t.inputComponent.value)?a("div",{staticClass:"keys keys-delete",attrs:{direct:"delete"}},[a("icon",{attrs:{name:"keyboard-delete"}})],1):t._e(),String(t.inputComponent.value)?t._e():a("div",{staticClass:"keys keys-prev color-black",attrs:{direct:"remove"}},[t._v("\n          移除\n        ")]),"number"===t.inputComponent.type?a("div",{staticClass:"keys keys-add",attrs:{direct:"add"}},[t._v("\n          添加测点\n        ")]):t._e()])]),a("div",{staticClass:"keyboard-row"},[a("div",{staticClass:"keys keys-prev color-blue",class:{disabled:!t.hasPrev},attrs:{direct:"next"}},[t._v("\n        下一验收项\n      ")]),"number"!==t.inputComponent.type?a("div",{staticClass:"keys keys-next color-blue",class:{disabled:!t.hasNext},attrs:{direct:"add"}},[t._v("\n        添加测点\n      ")]):t._e()])]):t._e()])}),[],!1,null,"7fdd42c6",null).exports,r=!1;r||(r=new(i.default.extend(o))({el:document.createElement("div")}),document.body.appendChild(r.$el));var c=r,l=a("6f9e"),d=a("4360"),p={name:"NumberInput",props:{value:{type:[String,Number]},keyboardType:{type:String,default:"all"},index:{type:[String,Number]},type:{type:String,default:"number"},range:{type:Array,default:function(){return[]}},decimal:{type:Number,default:2},placeholder:{type:String,default:""},mykey:{type:Number}},data:function(){return{keyboardHeight:d.a.state.app.isIOSBezelLess?322:288,isFocusing:!1,isSelectAll:!1,newValue:"wode"}},computed:{min:function(){return isNaN(this.range[0])?-1/0:parseFloat(this.range[0])},max:function(){return isNaN(this.range[1])?1/0:parseFloat(this.range[1])}},created:function(){this.keyboardHeight="text"===this.type?176:288,d.a.state.app.isIOSBezelLess&&(this.keyboardHeight+=34),l.a.$on("numberInputBlur",this.setBlur),l.a.$on("numberKeyboardClose",this.setBlur)},beforeDestroy:function(){this.isFocusing&&c.closeKeyboard()},destroyed:function(){l.a.$off("numberInputBlur",this.setBlur),l.a.$off("numberKeyboardClose",this.setBlur)},methods:{hasVal:function(t){return null!=t&&""!==t},openKeyboard:function(){this.isFocusing?this.isSelectAll=!1:(l.a.$emit("numberInputBlur"),this.setFocus(),c.openKeyboard({inputComponent:this}))},setFocus:function(){this.isFocusing=!0,this.isSelectAll=!0,c.$on("keyboardInput",this.input),c.$on("keyboardAdd",this.add),c.$on("keyboardRemove",this.remove),c.$on("keyboardDelete",this.deleteValue),c.$on("keyboardClear",this.clear),this.$emit("focus")},setBlur:function(){if(this.isFocusing){var t=this.checkValue();this.isFocusing=!1,this.isSelectAll=!1,c.$off("keyboardInput",this.input),c.$off("keyboardDelete",this.deleteValue),c.$off("keyboardAdd",this.add),c.$off("keyboardRemove",this.remove),c.$off("keyboardClear",this.clear),this.$emit("input",t),this.$emit("blur",t)}},input:function(t){var e=this,a=this.hasVal(this.value)?this.value.toString():"",i="";this.isSelectAll||"text"===this.type?(i=t,this.isSelectAll=!1):i=a+t,this.newValue=i,setTimeout((function(){e.$emit("input",i),e.$emit("change",i)}),100),c.setKeysStatus(i,this.keyboardType)},add:function(){this.$emit("input-add")},remove:function(){this.$emit("input-remove")},deleteValue:function(){var t=this.hasVal(this.value)?this.value.toString():"",e="";this.hasVal(t)&&(e=t.substr(0,t.length-1)),"text"===this.type&&(e=""),this.$emit("input",e),c.setKeysStatus(e,this.keyboardType)},clear:function(){this.$emit("input",""),c.setKeysStatus("",this.keyboardType)},checkValue:function(){var t=this.hasVal(this.value)?this.value.toString():"";"-"===t&&(t=""),"."===t.substr(-1)&&(t=t.substr(0,t.length-1));var e=t.indexOf(".");return e>0&&(t=parseFloat(t.substring(0,e+this.decimal+1))),t=parseFloat(t),isNaN(t)?t="":(t<this.min&&(t=this.min,this.$emit("overflowRange")),t>this.max&&(t=this.max,this.$emit("overflowRange"))),t}}},u=(a("fc22"),Object(s.a)(p,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"number-input component-number-input",class:{"number-input-focus":t.isFocusing,"number-input-select-all":t.isSelectAll,unqualified:0===t.value&&"text"===t.type,first:0===t.index}},[a("div",{staticClass:"text",on:{click:function(e){return e.stopPropagation(),t.openKeyboard(e)}}},[t.hasVal(t.value)?a("span",{staticClass:"value"},["text"===t.type?a("span",[t._v(t._s(["不合格","合格"][t.value]))]):a("span",{staticClass:"value-handle"},[t._v(t._s(t.value))])]):a("span",{staticClass:"placeholder"},[t._v("\n      "+t._s(t.placeholder)+"\n    ")])]),t._t("extend")],2)}),[],!1,null,"3efcb2a2",null));e.a=u.exports},9120:function(t,e,a){var i=a("2ddb");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);(0,a("85cb").default)("cb55f532",i,!0,{sourceMap:!1,shadowMode:!1})},"91c1":function(t,e,a){"use strict";(function(t){a("5ab2"),a("6d57"),a("e10e"),a("9a33");var i=a("28f8"),n=a("e68e"),s=a("6f9e"),o=a("bcc7"),r=a("e89f");function c(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,i)}return a}function l(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?c(Object(a),!0).forEach((function(e){Object(i.a)(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):c(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}e.a={name:"CheckGuideDetailDrop",components:{ItemImgList:n.a},mixins:[r.a],data:function(){return{show:!1,showList:!1,isLoading:!1,isOpening:!1,isClosing:!1,contentTop:64,listHeight:510,module:"",itemIds:[],data:[],target:""}},watch:{show:function(t){var e=this;t&&this.$nextTick((function(){e.showList=!0}))}},created:function(){s.a.$on("routerBeforeEach",this.closePopup),s.a.$on("pageContentClick",this.onClickOther)},destroyed:function(){s.a.$off("routerBeforeEach",this.closePopup),s.a.$off("pageContentClick",this.onClickOther)},methods:{openPopup:function(e){this.show=!0,this.$emit("open"),this.module=e.module,this.itemIds=e.itemIds,this.options=e.options;var a=document.querySelector(".layout-main .layout-header");if(this.contentTop=a.offsetHeight,e.el){var i=e.el.getBoundingClientRect();this.contentTop=i.bottom}this.target=e.el,this.listHeight=t.minBy([window.innerHeight-this.contentTop-50,510]),this.getData()},closePopup:function(){var t=this;if(!this.isOpening)return this.showList=!1,this.$emit("close"),new Promise((function(e){t.$on("afterClosePopup",e)}))},afterClose:function(){this.show=!1,this.isClosing=!1,this.$emit("afterClosePopup")},onClickOther:function(t){t&&t.target&&t.target!==this.target&&this.show&&this.closePopup()},getData:function(){var e=this;return this.options&&this.options.length?(this.data=t.map(this.options,(function(t){return l(l({},t),{},{isOpen:!1})})),Promise.resolve()):o.a.getMeasureCheckItem(this.itemIds).then((function(a){e.data=t.map(a,(function(e){var a=e.content?e.content.trim():"",i=a?a.split("\n"):[],n=e.content_image?JSON.parse(e.content_image):[],s=t.filter(i,(function(t){return!/<img([\s\S]*)>/gm.test(t)}));return t.each(n,(function(t){t.url=t.url.split("@")[0]})),{id:e.id,name:e.full_name,textArr:s,contentImage:n,isOpen:!1}}))})).catch((function(t){console.error(t)}))},toggleItem:function(t){this.data.length>1&&this.$set(t,"isOpen",!t.isOpen)}}}}).call(this,a("391c"))},"91c5":function(t,e,a){"use strict";var i=a("329b"),n=a("79f7").a,s=(a("1700"),a("17cc")),o=Object(s.a)(n,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("transition",{attrs:{name:"slide-right"}},[t.show?a("page-content",{attrs:{title:t.title,mode:"dialog","on-close":t.closePopup}},[a("div",{staticClass:"header-btn",attrs:{slot:"header-bar-right"},on:{click:t.select},slot:"header-bar-right"},[t._v("\n      确定("+t._s(t.selectedRoomNumber)+")\n    ")]),a("div",{staticClass:"multiple-place-content"},[a("div",{staticClass:"selected"},[a("label",[t._v("已选:")]),a("div",{staticClass:"text"},[t._v("\n          "+t._s(t.selectedRoom)+"\n        ")])])]),a("div",{staticClass:"multiple-place-content -fixed"},[a("div",{staticClass:"selected"},[a("label",[t._v("已选:")]),a("div",{staticClass:"text"},[t._v("\n          "+t._s(t.selectedRoom)+"\n        ")])])]),a("div",{staticClass:"select-wrap"},[2==t.type?a("div",{staticClass:"section"},[a("div",{staticClass:"group pl15 pr15"},[a("div",{staticClass:"group-name"},[t._v("全部")]),a("div",{staticClass:"element-list"},[a("div",{staticClass:"element mr15",class:{checked:t.allChecked,disabled:t.allDisabled},on:{click:function(e){t.selectAll()}}},[t._v("\n              全选\n            ")]),t._l(t.options,(function(e){return a("div",{key:e.floor_name,staticClass:"element mr15",class:{checked:e.checked,disabled:e.status},on:{click:function(a){t.selectFloor(e)}}},[t._v("\n              "+t._s(e.floor_name)+"\n            ")])}))],2)])]):t._e(),5==t.type?a("div",{staticClass:"section"},t._l(t.options,(function(e){return a("div",{key:e.unit_name,staticClass:"group pl15 pr15"},[a("div",{staticClass:"group-name"},[t._v(t._s(e.unit_name))]),a("div",{staticClass:"element-list"},[a("div",{staticClass:"element mr15",class:{checked:e.allChecked,"disabled-all":e.disabed},on:{click:function(a){t.selectAll(e)}}},[t._v("\n              全选\n            ")]),t._l(e.floors,(function(i){return a("div",{key:i.floor_name,staticClass:"element mr15",class:{checked:i.checked,disabled:i.status},on:{click:function(a){t.selectFloor(i,e)}}},[t._v("\n              "+t._s(i.floor_name)+"\n            ")])}))],2)])}))):t._e(),1==t.type?a("div",{staticClass:"section"},t._l(t.options,(function(e){return a("div",{key:e.floor_name,staticClass:"group pl15 pr15"},[a("div",{staticClass:"group-name"},[t._v(t._s(e.floor_name))]),a("div",{staticClass:"element-list"},[a("div",{staticClass:"element -all",class:{checked:e.allChecked,"disabled-all":e.disabed},on:{click:function(a){t.selectAll(e)}}},[t._v("\n              全选\n            ")]),t._l(e.rooms,(function(i){return a("div",{key:i.room_name,staticClass:"element mr15",class:{checked:i.checked,disabled:i.status},on:{click:function(a){t.selectRoom(i,e)}}},[t._v("\n              "+t._s(i.room_name)+"\n            ")])}))],2)])}))):t._e(),99==t.type?a("van-collapse",{model:{value:t.actionTabs,callback:function(e){t.actionTabs=e},expression:"actionTabs"}},t._l(t.options,(function(e){return a("van-collapse-item",{key:e.unit_name,staticClass:"section",attrs:{name:e.id}},[a("strong",{attrs:{slot:"title"},on:{click:function(a){a.stopPropagation(),t.selectAll(e)}},slot:"title"},[a("icon",{attrs:{slot:"icon",name:"checkbox-square"+(e.allChecked?t.checkStatus[e.allChecked]:"")},slot:"icon"}),t._v(t._s(e.unit_name))],1),t._l(e.floors,(function(i){return a("div",{key:i.floor_name,staticClass:"group pl40 pr15  -border-bottom"},[a("div",{staticClass:"group-name"},[t._v(t._s(i.floor_name))]),a("div",{staticClass:"element-list"},[a("div",{staticClass:"element -all",class:{checked:i.allChecked,"disabled-all":i.disabed},on:{click:function(e){t.selectAll(null,i)}}},[t._v("\n                  全选\n                ")]),t._l(i.rooms,(function(n){return a("div",{key:n.room_name,staticClass:"element",class:{checked:n.checked,disabled:n.status},on:{click:function(a){t.selectRoom(n,i,e)}}},[t._v("\n                  "+t._s(n.room_name)+"\n                ")])}))],2)])}))],2)}))):t._e(),t.options&&t.options.length?t._e():a("loading-status",{attrs:{"is-empty":!0,"empty-text":"没有内容"}})],1)]):t._e()],1)}),[],!1,null,"440d4b89",null).exports,r=!1;r||(r=new(i.default.extend(o))({el:document.createElement("div")}),document.body.appendChild(r.$el));e.a=r},9428:function(t,e,a){"use strict";var i=a("3bf2").a,n=(a("a6b0"),a("17cc")),s=Object(n.a)(i,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.detailData&&!t.detailData.detailsError&&"edit"===t.detailData.mode?a("div",[t.detailData.hasMasterNum?a("div",{staticClass:"proj-title mt0 bg-white"},[a("div",{staticClass:"proj-name"},[t._v("主控项目")])]):t._e(),t._l(t.detailFilter(t.detailData.process_type,1),(function(e,i){return a("div",{key:e.id,staticClass:"bg-white"},[1===e.accept_type?a("div",{staticClass:"item-base item-process-accept-v2 item-align-center",class:{"van-hairline--top":0!==i,"border-none":0===i}},[a("div",{staticClass:"item-text"},[a("p",{staticClass:"item-detail-name",domProps:{textContent:t._s(e.name)}}),a("p",{staticClass:"item-detail-content",domProps:{textContent:t._s(e.content)}})]),a("div",{staticClass:"item-ele",class:{"color-green":"合格"===e.status},on:{click:function(a){t.setDetailStatus(e,"合格",t.detailData)}}},[a("icon",{attrs:{name:"qualified"}}),"合格"===e.status?a("p",{staticClass:"f10"},[t._v("合格")]):t._e()],1),a("div",{staticClass:"item-ele ml20",class:{"color-red":"不合格"===e.status},on:{click:function(a){t.setDetailStatus(e,"不合格",t.detailData)}}},[a("icon",{attrs:{name:"unqualified"}}),"不合格"===e.status?a("p",{staticClass:"f10"},[t._v("不合格")]):t._e()],1)]):t._e(),2===e.accept_type?a("div",{staticClass:"item-base item-process-accept-v2",class:{"van-hairline--top":0!==i,"border-none":0===i}},[a("div",{staticClass:"item-text"},[a("p",{staticClass:"item-detail-name",domProps:{textContent:t._s(e.name)}}),a("p",{staticClass:"item-detail-content item-detail-content",domProps:{textContent:t._s((e.standard_text?"合格标准："+e.standard_text:"")+(e.standard_text&&e.content?"，":"")+e.content)}})]),""!==e.rate?a("div",{staticClass:"item-font item-percent",class:{"color-red":e.rate<1}},[t._v(t._s(t._f("percent")(e.rate)))]):t._e()]):t._e(),2===e.accept_type&&"人工判断"!==e.standard_symbol?a("div",{staticClass:"process-accept-input-group pl15"},t._l(e.problem_values,(function(i,n){return a("div",{key:n,staticClass:"process-accept-input mr10 mb10",class:{"input-exceed":i.isExceed}},[a("number-input",{ref:"ipt-number-"+n,refInFor:!0,attrs:{type:"number",decimal:5,index:n,mykey:i.key,range:[-9999999.99999,9999999.99999]},on:{"input-add":function(a){t.addPoint(e,n,"number")},"input-remove":function(a){t.removePoint(e,n,"number")},blur:function(e){t.problemValueChange(t.detailData)}},model:{value:i.val,callback:function(e){t.$set(i,"val",e)},expression:"value.val"}})],1)}))):t._e(),2===e.accept_type&&"人工判断"===e.standard_symbol?a("div",{staticClass:"process-accept-input-group pl15"},t._l(e.problem_values,(function(i,n){return a("div",{key:n,staticClass:"process-accept-input mr10 mb10",class:{"input-exceed":i.isExceed}},[a("number-input",{ref:"ipt-text-"+n,refInFor:!0,attrs:{type:"text",index:n,decimal:5,mykey:i.key},on:{"input-add":function(a){t.addPoint(e,n,"text")},"input-remove":function(a){t.removePoint(e,n,"text")},blur:function(e){t.problemValueChange(t.detailData)},change:function(e){t.problemValueChange(t.detailData)}},model:{value:i.val,callback:function(e){t.$set(i,"val",e)},expression:"value.val"}})],1)}))):t._e()])})),t.detailData.hasCommonNum?a("div",{staticClass:"proj-title bg-white"},[a("div",{staticClass:"proj-name"},[t._v("一般项目")])]):t._e(),t._l(t.detailFilter(t.detailData.process_type,2),(function(e,i){return a("div",{key:e.id,staticClass:"bg-white "},[1===e.accept_type?a("div",{staticClass:"item-base item-process-accept-v2 item-align-center",class:{"van-hairline--top":0!==i,"border-none":0===i}},[a("div",{staticClass:"item-text"},[a("p",{staticClass:"item-detail-name",domProps:{textContent:t._s(e.name)}}),a("p",{staticClass:"item-detail-content",domProps:{textContent:t._s(e.content)}})]),a("div",{staticClass:"item-ele",class:{"color-green":"合格"===e.status},on:{click:function(a){t.setDetailStatus(e,"合格",t.detailData)}}},[a("icon",{attrs:{name:"qualified"}}),"合格"===e.status?a("p",{staticClass:"f10"},[t._v("合格")]):t._e()],1),a("div",{staticClass:"item-ele ml20",class:{"color-red":"不合格"===e.status},on:{click:function(a){t.setDetailStatus(e,"不合格",t.detailData)}}},[a("icon",{attrs:{name:"unqualified"}}),"不合格"===e.status?a("p",{staticClass:"f10"},[t._v("不合格")]):t._e()],1)]):t._e(),2===e.accept_type?a("div",{staticClass:"item-base item-process-accept-v2",class:{"van-hairline--top":0!==i,"border-none":0===i}},[a("div",{staticClass:"item-text"},[a("p",{staticClass:"item-detail-name",domProps:{textContent:t._s(e.name)}}),a("p",{staticClass:"item-detail-content item-detail-content",domProps:{textContent:t._s((e.standard_text?"合格标准："+e.standard_text:"")+(e.standard_text&&e.content?"，":"")+e.content)}})]),""!==e.rate?a("div",{staticClass:"item-font item-percent",class:{"color-red":e.rate<.8}},[t._v(t._s(t._f("percent")(e.rate)))]):t._e()]):t._e(),2===e.accept_type&&"人工判断"!==e.standard_symbol?a("div",{staticClass:"process-accept-input-group pl15"},t._l(e.problem_values,(function(i,n){return a("div",{key:n,staticClass:"process-accept-input mr10 mb10",class:{"input-exceed":i.isExceed}},[a("number-input",{ref:"ipt-number-"+n,refInFor:!0,attrs:{type:"number",decimal:5,index:n,mykey:i.key,range:[-9999999.99999,9999999.99999]},on:{"input-add":function(a){t.addPoint(e,n,"number")},"input-remove":function(a){t.removePoint(e,n,"number")},blur:function(e){t.problemValueChange(t.detailData)}},model:{value:i.val,callback:function(e){t.$set(i,"val",e)},expression:"value.val"}})],1)}))):t._e(),2===e.accept_type&&"人工判断"===e.standard_symbol?a("div",{staticClass:"process-accept-input-group pl15"},t._l(e.problem_values,(function(i,n){return a("div",{key:n,staticClass:"process-accept-input mr10 mb10",class:{"input-exceed":i.isExceed}},[a("number-input",{ref:"ipt-text-"+n,refInFor:!0,attrs:{type:"text",decimal:5,index:n,mykey:i.key},on:{"input-add":function(a){t.addPoint(e,n,"text")},"input-remove":function(a){t.removePoint(e,n,"text")},blur:function(e){t.problemValueChange(t.detailData)}},model:{value:i.val,callback:function(e){t.$set(i,"val",e)},expression:"value.val"}})],1)}))):t._e()])})),t.detailData.process_type&&t.detailData.process_type.length?a("div",{staticClass:"bg-white"},[a("div",{staticClass:"proj-title "},[a("div",{staticClass:"proj-name"},[t._v("总体结果")]),t.detailData.sum.status&&"未验"!=t.detailData.sum.status?a("div",{staticClass:"proj-overall-result",class:{"bg-green":"合格"===t.detailData.sum.status},domProps:{textContent:t._s("未验"==t.detailData.sum.status?"-":t.detailData.sum.status)}}):t._e()]),a("div",{staticClass:"proj-result-cont"},[a("ul",[a("li",[a("span",[t._v("主控项")]),a("span",{class:{"color-gray7":!t.detailData.hasMasterNum},domProps:{textContent:t._s("未验"==t.detailData.sum.masterStatus?t.detailData.hasMasterNum?"-":"未设置":t.detailData.sum.masterStatus||"-")}})]),a("li",[a("span",[t._v("一般项")]),a("span",{class:{"color-gray7":!t.detailData.hasCommonNum},domProps:{textContent:t._s("未验"==t.detailData.sum.commonStatus?t.detailData.hasCommonNum?"-":"未设置":t.detailData.sum.commonStatus||"-")}})]),a("li",[a("span",[t._v("最低合格率")]),a("span",{class:{"color-gray7":!t.detailData.hasMeasureNum},domProps:{textContent:t._s(""===t.detailData.sum.lowest?t.detailData.hasMeasureNum?"-":"无实测类":(100*t.detailData.sum.lowest).toFixed(1)+"%")}})])])])]):t._e(),[t._l(t.detailData.process_checkpoint,(function(e,i){return[a("item",{key:"hd"+i,staticClass:"mt10",attrs:{text:e.title,"icon-right":("string"==typeof e.is_open?"true"===e.is_open:e.is_open)?"arrow-up":"arrow-down",border:"bottom"},on:{click:function(a){t.togglePoint(e)}}},[a("i",{staticClass:"icon-point",attrs:{slot:"icon-left"},slot:"icon-left"})]),("string"==typeof e.is_open?"true"===e.is_open:e.is_open)?a("div",{key:"img"+i,staticClass:"p15 bg-white"},[a("item-img-list",{attrs:{maxlength:15,group:"process-accept-v3-edit-"+t.detailData.process_id},model:{value:e.image_file,callback:function(a){t.$set(e,"image_file",a)},expression:"point.image_file"}})],1):t._e(),("string"==typeof e.is_open?"true"===e.is_open:e.is_open)&&e.content?a("div",{key:"con"+i,staticClass:"pl15 pr15 pb10 bg-white"},[a("div",{staticClass:"point-content"},[t._v(t._s(e.content))])]):t._e()]}))],a("div",{staticClass:"item-photo-proj"},[a("item-textarea",{attrs:{placeholder:"备注"},model:{value:t.detailData.remark,callback:function(e){t.$set(t.detailData,"remark",e)},expression:"detailData.remark"}}),a("user-select",{staticClass:"mt10",attrs:{title:"共同验收人",multi:!0,options:t.userOptions,editabled:!t.disEditForce},on:{onSelect:function(e){return t.changeAcceptor(e)}},model:{value:t.detailData.acceptor_user,callback:function(e){t.$set(t.detailData,"acceptor_user",e)},expression:"detailData.acceptor_user"}}),a("div",{attrs:{flag:t.flag}},[a("user-select",{attrs:{title:"抄送人",multi:!0,memory:!0,options:t.userOptions,required:!0,editabled:!t.disEditForce},on:{onSelect:function(e){return t.changeCc(e)}},model:{value:t.detailData.cc_set,callback:function(e){t.$set(t.detailData,"cc_set",e)},expression:"detailData.cc_set"}})],1),t.acceptId&&"spotcheck"!==t.checkType?a("user-select",{staticClass:"process-node-acceptor",attrs:{title:"当前节点验收人",options:t.userOptions,editabled:!t.isEditStatus&&!t.disEditForce},on:{onSelect:function(e){return t.changeOperator(e,1)}},model:{value:t.detailData.operator_user_info,callback:function(e){t.$set(t.detailData,"operator_user_info",e)},expression:"detailData.operator_user_info"}}):t._e(),t.detailData.next_process_id?a("user-select",{staticClass:"process-node-acceptor",attrs:{title:"下一节点验收人",options:t.userOptions,editabled:!t.disEditForce},on:{onSelect:function(e){return t.changeOperator(e,0)}},model:{value:t.detailData.next_process_operator,callback:function(e){t.$set(t.detailData,"next_process_operator",e)},expression:"detailData.next_process_operator"}}):t._e()],1)],2):t._e(),!t.detailData||t.detailData.detailsError||"view"!==t.mode&&"view"!==t.detailData.mode?t._e():a("div",[t.detailData.process_type&&t.detailData.process_type.length?a("div",{staticClass:"bg-white"},[a("div",{staticClass:"proj-title mt0 clearfix"},[a("div",{staticClass:"proj-name"},[t._v("总体结果")]),t.detailData.sum.status&&"未验"!=t.detailData.sum.status?a("div",{staticClass:"proj-overall-result",class:{"bg-green":"合格"===t.detailData.sum.status},domProps:{textContent:t._s("未验"==t.detailData.sum.status?"-":t.detailData.sum.status)}}):t._e()]),a("div",{staticClass:"proj-result-cont"},[a("ul",[a("li",[a("span",[t._v("主控项")]),a("span",{class:{"color-gray7":!t.detailData.hasMasterNum},domProps:{textContent:t._s("未验"==t.detailData.sum.masterStatus?t.detailData.hasMasterNum?"-":"未设置":t.detailData.sum.masterStatus||"-")}})]),a("li",[a("span",[t._v("一般项")]),a("span",{class:{"color-gray7":!t.detailData.hasCommonNum},domProps:{textContent:t._s("未验"==t.detailData.sum.commonStatus?t.detailData.hasCommonNum?"-":"未设置":t.detailData.sum.commonStatus||"-")}})]),a("li",[a("span",[t._v("最低合格率")]),a("span",{class:{"color-gray7":!t.detailData.hasMeasureNum},domProps:{textContent:t._s(""===t.detailData.sum.lowest||null===t.detailData.sum.lowest?t.detailData.hasMeasureNum?"-":"无实测类":(100*t.detailData.sum.lowest).toFixed(1)+"%")}})])])])]):t._e(),t.detailData.hasMasterDetail?a("div",{staticClass:"proj-title bg-white"},[a("div",{staticClass:"proj-name"},[t._v("主控项目")]),t.detailData.master_unqualified_num?a("span",{staticClass:"proj-judgment-view"},[t._v(t._s(t.detailData.master_unqualified_num)+"项不合格")]):t._e()]):t._e(),t._l(t.detailFilter(t.detailData.process_type,1),(function(e,i){return a("div",{key:e.id,staticClass:"bg-white"},[1===e.accept_type?a("div",{staticClass:"item-base item-process-accept-v2 item-align-center",class:{"van-hairline--top":0!==i,"border-none":0===i}},[a("div",{staticClass:"item-text"},[a("p",{staticClass:"item-detail-name",domProps:{textContent:t._s(e.name)}}),a("p",{staticClass:"item-detail-content",domProps:{textContent:t._s(e.content)}})]),a("div",{staticClass:"item-font",class:{"color-red":"不合格"===e.status},domProps:{textContent:t._s(e.status)}})]):t._e(),2===e.accept_type?a("div",{staticClass:"item-base item-process-accept-v2",class:{"van-hairline--top":0!==i,"border-none":0===i}},[a("div",{staticClass:"item-text"},[a("p",{staticClass:"item-detail-name",domProps:{textContent:t._s(e.name)}}),a("p",{staticClass:"item-detail-content",domProps:{textContent:t._s((e.standard_text?"合格标准："+e.standard_text:"")+(e.standard_text&&e.content?"，":"")+e.content)}})]),""!==e.rate?a("div",{staticClass:"item-font item-percent",class:{"color-red":e.rate<1}},[t._v(t._s(t._f("percent")(e.rate)))]):t._e()]):t._e(),2===e.accept_type&&"人工判断"!==e.standard_symbol?a("div",{staticClass:"pl15 pr15 pb10 word-break"},t._l(e.problem_values,(function(e,i){return a("span",{key:i},[0!==i?a("span",[t._v(",")]):t._e(),a("span",{class:{"color-red":e.isExceed}},[t._v(t._s(e.val))])])}))):t._e(),2===e.accept_type&&"人工判断"===e.standard_symbol?a("div",{staticClass:"pl15 pr15 pb10 word-break"},t._l(e.problem_values,(function(e,i){return a("span",{key:i},[0!==i?a("span",[t._v(",")]):t._e(),a("span",{class:{"color-red":0===e.val},domProps:{textContent:t._s(["不合格","合格"][e.val])}})])}))):t._e()])})),t.detailData.hasCommonDetail?a("div",{staticClass:"proj-title bg-white"},[a("div",{staticClass:"proj-name"},[t._v("一般项目")]),t.detailData.common_unqualified_num?a("span",{staticClass:"proj-judgment-view"},[t._v(t._s(t.detailData.common_unqualified_num)+"项不合格")]):t._e()]):t._e(),t._l(t.detailFilter(t.detailData.process_type,2),(function(e,i){return a("div",{key:e.id,staticClass:"bg-white "},[1===e.accept_type?a("div",{staticClass:"item-base item-process-accept-v2 item-align-center",class:{"van-hairline--top":0!==i,"border-none":0===i}},[a("div",{staticClass:"item-text"},[a("p",{staticClass:"item-detail-name",domProps:{textContent:t._s(e.name)}}),a("p",{staticClass:"item-detail-content",domProps:{textContent:t._s(e.content)}})]),a("div",{staticClass:"item-font",class:{"color-red":"不合格"===e.status},domProps:{textContent:t._s(e.status)}})]):t._e(),2===e.accept_type?a("div",{staticClass:"item-base item-process-accept-v2",class:{"van-hairline--top":0!==i,"border-none":0===i}},[a("div",{staticClass:"item-text"},[a("p",{staticClass:"item-detail-name",domProps:{textContent:t._s(e.name)}}),a("p",{staticClass:"item-detail-content",domProps:{textContent:t._s((e.standard_text?"合格标准："+e.standard_text:"")+(e.standard_text&&e.content?"，":"")+e.content)}})]),""!==e.rate?a("div",{staticClass:"item-font item-percent",class:{"color-red":e.rate<.8}},[t._v(t._s(t._f("percent")(e.rate)))]):t._e()]):t._e(),2===e.accept_type&&"人工判断"!==e.standard_symbol?a("div",{staticClass:"pl15 pr15 pb10 word-break"},t._l(e.problem_values,(function(e,i){return a("span",{attrs:{Key:i}},[0!==i?a("span",[t._v(",")]):t._e(),a("span",{class:{"color-red":e.isExceed}},[t._v(t._s(e.val))])])}))):t._e(),2===e.accept_type&&"人工判断"===e.standard_symbol?a("div",{staticClass:"pl15 pr15 pb10 word-break"},t._l(e.problem_values,(function(e,i){return a("span",{attrs:{Key:i}},[0!==i?a("span",[t._v(",")]):t._e(),a("span",{class:{"color-red":0===e.val},domProps:{textContent:t._s(["不合格","合格"][e.val])}})])}))):t._e()])})),t._l(t.detailData.process_checkpoint,(function(e,i){return[a("item",{key:"title"+i,staticClass:"mt10",attrs:{text:e.title}},[a("i",{staticClass:"icon-point",attrs:{slot:"icon-left"},slot:"icon-left"})]),a("item",{key:"img"+i,staticClass:"pt0 pb15"},[a("item-img-list",{attrs:{"model-id":e.id,group:"process-accept-v3-view-"+t.detailData.process_id,editabled:!1},model:{value:e.image_file,callback:function(a){t.$set(e,"image_file",a)},expression:"point.image_file"}})],1),e.content?a("div",{key:"con"+i,staticClass:"pl15 pr15 pb10 bg-white"},[a("div",{staticClass:"point-content"},[t._v(t._s("验收标准:"+e.content))])]):t._e()]})),a("item",{staticClass:"border-none mt10",attrs:{label:"备注",text:t.detailData.remark}}),a("user-select",{staticClass:"mt10",attrs:{title:"提交人",mode:"view",editabled:!1},model:{value:t.detailData.operator_user_info,callback:function(e){t.$set(t.detailData,"operator_user_info",e)},expression:"detailData.operator_user_info"}}),a("item",{staticClass:"border-none",attrs:{label:"提交时间",text:t._f("formatDate")(t.detailData.completed_time)}}),t.detailData.acceptor_user&&t.detailData.acceptor_user.length?a("user-select",{attrs:{title:"共同验收人",editabled:!1,multi:!0,mode:"view"},model:{value:t.detailData.acceptor_user,callback:function(e){t.$set(t.detailData,"acceptor_user",e)},expression:"detailData.acceptor_user"}}):t._e(),t.detailData.cc_set&&t.detailData.cc_set.length?a("user-select",{attrs:{title:"抄送人",editabled:!1,multi:!0,mode:"view"},model:{value:t.detailData.cc_set,callback:function(e){t.$set(t.detailData,"cc_set",e)},expression:"detailData.cc_set"}}):t._e()],2),!t.detailData||t.detailData.detailsError?a("loading-status",{style:{height:t.viewSize.contentHeight-244+"px"},attrs:{"is-empty":!t.detailData||t.detailData.detailsError}},[a("div",{attrs:{slot:"empty-text"},slot:"empty-text"},[a("div",[t._v(t._s(t.emptyText[0]))]),a("div",[t._v(t._s(t.emptyText[1]))])])]):t._e()],1)}),[],!1,null,"1d895117",null);e.a=s.exports},9446:function(t,e,a){var i=a("2dd6");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);(0,a("85cb").default)("2192cd00",i,!0,{sourceMap:!1,shadowMode:!1})},"967a":function(t,e,a){"use strict";var i=a("8d95");e.a={REPAIR_DEADLINE_STATUS:{name:"repair_deadline_status",status:["待整改"],module:[i.a.CHECK]}}},9715:function(t,e,a){"use strict";(function(t){a("163d"),a("9a33");var i=a("fd50"),n=a("3bd5"),s=a("7b81"),o=a("d185"),r={getAllBuildingCheckItems:function(e){return o.a.getAllBuildingCheckItems(e).then((function(e){var a,n={};return t.each(e,(function(t){n[t.pp_item_id]?delete n[t.pp_item_id].note:n[t.pp_item_id]={id:t.pp_item_id,name:t.pp_item_name,subitem:[]},n[t.pc_item_id]?(n[t.pc_item_id].parent_id=t.pp_item_id,n[t.pc_item_id].full_name=t.pc_full_name,n[t.pc_item_id].process_mode=t.process_mode,n[t.pc_item_id].note=["","分户","不分单元整层","整栋","","分单元整层"][t.process_mode]):n[t.pc_item_id]={id:t.pc_item_id,name:t.pc_item_name,parent_id:t.pp_item_id,full_name:t.pc_full_name,process_mode:t.process_mode,note:["","分户","不分单元整层","整栋","","分单元整层"][t.process_mode],subitem:[]},n[t.pp_item_id].subitem.push(n[t.pc_item_id])})),a=t.filter(n,(function(t){return!t.parent_id})),i.a.resolve(a)}))},getAllProblemByBuildingItem:function(t,e){return o.a.getAllProblemByBuildingItem(t,e)},getCheckitemRealProcessMode:function(t,e){return o.a.getOneDetailByBuildingAndItem(t,e).then((function(t){if(t)return t.process_mode}))},getSectionContractor:function(t){return o.a.getSectionContractor(t)},getSelfDefinitionPlaceProcessData:function(t,e){return o.a.getSelfDefinitionPlaceProcessData(t,e)},getProcessAcceptv2DataById:function(t){return o.a.getProcessAcceptv2DataById(t)},getCustomBuildById:function(t){return o.a.getCustomBuildById(t).then((function(t){var e=t[0].parent_id||t[0].id,a=t[0];return o.a.getBidsectionByCustom(e).then((function(t){return a.bidsection_name=(t[0]||{}).bidsection_name,a.bidsection_id=(t[0]||{}).bidsection_id,a}))}))},getSpotCheckAuthority:function(){return s.a.hasRoles(n.a.getUser().user_id,296).then((function(t){return Boolean(t)}))},setDetailStandard:function(t){var e;"±"===t.standard_symbol?(t.standard_min=-t.standard,t.standard_max=t.standard,t.standard_text=t.standard_symbol+t.standard):"+"===t.standard_symbol?(t.standard_min=0,t.standard_max=t.standard,t.standard_text=t.standard_symbol+t.standard):"-"===t.standard_symbol?(t.standard_min=-t.standard,t.standard_max=0,t.standard_text=t.standard_symbol+t.standard):"≥"===t.standard_symbol||">"===t.standard_symbol?(t.standard_min=t.standard,t.standard_max=1/0,t.standard_text=t.standard_symbol+t.standard):"≤"===t.standard_symbol||"<"===t.standard_symbol?(t.standard_min=-1/0,t.standard_max=t.standard,t.standard_text=t.standard_symbol+t.standard):"区间"===t.standard_symbol?(e=t.standard&&t.standard.split(",")||[],t.standard_min=e[0]||-1/0,t.standard_max=e[1]||1/0,t.standard_text="["+(t.standard_min===-1/0?"不限":t.standard_min)+","+(t.standard_max===1/0?"不限":t.standard_max)+"]"):"人工判断"===t.standard_symbol&&(t.standard_text="人工判断"),t.standard_min=parseFloat(t.standard_min),t.standard_max=parseFloat(t.standard_max)},getSpotcheckDetails:function(e){return e.checkpoint&&e.checkpoint.length&&t.each(e.checkpoint,(function(t){t.image_file=JSON.parse(t.image_file||"[]"),t.is_open=!0})),e.sum={commonStatus:e.common_status,lowest:e.measure_lowest_rate,masterStatus:e.master_status,status:"合格"},e.process_checkpoint=e.checkpoint,e.hasMasterDetail=0,e.hasCommonDetail=0,e.hasMasterNum=t.filter(e.detail,{proj_type:"1"}).length,e.hasCommonNum=t.filter(e.detail,{proj_type:"2"}).length,e.hasJudgeNum=t.filter(e.detail,{accept_type:"1"}).length,e.hasMeasureNum=t.filter(e.detail,{accept_type:"2"}).length,e.process_id="spotcheck",e.detail&&e.detail.length&&t.each(e.detail,(function(t){t.status=t.status||"",t.rate=t.rate||"",t.accept_type=Number(t.accept_type),t.proj_type=Number(t.proj_type),r.setDetailStandard(t),t.problem_values?t.problem_values=JSON.parse(t.problem_values):2===Number(t.accept_type)?t.problem_values=[{val:""}]:t.problem_values=[],1===t.proj_type?e.hasMasterDetail+=1:2===t.proj_type&&(e.hasCommonDetail+=1)})),e.acceptor_user=e.user,e.operator_user_info=e.operator,e.process_type=e.detail,e.mode="view",e}};e.a=r}).call(this,a("391c"))},9788:function(t,e,a){"use strict";a("9446")},"9b25":function(t,e,a){"use strict";a("b09a")},"9bd1":function(t,e,a){var i=a("43c9");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);(0,a("85cb").default)("0d12ba7b",i,!0,{sourceMap:!1,shadowMode:!1})},a093:function(t,e,a){"use strict";(function(t){a("5ab2"),a("6d57"),a("e10e"),a("f548");var i=a("28f8"),n=(a("9dd9"),a("cc57"),a("e204"),a("9eea")),s=a("3156b"),o=a("774b"),r=a("e89f"),c=a("6f9e");function l(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,i)}return a}function d(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?l(Object(a),!0).forEach((function(e){Object(i.a)(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):l(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}e.a={name:"AppSingleSelect",components:{appSearchBar:n.a,item:s.a,Scroller:o.a},mixins:[r.a],props:{},data:function(){return{activeTab:[],storageKey:encodeURI(this.title||"singleSelectMark"),storageVal:[],keyword:"",searchStatus:!1,checkedItem:{},show:!1,searchData:[],options:[],optionsLimit:20,pagingOptions:!1,searchBar:!0,category:[],ifToggle:!1,editorAddData:!1,lineLimit:1}},computed:{optionsShow:function(){return this.options&&this.options.length?this.grouping?this.getGroupData():this.options.slice(0,this.optionsLimit):[]}},watch:{keyword:function(t){var e=this;this.$nextTick((function(){e.filterList(t)}))}},methods:{openPopup:function(e){if(console.log(e),this.value=!0,this.show=!0,this.category=[],c.a.$on("closeDialog",this.closePopup),this.title=e.title,this.selected=e.selected,this.checkedItem=e.selected,this.options=e.options,this.onSelect=e.onSelect,this.searchBar=e.searchBar,this.grouping=e.grouping,this.rightBtn=e.rightBtn,this.rightBtnEvent=e.rightBtnEvent,this.ifToggle=e.ifToggle,this.lineLimit=e.lineLimit,this.editorAddData=e.editorAddData,e.grouping&&e.autoOpen){var a=t.uniqBy(t.map(this.options,e.grouping));this.activeTab=t.map(a,(function(t,e){return e}))}this.storageKey=encodeURI(this.title||"singleSelectMark"),this.$emit("open")},closePopup:function(){this.value=!1,this.show=!1,this.$emit("close")},closeEvent:function(){c.a.$off("closeDialog",this.closePopup),this.value=!1,this.show=!1,this.keyword="",this.searchStatus=!1,this.$refs["app-search-bar"]&&this.$refs["app-search-bar"].cancelSearch()},customAddSupplier:function(t){return this.options.findIndex((function(e){return e.name===t}))},selectItem:function(t){var e=this;this.ifToggle&&this.checkedItem.id===t.id?this.checkedItem={}:this.checkedItem=t,this.onSelect(this.checkedItem),this.$refs["app-search-bar"]&&this.$refs["app-search-bar"].saveHistory(),window.setTimeout((function(){e.closeEvent()}),300)},onSearchTypeChange:function(t){this.searchStatus=t},filterList:function(t){var e,a,i=this,n=new RegExp("("+t+")","gmi");if(this.category=[],this.keyword=t,this.searchData=[],!t)return!1;this.options.map((function(t){return n.test(t.name)&&(a=d(d({},t),{},{rename:t.name.replace(n,"<label>$1</label>")}),i.grouping?-1===(e=i.category.indexOf(a[i.grouping]))?(i.category.push(a[i.grouping]),i.searchData.push({name:a[i.grouping],children:[a]})):i.searchData[e].children.push(a):i.searchData.push(a)),t}))},pageOptions:function(){this.optionsLimit=this.optionsLimit+20,this.pagingOptions=!1},getGroupData:function(){var t,e=this,a=[];return this.category=[],this.options.map((function(i){return-1===(t=e.category.indexOf(i[e.grouping]))?(e.category.push(i[e.grouping]),a.push({name:i[e.grouping],children:[i]})):a[t].children.push(i),i})),a}}}}).call(this,a("391c"))},a1aa:function(t,e,a){"use strict";e.__esModule=!0,e.camelize=function(t){return t.replace(i,(function(t,e){return e.toUpperCase()}))},e.padZero=function(t,e){void 0===e&&(e=2);var a=t+"";for(;a.length<e;)a="0"+a;return a};var i=/-(\w)/g},a5c6:function(t,e,a){"use strict";var i=a("329b"),n=a("a093").a,s=(a("f3d7"),a("17cc")),o=Object(s.a)(n,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("transition",{attrs:{name:"slide-right"}},[t.show?a("page-content",{attrs:{title:t.title,mode:"dialog","on-close":t.closeEvent}},[t.rightBtn&&!t.editorAddData||t.rightBtn&&t.editorAddData&&(!t.selected.name||t.customAddSupplier(t.selected.name)>-1)?a("div",{staticClass:"header-btn",attrs:{slot:"header-bar-right"},on:{click:function(e){t.rightBtnEvent(t.category)}},slot:"header-bar-right"},[t._v("\n      "+t._s(t.rightBtn)+"\n    ")]):t._e(),a("scroller",{attrs:{"has-next":!t.searchStatus&&!t.grouping&&t.optionsLimit<t.options.length,"end-text":"","is-empty":0===t.optionsShow.length},on:{loadNext:t.pageOptions}},[t.searchBar?a("app-search-bar",{ref:"app-search-bar",attrs:{placeholder:"搜索","history-key":t.storageKey},on:{changeSearchStatus:t.onSearchTypeChange},model:{value:t.keyword,callback:function(e){t.keyword=e},expression:"keyword"}}):t._e(),t.searchStatus?[t.keyword?[t.grouping?a("van-collapse",{model:{value:t.activeTab,callback:function(e){t.activeTab=e},expression:"activeTab"}},t._l(t.searchData,(function(e,i){return a("van-collapse-item",{key:i,attrs:{title:e.name,name:i}},t._l(e.children,(function(e,i){return a("item",{key:i,attrs:{checked:t.checkedItem.id===e.id,item:e,"line-limit":t.lineLimit,"render-field":"rename"},on:{click:t.selectItem}})})))}))):t._e(),t.grouping&&!t.searchData.length?a("loading-status",{attrs:{"is-empty":!0,"empty-text":"没有内容","show-style":"search"}}):t._e(),t.grouping?t._e():[t._l(t.searchData,(function(e,i){return a("item",{key:i,attrs:{checked:t.checkedItem.id===e.id,item:e,"line-limit":t.lineLimit,"render-field":"rename"},on:{click:t.selectItem}})})),t.searchData.length?t._e():a("loading-status",{attrs:{"is-empty":!0,"empty-text":"没有内容","show-style":"search"}})]]:t._e()]:["-1"===t.selected.id&&t.customAddSupplier(t.selected.name)<0&&t.editorAddData?a("div",{staticClass:"supplier-editor",on:{click:t.closePopup}},[a("span",{staticClass:"title"},[t._v(t._s(t.selected.name))]),a("span",{staticClass:"icon"},[a("i",{staticClass:"iconfont icon-edit margin-r",on:{click:t.rightBtnEvent}}),a("i",{staticClass:"iconfont icon-qualified"})])]):t._e(),t.grouping?a("van-collapse",{model:{value:t.activeTab,callback:function(e){t.activeTab=e},expression:"activeTab"}},t._l(t.optionsShow,(function(e,i){return a("van-collapse-item",{key:i,attrs:{title:e.name,name:i}},t._l(e.children,(function(e,i){return a("item",{key:i,attrs:{checked:t.checkedItem.id===e.id,item:e,"line-limit":t.lineLimit},on:{click:t.selectItem}})})))}))):t._l(t.optionsShow,(function(e,i){return a("item",{key:i,attrs:{checked:t.checkedItem.id===e.id,item:e,"line-limit":t.lineLimit},on:{click:t.selectItem}})})),t.optionsShow.length?t._e():a("loading-status",{attrs:{"is-empty":!0,"empty-text":"暂无数据","show-style":"search"}})]],2)],1):t._e()],1)}),[],!1,null,"e465319c",null).exports,r=!1;r||(r=new(i.default.extend(o))({el:document.createElement("div")}),document.body.appendChild(r.$el));e.a=r},a6b0:function(t,e,a){"use strict";a("80fd")},b09a:function(t,e,a){var i=a("2939");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);(0,a("85cb").default)("65170d73",i,!0,{sourceMap:!1,shadowMode:!1})},b7b4:function(t,e,a){"use strict";var i=a("c5a7");e.__esModule=!0,e.noop=function(){},e.isDef=c,e.isObj=function(t){var e=typeof t;return null!==t&&("object"===e||"function"===e)},e.get=function(t,e){var a=e.split("."),i=t;return a.forEach((function(t){i=c(i[t])?i[t]:""})),i},e.isServer=e.addUnit=e.createNamespace=void 0;var n=i(a("329b")),s=a("6147");e.createNamespace=s.createNamespace;var o=a("2064");e.addUnit=o.addUnit;var r=n.default.prototype.$isServer;function c(t){return null!=t}e.isServer=r},bcf4:function(t,e,a){"use strict";a("27c4")},c070:function(t,e,a){var i=a("574c");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);(0,a("85cb").default)("35590dcb",i,!0,{sourceMap:!1,shadowMode:!1})},c59b:function(t,e,a){(t.exports=a("690e")(!1)).push([t.i,".zjapp .item-list{position:relative;padding:10px;display:flex;align-items:center;background-color:#fff;min-height:100px}.zjapp .item-list .img{display:block;width:80px;height:80px;background:no-repeat 50%;background-size:cover;background-color:#ddd}.zjapp .item-list .item-list-con{flex:1;padding:0 15px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.zjapp .item-list .item-list-con .title{height:30px;line-height:24px;color:#111;font-size:16px;padding-top:6px;margin:0;padding-right:10px;margin-right:-10px;white-space:nowrap!important;overflow:hidden!important;text-overflow:ellipsis!important;font-weight:400}.zjapp .item-list .item-list-con .title .type-tag{display:inline-block;height:16px;line-height:16px;padding:0 4px;border-radius:2px;border:1px solid #4275e8;color:#4275e8;font-size:12px;zoom:.8;margin:3px 0 0 0;vertical-align:text-top}.zjapp .item-list .item-list-con .text{height:30px;line-height:24px;color:#8c8c8c;padding-bottom:6px;padding-right:11px;margin-right:-10px}.zjapp .item-list .item-list-con .text,.zjapp .item-list .item-list-con .time{font-size:14px;white-space:nowrap!important;overflow:hidden!important;text-overflow:ellipsis!important}.zjapp .item-list .item-list-con .time{height:20px;line-height:20px;color:#b3b3b3;padding-right:11px!important;margin-right:-10px!important}.zjapp .item-list .item-list-con .time .ion{color:#a6a6a6;font-size:20px;font-weight:700;margin-right:5px;vertical-align:top}.zjapp .item-list .item-list-r{width:60px;line-height:18px;text-align:center}.zjapp .item-list .item-list-status{min-width:4em;line-height:18px;text-align:center;white-space:normal;font-size:14px}.zjapp .item-list .icon-unread{display:inline-block;text-align:center;width:12px;height:12px;border-radius:6px;background-color:red}.zjapp .item-list .icon-return,.zjapp .item-list .icon-timeout,.zjapp .item-list .icon-urgent{display:inline-block;width:16px;height:16px;text-align:center;line-height:16px;font-size:12px;font-style:normal;color:#fff;border-radius:2px;-webkit-border-radius:2px;vertical-align:top;margin-top:4px;margin-right:5px}.zjapp .item-list .icon-timeout{background:#964bfe}.zjapp .item-list .icon-return{background:#fe8b00}.zjapp .item-list .icon-urgent{background:#ff3c3d}.zjapp .item-list .icon-return:last-child,.zjapp .item-list .icon-timeout:last-child,.zjapp .item-list .icon-urgent:last-child{margin-right:0}.zjapp .item-list-tip{height:70px;line-height:60px;color:#b4b4b4;text-align:center}.zjapp .status-new-tag{position:absolute;right:0;top:0;width:50px;height:50px;overflow:hidden;z-index:10}.zjapp .status-new-tag>.tag{position:absolute;right:-32px;bottom:22px;height:20px;line-height:20px;width:100px;color:#fff;font-size:12px;transform:rotate(45deg);text-align:center;border-width:1px;border-style:solid}.zjapp .time-status{font-size:10px;color:#999}",""])},c5a7:function(t,e){t.exports=function(t){return t&&t.__esModule?t:{default:t}}},ce46:function(t,e,a){(t.exports=a("690e")(!1)).push([t.i,'.zjapp .word-break[data-v-1d895117]{word-break:break-all}.zjapp .proj-title[data-v-1d895117]{margin-top:10px;height:46px;position:relative}.zjapp .proj-title[data-v-1d895117]:before{content:"";display:inline-block;width:4px;height:16px;position:relative;top:15px;left:0;background-color:#4275e8}.zjapp .proj-title .proj-name[data-v-1d895117]{line-height:46px;margin-left:15px;position:absolute;top:0;color:#333;font-size:16px}.zjapp .proj-title .proj-judgment[data-v-1d895117]{float:right}.zjapp .proj-title .proj-judgment span[data-v-1d895117]{color:#999;font-size:12px;display:inline-block;line-height:46px;position:relative}.zjapp .proj-title .proj-judgment span[data-v-1d895117]:last-child{right:15px}.zjapp .proj-title .proj-judgment span[data-v-1d895117]:first-child{right:28px}.zjapp .proj-title .proj-judgment-view[data-v-1d895117]{float:right;color:#999;font-size:14px;position:relative;right:15px;line-height:46px}.zjapp .proj-title .proj-overall-result[data-v-1d895117]{float:right;width:48px;height:19px;line-height:20px;background-color:#ff3c46;vertical-align:middle;text-align:center;position:relative;right:15px;top:14px;border-radius:4px;color:#fff;font-size:14px}.zjapp .item-process-accept-v2[data-v-1d895117]{padding:10px 0;margin:0 15px;line-height:20px}.zjapp .item-process-accept-v2 .icon[data-v-1d895117]{padding:10px;margin:0;width:40px;height:40px;line-height:20px;font-size:16px}.zjapp .item-process-accept-v2 .item-text[data-v-1d895117]{padding:0}.zjapp .item-process-accept-v2 .item-ele[data-v-1d895117]{padding:0;text-align:center;color:#c8c8c8}.zjapp .item-process-accept-v2 .item-detail-name[data-v-1d895117]{font-size:14px;line-height:20px;color:#333}.zjapp .item-process-accept-v2 .item-detail-content[data-v-1d895117]{font-size:12px;line-height:14px;color:#999;white-space:pre-wrap}.zjapp .item-process-accept-v2 .item-percent[data-v-1d895117]{padding:0 0 0 15px;font-size:14px}.zjapp .process-accept-input[data-v-1d895117]{position:relative;display:inline-block;vertical-align:top;width:60px;height:30px;border-radius:3px;text-align:center;font-size:14px;color:#333}.zjapp .process-accept-input input[data-v-1d895117]{width:100%;height:100%;padding:5px;text-align:center;background-color:transparent;pointer-events:none}.zjapp .process-accept-input input[readonly][data-v-1d895117]{background-color:transparent}.zjapp .process-accept-input input[data-v-1d895117]:disabled,.zjapp .process-accept-input input[disabled][data-v-1d895117]{background-color:transparent;opacity:1}.zjapp .input-exceed[data-v-1d895117]{border-color:#fff3f3;background-color:#fff3f3;color:#ff5050}.zjapp .input-exceed .number-input[data-v-1d895117]{color:#ff5050}.zjapp .process-accept-input.input-focus[data-v-1d895117]{border-color:#4275e8;box-shadow:0 0 8px 0 rgba(66,117,232,.37)}.zjapp .process-accept-input-show[data-v-1d895117]{position:absolute;width:100%;height:100%;top:0;left:0;text-align:center;line-height:30px;font-size:12px;color:#333;background-color:#fff;border-radius:3px;pointer-events:none}.zjapp .process-accept-input.input-exceed .process-accept-input-show[data-v-1d895117]{color:#ff5050;background-color:#fff3f3}@media screen and (max-width:360px){.zjapp .process-accept-input[data-v-1d895117]{width:58px}}.zjapp .proj-result-cont ul[data-v-1d895117]{width:100%;display:flex;padding:10px 0}.zjapp .proj-result-cont ul li[data-v-1d895117]{justify-content:center;width:100%;text-align:center;position:relative}.zjapp .proj-result-cont ul li span[data-v-1d895117]{display:block}.zjapp .proj-result-cont ul li span[data-v-1d895117]:first-child{color:#666;font-size:12px;height:17px;line-height:17px}.zjapp .proj-result-cont ul li span[data-v-1d895117]:nth-child(2){color:#333;font-size:14px;line-height:20px;margin-top:10px}.zjapp .proj-result-cont ul li[data-v-1d895117]:after{content:"";height:30px;width:1px;background-color:#ececec;display:inline-block;position:absolute;right:0;top:9px}.zjapp .item-photo-proj[data-v-1d895117]{margin-top:10px;margin-bottom:10px}.zjapp .item-photo-view[data-v-1d895117]{margin-top:10px}.zjapp .item-base.van-hairline--top[data-v-1d895117]{position:relative;background-image:none}.zjapp .icon-point[data-v-1d895117]{position:absolute;top:15px;left:0;width:4px;height:16px;background-color:#4275e8}.zjapp .point-content[data-v-1d895117]{font-size:14px;background-color:#f0f0f0;padding:10px;color:#666;border-radius:3px;word-wrap:break-word;white-space:pre-wrap}.zjapp .process-node-acceptor[data-v-1d895117] .item-label{width:45%}',""])},cf8c:function(t,e,a){"use strict";a("fdd5")},d0fb:function(t,e,a){"use strict";(function(t){var i=a("fd50"),n=a("bcc7"),s=a("515e"),o=a("e89f"),r=a("07d2"),c=a("7bac"),l=a("a7c3"),d=a("4360");e.a={name:"CheckGuideList",components:{Item:r.a},mixins:[o.a],store:d.a,props:{data:{type:String,default:""}},data:function(){return{show:!1,isLoading:!0,listData:[],module:"",itemId:"",batchId:"",sectionId:"",options:""}},computed:{moduleAttribute:function(){return this.$store.state.global.moduleAttribute}},mounted:function(){this.data=[]},methods:{openPopup:function(e){var a,n=this;for(var s in this.value=!0,this.show=!0,this.module=e.module,this.itemId=e.itemId,this.batchId=e.batchId,this.sectionId=e.sectionId,this.options=e.options,this.$emit("open"),e)this[s]=e[s];this.checkType={check:31,"check-safety":36,"check-quality":37,"measure-v3":41,process:32,"fly-inspect":101}[this.module];var o=!1;t.isEmpty(this.itemId)?!t.isEmpty(this.checkType)&&t.isEmpty(this.sectionId)?a=this.initByType():t.isEmpty(this.batchId)?t.isEmpty(this.options)?t.isEmpty(this.sectionId)?a=i.a.when():(o=!0,a=this.initByBidsection()):a=this.initByOptions():a=this.initByBatch():a=this.initById(),this.isLoading=!0,a.then((function(e){var a=n.moduleAttribute[n.module]||{};!t.isEmpty(a)&&a.setUsualItems&&o?c.a.getUserKey(n.mmkvCode()).then((function(t){t=null===t?e:n.mergeArray(n.deepClone(e),t),n.listData=t||[],n.isLoading=!1})):(n.listData=e||[],n.isLoading=!1)}))},mmkvCode:function(){var t=this.moduleAttribute[this.module]||{};return l.a[t.mmkv_item]+"_"+this.sectionId},mergeArray:function(e,a){var i=this;return t.filter(e,(function(e){var n=a[e.id];return t.isEmpty(e.subitem)||(e.subitem=i.mergeArray(e.subitem,a)),!t.isEmpty(n)||"desc"===e.type}))},closePopup:function(){this.value=!1,this.show=!1,this.$emit("close")},clickItem:function(t){t.subitem&&t.subitem.length?this.$set(t,"isOpen",!t.isOpen):"special-inspect"===this.module?s.a.openPopup({itemId:t.id,module:this.module}):s.a.openPopup({itemId:t.item_id,module:this.module})},initById:function(){var t=this;if("special-inspect"!==this.module)return n.a.getCheckItem(this.itemId,this.checkType).then((function(e){return e?t.sectionId?n.a.getBidSectionCheckItemListByCode(t.sectionId,e.code):n.a.getCheckItemTreeByCode(e.code):i.a.when()}))},initByType:function(){return n.a.getCheckItemGuidelineList(this.checkType)},initByBatch:function(){return i.a.when()},initByBidsection:function(){return n.a.getBidSectionCheckItemTreeByType(this.sectionId,this.checkType)},initByOptions:function(){return i.a.resolve(this.options)},deepClone:function(t){return JSON.parse(JSON.stringify(t))}}}}).call(this,a("391c"))},d185:function(t,e,a){"use strict";var i=a("fc9f"),n={getAllBuildingCheckItems:function(t){return i.a.query("SELECT             pp.id AS pp_item_id,             pp.name AS pp_item_name,             pc.id AS pc_item_id,             pc.name AS pc_item_name,             pc.full_name AS pc_full_name,             case when ifnull(bm.process_mode, '') != '' then bm.process_mode when ifnull(pc.process_mode, '') != '' then pc.process_mode else 1 end as process_mode         FROM problem_class pc         INNER JOIN problem_class pp ON pc.parent_id = pp.id         LEFT JOIN building_item_process_mode bm on pc.id = bm.item_id and bm.building_id = ?         WHERE pp.type = 44         AND ifnull(pp.parent_id, '') != ''         GROUP BY pc.id         ORDER BY pp.code, pc.code",[t])},getAllProblemByBuildingItem:function(t,e){return i.a.query("select pas.*, paf.floor as floor, paf.room_id as room_id             from process_acceptv2 pas             left join process_acceptv2_floor paf on paf.accept_id = pas.id             where building_id = ? and item_id = ? and ifnull(status, '') != ''",[t,e])},getProcessAcceptv2DataById:function(t){return i.a.queryOne("select * from process_acceptv2 where id = ?",[t])},getSelfDefinitionPlaceProcessData:function(t,e){return i.a.query("select * from process_acceptv2         where building_id = ? and item_id = ?         order by regist_date",[t,e])},getOneDetailByBuildingAndItem:function(t,e){return i.a.queryOne("select * from process_acceptv2 where building_id = ? and item_id = ? and ifnull(status, '') != ''",[t,e])},getSectionContractor:function(t){return i.a.queryOne("select c.* from section s join contractor c on c.id = s.contractor_id where s.id = ?",[t])},getCustomBuildById:function(t){return i.a.query("select a.*, p.id as parent_id, p.name as parent_name from location a         left join location p on p.id = a.parent_id         where a.id = ?",[t])},getBidsectionByCustom:function(t){return i.a.query("select bl.*, s.name as bidsection_name         from bidsection_location bl         left join section s on s.id = bl.bidsection_id         where bl.location_id = ?",[t])}};e.a=n},d474:function(t,e,a){"use strict";a.d(e,"a",(function(){return i}));var i={HAS_HOUSEHOLDS:1,NON_UNIT_WHOLE_LAYER:2,WHOLE_BUILDING:3,PILE_FOUNDATION:4,HAS_UNIT_WHOLE_LAYER:5,USER_DEFINED:6}},da1c:function(t,e,a){"use strict";a("163d");var i=a("65a8"),n={name:"ProblemHeader",props:{status:{type:String,default:""},statusText:{type:String,default:""},level:{type:String,default:""},isTimeout:{type:Boolean,default:!1},sentBackTimes:{type:[Number,String],default:0}},data:function(){return{edOptions:{}}},created:function(){var t=this;i.a.getOptions("紧急程度").then((function(e){t.edOptions=e}))}},s=(a("1f63"),a("17cc")),o=Object(s.a)(n,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",t._g({staticClass:"problem-detail-header border-bottom"},t.$listeners),[a("div",{staticClass:"status",class:{"待整改":"status-red","不合格":"status-red","已退回":"status-red","待复验":"status-orange","已放水待验收":"status-orange","检查中":"status-orange","待验收":"status-orange","已通过":"status-green","已整改":"status-green","已提交":"status-green","合格":"status-green","检查完毕":"status-green","已验收":"status-green","已关闭":"status-black","进度正常":"status-green","进度滞后":"status-red","验收中":"status-orange","已抽验":"status-green"}[t.status]},[t._v(t._s(t.statusText||t.status))]),"紧急"===t.level||"特急"===t.level?a("span",{staticClass:"urgent"},[t._v(t._s(t.edOptions[t.level]))]):t._e(),t.isTimeout?a("span",{staticClass:"timeout"},[t._v("超时")]):t._e(),t.sentBackTimes>0?a("span",{staticClass:"return"},[t._v("退回"+t._s(t.sentBackTimes)+"次")]):t._e(),t._t("operat")],2)}),[],!1,null,"0901aadd",null);e.a=o.exports},db6b2:function(t,e,a){(t.exports=a("690e")(!1)).push([t.i,'.zjapp .swipe-tabs[data-v-025feb99]{display:flex;flex-direction:column;flex:1;overflow:hidden}.zjapp .tabs[data-v-025feb99]{position:relative;display:flex;background-color:#fff}.zjapp .tab[data-v-025feb99]{flex:1;height:40px;line-height:20px;padding:10px;font-size:14px;text-align:center;box-sizing:border-box}.zjapp .tab-current[data-v-025feb99]{color:#4275e8}.zjapp .mark-line[data-v-025feb99]{position:absolute;bottom:0;left:0;width:20px;height:2px;margin-left:-10px;background-image:linear-gradient(90deg,#5ea2ff,#4f83eb 50%,#4275e8);transition:left .4s cubic-bezier(.1,.7,.1,1)}.zjapp .tabs-point[data-v-025feb99]{position:relative;z-index:1;height:40px;font-size:0;text-align:center;background-color:#fff;overflow:visible}.zjapp .tabs-scroll[data-v-025feb99]{position:relative;padding-bottom:3px;margin-bottom:-3px;white-space:nowrap;overflow-x:auto}.zjapp .tabs-scroll[data-v-025feb99]::-webkit-scrollbar{display:none}.zjapp .tab-point[data-v-025feb99]{display:inline-block;padding:10px 15px;line-height:20px;font-size:16px;color:#333;white-space:nowrap}.zjapp .tab-point.tab-current[data-v-025feb99]{position:relative;z-index:3;color:#4275e8}.zjapp .tab-point.tab-current[data-v-025feb99]:after{content:"";position:absolute;z-index:3;bottom:-3px;left:50%;margin-left:-3px;width:7px;height:7px;border-radius:50%;background-color:#4275e8}',""])},dc98:function(t,e,a){"use strict";a("0732")},dd16:function(t,e,a){"use strict";(function(t){e.a={name:"StatusText",props:{status:{type:String},text:{type:String},extend:{type:Object,default:function(){return{}}}},data:function(){return{classSet:t.extend({"草稿":"color-gray","暂存":"color-gray","检查中":"color-orange","待整改":"color-red","待复验":"color-orange","待验收":"color-red","待报验":"color-red","待申请进场":"color-red","待初验":"color-red","待送检":"color-red","待上传报告":"color-red","待退场":"color-red","待建设单位验收":"color-red","待区域验收":"color-red","供应链退回":"color-red","预创建":"color-status-blue","已提交":"color-green","已整改":"color-green","已验收":"color-green","已通过":"color-green","已退场":"color-gray","已关闭":"color-gray","非正常关闭":"color-gray","已退回":"color-red","已完成":"color-green","已甩项":"color-gray","检查完毕":"color-green","送检合格":"color-green","复验合格":"color-green","验收合格":"color-green","验收不合格":"color-red","未验收":"color-orange","待点评":"color-orange","已点评":"color-green","合格":"color-green","不合格":"color-red","进度正常":"color-green","进度滞后":"color-red","施工单位验收合格":"color-green","监理单位验收合格":"color-green","建设单位验收合格":"color-green","施工单位验收不合格":"color-red","监理单位验收不合格":"color-red","建设单位验收不合格":"color-red"},this.extend)}},mounted:function(){}}}).call(this,a("391c"))},e7ac:function(t,e,a){(t.exports=a("690e")(!1)).push([t.i,".zjapp .page-scroll[data-v-700082ea]{overflow-y:scroll}.zjapp .scroll-warp[data-v-700082ea]{position:relative}.zjapp .process-accept-v3-tabs[data-v-700082ea]{height:100%}.zjapp .process-accept-detail-header[data-v-700082ea]{background-color:#fff;padding:10px 15px}.zjapp .process-accept-detail-title[data-v-700082ea]{font-size:18px;color:#111;margin-bottom:10px;margin-top:10px}.zjapp .process-accept-detail-content[data-v-700082ea]{font-size:14px;color:#8c8c8c}.zjapp .label[data-v-700082ea]{margin-right:32px}.zjapp .label.build-unit[data-v-700082ea]{margin-right:0}.zjapp .text[data-v-700082ea]{display:inline-block}.zjapp .process-accept-v3-nodes .node-content[data-v-700082ea]{width:85px;height:120px;position:relative}.zjapp .process-accept-v3-nodes .node-content-first[data-v-700082ea]{width:50px}.zjapp .process-accept-v3-nodes .node-avatar[data-v-700082ea]{width:50px;height:50px;border:2px solid #dcdfe6;border-radius:50%;position:absolute;right:0;top:10px;background-repeat:no-repeat!important;background-size:100% 100%!important}.zjapp .process-accept-v3-nodes .icon-avatar-start[data-v-700082ea]{font-size:26px;color:#4275e8;line-height:46px;text-align:center}.zjapp .process-accept-v3-nodes .icon-avatar-complete[data-v-700082ea]{font-size:14px;color:#3db641;position:absolute;bottom:0;right:0;border-radius:50%;background-color:#fff}.zjapp .process-accept-v3-nodes .node-content-complete .node-avatar[data-v-700082ea]{border:2px solid #4275e8}.zjapp .process-accept-v3-nodes .node-content-complete .node-line[data-v-700082ea]{background:#4275e8}.zjapp .process-accept-v3-nodes .node-avatar-name[data-v-700082ea]{font-size:16px;line-height:46px;text-align:center;color:#999}.zjapp .process-accept-v3-nodes .node-avatar-complete-name[data-v-700082ea]{color:#4275e8}.zjapp .process-accept-v3-nodes .node-name[data-v-700082ea]{width:70px;height:20px;line-height:20px;font-size:16px;color:#666;text-align:center;position:absolute;right:-12px;top:70px}.zjapp .process-accept-v3-nodes .node-name span[data-v-700082ea]{word-wrap:break-word;word-break:break-all;overflow:hidden;text-overflow:ellipsis;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical}.zjapp .process-accept-v3-nodes .node-line[data-v-700082ea]{width:27px;height:1px;background:#dcdfe6;border-color:inherit;position:absolute;left:0;top:35px}.zjapp .status-tag[data-v-700082ea]{position:absolute;right:0;top:0;width:50px;height:50px;overflow:hidden;z-index:10}.zjapp .status-tag>.tag[data-v-700082ea]{position:absolute;right:-32px;bottom:22px;height:20px;line-height:20px;width:100px;color:#fff;font-size:12px;transform:rotate(45deg);text-align:center;border-width:1px;border-style:solid}.zjapp .process-accept-v3-nodes[data-v-700082ea] .van-tabs--line .van-tabs__wrap{height:120px}.zjapp .process-accept-v3-nodes[data-v-700082ea] .van-tabs__nav{padding-left:15px;padding-right:15px;padding-bottom:0}.zjapp .process-accept-v3-nodes[data-v-700082ea] .van-tabs__line{display:none}.zjapp .process-accept-v3-nodes[data-v-700082ea] .van-tabs .van-tab{flex:1 0 auto!important;padding-right:8px!important;padding-left:0!important}.zjapp .process-accept-v3-nodes[data-v-700082ea] .van-tabs .van-tab:first-child{max-width:58px}.zjapp .process-accept-v3-nodes[data-v-700082ea] .van-tabs .van-tab:not(:first-child){max-width:93px}.zjapp .process-accept-v3-nodes[data-v-700082ea] .van-ellipsis{overflow:visible;white-space:normal}.zjapp .process-accept-v3-nodes[data-v-700082ea] .van-tab--active .node-name{color:#4275e8}.zjapp .process-accept-v3-nodes[data-v-700082ea] .van-tab--active .node-avatar-name{color:#fff}.zjapp .process-accept-v3-nodes[data-v-700082ea] .van-tab--active .node-avatar{background-color:#4275e8;border:2px solid #4275e8}.zjapp .process-accept-v3-nodes[data-v-700082ea] .van-tab--active .icon-avatar-start{color:#fff}.zjapp .process-accept-v3-nodes[data-v-700082ea] .van-tab--active .node-line{background:#4275e8}.zjapp .process-accept-v3-tabs[data-v-700082ea] .btn-color-gray{color:#999}",""])},f1e4:function(t,e,a){"use strict";(function(t){a("5ab2"),a("e10e");var i=a("28f8"),n=(a("9e76"),a("6d57"),a("9a33"),a("f548"),a("cc57"),a("4ad6")),s=a("e89f"),o=a("bcc7"),r=a("3122"),c=a("6e1b"),l=a("c130"),d=a("0636");function p(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,i)}return a}function u(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?p(Object(a),!0).forEach((function(e){Object(i.a)(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):p(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}e.a={name:"CheckGuideDetail",components:{},mixins:[s.a],data:function(){return{show:!1,isLoading:!0,isImageDownloading:!1,title:"",content:[],module:"",itemId:""}},methods:{openPopup:function(e){var a=this;for(var i in this.value=!0,this.show=!0,this.module=e.module,this.itemId=e.itemId,this.$emit("open"),e)this[i]=e[i];this.checkType={check:31,"check-safety":36,"check-quality":37,"measure-v3":41,process:32,"fly-inspect":101}[this.module],this.isLoading=!0,("special-inspect"===this.module?c.a.getSpecialInspectCheckItemDetail(this.itemId):"templet-plan"===this.module?l.a.getTempletDetail(this.itemId):"material"===this.module?d.a.getMaterialDetail(this.itemId):o.a.getCheckItem(this.itemId,this.checkType)).then((function(e){console.log("checkitemData",e),a.checkitemData=e,a.title=e.full_name||e.name,"special-inspect"!==a.module&&"inspect"!==a.module&&"fly-inspect"!==a.module&&"material"!==a.module||(e.content=e.guideline||e.content);var i=e.content?e.content.trim():"";if(i=(i=(i=(i=(i=i.replace(/<\/p><p>/gm,"\n")).replace(/<p>/gm,"")).replace(/<\/p>/gm,"")).replace(/<br>/gm,"")).replace(/<br \/>/gm,""),/(<img[^\>]*>)/gm.test(i)){var n=i.split(/(<img[^\>]*>)/gm);(n=n.filter((function(t){return!!t}))).forEach((function(t,e){t&&!/^\s*\n/.test(t)&&e&&!/\n\s*$/.test(n[e-1])&&(n[e]="\n"+t)})),i=n.join("")}var s=i?i.split("\n"):[];a.content=t.map(s,(function(t,e){var a;if(/<img([\s\S]*)>/gm.test(t)){var i=t.split(/\ssrc="([^"]*)"/gm)[1],n=i?i.match(/[\w|-]{36}/gm)[0]:(new Date).getTime()+"-"+e;a={isImg:!0,src:"",url:i,status:"pending",id:n,ready:!0}}else a={isImg:!1,val:t};return a})),a.downloadImage(),a.isLoading=!1})).catch((function(t){$log.log(t)}))},closePopup:function(){this.value=!1,this.show=!1,this.$emit("close")},getThumbnail:function(t){return"pending"===t.status?r.a.IMAGE_LOADING:"rejected"===t.status?r.a.IMAGE_RELOAD:"dev"===APP_ENV?t.url:"fulfilled"===t.status?t.src:($log.log("检查指引-显示图片：",t),r.a.IMAGE_PLACEHOLD)},imgError:function(t,e){$log.error("检查指引-加载图片出现错误：",t);var a=u({},t);a.status="rejected",this.$set(this.content,e,a)},downloadImage:function(e){var a=this;e=e?[e]:this.imageList(),t.each(e,(function(e){var i=u({},e),n=t.map(a.content,(function(t){return t.id})).indexOf(e.id);r.a.isNeedDownload(e.url).then((function(t){t?r.a.download(e.url).then((function(t){i.status="fulfilled",i.src=r.a.fixUrl(t),a.$set(a.content,n,i)})).catch((function(t){$log.error("检查指引-下载图片：",t)})):(i.status="fulfilled",i.src=r.a.fixUrl(r.a.getPathFromUrl(e.url)),a.$set(a.content,n,i))}))}))},imageList:function(){return t.filter(this.content,(function(t){return t.isImg}))},imgClick:function(e){var a=this;if("pending"===e.status)return!1;if("rejected"===e.status)return this.downloadImage(e),$log.log("检查指引-点击重新加载-重新下载图片：",e),!1;var i=this.imageList(),s=t.map(i,(function(t){return t.id})).indexOf(e.id);i=t.map(i,(function(t){return a.getThumbnail(t)})),n.a.openImageBrowser(i,s)}}}}).call(this,a("391c"))},f24f:function(t,e,a){"use strict";e.__esModule=!0,e.isNumber=function(t){return/^\d+(\.\d+)?$/.test(t)},e.isNaN=function(t){if(Number.isNaN)return Number.isNaN(t);return t!=t}},f369:function(t,e,a){"use strict";var i=a("fd50"),n=a("bcc7"),s=a("329b"),o=a("d0fb").a,r=(a("9b25"),a("17cc")),c=Object(r.a)(o,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("transition",{attrs:{name:"slide-right"}},[t.show?a("page-content",{attrs:{mode:"dialog",title:"检查指引","on-close":t.closePopup}},[!t.isLoading&&t.listData.length?a("div",{staticClass:"page-scroll"},t._l(t.listData,(function(e,i){return a("div",{key:i},[a("item",{attrs:{border:"bottom","icon-right":e.subitem&&e.subitem.length?e.isOpen?"arrow-up":"arrow-down":"arrow-right"},on:{click:function(a){t.clickItem(e)}}},[a("div",{staticClass:"item-text fw-b color-blue one-line"},[t._v(t._s(e.item_name))])]),e.isOpen?t._l(e.subitem,(function(e,i){return a("div",{key:i,staticClass:"sublist"},[a("item",{staticClass:"pl0",attrs:{border:"bottom","icon-right":e.subitem&&e.subitem.length?e.isOpen?"arrow-up":"arrow-down":"arrow-right"},on:{click:function(a){t.clickItem(e)}}},[a("div",{staticClass:"item-text checkitem-list-name"},[t._v(t._s(e.item_name))])]),e.isOpen?t._l(e.subitem,(function(e,i){return a("div",{key:i,staticClass:"sublist"},[a("item",{staticClass:"pl0",attrs:{border:"bottom","icon-right":e.subitem&&e.subitem.length?e.isOpen?"arrow-up":"arrow-down":"arrow-right"},on:{click:function(a){t.clickItem(e)}}},[a("div",{staticClass:"item-text checkitem-list-name"},[t._v(t._s(e.item_name))])]),e.isOpen?t._l(e.subitem,(function(e,i){return a("div",{key:i,staticClass:"sublist"},[a("item",{staticClass:"pl0",attrs:{border:"bottom","icon-right":e.subitem&&e.subitem.length?e.isOpen?"arrow-up":"arrow-down":"arrow-right"},on:{click:function(a){t.clickItem(e)}}},[a("div",{staticClass:"item-text checkitem-list-name"},[t._v(t._s(e.item_name))])])],1)})):t._e()],2)})):t._e()],2)})):t._e()],2)}))):t._e(),a("loading-status",{attrs:{"is-loading":t.isLoading,"is-empty":!t.listData.length,"empty-text":"没有检查项"}})],1):t._e()],1)}),[],!1,null,"74102c05",null).exports,l=!1;l||(l=new(s.default.extend(c))({el:document.createElement("div")}),document.body.appendChild(l.$el));var d=l,p=a("515e"),u=a("91c1").a,h=(a("dc98"),Object(r.a)(u,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.show?a("div",{staticClass:"main",style:{top:t.contentTop+"px"}},[a("i",{staticClass:"arrow"}),a("div",{staticClass:"content",on:{click:function(e){return e.target!==e.currentTarget?null:t.closePopup(e)}}},[a("transition",{attrs:{name:"slide-down"},on:{enter:function(e){t.isOpening=!0},"after-enter":function(e){t.isOpening=!1},leave:function(e){t.isClosing=!0},"after-leave":t.afterClose}},[t.showList?a("div",{staticClass:"box",style:{height:t.listHeight+"px"}},t._l(t.data,(function(e,i){return a("div",{key:i,class:{"border-bottom":t.data.length>1,"box-single":1===t.data.length}},[a("div",{staticClass:"detail-hd",class:{"border-bottom":t.data.length<=1,"detail-hd-single":t.data.length<=1},on:{click:function(a){t.toggleItem(e)}}},[t.data.length>1?a("i",{class:{"detail-arrow-right":!e.isOpen,"detail-arrow-down":e.isOpen}}):t._e(),a("div",{staticClass:"detail-title"},[t._v(t._s(e.name))])]),t.data.length<=1||e.isOpen?a("div",{staticClass:"detail-bd",class:{"detail-bd-single":t.data.length<=1}},[t._l(e.textArr,(function(e,i){return a("p",{key:i,staticClass:"text-line"},[t._v("\n              "+t._s(e)+"\n            ")])})),a("item-img-list",{attrs:{editabled:!1},model:{value:e.contentImage,callback:function(a){t.$set(e,"contentImage",a)},expression:"item.contentImage"}}),a("loading-status",{attrs:{"is-empty":!e.textArr.length&&!e.contentImage.length,"empty-text":"PC端未设置检查指引"}})],2):t._e()])}))):t._e()])],1)]):t._e()}),[],!1,null,"2cac8864",null).exports),m=!1;m||(m=new(s.default.extend(h))({el:document.createElement("div")}),document.body.appendChild(m.$el));var f=m,b={name:"CheckGuide",components:{},props:{module:{type:String,default:""},mode:{type:String,default:"page"},itemId:{type:String,default:""},itemIds:{type:Array,default:function(){return[]}},batchId:{type:String,default:""},sectionId:{type:String,default:""},options:{type:Array,default:function(){return[]}},optionsPromise:{type:Function,default:function(){}},beforeOpen:{type:Function,default:function(){}}},data:function(){return{isLoading:!1}},methods:{openCheckGuide:function(){var t=this,e=this.beforeOpen&&this.beforeOpen();e instanceof Promise||(e=Promise.resolve(e)),e.then((function(e){!1!==e&&("drop"===t.mode?f.openPopup({itemIds:t.itemIds,el:t.$refs["check-guide-btn"],options:t.options}):("templet-plan"===t.module?i.a.when(!1):t.itemId&&t.sectionId?n.a.hasChildSectionCheckItem(t.itemId,t.sectionId):t.itemId?n.a.hasChildCheckItem(t.itemId):i.a.when(!0)).then((function(e){e?d.openPopup({module:t.module,itemId:t.itemId,batchId:t.batchId,sectionId:t.sectionId,options:t.options}):p.a.openPopup({itemId:t.itemId,module:t.module})})))}))}}},g=Object(r.a)(b,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{ref:"check-guide-btn",staticClass:"header-btn",on:{click:function(e){t.openCheckGuide()}}},[a("icon",{attrs:{name:"nav-info"}})],1)}),[],!1,null,null,null);e.a=g.exports},f3d7:function(t,e,a){"use strict";a("9120")},f766:function(t,e,a){"use strict";(function(t){a("ed63"),a("163d"),a("2b45"),a("e204"),a("cc57");var i,n,s=a("07d2"),o=a("cf09"),r=a("6f9e"),c=a("4360"),l=[],d=[0,1,2,3,4,5,6,7,8,9,".","-"];function p(t){return null!=t&&""!==t}e.a={name:"NumberKeyboard2",components:{Item:s.a},data:function(){return{show:!1,isClosing:!1,zIndex:0,willOpenParams:null,inputComponent:"",hasPrev:!1,hasNext:!1,isDisabledMinus:!1,isDisabledPoint:!1}},computed:{isIOSBezelLess:function(){return c.a.state.app.isIOSBezelLess}},watch:{isClosing:function(t){var e=this;this.$nextTick((function(){!t&&e.willOpenParams&&e.openKeyboard(e.willOpenParams)}))}},created:function(){r.a.$on("routerBeforeEach",this.closeKeyboard),r.a.$on("pageContentClick",this.closeKeyboard)},destroyed:function(){r.a.$off("routerBeforeEach",this.closeKeyboard),r.a.$off("pageContentClick",this.closeKeyboard)},methods:{openKeyboard:function(e){if(this.isClosing)this.willOpenParams=e;else{this.willOpenParams=null,this.show=!0,this.inputComponent=e.inputComponent,this.zIndex=o.a?++o.a.zIndex:1,c.a.commit("global/SET_IS_NUMBER_INPUT_OPEN",!0);var a=function t(e){return e&&e.$parent?"Scroller"===e.$parent.$options.name?e.$parent:t(e.$parent):null}(this.inputComponent),i=a&&a.$el.querySelectorAll(".component-number-input.first");if(l=[],i&&t.each(i,(function(t){l.push(t.__vue__)})),t.isEmpty(l))this.hasPrev=!1,this.hasNext=!1;else{var n=t.findIndex(l,this.inputComponent);this.hasPrev=n>0,this.hasNext=n<l.length-1}this.setKeysStatus(this.inputComponent.value,this.inputComponent.keyboardType),r.a.$emit("numberKeyboardOpen",this.inputComponent)}},closeKeyboard:function(){this.show&&(this.show=!1,r.a.$emit("numberKeyboardClose"))},startClose:function(){this.isClosing=!0},onClose:function(){this.isClosing=!1,c.a.commit("global/SET_IS_NUMBER_INPUT_OPEN",!1),r.a.$emit("afternumberKeyboardClose")},input:function(t){"-"===t&&this.isDisabledMinus||"."===t&&this.isDisabledPoint||this.$emit("keyboardInput",t)},delete:function(t){var e=this;this.$emit("keyboardDelete"),i=setTimeout((function(){e.$emit("keyboardClear")}),500)},remove:function(){this.$emit("keyboardRemove")},add:function(){this.$emit("keyboardAdd")},prev:function(){var e=t.findIndex(l,this.inputComponent),a=l[e-1];a&&(r.a.$emit("numberInputBlur"),a.setFocus(),this.openKeyboard({inputComponent:a}))},next:function(){var e=this.inputComponent;if(e.index>0)try{e=this.inputComponent.$el.parentNode.parentNode.childNodes[0].childNodes[0].__vue__}catch(t){console.error(t)}var a=t.findIndex(l,e,!1),i=l[a+1];i&&(r.a.$emit("numberInputBlur"),i.setFocus(),this.openKeyboard({inputComponent:i}))},setKeysStatus:function(t,e){t=p(t)?t.toString():"",p(t)||e.indexOf("positive")>=0?this.isDisabledMinus=!0:this.isDisabledMinus=!1,!/\d/.test(t)||t.indexOf(".")>=0||e.indexOf("int")>=0?this.isDisabledPoint=!0:this.isDisabledPoint=!1},setKeyActiving:function(t,e){t&&t.classList.contains("keys")&&!t.classList.contains("disabled")&&(e?t.classList.add("activing"):t.classList.remove("activing"))},keyTouchstart:function(t){var e=t&&t.target;if(e){+new Date,n=e,this.setKeyActiving(e,!0);var a=e.getAttribute("direct");"closeKeyboard"!==a&&this.clickHandler(a)}},keyTouchend:function(t){var e=t&&t.target;if(e){this.setKeyActiving(e,!1),this.setKeyActiving(n,!1);var a=e.getAttribute("direct");"delete"===a?clearTimeout(i):"closeKeyboard"===a&&this.clickHandler(a)}},clickHandler:function(t){t&&(isNaN(t)||(t=Number(t)),"function"==typeof this[t]?this[t]():d.includes(t)&&this.input(t))}}}}).call(this,a("391c"))},fa4f:function(t,e,a){"use strict";var i=a("4aef"),n=a("967a"),s={name:"ItemList",components:{StatusText:i.a},props:{img:{type:String,default:""},title:{type:String,default:""},detail:{type:String,default:""},footer:{type:String,default:""},status:{type:String,default:""},isShowNewStatus:{type:Boolean,default:!1},statusText:{type:String,default:""},statusClassSet:{type:Object,default:function(){return{}}},typeTag:{type:String,default:""},isUnread:{type:Boolean,default:!1},isTimeout:{type:Boolean,default:!1},isUrgent:{type:Boolean,default:!1},isReturn:{type:Boolean,default:!1},repairDeadline:{type:String,default:null}},data:function(){return{repairDeadlineStatus:n.a.REPAIR_DEADLINE_STATUS.status}},computed:{bgNewClass:function(){return{"草稿":"bg-gray7 b-color","暂存":"bg-gray b-color","检查中":"bg-orange b-color","待整改":"bg-red2 b-color ","待复验":"bg-purple b-color","待验收":"bg-red b-color","待报验":"bg-red b-color","待申请进场":"bg-red b-color","待初验":"bg-red b-color","待送检":"bg-red b-color","待上传报告":"bg-red b-color","待退场":"bg-red b-color","待建设单位验收":"bg-red b-color","待区域验收":"bg-red b-color","已提交":"bg-green b-color","已整改":"bg-green b-color","已验收":"bg-green b-color","已通过":"bg-green2 b-color","已退场":"bg-gray b-color","已关闭":"bg-gray7 b-color","非正常关闭":"bg-gray b-color","已退回":"bg-red b-color","已完成":"bg-green b-color","已甩项":"bg-gray b-color","检查完毕":"bg-green b-color","送检合格":"bg-green b-color","复验合格":"bg-green b-color","验收合格":"bg-green b-color","验收不合格":"bg-red b-color","未验收":"bg-orange b-color","待点评":"bg-orange b-color","已点评":"bg-green b-color","合格":"bg-green b-color","不合格":"bg-red b-color","进度正常":"bg-green2 b-color","进度滞后":"bg-red2 b-color","施工单位验收合格":"bg-green b-color","监理单位验收合格":"bg-green b-color","建设单位验收合格":"bg-green b-color","施工单位验收不合格":"bg-red b-color","监理单位验收不合格":"bg-red b-color","建设单位验收不合格":"bg-red b-color"}}},activated:function(){}},o=(a("19a9"),a("17cc")),r=Object(o.a)(s,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",t._g({staticClass:"item-list border-bottom"},t.$listeners),[t.isShowNewStatus?a("div",{staticClass:"status-new-tag"},[a("div",{staticClass:"tag",class:t.bgNewClass[t.status]},[t._v("\n      "+t._s(t.status)+"\n    ")])]):t._e(),t.img?a("div",{staticClass:"img",style:{"background-image":"url("+t.img+")"}}):t._e(),a("div",{staticClass:"item-list-con"},[a("h2",{staticClass:"title"},[t.isUnread?a("i",{staticClass:"icon-unread"}):t._e(),t.isTimeout?a("i",{staticClass:"icon-timeout"},[t._v("\n        超\n      ")]):t._e(),t.isUrgent?a("i",{staticClass:"icon-urgent"},[t._v("\n        急\n      ")]):t._e(),t.isReturn?a("i",{staticClass:"icon-return"},[t._v("\n        退\n      ")]):t._e(),t.$slots.title?t._t("title"):[t.typeTag?a("span",{staticClass:"type-tag"},[t._v(t._s(t.typeTag))]):t._e(),t._v("\n        "+t._s(t.title||"")+"\n      ")]],2),a("p",{staticClass:"text"},[t._v(t._s(t.detail||""))]),t.$slots.footer?t._t("footer"):a("p",{staticClass:"time",domProps:{innerHTML:t._s(t.footer||"")}})],2),t.status&&!t.isShowNewStatus?a("div",{staticClass:"item-list-status"},[a("status-text",{attrs:{status:t.status,text:t.statusText,extend:t.statusClassSet}}),t.repairDeadline&&t.repairDeadlineStatus.includes(t.status)?a("p",{staticClass:"time-status"},[t._v("\n      "+t._s(t._f("timeStatus")(t.repairDeadline))+"\n    ")]):t._e()],1):t._e()])}),[],!1,null,null,null);e.a=r.exports},fc22:function(t,e,a){"use strict";a("7db0")},fdd5:function(t,e,a){var i=a("3455");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);(0,a("85cb").default)("7fc562b9",i,!0,{sourceMap:!1,shadowMode:!1})},fe9e:function(t,e,a){"use strict";a("3cd8")}}]);