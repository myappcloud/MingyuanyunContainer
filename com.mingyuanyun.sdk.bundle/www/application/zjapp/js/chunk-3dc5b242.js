(window.webpackJsonp_module_entry_zjapp_=window.webpackJsonp_module_entry_zjapp_||[]).push([["chunk-3dc5b242"],{"0184":function(e,t,r){var n=r("5d43");"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);(0,r("85cb").default)("b23360de",n,!0,{sourceMap:!1,shadowMode:!1})},"337d":function(e,t,r){e.exports=r.p+"img/ncov-lin.c64d065a.png"},"5d43":function(e,t,r){(e.exports=r("690e")(!1)).push([e.i,".zjapp .item-part-title[data-v-1ff5e879]{align-items:center}.zjapp .item-part-title .item-text[data-v-1ff5e879]{font-size:16px}.zjapp .icon-part[data-v-1ff5e879]{position:absolute;top:15px;left:0;width:4px;height:16px;background-color:#4275e8}.zjapp .scroller-ncov-temperature[data-v-1ff5e879]{padding:10px 20px;background:#fff}.zjapp .menu-list[data-v-1ff5e879]{display:flex;align-items:center;padding:18px 0}.zjapp .menu-list .module-img[data-v-1ff5e879]{position:relative;flex:0 0 48px;width:48px;height:48px;background:no-repeat 50%;background-size:cover;margin:0 20px 0 0}.zjapp .menu-list .module-content[data-v-1ff5e879]{flex:1;overflow:hidden}.zjapp .menu-list .module-content .module-place[data-v-1ff5e879]{width:100%;line-height:22px;font-weight:500;margin:1px 0 5px 0;font-size:16px;color:#333;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.zjapp .menu-list .module-content .module-describe[data-v-1ff5e879]{line-height:20px;color:#999}.zjapp .menu-list .arrow-icon[data-v-1ff5e879]{color:#c8c8c8}.zjapp .footer[data-v-1ff5e879]{margin-top:20px;text-align:center}[data-v-1ff5e879] .btn-history{height:28px;line-height:26px;border-radius:14px;padding:0 12px}[data-v-1ff5e879] .btn-history .van-button__text{color:#666}.zjapp .scroll-warp[data-v-1ff5e879]{background:#fff}",""])},7604:function(e,t,r){"use strict";r.r(t);r("cc57");var n=r("6144"),o=r("07d2"),a=r("774b"),i=r("e2a7"),c=(r("fa4f"),r("6bf2"),r("6371")),s=r.n(c),d=r("162a"),u=r("ed08"),l=[{type:1,moduleName:"扫一扫",icon:r("c34b"),describe:"扫描防疫通行卡快速进行进出场登记",clickEvent:"scanQRCode",routerName:""},{type:2,moduleName:"从列表中查找",icon:r("6dc6"),describe:"从返程人员列表中查找",routerName:"ncovEnterList"},{type:3,moduleName:"临时进出场人员",icon:r("337d"),describe:"添加临时进出场人员并进行进出场登记",routerName:"ncovEnterAdd"}],p={name:"NcovEnter",components:{Scroller:a.default,Item:o.default},data:function(){return{bidsectionId:"",isLoading:!0,menuList:l,QRCodeUserId:"",title:""}},computed:{projId:function(){return this.$store.state.global.currentProject.id},projName:function(){return this.$store.state.global.currentProject.name},hideSearch:function(){return this.$store.state.global.allGrayRelease.DisableFYBSearchFromList}},activated:function(){var e=n.a.getUserObject("ncov-index-section-default"+this.projId)||{};this.title=this.projName+e.name,this.bidsectionId=e.id||"",this.hideSearch?this.menuList=l.filter((function(e){return 2!==e.type})):this.menuList=l},methods:{menuClick:function(e){e.clickEvent&&this[e.clickEvent]?this[e.clickEvent]():e.routerName&&this.navigatorTo(e.routerName)},toHistory:function(){this.$router.push({name:"NcovEnterHistory"})},navigatorTo:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.$router.push({name:e,query:t})},scanQRCode:function(){var e=this;if(window.MBarcode&&window.MBarcode.scanQRCode){var t=cordova.require("cordova/plugin_list");if(t&&u.a.versionCompare(t.metadata["com.mysoft.mbarcode"],"1.2.4")>=0){var r=this;MBarcode.scanQRCode({onCancel:function(){console.log("onCancel")},onCannotScan:function(){console.log("onCannotScan")},onSuccess:function(e){if($log.log("扫码结果 ==> ",e),e)try{var t=JSON.parse(e);if(t.nc_user_id)return d.a.request("/online/ncov-approach/get-return-trip",{user_id:t.nc_user_id,bidsection_id:r.bidsectionId}).then((function(e){e?r.$router.push({name:"ncovEnterAdd",query:{id:t.nc_user_id}}):r.$router.push({name:"ncovEnterScanError"})}));r.$router.push({name:"ncovEnterScanError"})}catch(t){var n=s()(e,!0);if(n&&n.query&&n.query.nc_user_id)return d.a.request("/online/ncov-approach/get-return-trip",{user_id:n.query.nc_user_id,bidsection_id:r.bidsectionId}).then((function(e){e?r.$router.push({name:"ncovEnterAdd",query:{id:n.query.nc_user_id}}):r.$router.push({name:"ncovEnterScanError"})}));r.$router.push({name:"ncovEnterScanError"})}else i.a.alert("获取二维码信息失败")},onError:function(e){console.log("onError",e),$log.log("扫码失败 --\x3e",e),e&&1100===e.errCode?i.a.alert("该操作需要开启相机权限，请在设置里面开启"):i.a.alert("打开扫码功能失败")}})}else MBarcode.scanQRCode((function(t){if($log.log("扫码结果 ==> ",t),t)try{var r=JSON.parse(t);if(r.nc_user_id)return d.a.request("/online/ncov-approach/get-return-trip",{user_id:r.nc_user_id,bidsection_id:e.bidsectionId}).then((function(t){t?e.$router.push({name:"ncovEnterAdd",query:{id:r.nc_user_id}}):e.$router.push({name:"ncovEnterScanError"})}));e.$router.push({name:"ncovEnterScanError"})}catch(r){var n=s()(t,!0);if(n&&n.query&&n.query.nc_user_id)return d.a.request("/online/ncov-approach/get-return-trip",{user_id:n.query.nc_user_id,bidsection_id:e.bidsectionId}).then((function(t){t?e.$router.push({name:"ncovEnterAdd",query:{id:n.query.nc_user_id}}):e.$router.push({name:"ncovEnterScanError"})}));e.$router.push({name:"ncovEnterScanError"})}else i.a.alert("获取二维码信息失败")}),(function(e){$log.log("扫码失败 --\x3e",e),e&&1100===e.errCode?i.a.alert("该操作需要开启相机权限，请在设置里面开启"):i.a.alert("打开扫码功能失败")}),{isFlashSwitchShow:!0})}else i.a.alert("打开扫码功能失败")}}},f=(r("9164"),r("17cc")),m=Object(f.a)(p,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("page-content",{attrs:{title:"人员进出场登记","show-go-root":!0}},[e.hideSearch?e._e():r("div",{staticClass:"header-btn",attrs:{slot:"header-bar-right"},on:{click:function(t){e.navigatorTo("ncovEnterSearch")}},slot:"header-bar-right"},[r("icon",{attrs:{name:"nav-search"}})],1),r("item",{staticClass:"item-part-title"},[r("i",{staticClass:"icon-part"}),r("div",{staticClass:"item-text"},[e._v(e._s(e.title))])]),r("scroller",{staticClass:"scroller-ncov-temperature mt10"},[e._l(e.menuList,(function(t,n){return r("div",{key:n,staticClass:"menu-list border-bottom",on:{click:function(r){e.menuClick(t)}}},[r("div",{staticClass:"module-img",style:{"background-image":"url("+t.icon+")"}}),r("div",{staticClass:"module-content"},[r("p",{staticClass:"module-place"},[e._v(e._s(t.moduleName))]),r("div",{staticClass:"module-describe"},[e._v(e._s(t.describe))])]),r("div",{staticClass:"arrow-icon"},[r("icon",{attrs:{name:"arrow-right"}})],1)])})),r("div",{staticClass:"footer"},[r("van-button",{staticClass:"btn-history",attrs:{round:"",type:"default",color:"#dcdcdc",size:"small",plain:""},on:{click:function(t){e.navigatorTo("NcovEnterHistory")}}},[e._v("\n        历史记录\n      ")])],1)],2)],1)}),[],!1,null,"1ff5e879",null);t.default=m.exports},9164:function(e,t,r){"use strict";r("0184")}}]);