(window.webpackJsonp_module_entry_zjapp_=window.webpackJsonp_module_entry_zjapp_||[]).push([["report-process-accept-v3"],{"1c69":function(t,e,r){"use strict";(function(t){r("5ab2"),r("6d57"),r("e10e");var a=r("28f8"),i=r("07d2"),o=r("774b"),n=r("fd50"),c=(r("6bf2"),r("1b7e")),s=(r("162a"),r("2e68")),d=r("bd36"),l=r("c77f");function p(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,a)}return r}function u(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?p(Object(r),!0).forEach((function(e){Object(a.a)(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):p(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}e.a={name:"ReportProcessAcceptV3Index",components:{item:i.a,Scroller:o.a,conditionFilter:s.a},data:function(){return{isLoading:!0,emptyTips:"",errorType:"report",reportData:[],fixedHeadTop:0,fixedHeadLeft:0,showFixedHead:!0,showFixedHeadPatch:!0,showFixedSlide:!0,showFixedNook:!0,showFixedNookX:!0,buildList:[],checkList:[]}},computed:{projectSelected:function(){return this.$route.query.proj_id?{id:this.$route.query.proj_id}:this.$store.state.global.currentReportProject}},activated:function(){this.fixedHeadTop=0,this.fixedHeadLeft=0,this.$router.isBack||(this.getData(),this.getCheckItemData(),this.getBuildingData())},methods:{touchFun:function(t){t.stopPropagation()},onScrollX:function(t){var e=t&&t.target?t.target.scrollLeft:0;e>=0?(this.fixedHeadLeft=e,this.showFixedSlide=!0,this.showFixedNookX=!0):(this.fixedHeadLeft=0,this.showFixedSlide=!1,this.showFixedNookX=!1)},getData:function(){var e=this;return this.isLoading=!0,this.fixedHeadTop=0,this.fixedHeadLeft=0,this.emptyTips="",this.reportData=[],this.errorType="report",c.a.getHasNetwork().then((function(t){if(!t)return n.a.reject({errmsg:"当前无网络连接"})})).then((function(){var r=e.$store.getters["defaultValues/getFilter"]||{},a={projId:e.projectSelected.id||"",bidsectionId:e.$route.query.bidsection_id||""};return r.projId===e.projectSelected.id&&r.currentBuild&&r.currentBuild.length>0&&(a.buildingId=r.currentBuild.map((function(t){return t.id})).join()),r.currentCheckList&&!t.isEmpty(r.currentCheckList)&&(a.itemId=String(t.map(r.currentCheckList,(function(t){return t.id})))),r.startDate&&(a.startDate=r.startDate),r.endDate&&(a.endDate=r.endDate),r.currentStatus&&r.currentStatus.value&&(a.status=r.currentStatus.value),console.log({params:a}),Object(l.j)(a).then((function(r){t.each(r,(function(t){"6"===t.process_mode&&(t.floor=t.inspection_lot_name,t.building_name="/")})),e.reportData=r||[],t.isEmpty(r)&&(e.emptyTips="没有报表数据"),e.isLoading=!1}))})).catch((function(t){e.emptyTips=t.errmsg||"获取数据失败",e.errorType="error",e.isLoading=!1}))},getCheckItemData:function(){var t=this,e=this.$route.query.proj_id;return Object(l.i)({type:44,proj_id:e||this.projectSelected.id}).then((function(e){t.checkList=e.children&&e.children||[]}))},getBuildingData:function(){var t=this,e=this.$route.query.proj_id,r=this.$route.query.bidsection_id||"";return Object(l.b)({proj_id:e||this.projectSelected.id,bidsection_id:r}).then((function(e){t.buildList=e.map((function(t){return u(u({},t),{},{id:t.building_id,name:t.full_name})}))||[]}))},openFilter:function(){var t=this,e=this.$store.getters["defaultValues/getFilter"]||{};e.projId!==this.projectSelected.id&&(e.currentBuild={id:"",name:"全部"}),console.log("filterData",e),this.$refs["condition-filter"].open({startDate:e.startDate||"",endDate:e.endDate||"",dateType:e.dateType||1,currentBuild:e.currentBuild||d.a,currentStatus:e.currentStatus||{value:"",label:"全部"},currentCheckList:e.currentCheckList||[],onConfirm:function(e){console.log("filterData => ",e),e&&t.$store.commit("defaultValues/SET_REPORT_PROCESS_FILTER",e),t.getData()}})},goAccept:function(t){this.$router.push({name:"ProcessAcceptV3Edit",query:{accept_id:t.id,deliver_type:t.process_mode,item_id:t.item_id,isReport:!0}})}}}}).call(this,r("391c"))},"5d47":function(t,e,r){var a=r("d87c");"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);(0,r("85cb").default)("02eae3cf",a,!0,{sourceMap:!1,shadowMode:!1})},a295:function(t,e,r){"use strict";r.r(e);var a=r("1c69").a,i=(r("adae"),r("17cc")),o=Object(i.a)(a,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("page-content",{attrs:{title:"工序验收"}},[r("div",{staticClass:"header-btn",attrs:{slot:"header-bar-right"},on:{click:t.openFilter},slot:"header-bar-right"},[r("icon",{attrs:{name:"nav-filter"}})],1),!t.isLoading&&t.reportData.length?r("div",{staticClass:"table-wrap"},[r("table",{directives:[{name:"show",rawName:"v-show",value:t.showFixedHeadPatch,expression:"showFixedHeadPatch"}],staticClass:"table fixed-head",style:{transform:"translateX("+-t.fixedHeadLeft+"px)"}},[r("thead",[r("tr",{staticClass:"border-bottom border-top"},[r("th",{staticClass:"border-right ncov-report-table-title"},[t._v("楼栋")]),r("th",{staticClass:"border-right"},[t._v("部位")]),r("th",{staticClass:"border-right"},[t._v("工序")]),r("th",{staticClass:"border-right"},[t._v("报验时间")]),r("th",{staticClass:"border-right"},[t._v("状态")])])])]),r("scroller",[t.reportData&&t.reportData.length?r("div",{staticClass:"table-content"},[r("div",{staticClass:"scroll-y"},[r("div",{staticClass:"scroll-x",on:{touchmove:t.touchFun,scroll:t.onScrollX}},[r("table",{staticClass:"table"},[r("thead",[r("tr",{staticClass:"border-bottom"},[r("th",{staticClass:"border-right ncov-report-table-title"},[t._v("楼栋")]),r("th",{staticClass:"border-right"},[t._v("部位")]),r("th",{staticClass:"border-right"},[t._v("工序")]),r("th",{staticClass:"border-right"},[t._v("报验时间")]),r("th",{staticClass:"border-right"},[t._v("状态")])])]),r("tbody",[t._l(t.reportData,(function(e,a){return[r("tr",{key:a,staticClass:"border-bottom",on:{click:function(r){t.goAccept(e)}}},[r("td",{staticClass:"border-right ncov-report-table-title"},[r("span",{staticClass:"name"},[t._v(t._s(e.building_name))])]),r("td",{staticClass:"border-right"},[t._v(t._s(e.floor))]),r("td",{staticClass:"border-right"},[t._v(t._s(e.item_name))]),r("td",{staticClass:"border-right"},[t._v(t._s(t._f("formatDate")(e.regist_date,"YYYY-MM-DD")))]),r("td",{staticClass:"border-right"},[t._v(t._s(e.status))])])]}))],2)])])])]):t._e()])],1):t._e(),r("condition-filter",{ref:"condition-filter",attrs:{build:t.buildList,"check-list":t.checkList,"building-select-is-multiple":!0,"auto-select-all-when-open":!1}}),r("loading-status",{attrs:{"is-loading":t.isLoading,type:t.errorType,"is-empty":!t.isLoading&&!t.reportData.length,"empty-text":t.emptyTips||"没有报表数据"}})],1)}),[],!1,null,"5d425e2f",null);e.default=o.exports},adae:function(t,e,r){"use strict";r("5d47")},c77f:function(t,e,r){"use strict";r.d(e,"i",(function(){return c})),r.d(e,"h",(function(){return s})),r.d(e,"a",(function(){return d})),r.d(e,"f",(function(){return l})),r.d(e,"g",(function(){return p})),r.d(e,"e",(function(){return u})),r.d(e,"n",(function(){return f})),r.d(e,"o",(function(){return h})),r.d(e,"b",(function(){return b})),r.d(e,"j",(function(){return v})),r.d(e,"k",(function(){return g})),r.d(e,"c",(function(){return w})),r.d(e,"d",(function(){return x})),r.d(e,"l",(function(){return j})),r.d(e,"p",(function(){return m})),r.d(e,"m",(function(){return _}));var a=r("5e8d"),i=r("162a"),o=r("bcc78"),n=r("da71");function c(t){return Object(a.a)().then((function(){var e=o.a.commonGetProblemClassTree.url;return i.a.request(e,t)}))}function s(t){return Object(a.a)().then((function(){var e=o.a.pileAcceptGetPileBuildingSummary.url;return i.a.request(e,t)}))}function d(t){return Object(a.a)().then((function(){var e=o.a.pileAcceptGetBidsectionBuildingTree.url;return i.a.request(e,t)}))}function l(){return Object(a.a)().then((function(){var t=o.a.pileAcceptGetPileAcceptItems.url;return i.a.request(t)}))}function p(t){return Object(a.a)().then((function(){var e=o.a.pileAcceptGetPileAcceptList.url;return i.a.request(e,t)}))}function u(t){return Object(a.a)().then((function(){var e=o.a.pileAcceptGetPileAcceptInfo.url;return i.a.request(e,t)}))}function f(t){return Object(a.a)().then((function(){var e=o.a.processAcceptBuilding.url;return i.a.request(e,t)}))}function h(t){return Object(a.a)().then((function(){var e=o.a.processAcceptCollect.url;return i.a.request(e,t)}))}function b(t){return Object(a.a)().then((function(){var e=o.a.processAcceptv3GetBuildingList.url;return i.a.request(e,t)}))}function v(t){return Object(a.a)().then((function(){var e=o.a.processAcceptv3GetProcessAcceptv3List.url;return i.a.request(e,t)}))}function g(t){return Object(a.a)().then((function(){var e=n.a.getReportOrgTree.url;return i.a.request(e,t)}))}function w(t){return Object(a.a)().then((function(){var e=n.a.getHomeReports.url;return i.a.request(e,t)}))}function x(t){return Object(a.a)().then((function(){var e=n.a.getMyReports.url;return i.a.request(e,t)}))}function j(t){return Object(a.a)().then((function(){var e=n.a.getReportPools.url;return i.a.request(e,t)}))}function m(t){return Object(a.a)().then((function(){var e=n.a.saveMyReportsSetting.url;return i.a.post(e,null,t)}))}function _(t){return Object(a.a)().then((function(){var e=o.a.getUrlReportAuth.url;return i.a.request(e,t)}))}},d87c:function(t,e,r){(t.exports=r("690e")(!1)).push([t.i,'.zjapp .table-wrap[data-v-5d425e2f]{height:100%;overflow:auto}.zjapp .table-wrap .ncov-title[data-v-5d425e2f]{position:relative;height:46px;line-height:46px;padding:0 15px;font-size:18px;color:#333;font-weight:500;background:#fff}.zjapp .table-wrap .ncov-title[data-v-5d425e2f]:before{content:"";position:absolute;top:15px;left:0;width:4px;height:16px;background:#4275e8}.zjapp .table-wrap .ncov-title .icon-yiwen[data-v-5d425e2f]{position:absolute;color:#c8c8c8;top:14px;right:15px}.zjapp .table-wrap .ncov-table[data-v-5d425e2f]{display:flex;flex-wrap:wrap;margin:0 0 10px 0}.zjapp .table-wrap .ncov-table .item[data-v-5d425e2f]{display:block;flex:0 0 25%;padding:15px 0;text-align:center}.zjapp .table-wrap .ncov-table .item .number[data-v-5d425e2f]{height:28px;font-size:18px;font-weight:600;color:#4275e8;line-height:28px}.zjapp .table-wrap .ncov-table .item .describe[data-v-5d425e2f]{height:17px;font-size:12px;font-weight:400;line-height:17px;color:#666}.zjapp .table-wrap .ncov-table .item .unit[data-v-5d425e2f]{font-size:12px;color:#999}.zjapp .table-wrap .item-right[data-v-5d425e2f]{color:#c8c8c8;max-width:140px;margin:0 0 0 10px}.zjapp .table-wrap .item-right.warning[data-v-5d425e2f]{color:#ff3c46}.zjapp .table-wrap .scroll-y[data-v-5d425e2f]{flex:1;overflow-y:auto;position:relative}.zjapp .table-wrap .scroll-x[data-v-5d425e2f]{max-width:100%;overflow-x:auto;position:relative}.zjapp .table-wrap .table-content[data-v-5d425e2f]{position:relative;display:flex;flex-direction:column;flex:1;overflow:hidden;margin:0 0 10px 0}.zjapp .table-wrap .fixed-head[data-v-5d425e2f]{position:absolute;left:0;top:0;z-index:2}.zjapp .table-wrap .fixed-slide[data-v-5d425e2f]{position:absolute;left:0;top:0;z-index:1;transform:translateZ(0)}.zjapp .table-wrap .fixed-nook[data-v-5d425e2f]{position:absolute;left:0;top:0;z-index:3}.zjapp .table-wrap .fixed-nook.heighest[data-v-5d425e2f]{z-index:4}.zjapp .table-wrap .table[data-v-5d425e2f]{border-collapse:collapse}.zjapp .table-wrap .table td[data-v-5d425e2f],.zjapp .table-wrap .table th[data-v-5d425e2f]{min-width:110px;height:50px;max-height:50px;padding:5px 10px;line-height:16px;font-size:14px;text-align:center;box-sizing:border-box;border:none;overflow:hidden;word-break:break-all}.zjapp .table-wrap .table td.click[data-v-5d425e2f]{color:#4275e8}.zjapp .table-wrap .table th[data-v-5d425e2f]{color:#888}.zjapp .table-wrap .table td[data-v-5d425e2f]:first-child,.zjapp .table-wrap .table th[data-v-5d425e2f]:first-child{position:relative;width:115px;min-width:115px}.zjapp .table-wrap .table tr[data-v-5d425e2f]{background-color:#fafafa}.zjapp .table-wrap .name[data-v-5d425e2f]{display:inline-block;line-height:16px;max-height:32px;overflow:hidden}.zjapp .table-wrap .icon-dropdown[data-v-5d425e2f]{position:absolute;top:22px;left:11.5px}.zjapp .table-wrap .icon-dropright[data-v-5d425e2f]{position:absolute;top:19px;left:14.5px}.zjapp .table-wrap .icon-dropdown[data-v-5d425e2f]:before,.zjapp .table-wrap .icon-dropright[data-v-5d425e2f]:before{display:block;content:"";width:0;height:0;border:6px solid #c8c8c8}.zjapp .table-wrap .icon-dropdown[data-v-5d425e2f]:before{border-left-color:transparent;border-right-color:transparent;border-bottom-color:transparent}.zjapp .table-wrap .icon-dropright[data-v-5d425e2f]:before{border-top-color:transparent;border-right-color:transparent;border-bottom-color:transparent}.zjapp .table-wrap .width-105[data-v-5d425e2f]{min-width:105px!important}.zjapp .table-wrap .width-105 span[data-v-5d425e2f]{overflow:hidden;text-overflow:ellipsis;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical}.zjapp .table-wrap .ncov-report-table-title[data-v-5d425e2f]{min-height:50px}.zjapp .table-wrap .ncov-report-table-title span[data-v-5d425e2f]{width:90px;max-height:none;height:auto;line-height:22px;white-space:normal;word-break:break-all}.zjapp .table-wrap .ncov-report-table-title .ncov-P-R-all[data-v-5d425e2f]{width:auto}',""])}}]);