(window.webpackJsonp_module_entry_zjapp_=window.webpackJsonp_module_entry_zjapp_||[]).push([["chunk-9418cfb8"],{"11d1":function(t,e,i){"use strict";i.r(e);var n=i("fa06").a,r=(i("2582"),i("17cc")),a=Object(r.a)(n,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{directives:[{name:"show",rawName:"v-show",value:1===t.tabIndex,expression:"tabIndex === 1"}],staticClass:"tab-item-wrap"},[i("scroller",{attrs:{"has-next":t.listLimit<t.problemList.length,"is-empty":!t.problemList.length},on:{loadNext:t.loadList}},[t.loading?t._e():t._l(t.problemListShow,(function(e,n){return i("item-list",{key:n,attrs:{"is-timeout":e.is_timeout,"is-show-new-status":!0,title:e.name,detail:e.remark||"",footer:t.handleDate(e),status:e.status,img:e.image_file||"static/photo-empty.png","status-text":"已关闭"===e.status?"非正常关闭":e.status},on:{click:function(i){t.onClickToProblemDetailPage(e.id,e.uuId)}}})})),i("loading-status",{attrs:{"is-loading":t.loading,"is-empty":!t.problemList||!t.problemList.length,"empty-text":t.emptyTips||"暂无数据"}})],2),i("app-button-group",{attrs:{"fixed-bottom":""}},[i("app-button",{attrs:{disabled:!t.acceptId},on:{click:function(e){t.onClickToProblemDetailPage()}}},[t._v("新增问题")])],1)],1)}),[],!1,null,"85dc1cd2",null);e.default=a.exports},2582:function(t,e,i){"use strict";i("4ccd")},"4c44":function(t,e,i){(t.exports=i("690e")(!1)).push([t.i,".zjapp .tab-item-wrap[data-v-85dc1cd2]{flex-direction:column;display:flex;flex:1;height:100%}",""])},"4ccd":function(t,e,i){var n=i("4c44");"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);(0,i("85cb").default)("e85f03d8",n,!0,{sourceMap:!1,shadowMode:!1})},fa06:function(t,e,i){"use strict";(function(t){i("5ab2"),i("6d57"),i("e10e");var n,r=i("28f8"),a=(i("6a61"),i("2e91")),s=(i("163d"),i("6bf2")),o=i.n(s),c=i("4ad6"),l=i("7fc0"),u=i("3869"),p=i("e2a7");function d(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function m(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?d(Object(i),!0).forEach((function(e){Object(r.a)(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):d(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}e.a={components:{Scroller:function(){return Promise.resolve().then(i.bind(null,"774b"))},ItemList:function(){return Promise.resolve().then(i.bind(null,"fa4f"))}},props:{tabIndex:{type:Number},acceptId:{type:String,default:""},detailParams:{type:Object,default:function(){}},checkItem:{type:Object,default:function(){}}},data:function(){return{loading:!1,problemList:[],listLimit:10,emptyTips:""}},computed:{problemListShow:function(){var e=this.problemList;return t.isEmpty(e)?[]:e.slice(0,this.listLimit)}},methods:{init:(n=Object(a.a)(regeneratorRuntime.mark((function e(){var i,n,r,a,s=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("初始化整改问题列表"),i={biz_id:this.acceptId,module_code:"process-accept-v3"},e.prev=2,this.loading=!0,this.problemList=[],e.next=7,Object(l.g)(i);case 7:n=e.sent,r=o()().format("YYYY-MM-DD"),t.each(n,(function(t){t.is_timeout=t.repair_deadline<r,t.name=t.item_name})),this.problemList=n,e.next=17;break;case 13:e.prev=13,e.t0=e.catch(2),this.emptyTips=e.t0.errmsg||e.t0,p.a.alert(e.t0.errmsg||e.t0);case 17:return e.prev=17,this.loading=!1,e.finish(17);case 20:return e.next=22,u.a.getBizList(this.acceptId);case 22:(a=e.sent)&&a.length&&t.each(a,(function(t){var e=t.images&&t.images.length?t.images[0].temp:"",i=c.a.fixDataPath(e);s.problemList.unshift({id:"",name:s.checkItem.full_name,status:"草稿",uuId:t.uuId,image_file:i,remark:t.remark||"",repair_deadline:t.deadline||today,is_timeout:!1})}));case 24:case"end":return e.stop()}}),e,this,[[2,13,17,20]])}))),function(){return n.apply(this,arguments)}),loadList:function(){this.listLimit+=10},handleDate:function(t){return"整改期限："+o()(t.repair_deadline).format("YYYY-MM-DD")},onClickToProblemDetailPage:function(t,e){var i,n={moduleCode:"process-accept-v3",biz_id:this.acceptId};i=m(t?{id:t||"",uuId:e||""}:m({},this.detailParams),n),console.log({querys:i}),this.$router.push({name:"ProblemRectification",query:i})}}}}).call(this,i("391c"))}}]);