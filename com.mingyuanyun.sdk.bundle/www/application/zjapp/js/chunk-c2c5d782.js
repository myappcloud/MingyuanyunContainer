(window.webpackJsonp_module_entry_zjapp_=window.webpackJsonp_module_entry_zjapp_||[]).push([["chunk-c2c5d782"],{"9db3":function(t,e,a){"use strict";a.r(e);var i=a("07d2"),s=a("f881"),r=a("774b"),l=a("e2a7"),o=a("1b7e"),n=a("162a"),p=a("dd33"),d={image_process:{title:"形象进度异常",url:"/online/project-board/get-image-process-abnormal-list"},problem_secure:{title:"超时未整改问题",url:"/online/project-board/get-problem-secure-abnormal-list"},measure:{title:"实测弱项指标",url:"/online/project-board/get-measure-abnormal-list"},material:{title:"退场材料",url:"/online/project-board/get-material-abnormal-list"}},c={components:{Item:i.a,Tabs:s.a,Scroller:r.a},props:{},data:function(){return{title:"",type:"",hasNextPage:!0,page:1,pageSize:10,list:[],start_date:"",end_date:"",isLoading:!1,isHasNetwork:!0}},computed:{},watch:{},activated:function(){if(!this.$router.isBack){var t=this.$route.query,e=(t.proj_id,t.start_date),a=t.end_date,i=t.type;this.title=d[i].title,this.start_date=e,this.end_date=a,this.type=i,this.page=1,this.list=[],this.isLoading=!0,this.isHasNetwork=!0,this.init()}},methods:{init:function(){this.loadDetail()},loadNextDetail:function(){this.page+=1,this.loadDetail()},loadDetail:function(){var t=this;return o.a.getHasNetwork().then((function(t){if(!t)return $q.reject({errmsg:"当前无网络连接"})})).then((function(){var e=t.$route.query,a=e.proj_id,i=(e.start_date,e.end_date,e.type),s={bidsection_id:e.bidsection_id||"",proj_id:a,start_date:t.start_date,end_date:t.end_date,page:t.page,page_size:t.pageSize},r=d[i].url;return n.a.request(r,s)})).then((function(e){t.hasNextPage=!!e.has_next_page,t.list=t.list.concat(e.list||[]),t.isLoading=!1})).catch((function(e){t.isHasNetwork=!1,t.isLoading=!1,l.a.alert(e.errmsg||"获取数据失败")}))},selectDate:function(t){this.start_date=t.start,this.end_date=t.end,this.page=1,this.list=[],this.isLoading=!0,this.loadDetail()},goDetail:function(t){"image_process"===this.type?this.imageProcessDetail(t):"problem_secure"===this.type?this.goProblem(t):"measure"===this.type?this.goMeasure():"material"===this.type&&this.goMaterialDetail(t)},imageProcessDetail:function(t){this.$router.push("/image-process-detail/".concat(t.id))},goProblem:function(t){this.$router.push({name:"ReportCheckProjectDetail",params:{id:t.id}})},goMaterialDetail:function(t){this.$router.push("/report/material/project-detail/".concat(t.id,"/"))},goMeasure:function(){var t=this.$route.query,e=t.proj_id,a=t.proj_name;this.$store.commit("global/SET_CURRENT_REPORT_PROJECT",{id:e,name:a}),p.a.selectProject(),this.$router.push("/report-measure")}}},m=(a("a38a"),a("17cc")),u=Object(m.a)(c,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("page-content",{attrs:{title:t.title}},[a("tabs",{on:{onSelect:t.selectDate}}),t.list.length?a("scroller",{staticClass:"mt10",attrs:{"has-next":t.hasNextPage},on:{loadNext:t.loadNextDetail}},t._l(t.list,(function(e,i){return a("div",{key:i,staticClass:"panel",on:{click:function(a){t.goDetail(e)}}},["image_process"===t.type?[a("item",{attrs:{label:"项目/部位",text:e.building_name||e.proj_name}}),a("item",{attrs:{label:"类型",text:e.type}}),a("item",{attrs:{label:"时间",text:t._f("formatDate")(e.created_on,"YYYY-MM-DD")}}),a("item",{attrs:{label:"进度说明",text:e.remark}}),a("item",{attrs:{label:"汇报人",text:e.user_name}})]:t._e(),"problem_secure"===t.type?[a("item",{attrs:{label:"部位",text:e.place||"未选择部位"}}),a("item",{attrs:{label:"检查项",text:e.item_name}}),a("item",{attrs:{label:"问题分类",text:e.item_full_name}}),a("item",{attrs:{label:"问题描述",text:e.desc_name}}),a("item",{attrs:{label:"整改责任人",text:e.repair}}),a("item",{attrs:{label:"整改时限"}},[a("template",{slot:"right"},[a("div",{staticClass:"item-text"},[t._v("\n                            "+t._s(e.repair_deadline)+"("),a("span",{staticClass:"time-out"},[t._v("超时"+t._s(e.timeout)+"天")]),t._v(")\n                        ")])])],2)]:t._e(),"measure"===t.type?[a("item",{attrs:{label:"部位",text:e.place}}),a("item",{attrs:{label:"实测项",text:e.item_name}}),a("item",{attrs:{label:"合格率",text:e.passrate}}),a("item",{attrs:{label:"测量人",text:e.user_name}}),a("item",{attrs:{label:"测量时间",text:e.regist_date?e.regist_date.slice(0,11):""}})]:t._e(),"material"===t.type?[a("item",{attrs:{label:"材料",text:e.material}}),a("item",{attrs:{label:"批次",text:e.sort}}),a("item",{attrs:{label:"供应商",text:e.supplier}}),a("item",{attrs:{label:"数量",text:e.quantity}}),a("item",{attrs:{label:"退场时间",text:e.exit_date?e.exit_date.slice(0,11):""}}),a("item",{attrs:{label:"退场说明",text:e.exit_remark}})]:t._e()],2)}))):t._e(),a("loading-status",{attrs:{"is-loading":t.isLoading,"is-empty":!t.list.length||!t.isHasNetwork,type:t.isHasNetwork?"error":"common","empty-text":t.isHasNetwork?"暂无数据":"当前无网络连接"}})],1)}),[],!1,null,"7f60ba5a",null);e.default=u.exports},a38a:function(t,e,a){"use strict";a("a90e")},a90e:function(t,e,a){var i=a("e6a0");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);(0,a("85cb").default)("6bbebe02",i,!0,{sourceMap:!1,shadowMode:!1})},e6a0:function(t,e,a){(t.exports=a("690e")(!1)).push([t.i,".zjapp .end-item[data-v-7f60ba5a]{padding:0 15px}.zjapp .end-item .item[data-v-7f60ba5a]{padding:8px 0!important}.zjapp .item .tr[data-v-7f60ba5a]{text-align:right}.zjapp .overflow-ellipsis[data-v-7f60ba5a]{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.zjapp .w60[data-v-7f60ba5a]{width:60%}.zjapp .time-out[data-v-7f60ba5a]{color:#fb5959}[data-v-7f60ba5a] .van-collapse-item__wrapper{background:#fff}.zjapp .panel[data-v-7f60ba5a]{padding:0 15px;border-radius:4px;margin-top:10px}.zjapp .panel .item[data-v-7f60ba5a]{background:#fafafa}.zjapp .scroll-warp[data-v-7f60ba5a]{background:#fff}",""])}}]);