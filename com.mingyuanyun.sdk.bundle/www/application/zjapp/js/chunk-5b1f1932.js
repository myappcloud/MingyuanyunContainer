(window.webpackJsonp_module_entry_zjapp_=window.webpackJsonp_module_entry_zjapp_||[]).push([["chunk-5b1f1932"],{"0748":function(t,e,a){"use strict";a("3cc7")},"2d0e":function(t,e,a){"use strict";a.r(e);var o=a("3d71").a,i=(a("6fc4"),a("17cc")),n=Object(i.a)(o,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("page-content",{attrs:{title:"工序移交"}},[90!==t.model.deliverType?a("div",{staticClass:"header-btn",attrs:{slot:"header-bar-right","data-track":"工序移交-房间列表页-进度汇总"},on:{click:t.processProgress},slot:"header-bar-right"},[t._v("\n    进度汇总\n  ")]):t._e(),a("synchronize-tip-bar",{attrs:{"automatic-update-callback":t.init}}),a("div",{staticClass:"drop-down-group bg-sub-theme border-bottom"},[a("drop-down-select",{attrs:{value:t.model.buildingCurrent,options:t.model.buildingList,stage:3,"min-select-stage":2,"show-note":90!==t.model.deliverType,"show-text-level":2===t.model.deliverType?2:3,"options-map":[{name:"标段"},{key:"buildings",name:"楼栋"},{key:"units",name:"单元"}],"keep-stage":[!0,!0]},on:{onSelect:t.onChangeBuilding}}),a("drop-down-select",{attrs:{value:t.model.processItemCurrent,options:t.model.processListData,stage:2,"show-note":90!==t.model.deliverType,"options-map":[{name:"一级检查项"},{key:"subitem",name:"二级检查项"}]},on:{onSelect:t.onChangeCheckItem}})],1),a("scroller",{on:{pullDown:t.init}},[t.model.isLoading||1!==t.model.deliverType?t._e():[a("div",{staticClass:"status-total-bar-con",staticStyle:{height:"0"}},[a("status-total-bar",{key:"status1",staticClass:"-abs-status-right",attrs:{data:[{status:"已退回",color:"red"},{status:"待验收",color:"orange"},{status:"已验收",color:"green"}]}})],1),a("place-list",{key:"room-place-list",attrs:{"has-title":!0,data:t.model.floorList,"item-name-key":"floorName","children-key":"rooms","status-class":{"已验收":"bg-green","待验收":"bg-orange","已退回":"bg-red"}},on:{click:t.entryProcessNewDetail}})],t.model.isLoading||2!==t.model.deliverType&&5!==t.model.deliverType?t._e():[a("div",{staticClass:"status-total-bar-con"},[a("status-total-bar",{key:"status2-5",staticStyle:{"margin-bottom":"5px"},attrs:{data:[{status:"已退回",color:"red"},{status:"待验收",color:"orange"},{status:"已验收",color:"green"}]}})],1),a("place-list",{key:"floor-place-list",attrs:{data:t.model.floorList,"subitem-name-key":"floorName","children-key":"rooms","status-class":{"已验收":"bg-green","待验收":"bg-orange","已退回":"bg-red"}},on:{click:t.entryProcessNewDetail}})],t.model.isLoading||3!==t.model.deliverType?t._e():[a("div",{staticClass:"status-total-bar-con"},[a("status-total-bar",{key:"status3",staticStyle:{"margin-bottom":"5px"},attrs:{data:[{status:"已退回",color:"red"},{status:"待验收",color:"orange"},{status:"已验收",color:"green"}]}})],1),t.model.isLoading||3!==t.model.deliverType?t._e():a("place-list",{key:"building-place-list",attrs:{data:[t.model.building],"status-class":{"已验收":"bg-green","待验收":"bg-orange","已退回":"bg-red"}},on:{click:t.entryProcessNewDetail}})],t.model.isLoading||90!==t.model.deliverType?t._e():[a("div",{staticClass:"status-total-bar-con"},[a("status-total-bar",{key:"status90",staticStyle:{"margin-bottom":"5px"},attrs:{data:[{status:"暂存",color:"white"},{status:"已退回",color:"red"},{status:"待验收",color:"orange"},{status:"已验收",color:"green"}]}})],1),a("place-list",{key:"custom-place-list",staticClass:"custom-place-list",attrs:{data:t.model.places,"empty-text":"部位未填","item-name-key":"custom_location","status-class":{"已验收":"bg-green","待验收":"bg-orange","已退回":"bg-red","部位未填":"bg-gray1"}},on:{click:t.entrySelfDefinitionPlaceDetail}})],90!==t.model.deliverType?a("loading-status",{attrs:{"is-loading":t.model.isLoading,"is-empty":!t.model.floorList.length,"empty-text":t.errorTips||"没有数据"}}):t._e(),90===t.model.deliverType?a("loading-status",{attrs:{"is-loading":t.model.isLoading,"is-empty":!t.model.places.length,"empty-text":t.errorTips||"没有数据"}}):t._e()],2),31===t.model.user_role?a("app-button-group",{attrs:{"fixed-bottom":""}},[a("app-button",{directives:[{name:"show",rawName:"v-show",value:1===t.model.deliverType||2===t.model.deliverType||5===t.model.deliverType,expression:"model.deliverType === 1 || model.deliverType === 2 || model.deliverType === 5"}],on:{click:function(e){t.entryProcessNewDetail()}}},[t._v("\n      发起批量验收\n    ")]),a("app-button",{directives:[{name:"show",rawName:"v-show",value:90===t.model.deliverType,expression:"model.deliverType === 90"},{name:"track",rawName:"v-track",value:"工序移交-自定义部位-发起验收",expression:"'工序移交-自定义部位-发起验收'"}],on:{click:function(e){t.entrySelfDefinitionPlaceDetail()}}},[t._v("\n      发起验收\n    ")])],1):t._e()],1)}),[],!1,null,"50725217",null);e.default=n.exports},"2d6e":function(t,e,a){var o=a("7eb2");"string"==typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);(0,a("85cb").default)("53a2fbaa",o,!0,{sourceMap:!1,shadowMode:!1})},"3cc7":function(t,e,a){var o=a("44a1");"string"==typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);(0,a("85cb").default)("12a96fd8",o,!0,{sourceMap:!1,shadowMode:!1})},"3d71":function(t,e,a){"use strict";(function(t){a("5ab2"),a("6d57"),a("e10e");var o=a("28f8"),i=(a("cc57"),a("fd50")),n=a("07d2"),s=a("e2a7"),r=a("f7ab"),l=a("774b"),c=a("d623"),d=a("f546"),u=a("efa7"),p=a("b61f"),h=a("dd54"),m=a("8559"),f=a("bc69"),g=a("6144"),b=a("a500"),v=a("391c");function y(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,o)}return a}function k(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?y(Object(a),!0).forEach((function(e){Object(o.a)(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):y(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}e.a={name:"ProcessNew",components:{Item:n.default,SynchronizeTipBar:r.a,Scroller:l.default,DropDownSelect:c.a,StatusTotalBar:d.a,PlaceList:u.a},data:function(){return{model:h.a}},computed:{errorTips:function(){var t="没有数据",e=(this.model.buildingList||[]).some((function(t){return t.buildings&&t.buildings.length})),a=this.model.processListData&&this.model.processListData.length;return e?a||(t="当前楼栋或单元没有设置工序"):t="该项目未设置标段或楼栋，请在PC端设置",t}},mounted:function(){window.processNewTest=this},activated:function(){this.init()},methods:{init:function(){h.a.init()},uploadCallback:function(){this.init()},processProgress:function(){var t=this.model.buildingCurrent[1]&&this.model.buildingCurrent[1].id?this.model.buildingCurrent[1].id:"",e=this.model.buildingCurrent[2]&&this.model.buildingCurrent[2].id?this.model.buildingCurrent[2].id:"";b.a.addTrack("工序移交-房间列表页-进度汇总"),this.$router.push({name:"ProcessNewCollect",query:{buildingId:t,unit:e}})},onChangeBuilding:function(t){this.model.buildingCurrent=t;var e={project:this.$store.state.global.currentProject,section:this.model.buildingCurrent[0],building:this.model.buildingCurrent[1]};return 3===this.model.buildingCurrent.length&&(e.unit=this.model.buildingCurrent[2]),g.a.saveObject(f.a.PROCESS_COMMON_BUILDING_SELECTED,e,g.a.level.user),h.a.updateSelectedBuildingInfo(e),this.model.originFloorList=[],this.model.originUnitFloorList=[],i.a.all([h.a.getBuildingFloorList(),h.a.getBuildingUnitFloorList(),h.a.getProcessList()]).then((function(){return h.a.getDefaultProcessItem()})).then((function(){return h.a.getProcessData()}))},onChangeCheckItem:function(t){this.model.processItemCurrent=t;var e=this.model.processItemCurrent[1];(this.model.selectedBuilding.building||{}).id&&(this.model.processItem=e,90!==this.model.deliverType&&(this.model.deliverType=e.process_mode||"1"),g.a.saveObject(f.a.PROCESS_DEFAULT_CHECKITEM_OF_BUILDING,e,g.a.level.user),h.a.getProcessData(),this.model.floorList=[],this.model.buildingLevel=1===this.model.deliverType||5===this.model.deliverType||90===this.model.deliverType?3:2)},entryProcessNewDetail:function(e){var a,o,i=this;if(t.isEmpty(this.model.processItem))return s.a.alert("请先选择工序");t.isEmpty(e)?(o={},a=""):(a=e.process_check_id||"",o={id:e.id||e.floor,name:e.floorName||e.name,floor:e.floor,status:e.status,unit:2===this.model.deliverType?"":e.unit||e.unit_name}),this.checkRights(o).then((function(t){if(!t.has)return s.a.alert(t.msg);i._goProcessDetail(o,a)})).catch((function(t){$log.error(t)}))},entrySelfDefinitionPlaceDetail:function(e){var a=this,o="";t.isEmpty(e)||(o=Object(v.get)(e,"primaryKeys.processCheckId",e.id)),this.checkRights(e).then((function(t){if(t.has){var i=a.model.selectedBuilding,n=i.building,r=i.unit||{id:""};return a.$router.push({name:"ProcessNewDetail",query:{checkitemId:a.model.processItem.id,buildingId:n.id,unit:r.id,processCheckId:o,getProcessCheckIdFromPrimaryKeys:!Object(v.get)(e,"id"),deliverType:a.model.deliverType}})}return s.a.alert(t.msg)}))},checkRights:function(t){var e=this,a=(t||{status:"待移交"}).status,o="";return(this.model.user_role?i.a.when():m.a.allowApplyingForHandover().then((function(t){e.model.user_role=t}))).then((function(){var t=e.model.user_role;return"待移交"!==a&&a||(-31===t?o="您的帐号未关联施工单位，不能申请验收":3233===t&&(o="施工单位尚未申请验收")),{has:!o,msg:o}}))},_goProcessDetail:function(e,a){var o,i,n=this;t.isEmpty(e)?(1===this.model.deliverType?(o=this.model.selectedBuilding.unit?"unit-floor-room":"floor-room",i="选择移交房间"):2===this.model.deliverType?(o="floor",i="移交楼层"):5===this.model.deliverType&&(o=this.model.selectedBuilding.unit?"unit-floor":"floor",i="移交楼层"),p.a.openPopup({title:i,type:o,options:this.model.originUnitFloorList,selected:[],rightBtn:"确定",rightBtnEvent:function(e){2===n.model.deliverType&&(e=t.map(e,(function(t){return k(k({},t),{},{unit:""})}))),n.$store.commit("process/SET_DETAIL_FLOOR_AND_ROOM",e),n.goDetailPage("")}})):(this.$store.commit("process/SET_DETAIL_FLOOR_AND_ROOM",[e]),this.goDetailPage(a))},goDetailPage:function(t){var e=this.model.selectedBuilding,a=e.building,o=e.unit||{id:""};return this.$router.push({name:"ProcessNewDetail",query:{checkitemId:this.model.processItem.id,buildingId:a.id,unit:o.id,processCheckId:t,deliverType:this.model.deliverType}})}}}}).call(this,a("391c"))},"44a1":function(t,e,a){(t.exports=a("690e")(!1)).push([t.i,".zjapp .multiple-place-content[data-v-4b9b8166]{z-index:99999;max-height:134px;border-bottom:1px solid #ececec;overflow:auto;scroll-behavior:smooth}.zjapp .multiple-place-content.-fixed[data-v-4b9b8166]{position:absolute;left:0;right:0;top:0}.zjapp .selected[data-v-4b9b8166]{position:relative;display:flex;padding:13px 15px;font-size:15px;background-color:#fff;overflow:scroll}.zjapp .selected label[data-v-4b9b8166]{margin-right:10px;color:#999;white-space:nowrap}.zjapp .select-wrap[data-v-4b9b8166]{flex:1;background-color:#fff;overflow:auto;scroll-behavior:smooth}.zjapp .van-collapse[data-v-4b9b8166] .van-cell{align-items:center}.zjapp .van-collapse[data-v-4b9b8166] .icon{margin-right:10px;vertical-align:middle}.zjapp .van-collapse[data-v-4b9b8166] .van-collapse-item__content{padding:0}.zjapp .group.-border-bottom[data-v-4b9b8166]{border-bottom:1px solid #ececec}.zjapp .group-name[data-v-4b9b8166]{font-size:14px;color:#999;height:34px;padding-top:15px}.zjapp .element-list[data-v-4b9b8166]{display:flex;flex-wrap:wrap}.zjapp .element[data-v-4b9b8166]{min-width:75px;height:28px;line-height:28px;text-align:center;margin:10px 6px 10px 0;padding:0 10px;background:#fff;border-radius:100px;color:#333;font-size:14px;border:1px solid #dcdcdc}.zjapp .element.-disabled[data-v-4b9b8166]{background:#ececec;color:#999;border-color:#ececec}.zjapp .element.-checked[data-v-4b9b8166]{background:#4275e8;color:#fff;border-color:#4275e8}",""])},"5b85":function(t,e,a){var o=a("e2a8");"string"==typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);(0,a("85cb").default)("45a0f20c",o,!0,{sourceMap:!1,shadowMode:!1})},"65e9":function(t,e,a){"use strict";(function(t){a("5ab2"),a("6d57"),a("e10e");var o=a("28f8"),i=a("4360"),n=a("48f4"),s=a("162a"),r=a("f2d3"),l=a("6906"),c=a("a18c"),d=a("c745");function u(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,o)}return a}function p(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?u(Object(a),!0).forEach((function(e){Object(o.a)(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):u(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}e.a={name:"SynchronizeTipBar",props:{isTodo:{type:Boolean},useDownload:{type:Boolean,default:!0},enterDoCheck:{type:Boolean,default:!0},buildingId:{type:String,default:""},automaticUpdateCallback:{type:Function,default:null}},data:function(){return{currentModuleCode:"",oneUpdateData:!0}},computed:{projId:function(){return i.a.state.global.currentProject.id},waitUploadNum:function(){return i.a.state.global.waitUploadNum},hasTopProgress:function(){return i.a.state.global.hasTopProgress},hasChanged:function(){if(!this.useDownload)return!1;if(this.currentModuleCode){var t,e=n.default.isModuleNeedBuilding(this.currentModuleCode)&&!this.isTodo;return!(e&&!this.buildingId)&&(t=this.isTodo?i.a.state.global.todoChangedStatus||{}:i.a.state.global.businessChangedStatus||{},e?!!t[this.currentModuleCode]&&t[this.currentModuleCode][this.buildingId]:t[this.currentModuleCode])}return!1},show:function(){return(this.hasChanged||this.waitUploadNum)&&!this.hasTopProgress},oneDataSync:function(){return this.$store.state.app.oneDataSync}},watch:{hasChanged:function(t){var e=this;t&&this.$nextTick((function(){setTimeout((function(){var t=e.$refs["synchronize-tip-bar"];if(t&&t.style){t.style.display="none";t.offsetHeight;t.style.display="block"}}),100)}))},buildingId:function(t){this.currentModuleCode&&n.default.isModuleNeedBuilding(this.currentModuleCode)&&t&&(console.log("楼栋重新加载，是否再次自动加载数据：",this.oneUpdateData),this.oneUpdateData&&this.automaticLogic(),this.checkSync())},show:function(t){t?this.$emit("show"):this.$emit("hide")}},activated:function(){this.init()},methods:{init:function(){this.getCurrentModuleCode(),this.enterDoCheck&&!c.a.isBack&&this.checkSync(),this.automaticLogic()},automaticLogic:function(){var t=this;this.$router.isBack||(this.oneUpdateData=!0,d.a.getAutomaticLoadData().then((function(e){$log.log("是否要自动加载 ===> ",e&&t.oneDataSync&&"function"==typeof t.automaticUpdateCallback),e&&t.oneDataSync&&"function"==typeof t.automaticUpdateCallback&&t.dataSync().then((function(e){console.log("是否需要初始化页面 ====> ",Boolean(e)),e&&t.automaticUpdateCallback()}))})))},getCurrentModuleCode:function(){var t=n.default.getCurrentModuleCode(),e=this.isTodo?"todo":"";this.currentModuleCode=t||e},checkSync:function(){var e=this,a="checkDataUpdate",o=this.currentModuleCode,s=this.buildingId,c=i.a.state.global.isLeader?this.projId:"";return!n.default.isModuleNeedBuilding(o)||s||this.isTodo?(this.isTodo&&(a+="_todo"),o&&(a+="_".concat(o)),s&&(a+="_".concat(s)),l.a.execAfterInterval(120,a).then((function(){return e.isTodo?"todo"===o?r.a.getModuleList().then((function(e){var a=t.map(e,"code");return n.default.hasTodoChangedData("",a)})):n.default.hasTodoChangedData("",[o]):n.default.hasBusinessChangedData(c,[o],s)})).then((function(t){if(e.isTodo){var a=p({},i.a.state.global.todoChangedStatus);a[o]=t,i.a.commit("global/SET_TODO_CHANGED_STATUS",a)}else{var n=p({},i.a.state.global.businessChangedStatus);if(s){var r=n[o]?n[o]:{};r[s]=t,n[o]=r}else n[o]=t;i.a.commit("global/SET_BUSINESS_CHANGED_STATUS",n)}})).catch((function(t){return t&&!0===t.timeNotTo?($log.debug(t.msg),!1):$q.reject(t)}))):Promise.resolve()},dataSync:function(){var t=this.currentModuleCode,e=this.buildingId,a=n.default.isModuleNeedBuilding(t),o=a&&!e;return $log.log(["模块名：",t," 楼栋id：",e," 当前模块是否需要楼栋id：",a," 判断是否终止自动更新：",o]),o?Promise.resolve():(this.oneUpdateData=!1,s.a.beginManualUpdate(),n.default.checkSync(e).then((function(t){return s.a.endManualUpdate(),t})).catch((function(t){$log.error("自动更新错误",t),s.a.endManualUpdate()})))}}}}).call(this,a("391c"))},"6fc4":function(t,e,a){"use strict";a("d1f26")},"7c9b":function(t,e,a){"use strict";(function(t){a("e204"),a("f548"),a("6d57"),a("cc57"),a("c904");var o=a("e89f"),i=a("1df9"),n=a("774b"),s=a("e2a7"),r=a("7cb8");e.a={components:{PageContent:i.a,Scroller:n.default},mixins:[o.a],data:function(){return{show:!1,title:"",options:[],actionTabs:[],mapSelectedItems:[],selectedResult:"",optionsMap:{},statusMap:{},autoSuffix:!0,nameKeys:{"unit-floor-room":[{id:"unit",name:"unit_name",children:"floors"},{id:"floor",name:"floor_name",children:"rooms"},{name:"room_name"}],"floor-room":[{id:"floor",name:"floor_name",children:"rooms"},{name:"room_name"}],"unit-floor":[{id:"unit",name:"unit_name",children:"floors"},{id:"floor",name:"floor_name"}],floor:[{id:"floor",name:"floor_name"}]}}},computed:{selectedResultText:function(){return t.clone(this.mapSelectedItems).sort((function(t,e){return t.order-e.order})).reduce((function(t,e){return t+="、"+e.name}),"").substring(1)}},mounted:function(){window.dialogTest=this},methods:{initData:function(t){var e=this;this.actionTabs=[],this.mapSelectedItems=[],this.selectedResult="",this.options=t||[],"floor"===this.type&&this.options.floors&&(this.options=this.options[0].floors);var a=this.traversOptions(this.options);if("floor"===this.type){var o=0,i=[];for(var n in this.statusMap)this.statusMap[n].pid="allfloors",this.statusMap[n].disabled||(o+=2),i.push(n);var s=!1;0===o&&(s=!0),this.statusMap.allfloors={id:"allfloors",status:"0",total:o,countChecked:0,children:i,disabled:s}}a.forEach((function(t){e.toggleItem(t.id,!0)}))},traversOptions:function(t){var e=this,a={},o={},i=[],n=this.nameKeys[this.type],s=0;function l(t){var n=t.val,r=t.mapId,l=t.parentId,d=t.childrenKey,u=t.isChecked,p=t.isForceChecked,h=t.isDisabled;a[r]=n;var m=l?o[l].name:"",f={id:r,status:"0",order:s++,originName:n.name,disabled:h,isForceChecked:p,name:e.autoSuffix?(m+n.name).replace(/单元.*层(.)/,"单元$1"):m+n.name};if(o[r]=f,d&&(f.total=n[d]?2*n[d].filter((function(t){return!c(t)})).length:0,0===f.total&&(f.disabled=!0),f.countChecked=0),l){f.pid=l;var g=o[l];g.children||(g.children=[]),g.children.push(r)}n.status&&(f.statusText=n.status),u&&i.push(f)}function c(t){return!!(t.used||t.disabled||t.status&&!t.checked)}return function t(a){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(Array.isArray(a)&&a.length){var s=i?i+"-":"",d=o===n.length-1;a.forEach((function(a){var u=n[o];a.name||(a.name=a[u.name]||""),a.id||(a.id=a[u.id]),e.autoSuffix&&(a.hasOwnProperty("floors")&&(a.name=Object(r.a)(a.name,"单元")),a.hasOwnProperty("rooms")&&(a.name=Object(r.a)(a.name,"层")));var p=!1;d&&c(a)&&(p=!0);var h=!1,m=!1;d&&((h=a.checked||!1)&&(m=!0),~e.selected.findIndex((function(t){return"unit-floor"===e.type?t.id===a.id&&t.unit===a.unit:t.id===a.id}))&&(m=!0));var f=s+a.id,g=u.children;l({val:a,mapId:f,parentId:i,childrenKey:g,isChecked:m,isForceChecked:h,isDisabled:p}),g&&t(a[g],o+1,f)}))}}(t),this.optionsMap=a,this.statusMap=o,i},openPopup:function(t){this.show=!0,this.title=t.title,this.selected=t.selected,this.onSelect=t.onSelect,this.rightBtn=t.rightBtn,this.type=t.type,this.rightBtnEvent=t.rightBtnEvent,this.autoSuffix=!1!==t.autoSuffix,this.initData(t.options),this.$emit("open")},closePopup:function(){this.show=!1,this.$emit("close")},_handlerItemSelected:function(t,e){if(!t.total){var a=this.mapSelectedItems.indexOf(t);e?~a&&this.mapSelectedItems.splice(a,1):~a||this.mapSelectedItems.push(t)}},toggleItem:function(t,e){var a=this,o=this.statusMap;var i=o[t];if(!e&&i.isForceChecked||i.disabled)i.statusText&&!e&&s.a.alert(i.statusText);else{var n,r=i.status;(function t(e,n){var s=o[e];s.status=n,"2"===n&&s.total?s.countChecked=s.total:s.countChecked=0,s.hasOwnProperty("children")?s.children.length&&s.children.forEach((function(e){a.optionsMap[e].checked||t(e,n)})):i.isForceChecked||s.disabled||a._handlerItemSelected(s,"0"===n)})(t,n="2"===r?"0":"2"),function t(e,a){var i=o[e].pid;if(i){var n=o[i],s=function(t,e){var a=t.status,o=t.total;t.countChecked=t.countChecked+e;var i=t.countChecked;switch(!0){case 0===i:t.status="0";break;case i<o:t.status="1";break;case i===o:t.status="2";break;default:$log.error("something is wrong on @toggleItem: current pItem's pCountChecked: ".concat(i,", pTotal: ").concat(o))}return t.status-a}(n,a);0!==s&&t(n.id,s)}}(t,n-r)}},mapStatusToClass:function(t,e){if(this.statusMap[t].disabled)return"-disabled";return["","-indeterminate","-checked"][this.statusMap[t].status]},onRightBtnEvent:function(){var e=this;if(t.isEmpty(this.mapSelectedItems)){if("room"===this.type.substr(-4))return s.a.alert("请选择房间");if("floor"===this.type.substr(-5))return s.a.alert("请选择楼层")}var a=[];this.mapSelectedItems.forEach((function(t){a.push(e.optionsMap[t.id])})),this.rightBtnEvent(a),this.show=!1}}}}).call(this,a("391c"))},"7eb2":function(t,e,a){(t.exports=a("690e")(!1)).push([t.i,".zjapp .synchronize-tip-bar[data-v-66826030]{height:30px;padding:5px 15px;line-height:20px;text-align:center;background-color:#ffe6e6;color:#ff6060;font-size:14px}.zjapp .synchronize-tip-bar .icon-caution[data-v-66826030]{line-height:20px;margin-right:5px}@media screen and (-webkit-min-device-pixel-ratio:1){.zjapp .synchronize-tip-bar[data-v-66826030]{border:none;background-image:linear-gradient(0deg,#ffd3d3,#ffd3d3 100%,transparent 0);background-size:100% 1px;background-repeat:no-repeat;background-position:bottom}}@media screen and (-webkit-min-device-pixel-ratio:1.5){.zjapp .synchronize-tip-bar[data-v-66826030]{border:none;background-image:linear-gradient(0deg,#ffd3d3,#ffd3d3 66.6667%,transparent 0);background-size:100% 1px;background-repeat:no-repeat;background-position:bottom}}@media screen and (-webkit-min-device-pixel-ratio:2){.zjapp .synchronize-tip-bar[data-v-66826030]{border:none;background-image:linear-gradient(0deg,#ffd3d3,#ffd3d3 50%,transparent 0);background-size:100% 1px;background-repeat:no-repeat;background-position:bottom}}@media screen and (-webkit-min-device-pixel-ratio:2.625){.zjapp .synchronize-tip-bar[data-v-66826030]{border:none;background-image:linear-gradient(0deg,#ffd3d3,#ffd3d3 38.0952%,transparent 0);background-size:100% 1px;background-repeat:no-repeat;background-position:bottom}}@media screen and (-webkit-min-device-pixel-ratio:3){.zjapp .synchronize-tip-bar[data-v-66826030]{border:none;background-image:linear-gradient(0deg,#ffd3d3,#ffd3d3 33.3333%,transparent 0);background-size:100% 1px;background-repeat:no-repeat;background-position:bottom}}@media screen and (-webkit-min-device-pixel-ratio:4){.zjapp .synchronize-tip-bar[data-v-66826030]{border:none;background-image:linear-gradient(0deg,#ffd3d3,#ffd3d3 25%,transparent 0);background-size:100% 1px;background-repeat:no-repeat;background-position:bottom}}",""])},b61f:function(t,e,a){"use strict";var o=a("329b"),i=a("7c9b").a,n=(a("0748"),a("17cc")),s=Object(n.a)(i,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("transition",{attrs:{name:"slide-right"}},[t.show?a("page-content",{attrs:{title:t.title,mode:"dialog","on-close":t.closePopup}},[t.rightBtn?a("div",{staticClass:"header-btn",attrs:{slot:"header-bar-right"},on:{click:t.onRightBtnEvent},slot:"header-bar-right"},[t._v("\n      "+t._s(t.rightBtn)+"("+t._s(t.mapSelectedItems.length)+")\n    ")]):t._e(),a("div",{staticClass:"multiple-place-content"},[a("div",{staticClass:"selected"},[a("label",[t._v("已选:")]),a("div",{staticClass:"text"},[t._v("\n          "+t._s(t.selectedResultText)+"\n        ")])])]),a("div",{staticClass:"multiple-place-content -fixed"},[a("div",{staticClass:"selected"},[a("label",[t._v("已选:")]),a("div",{staticClass:"text"},[t._v("\n          "+t._s(t.selectedResultText)+"\n        ")])])]),a("div",{staticClass:"select-wrap"},["unit-floor-room"===t.type?a("van-collapse",{model:{value:t.actionTabs,callback:function(e){t.actionTabs=e},expression:"actionTabs"}},t._l(t.options,(function(e){return a("van-collapse-item",{key:e.id,staticClass:"section",attrs:{name:e.id}},[a("strong",{attrs:{slot:"title"},on:{click:function(a){a.stopPropagation(),t.toggleItem(e.id)}},slot:"title"},[a("icon",{attrs:{slot:"icon",name:"checkbox-square"+t.mapStatusToClass(e.id)},slot:"icon"}),t._v(t._s(e.name))],1),t._l(e[t.nameKeys[t.type][0].children],(function(o){return a("div",{key:o.id,staticClass:"group pl40 pr15  -border-bottom"},[a("div",{staticClass:"group-name"},[t._v(t._s(o.name))]),a("div",{staticClass:"element-list"},[a("div",{staticClass:"element -all",class:t.mapStatusToClass([e.id,o.id].join("-"),o),on:{click:function(a){t.toggleItem([e.id,o.id].join("-"))}}},[t._v("\n                  全选\n                ")]),t._l(o[t.nameKeys[t.type][1].children],(function(i){return a("div",{key:i.name,staticClass:"element",class:t.mapStatusToClass([e.id,o.id,i.id].join("-")),on:{click:function(a){t.toggleItem([e.id,o.id,i.id].join("-"))}}},[t._v("\n                  "+t._s(i.name)+"\n                ")])}))],2)])}))],2)}))):t._e(),"floor-room"===t.type?a("div",{staticClass:"section"},t._l(t.options,(function(e){return a("div",{key:e.id,staticClass:"group pl15 pr15"},[a("div",{staticClass:"group-name"},[t._v(t._s(e.name))]),a("div",{staticClass:"element-list"},[a("div",{staticClass:"element -all",class:t.mapStatusToClass(e.id,e),on:{click:function(a){t.toggleItem(e.id)}}},[t._v("\n              全选\n            ")]),t._l(e[t.nameKeys[t.type][0].children],(function(o){return a("div",{key:o.id,staticClass:"element mr15",class:t.mapStatusToClass([e.id,o.id].join("-")),on:{click:function(a){t.toggleItem([e.id,o.id].join("-"))}}},[t._v("\n              "+t._s(o.name)+"\n            ")])}))],2)])}))):t._e(),"floor"===t.type?a("div",{staticClass:"section"},[a("div",{staticClass:"group pl15 pr15"},[a("div",{staticClass:"group-name"},[t._v("全部")]),a("div",{staticClass:"element-list"},[a("div",{staticClass:"element mr15",class:t.mapStatusToClass("allfloors"),on:{click:function(e){t.toggleItem("allfloors")}}},[t._v("\n              全选\n            ")]),t._l(t.options,(function(e){return a("div",{key:e.name,staticClass:"element mr15",class:t.mapStatusToClass(e.id),on:{click:function(a){t.toggleItem(e.id)}}},[t._v("\n              "+t._s(e.name)+"\n            ")])}))],2)])]):t._e(),"unit-floor"===t.type?a("div",{staticClass:"section"},t._l(t.options,(function(e){return a("div",{key:e.name,staticClass:"group pl15 pr15"},[a("div",{staticClass:"group-name"},[t._v(t._s(e.name))]),a("div",{staticClass:"element-list"},[a("div",{staticClass:"element mr15",class:t.mapStatusToClass(e.id,e),on:{click:function(a){t.toggleItem(e.id)}}},[t._v("\n              全选\n            ")]),t._l(e[t.nameKeys[t.type][0].children],(function(o){return a("div",{key:o.name,staticClass:"element mr15",class:t.mapStatusToClass([e.id,o.id].join("-")),on:{click:function(a){t.toggleItem([e.id,o.id].join("-"))}}},[t._v("\n              "+t._s(o.name)+"\n            ")])}))],2)])}))):t._e(),t.options.length?t._e():a("loading-status",{attrs:{"is-empty":!0,"empty-text":"没有内容"}})],1)]):t._e()],1)}),[],!1,null,"4b9b8166",null).exports,r=!1;r||(r=new(o.default.extend(s))({el:document.createElement("div")}),document.body.appendChild(r.$el));e.a=r},d1f26:function(t,e,a){var o=a("fc9fd");"string"==typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);(0,a("85cb").default)("d8568006",o,!0,{sourceMap:!1,shadowMode:!1})},e2a8:function(t,e,a){(t.exports=a("690e")(!1)).push([t.i,'.zjapp .status-total-bar[data-v-be07cd9c]{display:flex;flex-direction:row;text-align:center}.zjapp .total-item[data-v-be07cd9c]{flex:1;line-height:20px;padding:10px 5px 0;color:#111;font-size:12px}.zjapp .total-status[data-v-be07cd9c]{white-space:nowrap}.zjapp .total-status[data-v-be07cd9c]:before{content:"";width:10px;height:10px;display:inline-block;vertical-align:top;margin:5px 5px 0 0;background-color:#ddd;border-radius:50%}.zjapp .total-status-orange[data-v-be07cd9c]:before{background-color:#fc8b01}.zjapp .total-status-orange2[data-v-be07cd9c]:before{background-color:#ff8e24}.zjapp .total-status-white2[data-v-be07cd9c]:before{background-color:#fff;border:1px solid #dcdcdc}.zjapp .total-status-red[data-v-be07cd9c]:before{background-color:#ff3d3d}.zjapp .total-status-green[data-v-be07cd9c]:before{background-color:#0bc666}.zjapp .total-status-white[data-v-be07cd9c]:before{background-color:#fff}.zjapp .total-status-white-border[data-v-be07cd9c]:before{background-color:#fff;border:1px solid #dcdcdc}.zjapp .total-status-blue[data-v-be07cd9c]:before{background-color:#4174e9}.zjapp .total-status-purple-border[data-v-be07cd9c]:before{background-color:#fff;border:1px solid #796bfb}.zjapp .total-status-green-border[data-v-be07cd9c]:before{background-color:#fff;border:1px solid #0bc666}.zjapp .status-total-bar.-abs-top-right[data-v-be07cd9c]{position:absolute;top:0;right:13px}.zjapp .status-total-bar.-abs-top-right .total-item[data-v-be07cd9c]{padding-left:3px;padding-right:3px}.zjapp .status-total-bar.-abs-top-right .total-status[data-v-be07cd9c]:before{margin-right:2px}',""])},e89f:function(t,e,a){"use strict";var o=a("04f3"),i=a("cf09"),n=a("4360"),s=0;e.a={name:"PopupMixin",data:function(){return{backButtonEvent:null}},watch:{show:function(t){var e=this;if(t){if(this.$nextTick((function(){e.$el&&e.$el.style&&(e.$el.style.zIndex=++i.a.zIndex,s++,n.a.commit("app/SET_HAS_POPUP",!!s))})),!this.backButtonEvent){var a=this.close||this.closePopup;this.backButtonEvent=Object(o.a)(a)}}else--s<0&&(s=0),n.a.commit("app/SET_HAS_POPUP",!!s),this.backButtonEvent&&(Object(o.c)(this.backButtonEvent),this.backButtonEvent=null)}},methods:{}}},f546:function(t,e,a){"use strict";var o={name:"StatusTotalBar",props:{data:{type:Array,default:function(){return[]}},status:{type:String,default:"default"}},data:function(){return{}}},i=(a("f6de"),a("17cc")),n=Object(i.a)(o,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"status-total-bar"},t._l(t.data,(function(e,o){return a("div",{key:o,staticClass:"total-item"},["default"===t.status?[a("p",[a("span",{staticClass:"total-status",class:"total-status-"+e.color},[t._v("\n          "+t._s(e.status)+"\n        ")])]),a("p",[t._v("\n        "+t._s(e.total)+"\n      ")])]:t._e(),"laser-scanning"===t.status?[a("p",[a("span",{staticClass:"total-status",class:"total-status-"+e.color},[t._v("\n          "+t._s(e.status)+"\n        ")]),t._v("\n        ("+t._s(e.total)+")\n      ")])]:t._e()],2)})))}),[],!1,null,"be07cd9c",null);e.a=n.exports},f6de:function(t,e,a){"use strict";a("5b85")},f7ab:function(t,e,a){"use strict";var o=a("65e9").a,i=(a("f7d4"),a("17cc")),n=Object(i.a)(o,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.show?a("div",{ref:"synchronize-tip-bar",staticClass:"synchronize-tip-bar"},[a("icon",{attrs:{name:"caution"}}),t.waitUploadNum?a("span",[t._v("您有"+t._s(t.waitUploadNum)+"条数据待上传")]):t._e(),!t.waitUploadNum&&t.hasChanged?a("span",[t._v("有新数据")]):t._e(),t._v("\n  ，下拉可"+t._s(t.waitUploadNum?"上传":"刷新")+"\n")],1):t._e()}),[],!1,null,"66826030",null);e.a=n.exports},f7d4:function(t,e,a){"use strict";a("2d6e")},fc9fd:function(t,e,a){(t.exports=a("690e")(!1)).push([t.i,".zjapp .drop-down-group[data-v-50725217]{display:flex;flex-direction:row}.zjapp .drop-down-group .select-con[data-v-50725217]{flex:1}.zjapp .status-total-bar-con[data-v-50725217]{position:relative;height:40px}.zjapp .status-total-bar[data-v-50725217]{position:absolute;top:3px;right:10px}[data-v-50725217] .custom-place-list .place-list-con{justify-content:space-between;padding:15px 17px 0}[data-v-50725217] .custom-place-list .place-list-item{flex-basis:calc(50% - 8px);border-radius:100px;margin:0 0 19px;padding:0 10px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;height:28px;line-height:28px;text-align:center}",""])}}]);