(window.webpackJsonp_module_entry_zjapp_=window.webpackJsonp_module_entry_zjapp_||[]).push([["chunk-5b56abcc","chunk-59fa3e5d","chunk-b1eec014"],{"0732":function(e,t,a){var i=a("81f2");"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);(0,a("85cb").default)("1b5b07de",i,!0,{sourceMap:!1,shadowMode:!1})},"0c52":function(e,t,a){(e.exports=a("690e")(!1)).push([e.i,".zjapp .app-stepper[data-v-03df57b7]{display:inline-block;width:110px;height:34px;margin:-2px 0;white-space:nowrap;font-size:0;line-height:0;vertical-align:top}.zjapp .app-stepper .number-input[data-v-03df57b7]{width:51px;height:34px;border:1px solid #dcdcdc;border-radius:0;font-size:14px;text-align:center;background-color:#fff;color:#111;box-sizing:border-box}.zjapp .app-stepper .number-input-focus[data-v-03df57b7]{border-color:#4275e8}.zjapp .btn-add[data-v-03df57b7],.zjapp .btn-minus[data-v-03df57b7]{display:inline-block;width:28px;height:34px;line-height:34px;padding:0;border:1px solid #dcdcdc;color:#666;text-align:center;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;box-sizing:border-box;background-color:#fff}.zjapp .btn-minus[data-v-03df57b7]{border-right:none;border-radius:4px 0 0 4px}.zjapp .btn-add[data-v-03df57b7]{border-left:none;border-radius:0 4px 4px 0}.zjapp .icon-add[data-v-03df57b7],.zjapp .icon-minus[data-v-03df57b7]{font-size:11px;vertical-align:top;display:inline-block;margin-top:10.5px}.zjapp .disabled[data-v-03df57b7]{color:#c8c8c8}.zjapp .activing[data-v-03df57b7]{color:#4275e8}",""])},"0cb6":function(e,t,a){(e.exports=a("690e")(!1)).push([e.i,".zjapp .problem-detail-header[data-v-0901aadd]{display:flex;align-items:center;justify-content:center;height:40px;padding:0 15px;line-height:40px;background-color:#f2f2f2}.zjapp .problem-detail-header .status[data-v-0901aadd]{flex:1;height:16px;line-height:16px;border-left:5px solid #ddd;padding-left:5px;color:#111;font-size:16px}.zjapp .problem-detail-header .status-red[data-v-0901aadd]{border-color:#ff3d3d}.zjapp .problem-detail-header .status-blue[data-v-0901aadd]{border-color:#4275e8}.zjapp .problem-detail-header .status-green[data-v-0901aadd]{border-color:#0bc666}.zjapp .problem-detail-header .status-orange[data-v-0901aadd]{border-color:#fc8b01}.zjapp .problem-detail-header .status-black[data-v-0901aadd]{border-color:#333}.zjapp .problem-detail-header .status-gray[data-v-0901aadd]{border-color:#999}.zjapp .problem-detail-header .return[data-v-0901aadd],.zjapp .problem-detail-header .timeout[data-v-0901aadd],.zjapp .problem-detail-header .urgent[data-v-0901aadd]{display:block;padding:0 5px;margin-left:6px;height:16px;line-height:16px;color:#fff;font-size:12px;border-radius:2px;-webkit-border-radius:2px}.zjapp .problem-detail-header .urgent[data-v-0901aadd]{background-color:#ff3d3d}.zjapp .problem-detail-header .timeout[data-v-0901aadd]{background-color:#954cfe}.zjapp .problem-detail-header .return[data-v-0901aadd]{background-color:#fc8b01}.zjapp .problem-detail-header .operat[data-v-0901aadd]{height:40px;line-height:40px;white-space:nowrap;font-size:16px;color:#6b7ba9}",""])},"0f7b":function(e,t,a){"use strict";a("f548"),a("163d");var i,n,s={name:"AppStepper",components:{NumberInput:a("6948").a},props:{value:{type:[String,Number],default:""},max:{type:[String,Number],default:200},range:{type:Array}},data:function(){return{addActiving:!1,minusActiving:!1}},computed:{rangeMin:function(){return this.range&&this.range[0]||0},rangeMax:function(){return this.range&&this.range[1]?this.range[1]:this.max},allowAdd:function(){return""!==this.value&&this.value<this.rangeMax},allowMinus:function(){return""!==this.value&&this.value>this.rangeMin}},methods:{onChange:function(e){e&&(e=String(e).replace(/\D/g,"")),parseInt(e,10)>parseInt(this.max,10)&&(e=this.max),this.$emit("input",Number(e)),this.$emit("change",Number(e))},add:function(){if(this.allowAdd){var e=parseInt(this.value,10)+1;this.isInRange(e)&&(this.$emit("input",e),this.$emit("change",e)),this.setActiving("add")}},minus:function(){if(this.allowMinus){var e=parseInt(this.value,10)-1;this.isInRange(e)&&(this.$emit("input",e),this.$emit("change",e)),this.setActiving("minus")}},isInRange:function(e){return e>=this.rangeMin&&e<=this.rangeMax},setActiving:function(e){var t=this;e&&("minus"===e?(this.minusActiving=!0,clearTimeout(n),n=setTimeout((function(){t.minusActiving=!1}),300)):(this.addActiving=!0,clearTimeout(i),i=setTimeout((function(){t.addActiving=!1}),300)))}}},r=(a("91cb"),a("17cc")),o=Object(r.a)(s,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-stepper"},[a("button",{staticClass:"btn-minus",class:{disabled:!e.allowMinus,activing:e.minusActiving},on:{click:e.minus}},[a("icon",{attrs:{name:"minus"}})],1),a("number-input",{attrs:{value:e.value,type:"int",range:e.range},on:{input:e.onChange}}),a("button",{staticClass:"btn-add",class:{disabled:!e.allowAdd,activing:e.addActiving},on:{click:e.add}},[a("icon",{attrs:{name:"add"}})],1)],1)}),[],!1,null,"03df57b7",null);t.a=o.exports},"10bd":function(e,t,a){"use strict";a("4950")},"11d8":function(e,t,a){var i=a("8661");"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);(0,a("85cb").default)("5d7b0edc",i,!0,{sourceMap:!1,shadowMode:!1})},"1f63":function(e,t,a){"use strict";a("7434")},2828:function(e,t,a){"use strict";(function(e){a("5ab2"),a("6d57"),a("e10e");var i,n=a("28f8"),s=(a("e697"),a("6a61"),a("2e91")),r=(a("ed63"),a("8cf2"),a("cc57"),a("f369")),o=a("774b"),l=a("da1c"),c=a("07d2"),d=a("e68e"),p=a("3c64"),u=a("cd05"),m=a("87d1"),h=a("6948"),f=a("0f7b"),b=a("fd50"),v=(a("6bf2"),a("e2a7")),g=a("3bd5"),x=a("6144"),_=a("3516"),y=a("6e1b"),k=a("6f9e"),w=a("7c70"),j=a("b385"),C=a("7cb8");function D(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,i)}return a}function O(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?D(Object(a),!0).forEach((function(t){Object(n.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):D(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}t.a={components:{CheckGuide:r.a,Scroller:o.default,ProblemDetailHeader:l.a,Item:c.default,ItemImgList:d.a,ItemTextarea:p.a,UserSelect:u.a,DropSelectCheckitem:m.a,NumberInput:h.a,AppStepper:f.a},data:function(){return{valueDecimal:5,valueRange:[-9999999.99999,9999999.99999],isLoading:!0,detailData:{mode:"",batch:{},checkItemGuideDatas:[],checkItems:[],areaNum:0,areaData:[],image_file:[],remark:""},problemDatas:[],specialInspectId:"",selectCheckitem:{isLoading:!0,mode:"",current:[],selected:[],list:[]}}},computed:{checkItemTitle:function(){var e=this.detailData.checkItems.length;return 0===e?"请选择检查项":1===e?"".concat(this.detailData.checkItemRoot.name,"-").concat(this.detailData.checkItems[0].name):"".concat(this.detailData.checkItemRoot.name,"-").concat(this.detailData.checkItems.length,"项")},hasProblemDataClose:function(){return e.some(this.problemDatas,(function(e){return!e.isOpen}))},isUseMeasureNewUI:function(){return this.$store.state.global.isUseSpecialInspectMeasureNewUI},batchMeasurePassRate:function(){try{if(!this.detailData||!this.detailData.batch)return 1;var e=this.detailData.batch.template_extension;return(e=(e=e&&"string"==typeof e?JSON.parse(e):e)||{}).pass_rate_mode||1}catch(e){return 1}}},created:function(){var e=this;Object(k.d)((function(t){(e.problemDatas.map((function(e){return e.special_inspect_id}))||[]).includes(t.id)&&e.getProblemDatas(t.id).then((function(){var t=e.detailData,a=t?t.status:"检查完毕",i=t&&t.batch?(t.batch.inspector||[]).map((function(e){return e.user_id})):[],n=g.a.getUser().user_id,s="检查完毕"!==a&&!i.includes(n);$log.log("专项巡检-实测实量-数据冲突-页面"," 是否返回上一页：",s," 检查人id：",i," 用户id：",n," 检查项的状态：",a),s&&e.$router.go(-1)}))}))},activated:function(){var e=this.$route.query.specialInspectId;this.specialInspectId=e,this.getProblemDatas(e)},methods:{contains:function(t,a){return e.includes(t,a)},pointFilter:function(t,a){return e.filter(t,a)},changeMode:function(e){this.$set(this.detailData,"mode",e),this.$refs.scroller.scrollTop=0},checkItemRest:(i=Object(s.a)(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=(this.problemDatas||[]).map((function(e){return{id:e.id,special_inspect_id:e.special_inspect_id}})),e.prev=1,e.next=4,w.a.networkTest("确定删除已检查内容与问题？\n删除的已检查内容与问题将无法找回。");case 4:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,w.a.measureCheckItemsRest(t);case 9:v.a.hideLoading(),v.a.alert("删除成功"),this.$router.go(-1),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(1),v.a.hideLoading(),v.a.alert(e.t0.errmsg);case 18:case"end":return e.stop()}}),e,this,[[1,14]])}))),function(){return i.apply(this,arguments)}),toggleProblemData:function(e){this.problemDatas.length>1&&this.$set(e,"isOpen",!e.isOpen)},toggleProblemDataAll:function(){var t=this,a=this.hasProblemDataClose;e.each(this.problemDatas,(function(e){t.$set(e,"isOpen",!!a)}))},areaNumChange:function(){var t=this;this.detailData=Object(j.i)(this.detailData),e.each(this.problemDatas,(function(e,a){e.areaNum=t.detailData.areaNum,e=Object(j.h)(e),e=Object(j.j)(e),e=Object(j.f)(e),e=Object(j.g)(e),t.$set(t.problemDatas,a,e)})),this.detailData=Object(j.b)(this.detailData,this.problemDatas),this.saveProblem()},areaNumOverflow:function(){v.a.alert("测区数范围为1到40")},setValUpdate:function(e){var t=this.problemDatas.indexOf(e);e=Object(j.k)(e),e=Object(j.f)(e),e=Object(j.g)(e),this.$set(this.problemDatas,t,e),this.detailData=Object(j.b)(this.detailData,this.problemDatas),this.saveProblem()},realityValUpdate:function(e){var t=this.problemDatas.indexOf(e);e=Object(j.f)(e),e=Object(j.g)(e),this.$set(this.problemDatas,t,e),this.detailData=Object(j.b)(this.detailData,this.problemDatas),this.saveProblem()},areaPointNumChange:function(t,a){var i=e.map(this.problemDatas,(function(t){return e.find(t.areaData,(function(e){return e.name===a.name}))}));if(!e.some(i,(function(e){return 0!==e.pointNum})))return a.pointNum=e.filter(t.realityVal,{area:a.name}).length,void v.a.alert("一个测区不能所有检查项的点数为0");if(12===t.passrate_mode&&(a.pointNum<2||a.pointNum>6))return a.pointNum=e.filter(t.realityVal,{area:a.name}).length,v.a.alert("标高差算法每个测区实测值个数为 2~6");if(16===t.passrate_mode&&(a.pointNum>99||1===a.pointNum))return a.pointNum=e.filter(t.realityVal,{area:a.name}).length,v.a.alert("每个测区点数应该是 2~99 的整数");var n=this.problemDatas.indexOf(t);t=Object(j.j)(t),t=Object(j.f)(t),t=Object(j.g)(t),this.$set(this.problemDatas,n,t),this.detailData=Object(j.b)(this.detailData,this.problemDatas),this.saveProblem()},setSingleValChange:function(e,t){var a=this.problemDatas.indexOf(e);e=Object(j.h)(e),e=Object(j.j)(e),e=Object(j.f)(e),e=Object(j.g)(e),this.$set(this.problemDatas,a,e),this.detailData=Object(j.b)(this.detailData,this.problemDatas),this.saveProblem()},areaNameUpdate:function(t){var a=t.name,i=t.nameTemp;if(t&&Object(C.i)(i)&&a!==i){if(e.some(this.detailData.areaData,(function(e){return e.name===i})))return v.a.alert(i+"已存在"),void(t.isEditing=!1);t.name=i,e.each(this.problemDatas,(function(t){var n=e.find(t.areaData,{name:a}),s=e.filter(t.realityVal,{area:a});n&&(n.name=i),e.each(s,(function(e){e.area=i}))})),this.$set(t,"isEditing",!1),this.saveProblem()}else this.$set(t,"isEditing",!1)},checkSubmitData:function(t){return!!t&&!e.some(t,(function(t){var a=e.some(t.realityVal,(function(e){return!Object(C.i)(e.val)})),i=e.includes([3,4,6,10,11,15,16],t.passrate_mode)&&e.some(t.realityVal,(function(e){return!Object(C.i)(e.setVal)})),n=e.isEmpty(t.realityVal);if(12===t.passrate_mode){var s=e.groupBy(t.realityVal||[],"area");if(e.some(s,(function(t){return e.filter(t,(function(e){return Object(C.i)(e.val)})).length<2})))return v.a.alert(t.checkItem.name+"每个测区至少填两个值"),!0}else if(5===t.passrate_mode){var r=Object(j.a)(t.realityVal),o=r.hasEmptyArea;if(a=r.incompleted,i=r.emptySetVal,o)return v.a.alert("宽度、高度至少需完整录入其中一个"),!0;if(a||i)return v.a.alert("请录全所有实测值和设计值"),!0}return n?(v.a.alert("每个检查项至少一个测点"),!0):12!==t.passrate_mode&&a?(v.a.alert("请填写全部实测值"),!0):i?(v.a.alert("请填写全部设计值"),!0):void 0}))},saveProblem:function(){var t=this,a=e.clone(this.problemDatas),i=e.clone(this.detailData);return"reedit"===this.detailData.mode?b.a.when():y.a.saveMeasureProblems(a,i).then((function(){t.detailData.status="检查中",e.each(t.problemDatas,(function(e){e.status="检查中"}))})).catch((function(e){v.a.alert(e)}))},saveProblemAndTip:function(){this.saveProblem().then((function(){v.a.alert("保存成功")}))},delProblem:function(){var t=this;if("检查中"===this.detailData.status)return v.a.popBox({title:"确定删除吗？",cancelText:"取消",okText:"删除"}).then((function(a){var i;if(a)return i=e.map(t.problemDatas,(function(e){return e.special_inspect_id})),y.a.deleteMeasureProblemDataByBizIds(i,!0).then((function(){t.$router.go(-1)})).catch((function(e){v.a.alert(e,2e3)}))}))},submitCheck:function(){var e=this,t=O({},this.problemDatas),a=O({},this.detailData);if(console.log("提交",t,a),this.checkSubmitData(t))return v.a.confirm("确定提交？",{okText:"提交"}).then((function(i){if(i)return y.a.submitMeasureProblems(t,a).then((function(){e.getProblemDatas(t[0].special_inspect_id)})).catch((function(e){v.a.alert(e)})).finally((function(){}))}))},resubmitCheck:function(){var e=this,t=O({},this.problemDatas),a=O({},this.detailData);if(this.checkSubmitData(t))return v.a.confirm("确定提交？",{okText:"提交"}).then((function(i){if(i)return y.a.resubmitMeasureProblems(t,a).then((function(){e.getProblemDatas(t[0].special_inspect_id)})).catch((function(e){v.a.alert(e)})).finally((function(){}))}))},areaNameEdit:function(e,t){var a=this;this.$set(e,"isEditing",!0),setTimeout((function(){a.$refs["area-ipt-".concat(t)][0].focus()}),100),this.$set(e,"nameTemp",e.name)},onChangeCheckitem:function(t){var a,i=[];e.isArray(t)||(t=[t]),a=e.map(t,(function(e){return e.id})),e.each(this.problemDatas,(function(a){e.some(t,{id:a.special_inspect_id})||i.push(a.special_inspect_id)})),this.getProblemDatas(a,i)},getProblemDatas:function(t,a){var i=this;return e.isArray(t)||(t=[t]),this.isLoading=!0,y.a.getMeasureProblemDatas(t,a).then((function(t){var a=[];return e.each(t,(function(e){a.push({id:e.id,special_inspect_id:e.special_inspect_id,group_id:e.group_id,status:e.status,batchId:e.batch_id,areaNum:0,areaData:[],areaObj:{},areasName:JSON.parse(e.areas_name||"[]"),passrate:0,realityVal:JSON.parse(e.problem_values||"[]"),standard_min:e.standard_min,standard_max:e.standard_max,passrate_mode:parseInt(e.passrate_mode),checkItem:{id:e.item_id,name:e.item_name,full_name:e.item_full_name,code:e.item_code,parent_id:e.item_parent_id,guide:e.item_guide,guide_image:JSON.parse(e.item_guide_image||"[]"),area_num:e.item_area_num,area_point_num:e.item_area_point_num,extension:JSON.parse(e.extension||"[]")},image_file:JSON.parse(e.image_file||"[]"),remark:e.remark,regist:{id:e.regist_id,name:e.regist_name,mobile:e.regist_mobile,is_im_user:e.regist_is_im_user},regist_date:e.regist_date})})),a})).then((function(e){i.problemDatas=Object(j.e)(e)})).then((function(){return y.a.getSpecialInspectBatchById(i.problemDatas[0].batchId).then((function(e){return i.detailData.batch=e,_.a.getBatchUsers(e.root_id||e.parent_id||e.id).then((function(e){i.detailData.batch.inspector=e.map((function(e){return{name:e.name,user_id:e.user_id}}))}))}))})).then((function(){var t=Object(j.d)(i.detailData,i.problemDatas),a=t.detailData,n=t.problemDatas;i.detailData=a,i.problemDatas=n,e.each(i.problemDatas,(function(t){var a=e.map(i.isUseMeasureNewUI?t.areaData:i.detailData.areaData,(function(a,i){var n=e.find(t.areaData,{name:a.name})||{};return t.areaObj[a.name]=i+1,{name:a.name,setVal:Object(C.i)(n.setVal)?n.setVal:"",pointNum:n.pointNum||0}}));t.areaData=a,t.areaNum=a.length,"view"!==i.detailData.mode&&Object(j.j)(t)}))})).then((function(){return y.a.getParentCheckitem(i.problemDatas[0].checkItem.parent_id).then((function(e){i.detailData.checkItemRoot=e}))})).then((function(){return e.each(i.problemDatas,(function(e){e=Object(j.f)(e),e=Object(j.g)(e)})),i.detailData=Object(j.b)(i.detailData,i.problemDatas),$log.log("专项巡检-实测实量--\x3e取数"),Object(j.c)(i.problemDatas)})).then((function(){var t=e.map(i.problemDatas,(function(e){return{id:e.special_inspect_id,name:e.checkItem.name,item_id:e.checkItem.id,item_name:e.checkItem.name}}));return i.selectCheckitem.selected=e.clone(t),i.selectCheckitem.current=e.clone(t),i.selectCheckitem.mode=i.detailData.mode,i.selectCheckitem.isLoading=!0,y.a.getSpecialInspectMeasureList(i.detailData.batch.id).then((function(t){var a=x.a.getObject("specialInspectMeasureCheckitemSelectMemory")||{};e.each(t,(function(t){var n=e.isEmpty(i.selectCheckitem.selected)?e.isEmpty(i.selectCheckitem.current)?null:i.selectCheckitem.current[0]:i.selectCheckitem.selected[0],s=n&&e.some(t.subitems,(function(e){return e.id===n.id})),r=a[t.id];(s||r)&&(t.isOpen=!0)})),i.selectCheckitem.isLoading=!1,i.selectCheckitem.list=t}))})).catch((function(e){e&&($log.error(e),v.a.alert(e,2e3),setTimeout((function(){i.$router.go(-1)}),0))})).finally((function(){console.log("this.detailData =======",i.detailData),console.log("this.problemDatas ========",i.problemDatas),i.isLoading=!1}))}}}}).call(this,a("391c"))},2939:function(e,t,a){(e.exports=a("690e")(!1)).push([e.i,".zjapp .page-scroll[data-v-74102c05]{flex:1;overflow:auto;padding-bottom:100px;transform:translateZ(0)}.zjapp .sublist[data-v-74102c05]{padding-left:25px;padding-top:1px;background-color:#fff}.zjapp .sublist>.sublist[data-v-74102c05]{padding-left:10px;padding-top:0}",""])},"2c76":function(e,t,a){"use strict";a("c070")},"3c64":function(e,t,a){"use strict";a("163d");var i={name:"ItemTextarea",components:{},props:{value:{type:String,default:""},placeholder:{type:String,default:""},maxlength:{type:Number,default:200},borderBottom:{type:Boolean,default:!0}},data:function(){return{textareaHeight:40,isLock:!1,blurTime:null}},computed:{lastLength:function(){var e=this.value&&this.value.length||0,t=this.maxlength-e;return t>0?t:0}},mounted:function(){var e=this;this.$nextTick((function(){e.textareaHeight=e.$refs.rule&&e.$refs.rule.offsetHeight||40}))},methods:{onfocus:function(){var e=(new Date).getTime();this.blurTime&&e-this.blurTime<300&&window.cordova&&window.cordova.plugins&&window.cordova.plugins.Keyboard&&(this.$refs.input.blur(),window.cordova.plugins.Keyboard.close()),this.blurTime=null,this.$emit("focus")},onblur:function(){this.blurTime=(new Date).getTime(),this.$emit("blur")},setStatus:function(e){console.log(e),this.isLock=e},oninput:function(e){var t=this;setTimeout((function(){if(!t.isLock){var a=e.target.value;a.length>t.maxlength&&(a=a.substring(0,t.maxlength),t.$refs.input.value=a),t.$refs.rule.innerText=a,t.textareaHeight=t.$refs.rule&&t.$refs.rule.offsetHeight+20,t.$emit("input",a),t.$emit("change",a)}}),0)}}},n=(a("2c76"),a("17cc")),s=Object(n.a)(i,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"item-textarea",class:{"border-bottom":e.borderBottom}},[a("div",{staticClass:"item-textarea-content"},[a("textarea",{ref:"input",style:{height:e.textareaHeight+"px"},attrs:{placeholder:e.placeholder},domProps:{value:e.value},on:{focus:e.onfocus,blur:e.onblur,compositionstart:function(t){e.setStatus(!0)},compositionend:function(t){e.setStatus(!1)},input:e.oninput}}),a("div",{ref:"rule",staticClass:"rule"},[e._v("\n      "+e._s(e.value)+"\n    ")]),e.maxlength!==1/0?a("p",{staticClass:"counter"},[e._v("\n      "+e._s(e.lastLength)+"\n    ")]):e._e()])])}),[],!1,null,null,null);t.a=s.exports},"3cd8":function(e,t,a){var i=a("5c19");"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);(0,a("85cb").default)("67c16200",i,!0,{sourceMap:!1,shadowMode:!1})},4950:function(e,t,a){var i=a("8d2b");"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);(0,a("85cb").default)("5f70e71e",i,!0,{sourceMap:!1,shadowMode:!1})},"515e":function(e,t,a){"use strict";var i=a("329b"),n=a("f1e4").a,s=(a("fe9e"),a("17cc")),r=Object(s.a)(n,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("transition",{attrs:{name:"slide-right"}},[e.show?a("page-content",{class:{"content-not-empty":e.content.length},attrs:{mode:"dialog",title:"检查指引","on-close":e.closePopup}},[e.isLoading?e._e():a("div",{staticClass:"check-guide-detail-hd border-bottom"},[a("h2",{staticClass:"check-guide-detail-title pb10"},[e._v(e._s(e.title))])]),!e.isLoading&&e.content.length?a("div",{staticClass:"check-guide-detail-content"},e._l(e.content,(function(t,i){return a("p",{key:i},[t.isImg&&t.src?a("img",{class:{"img-not-ready":!t.ready,error:"rejected"===t.status},attrs:{src:e.getThumbnail(t)},on:{error:function(a){e.imgError(t,i)},click:function(a){e.imgClick(t)}}}):e._e(),t.isImg?e._e():a("span",[e._v("\n          "+e._s(t.val)+"\n        ")])])}))):e._e(),a("loading-status",{attrs:{"is-loading":e.isLoading,"is-empty":!e.content.length,"empty-text":"PC端未设置检查指引"}})],1):e._e()],1)}),[],!1,null,"43042f0d",null).exports,o=!1;o||(o=new(i.default.extend(r))({el:document.createElement("div")}),document.body.appendChild(o.$el));t.a=o},5537:function(e,t,a){"use strict";a("11d8")},"574c":function(e,t,a){(e.exports=a("690e")(!1)).push([e.i,".zjapp .item-textarea{background-color:#fff;padding:5px 15px}.zjapp .item-textarea-content{position:relative}.zjapp .item-textarea .rule,.zjapp .item-textarea textarea{width:100%;min-height:40px;line-height:20px;font-size:16px;padding:0;border:none}.zjapp .item-textarea .rule{position:absolute;top:0;left:0;visibility:hidden;word-break:break-all}.zjapp .item-textarea .counter{text-align:right;margin:0 0 -5px 0;height:15px;line-height:15px;color:#b2b2b2;font-size:12px}",""])},"5c19":function(e,t,a){(e.exports=a("690e")(!1)).push([e.i,".zjapp .content-not-empty[data-v-43042f0d] .layout-content{display:auto;overflow:auto;padding-bottom:100px}.zjapp .check-guide-detail-hd[data-v-43042f0d]{margin-left:30px;padding:25px 30px 5px 0}.zjapp .check-guide-detail-title[data-v-43042f0d]{margin:0;line-height:20px;font-size:18px;color:#111;font-weight:700;word-break:break-all}.zjapp .check-guide-detail-info[data-v-43042f0d]{line-height:20px;font-size:14px;color:#8c8c8c}.zjapp .check-guide-detail-content[data-v-43042f0d]{padding:30px;line-height:30px;color:#333;font-size:16px}.zjapp .check-guide-detail-content p[data-v-43042f0d]{margin-bottom:30px;min-height:1em}.zjapp .check-guide-detail-content img[data-v-43042f0d]{max-width:100%}.zjapp .check-guide-detail-content .img-not-ready[data-v-43042f0d]{width:80px;height:auto}.zjapp .error[data-v-43042f0d]{max-width:50%}",""])},"5d4c":function(e,t,a){"use strict";a("9a3b")},6272:function(e,t,a){(e.exports=a("690e")(!1)).push([e.i,'.zjapp .number-input[data-v-74068386]{position:relative;display:inline-block;vertical-align:top;width:61px;height:30px;border:1px solid #e5e5e5;border-radius:3px;text-align:center;font-size:14px;color:#333}@media screen and (min-width:320px){.zjapp .number-input[data-v-74068386]{width:50px}}@media screen and (min-width:360px){.zjapp .number-input[data-v-74068386]{width:58px}}@media screen and (min-width:375px){.zjapp .number-input[data-v-74068386]{width:61px}}.zjapp .text[data-v-74068386]{position:relative;display:inline-block;vertical-align:top;width:100%;height:100%;line-height:28px;overflow:hidden}.zjapp .text.disabled[data-v-74068386]{background:#f5f5f5;color:#666}.zjapp .value[data-v-74068386]{position:absolute;top:50%;right:0;margin-top:-14px;min-width:100%;height:28px;color:inherit}.zjapp .placeholder[data-v-74068386],.zjapp .value[data-v-74068386]{line-height:28px;pointer-events:none}.zjapp .placeholder[data-v-74068386]{display:inline-block;vertical-align:top;width:100%;height:100%;color:#b2b2b2}.zjapp .icon-minus[data-v-74068386]{position:absolute;top:-9px;right:-9px;width:18px;height:18px;border-radius:9px;background-color:#ff4546}.zjapp .icon-minus[data-v-74068386]:before{content:"";position:absolute;left:4px;top:8px;width:10px;height:2px;background-color:#fff}.zjapp .icon-minus[data-v-74068386]:after{content:"";position:absolute;left:-5px;top:-5px;width:28px;height:28px;border-radius:9px}.zjapp .number-input-select-all .value-handle[data-v-74068386]{background-color:#cbdaf9}.zjapp .number-input.unqualified[data-v-74068386]{border:1px solid #ffe8e8;background-color:#fff3f3;color:#ff5050}.zjapp .number-input.qualified .text[data-v-74068386]{color:#333}.zjapp .number-input.number-input-focus[data-v-74068386]{border-color:#4275e8;box-shadow:0 0 8px 0 rgba(66,117,232,.37)}.zjapp .number-input.number-input-empty[data-v-74068386]{border-color:#ff3d3d;box-shadow:0 0 8px 0 rgba(255,59,48,.37)}',""])},6948:function(e,t,a){"use strict";a("2b45"),a("163d");var i=a("329b"),n=a("8c3d").a,s=(a("b55a"),a("17cc")),r=Object(s.a)(n,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("transition",{attrs:{name:"slide-up"},on:{leave:e.startClose,afterLeave:e.onClose}},[e.show?a("div",{staticClass:"number-keyboard-con",class:{"ios-bezel-less":e.isIOSBezelLess},style:{"z-index":e.zIndex},on:{touchstart:e.keyTouchstart,touchend:e.keyTouchend}},["true-or-false"===e.type?[a("div",{staticClass:"keyboard-row"},[a("div",{staticClass:"row-span-3 keys-row"},[a("div",{staticClass:"keys col color-green",attrs:{direct:"setTure"}},[a("icon",{attrs:{name:"qualified"}}),e._v("\n            合格\n          ")],1),a("div",{staticClass:"keys col color-red",attrs:{direct:"setFalse"}},[a("icon",{attrs:{name:"unqualified"}}),e._v("\n            不合格\n          ")],1)]),a("div",{staticClass:"row-span-1"},[a("div",{staticClass:"keys-row"},[a("div",{staticClass:"keys keys-ok",attrs:{direct:"closeKeyboard"}},[a("icon",{attrs:{name:"keyboard-close"}})],1)]),a("div",{staticClass:"keys-row"},[a("div",{staticClass:"keys keys-delete",attrs:{direct:"delete"}},[a("icon",{attrs:{name:"keyboard-delete"}})],1)])])]),a("div",{staticClass:"keyboard-row"},[a("div",{staticClass:"keys keys-prev",class:{disabled:!e.hasPrev},attrs:{direct:"prev"}},[e._v("\n          上一项\n        ")]),a("div",{staticClass:"keys keys-next",class:{disabled:!e.hasNext},attrs:{direct:"next"}},[e._v("\n          下一项\n        ")])])]:[a("div",{staticClass:"keyboard-row"},[a("div",{staticClass:"keys",attrs:{direct:"1"}},[e._v("1")]),a("div",{staticClass:"keys",attrs:{direct:"2"}},[e._v("2")]),a("div",{staticClass:"keys",attrs:{direct:"3"}},[e._v("3")]),a("div",{staticClass:"keys keys-ok",attrs:{direct:"closeKeyboard"}},[a("icon",{attrs:{name:"keyboard-close"}})],1)]),a("div",{staticClass:"keyboard-row"},[a("div",{staticClass:"keys",attrs:{direct:"4"}},[e._v("4")]),a("div",{staticClass:"keys",attrs:{direct:"5"}},[e._v("5")]),a("div",{staticClass:"keys",attrs:{direct:"6"}},[e._v("6")]),a("div",{staticClass:"keys keys-delete",attrs:{direct:"delete"}},[a("icon",{attrs:{name:"keyboard-delete"}})],1)]),a("div",{staticClass:"keyboard-row"},[a("div",{staticClass:"keys",attrs:{direct:"7"}},[e._v("7")]),a("div",{staticClass:"keys",attrs:{direct:"8"}},[e._v("8")]),a("div",{staticClass:"keys",attrs:{direct:"9"}},[e._v("9")]),a("div",{staticClass:"keys keys-prev",class:{disabled:!e.hasPrev},attrs:{direct:"prev"}},[e._v("\n          上一项\n        ")])]),a("div",{staticClass:"keyboard-row"},[a("div",{staticClass:"keys",class:{disabled:e.isDisabledMinus},attrs:{direct:"-"}},[e._v("-")]),a("div",{staticClass:"keys",attrs:{direct:"0"}},[e._v("0")]),a("div",{staticClass:"keys",class:{disabled:e.isDisabledPoint},attrs:{direct:"."}},[e._v(".")]),a("div",{staticClass:"keys keys-next",class:{disabled:!e.hasNext},attrs:{direct:"next"}},[e._v("\n          下一项\n        ")])])]],2):e._e()])}),[],!1,null,"6337f428",null).exports,o=!1;o||(o=new(i.default.extend(r))({el:document.createElement("div")}),document.body.appendChild(o.$el));var l=o,c=a("6f9e"),d=a("4360"),p={name:"NumberInput",props:{value:{type:[String,Number]},type:{type:String,default:"all"},decimal:{type:Number,default:2},placeholder:{type:String,default:""},nextEvent:{type:Function},range:{type:Array,default:function(){return[]}},overflowAutoRecover:{type:Boolean,default:!1},required:{type:Boolean},emptyAutoRecover:{type:Boolean,default:!0},disabled:{type:Boolean,default:!1},isSetEmptyTip:{type:Boolean,default:!1}},data:function(){return{rawValue:"",isFocusing:!1,isSelectAll:!1,keyboardHeight:d.a.state.app.isIOSBezelLess?266:"true-or-false"===this.type?176:232}},computed:{min:function(){return isNaN(this.range[0])?-1/0:parseFloat(this.range[0])},max:function(){return isNaN(this.range[1])?1/0:parseFloat(this.range[1])}},created:function(){c.a.$on("numberInputBlur",this.setBlur),c.a.$on("numberKeyboardClose",this.setBlur)},beforeDestroy:function(){this.isFocusing&&l.closeKeyboard()},destroyed:function(){c.a.$off("numberInputBlur",this.setBlur),c.a.$off("numberKeyboardClose",this.setBlur)},methods:{hasVal:function(e){return null!=e&&""!==e},openKeyboard:function(){this.disabled||(this.isFocusing?this.isSelectAll=!1:(c.a.$emit("numberInputBlur"),this.setFocus(),l.openKeyboard({inputComponent:this})))},setFocus:function(){this.isFocusing=!0,"true-or-false"!==this.type&&(this.isSelectAll=!0),this.rawValue=this.value,l.$on("keyboardInput",this.input),l.$on("keyboardAssign",this.assign),l.$on("keyboardDelete",this.deleteValue),l.$on("keyboardClear",this.clear),this.$emit("focus")},setBlur:function(){if(this.isFocusing){var e=this.checkValue();this.isFocusing=!1,this.isSelectAll=!1,l.$off("keyboardInput",this.input),l.$off("keyboardAssign",this.assign),l.$off("keyboardDelete",this.deleteValue),l.$off("keyboardClear",this.clear),this.$emit("input",e),this.$emit("blur",e),this.$nextTick((function(){l.calcTab()}))}},input:function(e){var t=this.hasVal(this.value)?this.value.toString():"",a="";this.isSelectAll?(a=e,this.isSelectAll=!1):a=t+e,console.log("newValue =====",a),this.$emit("input",a),l.setKeysStatus(a,this.type)},assign:function(e){this.isSelectAll=!1,this.$emit("input",e),l.setKeysStatus(e,this.type)},deleteValue:function(){var e=this.hasVal(this.value)?this.value.toString():"",t="";this.hasVal(e)&&(t=this.isSelectAll?"":e.substr(0,e.length-1)),this.$emit("input",t),l.setKeysStatus(t,this.type)},clear:function(){this.$emit("input",""),l.setKeysStatus("",this.type)},checkValue:function(){var e=this.hasVal(this.value)?this.value.toString():"";"-"===e&&(e=""),"."===e.substr(-1)&&(e=e.substr(0,e.length-1));var t=e.indexOf(".");return t>0&&(e=parseFloat(e.substring(0,t+this.decimal+1))),e=parseFloat(e),isNaN(e)?this.required&&this.emptyAutoRecover?(e=this.rawValue,this.$emit("onEmpty")):e="":(e<this.min&&(e=this.overflowAutoRecover?this.rawValue:this.min,this.$emit("overflowRange")),e>this.max&&(e=this.overflowAutoRecover?this.rawValue:this.max,this.$emit("overflowRange"))),e}}},u=(a("6abe"),Object(s.a)(p,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"number-input component-number-input",class:{"number-input-focus":e.isFocusing,"number-input-empty":e.isSetEmptyTip&&!e.value&&!e.isFocusing,"number-input-select-all":e.isSelectAll,qualified:"true-or-false"===e.type&&1===e.value,unqualified:"true-or-false"===e.type&&0===e.value}},[a("div",{staticClass:"text",class:{disabled:e.disabled},on:{click:function(t){return t.stopPropagation(),e.openKeyboard(t)}}},[e.hasVal(e.value)?a("span",{staticClass:"value"},[a("span",{staticClass:"value-handle"},[e._v(e._s("true-or-false"===e.type?1===e.value?"合格":"不合格":e.value))])]):a("span",{staticClass:"placeholder"},[e._v("\n      "+e._s(e.placeholder)+"\n    ")])]),e._t("extend")],2)}),[],!1,null,"74068386",null));t.a=u.exports},"6abe":function(e,t,a){"use strict";a("bebe")},7434:function(e,t,a){var i=a("0cb6");"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);(0,a("85cb").default)("f6a1180a",i,!0,{sourceMap:!1,shadowMode:!1})},"7c70":function(e,t,a){"use strict";(function(e){a("5ab2"),a("e10e");var i,n,s,r,o,l,c=a("28f8"),d=(a("06a2"),a("6d57"),a("163d"),a("6a61"),a("2e91")),p=a("8693"),u=a("162a"),m=a("48f4"),h=a("c058"),f=a("1b7e"),b=a("e2a7");function v(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,i)}return a}function g(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?v(Object(a),!0).forEach((function(t){Object(c.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):v(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}t.a={networkTest:(l=Object(d.a)(regeneratorRuntime.mark((function e(t){var a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.getHasNetwork();case 2:if(e.sent){e.next=6;break}return b.a.alert("当前无网络"),e.abrupt("return",Promise.reject());case 6:return e.next=8,b.a.confirm({message:t,okText:"删除",cancelText:"取消",className:"dialog-customize confirm-color-red"});case 8:return(a=e.sent)&&b.a.loading("正在提交..."),e.abrupt("return",Promise.resolve(a));case 11:case"end":return e.stop()}}),e)}))),function(e){return l.apply(this,arguments)}),measureCheckItemsRest:(o=Object(d.a)(regeneratorRuntime.mark((function t(a){var i,n,s;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,i={special_inspect_ids:a.map((function(e){return e.special_inspect_id})).join(",")},$log.log("专项巡检-实测实量-检查项重置-请求的参数：",i),t.next=5,u.a.post("/online/special-inspect/delete-data-of-checkitem",null,i);case 5:if(n=t.sent,!Number(n.errcode)||0===Number(n.errcode)){t.next=8;break}return t.abrupt("return",Promise.reject(n));case 8:return s=[],e.forEach(a,(function(e){var t={remark:"",status:"未设置",image_file:"[]",id:e.special_inspect_id,download_time:n.update_timestamp},a={id:e.id,group_id:"",measurement_points:"",problem_points:"",problem_values:"",problem_values_zip:""};$log.log("专项巡检-实测实量-检查项重置-请求的参数："," special_inspect => ",t," special_inspect_measure_item =>",a);var i=p.a.updateSpecialInspectData(t),r=p.a.updateSpecialInspectMeasureItem(a),o=m.default.removeSyncGroup(e.special_inspect_id);s.push(i,r,o)})),t.next=12,Promise.all(s);case 12:return $log.log("专项巡检-实测实量-检查项重置-成功"),t.abrupt("return",Promise.resolve());case 16:return t.prev=16,t.t0=t.catch(0),$log.log("专项巡检-实测实量-检查项重置-error：",t.t0),t.abrupt("return",Promise.reject(t.t0));case 20:case"end":return t.stop()}}),t,null,[[0,16]])}))),function(e){return o.apply(this,arguments)}),postDeleteProblem:(r=Object(d.a)(regeneratorRuntime.mark((function e(t){var a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u.a.post("/online/problem-secure/delete",null,{id:t});case 3:if(a=e.sent,!Number(a.errcode)||0===Number(a.errcode)){e.next=6;break}return e.abrupt("return",Promise.reject(a));case 6:return e.abrupt("return",Promise.resolve(a));case 9:return e.prev=9,e.t0=e.catch(0),$log.log("专项巡检-删除问题-error：",e.t0),e.abrupt("return",Promise.reject(e.t0));case 13:case"end":return e.stop()}}),e,null,[[0,9]])}))),function(e){return r.apply(this,arguments)}),postRestCheckItemTemplate11:(s=Object(d.a)(regeneratorRuntime.mark((function e(t){var a,i,n,s,r,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=t.specialInspectId,i=t.placeCheckitemId,n=t.problemIds,$log.log("专项巡检-观感模板-删除检查项内容-传入数据：",t),s={special_inspect_ids:a,place_checkitem_id:i},e.next=6,u.a.post("/online/special-inspect/delete-data-of-checkitem",null,s);case 6:if(r=e.sent,!Number(r.errcode)||0===Number(r.errcode)){e.next=9;break}return e.abrupt("return",Promise.reject(r));case 9:return e.next=11,this.sqlDeleteProblem(n);case 11:return $log.log("专项巡检-观感模板-删除检查项内容-删除问题成功"),o={id:i,status:"未设置",remark:null,checker:"",image_file:"[]",deduction:null,download_time:r.update_timestamp},$log.log("更新special_inspect_place_checkitem数据：",o),e.next=16,p.a.updatePlaceSpecialInspectData(o);case 16:return $log.log("专项巡检-观感模板-删除检查项内容-删除检查项的内容成功"),e.next=19,m.default.removeSyncGroup(i);case 19:return $log.log("专项巡检-观感模板-删除检查项内容-删除上传队列成功"),e.abrupt("return",Promise.resolve());case 23:return e.prev=23,e.t0=e.catch(0),$log.log("专项巡检-删除问题-error：",e.t0),e.abrupt("return",Promise.reject(e.t0));case 27:case"end":return e.stop()}}),e,this,[[0,23]])}))),function(e){return s.apply(this,arguments)}),postRestProblemCheckitem:(n=Object(d.a)(regeneratorRuntime.mark((function t(a){var i,n,s,r,o,l,c;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,i=a.specialInspectId,n=a.restSpecialField,s=void 0===n?{}:n,$log.log("专项巡检-重置检查项内容-传入数据：",a),r={special_inspect_ids:i},t.next=6,u.a.post("/online/special-inspect/delete-data-of-checkitem",null,r);case 6:if(o=t.sent,!Number(o.errcode)||0===Number(o.errcode)){t.next=9;break}return t.abrupt("return",Promise.reject(o));case 9:return l=g({id:i,status:"未设置",remark:null,image_file:"[]",download_time:o.update_timestamp},s),$log.log("更新special_inspect数据：",l),t.next=13,p.a.updateSpecialInspectData(l);case 13:return $log.log("专项巡检-重置检查项内容-重置成功"),t.next=16,m.default.removeSyncGroup(i);case 16:return $log.log("专项巡检-重置检查项内容-删除上传队列成功"),t.next=19,p.a.getProblemBySpecialInspect(i);case 19:return c=t.sent,(c=e.map(c,(function(e){return e.id})))&&this.sqlDeleteProblem(c),t.abrupt("return",Promise.resolve());case 25:return t.prev=25,t.t0=t.catch(0),$log.log("专项巡检-重置检查项-error：",t.t0),t.abrupt("return",Promise.reject(t.t0));case 29:case"end":return t.stop()}}),t,this,[[0,25]])}))),function(e){return n.apply(this,arguments)}),sqlDeleteProblem:(i=Object(d.a)(regeneratorRuntime.mark((function e(t){var a,i,n,s=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=s.length>1&&void 0!==s[1]&&s[1],e.prev=1,Array.isArray(t)||(t=[t]),$log.log("专项巡检-删除问题-传入ids：",t),e.next=6,p.a.deleteProblemAllIds(t);case 6:return $log.log("专项巡检-删除问题-删除问题表和关联表成功"),i=[],t.forEach((function(e){i.push(m.default.removeSyncGroup(e))})),e.next=11,Promise.all(i);case 11:if($log.log("专项巡检-删除问题-删除上传队列成功"),a){e.next=18;break}return n=[],t.forEach((function(e){var t=h.a.addLog({relation_id:e,business_type:"special-inspect",event:"删除"});n.push(t)})),e.next=17,Promise.all(n);case 17:$log.log("专项巡检-删除问题-添加删除业务日志");case 18:return e.abrupt("return",Promise.resolve());case 21:return e.prev=21,e.t0=e.catch(1),$log.log("专项巡检-删除问题-error：",e.t0),e.abrupt("return",Promise.reject(e.t0));case 25:case"end":return e.stop()}}),e,null,[[1,21]])}))),function(e){return i.apply(this,arguments)})}}).call(this,a("391c"))},"81f2":function(e,t,a){(e.exports=a("690e")(!1)).push([e.i,'.zjapp .main[data-v-2cac8864]{position:fixed;width:100%;bottom:0}.zjapp .arrow[data-v-2cac8864]{position:absolute;top:-7px;right:18px;width:0;height:0;border-bottom:7px solid #fff;border-right:7px solid transparent;border-left:7px solid transparent}.zjapp .content[data-v-2cac8864]{position:absolute;top:0;left:0;width:100%;height:100%;background-color:rgba(0,0,0,.4);overflow:hidden}.zjapp .box[data-v-2cac8864]{display:flex;flex-direction:column;background-color:#fff;overflow:auto}.zjapp .box-single[data-v-2cac8864]{display:flex;flex-direction:column;flex:1}.zjapp .detail-hd[data-v-2cac8864]{display:flex;padding:6px 15px}.zjapp .detail-arrow-right[data-v-2cac8864]{width:13px;height:34px;overflow:hidden}.zjapp .detail-arrow-right[data-v-2cac8864]:before{display:block;content:"";width:0;height:0;margin-top:12px;border:5px solid transparent;border-left:5px solid #c8c8c8}.zjapp .detail-arrow-down[data-v-2cac8864]{width:13px;height:34px;overflow:hidden}.zjapp .detail-arrow-down[data-v-2cac8864]:before{display:block;content:"";width:0;height:0;margin-top:15px;border:5px solid transparent;border-top:5px solid #c8c8c8}.zjapp .detail-title[data-v-2cac8864]{flex:1;line-height:34px;color:#111;font-size:16px}.zjapp .detail-bd[data-v-2cac8864]{padding:8px 15px 8px 35px;background-color:#fafafa}.zjapp .text-line[data-v-2cac8864]{font-size:14px;color:#666;line-height:30px;margin-bottom:30px}.zjapp .detail-hd-single[data-v-2cac8864]{padding:6px 0;margin:0 15px}.zjapp .detail-bd-single[data-v-2cac8864]{display:flex;flex-direction:column;flex:1;padding:8px 15px;background-color:#fff}',""])},8661:function(e,t,a){(e.exports=a("690e")(!1)).push([e.i,".zjapp .content[data-v-267c9a33]{position:fixed;width:100%;bottom:0;background-color:rgba(0,0,0,.4);overflow:hidden}.zjapp .box[data-v-267c9a33]{display:flex;flex-direction:column;background-color:#fff}.zjapp .list-wrap[data-v-267c9a33]{flex:1;background-color:#fff;height:465px;overflow:auto}.zjapp .item[data-v-267c9a33]{padding:3px 15px 3px 28px;align-items:center}.zjapp .item-info[data-v-267c9a33]{width:80px;text-align:center;font-size:10px;color:#999}.zjapp .item .item-icon[data-v-267c9a33]{width:44px;height:34px;line-height:34px;text-align:right;font-size:14px}.zjapp .item .icon-arrow-right[data-v-267c9a33]{color:#c8c8c8}.zjapp .item .icon-checkbox[data-v-267c9a33],.zjapp .item .icon-checkbox-checked[data-v-267c9a33]{vertical-align:top;margin-top:7.5px}.zjapp .item .icon-qualified[data-v-267c9a33]{color:#4275e8}.zjapp .icon-empty[data-v-267c9a33]{width:44px}.zjapp .item-hd[data-v-267c9a33]{padding:8px 15px 0 15px}.zjapp .item-hd .item-info[data-v-267c9a33]{width:48px;margin:0 16px;height:16px;line-height:16px;color:#999;border-radius:8px;background-image:#f4f4f4}.zjapp .name-parent[data-v-267c9a33]{font-size:16px;font-weight:700;color:#111}.zjapp .name-child[data-v-267c9a33]{font-size:14px;color:#333}.zjapp .item-triangle[data-v-267c9a33]{position:absolute;width:0;height:0;border:5px solid #c8c8c8}.zjapp .triangle-right[data-v-267c9a33]{border-color:transparent transparent transparent #c8c8c8;left:10px;top:12px}.zjapp .triangle-down[data-v-267c9a33]{border-color:#c8c8c8 transparent transparent transparent;left:10px;top:14.5px}.zjapp .btn-confirm[data-v-267c9a33]{background-color:#ebf1ff;background-image:none;color:#4275e8;border-radius:0}.zjapp .btn-confirm.btn-disabled[data-v-267c9a33]{background-color:#f4f4f4;color:#b2b2b2}",""])},"87d1":function(e,t,a){"use strict";a("163d");var i=a("329b"),n=a("a21b").a,s=(a("5537"),a("17cc")),r=Object(s.a)(n,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.show?a("div",{staticClass:"content",style:{top:e.contentTop+"px","z-index":e.zIndex},on:{click:function(t){return t.target!==t.currentTarget?null:e.closePopup(t)}}},[a("transition",{attrs:{name:"slide-down"},on:{afterLeave:e.onClose}},[e.showList?a("div",{staticClass:"box",style:{height:e.listHeight+"px"}},[a("item",{staticClass:"item-hd"},[a("div",{staticClass:"item-text name-parent"}),a("div",{staticClass:"item-info"},[e._v("合格率")]),a("i",{staticClass:"icon-empty"})]),e.options.length?a("div",{ref:"list-warp",staticClass:"list-wrap"},[e._l(e.options,(function(t,i){return[a("item",{key:i,attrs:{border:"bottom"},on:{click:function(a){e.toggleItem(t)}}},[a("i",{staticClass:"item-triangle",class:{"triangle-right":!e.openSet[t.id],"triangle-down":e.openSet[t.id]}}),a("div",{staticClass:"item-text name-parent"},[e._v(e._s(t.name))]),a("div",{staticClass:"item-info"},[e._v("\n              "+e._s(e.checkItemRate(t))+"\n            ")]),a("i",{staticClass:"icon-empty"})]),e.openSet[t.id]?e._l(t.subitems,(function(t,n){return a("item",{key:"sub -"+i+"-"+n,attrs:{border:"bottom"},on:{click:function(a){e.select(t)}}},[a("div",{staticClass:"item-text name-child"},[e._v(e._s(t.name))]),a("div",{staticClass:"item-info",class:{"color-orange":"检查中"===t.status}},[e._v("\n                "+e._s("未设置"===t.status?"":"检查中"===t.status?"暂存":e.percent((t.measurement_points-t.problem_points)/t.measurement_points))+"\n              ")]),a("div",{staticClass:"item-icon"},["blank"===e.getItemType(t)?a("icon",{attrs:{name:""}}):e._e(),"arrow"===e.getItemType(t)?a("icon",{attrs:{name:"arrow-right"}}):e._e(),"current"===e.getItemType(t)?a("icon",{attrs:{name:"qualified"}}):e._e(),"checkbox"===e.getItemType(t)?a("icon",{attrs:{name:"checkbox"}}):e._e(),"selected"===e.getItemType(t)?a("icon",{attrs:{name:"checkbox-checked"}}):e._e()],1)])})):e._e()]}))],2):e._e(),a("app-button",{staticClass:"btn-confirm",class:{"btn-disabled":!e.allowConfirm},attrs:{name:"确定"},on:{click:function(t){e.confirm()}}}),e.options.length?e._e():a("loading-status",{attrs:{"is-empty":!0,type:"search","empty-text":"未搜索到相关内容"}})],1):e._e()])],1):e._e()}),[],!1,null,"267c9a33",null).exports,o=!1;o||(o=new(i.default.extend(r))({el:document.createElement("div")}),document.body.appendChild(o.$el));var l=o,c={name:"DropDownSelect",props:{current:{type:Array,default:function(){return[]}},selected:{type:Array,default:function(){return[]}},options:{type:Array,default:function(){return[]}},isLoading:{type:Boolean,default:!1},title:{type:String,default:""},editabled:{type:Boolean,default:!0},passRateMode:{type:[Number,String],default:""},mode:{type:String,default:"edit"},multi:{type:Boolean,default:!1},allowEdit:{type:Boolean,default:!0},openStatus:{type:Array,default:function(){return[]}}},data:function(){return{isOpen:!1}},created:function(){var e=this;l.$on("afterClosePopup",(function(){e.isOpen=!1}))},methods:{openDialog:function(e){var t=this;if(this.editabled&&!this.isLoading){var a,i=!0,n=e?e.target:this.$refs["select-con"];l.show&&l.componentUid===this._uid?(i=!1,a=l.closePopup()):l.show&&l.componentUid!==this._uid?(i=!0,a=l.closePopup()):(i=!0,a=Promise.resolve()),a.then((function(){i&&(l.openPopup({options:t.options,selected:t.selected,allowEdit:t.allowEdit,current:t.current,mode:t.mode,multi:t.multi,openStatus:t.openStatus,passRateMode:t.passRateMode,el:n,componentUid:t._uid,callback:function(e){t.$emit("input",e),t.$emit("onSelect",e)}}),t.isOpen=!0)}))}}}},d=(a("5d4c"),Object(s.a)(c,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{ref:"select-con",staticClass:"select-con",class:{"select-disabled":!e.editabled||e.isLoading},on:{click:e.openDialog}},[a("div",{staticClass:"select-text"},[e._v(e._s(e.isLoading?"...":e.title))]),e.editabled?a("icon",{staticClass:"select-arrow",attrs:{name:e.isOpen?"arrow-up":"arrow-down"}}):e._e()],1)}),[],!1,null,"9ed5b06e",null));t.a=d.exports},"8c3d":function(e,t,a){"use strict";(function(e){a("ed63"),a("163d"),a("2b45"),a("e204"),a("cc57");var i,n,s=a("07d2"),r=a("cf09"),o=a("6f9e"),l=a("4360"),c=[],d=[0,1,2,3,4,5,6,7,8,9,".","-"];function p(e){return null!=e&&""!==e}t.a={name:"NumberKeyboard",components:{Item:s.default},data:function(){return{show:!1,isClosing:!1,zIndex:0,willOpenParams:null,inputComponent:"",type:"",hasPrev:!1,hasNext:!1,isDisabledMinus:!1,isDisabledPoint:!1}},computed:{isIOSBezelLess:function(){return l.a.state.app.isIOSBezelLess}},watch:{isClosing:function(e){var t=this;this.$nextTick((function(){!e&&t.willOpenParams&&t.openKeyboard(t.willOpenParams)}))}},created:function(){o.a.$on("routerBeforeEach",this.closeKeyboard),o.a.$on("pageContentClick",this.closeKeyboard)},destroyed:function(){o.a.$off("routerBeforeEach",this.closeKeyboard),o.a.$off("pageContentClick",this.closeKeyboard)},methods:{openKeyboard:function(e){this.isClosing?this.willOpenParams=e:(this.willOpenParams=null,this.show=!0,this.inputComponent=e.inputComponent,this.zIndex=r.a?++r.a.zIndex:1,l.a.commit("global/SET_IS_NUMBER_INPUT_OPEN",!0),l.a.commit("global/SET_NUMBER_KEYBOARD_HEIGHT",l.a.state.app.isIOSBezelLess?266:"true-or-false"===this.inputComponent.type?176:232),this.calcTab(),this.type=this.inputComponent.type,this.setKeysStatus(this.inputComponent.value,this.inputComponent.type),o.a.$emit("numberKeyboardOpen",this.inputComponent))},closeKeyboard:function(){this.show=!1,o.a.$emit("numberKeyboardClose")},startClose:function(){this.isClosing=!0},onClose:function(){this.isClosing=!1,l.a.commit("global/SET_IS_NUMBER_INPUT_OPEN",!1),o.a.$emit("afterNumberKeyboardClose")},input:function(e){"-"===e&&this.isDisabledMinus||"."===e&&this.isDisabledPoint||this.$emit("keyboardInput",e)},delete:function(e){var t=this;this.$emit("keyboardDelete"),i=setTimeout((function(){t.$emit("keyboardClear")}),500)},calcTab:function(){var t=function e(t){return t&&t.$parent?"Scroller"===t.$parent.$options.name?t.$parent:e(t.$parent):null}(this.inputComponent),a=t&&t.$el.querySelectorAll(".component-number-input");if(c=[],a&&e.each(a,(function(e){c.push(e.__vue__)})),e.isEmpty(c))this.hasPrev=!1,this.hasNext=!1;else{var i=e.findIndex(c,this.inputComponent);this.hasPrev=i>0,this.hasNext=i<c.length-1}this.inputComponent&&this.inputComponent.nextEvent&&(this.hasNext=!0)},prev:function(){var t=e.findIndex(c,this.inputComponent),a=c[t-1];a&&(o.a.$emit("numberInputBlur"),a.setFocus(),this.openKeyboard({inputComponent:a}))},next:function(){var t=e.findIndex(c,this.inputComponent),a=c[t+1];a?(o.a.$emit("numberInputBlur"),a.setFocus(),this.openKeyboard({inputComponent:a})):this.inputComponent&&this.inputComponent.nextEvent&&this.inputComponent.nextEvent()},setTure:function(){this.$emit("keyboardAssign",1)},setFalse:function(){this.$emit("keyboardAssign",0)},setKeysStatus:function(e,t){e=p(e)?e.toString():"",p(e)||t.indexOf("positive")>=0?this.isDisabledMinus=!0:this.isDisabledMinus=!1,!/\d/.test(e)||e.indexOf(".")>=0||t.indexOf("int")>=0?this.isDisabledPoint=!0:this.isDisabledPoint=!1},setKeyActiving:function(e,t){e&&e.classList.contains("keys")&&!e.classList.contains("disabled")&&(t?e.classList.add("activing"):e.classList.remove("activing"))},keyTouchstart:function(e){var t=e&&e.target;if(t){+new Date,n=t,this.setKeyActiving(t,!0);var a=t.getAttribute("direct");"closeKeyboard"!==a&&this.clickHandler(a)}},keyTouchend:function(e){var t=e&&e.target;if(t){this.setKeyActiving(t,!1),this.setKeyActiving(n,!1);var a=t.getAttribute("direct");"delete"===a?clearTimeout(i):"closeKeyboard"===a&&this.clickHandler(a)}},clickHandler:function(e){e&&(isNaN(e)||(e=Number(e)),"function"==typeof this[e]?this[e]():d.includes(e)&&this.input(e))}}}}).call(this,a("391c"))},"8d2b":function(e,t,a){(e.exports=a("690e")(!1)).push([e.i,".zjapp .value-input[data-v-15cd7b49]{font-size:0;line-height:0;white-space:nowrap}.zjapp .value-input-label[data-v-15cd7b49],[data-v-15cd7b49] .value-input-label{line-height:30px;font-size:14px;color:#999;margin-right:8px}.zjapp .area-name-text[data-v-15cd7b49]{display:inline-block;padding:4px 0;line-height:22px;font-size:16px;color:#4275e8;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.zjapp .area-name-input[data-v-15cd7b49]{position:relative;display:inline-block;vertical-align:top;width:61px;height:34px;border:1px solid #4275e8;border-radius:3px;text-align:center;font-size:14px;color:#333;box-shadow:0 0 8px 0 rgba(66,117,232,.37)}.zjapp .area-name-input input[data-v-15cd7b49]{border:none;width:100%;height:100%;padding:5px;text-align:center;background-color:transparent}.zjapp .area-info[data-v-15cd7b49]{display:flex;font-size:14px}.zjapp .checkitem-info[data-v-15cd7b49]{flex:1;padding-top:7px;min-height:34px}.zjapp .checkitem-name[data-v-15cd7b49]{color:#333}.zjapp .checkitem-standard[data-v-15cd7b49]{color:#999}.zjapp .item-input-group[data-v-15cd7b49]{display:flex}.zjapp .label-input-group[data-v-15cd7b49]{height:30px;line-height:30px;padding-right:8px;color:#999;text-align:right;font-size:14px}.zjapp .label-input-group-flex[data-v-15cd7b49]{flex:1}.zjapp .item-input-group-new[data-v-15cd7b49]{display:flex;padding:5px 0}.zjapp .label-input-group-new[data-v-15cd7b49]{width:61px;height:30px;line-height:30px;color:#666;font-size:14px}.zjapp .view-points-line[data-v-15cd7b49]{display:flex}.zjapp .view-points-left[data-v-15cd7b49]{min-width:140px;padding-left:2.6em;text-indent:-2.6em}.zjapp .view-points-right[data-v-15cd7b49]{flex:1;padding-left:10px;color:#b3b3b3;white-space:nowrap}.zjapp .number-input-group[data-v-15cd7b49]{padding-top:15px;margin-left:-10px}.zjapp .number-input-group .number-input[data-v-15cd7b49]{margin:0 0 10px 10px}.zjapp .number-input-group-new[data-v-15cd7b49]{padding:10px 0;margin:0 -5px}.zjapp .number-input-group-new .number-input[data-v-15cd7b49]{margin:5px}.zjapp .input-even[data-v-15cd7b49]{background-color:#f7faff}.zjapp .split-line-col[data-v-15cd7b49]{display:inline-block;width:0;height:30px;margin:5px -.5px 0;border-left:1px dashed #d5d5d5}.zjapp .split-line-row[data-v-15cd7b49]{height:0;margin:-.5px 5px;border-top:1px dashed #d5d5d5}.zjapp .split-line-row-short[data-v-15cd7b49]{width:203px;height:0;margin:-.5px 0 -.5px 71px;border-top:1px dashed #d5d5d5}.zjapp .btn-reedit[data-v-15cd7b49]{width:80px;padding:12px 0;line-height:22px;font-size:14px;text-align:center;color:#4275e8}.zjapp .btn-reedit .icon[data-v-15cd7b49]{margin-top:5px;font-size:12px;vertical-align:top}.zjapp .detail-list-hd[data-v-15cd7b49]{display:flex;height:30px;background-color:#fafafa}.zjapp .detail-list-hd .list-hd-toggle[data-v-15cd7b49]{flex:1;padding-left:15px;line-height:30px;color:#4275e8}.zjapp .detail-list-hd .list-hd-title[data-v-15cd7b49]{flex:1;padding-left:15px;line-height:30px;font-size:14px;color:#888}.zjapp .detail-list-hd .list-hd-num[data-v-15cd7b49]{width:80px;line-height:30px;font-size:14px;text-align:center;color:#888}.zjapp .detail-list-hd .list-hd-passrate[data-v-15cd7b49]{width:100px;padding:0 15px;line-height:30px;font-size:14px;text-align:right;color:#888}.zjapp .detail-list[data-v-15cd7b49]{background-color:#fff}.zjapp .detail-item-hd[data-v-15cd7b49]{display:flex;align-items:flex-start;min-height:46px}.zjapp .detail-item-arrow[data-v-15cd7b49]{border:5px solid #c8c8c8;width:0;height:0}.zjapp .detail-item-arrow.item-arrow-right[data-v-15cd7b49]{margin:18px 13px 0 17px;border-top-color:transparent;border-right-width:0;border-bottom-color:transparent}.zjapp .detail-item-arrow.item-arrow-down[data-v-15cd7b49]{margin:20px 10px 0 15px;border-left-color:transparent;border-right-color:transparent;border-bottom-width:0}.zjapp .detail-item-name[data-v-15cd7b49]{flex:1;padding:13px 0;line-height:20px;font-size:14px;color:#111}.zjapp .detail-item-num[data-v-15cd7b49]{width:80px;padding:13px 0;line-height:20px;font-size:14px;text-align:center;color:#888}.zjapp .detail-item-passrate[data-v-15cd7b49]{width:100px;padding:13px 15px;line-height:20px;font-size:14px;text-align:right;color:#888}.zjapp .detail-line[data-v-15cd7b49]{display:flex}.zjapp .detail-line-label[data-v-15cd7b49]{padding:8px 0 8px 35px;width:105px;line-height:20px;font-size:14px;color:#666}.zjapp .detail-line-label-single[data-v-15cd7b49]{padding:8px 0 8px 15px;width:85px;line-height:20px;font-size:14px;color:#666}.zjapp .detail-line-con[data-v-15cd7b49]{flex:1;padding:8px 15px 8px 0;line-height:20px;font-size:14px;color:#333}.zjapp .detail-line-area[data-v-15cd7b49]{background-color:#f0f0f0;color:#8c8c8c;padding:2px}.zjapp .detail-line-setval[data-v-15cd7b49]{margin-left:8px;color:#999}.zjapp .detail-line-con-new[data-v-15cd7b49]{flex:1;padding:3px 15px 3px 0;line-height:20px;font-size:14px;color:#333}.zjapp .detail-line-item[data-v-15cd7b49]{padding:5px 0}.zjapp .icon-set-val[data-v-15cd7b49]{position:absolute;left:-1px;top:-1px;width:12px;height:12px;line-height:12px;background-color:#6b7ba9;font-size:8px;text-align:center;color:#fff;border-radius:3px 0}.zjapp .checkitem-standard_special[data-v-15cd7b49]{line-height:22px;display:block;margin-top:1px}",""])},"91c1":function(e,t,a){"use strict";(function(e){a("5ab2"),a("6d57"),a("e10e"),a("9a33");var i=a("28f8"),n=a("e68e"),s=a("6f9e"),r=a("bcc7"),o=a("e89f");function l(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,i)}return a}function c(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?l(Object(a),!0).forEach((function(t){Object(i.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):l(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}t.a={name:"CheckGuideDetailDrop",components:{ItemImgList:n.a},mixins:[o.a],data:function(){return{show:!1,showList:!1,isLoading:!1,isOpening:!1,isClosing:!1,contentTop:64,listHeight:510,module:"",itemIds:[],data:[],target:""}},watch:{show:function(e){var t=this;e&&this.$nextTick((function(){t.showList=!0}))}},created:function(){s.a.$on("routerBeforeEach",this.closePopup),s.a.$on("pageContentClick",this.onClickOther)},destroyed:function(){s.a.$off("routerBeforeEach",this.closePopup),s.a.$off("pageContentClick",this.onClickOther)},methods:{openPopup:function(t){this.show=!0,this.$emit("open"),this.module=t.module,this.itemIds=t.itemIds,this.options=t.options;var a=document.querySelector(".layout-main .layout-header");if(this.contentTop=a.offsetHeight,t.el){var i=t.el.getBoundingClientRect();this.contentTop=i.bottom}this.target=t.el,this.listHeight=e.minBy([window.innerHeight-this.contentTop-50,510]),this.getData()},closePopup:function(){var e=this;if(!this.isOpening)return this.showList=!1,this.$emit("close"),new Promise((function(t){e.$on("afterClosePopup",t)}))},afterClose:function(){this.show=!1,this.isClosing=!1,this.$emit("afterClosePopup")},onClickOther:function(e){e&&e.target&&e.target!==this.target&&this.show&&this.closePopup()},getData:function(){var t=this;return this.options&&this.options.length?(this.data=e.map(this.options,(function(e){return c(c({},e),{},{isOpen:!1})})),Promise.resolve()):r.a.getMeasureCheckItem(this.itemIds).then((function(a){t.data=e.map(a,(function(t){var a=t.content?t.content.trim():"",i=a?a.split("\n"):[],n=t.content_image?JSON.parse(t.content_image):[],s=e.filter(i,(function(e){return!/<img([\s\S]*)>/gm.test(e)}));return e.each(n,(function(e){e.url=e.url.split("@")[0]})),{id:t.id,name:t.full_name,textArr:s,contentImage:n,isOpen:!1}}))})).catch((function(e){console.error(e)}))},toggleItem:function(e){this.data.length>1&&this.$set(e,"isOpen",!e.isOpen)}}}}).call(this,a("391c"))},"91cb":function(e,t,a){"use strict";a("c82d")},"9a3b":function(e,t,a){var i=a("e5cd");"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);(0,a("85cb").default)("67df8554",i,!0,{sourceMap:!1,shadowMode:!1})},"9b25":function(e,t,a){"use strict";a("b09a")},a21b:function(e,t,a){"use strict";(function(e){a("6d57"),a("e204"),a("9dd9"),a("f548");var i=a("07d2"),n=a("269c"),s=a("cf09"),r=a("04f3"),o=a("6f9e"),l=a("6144"),c=a("e2a7"),d=a("966e");t.a={name:"DropSelectCheckitemDialog",components:{Item:i.default,AppButton:n.a},data:function(){return{show:!1,showList:!1,contentTop:64,listHeight:510,zIndex:0,options:[],selectedSet:[],currentSet:[],openSet:{},allowEdit:!0,componentUid:"",backButtonEvent:null,afterCloseResolve:null}},computed:{allowConfirm:function(){return!e.isEmpty(this.selectedSet)}},watch:{show:function(e){var t=this;e&&this.$nextTick((function(){t.showList=!0}))},showList:function(t){var a=this;t&&this.$nextTick((function(){a.$refs["list-warp"]&&e.each(a.$refs["list-warp"].querySelectorAll(".selected")||[],(function(e){setTimeout((function(){e.scrollIntoViewIfNeeded(!0)}),400)}))}))}},created:function(){o.a.$on("routerBeforeEach",this.closePopup)},destroyed:function(){o.a.$off("routerBeforeEach",this.closePopup)},methods:{percent:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return Object(d.a)(e,t)},openPopup:function(t){this.componentUid=t.componentUid||"";var a=document.querySelector(".layout-main .layout-header");if(this.contentTop=a.offsetHeight,t.el){var i=t.el.getBoundingClientRect();this.contentTop=i.bottom}if(this.listHeight=e.minBy([window.innerHeight-this.contentTop-50,510]),this.zIndex=s.a?s.a.zIndex++:1,this.options=t.options,this.passRateMode=t.passRateMode,this.mode=t.mode,this.allowEdit=t.allowEdit,this._callback=t.callback,e.isEmpty(t.openStatus)){var n=l.a.getObject("measureReportRoomMemory")||{};this.openSet=n}else this.openSet=t.openStatus;this.initSelectedSet(t.options,t.selected),this.backButtonEvent||(this.backButtonEvent=Object(r.a)(this.closePopup)),this.show=!0},closePopup:function(){var e=this;return this.showList=!1,this.backButtonEvent&&(Object(r.c)(this.backButtonEvent),this.backButtonEvent=null),new Promise((function(t){e.afterCloseResolve=t}))},onClose:function(){this.show=!1,this.afterCloseResolve&&this.afterCloseResolve(),this.$emit("afterClosePopup")},getItemType:function(t){var a=e.some(this.currentSet,{id:t.id}),i=e.some(this.selectedSet,{id:t.id}),n="edit"===this.mode,s="未设置"!==t.status;return!n&&a?"current":i?"selected":(!s||s&&a)&&this.allowEdit?"checkbox":!s||a||i?"blank":"arrow"},initSelectedSet:function(){var t=this,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];this.selectedSet=[],this.currentSet=[],e.each(i,(function(i){e.some(a,(function(t){return e.some(t.subitems||[],{id:i.id})}))&&(t.currentSet.push(e.clone(i)),"edit"===t.mode&&t.selectedSet.push(e.clone(i)))}))},showName:function(e){var t=e;return t=(t=t.replace(new RegExp("<","gm"),"&lt;")).replace(new RegExp(">","gm"),"&gt;")},toggleItem:function(e){var t=this.openSet[e.id];this.$set(this.openSet,e.id,!t),l.a.saveObject("measureReportRoomMemory",this.openSet)},select:function(t){var a=this,i=this.getItemType(t);if(8!==t.passrate_mode)if(1===t.entry_requirements||8===t.passrate_mode||null!==t.standard_max&&""!==t.standard_max){if("current"!==i&&"blank"!==i){if("arrow"===i)return this._callback&&this._callback(t),void this.closePopup();var n=e.findIndex(this.selectedSet,{id:t.id});if(n>=0)this.selectedSet.splice(n,1);else{if(!(!this.selectedSet.length||e.some(this.options,(function(i){var n=e.some(i.subitems,(function(e){return e.id===a.selectedSet[0].id})),s=e.some(i.subitems,(function(e){return e.id===t.id}));return n&&s}))))return void c.a.alert("只能在相同的一级检查项下多选");this.selectedSet.push(t)}}}else c.a.alert("请先在PC端设置此检查项的合格标准值。");else c.a.alert("先录值模式暂不支持“观感”类算法")},confirm:function(e){this.allowConfirm&&(e=e||this.selectedSet,this._callback&&this._callback(e),this.closePopup())},checkItemRate:function(e){if(3===this.passRateMode){var t=0,a=0;if(!e.subitems||!e.subitems.length)return;return e.subitems.forEach((function(e){"检查完毕"===e.status&&e.measurement_points&&(t+=(e.measurement_points-e.problem_points)/e.measurement_points*e.weight,a+=e.weight)})),this.percent(t/a)}return e.measurement_points?this.percent((e.measurement_points-e.problem_points)/e.measurement_points):""}}}}).call(this,a("391c"))},b09a:function(e,t,a){var i=a("2939");"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);(0,a("85cb").default)("65170d73",i,!0,{sourceMap:!1,shadowMode:!1})},b385:function(e,t,a){"use strict";(function(e){a.d(t,"k",(function(){return u})),a.d(t,"i",(function(){return m})),a.d(t,"h",(function(){return h})),a.d(t,"c",(function(){return f})),a.d(t,"b",(function(){return v})),a.d(t,"g",(function(){return g})),a.d(t,"f",(function(){return x})),a.d(t,"a",(function(){return _})),a.d(t,"j",(function(){return y})),a.d(t,"d",(function(){return k})),a.d(t,"e",(function(){return w}));a("6a61"),a("9e76"),a("9a33"),a("6d57"),a("e10e");var i=a("2e91"),n=(a("e697"),a("ed63"),a("8cf2"),a("cc57"),a("4360")),s=a("6bf2"),r=a.n(s),o=a("3bd5"),l=a("7cb8"),c=a("a078"),d=a("4947");function p(e){return isNaN(e)?e:Math.round(1e5*e)/1e5}function u(t){if(5===t.passrate_mode||6===t.passrate_mode||14===t.passrate_mode||15===t.passrate_mode){var a=e.groupBy(t.realityVal||[],(function(e){return e.area+"-"+e.label}));e.each(a,(function(t){e.each(t,(function(e,a){a&&(e.setVal=t[0].setVal)}))}))}else e.each(t.areaData,(function(a){var i=e.filter(t.realityVal,{area:a.name});Object(l.i)(a.setVal)?e.each(i,(function(e){e.setVal=a.setVal})):e.each(i,(function(e){e.setVal=""}))}));return t}function m(t){var a=t.areaNum-t.areaData.length,i=e.map(t.areaData,(function(e){return/^测区\d+$/.test(e.name)?parseInt(e.name.substr(2)):0})),n=e.maxBy(i);if(n=n===-1/0?0:n,a>0)for(var s=0;s<a;s++)t.areaData.push({name:"测区".concat(n+s+1)});else t.areaData.splice(a,-a);return t}function h(t){var a=t.areaNum-t.areaData.length;t.areaObj={};var i=(t.checkItem&&t.checkItem.extension||{}).setVal,n=d.a.defaultSetValMode.includes(t.passrate_mode)?i:"",s=e.map(t.areaData,(function(e){return/^测区\d+$/.test(e.name)?parseInt(e.name.substr(2)):0})),r=e.maxBy(s);r=r===-1/0?0:r;var o=e.map(t.areaData,(function(a){return e.find(t.areaData,{name:a.name})||{}}));if(a>0)for(var l=0;l<a;l++)t.areaData.push({name:"测区"+(r+l+1),setVal:n,pointNum:o[0]?o[0].pointNum:7===t.passrate_mode?3:t.checkItem.area_point_num||5});else a<0&&t.areaData.splice(a,-a);var c,p=t.areaData.length-t.areaData.length;return c=7===t.passrate_mode?3:t.checkItem.area_point_num||5,p<0&&t.areaData.splice(p,-p),e.each(t.areaData,(function(e,a){t.areaData[a]?(t.areaData[a].name!==e.name&&(t.areaData[a].name=e.name),t.areaObj[e.name]=a+1):t.areaData.push({name:e.name,setVal:"",pointNum:c})})),t}function f(e){return b.apply(this,arguments)}function b(){return(b=Object(i.a)(regeneratorRuntime.mark((function t(a){var i,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.resolve();case 2:if(!(i=e.find(a,(function(t){if(5===t.passrate_mode){var a=t.checkItem.extension||{};if(!Object(l.i)(a.max_w))return n=t.checkItem.name+"的【宽】合格标准最大值未设置",!0;if(!Object(l.i)(a.max_h))return n=t.checkItem.name+"的【高】合格标准最大值未设置",!0}else if(14===t.passrate_mode){var i=t.checkItem.extension||{},s=Object(l.i)(i.max_h)?Object(l.i)(i.max_w)?Object(l.i)(i.max_t)?null:"厚":"宽":"高";if(s)return n="".concat(t.checkItem.name,"的【").concat(s,"】合格标准最大值未设置"),!0}else if(15===t.passrate_mode){var r=t.checkItem.extension||{},o=Object(l.i)(r.max_room_deviation)?Object(l.i)(r.max_room_poor)?Object(l.i)(r.max_depth_deviation)?Object(l.i)(r.max_depth_poor)?null:"进深极差":"进深偏差":"开间极差":"开间偏差";if(o)return n="".concat(t.checkItem.name,"的【").concat(o,"】合格标准最大值未设置"),!0}else{if(16!==t.passrate_mode)return e.includes([1,2,3,4,6,7,12,13],t.passrate_mode)&&!Object(l.i)(t.standard_max);var c=t.checkItem.extension||{};if(!Object(l.i)(c.max_z))return n=t.checkItem.name+"的【最大偏差】合格标准最大值未设置",!0;if(!Object(l.i)(c.max_j))return n=t.checkItem.name+"的【极差】合格标准最大值未设置",!0}})))||5!==i.passrate_mode&&14!==i.passrate_mode&&15!==i.passrate_mode&&16!==i.passrate_mode){t.next=7;break}return t.abrupt("return",Promise.reject(n));case 7:if(!i){t.next=9;break}return t.abrupt("return",Promise.reject(i.checkItem.name+"的合格标准最大值未设置"));case 9:if(!e.some(a,(function(e){return 9===e.passrate_mode}))){t.next=12;break}return t.abrupt("return",Promise.reject("暂不支持“混凝土强度”算法"));case 12:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function v(t,a){return t.inputComplete=!e.some(a,(function(e){return!e.inputComplete})),t.isAllPass=!e.some(a,(function(e){return!e.isAllPass})),t.hasExceed=e.some(a,(function(e){return e.hasExceed})),t}function g(t){var a,i,n,s=1,r=t.checkItem.extension||{};if(5===t.passrate_mode||6===t.passrate_mode?s=2:7===t.passrate_mode&&(s=3),t.pointNum=t.realityVal.length/s,a=e.filter(t.realityVal,(function(e){return!0!==e.isQualified})),t.exceedNum=a.length/s,12===t.passrate_mode||13===t.passrate_mode)t.pointNum=t.areaNum,i=0,n=e.groupBy(t.realityVal||[],"area"),e.each(n,(function(t){e.find(t,(function(e){return!0!==e.isQualified}))&&i++})),t.exceedNum=i;else if(5===t.passrate_mode||15===t.passrate_mode){n=e.groupBy(t.realityVal||[],(function(e){return e.area+"-"+e.label}));var o=0;i=0,e.each(n,(function(t){e.find(t,(function(e){return!Object(l.i)(e.val)}))||(o++,!0!==t[0].isQualified&&i++)})),t.pointNum=o,t.exceedNum=i}else if(2===t.passrate_mode||10===t.passrate_mode){var c=r.ratings_by||"point";if("point"===c)t.pointNum=t.realityVal.length,t.exceedNum=e.filter(t.realityVal,(function(e){return e.isExceed})).length;else if("area"===c){var d=e.groupBy(t.realityVal||[],(function(e){return e.area}));t.pointNum=Object.keys(d).length;var u=0;e.each(d,(function(t){e.some(t,(function(e){return e.isExceed}))&&u++})),t.exceedNum=u}}else if(14===t.passrate_mode){n=e.groupBy(t.realityVal||[],(function(e){return e.area+"-"+e.label}));var m=e.groupBy(t.realityVal,"area");for(var h in m){var f=e.some(m[h],(function(e){return e.isExceed}));m[h]=f}var b=0;i=0,e.each(n,(function(t){e.find(t,(function(e){return!Object(l.i)(e.val)}))||b++,m&&t[0]&&m[t[0].area]&&i++})),t.pointNum=b,t.exceedNum=i}else if(16===t.passrate_mode){var v=Object(l.i)(r.min_z)?parseFloat(r.min_z):-1/0,g=Object(l.i)(r.max_z)?parseFloat(r.max_z):1/0,x=Object(l.i)(r.min_j)?parseFloat(r.min_j):-1/0,y=Object(l.i)(r.max_j)?parseFloat(r.max_j):1/0,k=e.groupBy(t.realityVal||[],"area"),w=0,j=0;e.each(k,(function(t){if(!e.some(t,(function(e,t){return!Object(l.i)(e.val)||!Object(l.i)(e.setVal)}))){var a=e.maxBy(t,"val"),i=e.minBy(t,"val"),n=t[0].setVal,s=p(parseFloat(a.val)),r=p(parseFloat(i.val)),o=Math.max(Math.abs(s-n),Math.abs(r-n)),c=t.find((function(e){return Math.abs(e.val-n)===o})).val-n,d=p(s-r);j+=2,!!(c<v||c>g)&&w++,!(d>=x&&d<=y)&&w++}})),t.pointNum=j,t.exceedNum=w}else if(17===t.passrate_mode){var C=e.groupBy(t.realityVal||[],(function(e){return e.area})),D=e.groupBy(t.realityVal,"area");for(var O in D){var I=e.some(D[O],(function(e){return e.isExceed}));D[O]=I}var z=0,V=0;e.each(C,(function(t){e.find(t,(function(e){return!Object(l.i)(e.val)}))||z++,D&&t[0]&&D[t[0].area]&&V++})),t.pointNum=z,t.exceedNum=V}else t.pointNum=t.realityVal.length/s,a=e.filter(t.realityVal,(function(e){return!0!==e.isQualified})),t.exceedNum=a.length/s;return 5===t.passrate_mode?t.inputComplete=!_(t.realityVal).incompleted:t.inputComplete=!e.some(t.realityVal,(function(e){return!Object(l.i)(e.val)})),t.isAllPass=!e.some(t.realityVal,(function(e){return e.isExceed||!Object(l.i)(e.val)})),t.pointNum?t.passrate=(t.pointNum-t.exceedNum)/t.pointNum:t.passrate=0,t.hasExceed=e.some(t.realityVal,(function(e){return e.isExceed})),t}function x(t){var a,i=Object(l.i)(t.standard_min)?parseFloat(t.standard_min):-1/0,n=Object(l.i)(t.standard_max)?parseFloat(t.standard_max):1/0,s=t.checkItem.extension||{},r=Object(l.i)(s.min_w)?parseFloat(s.min_w):-1/0,o=Object(l.i)(s.max_w)?parseFloat(s.max_w):1/0,c=Object(l.i)(s.min_h)?parseFloat(s.min_h):-1/0,d=Object(l.i)(s.max_h)?parseFloat(s.max_h):1/0,u=Object(l.i)(s.min_t)?parseFloat(s.min_t):-1/0,m=Object(l.i)(s.max_t)?parseFloat(s.max_t):1/0,h=Object(l.i)(s.min_z)?parseFloat(s.min_z):-1/0,f=Object(l.i)(s.max_z)?parseFloat(s.max_z):1/0,b=Object(l.i)(s.min_j)?parseFloat(s.min_j):-1/0,v=Object(l.i)(s.max_j)?parseFloat(s.max_j):1/0;if(e.each(t.realityVal,(function(e){Object(l.i)(e.val)&&(e.val=parseFloat(e.val))})),11===t.passrate_mode)(i<1||i>99)&&(i=90),e.each(t.realityVal,(function(e){var t,a=p(parseFloat(e.val)-parseFloat(e.setVal||0)*i*.01),n=!(t=Object(l.i)(e.val)&&a>0);e.isExceed=n,e.isQualified=t}));else if(1===t.passrate_mode||3===t.passrate_mode)e.each(t.realityVal,(function(e){var t=p(parseFloat(e.val)-parseFloat(e.setVal||0)),a=Object(l.i)(e.val)&&(t<i||t>n),s=Object(l.i)(e.val)&&t>=i&&t<=n;e.isExceed=a,e.isQualified=s}));else if(2===t.passrate_mode)0===i&&(i=n),a=e.groupBy(t.realityVal||[],"area"),e.each(a,(function(t){if(e.some(t,(function(e){return!Object(l.i)(e.val)})))e.each(t,(function(e){e.isExceed=!1,e.isQualified=!1}));else{var a=e.maxBy(t,"val"),r=e.minBy(t,"val"),o=p(parseFloat(a.val)-parseFloat(a.setVal||0)),c=p(parseFloat(r.val)-parseFloat(r.setVal||0)),d=p(o-c);if(d<=i)e.each(t,(function(e){e.isExceed=!1,e.isQualified=!0}));else if(d>n)e.each(t,(function(e){e.isExceed=!0,e.isQualified=!1}));else{var u=!1;-1,e.each(t,(function(e){var t=p(parseFloat(e.val)-parseFloat(e.setVal||0));p(t-c)>i?(e.isExceed=!0,e.isQualified=!1,u=!0):(e.isExceed=!1,e.isQualified=!0)})),"area"===(s.ratings_by||"point")&&u&&e.each(t,(function(e){e.isExceed=!0,e.isQualified=!1}))}}}));else if(4===t.passrate_mode)a=e.groupBy(t.realityVal||[],"area"),e.each(a,(function(t){e.some(t,(function(e){return!Object(l.i)(e.val)||!Object(l.i)(e.setVal)}))?e.each(t,(function(e){e.isExceed=!1,e.isQualified=!1})):e.some(t,(function(e){return Math.abs(p(e.val-e.setVal))>n}))?e.each(t,(function(e){e.isExceed=!0,e.isQualified=!1})):e.each(t,(function(e){var t=Math.abs(p(e.val-e.setVal));Math.abs(i)<t&&t<=n?(e.isExceed=!0,e.isQualified=!1):(e.isExceed=!1,e.isQualified=!0)}))}));else if(5===t.passrate_mode)a=e.groupBy(t.realityVal||[],(function(e){return e.area+"-"+e.label})),e.each(a,(function(t,a){if(-1!==a.indexOf("高")?(i=c,n=d):-1!==a.indexOf("宽")?(i=r,n=o):console.warn("请注意啦！"),e.each(t,(function(e,a){a&&(e.setVal=t[0].setVal)})),e.some(t,(function(e){return!Object(l.i)(e.val)||!Object(l.i)(e.setVal)})))e.each(t,(function(e){e.isExceed=!1,e.isQualified=!1}));else{var s=e.maxBy(t,(function(e){return Math.abs(p(e.val-e.setVal))})),u=p(parseFloat(s.val)-parseFloat(s.setVal||0));Object(l.i)(s.val)&&(u<i||u>n)?(e.each(t,(function(e){e.isExceed=!1,e.isQualified=!1})),s.isExceed=!0):e.each(t,(function(e){e.isExceed=!1,e.isQualified=!0}))}}));else if(6===t.passrate_mode)a=e.groupBy(t.realityVal||[],(function(e){return e.area+"-"+e.label})),e.each(a,(function(t){if(e.some(t,(function(e){return!Object(l.i)(e.val)||!Object(l.i)(e.setVal)})))e.each(t,(function(e){e.isExceed=!1,e.isQualified=!1}));else{var a=e.maxBy(t,(function(e){return Math.abs(p(e.val-e.setVal))})),s=p(parseFloat(a.val)-parseFloat(a.setVal||0));Object(l.i)(a.val)&&(s<i||s>n)?(e.each(t,(function(e){e.isExceed=!1,e.isQualified=!1})),a.isExceed=!0):e.each(t,(function(e){e.isExceed=!1,e.isQualified=!0}))}}));else if(7===t.passrate_mode)a=e.groupBy(t.realityVal||[],"area"),e.each(a,(function(t){if(e.some(t,(function(e){return!Object(l.i)(e.val)})))e.each(t,(function(e){e.isExceed=!1,e.isQualified=!1}));else{var a=p(e.maxBy(t,"val").val-e.minBy(t,"val").val);a<i||a>n?e.each(t,(function(e){e.isExceed=!0,e.isQualified=!1})):e.each(t,(function(e){e.isExceed=!1,e.isQualified=!0}))}}));else if(8===t.passrate_mode)e.each(t.realityVal,(function(e){var t=parseFloat(e.val),a=Object(l.i)(e.val)&&!t,i=Object(l.i)(e.val)&&!!t;e.isExceed=a,e.isQualified=i}));else if(10===t.passrate_mode)a=e.groupBy(t.realityVal||[],"area"),e.each(a,(function(t){var a;if(e.some(t,(function(e){return!Object(l.i)(e.val)||!Object(l.i)(e.setVal)})))e.each(t,(function(e){e.isExceed=!1,e.isQualified=!1}));else{var s=0;e.each(t,(function(e){Math.abs(s)<Math.abs(p(e.val-e.setVal))?(s=p(e.val-e.setVal),a=s<i||s>n):Math.abs(s)===Math.abs(p(e.val-e.setVal))&&(s=p(e.val-e.setVal),a=a||s<i||s>n)})),a?e.each(t,(function(e){e.isExceed=!0,e.isQualified=!1})):e.each(t,(function(e){e.isExceed=!1,e.isQualified=!0}))}}));else if(12===t.passrate_mode)a=e.groupBy(t.realityVal||[],"area"),e.each(a,(function(t){var a=null,s=null,r=0,o=!0,c=0;e.each(t,(function(e){Object(l.i)(e.val)&&(null===s&&(s=e.val,a=e.val),r++,a=Math.max(a,e.val),s=Math.min(s,e.val)),e.isExceed=!1,e.isQualified=!1})),r>=2&&((c=p(a-s))<i||c>n)&&(o=!1),e.each(t,(function(e){e.isExceed=!o,e.isQualified=o}))}));else if(13===t.passrate_mode)a=e.groupBy(t.realityVal||[],"area"),e.each(a,(function(t){var a=!0,s=null,r=!1;e.each(t,(function(e){e.isExceed=!1,e.isQualified=!1,Object(l.i)(e.val)&&(null===s&&(s=e.val),r=!0,s=Math.max(e.val,s))})),r&&(s<i||s>n)&&(a=!1),e.each(t,(function(e){e.isExceed=!a,e.isQualified=a}))}));else if(14===t.passrate_mode){a=e.groupBy(t.realityVal||[],(function(e){return e.area+"-"+e.label})),e.each(a,(function(t,a){switch(a.slice(-1)){case"高":i=c,n=d;break;case"宽":i=r,n=o;break;case"厚":i=u,n=m;break;default:console.warn("请注意啦！")}if(e.each(t,(function(e,a){a&&(e.setVal=t[0].setVal)})),e.some(t,(function(e){return!Object(l.i)(e.val)||!Object(l.i)(e.setVal)})))e.each(t,(function(e){e.isExceed=!1,e.isQualified=!1}));else{var s=e.maxBy(t,(function(e){return Math.abs(p(e.val-e.setVal))})),h=p(parseFloat(s.val)-parseFloat(s.setVal||0));Object(l.i)(s.val)&&(h<i||h>n)?(e.each(t,(function(e){e.isExceed=!1,e.isQualified=!1})),s.isExceed=!0):e.each(t,(function(e){e.isExceed=!1,e.isQualified=!0}))}}));var g=e.groupBy(t.realityVal||[],(function(e){return e.area}));e.each(g,(function(t){e.some(t,(function(e){return!e.isQualified}))&&e.each(t,(function(e){e.isQualified=!1}))}))}else if(15===t.passrate_mode){var x,_,y,k;a=e.groupBy(t.realityVal||[],(function(e){return e.area+"-"+e.label})),e.each(a,(function(t,a){switch(a.slice(-2)){case"开间":x=Object(l.i)(s.min_room_deviation)?parseFloat(s.min_room_deviation):-1/0,_=Object(l.i)(s.max_room_deviation)?parseFloat(s.max_room_deviation):1/0,y=Object(l.i)(s.min_room_poor)?parseFloat(s.min_room_poor):-1/0,k=Object(l.i)(s.max_room_poor)?parseFloat(s.max_room_poor):1/0;break;case"进深":x=Object(l.i)(s.min_depth_deviation)?parseFloat(s.min_depth_deviation):-1/0,_=Object(l.i)(s.max_depth_deviation)?parseFloat(s.max_depth_deviation):1/0,y=Object(l.i)(s.min_depth_poor)?parseFloat(s.min_depth_poor):-1/0,k=Object(l.i)(s.max_depth_poor)?parseFloat(s.max_depth_poor):1/0;break;default:console.warn("请注意啦！")}if(e.each(t,(function(e,a){a&&(e.setVal=t[0].setVal)})),e.some(t,(function(e){return!Object(l.i)(e.val)||!Object(l.i)(e.setVal)})))e.each(t,(function(e){e.isExceed=!1,e.isQualified=!1}));else{var i=e.maxBy(t,(function(e){return Math.abs(p(e.val-e.setVal))})),n=p(parseFloat(i.val)-parseFloat(i.setVal||0)),r=e.maxBy(t,(function(e){return p(e.val)})),o=e.minBy(t,(function(e){return p(e.val)})),c=p(parseFloat(r.val)-parseFloat(o.val));Object(l.i)(i.val)&&(n<x||n>_||c<y||c>k)?(e.each(t,(function(e){e.isExceed=c<y||c>k,e.isQualified=!1})),i.isExceed=!0):e.each(t,(function(e){e.isExceed=!1,e.isQualified=!0}))}}))}else 16===t.passrate_mode?(a=e.groupBy(t.realityVal||[],"area"),e.each(a,(function(t){if(e.some(t,(function(e){return!Object(l.i)(e.val)||!Object(l.i)(e.setVal)})))e.each(t,(function(e){e.isExceed=!1,e.isQualified=!1}));else{var a=e.maxBy(t,"val"),i=e.minBy(t,"val"),n=t[0].setVal,s=p(parseFloat(a.val)),r=p(parseFloat(i.val)),o=Math.max(Math.abs(s-n),Math.abs(r-n)),c=t.find((function(e){return Math.abs(e.val-n)===o})),d=c.val-n,u=c.val,m=p(s-r),g=[];d<h||d>f?(!1,g.push(u)):!0,m>=b&&m<=v?!0:(!1,g.push(a.val,i.val)),e.each(t,(function(e){g.includes(e.val)?(e.isExceed=!0,e.isQualified=!1):(e.isExceed=!1,e.isQualified=!0)}))}}))):17===t.passrate_mode?(a=e.groupBy(t.realityVal||[],"area"),e.each(a,(function(t){if(e.some(t,(function(e){return!Object(l.i)(e.val)||!Object(l.i)(e.setVal)})))e.each(t,(function(e){e.isExceed=!1,e.isQualified=!1}));else{var a=Math.abs(t[0].val-t[1].val),i=t[2].val,n=(0!==i?a/i:0)<t[0].setVal;e.each(t,(function(e){n?(e.isExceed=!0,e.isQualified=!1):(e.isExceed=!1,e.isQualified=!0)}))}}))):18===t.passrate_mode&&(a=e.groupBy(t.realityVal||[],"area"),e.each(a,(function(t){if(e.some(t,(function(e){return!Object(l.i)(e.val)||!Object(l.i)(e.setVal)})))e.each(t,(function(e){e.isExceed=!1,e.isQualified=!1}));else{var a=t.map((function(e){return e.val})),n=a.reduce((function(e,t){return e+t}))/a.length,s=t[0].setVal,r=n<s;e.each(t,(function(e){r||e.val<.01*i*s?(e.isExceed=!0,e.isQualified=!1):(e.isExceed=!1,e.isQualified=!0)}))}})));return t}function _(t){var a={incompleted:!1,emptySetVal:!1};if(e.isEmpty(t))return!1;var i=e.groupBy(t,(function(e){return e.area}));return e.each(i,(function(t,i){if(0===(t=e.filter(t,(function(e){return Object(l.i)(e.val)}))).length)a.hasEmptyArea=!0;else if(1===t.length||3===t.length)a.incompleted=!0;else if(2===t.length)t[0].label!==t[1].label?a.incompleted=!0:Object(l.i)(t[0].setVal)&&Object(l.i)(t[1].setVal)||(a.emptySetVal=!0);else{e.some(t,(function(e){return!Object(l.i)(e.setVal)}))&&(a.emptySetVal=!0)}})),a}function y(t){var a,i=0;if(13===t.passrate_mode||12===t.passrate_mode||11===t.passrate_mode||1===t.passrate_mode||3===t.passrate_mode||8===t.passrate_mode||18===t.passrate_mode)e.each(t.realityVal,(function(e){e.area||(e.area="测区1")})),e.each(t.areaData,(function(a){var s=e.filter(t.realityVal,{area:a.name}),r=a.pointNum-s.length,o=e.findLastIndex(t.realityVal,{area:a.name});if(i+=parseInt(a.pointNum),3!==t.passrate_mode||n.a.state.global.isUseSpecialInspectMeasureNewUI||e.each(s,(function(e){e.setVal=a.setVal})),o<0&&(o=t.realityVal.length-1),r>0)for(var l=0;l<r;l++)t.realityVal.splice(o+l+1,0,{val:8===t.passrate_mode?1:"",area:a.name,setVal:a.setVal});else r<0&&t.realityVal.splice(o+r+1,-r)})),(a=t.realityVal.length-i)>0&&t.realityVal.splice(-a,a);else if(2===t.passrate_mode||4===t.passrate_mode||10===t.passrate_mode||16===t.passrate_mode||17===t.passrate_mode)e.each(t.areaData,(function(a){var s=e.filter(t.realityVal,{area:a.name}),r=a.pointNum-s.length,o=e.findLastIndex(t.realityVal,{area:a.name});if(i+=parseInt(a.pointNum),n.a.state.global.isUseSpecialInspectMeasureNewUI||e.each(s,(function(e){e.setVal=4===t.passrate_mode||10===t.passrate_mode||16===t.passrate_mode||17===t.passrate_mode?a.setVal:""})),o<0&&(o=t.realityVal.length-1),r>0)for(var l=0;l<r;l++)t.realityVal.splice(o+l+1,0,{val:"",area:a.name,setVal:4===t.passrate_mode||10===t.passrate_mode||16===t.passrate_mode||17===t.passrate_mode?a.setVal:""});else r<0&&t.realityVal.splice(o+r+1,-r)})),(a=t.realityVal.length-i)>0&&t.realityVal.splice(-a,a);else if(5===t.passrate_mode||6===t.passrate_mode||14===t.passrate_mode||15===t.passrate_mode){t.realityVal&&t.realityVal.length&&(t.realityVal=e.filter(t.realityVal,(function(a){var i=e.find(t.areaData,(function(e){return e.name===a.area})),n=e.find(t.measure_item,(function(e){return e===a.label}));return i&&n}))),t.areaData&&t.areaData.length&&e.each(t.areaData,(function(a){e.each(t.measure_item,(function(i){var n,s=2-e.filter(t.realityVal,{area:a.name,label:i}).length;if(s>0){(n=e.findLastIndex(t.realityVal,(function(e){return e.area===a.name})))<0&&(n=t.realityVal.length-1);for(var r=0;r<s;r++)t.realityVal.splice(n+1,0,{val:"",area:a.name,setVal:a.setVal,label:i})}}))}));var s=e.groupBy(t.realityVal||[],(function(e){return e.area+"-"+e.label}));e.each(s,(function(t){e.each(t,(function(e,a){a&&(e.setVal=t[0].setVal)}))}))}else 7===t.passrate_mode&&(e.each(t.areaData,(function(a){var n=e.filter(t.realityVal,{area:a.name}),s=a.pointNum-n.length,r=e.findLastIndex(t.realityVal,{area:a.name});if(i+=parseInt(a.pointNum),e.each(n,(function(e){e.setVal=4===t.passrate_mode||10===t.passrate_mode||16===t.passrate_mode?a.setVal:""})),r<0&&(r=t.realityVal.length-1),s>0)for(var o=0;o<s;o++)t.realityVal.splice(r+o+1,0,{val:"",area:a.name,setVal:4===t.passrate_mode||10===t.passrate_mode||16===t.passrate_mode?a.setVal:""});else s<0&&t.realityVal.splice(r+s+1,-s)})),(a=t.realityVal.length-i)>0&&t.realityVal.splice(-a,a));return t}function k(t,a){var i,s=e.some(a,(function(t){return!e.isEmpty(t.realityVal)}));t.status=e.some(a,{status:"检查中"})?"检查中":a[0].status,t.mode="未设置"===t.status||"检查中"===t.status?"edit":"view",t.batchId=a[0].batchId,t.checkItems=e.map(a,(function(e){return e.checkItem})),t.checkItemGuideDatas=e.map(a,(function(t){var a=t.checkItem.guide?t.checkItem.guide.split("\n"):[],i=[];return e.each(a,(function(e){return/<img([\s\S]*)>/gm.test(e)||i.push(e),{}})),e.each(t.checkItem.guide_image,(function(e){e.url=e.url.split("@")[0]})),{id:t.special_inspect_id,name:t.checkItem.full_name,textArr:i,contentImage:t.checkItem.guide_image}})),t.image_file=a[0].image_file,t.remark=a[0].remark,t.regist=a[0].regist,t.regist_date=a[0].regist_date,r()(t.regist_date).format("YYYY-MM-DD"),r()().format("YYYY-MM-DD");var l=t.batch.inspector||[],d=e.some(l,(function(e){return e.user_id===o.a.getUser().user_id})),p=e.includes(c.a.superUserIds,o.a.getUser().user_id);return t.allowReedit="检查完毕"!==t.batch.status&&"检查完毕"===t.status&&(d||p),t.allowEdit="检查完毕"!==t.batch.status&&(d||p),n.a.state.global.isUseSpecialInspectMeasureNewUI||(t.areaData=[],t.areaNum=0,s?e.each(a,(function(a){e.isEmpty(a.realityVal)||e.each(a.areaData,(function(a){e.some(t.areaData,{name:a.name})||t.areaData.push({name:a.name})}))})):(i=e.minBy(a,"areaNum"),t.areaData=i.areaData),t.areaData=e.sortBy(t.areaData,(function(t){var a=t.name.match(/\d+/g),i=e.isEmpty(a)?"":a[0];return e.isEmpty(i)?t.name:parseInt(i)})),t.areaNum=t.areaData.length,t.areasName=a[0].areasName,e.each(a,(function(a){for(var i=a.areaData.length-1;i>-1;i--){var n=a.areaData[i];e.find(t.areaData,{name:n.name})||a.areaData.splice(i,1)}e.each(t.areaData,(function(t){e.find(a.areaData,{name:t.name})||a.areaData.push({name:t.name,setVal:"",pointNum:a.checkItem.area_point_num})}));for(var s=a.realityVal.length-1;s>-1;s--){var r=a.realityVal[s];e.find(t.areaData,{name:r.area})||a.realityVal.splice(s,1)}}))),{detailData:t,problemDatas:a}}function w(t){return t=e.sortBy(t,(function(e){return e.checkItem.code})),e.each(t,(function(a){Object(l.i)(a.passrate_mode)||(a.passrate_mode=1),a.passrate_mode_text={2:"极差",4:"极差+设计值",5:"高宽",6:"开间进深",7:"方正性",14:"高宽厚",15:"开间进深（带极差）"}[a.passrate_mode]||"",5===a.passrate_mode?a.measure_item=["高","宽"]:6===a.passrate_mode||15===a.passrate_mode?a.measure_item=["开间","进深"]:14===a.passrate_mode?a.measure_item=["高","宽","厚"]:a.measure_item=[],a.areaData=function(t){var a,i,n=[];if(!t)return n;if(e.isEmpty(t.realityVal)){a=e.includes([1,2,3,4,10,16],t.passrate_mode)?t.checkItem.area_num||3:7===t.passrate_mode?t.checkItem.area_num||10:t.checkItem.area_num||1,i=7===t.passrate_mode||17===t.passrate_mode?3:5===t.passrate_mode||6===t.passrate_mode||14===t.passrate_mode||15===t.passrate_mode?2:t.checkItem.area_point_num||5;for(var s=(t.checkItem&&t.checkItem.extension||{}).setVal,r=d.a.defaultSetValMode.includes(t.passrate_mode)?s:"",o=1;o<=a;o++)n.push({name:"测区"+o,setVal:r,pointNum:i})}else e.each(t.realityVal,(function(a){if(!e.some(n,(function(e){return e.name===a.area}))&&a.area){var i=e.filter(t.realityVal,{area:a.area}).length;n.push({name:a.area,setVal:Object(l.i)(a.setVal)?a.setVal:"",pointNum:i})}}));return n}(a),a.areaNum=a.areaData.length,a.standardRange=function(e){var t=Object(l.i)(e.standard_min)?parseFloat(e.standard_min):"",a=Object(l.i)(e.standard_max)?parseFloat(e.standard_max):"";if(5===e.passrate_mode){var i=e.checkItem.extension||{};return"高[".concat(i.min_h,",").concat(i.max_h,"] 宽[").concat(i.min_w,",").concat(i.max_w,"]")}if(14===e.passrate_mode){var n=e.checkItem.extension||{};return"高[".concat(n.min_h,",").concat(n.max_h,"] 宽[").concat(n.min_w,",").concat(n.max_w,"] 厚[").concat(n.min_t,",").concat(n.max_t,"]")}if(15===e.passrate_mode){var s=e.checkItem.extension||{};return"<p>开间偏差[".concat(s.min_room_deviation,",").concat(s.max_room_deviation,"] 开间极差[").concat(s.min_room_poor,",").concat(s.max_room_poor,"]</p>\n      <p>进深偏差[").concat(s.min_depth_deviation,",").concat(s.max_depth_deviation,"] 进深极差[").concat(s.min_depth_poor,",").concat(s.max_depth_poor,"]</p>")}if(11===e.passrate_mode)return"大于设计值的"+(e.standard_min||90)+"%";if(16===e.passrate_mode){var r=e.checkItem.extension||{};return"最大偏差值["+r.min_z+","+r.max_z+"] <br>极差值["+r.min_j+","+r.max_j+"]"}if(17===e.passrate_mode||18===e.passrate_mode){var o=d.a.standardRange[e.passrate_mode],c={standard_min:t};return"function"==typeof o?o(c):o}if(!Object(l.i)(a))return"检查项的合格标准最大值未设置";if(Object(l.i)(t)&&Object(l.i)(a))return"["+t+", "+a+"]";if(Object(l.i)(a))return"<= "+a;if(Object(l.i)(t))return">= "+t}(a),1===t.length?a.isOpen=!0:a.isOpen=!1})),t}}).call(this,a("391c"))},b55a:function(e,t,a){"use strict";a("c001")},bebe:function(e,t,a){var i=a("6272");"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);(0,a("85cb").default)("53478790",i,!0,{sourceMap:!1,shadowMode:!1})},c001:function(e,t,a){var i=a("f53a");"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);(0,a("85cb").default)("bd5eb062",i,!0,{sourceMap:!1,shadowMode:!1})},c070:function(e,t,a){var i=a("574c");"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);(0,a("85cb").default)("35590dcb",i,!0,{sourceMap:!1,shadowMode:!1})},c82d:function(e,t,a){var i=a("0c52");"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);(0,a("85cb").default)("26e0fa2e",i,!0,{sourceMap:!1,shadowMode:!1})},d0fb:function(e,t,a){"use strict";(function(e){var i=a("fd50"),n=a("bcc7"),s=a("515e"),r=a("e89f"),o=a("07d2"),l=a("7bac"),c=a("a7c3"),d=a("4360");t.a={name:"CheckGuideList",components:{Item:o.default},mixins:[r.a],store:d.a,props:{data:{type:String,default:""}},data:function(){return{show:!1,isLoading:!0,listData:[],module:"",itemId:"",batchId:"",sectionId:"",options:""}},computed:{moduleAttribute:function(){return this.$store.state.global.moduleAttribute}},mounted:function(){this.data=[]},methods:{openPopup:function(t){var a,n=this;for(var s in this.value=!0,this.show=!0,this.module=t.module,this.itemId=t.itemId,this.batchId=t.batchId,this.sectionId=t.sectionId,this.options=t.options,this.$emit("open"),t)this[s]=t[s];this.checkType={check:31,"check-safety":36,"check-quality":37,"measure-v3":41,process:32,"fly-inspect":101}[this.module];var r=!1;e.isEmpty(this.itemId)?!e.isEmpty(this.checkType)&&e.isEmpty(this.sectionId)?a=this.initByType():e.isEmpty(this.batchId)?e.isEmpty(this.options)?e.isEmpty(this.sectionId)?a=i.a.when():(r=!0,a=this.initByBidsection()):a=this.initByOptions():a=this.initByBatch():a=this.initById(),this.isLoading=!0,a.then((function(t){var a=n.moduleAttribute[n.module]||{};!e.isEmpty(a)&&a.setUsualItems&&r?l.a.getUserKey(n.mmkvCode()).then((function(e){e=null===e?t:n.mergeArray(n.deepClone(t),e),n.listData=e||[],n.isLoading=!1})):(n.listData=t||[],n.isLoading=!1)}))},mmkvCode:function(){var e=this.moduleAttribute[this.module]||{};return c.a[e.mmkv_item]+"_"+this.sectionId},mergeArray:function(t,a){var i=this;return e.filter(t,(function(t){var n=a[t.id];return e.isEmpty(t.subitem)||(t.subitem=i.mergeArray(t.subitem,a)),!e.isEmpty(n)||"desc"===t.type}))},closePopup:function(){this.value=!1,this.show=!1,this.$emit("close")},clickItem:function(e){e.subitem&&e.subitem.length?this.$set(e,"isOpen",!e.isOpen):"special-inspect"===this.module?s.a.openPopup({itemId:e.id,module:this.module}):s.a.openPopup({itemId:e.item_id,module:this.module})},initById:function(){var e=this;if("special-inspect"!==this.module)return n.a.getCheckItem(this.itemId,this.checkType).then((function(t){return t?e.sectionId?n.a.getBidSectionCheckItemListByCode(e.sectionId,t.code):n.a.getCheckItemTreeByCode(t.code):i.a.when()}))},initByType:function(){return n.a.getCheckItemGuidelineList(this.checkType)},initByBatch:function(){return i.a.when()},initByBidsection:function(){return n.a.getBidSectionCheckItemTreeByType(this.sectionId,this.checkType)},initByOptions:function(){return i.a.resolve(this.options)},deepClone:function(e){return JSON.parse(JSON.stringify(e))}}}}).call(this,a("391c"))},da1c:function(e,t,a){"use strict";a("163d");var i=a("65a8"),n={name:"ProblemHeader",props:{status:{type:String,default:""},statusText:{type:String,default:""},level:{type:String,default:""},isTimeout:{type:Boolean,default:!1},sentBackTimes:{type:[Number,String],default:0}},data:function(){return{edOptions:{}}},created:function(){var e=this;i.a.getOptions("紧急程度").then((function(t){e.edOptions=t}))}},s=(a("1f63"),a("17cc")),r=Object(s.a)(n,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",e._g({staticClass:"problem-detail-header border-bottom"},e.$listeners),[a("div",{staticClass:"status",class:{"待整改":"status-red","不合格":"status-red","已退回":"status-red","待复验":"status-orange","已放水待验收":"status-orange","检查中":"status-orange","待验收":"status-orange","已通过":"status-green","已整改":"status-green","已提交":"status-green","合格":"status-green","检查完毕":"status-green","已验收":"status-green","已关闭":"status-black","进度正常":"status-green","进度滞后":"status-red","验收中":"status-orange","已抽验":"status-green"}[e.status]},[e._v(e._s(e.statusText||e.status))]),"紧急"===e.level||"特急"===e.level?a("span",{staticClass:"urgent"},[e._v(e._s(e.edOptions[e.level]))]):e._e(),e.isTimeout?a("span",{staticClass:"timeout"},[e._v("超时")]):e._e(),e.sentBackTimes>0?a("span",{staticClass:"return"},[e._v("退回"+e._s(e.sentBackTimes)+"次")]):e._e(),e._t("operat")],2)}),[],!1,null,"0901aadd",null);t.a=r.exports},dc98:function(e,t,a){"use strict";a("0732")},e5cd:function(e,t,a){(e.exports=a("690e")(!1)).push([e.i,".zjapp .select-con[data-v-9ed5b06e]{position:relative;padding:7px 40px 7px 15px;height:50px;overflow:hidden;display:flex;align-items:center;background-color:#ebf1ff}.zjapp .select-con[data-v-9ed5b06e]:not(:first-child){border:none;background-image:linear-gradient(90deg,#d7e0f7,#d7e0f7 50%,transparent 0);background-size:1px 100%;background-repeat:no-repeat;background-position:0 0}.zjapp .select-con>*[data-v-9ed5b06e]{pointer-events:none}.zjapp .select-hd[data-v-9ed5b06e]{line-height:14px;font-size:10px;color:#333;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.zjapp .select-bd[data-v-9ed5b06e]{margin-top:2px;font-size:14px}.zjapp .select-bd[data-v-9ed5b06e],.zjapp .select-text[data-v-9ed5b06e]{line-height:20px;color:#333;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.zjapp .select-text[data-v-9ed5b06e]{padding:8px 0;font-size:16px}.zjapp .select-arrow[data-v-9ed5b06e]{position:absolute;top:5px;right:0;width:40px;height:40px;line-height:40px;font-size:16px;color:#c8c8c8;text-align:center}.zjapp .select-disabled[data-v-9ed5b06e]{background-color:#f5f7fb}.zjapp .select-disabled .select-bd[data-v-9ed5b06e],.zjapp .select-disabled .select-hd[data-v-9ed5b06e]{color:#666}.zjapp .select-disabled .select-arrow[data-v-9ed5b06e]{display:none}",""])},e85d:function(e,t,a){"use strict";a.r(t);var i=a("2828").a,n=(a("10bd"),a("17cc")),s=Object(n.a)(i,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("page-content",{attrs:{title:e.detailData.batch.parent_id?e.detailData.batch.temp_name:e.detailData.batch.name,"show-go-root":!0}},[a("check-guide",{attrs:{slot:"header-bar-right",module:"special-inspect",options:e.detailData.checkItemGuideDatas,mode:"drop"},slot:"header-bar-right"}),e.isLoading||"未设置"===e.detailData.status&&!e.detailData.allowEdit?e._e():a("scroller",{ref:"scroller"},[a("drop-select-checkitem",{ref:"drop-select-checkitem",staticClass:"border-bottom",attrs:{selected:e.selectCheckitem.selected,title:e.checkItemTitle,"allow-edit":e.detailData.allowEdit,options:e.selectCheckitem.list,mode:e.selectCheckitem.mode,"is-loading":e.selectCheckitem.isLoading,"pass-rate-mode":e.batchMeasurePassRate},on:{onSelect:e.onChangeCheckitem}}),"edit"===e.detailData.mode||"reedit"===e.detailData.mode?[e.isUseMeasureNewUI?e._e():[a("item",{attrs:{border:"bottom"}},[a("div",{staticClass:"value-input-label align-r",staticStyle:{flex:"1"}},[e._v("\n            测区数\n          ")]),a("number-input",{staticStyle:{width:"40px"},attrs:{type:"int positive",range:[1,40],required:"","overflow-auto-recover":!0},on:{blur:e.areaNumChange,overflowRange:e.areaNumOverflow,onEmpty:e.areaNumOverflow},model:{value:e.detailData.areaNum,callback:function(t){e.$set(e.detailData,"areaNum",t)},expression:"detailData.areaNum"}})],1),e._l(e.detailData.areaData,(function(t,i){return a("div",{key:"area"+i,staticClass:"bg-white pt15 pl15 pr15"},[a("div",{staticClass:"area-name"},[t.isEditing?e._e():a("div",{staticClass:"area-name-text",on:{click:function(a){e.areaNameEdit(t,i)}}},[e._v("\n              "+e._s(t.name)+"\n            ")]),t.isEditing?a("div",{staticClass:"area-name-input",staticStyle:{width:"200px","max-width":"80%"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.nameTemp,expression:"area.nameTemp"}],ref:"area-ipt-"+i,refInFor:!0,staticClass:"align-l",attrs:{type:"text",maxlength:"12"},domProps:{value:t.nameTemp},on:{blur:function(a){e.areaNameUpdate(t)},input:function(a){a.target.composing||e.$set(t,"nameTemp",a.target.value)}}})]):e._e()]),e._l(e.problemDatas,(function(n){return a("div",{key:n.id},[a("div",{staticClass:"area-info"},[a("div",{staticClass:"checkitem-info"},[a("span",{staticClass:"checkitem-name"},[e._v(e._s(n.checkItem.name))]),15===n.passrate_mode||16===n.passrate_mode?a("div",{staticClass:"checkitem-standard checkitem-standard_special",domProps:{innerHTML:e._s(n.standardRange)}}):a("span",{staticClass:"checkitem-standard"},[e._v(e._s(n.standardRange))])]),e.contains([3,4,10,11,16],n.passrate_mode)?a("div",{staticClass:"value-input"},[a("span",{staticClass:"value-input-label"},[e._v("设计值")]),a("number-input",{attrs:{range:e.valueRange,decimal:e.valueDecimal},on:{blur:function(t){e.setValUpdate(n)}},model:{value:n.areaData[i].setVal,callback:function(t){e.$set(n.areaData[i],"setVal",t)},expression:"problem.areaData[areaIndex].setVal"}})],1):e._e(),e.contains([1,2,3,4,8,10,11,12,16],n.passrate_mode)?a("div",{staticClass:"value-input pl10"},[a("span",{staticClass:"value-input-label"},[e._v("点数")]),a("number-input",{staticStyle:{width:"40px"},attrs:{range:[0,99],type:"int positive"},on:{blur:function(t){e.areaPointNumChange(n,n.areaData[i])}},model:{value:n.areaData[i].pointNum,callback:function(t){e.$set(n.areaData[i],"pointNum",t)},expression:"problem.areaData[areaIndex].pointNum"}})],1):e._e()]),e.contains([1,2,3,4,7,8,10,11,12,13,16],n.passrate_mode)?a("div",{staticClass:"number-input-group"},e._l(e.pointFilter(n.realityVal,{area:t.name}),(function(t,i){return a("number-input",{key:i,class:{"color-red":t.isExceed},attrs:{type:8===n.passrate_mode?"true-or-false":"all",decimal:e.valueDecimal,range:e.valueRange},on:{blur:function(t){e.realityValUpdate(n)}},model:{value:t.val,callback:function(a){e.$set(t,"val",a)},expression:"point.val"}})}))):e._e(),e.contains([5,6,14,15],n.passrate_mode)?a("div",{staticClass:"pt15 pb10"},e._l(n.measure_item,(function(i,s){return a("div",{key:i,staticClass:"item-input-group",class:{mt10:s}},[a("div",{staticClass:"label-input-group"},[e._v(e._s(i))]),e._l(e.pointFilter(n.realityVal,{area:t.name,label:i}),(function(t,i){return a("number-input",{key:i,class:{"color-red":t.isExceed,ml10:i},attrs:{decimal:e.valueDecimal,range:e.valueRange},on:{blur:function(t){e.realityValUpdate(n)}},model:{value:t.val,callback:function(a){e.$set(t,"val",a)},expression:"point.val"}})})),a("div",{staticClass:"label-input-group label-input-group-flex"},[e._v("设计值")]),e._l(e.pointFilter(n.realityVal,{area:t.name,label:i}),(function(t,i){return[0===i?a("number-input",{key:s+"-"+i,attrs:{decimal:e.valueDecimal,range:e.valueRange},on:{blur:function(t){e.setValUpdate(n)}},model:{value:t.setVal,callback:function(a){e.$set(t,"setVal",a)},expression:"setValItem.setVal"}}):e._e()]}))],2)}))):e._e()])}))],2)}))],e.isUseMeasureNewUI?e._l(e.problemDatas,(function(t){return a("div",{key:t.id,staticClass:"bg-white pt15 pl15 pr15"},[a("div",{staticClass:"area-info"},[a("div",{staticClass:"checkitem-info"},[a("span",{staticClass:"checkitem-name"},[e._v(e._s(t.checkItem.name))]),15===t.passrate_mode||16===t.passrate_mode?a("div",{staticClass:"checkitem-standard checkitem-standard_special",domProps:{innerHTML:e._s(t.standardRange)}}):a("span",{staticClass:"checkitem-standard"},[e._v(e._s(t.standardRange))])]),a("span",{staticClass:"value-input-label pl10"},[e._v("测区数")]),a("app-stepper",{attrs:{range:[1,40]},on:{input:function(a){e.setSingleValChange(t)}},model:{value:t.areaNum,callback:function(a){e.$set(t,"areaNum",a)},expression:"problem.areaNum"}})],1),e.contains([1,2,3,4,7,8,10,11,12,13,16],t.passrate_mode)?a("div",{staticClass:"number-input-group-new"},[e._l(t.areaData,(function(i,n){return[n?[i.pointNum+(e.contains([3,4,10,11,16],t.passrate_mode)?1:0)===5?a("div",{key:"line-row-"+n,staticClass:"split-line-row"}):a("div",{key:"line-col-"+n,staticClass:"split-line-col"})]:e._e(),e.contains([3,4,10,11,16],t.passrate_mode)?a("number-input",{key:"set"+n,attrs:{placeholder:"设计值",decimal:e.valueDecimal,range:e.valueRange},on:{blur:function(a){e.setValUpdate(t)}},model:{value:i.setVal,callback:function(t){e.$set(i,"setVal",t)},expression:"area.setVal"}},[""!==i.setVal&&void 0!==i.setVal&&null!==i.setVal?a("i",{staticClass:"icon-set-val",attrs:{slot:"extend"},slot:"extend"},[e._v("\n                  设\n                ")]):e._e()]):e._e(),e._l(e.pointFilter(t.realityVal,{area:i.name}),(function(i,s){return a("number-input",{key:n+"-"+s,class:{"color-red":i.isExceed,"input-even":n%2},attrs:{type:8===t.passrate_mode?"true-or-false":"all",decimal:e.valueDecimal,range:e.valueRange},on:{blur:function(a){e.realityValUpdate(t)}},model:{value:i.val,callback:function(t){e.$set(i,"val",t)},expression:"point.val"}})}))]}))],2):e._e(),e.contains([5,6,14,15],t.passrate_mode)?a("div",{staticClass:"pt10 pb10"},[e._l(t.areaData,(function(i,n){return[n?a("div",{key:"line-row"+n,staticClass:"split-line-row-short"}):e._e(),e._l(t.measure_item,(function(s){return a("div",{key:n+s,staticClass:"item-input-group-new"},[a("div",{staticClass:"label-input-group-new"},[e._v(e._s(s))]),e._l(e.pointFilter(t.realityVal,{area:i.name,label:s}),(function(i,s){return[0===s?a("number-input",{key:"set-"+s,staticClass:"ml10",class:{"input-even":n%2},attrs:{placeholder:"设计值",decimal:e.valueDecimal,range:e.valueRange},on:{blur:function(a){e.setValUpdate(t)}},model:{value:i.setVal,callback:function(t){e.$set(i,"setVal",t)},expression:"setValItem.setVal"}},[""!==i.setVal&&void 0!==i.setVal&&null!==i.setVal?a("i",{staticClass:"icon-set-val",attrs:{slot:"extend"},slot:"extend"},[e._v("\n                      设\n                    ")]):e._e()]):e._e()]})),e._l(e.pointFilter(t.realityVal,{area:i.name,label:s}),(function(i,s){return a("number-input",{key:"val"+s,staticClass:"ml10",class:{"color-red":i.isExceed,"input-even":n%2},attrs:{decimal:e.valueDecimal,range:e.valueRange},on:{blur:function(a){e.realityValUpdate(t)}},model:{value:i.val,callback:function(t){e.$set(i,"val",t)},expression:"point.val"}})}))],2)}))]}))],2):e._e()])})):e._e()]:e._e(),"edit"===e.detailData.mode?[a("item",{staticClass:"p15 mt10"},[a("div",{staticClass:"item-con",attrs:{slot:"right"},slot:"right"},[a("item-img-list",{attrs:{maxlength:15},on:{callback:e.saveProblem},model:{value:e.detailData.image_file,callback:function(t){e.$set(e.detailData,"image_file",t)},expression:"detailData.image_file"}})],1)]),a("item-textarea",{staticClass:"border-tb",attrs:{placeholder:"补充说明"},on:{blur:e.saveProblem},model:{value:e.detailData.remark,callback:function(t){e.$set(e.detailData,"remark",t)},expression:"detailData.remark"}})]:e._e(),"view"===e.detailData.mode?[a("problem-detail-header",{staticClass:"bg-white pr0",attrs:{status:e.detailData.status}},[a("template",{slot:"operat"},[e.detailData.allowReedit?a("div",{staticClass:"btn-reedit",on:{click:function(t){e.changeMode("reedit")}}},[e._v("\n            修改\n            "),a("icon",{attrs:{name:"edit"}})],1):e._e()])],2),a("div",{staticClass:"detail-list-hd border-bottom"},[e.problemDatas.length>1?a("div",{staticClass:"list-hd-toggle",on:{click:function(t){e.toggleProblemDataAll(e.detailData)}}},[e._v("\n          "+e._s(e.hasProblemDataClose?"全展开":"全收起")+"\n        ")]):e._e(),1===e.problemDatas.length?a("div",{staticClass:"list-hd-title"},[e._v("\n          检查项\n        ")]):e._e(),a("div",{staticClass:"list-hd-num"},[e._v("计算点数")]),a("div",{staticClass:"list-hd-passrate"},[e._v("\n          合格率\n        ")])]),e.isUseMeasureNewUI?e._e():a("div",{staticClass:"detail-list"},e._l(e.problemDatas,(function(t){return a("div",{key:t.id,staticClass:"border-bottom"},[a("div",{staticClass:"detail-item-hd",on:{click:function(a){e.toggleProblemData(t)}}},[e.problemDatas.length>1?a("i",{staticClass:"detail-item-arrow",class:{"item-arrow-right":!t.isOpen,"item-arrow-down":t.isOpen}}):e._e(),a("div",{staticClass:"detail-item-name",class:{pl15:1===e.problemDatas.length}},[e._v("\n              "+e._s(t.checkItem.name)+"\n            ")]),a("div",{staticClass:"detail-item-num"},[e._v(e._s(t.pointNum))]),a("div",{staticClass:"detail-item-passrate",class:{"color-red":t.passrate<.9}},[e._v("\n              "+e._s(e._f("percent")(t.passrate,2))+"\n            ")])]),t.isOpen?a("div",{staticClass:"detail-item-bd"},[a("div",{staticClass:"detail-line"},[a("div",{staticClass:"detail-line-label",class:{"detail-line-label-single":1===e.problemDatas.length}},[e._v("\n                合格标准\n              ")]),15===t.passrate_mode||16===t.passrate_mode?a("div",{staticClass:"detail-line-con",domProps:{innerHTML:e._s(t.standardRange)}}):a("div",{staticClass:"detail-line-con"},[e._v(e._s(t.standardRange))])]),a("div",{staticClass:"detail-line"},[a("div",{staticClass:"detail-line-label",class:{"detail-line-label-single":1===e.problemDatas.length}},[e._v("\n                实测值\n              ")]),5===t.passrate_mode||6===t.passrate_mode||14===t.passrate_mode||15===t.passrate_mode?a("div",{staticClass:"detail-line-con"},e._l(t.areaData,(function(i,n){return a("div",{key:"area"+n,style:{"margin-top":(n?8:0)+"px"}},[a("p",[a("span",{staticClass:"detail-line-area"},[e._v(e._s(i.name))])]),e._l(t.measure_item,(function(n){return a("div",{key:n,staticClass:"view-points-line",style:{"margin-top":"4px"}},[e.pointFilter(t.realityVal,{area:i.name,label:n}).length?[a("div",{staticClass:"view-points-left"},[a("span",[e._v(e._s(n)+":")]),e._l(e.pointFilter(t.realityVal,{area:i.name,label:n}),(function(t,i){return[i?[e._v(" , ")]:e._e(),a("span",{key:i,class:{"color-red":t.isExceed}},[e._v(e._s(t.val))])]}))],2),a("div",{staticClass:"view-points-right"},[e._v("\n                        设计值\n                        "+e._s(e.pointFilter(t.realityVal,{area:i.name,label:n})[0].setVal)+"\n                      ")])]:e._e()],2)}))],2)}))):a("div",{staticClass:"detail-line-con"},e._l(t.areaData,(function(i,n){return a("div",{key:"area"+n,style:{"margin-top":(n?8:0)+"px"}},[a("p",[a("span",{staticClass:"detail-line-area"},[e._v(e._s(i.name))]),e.contains([3,4,10,11,16],t.passrate_mode)?a("span",{staticClass:"detail-line-setval"},[e._v("设计值"+e._s(i.setVal))]):e._e()]),a("p",{staticStyle:{"margin-top":"4px"}},[e._l(e.pointFilter(t.realityVal,{area:i.name}),(function(i,n){return[n?[e._v(" , ")]:e._e(),a("span",{key:n,class:{"color-red":i.isExceed}},[e._v(e._s(8===t.passrate_mode?1===i.val?"合格":"不合格":i.val))])]})),e.pointFilter(t.realityVal,{area:i.name}).length?e._e():a("span",[e._v("无")])],2)])})))])]):e._e()])}))),e.isUseMeasureNewUI?a("div",{staticClass:"detail-list"},e._l(e.problemDatas,(function(t){return a("div",{key:t.id,staticClass:"border-bottom"},[a("div",{staticClass:"detail-item-hd",on:{click:function(a){e.toggleProblemData(t)}}},[e.problemDatas.length>1?a("i",{staticClass:"detail-item-arrow",class:{"item-arrow-right":!t.isOpen,"item-arrow-down":t.isOpen}}):e._e(),a("div",{staticClass:"detail-item-name",class:{pl15:1===e.problemDatas.length}},[e._v("\n              "+e._s(t.checkItem.name)+"\n            ")]),a("div",{staticClass:"detail-item-num"},[e._v(e._s(t.pointNum))]),a("div",{staticClass:"detail-item-passrate",class:{"color-red":t.passrate<.9}},[e._v("\n              "+e._s(e._f("percent")(t.passrate,2))+"\n            ")])]),t.isOpen?a("div",{staticClass:"detail-item-bd"},[a("div",{staticClass:"detail-line"},[a("div",{staticClass:"detail-line-label",class:{"detail-line-label-single":1===e.problemDatas.length}},[e._v("\n                合格标准\n              ")]),15===t.passrate_mode||16===t.passrate_mode?a("div",{staticClass:"detail-line-con",domProps:{innerHTML:e._s(t.standardRange)}}):a("div",{staticClass:"detail-line-con"},[e._v(e._s(t.standardRange))])]),a("div",{staticClass:"detail-line"},[a("div",{staticClass:"detail-line-label",class:{"detail-line-label-single":1===e.problemDatas.length}},[e._v("\n                实测值\n              ")]),5===t.passrate_mode||6===t.passrate_mode||14===t.passrate_mode||15===t.passrate_mode?a("div",{staticClass:"detail-line-con"},e._l(t.areaData,(function(i,n){return a("div",{key:"area"+n,style:{"margin-top":(n?8:0)+"px"}},[n?a("div",{staticClass:"split-line-row"}):e._e(),e._l(t.measure_item,(function(n){return a("div",{key:n,staticClass:"view-points-line",style:{"margin-top":"4px"}},[e.pointFilter(t.realityVal,{area:i.name,label:n}).length?[a("span",[e._v(e._s(n)+":")]),a("span",{staticClass:"color-light pl10 pr10"},[e._v("\n                        设计值\n                        "+e._s(e.pointFilter(t.realityVal,{area:i.name,label:n})[0].setVal)+"\n                      ")]),e._l(e.pointFilter(t.realityVal,{area:i.name,label:n}),(function(t,i){return[i?a("span",{key:"mark-"+i,staticClass:"pl5 pr5"},[e._v(",")]):e._e(),a("span",{key:i,class:{"color-red":t.isExceed}},[e._v(e._s(t.val))])]}))]:e._e()],2)}))],2)}))):a("div",{staticClass:"detail-line-con-new"},[e._l(t.areaData,(function(i,n){return[n?a("div",{key:"line"+n,staticClass:"split-line-row ml0 mr0"}):e._e(),a("div",{key:"value"+n,staticClass:"detail-line-item"},[e.contains([3,4,10,11,16],t.passrate_mode)?a("span",{staticClass:"color-light pr10"},[e._v("\n                      设计值 "+e._s(i.setVal)+"\n                    ")]):e._e(),e._l(e.pointFilter(t.realityVal,{area:i.name}),(function(i,n){return[n?a("span",{key:"mark"+n,staticClass:"pl5 pr5"},[e._v(",")]):e._e(),a("span",{key:n,class:{"color-red":i.isExceed}},[e._v(e._s(8===t.passrate_mode?1===i.val?"合格":"不合格":i.val))])]}))],2)]}))],2)])]):e._e()])}))):e._e(),e.detailData.remark||e.detailData.image_file.length?a("item",{staticClass:"mt10",attrs:{label:"补充说明"}},[a("div",{staticClass:"item-con",attrs:{slot:"right"},slot:"right"},[e.detailData.remark?a("div",{staticClass:"item-font"},[e._v(e._s(e.detailData.remark))]):e._e(),a("item-img-list",{attrs:{editabled:!1},model:{value:e.detailData.image_file,callback:function(t){e.$set(e.detailData,"image_file",t)},expression:"detailData.image_file"}})],1)]):e._e(),a("user-select",{attrs:{title:"检查人",mode:"view",date:e._f("formatDate")(e.detailData.regist_date),editabled:!1},model:{value:e.detailData.regist,callback:function(t){e.$set(e.detailData,"regist",t)},expression:"detailData.regist"}}),e.detailData.allowRest?a("app-button-group",[a("app-button",{attrs:{type:"text"},on:{click:e.checkItemRest}},[e._v("\n          删除已检项内容\n        ")])],1):e._e()]:e._e(),"检查中"===e.detailData.status?a("app-button-group",[a("app-button",{attrs:{type:"text",name:"删除此草稿"},on:{click:function(t){e.delProblem(e.detailData)}}})],1):e._e()],2),e.isLoading||"edit"!==e.detailData.mode&&"reedit"!==e.detailData.mode||!e.detailData.allowEdit?e._e():a("app-button-group",{attrs:{"fixed-bottom":"",seamless:""}},["edit"===e.detailData.mode?a("app-button",{staticStyle:{width:"50%"},attrs:{name:"暂存",plain:""},on:{click:e.saveProblemAndTip}}):e._e(),"reedit"===e.detailData.mode?a("app-button",{attrs:{name:"提交检查记录"},on:{click:e.resubmitCheck}}):e._e(),"edit"===e.detailData.mode?a("app-button",{attrs:{name:"提交检查记录"},on:{click:e.submitCheck}}):e._e()],1)],1)}),[],!1,null,"15cd7b49",null);t.default=s.exports},f1e4:function(e,t,a){"use strict";(function(e){a("5ab2"),a("e10e");var i=a("28f8"),n=(a("9e76"),a("6d57"),a("9a33"),a("f548"),a("cc57"),a("4ad6")),s=a("e89f"),r=a("bcc7"),o=a("3122"),l=a("6e1b"),c=a("c130"),d=a("0636");function p(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,i)}return a}function u(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?p(Object(a),!0).forEach((function(t){Object(i.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):p(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}t.a={name:"CheckGuideDetail",components:{},mixins:[s.a],data:function(){return{show:!1,isLoading:!0,isImageDownloading:!1,title:"",content:[],module:"",itemId:""}},methods:{openPopup:function(t){var a=this;for(var i in this.value=!0,this.show=!0,this.module=t.module,this.itemId=t.itemId,this.$emit("open"),t)this[i]=t[i];this.checkType={check:31,"check-safety":36,"check-quality":37,"measure-v3":41,process:32,"fly-inspect":101}[this.module],this.isLoading=!0,("special-inspect"===this.module?l.a.getSpecialInspectCheckItemDetail(this.itemId):"templet-plan"===this.module?c.a.getTempletDetail(this.itemId):"material"===this.module?d.a.getMaterialDetail(this.itemId):r.a.getCheckItem(this.itemId,this.checkType)).then((function(t){console.log("checkitemData",t),a.checkitemData=t,a.title=t.full_name||t.name,"special-inspect"!==a.module&&"inspect"!==a.module&&"fly-inspect"!==a.module&&"material"!==a.module||(t.content=t.guideline||t.content);var i=t.content?t.content.trim():"";if(i=(i=(i=(i=(i=i.replace(/<\/p><p>/gm,"\n")).replace(/<p>/gm,"")).replace(/<\/p>/gm,"")).replace(/<br>/gm,"")).replace(/<br \/>/gm,""),/(<img[^\>]*>)/gm.test(i)){var n=i.split(/(<img[^\>]*>)/gm);(n=n.filter((function(e){return!!e}))).forEach((function(e,t){e&&!/^\s*\n/.test(e)&&t&&!/\n\s*$/.test(n[t-1])&&(n[t]="\n"+e)})),i=n.join("")}var s=i?i.split("\n"):[];a.content=e.map(s,(function(e,t){var a;if(/<img([\s\S]*)>/gm.test(e)){var i=e.split(/\ssrc="([^"]*)"/gm)[1],n=i?i.match(/[\w|-]{36}/gm)[0]:(new Date).getTime()+"-"+t;a={isImg:!0,src:"",url:i,status:"pending",id:n,ready:!0}}else a={isImg:!1,val:e};return a})),a.downloadImage(),a.isLoading=!1})).catch((function(e){$log.log(e)}))},closePopup:function(){this.value=!1,this.show=!1,this.$emit("close")},getThumbnail:function(e){return"pending"===e.status?o.a.IMAGE_LOADING:"rejected"===e.status?o.a.IMAGE_RELOAD:"dev"===APP_ENV?e.url:"fulfilled"===e.status?e.src:($log.log("检查指引-显示图片：",e),o.a.IMAGE_PLACEHOLD)},imgError:function(e,t){$log.error("检查指引-加载图片出现错误：",e);var a=u({},e);a.status="rejected",this.$set(this.content,t,a)},downloadImage:function(t){var a=this;t=t?[t]:this.imageList(),e.each(t,(function(t){var i=u({},t),n=e.map(a.content,(function(e){return e.id})).indexOf(t.id);o.a.isNeedDownload(t.url).then((function(e){e?o.a.download(t.url).then((function(e){i.status="fulfilled",i.src=o.a.fixUrl(e),a.$set(a.content,n,i)})).catch((function(e){$log.error("检查指引-下载图片：",e)})):(i.status="fulfilled",i.src=o.a.fixUrl(o.a.getPathFromUrl(t.url)),a.$set(a.content,n,i))}))}))},imageList:function(){return e.filter(this.content,(function(e){return e.isImg}))},imgClick:function(t){var a=this;if("pending"===t.status)return!1;if("rejected"===t.status)return this.downloadImage(t),$log.log("检查指引-点击重新加载-重新下载图片：",t),!1;var i=this.imageList(),s=e.map(i,(function(e){return e.id})).indexOf(t.id);i=e.map(i,(function(e){return a.getThumbnail(e)})),n.a.openImageBrowser(i,s)}}}}).call(this,a("391c"))},f369:function(e,t,a){"use strict";var i=a("fd50"),n=a("bcc7"),s=a("329b"),r=a("d0fb").a,o=(a("9b25"),a("17cc")),l=Object(o.a)(r,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("transition",{attrs:{name:"slide-right"}},[e.show?a("page-content",{attrs:{mode:"dialog",title:"检查指引","on-close":e.closePopup}},[!e.isLoading&&e.listData.length?a("div",{staticClass:"page-scroll"},e._l(e.listData,(function(t,i){return a("div",{key:i},[a("item",{attrs:{border:"bottom","icon-right":t.subitem&&t.subitem.length?t.isOpen?"arrow-up":"arrow-down":"arrow-right"},on:{click:function(a){e.clickItem(t)}}},[a("div",{staticClass:"item-text fw-b color-blue one-line"},[e._v(e._s(t.item_name))])]),t.isOpen?e._l(t.subitem,(function(t,i){return a("div",{key:i,staticClass:"sublist"},[a("item",{staticClass:"pl0",attrs:{border:"bottom","icon-right":t.subitem&&t.subitem.length?t.isOpen?"arrow-up":"arrow-down":"arrow-right"},on:{click:function(a){e.clickItem(t)}}},[a("div",{staticClass:"item-text checkitem-list-name"},[e._v(e._s(t.item_name))])]),t.isOpen?e._l(t.subitem,(function(t,i){return a("div",{key:i,staticClass:"sublist"},[a("item",{staticClass:"pl0",attrs:{border:"bottom","icon-right":t.subitem&&t.subitem.length?t.isOpen?"arrow-up":"arrow-down":"arrow-right"},on:{click:function(a){e.clickItem(t)}}},[a("div",{staticClass:"item-text checkitem-list-name"},[e._v(e._s(t.item_name))])]),t.isOpen?e._l(t.subitem,(function(t,i){return a("div",{key:i,staticClass:"sublist"},[a("item",{staticClass:"pl0",attrs:{border:"bottom","icon-right":t.subitem&&t.subitem.length?t.isOpen?"arrow-up":"arrow-down":"arrow-right"},on:{click:function(a){e.clickItem(t)}}},[a("div",{staticClass:"item-text checkitem-list-name"},[e._v(e._s(t.item_name))])])],1)})):e._e()],2)})):e._e()],2)})):e._e()],2)}))):e._e(),a("loading-status",{attrs:{"is-loading":e.isLoading,"is-empty":!e.listData.length,"empty-text":"没有检查项"}})],1):e._e()],1)}),[],!1,null,"74102c05",null).exports,c=!1;c||(c=new(s.default.extend(l))({el:document.createElement("div")}),document.body.appendChild(c.$el));var d=c,p=a("515e"),u=a("91c1").a,m=(a("dc98"),Object(o.a)(u,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.show?a("div",{staticClass:"main",style:{top:e.contentTop+"px"}},[a("i",{staticClass:"arrow"}),a("div",{staticClass:"content",on:{click:function(t){return t.target!==t.currentTarget?null:e.closePopup(t)}}},[a("transition",{attrs:{name:"slide-down"},on:{enter:function(t){e.isOpening=!0},"after-enter":function(t){e.isOpening=!1},leave:function(t){e.isClosing=!0},"after-leave":e.afterClose}},[e.showList?a("div",{staticClass:"box",style:{height:e.listHeight+"px"}},e._l(e.data,(function(t,i){return a("div",{key:i,class:{"border-bottom":e.data.length>1,"box-single":1===e.data.length}},[a("div",{staticClass:"detail-hd",class:{"border-bottom":e.data.length<=1,"detail-hd-single":e.data.length<=1},on:{click:function(a){e.toggleItem(t)}}},[e.data.length>1?a("i",{class:{"detail-arrow-right":!t.isOpen,"detail-arrow-down":t.isOpen}}):e._e(),a("div",{staticClass:"detail-title"},[e._v(e._s(t.name))])]),e.data.length<=1||t.isOpen?a("div",{staticClass:"detail-bd",class:{"detail-bd-single":e.data.length<=1}},[e._l(t.textArr,(function(t,i){return a("p",{key:i,staticClass:"text-line"},[e._v("\n              "+e._s(t)+"\n            ")])})),a("item-img-list",{attrs:{editabled:!1},model:{value:t.contentImage,callback:function(a){e.$set(t,"contentImage",a)},expression:"item.contentImage"}}),a("loading-status",{attrs:{"is-empty":!t.textArr.length&&!t.contentImage.length,"empty-text":"PC端未设置检查指引"}})],2):e._e()])}))):e._e()])],1)]):e._e()}),[],!1,null,"2cac8864",null).exports),h=!1;h||(h=new(s.default.extend(m))({el:document.createElement("div")}),document.body.appendChild(h.$el));var f=h,b={name:"CheckGuide",components:{},props:{module:{type:String,default:""},mode:{type:String,default:"page"},itemId:{type:String,default:""},itemIds:{type:Array,default:function(){return[]}},batchId:{type:String,default:""},sectionId:{type:String,default:""},options:{type:Array,default:function(){return[]}},optionsPromise:{type:Function,default:function(){}},beforeOpen:{type:Function,default:function(){}}},data:function(){return{isLoading:!1}},methods:{openCheckGuide:function(){var e=this,t=this.beforeOpen&&this.beforeOpen();t instanceof Promise||(t=Promise.resolve(t)),t.then((function(t){!1!==t&&("drop"===e.mode?f.openPopup({itemIds:e.itemIds,el:e.$refs["check-guide-btn"],options:e.options}):("templet-plan"===e.module?i.a.when(!1):e.itemId&&e.sectionId?n.a.hasChildSectionCheckItem(e.itemId,e.sectionId):e.itemId?n.a.hasChildCheckItem(e.itemId):i.a.when(!0)).then((function(t){t?d.openPopup({module:e.module,itemId:e.itemId,batchId:e.batchId,sectionId:e.sectionId,options:e.options}):p.a.openPopup({itemId:e.itemId,module:e.module})})))}))}}},v=Object(o.a)(b,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{ref:"check-guide-btn",staticClass:"header-btn",on:{click:function(t){e.openCheckGuide()}}},[a("icon",{attrs:{name:"nav-info"}})],1)}),[],!1,null,null,null);t.a=v.exports},f53a:function(e,t,a){(e.exports=a("690e")(!1)).push([e.i,".zjapp .number-keyboard-con[data-v-6337f428]{position:absolute;left:0;bottom:0;width:100%;padding:4px 0;background-color:#fafafa;box-shadow:0 -4px 8px 0 rgba(0,0,0,.08);-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.zjapp .ios-bezel-less[data-v-6337f428]{padding-bottom:34px}.zjapp .keyboard-row[data-v-6337f428],.zjapp .keys-row[data-v-6337f428]{display:flex}.zjapp .row-span-1[data-v-6337f428]{flex:1}.zjapp .row-span-2[data-v-6337f428]{flex:2}.zjapp .row-span-3[data-v-6337f428]{flex:3}.zjapp .keys[data-v-6337f428]{flex:1;height:48px;line-height:48px;text-align:center;font-size:18px;margin:4px;border:1px solid rgba(5,5,5,.07);border-radius:8px;background-color:#fff;padding:0}.zjapp .keys-next[data-v-6337f428],.zjapp .keys-prev[data-v-6337f428]{font-size:14px;color:#4275e8}.zjapp .keys-ok[data-v-6337f428]{font-size:14px;color:#999}.zjapp .keys-delete[data-v-6337f428]{color:#999}.zjapp .icon[data-v-6337f428]{pointer-events:none}.zjapp .icon-keyboard-close[data-v-6337f428]{font-size:20px;color:#999}.zjapp .icon-keyboard-delete[data-v-6337f428]{vertical-align:top;margin-top:13px;font-size:14px;color:#333}.zjapp .activing[data-v-6337f428]{background-color:#ececec}.zjapp .disabled[data-v-6337f428]{color:#999}.zjapp .col[data-v-6337f428]{display:flex;flex-direction:column;justify-content:center;align-items:center;height:104px;line-height:36px}",""])},fe9e:function(e,t,a){"use strict";a("3cd8")}}]);