(window.webpackJsonp_module_entry_zjapp_=window.webpackJsonp_module_entry_zjapp_||[]).push([["chunk-4393bc34"],{"521f":function(e,t,n){var a=n("a67f");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);(0,n("85cb").default)("8f3eb848",a,!0,{sourceMap:!1,shadowMode:!1})},"9a34":function(e,t,n){"use strict";var a=n("fd50"),o=n("3bd5"),r=n("1b7e"),i=n("162a"),l=function(){return r.a.getHasNetwork()},c={isNetwork:function(){var e=a.a.defer();return r.a.getHasNetwork().then((function(t){return t||(e.reject("请检查网络"),e.promise)}))},sendMsg:function(e,t){return l().then((function(n){if(n){var a={tenant_code:e,mobile:t};return i.a.post("/common/get-verify-code",{},a)}})).then((function(n){return n&&n.length>0&&o.a.updateUser({tenant_code:e,user_mobile:t}),n}))},resetPwd:function(e,t){var n=a.a.defer();return l().then((function(a){if(a){var r={tenant_code:o.a.getUser().tenant_code,mobile:o.a.getUser().mobile,new_password:e,check_new_password:t,verify_code:o.a.getUser().verify_code};return i.a.post("/common/reset-password",{},r)}return n.reject("请检查网络"),n.promise})).then((function(t){return t&&t.length>0&&o.a.updateUser({user_pwd:e,user_name:t.account}),t}))}};t.a=c},a67f:function(e,t,n){(e.exports=n("690e")(!1)).push([e.i,".zjapp .reset-pwd-wrap[data-v-125d4e8f]{background:#f2f2f2;padding:20px 0 0}.zjapp .reset-pwd-wrap .van-cell-group[data-v-125d4e8f]{margin:0 0 10px}.zjapp .reset-pwd-wrap .van-cell-group .van-field[data-v-125d4e8f]{padding:8px 16px;align-items:center}.zjapp .reset-pwd-wrap .van-cell-group .van-field[data-v-125d4e8f] .van-field__control{height:34px;padding:2px 24px 0 0;line-height:16px;color:#111;font-size:16px}.zjapp .reset-pwd-wrap .van-cell-group .van-field[data-v-125d4e8f] .van-field__button{color:#4376e8}.zjapp .reset-pwd-wrap .van-cell-group .van-field[data-v-125d4e8f] .van-field__button [disabled]{opacity:.4;cursor:default;pointer-events:none;color:#000}.zjapp .reset-pwd-wrap .van-cell-group .van-field-code[data-v-125d4e8f] .van-field__control{font-size:14px}.zjapp .reset-pwd-wrap .van-cell-group .notice[data-v-125d4e8f]{padding:10px 16px 20px;color:#9a9a9a;background-color:#f2f2f2}[data-v-125d4e8f] .van-button{border:none;font-size:16px}[data-v-125d4e8f] .van-button:before{display:none}",""])},aca9:function(e,t,n){"use strict";n("521f")},b371:function(e,t,n){"use strict";n.r(t);n("cc57");var a=n("3bd5"),o=n("e2a7"),r=n("9a34"),i={name:"SendMsg",data:function(){return{tenant_code:"",mobile:"",verify_code:"",isAllowResetPwd:!1,isAllowClick:!1,description:"获取验证码",interval:function(){}}},watch:{$route:function(e,t){"RecoverPwd"===t.name&&(this.verify_code="",clearInterval(this.interval),this.isAllowResetPwd=!1,this.isAllowClick=!1,this.description="获取验证码")}},activated:function(){this.mobile=a.a.getUser().mobile,this.tenant_code=a.a.getUser().tenant_code},createed:function(){this.mobile=a.a.getUser().mobile,this.tenant_code=a.a.getUser().tenant_code},methods:{getVerifyCode:function(){var e=this;this.isAllowClick||r.a.isNetwork().then((function(t){t&&(e.isAllowClick=!0,r.a.sendMsg(e.tenant_code,e.mobile).then((function(t){if(t){var n=60;e.interval=setInterval((function(){n<=0?(clearInterval(e.interval),n=60,e.description="获取验证码",e.isAllowClick=!1):(e.description=n+"秒后重发",n--,e.isAllowClick=!0)}),1e3),e.isAllowResetPwd=!0}else o.a.alert("获取失败,请检查网络")})).catch((function(t){e.isAllowClick=!1,e.isAllowResetPwd=!1,t?o.a.alert(t.errmsg||t):o.a.alert("获取失败,请检查网络")})))})).catch((function(e){o.a.hideLoading(),o.a.alert(JSON.stringify(e))}))},next:function(){var e=this.verify_code;if(!String(e))return o.a.alert("请输入短信验证码");a.a.updateUser({verify_code:e}),this.isAllowResetPwd?this.$router.push({name:"ResetPwd"}):o.a.alert("请获取验证码")}}},l=(n("aca9"),n("17cc")),c=Object(l.a)(i,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("page-content",{attrs:{title:"找回密码","show-go-root":"login"}},[n("div",{staticClass:"reset-pwd-wrap"},[n("van-cell-group",[n("van-field",{staticClass:"border-bottom",attrs:{border:!1,label:"企业代码:",clearable:""},model:{value:e.tenant_code,callback:function(t){e.tenant_code=t},expression:"tenant_code"}}),n("van-field",{attrs:{border:!1,label:"手机号码:",clearable:"",placeholder:"请输入手机号码"},model:{value:e.mobile,callback:function(t){e.mobile=t},expression:"mobile"}}),n("div",{staticClass:"notice"},[e._v("\n        若不是此帐号,请联系贵司系统管理员。\n      ")]),n("van-field",{staticClass:"van-field-code",attrs:{border:!1,type:"number",placeholder:"请输入短信验证码"},model:{value:e.verify_code,callback:function(t){e.verify_code="string"==typeof t?t.trim():t},expression:"verify_code"}},[n("van-button",{attrs:{slot:"button",disabled:e.isAllowClick},on:{click:e.getVerifyCode},slot:"button"},[e._v("\n          "+e._s(e.description)+"\n        ")])],1)],1),n("app-button-group",[n("app-button",{on:{click:function(t){e.next()}}},[e._v("下一步")])],1)],1)])}),[],!1,null,"125d4e8f",null);t.default=c.exports}}]);