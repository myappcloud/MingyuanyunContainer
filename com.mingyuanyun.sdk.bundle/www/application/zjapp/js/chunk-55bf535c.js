(window.webpackJsonp_module_entry_zjapp_=window.webpackJsonp_module_entry_zjapp_||[]).push([["chunk-55bf535c"],{"05ac":function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return l}));r("2b45"),r("fc58");var n=r("0e4d"),c=r("94ef"),a=r("76ff"),i=r("4b67"),u=r("d703"),o=r("fc9f");function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Object(u.a)(e);if(t){var c=Object(u.a)(this).constructor;r=Reflect.construct(n,arguments,c)}else r=n.apply(this,arguments);return Object(i.a)(this,r)}}var l=function(e){Object(a.a)(r,e);var t=s(r);function r(){return Object(n.a)(this,r),t.apply(this,arguments)}return Object(c.a)(r,[{key:"getIndexList",value:function(e){var t="select si.*, si.checkitem_name as name,\n\t\t(select count(*) from checkquality_problem cp where cp.biz_id = si.id ) as problemNum,\n\t\t(select sum(deduction) from checkquality_problem cp1 \n      where batch_type = '专项巡检' and cp1.biz_id = si.id and cp1.status != '草稿' and cp1.status != '已关闭') as deduction \n\t\tfrom special_inspect si \n\t\twhere si.batch_id = '".concat(e,"' order by si.checkitem_code");return o.a.query(t)}}]),r}(r("29f8").a)},"09d6":function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return d}));r("2b45"),r("fc58"),r("6a61");var n=r("2e91"),c=r("0e4d"),a=r("94ef"),i=r("76ff"),u=r("4b67"),o=r("d703"),s=r("937e"),l=r("a044"),f=r("e2a7");function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Object(o.a)(e);if(t){var c=Object(o.a)(this).constructor;r=Reflect.construct(n,arguments,c)}else r=n.apply(this,arguments);return Object(u.a)(this,r)}}var d=function(e){Object(i.a)(u,e);var t,r=p(u);function u(){return Object(c.a)(this,u),r.apply(this,arguments)}return Object(a.a)(u,[{key:"onClickEndNode",value:function(e,t,r){e.status===l.y?this.routeToOldSetPass(e):(e.status!==l.v||e.temporary_storage)&&this.routeToOldProblemList(e,r)}},{key:"routeToEdit",value:function(e){this.routeToOldProblemEdit(e)}},{key:"routeToView",value:function(e){this.routeToOldProblemView(e)}},{key:"changeSpecialInspectStatus",value:function(e){this.routeToOldSetPass(e)}},{key:"gotoProblemList",value:function(e,t,r){this.gotoOldProblemList({batch_id:e,mode:8})}},{key:"finishBatchConfirm",value:(t=Object(n.a)(regeneratorRuntime.mark((function e(t,r,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r||[]).some((function(e){return!e.treeNodeIsFirst&&e.treeNodeIsEnd&&e.temporary_storage}))){e.next=3;break}return e.abrupt("return",f.a.confirm("有暂存数据未提交，继续操作将清除所有暂存数据，是否确定提交？"));case 3:case"end":return e.stop()}}),e)}))),function(e,r,n){return t.apply(this,arguments)})}]),u}(s.a)},1079:function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return s}));r("2b45"),r("fc58");var n=r("0e4d"),c=r("94ef"),a=r("76ff"),i=r("4b67"),u=r("d703");function o(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Object(u.a)(e);if(t){var c=Object(u.a)(this).constructor;r=Reflect.construct(n,arguments,c)}else r=n.apply(this,arguments);return Object(i.a)(this,r)}}var s=function(e){Object(a.a)(r,e);var t=o(r);function r(){return Object(n.a)(this,r),t.apply(this,arguments)}return Object(c.a)(r,[{key:"getIndexList",value:function(e){var t="select si.*, si.checkitem_name as name,\n    (select count(*) from checkquality_problem cp \n      where cp.biz_id = si.id and cp.status !='草稿' ) as problem_num,\n\t  (select count(*) from checkquality_problem cp \n      where cp.biz_id = si.id and cp.status ='草稿' ) as temporary_storage,\n    (select deduction from checkquality_problem cp1 \n      where batch_type = '专项巡检' and cp1.biz_id = si.id and cp1.status != '草稿' ORDER BY deduction desc, created_on desc limit 1) as deduction,\n    (select redline_deduction from checkquality_problem cp1 \n      where batch_type = '专项巡检' and cp1.biz_id = si.id and cp1.status != '草稿' ORDER BY deduction desc, created_on desc limit 1) as redline_deduction,\n    (select deduction_level from checkquality_problem cp1 \n      where batch_type = '专项巡检' and cp1.biz_id = si.id and cp1.status != '草稿' ORDER BY deduction desc, created_on desc limit 1) as deduction_level,\n\t\t(select id from checkquality_problem cp where cp.biz_id = si.id order by cp.download_time desc limit 1) as problem_id\n\t\tfrom special_inspect si \n\t\twhere si.batch_id = '".concat(e,"' order by si.checkitem_code");return localDB.query(t)}}]),r}(r("29f8").a)},1522:function(e,t,r){"use strict";r.d(t,"b",(function(){return i}));r("f548"),r("6d57");var n=new(r("29f8").a);t.a=n;var c=r("9dfb"),a={};function i(e){return a["mode-".concat(e)]||n}c.keys().forEach((function(e){var t=c(e).default,r=e.replace(/(\.\/|\.js)/g,"");a[r]=new t}))},"1e33":function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return b}));r("2b45"),r("fc58"),r("6a61");var n=r("2e91"),c=r("0e4d"),a=r("94ef"),i=r("90ce"),u=r("76ff"),o=r("4b67"),s=r("d703"),l=r("937e"),f=(r("48f4"),r("1b7e")),p=r("162a"),d=r("fc9f"),h=(r("4360"),r("a044"));function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Object(s.a)(e);if(t){var c=Object(s.a)(this).constructor;r=Reflect.construct(n,arguments,c)}else r=n.apply(this,arguments);return Object(o.a)(this,r)}}var b=function(e){Object(u.a)(l,e);var t,r,o=m(l);function l(){return Object(c.a)(this,l),o.apply(this,arguments)}return Object(a.a)(l,[{key:"onClickEndNode",value:function(e,t,r){e.status===h.y?this.routeToOldSetPass(e):e.problemNum&&this.routeToOldProblemList(e,r)}},{key:"routeToEdit",value:function(e){this.routeToOldProblemEdit(e)}},{key:"routeToView",value:function(e){this.routeToOldProblemView(e)}},{key:"changeSpecialInspectStatus",value:(r=Object(n.a)(regeneratorRuntime.mark((function e(t,r,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r===h.y?this.routeToOldSetPass(t):Object(i.a)(Object(s.a)(l.prototype),"changeSpecialInspectStatus",this).call(this,t,r,n);case 1:case"end":return e.stop()}}),e,this)}))),function(e,t,n){return r.apply(this,arguments)})},{key:"gotoProblemList",value:function(e,t,r){this.gotoOldProblemList({batch_id:e,mode:this.mode})}},{key:"finishBatch",value:(t=Object(n.a)(regeneratorRuntime.mark((function e(t,r){var n,c,a,u,o,m;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("UsingSpecialInspectMode3DefaultOk"!==r.grayKey){e.next=27;break}return n=t.id,t.status=h.u,e.next=5,f.a.getHasNetwork();case 5:if(e.sent){e.next=8;break}return e.abrupt("return",Promise.reject("当前网络无法同步数据"));case 8:return e.next=10,p.a.post("/batch/upload",null,{data:{batch:t}});case 10:if(!("ex_data"in(c=e.sent))){e.next=14;break}return e.next=14,p.a.importData({result:c.ex_data});case 14:return e.next=16,d.a.update("batch",c.batch,{id:n});case 16:return a={status:h.v,deduction:0,image_file:"[]"},u={batch_id:t.id,status:h.w},e.next=20,this.Repositories.updateSpecialInspectAll(u,a);case 20:return e.next=22,this.Repositories.getDraftProblemByBatchId(n);case 22:return o=e.sent,m=(o||[]).map((function(e){return e.id})),e.abrupt("return",this.Repositories.deleteProblemById(m));case 27:return e.next=29,Object(i.a)(Object(s.a)(l.prototype),"finishBatch",this).call(this,t);case 29:case"end":return e.stop()}}),e,this)}))),function(e,r){return t.apply(this,arguments)})}]),l}(l.a)},2150:function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return b}));r("2b45"),r("fc58"),r("6a61");var n=r("2e91"),c=r("0e4d"),a=r("94ef"),i=r("90ce"),u=r("76ff"),o=r("4b67"),s=r("d703"),l=r("937e"),f=r("a18c"),p=r("e2a7"),d=r("7cb8"),h=r("a044");function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Object(s.a)(e);if(t){var c=Object(s.a)(this).constructor;r=Reflect.construct(n,arguments,c)}else r=n.apply(this,arguments);return Object(o.a)(this,r)}}var b=function(e){Object(u.a)(l,e);var t,r,o=m(l);function l(){return Object(c.a)(this,l),o.apply(this,arguments)}return Object(a.a)(l,[{key:"onClickEndNode",value:function(e,t,r){f.a.push({path:"/special-inspect-measure-problem-detail",query:{bizId:e.id}})}},{key:"batchCheck",value:(r=Object(n.a)(regeneratorRuntime.mark((function e(t,r,n,c){var a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(i.a)(Object(s.a)(l.prototype),"batchCheck",this).call(this,t,r,n,c);case 2:if(!(a=e.sent)){e.next=5;break}return e.abrupt("return",a);case 5:if(t.place&&t.place.trim()){e.next=8;break}return e.abrupt("return",{code:1,msg:"检查部位必填"});case 8:case"end":return e.stop()}}),e,this)}))),function(e,t,n,c){return r.apply(this,arguments)})},{key:"finishBatchConfirm",value:(t=Object(n.a)(regeneratorRuntime.mark((function e(t,r,n){var c,a,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=Object(d.g)(n,"status",[h.v]),!((a=c[h.v])>0)){e.next=6;break}if(i=p.a.popBox({title:'有<span class="color-orange pl5 pr5">'+a+"</span>项无记录，是否正常提交？",cancelText:"取消",okText:"提交"})){e.next=6;break}return e.abrupt("return",i);case 6:return e.abrupt("return",p.a.confirm("请确保所有检查人已上传数据，提交后不可修改，确认提交？"));case 7:case"end":return e.stop()}}),e)}))),function(e,r,n){return t.apply(this,arguments)})}]),l}(l.a)},"264e":function(e,t,r){"use strict";r.d(t,"a",(function(){return n})),r.d(t,"c",(function(){return c})),r.d(t,"b",(function(){return a})),r.d(t,"d",(function(){return i}));var n="检查完毕",c="未设置",a="草稿",i=[c,a]},"266f":function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return d}));r("2b45"),r("fc58"),r("6d57"),r("6a61");var n=r("2e91"),c=r("0e4d"),a=r("94ef"),i=r("76ff"),u=r("4b67"),o=r("d703"),s=r("937e"),l=r("a044"),f=(r("e2a7"),r("7cb8"));function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Object(o.a)(e);if(t){var c=Object(o.a)(this).constructor;r=Reflect.construct(n,arguments,c)}else r=n.apply(this,arguments);return Object(u.a)(this,r)}}var d=function(e){Object(i.a)(u,e);var t,r=p(u);function u(){return Object(c.a)(this,u),r.apply(this,arguments)}return Object(a.a)(u,[{key:"getIndexList",value:(t=Object(n.a)(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.Repositories.getIndexList(t);case 2:return((r=e.sent)||[]).forEach((function(e){e.template_extension=Object(f.l)(e.template_extension)||{}})),n=Object(f.c)(r,{key:"id",relationKey:"parent_id",setLevel:!0}),e.abrupt("return",{tree:n,list:r});case 6:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"batchCheck",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=t.some((function(e){return e.status===l.u}));if(!r)return{code:1,msg:"请完成至少一个末级模板再提交"}}}]),u}(s.a)},2757:function(e,t,r){"use strict";r.d(t,"a",(function(){return y})),r.d(t,"c",(function(){return g})),r.d(t,"d",(function(){return O}));r("6a61");var n=r("2e91"),c=(r("9e76"),r("f548"),r("6d57"),r("5ab2"),r("e10e"),r("28f8")),a=r("0e4d"),i=r("94ef"),u=r("1522"),o=r("3bd5"),s=r("7bac"),l=r("4360"),f=r("3516"),p=r("7cb8");function d(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function h(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?d(Object(r),!0).forEach((function(t){Object(c.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var m=function(){function e(){Object(a.a)(this,e),this.batchTemplateModeCache={},this.specialInspectTemplateModeCache={}}var t,r,c,d,m,b,y;return Object(i.a)(e,[{key:"getDefaultBatch",value:(y=Object(n.a)(regeneratorRuntime.mark((function e(){var t,r,n,c,a,i=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.length>0&&void 0!==i[0]?i[0]:l.a.state.global.currentProject.id,r="SpecialInspectBatchStorageKey-".concat(t),e.next=4,s.a.getUserKey(r);case 4:return n=e.sent,c=n&&n.id,e.next=8,this.getBatchById(c);case 8:return a=e.sent,e.abrupt("return",a);case 10:case"end":return e.stop()}}),e,this)}))),function(){return y.apply(this,arguments)})},{key:"setDefaultBatch",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l.a.state.global.currentProject.id,r="SpecialInspectBatchStorageKey-".concat(t);return s.a.setUserKey(r,e)}},{key:"getBatchList",value:(b=Object(n.a)(regeneratorRuntime.mark((function e(){var t,r,n,c=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=c.length>0&&void 0!==c[0]?c[0]:l.a.state.global.currentProject.id,r=c.length>1&&void 0!==c[1]?c[1]:o.a.getUser().user_id,e.next=4,u.a.getBatchList(t,r);case 4:return n=e.sent,e.abrupt("return",(n||[]).map((function(e){return h(h({},e),{},{template_extension:Object(p.l)(e.template_extension)||{}})})));case 6:case"end":return e.stop()}}),e)}))),function(){return b.apply(this,arguments)})},{key:"getFirstBatch",value:(m=Object(n.a)(regeneratorRuntime.mark((function e(){var t,r,n,c=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=c.length>0&&void 0!==c[0]?c[0]:l.a.state.global.currentProject.id,r=c.length>1&&void 0!==c[1]?c[1]:o.a.getUser().user_id,e.next=4,u.a.getFirstBatch(t,r);case 4:return(n=e.sent)&&(n.template_extension=Object(p.l)(n&&n.template_extension)||{}),e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)}))),function(){return m.apply(this,arguments)})},{key:"getBatchById",value:(d=Object(n.a)(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.a.getBatchById(t);case 2:return(r=e.sent)&&(r.template_extension=Object(p.l)(r&&r.template_extension)||{}),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)}))),function(e){return d.apply(this,arguments)})},{key:"getCurrentBatch",value:(c=Object(n.a)(regeneratorRuntime.mark((function e(){var t,r,n=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:l.a.state.global.currentProject.id,e.next=3,this.getDefaultBatch(t);case 3:if(r=e.sent){e.next=8;break}return e.next=7,this.getFirstBatch(t);case 7:r=e.sent;case 8:return e.abrupt("return",r);case 9:case"end":return e.stop()}}),e,this)}))),function(){return c.apply(this,arguments)})},{key:"getBatchContracts",value:function(e){return u.a.getBatchContracts(e)}},{key:"getBatchWillUploadNum",value:function(){return Promise.resolve()}},{key:"finishCheckBatch",value:function(){return Promise.resolve()}},{key:"getTemplateList",value:function(){return u.a.getTemplateList()}},{key:"getContractList",value:function(e){return u.a.getContractList(e)}},{key:"getBatchUsers",value:function(e){return f.a.getBatchUsers(e)}},{key:"getBatchTemplateMode",value:(r=Object(n.a)(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:if(void 0===this.batchTemplateModeCache[t]){e.next=6;break}return e.abrupt("return",this.batchTemplateModeCache[t]);case 6:return e.next=8,u.a.getBatchTemplateMode(t);case 8:return r=e.sent,void 0!==(n=r&&r.mode)&&(this.batchTemplateModeCache[t]=n),e.abrupt("return",n);case 12:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"getSpecialInspectTemplateMode",value:(t=Object(n.a)(regeneratorRuntime.mark((function e(t){var r,n,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===this.specialInspectTemplateModeCache[t]){e.next=4;break}return e.abrupt("return",this.specialInspectTemplateModeCache[t]);case 4:return e.next=6,u.a.getSpecialInspectBatchId(t);case 6:return r=e.sent,n=r&&r.batch_id,e.next=10,this.getBatchTemplateMode(n);case 10:return void 0!==(c=e.sent)&&(this.specialInspectTemplateModeCache[t]=c),e.abrupt("return",c);case 13:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})}]),e}(),b=r("937e"),y=new m,v=new b.a,_=(t.b=v,r("ae0f")),k={};function g(e){return k["mode-".concat(e)]||v}function O(e){return j.apply(this,arguments)}function j(){return(j=Object(n.a)(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.getSpecialInspectTemplateMode(t);case 2:return r=e.sent,e.abrupt("return",g(r));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}_.keys().forEach((function(e){var t=_(e).default,r=e.replace(/(\.\/|\.js)/g,""),n=e.match(/mode\-(\d+)\.js$/),c=n&&n[1];k[r]=new t(c)}))},"29f8":function(e,t,r){"use strict";r.d(t,"a",(function(){return u}));r("6a61");var n=r("2e91"),c=r("0e4d"),a=r("94ef"),i=r("fc9f"),u=function(){function e(){Object(c.a)(this,e)}var t;return Object(a.a)(e,[{key:"getBatchTemplateMode",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t="select t.mode from batch b \n      join special_inspect_template t on t.id = ifnull(b.template_id,'')\n      where b.id = '".concat(e,"'");return i.a.queryOne(t)}},{key:"getSpecialInspectBatchId",value:function(e){var t="select batch_id from special_inspect where id = '".concat(e,"'");return i.a.queryOne(t)}},{key:"getBatchSql",value:function(e,t){return"select b.*, \n      ifnull(temp.mode, '1') as mode,\n      u.name as created_by_name\n      from batch b\n      join special_inspect_template temp on temp.id = ifnull(b.template_id,'')\n\t\t\tjoin user u on u.id = b.created_by\n      where b.proj_id = '".concat(e,"' and ifnull(b.template_id,'') <> '' \n      and (b.is_closed is null or b.is_closed != 1) \n      and b.batch_type = '专项巡检' \n      and (\n        exists (select 1 from batch_user bu where bu.batch_id = b.id and bu.user_id = '").concat(t,"')\n        or exists (select 1 from batch_cc bc where bc.batch_id = b.id and bc.user_id = '").concat(t,"')\n        or exists (select value from global_storage where key= 'is-company-leader' and value = 1)\n      )\n      order by created_on desc")}},{key:"getBatchList",value:function(e,t){var r=this.getBatchSql(e,t);return i.a.query(r)}},{key:"getFirstBatch",value:function(e,t){var r=this.getBatchSql(e,t);return i.a.queryOne(r)}},{key:"getBatchById",value:function(e){var t="select b.*, up.name as proj_name, \n      sit.id as temp_id, sit.name as temp_name, sit.mode as temp_mode, sit.mode as mode, \n\t\t\tu.name as created_by_name, u.mobile as created_by_mobile, u.is_im_user as is_im_user \n      from batch b \n\t\t\tleft join user_project up on b.proj_id = up.id \n\t\t\tleft join special_inspect_template sit on b.template_id = sit.id\n\t\t\tleft join user u on u.id = b.created_by \n\t\t\twhere b.id = '".concat(e,"'");return i.a.queryOne(t)}},{key:"getBatchContracts",value:function(e){var t="select cc.id as id, cc.name as name, cc.code as code, sc.remark as remark, \n\t\t\t(select count(*) from checkquality_problem cp where cp.batch_id = sc.batch_id and cp.contract_id = cc.id ) as problemNum \n\t\t\tfrom special_inspect_batch_contracts sc \n\t\t\tleft join contractor_contracts cc on cc.id = sc.contract_id \n\t\t\twhere sc.batch_id = '".concat(e,"' \n      order by sc.sort");return i.a.query(t)}},{key:"getTemplateList",value:function(){return i.a.query("select * from special_inspect_template \n      where is_display != 0 \n      order by update_timestamp desc")}},{key:"getContractList",value:function(e){var t="select ccs.* from section s\n\t\t\tjoin section_contractor sc on sc.bidsection_id = s.id\n\t\t\tjoin contractor c on c.id = sc.contractor_id\n\t\t\tjoin contractor_contracts ccs on ccs.contractor_id = c.id\n\t\t\twhere s.proj_id = '".concat(e,"'\n\t\t\tgroup by ccs.id order by c.name_py, ccs.sort");return i.a.query(t)}},{key:"getIndexList",value:function(e){var t="select * from special_inspect\n\t\t  where batch_id = '".concat(e,"' \n      order by checkitem_code");return i.a.query(t)}},{key:"getSpecialInspectDescs",value:function(e){var t="select * from special_inspect_checkitem_desc where checkitem_id in \n    (select checkitem_id from special_inspect where batch_id = '".concat(e,"')\n    order by sort");return i.a.query(t)}},{key:"getSpecialInspectData",value:function(e){var t="select si.*, \n      u.name as checker_name, u.mobile as checker_mobile, u.is_im_user as check_is_im_user\n      from special_inspect si\n      left join user u on u.id = si.checker\n      where si.id = '".concat(e,"'");return i.a.queryOne(t)}},{key:"updateSpecialInspectData",value:function(e){return i.a.update("special_inspect",e,{id:e.id})}},{key:"getDraftProblemByBatchId",value:function(e){if(void 0===e)return $q.reject("批次id不能为空");Array.isArray(e)||(e=[e]);var t="'"+e.join("','")+"'",r='select a.id from checkquality_problem a \n\t\tjoin special_inspect si on a.biz_id = si.id \n\t\tjoin batch b on b.id = si.batch_id and b.status = "检查完毕" \n\t\twhere a.batch_id in ('.concat(t,") and a.status in ('草稿', '合格草稿', '不合格草稿')");return i.a.query(r)}},{key:"deleteProblemById",value:(t=Object(n.a)(regeneratorRuntime.mark((function e(t){var r,n,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Array.isArray(t)||(t=[t]),r="'"+t.join("','")+"'",n=["delete from checkquality_problem_fpinfo where checkquality_problem_id in (".concat(r,")"),"delete from checkquality_problem_log where checkquality_problem_id in (".concat(r,")"),"delete from checkquality_cc where checkquality_problem_id in (".concat(r,")"),"delete from checkquality_repair where checkquality_problem_id in (".concat(r,")"),"delete from checkquality_reinspect where checkquality_problem_id in (".concat(r,")"),"delete from checkquality_problem where id in (".concat(r,")")],c=0;case 4:if(!(c<n.length)){e.next=10;break}return e.next=7,i.a.executeSql(n[c]);case 7:c++,e.next=4;break;case 10:case"end":return e.stop()}}),e)}))),function(e){return t.apply(this,arguments)})},{key:"filterIdsByBatchId",value:function(e,t,r){Array.isArray(t)||(t=[t]);var n="'"+t.join("','")+"'",c="select id from ".concat(e," where batch_id = '").concat(r,"' and id in (").concat(n,")");return i.a.query(c)}},{key:"getOldRouteQuery",value:function(e){var t="select si.batch_id, si.id as special_inspect_id, si.checkitem_id, \n      (select mode from special_inspect_template sit where sit.id = b.template_id) as mode,\n      (select id from checkquality_problem cp where cp.biz_id = '".concat(e,"' order by cp.download_time desc limit 1) as problem_id\n      from special_inspect si \n      join batch b on b.id = si.batch_id\n      where si.id = '").concat(e,"'");return i.a.queryOne(t)}},{key:"getRootSpecialInspectId",value:function(e){var t="SELECT id,checkitem_parent_id FROM special_inspect si\n      WHERE EXISTS (\n        SELECT 1 FROM special_inspect si2 \n        WHERE si2.id = '".concat(e,"' AND si.checkitem_id = si2.checkitem_parent_id AND si.batch_id = si2.batch_id\n      )");return i.a.queryOne(t)}},{key:"updateSpecialInspectAll",value:function(e,t){return i.a.update("special_inspect",t,e)}},{key:"selectSpecialInspect",value:function(e){return i.a.queryOne("select * from special_inspect where id = ?",[e])}},{key:"selectSpecialInspectPlaceCheckitem",value:function(e){return i.a.queryOne("select * from special_inspect_place_checkitem where id = ?",[e])}}]),e}()},"391cb":function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return p}));r("2b45"),r("fc58"),r("6a61");var n=r("2e91"),c=r("0e4d"),a=r("94ef"),i=r("76ff"),u=r("4b67"),o=r("d703"),s=r("937e"),l=r("a044");r("e2a7");function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Object(o.a)(e);if(t){var c=Object(o.a)(this).constructor;r=Reflect.construct(n,arguments,c)}else r=n.apply(this,arguments);return Object(u.a)(this,r)}}var p=function(e){Object(i.a)(u,e);var t,r=f(u);function u(){return Object(c.a)(this,u),r.apply(this,arguments)}return Object(a.a)(u,[{key:"getIndexList",value:(t=Object(n.a)(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.Repositories.getIndexList(t);case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"batchCheck",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=t.some((function(e){return e.status===l.u}));if(!r)return{code:1,msg:"请至少完成一个评分表数据录入"}}}]),u}(s.a)},"3abd":function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return j}));r("5ab2"),r("e10e"),r("2b45"),r("fc58"),r("cc57");var n=r("4c09"),c=r("28f8"),a=(r("163d"),r("6d57"),r("6a61"),r("2e91")),i=r("0e4d"),u=r("94ef"),o=r("76ff"),s=r("4b67"),l=r("d703"),f=r("48f4"),p=r("ed08"),d=r("937e"),h=r("966e"),m=r("7cb8"),b=r("3bd5"),y=r("1b7e"),v=r("162a"),_=r("a18c");function k(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function g(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?k(Object(r),!0).forEach((function(t){Object(c.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):k(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function O(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Object(l.a)(e);if(t){var c=Object(l.a)(this).constructor;r=Reflect.construct(n,arguments,c)}else r=n.apply(this,arguments);return Object(s.a)(this,r)}}var j=function(e){Object(o.a)(I,e);var t,r,c,s,l,d,k,j,R,x,w=O(I);function I(){return Object(i.a)(this,I),w.apply(this,arguments)}return Object(u.a)(I,[{key:"getIndexList",value:(x=Object(a.a)(regeneratorRuntime.mark((function e(t){var r,n,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getBatchPlaces(t);case 2:return r=e.sent,e.next=5,this.getMode11PlacesEndItemTotal(t);case 5:return n=e.sent,c={},(n||[]).forEach((function(e){c[e.id]=e})),(r||[]).forEach((function(e){var t=c[e.id];e.count=t&&t.count||0,e.done=t&&t.done||0,e.unqualified=t&&t.unqualified||0,e.draft=t&&t.draft||0})),e.abrupt("return",r);case 10:case"end":return e.stop()}}),e,this)}))),function(e){return x.apply(this,arguments)})},{key:"getBatchPlaces",value:function(e){return this.Repositories.getBatchPlaces(e)}},{key:"getMode11PlacesEndItemTotal",value:function(e){return this.Repositories.getMode11EndItems(e).then((function(e){var t=[],r={};return(e||[]).forEach((function(e){r[e.place_id]||(r[e.place_id]={id:e.place_id,name:e.place_name,count:0,done:0,unqualified:0,draft:0},t.push(r[e.place_id])),r[e.place_id].count+=1,"合格"===e.status&&(r[e.place_id].done+=1),"不合格"===e.status&&(r[e.place_id].done+=1,r[e.place_id].unqualified+=1),"草稿"===e.status&&(r[e.place_id].draft+=1)})),t}))}},{key:"hasBatchCheckitem",value:function(e){return this.Repositories.hasBatchCheckitem(e).then((function(e){return!!e}))}},{key:"addBatchPlace",value:(R=Object(a.a)(regeneratorRuntime.mark((function e(t,r,n){var c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&r&&n){e.next=2;break}return e.abrupt("return",new Error("addBatchPlace 缺少参数"));case 2:return e.next=4,this.hasBatchCheckitem(r);case 4:if(e.sent){e.next=7;break}return e.abrupt("return",Promise.reject("批次缺少检查项"));case 7:return c={id:p.a.uuid(),name:t.fullname||"",batch_id:r,proj_id:n,building_id:t.building&&t.building.id||"",unit:t.unit&&t.unit.id||"",floor:t.floor&&t.floor.id||"",room_id:t.room&&t.room.id||"",regist_date:p.a.now()},e.next=10,this.Repositories.addBatchPlace(c);case 10:return e.next=12,this.addBatchPlaceCheckitem(c.id,r,n);case 12:return e.next=14,f.default.addSyncGroup([["special_inspect_place",c.id],["special_inspect_place_checkitem",c.id]]);case 14:case"end":return e.stop()}}),e,this)}))),function(e,t,r){return R.apply(this,arguments)})},{key:"updateBatchPlace",value:(j=Object(a.a)(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.Repositories.updateBatchPlace(t);case 2:return e.next=4,f.default.addSyncGroup([["special_inspect_place",t.id]]);case 4:case"end":return e.stop()}}),e,this)}))),function(e){return j.apply(this,arguments)})},{key:"deleteBatchPlace",value:(k=Object(a.a)(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t||!t.download_time){e.next=8;break}if(y.a.getHasNetwork()){e.next=4;break}return e.abrupt("return",Promise.reject("当前网络无法同步数据"));case 4:return e.next=6,v.a.post("/special-inspect-place/delete",null,{id:t.id});case 6:e.next=9;break;case 8:return e.abrupt("return");case 9:return e.next=11,this.Repositories.deleteBatchPlace(t.id);case 11:return e.next=13,f.default.removeSyncGroup(t.id);case 13:case"end":return e.stop()}}),e,this)}))),function(e){return k.apply(this,arguments)})},{key:"addBatchPlaceCheckitem",value:(d=Object(a.a)(regeneratorRuntime.mark((function e(t,r,n){var c,a,i,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.Repositories.getBatchAllSpecialInspect(r);case 2:if((c=e.sent)&&c.length){e.next=5;break}return e.abrupt("return",new Error("批次没有专项巡检检查项"));case 5:a=0;case 6:if(!(a<c.length)){e.next=14;break}return i=c[a],u={id:p.a.uuid(),batch_id:r,proj_id:n,place_id:t,special_inspect_id:i.id,status:"未设置",deduction:"",remark:"",image_file:"",checker:"",check_time:""},e.next=11,this.Repositories.addBatchPlaceCheckitem(u);case 11:a++,e.next=6;break;case 14:case"end":return e.stop()}}),e,this)}))),function(e,t,r){return d.apply(this,arguments)})},{key:"getTotalData",value:function(e,t,r){var n=r&&r.id;switch(r&&r.template_extension&&r.template_extension.mode11_passrate_mode||1){case 2:return this.getMode2TotalData(n);default:return this.getMode1TotalData(n)}}},{key:"getMode1TotalData",value:(l=Object(a.a)(regeneratorRuntime.mark((function e(t){var r,n,c,a,i,u,o,s,l,f,p,d=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.Repositories.getAllDoneData(t);case 2:for(a in r=e.sent,n={},(r||[]).forEach((function(e){n[e.special_inspect_id]||(n[e.special_inspect_id]={total:0,score:e.score,deduction:0,qualified:0}),n[e.special_inspect_id].total+=1,n[e.special_inspect_id].deduction+=Number(e.deduction)||0,"合格"===e.status&&(n[e.special_inspect_id].qualified+=1)})),c=[],n)c.push(g(g({},n[a]),{},{id:a}));return i=0,u=0,o=Boolean(c.length),l="",c.forEach((function(e){var t=e.qualified/e.total;i+=t*e.score-e.deduction,u+=e.score})),s=u?Object(h.a)(i/u,2):"",o&&(f=[],p=[],c.forEach((function(e){var t=Object(h.a)(e.qualified/e.total,2);f.push("(".concat(t,"*").concat(e.score,"-").concat(d.formatFloat(e.deduction),")")),p.push(e.score)})),l+="=(".concat(f.join("+"),")/(").concat(p.join("+"),")=").concat(s)),e.abrupt("return",{title:"当前综合得分",note:"",result:s,hasResult:o,formulaText:"当前综合得分=∑（已检项的合格率*满分值-倒扣分）/∑（已检项的满分值）"+l});case 15:case"end":return e.stop()}}),e,this)}))),function(e){return l.apply(this,arguments)})},{key:"getMode2TotalData",value:(s=Object(a.a)(regeneratorRuntime.mark((function e(t){var r,c,a,i,u,o,s,l,f,p,d,b,y,v=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.Repositories.getAllItems(t);case 2:return r=e.sent,e.next=5,this.Repositories.getAllDoneData(t);case 5:return c=e.sent,a={},(r||[]).forEach((function(e){try{var t=JSON.parse(e.checkitem_extension);e.isDeductionItem=!!t.is_deduction_item}catch(t){e.isDeductionItem=!1}a[e.checkitem_id]=e})),(c||[]).forEach((function(e){a[e.checkitem_id]&&(a[e.checkitem_id].problems||(a[e.checkitem_id].problems=[]),a[e.checkitem_id].problems.push(e))})),((i=Object(m.c)(r,{key:"checkitem_id",relationKey:"checkitem_parent_id"}))||[]).forEach((function(e){var t=v.getItemAllProblems(e,(function(e){return!e.isDeductionItem})),r=t.filter((function(e){return"合格"===e.status})),c=t.filter((function(e){return"不合格"===e.status})).reduce((function(e,t){return e+(t.deduction||0)}),0),a=v.getItemAllProblems(e,(function(e){return e.isDeductionItem})),i=a.reduce((function(e,t){return e+(t.deduction||0)}),0);e.allProblems=[].concat(Object(n.a)(t),Object(n.a)(a)),t&&t.length?(e.rejection=!1,e.passrate=r.length/t.length,e.deductionTotal=v.formatFloat(c),e.ducuctionItemTotal=v.formatFloat(i),e.result=e.score*e.passrate-e.deductionTotal-e.ducuctionItemTotal):e.rejection=!0})),u=(i||[]).filter((function(e){return!e.rejection})),o=0,s=0,l=Boolean(u.length),p="",d=i.some((function(e){return e.allProblems&&e.allProblems.length})),u.forEach((function(e){o+=e.result,s+=e.score})),f=l?Object(h.a)(o/s,2):d?"0.00%":"",l&&(b=[],y=[],u.forEach((function(e){var t=Object(h.a)(e.passrate,2);b.push("(".concat(t,"*").concat(e.score,"-").concat(e.deductionTotal,"-").concat(e.ducuctionItemTotal,")")),y.push(e.score)})),p+="=(".concat(b.join("+"),")/(").concat(y.join("+"),")=").concat(f)),e.abrupt("return",{title:"综合扣分",note:"",result:f,hasResult:l,formulaText:"综合扣分=Σ（已检查一级项合格率*已检一级项满分值-Σ已检一级项内末级项倒扣分-Σ已检一级项内带星末级项倒扣分）/Σ（已检查一级项满分）"+p});case 21:case"end":return e.stop()}}),e,this)}))),function(e){return s.apply(this,arguments)})},{key:"getItemAllProblems",value:function(e,t){var r=this,n=[];return e.children&&e.children.length?e.children.forEach((function(e){n=n.concat(r.getItemAllProblems(e,t))})):t?t(e)&&(n=e.problems||[]):n=e.problems||[],n}},{key:"getBatchPlace",value:function(e){return this.Repositories.getBatchPlace(e)}},{key:"getBatchPlaceCheckitems",value:function(e){return this.Repositories.getBatchPlaceCheckitems(e).then((function(e){if(!e||!e.length)return[];var t={};e.forEach((function(e){try{e.checkitem_extension=JSON.parse(e.checkitem_extension||"{}")}catch(t){e.checkitem_extension={}}e.rule=e.checkitem_extension.rating_rule||"",e.isDeductionItem=e.checkitem_extension.is_deduction_item||0,t[e.checkitem_id]=e})),e.forEach((function(e){var r=e&&e.checkitem_parent_id;r&&t[r]&&(t[r].children||(t[r].children=[]),t[r].children.push(e),t[r].unqualifiedNum||(t[r].unqualifiedNum=0),"不合格"===e.status&&(t[r].unqualifiedNum+=1))}));var r=e.filter((function(e){return!e.checkitem_parent_id}));return Object(m.n)(r),r}))}},{key:"getSpecialInspectData",value:(c=Object(a.a)(regeneratorRuntime.mark((function e(t,r){var n,c,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.Repositories.getSpecialInspectData(t,r);case 2:if(n=e.sent){e.next=5;break}return e.abrupt("return",{});case 5:return c=Object(m.l)(n.checkitem_extension)||{},a=Object(m.l)(n.image_file)||[],e.abrupt("return",g(g({},n),{},{checkitem:{id:n.checkitem_id,name:n.checkitem_name,code:n.checkitem_code,parentId:n.checkitem_parent_id,fullname:n.checkitem_full_name,extension:c},images:a,checker:{id:n.checker,name:n.checker_name,mobile:n.checker_mobile,is_im_user:n.checker_is_im_user}}));case 8:case"end":return e.stop()}}),e,this)}))),function(e,t){return c.apply(this,arguments)})},{key:"updateSpecialInspectData",value:function(e){if(!e||!e.id)return Promise.reject("保存测区检查项数据，参数错误");var t={id:e.id};return void 0!==e.status&&(t.status=e.status||""),void 0!==e.checker&&(t.checker=e.checker||""),void 0!==e.check_time&&(t.check_time=e.check_time||""),void 0!==e.deduction&&(t.deduction=e.deduction),void 0!==e.images&&(t.image_file=Object(m.m)(e.images)||"[]"),void 0!==e.remark&&(t.remark=e.remark||""),"草稿"===t.status?this.saveDraftToMmkv(t,"special_inspect_place_checkitem"):this.removeDraftFromMmkv(t,"special_inspect_place_checkitem"),this.Repositories.updateSpecialInspectData(t)}},{key:"submitSpecialInspectData",value:(r=Object(a.a)(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&t.id){e.next=2;break}return e.abrupt("return",new Error("提交测区检查项数据，参数错误"));case 2:return t.checker=b.a.getUser().user_id,t.check_time=p.a.now(),e.next=6,this.updateSpecialInspectData(t);case 6:return e.next=8,f.default.addSyncGroup([["special_inspect_place_checkitem",t.id,"id"]]);case 8:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"batchCheck",value:(t=Object(a.a)(regeneratorRuntime.mark((function e(t,r){var n,c,a,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getWaitUploadCount(t.id);case 2:if(!e.sent){e.next=5;break}return e.abrupt("return",{code:1,msg:"还有问题正在上传，请等待问题上传完毕"});case 5:if(n=r.filter((function(e){return 0===e.done})),c=r.filter((function(e){return 0!==e.draft})),!n.length){e.next=10;break}return a=n.map((function(e){return e.name})).join("、"),e.abrupt("return",{code:1,msg:"".concat(a,"未检查，请先处理再提交")});case 10:if(!c.length){e.next=13;break}return i=c.map((function(e){return e.name})).join("、"),e.abrupt("return",{code:1,msg:"".concat(i,"有草稿数据，请先处理再提交")});case 13:case"end":return e.stop()}}),e,this)}))),function(e,r){return t.apply(this,arguments)})},{key:"gotoProblemList",value:function(e,t,r){this.gotoOldProblemList({batchId:e,placeId:r})}},{key:"gotoOldProblemList",value:function(e){_.a.push({path:"special-inspect-problem-pure-list",query:{batchId:e.batchId,placeId:e.placeId}})}}]),I}(d.a)},"3c16e":function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return h}));r("2b45"),r("fc58"),r("6d57"),r("6a61");var n=r("2e91"),c=r("0e4d"),a=r("94ef"),i=r("76ff"),u=r("4b67"),o=r("d703"),s=r("937e"),l=r("a044"),f=r("7bac"),p=r("7cb8");function d(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Object(o.a)(e);if(t){var c=Object(o.a)(this).constructor;r=Reflect.construct(n,arguments,c)}else r=n.apply(this,arguments);return Object(u.a)(this,r)}}var h=function(e){Object(i.a)(u,e);var t,r=d(u);function u(){return Object(c.a)(this,u),r.apply(this,arguments)}return Object(a.a)(u,[{key:"getIndexList",value:(t=Object(n.a)(regeneratorRuntime.mark((function e(t){var r,n,c,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.Repositories.getIndexList(t);case 2:return r=e.sent,n=[],e.next=6,f.a.getUserKey(l.a);case 6:if(!e.sent){e.next=12;break}return e.next=10,this.getSpecialInspectDescs(t);case 10:(n=e.sent)&&n.length&&(c={},r.forEach((function(e){c[e.checkitem_id]=e})),n.forEach((function(e){var t=c[e.checkitem_id];t&&(t.siblings||(t.siblings=[]),t.siblings.push(e))})));case 12:return a=Object(p.c)(r,{key:"checkitem_id",relationKey:"checkitem_parent_id",setLevel:!0}),e.abrupt("return",{tree:a,list:r});case 14:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"onClickEndNode",value:function(e,t,r){e.status===l.y?this.routeToOldSetPass(e):e.problemNum&&this.routeToOldProblemList(e,r)}},{key:"routeToEdit",value:function(e){this.routeToOldProblemEdit(e)}},{key:"routeToView",value:function(e){this.routeToOldProblemView(e)}},{key:"changeSpecialInspectStatus",value:function(e,t){t===l.y&&this.routeToOldSetPass(e)}},{key:"gotoProblemList",value:function(e,t,r){this.gotoOldProblemList({batch_id:e,mode:this.mode})}}]),u}(s.a)},"3ddc":function(e,t,r){"use strict";r.d(t,"a",(function(){return l}));r("5ab2"),r("6d57"),r("e10e"),r("163d");var n=r("28f8"),c=(r("6a61"),r("2e91")),a=r("0e4d"),i=r("94ef"),u=r("a18c");function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){Object(n.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var l=function(){function e(){Object(a.a)(this,e)}var t,r,n,o,l;return Object(i.a)(e,[{key:"routeToOldProblemEdit",value:(l=Object(c.a)(regeneratorRuntime.mark((function e(t){var r,n,c,a,i,o,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t&&t.id,e.next=3,this.getOldRouteQuery(r);case 3:n=e.sent,c=n.batch_id,a=n.special_inspect_id,i=n.checkitem_id,o=n.mode,s=n.root_id,u.a.push({path:"/special-inspect-problem-edit",query:{batchId:c,specialInspectId:a,checkItemId:i,mode:o,rootId:s}});case 6:case"end":return e.stop()}}),e,this)}))),function(e){return l.apply(this,arguments)})},{key:"routeToOldProblemView",value:(o=Object(c.a)(regeneratorRuntime.mark((function e(t){var r,n,c,a,i,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t&&t.id,e.next=3,this.getOldRouteQuery(r);case 3:n=e.sent,c=n.special_inspect_id,a=n.checkitem_id,i=n.mode,o=n.problem_id,u.a.push({path:"/special-inspect-problem-detail",query:{specialInspectId:c,problem_id:o,checkItemId:a,mode:i}});case 6:case"end":return e.stop()}}),e,this)}))),function(e){return o.apply(this,arguments)})},{key:"routeToOldSetPass",value:(n=Object(c.a)(regeneratorRuntime.mark((function e(t){var r,n,c,a,i,o,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t&&t.id,e.next=3,this.getOldRouteQuery(r);case 3:n=e.sent,c=n.batch_id,a=n.special_inspect_id,i=n.checkitem_id,o=n.mode,s=n.root_id,u.a.push({path:"/special-inspect-pass",query:{batchId:c,specialInspectId:a,checkItemId:i,mode:o,rootId:s}});case 6:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"routeToOldProblemList",value:(r=Object(c.a)(regeneratorRuntime.mark((function e(t,r){var n,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t&&t.id,e.next=3,this.getOldRouteQuery(n);case 3:c=e.sent,this.gotoOldProblemList(s(s({},c),{},{editable:r}));case 5:case"end":return e.stop()}}),e,this)}))),function(e,t){return r.apply(this,arguments)})},{key:"gotoOldProblemList",value:function(e){u.a.push({path:"/special-inspect-problem-list",query:{batchId:e.batch_id||"",specialInspectId:e.special_inspect_id||"",checkItemId:e.checkitem_id||"",mode:e.mode||"",rootId:e.root_id||"",editable:Number(e.editable||"")}})}},{key:"getOldRouteQuery",value:(t=Object(c.a)(regeneratorRuntime.mark((function e(t){var r,n,c,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.Repositories.getOldRouteQuery(t);case 2:r=e.sent,c=t;case 4:if(n){e.next=11;break}return e.next=7,this.Repositories.getRootSpecialInspectId(c);case 7:(a=e.sent)&&a.id?a.checkitem_parent_id?c=a.id:n=a.id:n=c,e.next=4;break;case 11:return e.abrupt("return",s(s({},r),{},{root_id:n}));case 12:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})}]),e}()},"4b2e":function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return f}));r("2b45"),r("fc58");var n=r("0e4d"),c=r("94ef"),a=r("76ff"),i=r("4b67"),u=r("d703"),o=r("937e"),s=r("a044");function l(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Object(u.a)(e);if(t){var c=Object(u.a)(this).constructor;r=Reflect.construct(n,arguments,c)}else r=n.apply(this,arguments);return Object(i.a)(this,r)}}var f=function(e){Object(a.a)(r,e);var t=l(r);function r(){return Object(n.a)(this,r),t.apply(this,arguments)}return Object(c.a)(r,[{key:"onClickEndNode",value:function(e,t,r){e.status===s.y?this.routeToOldSetPass(e):e.problemNum&&this.routeToOldProblemList(e,r)}},{key:"routeToEdit",value:function(e){this.routeToOldProblemEdit(e)}},{key:"routeToView",value:function(e){this.routeToOldProblemView(e)}},{key:"changeSpecialInspectStatus",value:function(e,t){t===s.y&&this.routeToOldSetPass(e)}},{key:"gotoProblemList",value:function(e,t,r){this.gotoOldProblemList({batch_id:e,mode:this.mode})}}]),r}(o.a)},"55dc":function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return l}));r("2b45"),r("fc58");var n=r("0e4d"),c=r("94ef"),a=r("76ff"),i=r("4b67"),u=r("d703"),o=r("fc9f");function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Object(u.a)(e);if(t){var c=Object(u.a)(this).constructor;r=Reflect.construct(n,arguments,c)}else r=n.apply(this,arguments);return Object(i.a)(this,r)}}var l=function(e){Object(a.a)(r,e);var t=s(r);function r(){return Object(n.a)(this,r),t.apply(this,arguments)}return Object(c.a)(r,[{key:"getIndexList",value:function(e){var t="select si.*, si.checkitem_name as name,\n\t\t(select count(*) from checkquality_problem cp where cp.biz_id = si.id ) as problemNum,\n\t\t(select sum(deduction) from checkquality_problem cp1 \n      where batch_type = '专项巡检' and cp1.biz_id = si.id and cp1.status != '草稿' and cp1.status != '已关闭') as deduction \n\t\tfrom special_inspect si \n\t\twhere si.batch_id = '".concat(e,"' order by si.checkitem_code");return o.a.query(t)}}]),r}(r("29f8").a)},6268:function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return f}));r("2b45"),r("fc58");var n=r("0e4d"),c=r("94ef"),a=r("76ff"),i=r("4b67"),u=r("d703"),o=r("937e"),s=r("a044");function l(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Object(u.a)(e);if(t){var c=Object(u.a)(this).constructor;r=Reflect.construct(n,arguments,c)}else r=n.apply(this,arguments);return Object(i.a)(this,r)}}var f=function(e){Object(a.a)(r,e);var t=l(r);function r(){return Object(n.a)(this,r),t.apply(this,arguments)}return Object(c.a)(r,[{key:"onClickEndNode",value:function(e,t,r){e.status===s.y?this.routeToOldSetPass(e):e.problemNum&&this.routeToOldProblemList(e,r)}},{key:"routeToEdit",value:function(e){this.routeToOldProblemEdit(e)}},{key:"routeToView",value:function(e){this.routeToOldProblemView(e)}},{key:"changeSpecialInspectStatus",value:function(e,t){t===s.y&&this.routeToOldSetPass(e)}},{key:"gotoProblemList",value:function(e,t,r){this.gotoOldProblemList({batch_id:e,mode:this.mode})}}]),r}(o.a)},"66f5":function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return l}));r("2b45"),r("fc58");var n=r("0e4d"),c=r("94ef"),a=r("76ff"),i=r("4b67"),u=r("d703"),o=r("fc9f");function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Object(u.a)(e);if(t){var c=Object(u.a)(this).constructor;r=Reflect.construct(n,arguments,c)}else r=n.apply(this,arguments);return Object(i.a)(this,r)}}var l=function(e){Object(a.a)(r,e);var t=s(r);function r(){return Object(n.a)(this,r),t.apply(this,arguments)}return Object(c.a)(r,[{key:"getIndexList",value:function(e){var t="select si.*, si.checkitem_name as name,\n\t\t(select sum(cp.redline_deduction) from checkquality_problem cp \n      where batch_type = '专项巡检' and cp.biz_id = si.id and cp.status != '草稿' and cp.status != '已关闭' ) as redline_deduction, \n\t\t(select count(*) from checkquality_problem cp where cp.biz_id = si.id ) as problemNum,\n\t\t(select sum(deduction) from checkquality_problem cp1 \n      where batch_type = '专项巡检' and cp1.biz_id = si.id and cp1.status != '草稿' and cp1.status != '已关闭') as deduction \n\t\tfrom special_inspect si \n\t\twhere si.batch_id = '".concat(e,"' order by si.checkitem_code");return o.a.query(t)}}]),r}(r("29f8").a)},"743d":function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return o}));r("2b45"),r("fc58");var n=r("0e4d"),c=r("76ff"),a=r("4b67"),i=r("d703");function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Object(i.a)(e);if(t){var c=Object(i.a)(this).constructor;r=Reflect.construct(n,arguments,c)}else r=n.apply(this,arguments);return Object(a.a)(this,r)}}var o=function(e){Object(c.a)(r,e);var t=u(r);function r(){return Object(n.a)(this,r),t.apply(this,arguments)}return r}(r("29f8").a)},7647:function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return f}));r("2b45"),r("fc58"),r("06a2"),r("6d57"),r("6a61");var n=r("2e91"),c=r("0e4d"),a=r("94ef"),i=r("76ff"),u=r("4b67"),o=r("d703"),s=r("fc9f");function l(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Object(o.a)(e);if(t){var c=Object(o.a)(this).constructor;r=Reflect.construct(n,arguments,c)}else r=n.apply(this,arguments);return Object(u.a)(this,r)}}var f=function(e){Object(i.a)(o,e);var t,r,u=l(o);function o(){return Object(c.a)(this,o),u.apply(this,arguments)}return Object(a.a)(o,[{key:"getBatchPlaces",value:function(e){var t="select * from special_inspect_place where batch_id = '".concat(e,"'\n      order by regist_date");return s.a.query(t)}},{key:"getMode11EndItems",value:(r=Object(n.a)(regeneratorRuntime.mark((function e(t){var r,n,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getBatchEndSpecialInspectIds(t);case 2:return r=e.sent,n=r&&r.length?" and sipc.special_inspect_id in ('".concat(r.join("','"),"')"):"",c="select sipc.*, sip.name as place_name\n      from special_inspect_place_checkitem sipc\n      join special_inspect_place sip on sip.id = sipc.place_id\n      where sipc.batch_id = ? ".concat(n),e.abrupt("return",s.a.query(c,[t]));case 6:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"getBatchEndSpecialInspectIds",value:(t=Object(n.a)(regeneratorRuntime.mark((function e(t){var r,n,c,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="select * from special_inspect where batch_id = '".concat(t,"'"),e.next=3,s.a.query(r);case 3:if((n=e.sent)&&n.length){e.next=6;break}return e.abrupt("return",[]);case 6:return c={},n.forEach((function(e){e.checkitem_parent_id&&(c[e.checkitem_parent_id]=1)})),a=n.filter((function(e){return!c[e.checkitem_id]})),e.abrupt("return",a.map((function(e){return e.id})));case 10:case"end":return e.stop()}}),e)}))),function(e){return t.apply(this,arguments)})},{key:"hasBatchCheckitem",value:function(e){var t="select 1 from special_inspect where batch_id = '".concat(e,"'");return s.a.queryOne(t)}},{key:"addBatchPlace",value:function(e){return s.a.insertObject("special_inspect_place",e)}},{key:"updateBatchPlace",value:function(e){return s.a.update("special_inspect_place",e,{id:e.id})}},{key:"getBatchPlace",value:function(e){return s.a.queryOne("select * from special_inspect_place where id = ?",[e])}},{key:"deleteBatchPlace",value:function(e){return Promise.all([s.a.executeSql("delete from special_inspect_place where id = ?",[e]),s.a.executeSql("delete from checkquality_problem where biz_children_id in\n      (select id from special_inspect_place_checkitem where place_id = ?)",[e]),s.a.executeSql("delete from special_inspect_place_checkitem where place_id = ?",[e])])}},{key:"addBatchPlaceCheckitem",value:function(e){return s.a.insertObject("special_inspect_place_checkitem",e)}},{key:"getBatchAllSpecialInspect",value:function(e){var t="select * from special_inspect where batch_id = '".concat(e,"'");return s.a.query(t)}},{key:"getBatchPlaceCheckitems",value:function(e){return s.a.query("select sipc.*, si.checkitem_name as name,\n      si.checkitem_id,\n      si.checkitem_code,\n      si.checkitem_name,\n      si.checkitem_full_name,\n      si.checkitem_parent_id,\n      si.checkitem_extension\n      from special_inspect_place_checkitem sipc\n      join special_inspect si on si.id = sipc.special_inspect_id\n      where sipc.place_id = ?\n      order by si.checkitem_code",[e])}},{key:"getAllDoneData",value:function(e){var t="select sipc.*,\n      si.checkitem_id, si.checkitem_parent_id, si.score \n      from special_inspect_place_checkitem sipc\n      join special_inspect si on si.id = sipc.special_inspect_id\n      where (sipc.status = '合格' or sipc.status = '不合格') and sipc.batch_id = '".concat(e,"'\n      order by si.checkitem_code");return s.a.query(t)}},{key:"getAllItems",value:function(e){var t="select * from special_inspect \n      where batch_id = '".concat(e,"'\n      order by checkitem_code");return s.a.query(t)}},{key:"getNotEndItems",value:function(e){var t="select * from special_inspect\n      where checkitem_id in (select checkitem_parent_id from special_inspect where batch_id = '".concat(e,"')\n        or (ifnull(checkitem_parent_id, '') = '' and batch_id = '").concat(e,"')\n      order by checkitem_code");return s.a.query(t)}},{key:"getSpecialInspectData",value:function(e,t){var r="select sipc.*,\n      si.checkitem_id,\n      si.checkitem_code,\n      si.checkitem_name,\n      si.checkitem_full_name,\n      si.checkitem_parent_id,\n      si.checkitem_extension,\n      u.name as checker_name, u.mobile as checker_mobile, u.is_im_user as check_is_im_user\n      from special_inspect_place_checkitem sipc\n      join special_inspect si on si.id = sipc.special_inspect_id\n      left join user u on u.id = sipc.checker\n      where sipc.special_inspect_id = '".concat(e,"' and sipc.place_id = '").concat(t,"'");return s.a.queryOne(r)}},{key:"updateSpecialInspectData",value:function(e){return s.a.update("special_inspect_place_checkitem",e,{id:e.id})}},{key:"getPlaceSpecialInspectData",value:function(e,t){return s.a.queryOne("select sipc.*,\n      si.checkitem_id,\n      si.checkitem_code,\n      si.checkitem_name,\n      si.checkitem_full_name,\n      si.checkitem_parent_id,\n      si.checkitem_extension,\n      u.name as checker_name,\n      u.mobile as checker_mobile,\n      u.is_im_user as check_is_im_user\n      from special_inspect_place_checkitem sipc\n      join special_inspect si on si.id = sipc.special_inspect_id\n      left join user u on u.id = sipc.checker\n      where sipc.special_inspect_id = ? and sipc.place_id = ?",[e,t])}},{key:"updatePlaceSpecialInspectData",value:function(e){return s.a.update("special_inspect_place_checkitem",e,{id:e.id})}}]),o}(r("29f8").a)},"7a42":function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return l}));r("2b45"),r("fc58");var n=r("0e4d"),c=r("94ef"),a=r("76ff"),i=r("4b67"),u=r("d703"),o=r("fc9f");function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Object(u.a)(e);if(t){var c=Object(u.a)(this).constructor;r=Reflect.construct(n,arguments,c)}else r=n.apply(this,arguments);return Object(i.a)(this,r)}}var l=function(e){Object(a.a)(r,e);var t=s(r);function r(){return Object(n.a)(this,r),t.apply(this,arguments)}return Object(c.a)(r,[{key:"getIndexList",value:function(e){var t="select si.*,\n      (select count(*) from checkquality_problem cp where cp.biz_id = si.id ) as problemNum,\n      (select sum(deduction) from checkquality_problem cp1 \n        where batch_type = '专项巡检' and cp1.biz_id = si.id and cp1.status != '草稿' and cp1.status != '已关闭') as deduction \n      from special_inspect si \n      where si.batch_id = '".concat(e,"' order by si.checkitem_code");return o.a.query(t)}}]),r}(r("29f8").a)},"87d0":function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return l}));r("2b45"),r("fc58");var n=r("0e4d"),c=r("94ef"),a=r("76ff"),i=r("4b67"),u=r("d703"),o=r("fc9f");function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Object(u.a)(e);if(t){var c=Object(u.a)(this).constructor;r=Reflect.construct(n,arguments,c)}else r=n.apply(this,arguments);return Object(i.a)(this,r)}}var l=function(e){Object(a.a)(r,e);var t=s(r);function r(){return Object(n.a)(this,r),t.apply(this,arguments)}return Object(c.a)(r,[{key:"getIndexList",value:function(e){var t="select b.*, t.name as template_name, t.mode as template_mode, bc.weight\n      from batch b\n      left join special_inspect_template t on t.id = b.template_id\n      left join special_inspect_template_batch_combo bc on bc.batch_id = b.id and bc.template_id = t.id\n      where b.root_id = '".concat(e,"' and ifnull(b.parent_id, '') != ''\n      order by bc.sort");return o.a.query(t)}}]),r}(r("29f8").a)},"90ce":function(e,t,r){"use strict";r.d(t,"a",(function(){return c}));var n=r("d703");function c(e,t,r){return(c="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var c=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Object(n.a)(e)););return e}(e,t);if(c){var a=Object.getOwnPropertyDescriptor(c,t);return a.get?a.get.call(r):a.value}})(e,t,r||e)}},"937e":function(e,t,r){"use strict";(function(e){r.d(t,"a",(function(){return T}));r("309f"),r("0b53"),r("06a2"),r("ec25"),r("cc57"),r("5ab2"),r("e10e"),r("2b45"),r("fc58"),r("9e76"),r("6d57"),r("e204"),r("6a61");var n=r("2e91"),c=r("3e83"),a=r("28f8"),i=r("0e4d"),u=r("94ef"),o=r("76ff"),s=r("4b67"),l=r("d703"),f=r("1522"),p=r("3bd5"),d=r("ed08"),h=r("48f4"),m=r("7cb8"),b=r("966e"),y=r("a044"),v=r("7bac"),_=r("a7c3"),k=r("a18c"),g=r("1b7e"),O=r("fc9f"),j=r("162a"),R=r("e2a7");function x(e,t){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return w(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return w(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,c=function(){};return{s:c,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:c}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,u=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return i=e.done,e},e:function(e){u=!0,a=e},f:function(){try{i||null==r.return||r.return()}finally{if(u)throw a}}}}function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function I(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function P(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?I(Object(r),!0).forEach((function(t){Object(a.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):I(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Object(l.a)(e);if(t){var c=Object(l.a)(this).constructor;r=Reflect.construct(n,arguments,c)}else r=n.apply(this,arguments);return Object(s.a)(this,r)}}var T=function(t){Object(o.a)(K,t);var r,a,s,l,w,I,T,D,E,q,B,C,L,A,N,M,U,F,V,z,Q=S(K);function K(e){var t;return Object(i.a)(this,K),(t=Q.call(this)).mode=e,t.Repositories=Object(f.b)(e),t}return Object(u.a)(K,[{key:"eval",value:function(e,t){return Object(m.d)(e,P(P({},t),{},{percent:b.a,isNumber:m.j,hasVal:m.i}))}},{key:"compileStr",value:function(e,t){return Object(m.b)(e,P(P({},t),{},{percent:b.a,isNumber:m.j,hasVal:m.i}))}},{key:"isMatch",value:function(t,r){return"object"===Object(c.a)(t)?e.isMatch(r,t):this.eval(t,r)}},{key:"formatFloat",value:function(e){return isNaN(e)?e:Math.round(1e5*e)/1e5}},{key:"getTemplateList",value:function(){return this.Repositories.getTemplateList()}},{key:"getContractList",value:function(e){return this.Repositories.getContractList(e)}},{key:"getDraftFromMmkv",value:(z=Object(n.a)(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.getUserObject(_.a.SPECIAL_INSPECT_DRAFT);case 2:return t=e.sent,e.abrupt("return",t||{});case 4:case"end":return e.stop()}}),e)}))),function(){return z.apply(this,arguments)})},{key:"saveDraftToMmkv",value:(V=Object(n.a)(regeneratorRuntime.mark((function e(t,r){var n,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&r){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,v.a.getUserObject(_.a.SPECIAL_INSPECT_DRAFT);case 4:return!(n=e.sent)&&(n={}),!n[r]&&(n[r]=[]),(c=n[r].findIndex((function(e){return e.id===t.id})))<0?n[r].push(t):n[r].splice(c,1,t),e.next=11,v.a.saveUserObject(_.a.SPECIAL_INSPECT_DRAFT,n);case 11:case"end":return e.stop()}}),e)}))),function(e,t){return V.apply(this,arguments)})},{key:"removeDraftFromMmkv",value:(F=Object(n.a)(regeneratorRuntime.mark((function e(t,r){var n,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&r){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,v.a.getUserObject(_.a.SPECIAL_INSPECT_DRAFT);case 4:if(e.t0=e.sent,e.t0){e.next=7;break}e.t0={};case 7:if(!(n=e.t0)[r]&&(n[r]=[]),!((c=n[r].findIndex((function(e){return e.id===t.id})))>=0)){e.next=14;break}return n[r].splice(c,1),e.next=14,v.a.saveUserObject(_.a.SPECIAL_INSPECT_DRAFT,n);case 14:case"end":return e.stop()}}),e)}))),function(e,t){return F.apply(this,arguments)})},{key:"recoverDraftFromMmkv",value:(U=Object(n.a)(regeneratorRuntime.mark((function e(){var t,r,n,c,a,i,u,o,s,l,f,p,d,h;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.getUserObject(_.a.SPECIAL_INSPECT_DRAFT);case 2:if(e.t0=e.sent,e.t0){e.next=5;break}e.t0={};case 5:t=e.t0,n=(r=t||{}).special_inspect,c=void 0===n?[]:n,a=r.special_inspect_place_checkitem,i=void 0===a?[]:a,$log.log("开始恢复专项巡检草稿",t),u=x(c),e.prev=9,u.s();case 11:if((o=u.n()).done){e.next=22;break}if(!(s=o.value)||!s.id){e.next=20;break}return e.next=16,this.Repositories.selectSpecialInspect(s.id);case 16:if(!(l=e.sent)||l.status!==y.v){e.next=20;break}return e.next=20,this.Repositories.updateSpecialInspectData(s);case 20:e.next=11;break;case 22:e.next=27;break;case 24:e.prev=24,e.t1=e.catch(9),u.e(e.t1);case 27:return e.prev=27,u.f(),e.finish(27);case 30:f=x(i),e.prev=31,f.s();case 33:if((p=f.n()).done){e.next=44;break}if(!(d=p.value)||!d.id){e.next=42;break}return e.next=38,this.Repositories.selectSpecialInspectPlaceCheckitem(d.id);case 38:if(!(h=e.sent)||h.status!==y.v){e.next=42;break}return e.next=42,this.Repositories.updatePlaceSpecialInspectData(d);case 42:e.next=33;break;case 44:e.next=49;break;case 46:e.prev=46,e.t2=e.catch(31),f.e(e.t2);case 49:return e.prev=49,f.f(),e.finish(49);case 52:v.a.saveUserObject(_.a.SPECIAL_INSPECT_DRAFT,{});case 53:case"end":return e.stop()}}),e,this,[[9,24,27,30],[31,46,49,52]])}))),function(){return U.apply(this,arguments)})},{key:"getStatus",value:(M=Object(n.a)(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.getUserObject(_.a.SPECIAL_INSPECT_DETAIL_DRAFT_STATUS);case 2:return r=e.sent,e.abrupt("return",r&&r[t]);case 4:case"end":return e.stop()}}),e)}))),function(e){return M.apply(this,arguments)})},{key:"saveStatus",value:(N=Object(n.a)(regeneratorRuntime.mark((function e(t,r){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.getUserObject(_.a.SPECIAL_INSPECT_DETAIL_DRAFT_STATUS);case 2:if(e.t0=e.sent,e.t0){e.next=5;break}e.t0={};case 5:return(n=e.t0)[t]=r,e.next=9,v.a.saveUserObject(_.a.SPECIAL_INSPECT_DETAIL_DRAFT_STATUS,n);case 9:case"end":return e.stop()}}),e)}))),function(e,t){return N.apply(this,arguments)})},{key:"removeStatus",value:(A=Object(n.a)(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.getUserObject(_.a.SPECIAL_INSPECT_DETAIL_DRAFT_STATUS);case 2:if(e.t0=e.sent,e.t0){e.next=5;break}e.t0={};case 5:return delete(r=e.t0)[t],e.next=9,v.a.saveUserObject(_.a.SPECIAL_INSPECT_DETAIL_DRAFT_STATUS,r);case 9:case"end":return e.stop()}}),e)}))),function(e){return A.apply(this,arguments)})},{key:"getSpecialInspectDescs",value:function(e){return this.Repositories.getSpecialInspectDescs(e)}},{key:"getIndexList",value:(L=Object(n.a)(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.Repositories.getIndexList(t);case 2:return r=e.sent,n=Object(m.c)(r,{key:"checkitem_id",relationKey:"checkitem_parent_id",setLevel:!0}),e.abrupt("return",{tree:n,list:r});case 5:case"end":return e.stop()}}),e,this)}))),function(e){return L.apply(this,arguments)})},{key:"getTotalMode",value:function(e,t){var r=e&&e.totalMode,n=e&&e.defaultTotalMode,c=r&&this.eval(r,{batch:t});return!Object(m.i)(c)&&Object(m.i)(n)&&(c=e.defaultTotalMode),c}},{key:"getTreeOptions",value:function(t,r,n){var c,a=r&&r.tree&&r.tree[t]||[],i=this.getTotalMode(r,n);return c=Object(m.i)(i)?a.filter((function(e){return!Object(m.i)(e.totalMode)||e.totalMode===i})):a,e.cloneDeep(c)}},{key:"getTreeUi",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default",r=arguments.length>1?arguments[1]:void 0,n=this.compileStr(t,{batch:r}),c=y.B[n];return c?e.merge({},y.A,c):y.A}},{key:"treeAttrsHandle",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(e&&e.length){var n=function e(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];n.forEach((function(n){n.children&&n.children.length&&e(n.children),r.forEach((function(e){if(!e.match||t.isMatch(e.match,n)){var r=e.key,c=e.type,a=void 0===c?"number":c,i=e.method,u=void 0===i?"some":i,o=e.result,s=e.pattern,l=void 0===s?"computed":s,f=e.filter;if("computed"===l)n[r]="string"===a?t.compileStr(o,n):t.eval(o,n);else if("transmit"===l){if(!n.children||!n.children.length)return $log.error(r,l,"没有子级，无法汇总"),void(n[r]=void 0);var p=f?n.children.filter((function(e){return t.isMatch(f,e)})):n.children;if(!p.length)return void(n[r]=void 0);if("number"===a)n[r]=p.reduce((function(e,r){return e+t.eval(o,r)}),0);else if("boolean"===a){var d=p.map((function(e){return t.eval(o,e)}));"some"===u?n[r]=d.some((function(e){return e})):"all"===u&&(n[r]=!d.some((function(e){return!e})))}else"string"===a&&(n[r]=p.reduce((function(e,r){return e+t.compileStr(o,r)}),""))}}}))}))};n(e)}}},{key:"getTreeMap",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,c={};return t.forEach((function(t){var a=P(P({},t),n),i=r.filter((function(t){return!t.show||e.isMatch(t.show,a)})).map((function(t){return P(P({},t),{},{text:e.compileStr(t.text,a),color:e.compileStr(t.color,a)})}));t.id&&(c[t.id]=i)})),c}},{key:"getTotalData",value:function(e,t,r){var n=this,c={};if(!t)return c;(t&&t.calc||[]).forEach((function(t){!Object(m.i)(c[t.key])&&(c[t.key]={value:0,text:""});var r=e.filter((function(e){return!t.match||n.isMatch(t.match,e)})),a=[];r.forEach((function(e){c[t.key].value+=n.eval(t.value,e),t.text&&a.push(n.compileStr(t.text,e))})),a.length&&(c[t.key].text=a.join("+")),"number"==typeof c[t.key].value&&(c[t.key].value=n.formatFloat(c[t.key].value))}));var a=this.eval(t.hasResult,P(P({},c),{},{batch:r}));return c.hasResult=a,a?(c.result=this.eval(t.result,P(P({},c),{},{batch:r})),"percent"===t.resultType?c.result=Object(b.a)(c.result,2):!1!==t.numberFixed&&(c.result=c.result.toFixed(2))):c.result="",c.formula=t.formula,c.formulaCalc=a?this.compileStr(t.formulaCalc,P(P({},c),{},{batch:r})):"",c.formulaText=this.compileStr(t.formulaText,P(P({},c),{},{batch:r})),c.title=this.compileStr(t.title,P(P({},c),{},{batch:r}))||"",c.note=this.compileStr(t.note,P(P({},c),{},{batch:r})),c}},{key:"getSpecialInspectData",value:(C=Object(n.a)(regeneratorRuntime.mark((function e(t){var r,n,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.Repositories.getSpecialInspectData(t);case 2:if(r=e.sent){e.next=5;break}return e.abrupt("return",{});case 5:return n=Object(m.l)(r.checkitem_extension)||{},c=Object(m.l)(r.image_file)||[],e.abrupt("return",P(P({},r),{},{checkitem:{id:r.checkitem_id,name:r.checkitem_name,code:r.checkitem_code,parentId:r.checkitem_parent_id,fullname:r.checkitem_full_name,extension:n},images:c,checker:{id:r.checker,name:r.checker_name,mobile:r.checker_mobile,is_im_user:r.checker_is_im_user}}));case 8:case"end":return e.stop()}}),e,this)}))),function(e){return C.apply(this,arguments)})},{key:"getDetail",value:(B=Object(n.a)(regeneratorRuntime.mark((function e(t,r){var n,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getSpecialInspectData(t,r);case 2:if((n=e.sent).status!==y.w){e.next=10;break}return e.next=6,this.getStatus(n.id);case 6:c=e.sent,n.statusShow=c,e.next=11;break;case 10:n.statusShow=n.status;case 11:return e.abrupt("return",n);case 12:case"end":return e.stop()}}),e,this)}))),function(e,t){return B.apply(this,arguments)})},{key:"saveDetail",value:(q=Object(n.a)(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.updateSpecialInspectData(t);case 2:if(t.status!==y.v){e.next=7;break}return e.next=5,this.removeStatus(t.id);case 5:e.next=10;break;case 7:if(t.status!==y.w){e.next=10;break}return e.next=10,this.saveStatus(t.id,t.statusShow);case 10:case"end":return e.stop()}}),e,this)}))),function(e){return q.apply(this,arguments)})},{key:"submitDetail",value:(E=Object(n.a)(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.submitSpecialInspectData(t));case 1:case"end":return e.stop()}}),e,this)}))),function(e){return E.apply(this,arguments)})},{key:"updateSpecialInspectData",value:(D=Object(n.a)(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&t.id){e.next=2;break}return e.abrupt("return",new Error("保存检查项数据，参数错误"));case 2:if(r={id:t.id},void 0!==t.status&&(r.status=t.status||""),void 0!==t.checker&&(r.checker=t.checker||""),void 0!==t.check_time&&(r.check_time=t.check_time||""),void 0!==t.deduction&&(r.deduction=t.deduction),void 0!==t.images&&(r.image_file=Object(m.m)(t.images)||"[]"),void 0!==t.remark&&(r.remark=t.remark||""),"草稿"!==r.status){e.next=14;break}return e.next=12,this.saveDraftToMmkv(r,"special_inspect");case 12:e.next=16;break;case 14:return e.next=16,this.removeDraftFromMmkv(r,"special_inspect");case 16:return e.abrupt("return",this.Repositories.updateSpecialInspectData(r));case 17:case"end":return e.stop()}}),e,this)}))),function(e){return D.apply(this,arguments)})},{key:"submitSpecialInspectData",value:(T=Object(n.a)(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&t.id){e.next=2;break}return e.abrupt("return",new Error("提交检查项数据，参数错误"));case 2:return t.checker=p.a.getUser().user_id,t.check_time=d.a.now(),e.next=6,this.updateSpecialInspectData(t);case 6:return e.next=8,h.default.addSyncGroup([["special_inspect",t.id]]);case 8:case"end":return e.stop()}}),e,this)}))),function(e){return T.apply(this,arguments)})},{key:"onClickEndNode",value:function(e,t,r){r?this.routeToEdit(e):this.routeToView(e)}},{key:"runBtnOperate",value:(I=Object(n.a)(regeneratorRuntime.mark((function e(t,r){var n,c,a,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.operate,c=void 0===n?"":n,a=t.value,i=t.tips,"route-to-edit"!==c){e.next=5;break}this.routeToEdit(r,t),e.next=12;break;case 5:if("route-to-view"!==c){e.next=9;break}this.routeToView(r,t),e.next=12;break;case 9:if("change-status"!==c){e.next=12;break}return e.next=12,this.changeSpecialInspectStatus(r,a,i);case 12:case"end":return e.stop()}}),e,this)}))),function(e,t){return I.apply(this,arguments)})},{key:"routeToEdit",value:function(e,t){k.a.push({name:y.k,query:{specialInspectId:e.id,btn:t&&t.index}})}},{key:"routeToView",value:function(e,t){k.a.push({name:y.m,query:{specialInspectId:e.id,btn:t&&t.index}})}},{key:"changeSpecialInspectStatus",value:(w=Object(n.a)(regeneratorRuntime.mark((function e(t,r,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.default.removeSyncGroup(t.id);case 2:return e.next=4,this.saveDetail({id:t.id,status:r});case 4:return e.next=6,h.default.addSyncGroup([["special_inspect",t.id]]);case 6:t.status=r,n&&R.a.alert(n);case 8:case"end":return e.stop()}}),e,this)}))),function(e,t,r){return w.apply(this,arguments)})},{key:"gotoProblemList",value:function(e,t,r){k.a.push({name:y.q,query:{batchId:e,specialInspectId:t,placeId:r}})}},{key:"getWaitUploadQueryTables",value:function(e){var t=["special_inspect","special_inspect_place_checkitem"];return e&&t.push("checkquality_problem"),t}},{key:"getWaitUploadCount",value:(l=Object(n.a)(regeneratorRuntime.mark((function e(t){var r,n,c,a,i,u,o,s,l=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=l.length>1&&void 0!==l[1]&&l[1],n=this.getWaitUploadQueryTables(r),e.next=4,h.default.getUploadQueue();case 4:c=e.sent,a={},n.forEach((function(e){a[e]=(c||[]).filter((function(t){return t.relation_table_name===e})).map((function(e){return e.relation_id}))})),i=0,e.t0=regeneratorRuntime.keys(a);case 9:if((e.t1=e.t0()).done){e.next=18;break}return u=e.t1.value,o=a[u],e.next=14,this.Repositories.filterIdsByBatchId(u,o,t);case 14:s=e.sent,i+=s.length,e.next=9;break;case 18:return e.abrupt("return",i);case 19:case"end":return e.stop()}}),e,this)}))),function(e){return l.apply(this,arguments)})},{key:"batchCheck",value:(s=Object(n.a)(regeneratorRuntime.mark((function e(t,r,n,a){var i,u,o,s,l=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n&&n.finishBatchCheck&&Array.isArray(n.finishBatchCheck)&&n.finishBatchCheck.length){e.next=2;break}return e.abrupt("return");case 2:i=x(n.finishBatchCheck),e.prev=3,o=function(){var e=u.value;if(!(e.match&&e.statusTotalConfig&&Array.isArray(e.statusTotalConfig)&&e.statusTotalConfig.length))return"continue";var t=a||[];e.isFilterFirst&&(t=t.filter((function(e){return e.children&&e.children.length})));var r=e.statusTotalConfig.map((function(e){return e.status})),n=Object(m.g)(t,"status",r),c=e.statusTotalConfig.reduce((function(e,t){return e[t.key]=n[t.status],e}),{});return l.eval(e.match,c)?{v:{code:2,msg:l.compileStr(e.msg,c),type:e.type||"alert"}}:void 0},i.s();case 6:if((u=i.n()).done){e.next=14;break}if("continue"!==(s=o())){e.next=10;break}return e.abrupt("continue",12);case 10:if("object"!==Object(c.a)(s)){e.next=12;break}return e.abrupt("return",s.v);case 12:e.next=6;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(3),i.e(e.t0);case 19:return e.prev=19,i.f(),e.finish(19);case 22:return e.next=24,this.getWaitUploadCount(t.id);case 24:if(!e.sent){e.next=27;break}return e.abrupt("return",{code:1,msg:"还有问题正在上传，请等待问题上传完毕",type:"alert"});case 27:case"end":return e.stop()}}),e,this,[[3,16,19,22]])}))),function(e,t,r,n){return s.apply(this,arguments)})},{key:"finishBatchConfirm",value:(a=Object(n.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",R.a.confirm("请确保所有检查人已上传数据，提交后不可修改，确认提交？"));case 1:case"end":return e.stop()}}),e)}))),function(){return a.apply(this,arguments)})},{key:"finishBatch",value:(r=Object(n.a)(regeneratorRuntime.mark((function e(t){var r,n,c,a,i,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.id,t.status=y.u,e.next=4,g.a.getHasNetwork();case 4:if(e.sent){e.next=7;break}return e.abrupt("return",Promise.reject("当前网络无法同步数据"));case 7:return e.next=9,j.a.post("/batch/upload",null,{data:{batch:t}});case 9:return n=e.sent,e.next=12,O.a.update("batch",n.batch,{id:r});case 12:return c={status:y.v,deduction:0,image_file:"[]"},a={batch_id:t.id,status:y.w},e.next=16,this.Repositories.updateSpecialInspectAll(a,c);case 16:return e.next=18,this.Repositories.getDraftProblemByBatchId(r);case 18:return i=e.sent,u=(i||[]).map((function(e){return e.id})),e.abrupt("return",this.Repositories.deleteProblemById(u));case 21:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})}]),K}(r("3ddc").a)}).call(this,r("391c"))},"9dfb":function(e,t,r){var n={"./mode-1.js":"7a42","./mode-10.js":"743d","./mode-100.js":"87d0","./mode-11.js":"7647","./mode-2.js":"a833","./mode-3.js":"55dc","./mode-4.js":"66f5","./mode-5.js":"05ac","./mode-6.js":"fd1b","./mode-7.js":"d899","./mode-8.js":"1079","./mode-9.js":"dd2f","./mode-99.js":"dc5e"};function c(e){var t=a(e);return r(t)}function a(e){if(!r.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}c.keys=function(){return Object.keys(n)},c.resolve=a,e.exports=c,c.id="9dfb"},a833:function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return s}));r("2b45"),r("fc58");var n=r("0e4d"),c=r("94ef"),a=r("76ff"),i=r("4b67"),u=r("d703");function o(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Object(u.a)(e);if(t){var c=Object(u.a)(this).constructor;r=Reflect.construct(n,arguments,c)}else r=n.apply(this,arguments);return Object(i.a)(this,r)}}var s=function(e){Object(a.a)(r,e);var t=o(r);function r(){return Object(n.a)(this,r),t.apply(this,arguments)}return Object(c.a)(r,[{key:"getIndexList",value:function(e){var t="select si.*, si.checkitem_name as name,\n\t\t  (select id from checkquality_problem cp where cp.biz_id = si.id order by cp.download_time desc limit 1) as problem_id\n\t\tfrom special_inspect si \n\t\twhere si.batch_id = '".concat(e,"' order by si.checkitem_code");return localDB.query(t)}}]),r}(r("29f8").a)},a96c:function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return d}));r("2b45"),r("fc58"),r("6a61");var n=r("2e91"),c=r("0e4d"),a=r("94ef"),i=r("76ff"),u=r("4b67"),o=r("d703"),s=r("937e"),l=r("a044"),f=r("a18c");function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Object(o.a)(e);if(t){var c=Object(o.a)(this).constructor;r=Reflect.construct(n,arguments,c)}else r=n.apply(this,arguments);return Object(u.a)(this,r)}}var d=function(e){Object(i.a)(o,e);var t,r,u=p(o);function o(){return Object(c.a)(this,o),u.apply(this,arguments)}return Object(a.a)(o,[{key:"onClickEndNode",value:function(e,t,r){r?this.routeToOldProblemEdit(e):e.status===l.x&&this.routeToOldProblemView(e)}},{key:"routeToEdit",value:function(e){this.routeToOldProblemEdit(e)}},{key:"routeToView",value:function(e){this.routeToOldProblemView(e)}},{key:"routeToOldProblemEdit",value:(r=Object(n.a)(regeneratorRuntime.mark((function e(t){var r,n,c,a,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t&&t.id,e.next=3,this.getOldRouteQuery(r);case 3:n=e.sent,c=n.special_inspect_id,a=n.checkitem_id,i=n.mode,f.a.push({path:"/special-inspect-get-score",query:{specialInspectId:c,checkItemId:a,mode:i}});case 6:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"routeToOldProblemView",value:(t=Object(n.a)(regeneratorRuntime.mark((function e(t){var r,n,c,a,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t&&t.id,e.next=3,this.getOldRouteQuery(r);case 3:n=e.sent,c=n.special_inspect_id,a=n.checkitem_id,i=n.mode,f.a.push({path:"/special-inspect-get-score-detail",query:{specialInspectId:c,checkItemId:a,mode:i}});case 6:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"gotoProblemList",value:function(e,t,r){this.gotoOldProblemList({batch_id:e,mode:9})}}]),o}(s.a)},ae0f:function(e,t,r){var n={"./mode-1.js":"6268","./mode-10.js":"fe91","./mode-100.js":"266f","./mode-11.js":"3abd","./mode-2.js":"b376","./mode-3.js":"1e33","./mode-4.js":"3c16e","./mode-5.js":"4b2e","./mode-6.js":"fb29","./mode-7.js":"2150","./mode-8.js":"09d6","./mode-9.js":"a96c","./mode-99.js":"391cb"};function c(e){var t=a(e);return r(t)}function a(e){if(!r.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}c.keys=function(){return Object.keys(n)},c.resolve=a,e.exports=c,c.id="ae0f"},b376:function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return d}));r("2b45"),r("fc58"),r("6a61");var n=r("2e91"),c=r("0e4d"),a=r("94ef"),i=r("76ff"),u=r("4b67"),o=r("d703"),s=r("937e"),l=r("a044"),f=r("a18c");function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Object(o.a)(e);if(t){var c=Object(o.a)(this).constructor;r=Reflect.construct(n,arguments,c)}else r=n.apply(this,arguments);return Object(u.a)(this,r)}}var d=function(e){Object(i.a)(u,e);var t,r=p(u);function u(){return Object(c.a)(this,u),r.apply(this,arguments)}return Object(a.a)(u,[{key:"onClickEndNode",value:function(e,t,r){e.status===l.y?this.routeToOldSetPass(e):e.status===l.z?this.routeToOldProblemView(e):e.status===l.w&&this.routeToOldProblemEdit(e)}},{key:"routeToEdit",value:function(e){this.routeToOldProblemEdit(e)}},{key:"routeToView",value:function(e){this.routeToOldProblemView(e)}},{key:"routeToOldSetPass",value:(t=Object(n.a)(regeneratorRuntime.mark((function e(t){var r,n,c,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t&&t.id,e.next=3,this.getOldRouteQuery(r);case 3:n=e.sent,c=n.special_inspect_id,a=n.mode,f.a.push({path:"/special-inspect-problem-detail-pass",query:{specialInspectId:c,mode:a}});case 6:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})}]),u}(s.a)},d899:function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return l}));r("2b45"),r("fc58");var n=r("0e4d"),c=r("94ef"),a=r("76ff"),i=r("4b67"),u=r("d703"),o=r("fc9f");function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Object(u.a)(e);if(t){var c=Object(u.a)(this).constructor;r=Reflect.construct(n,arguments,c)}else r=n.apply(this,arguments);return Object(i.a)(this,r)}}var l=function(e){Object(a.a)(r,e);var t=s(r);function r(){return Object(n.a)(this,r),t.apply(this,arguments)}return Object(c.a)(r,[{key:"getIndexList",value:function(e){var t="select si.*, si.checkitem_name as name, sm.measurement_points, sm.problem_points , sm.passrate_mode \n\t\t\tfrom special_inspect si \n\t\t\tleft join special_inspect_measure_item sm on sm.special_inspect_id = si.id \n\t\t\twhere batch_id = '".concat(e,"' \n      order by si.checkitem_code");return o.a.query(t)}}]),r}(r("29f8").a)},dc5e:function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return l}));r("2b45"),r("fc58");var n=r("0e4d"),c=r("94ef"),a=r("76ff"),i=r("4b67"),u=r("d703"),o=r("fc9f");function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Object(u.a)(e);if(t){var c=Object(u.a)(this).constructor;r=Reflect.construct(n,arguments,c)}else r=n.apply(this,arguments);return Object(i.a)(this,r)}}var l=function(e){Object(a.a)(r,e);var t=s(r);function r(){return Object(n.a)(this,r),t.apply(this,arguments)}return Object(c.a)(r,[{key:"getIndexList",value:function(e){var t="select b.*, b.id as batch_id, \n      st.id as template_id, st.name as template_name, \n      sc.weight as weight\n\t\t\tfrom batch b\n\t\t\tleft join special_inspect_template st on st.id = b.template_id \n\t\t\tleft join special_inspect_template_batch_combo sc on sc.batch_id = b.parent_id and sc.template_id = st.id \n\t\t\twhere b.parent_id = '".concat(e,"' order by sc.sort");return o.a.query(t)}}]),r}(r("29f8").a)},dd2f:function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return o}));r("2b45"),r("fc58");var n=r("0e4d"),c=r("76ff"),a=r("4b67"),i=r("d703");function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Object(i.a)(e);if(t){var c=Object(i.a)(this).constructor;r=Reflect.construct(n,arguments,c)}else r=n.apply(this,arguments);return Object(a.a)(this,r)}}var o=function(e){Object(c.a)(r,e);var t=u(r);function r(){return Object(n.a)(this,r),t.apply(this,arguments)}return r}(r("29f8").a)},fb29:function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return f}));r("2b45"),r("fc58");var n=r("0e4d"),c=r("94ef"),a=r("76ff"),i=r("4b67"),u=r("d703"),o=r("937e"),s=r("a18c");function l(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Object(u.a)(e);if(t){var c=Object(u.a)(this).constructor;r=Reflect.construct(n,arguments,c)}else r=n.apply(this,arguments);return Object(i.a)(this,r)}}var f=function(e){Object(a.a)(r,e);var t=l(r);function r(){return Object(n.a)(this,r),t.apply(this,arguments)}return Object(c.a)(r,[{key:"onClickEndNode",value:function(e,t,r){e.problem_id&&this.routeToOldProblemDetail(e)}},{key:"routeToEdit",value:function(e){s.a.push({path:"/special-inspect-contract-problem-detail",query:{bizId:e.id,type:0}})}},{key:"routeToView",value:function(e){this.routeToOldProblemDetail(e)}},{key:"routeToOldProblemDetail",value:function(e){s.a.push({path:"/special-inspect-contract-problem-detail",query:{problemId:e.problem_id}})}},{key:"changeSpecialInspectStatus",value:function(e){s.a.push({path:"/special-inspect-contract-problem-detail",query:{bizId:e.id,type:1}})}},{key:"gotoProblemList",value:function(e,t,r){this.gotoOldProblemList({batch_id:e,mode:6})}}]),r}(o.a)},fd1b:function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return s}));r("2b45"),r("fc58");var n=r("0e4d"),c=r("94ef"),a=r("76ff"),i=r("4b67"),u=r("d703");function o(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Object(u.a)(e);if(t){var c=Object(u.a)(this).constructor;r=Reflect.construct(n,arguments,c)}else r=n.apply(this,arguments);return Object(i.a)(this,r)}}var s=function(e){Object(a.a)(r,e);var t=o(r);function r(){return Object(n.a)(this,r),t.apply(this,arguments)}return Object(c.a)(r,[{key:"getIndexList",value:function(e){var t="select si.*, si.checkitem_name as name,\n\t\t(select id from checkquality_problem cp where cp.biz_id = si.id order by cp.download_time desc limit 1) as problem_id\n\t\tfrom special_inspect si \n\t\twhere si.batch_id = '".concat(e,"' order by si.checkitem_code");return localDB.query(t)}}]),r}(r("29f8").a)},fe91:function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return m}));r("2b45"),r("fc58"),r("6a61");var n=r("2e91"),c=r("0e4d"),a=r("94ef"),i=r("76ff"),u=r("4b67"),o=r("d703"),s=r("937e"),l=r("a18c"),f=r("7cb8"),p=r("e2a7"),d=r("a044");r("264e");function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Object(o.a)(e);if(t){var c=Object(o.a)(this).constructor;r=Reflect.construct(n,arguments,c)}else r=n.apply(this,arguments);return Object(u.a)(this,r)}}var m=function(e){Object(i.a)(s,e);var t,r,u,o=h(s);function s(){return Object(c.a)(this,s),o.apply(this,arguments)}return Object(a.a)(s,[{key:"onClickEndNode",value:function(e,t,r){this.routeToEdit(e)}},{key:"routeToEdit",value:function(e){this.routeToOldProblemEdit(e)}},{key:"routeToView",value:function(e){this.routeToOldProblemView(e)}},{key:"routeToOldProblemEdit",value:(u=Object(n.a)(regeneratorRuntime.mark((function e(t){var r,n,c,a,i,u,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t&&t.id,e.next=3,this.getOldRouteQuery(r);case 3:n=e.sent,c=n.batch_id,a=n.special_inspect_id,i=n.checkitem_id,u=n.mode,o=n.root_id,l.a.push({path:"/special-inspect-jfkf-edit",query:{batchId:c,specialInspectId:a,checkItemId:i,mode:u,rootId:o}});case 6:case"end":return e.stop()}}),e,this)}))),function(e){return u.apply(this,arguments)})},{key:"routeToOldProblemView",value:(r=Object(n.a)(regeneratorRuntime.mark((function e(t){var r,n,c,a,i,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t&&t.id,e.next=3,this.getOldRouteQuery(r);case 3:n=e.sent,c=n.special_inspect_id,a=n.checkitem_id,i=n.mode,u=n.problem_id,l.a.push({path:"/special-inspect-jfkf-edit",query:{specialInspectId:c,problem_id:u,checkItemId:a,mode:i}});case 6:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"gotoProblemList",value:function(e,t,r){this.gotoOldProblemList({batch_id:e,mode:10})}},{key:"finishBatchConfirm",value:(t=Object(n.a)(regeneratorRuntime.mark((function e(t,r,n){var c,a,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=Object(f.g)(n,"status",[d.w]),!((a=c[d.w])>0)){e.next=6;break}if(i=p.a.popBox({title:'有<span class="color-orange pl5 pr5">'+a+"</span>项草稿记录未提交，继续操作将清除所有暂存数据，是否正常提交？",cancelText:"取消",okText:"提交"})){e.next=6;break}return e.abrupt("return",i);case 6:return e.abrupt("return",p.a.confirm("请确保所有检查人已上传数据，提交后不可修改，确认提交？"));case 7:case"end":return e.stop()}}),e)}))),function(e,r,n){return t.apply(this,arguments)})}]),s}(s.a)}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9fX21vZHVsZV9lbnRyeV96amFwcF9fLy4vc3JjL3ZpZXdzL3NwZWNpYWwtaW5zcGVjdC1yZWRvL3JlcG9zaXRvcmllcy9tb2RlLTUuanMiLCJ3ZWJwYWNrOi8vX19tb2R1bGVfZW50cnlfemphcHBfXy8uL3NyYy92aWV3cy9zcGVjaWFsLWluc3BlY3QtcmVkby9zZXJ2aWNlL21vZGUtOC5qcyIsIndlYnBhY2s6Ly9fX21vZHVsZV9lbnRyeV96amFwcF9fLy4vc3JjL3ZpZXdzL3NwZWNpYWwtaW5zcGVjdC1yZWRvL3JlcG9zaXRvcmllcy9tb2RlLTguanMiLCJ3ZWJwYWNrOi8vX19tb2R1bGVfZW50cnlfemphcHBfXy8uL3NyYy92aWV3cy9zcGVjaWFsLWluc3BlY3QtcmVkby9yZXBvc2l0b3JpZXMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vX19tb2R1bGVfZW50cnlfemphcHBfXy8uL3NyYy92aWV3cy9zcGVjaWFsLWluc3BlY3QtcmVkby9zZXJ2aWNlL21vZGUtMy5qcyIsIndlYnBhY2s6Ly9fX21vZHVsZV9lbnRyeV96amFwcF9fLy4vc3JjL3ZpZXdzL3NwZWNpYWwtaW5zcGVjdC1yZWRvL3NlcnZpY2UvbW9kZS03LmpzIiwid2VicGFjazovL19fbW9kdWxlX2VudHJ5X3pqYXBwX18vLi9zcmMvdmlld3Mvc3BlY2lhbC1pbnNwZWN0L2pma2YvY29uZmlnLmpzIiwid2VicGFjazovL19fbW9kdWxlX2VudHJ5X3pqYXBwX18vLi9zcmMvdmlld3Mvc3BlY2lhbC1pbnNwZWN0LXJlZG8vc2VydmljZS9tb2RlLTEwMC5qcyIsIndlYnBhY2s6Ly9fX21vZHVsZV9lbnRyeV96amFwcF9fLy4vc3JjL3ZpZXdzL3NwZWNpYWwtaW5zcGVjdC1yZWRvL3NlcnZpY2UvYmF0Y2guanMiLCJ3ZWJwYWNrOi8vX19tb2R1bGVfZW50cnlfemphcHBfXy8uL3NyYy92aWV3cy9zcGVjaWFsLWluc3BlY3QtcmVkby9zZXJ2aWNlL2luZGV4LmpzIiwid2VicGFjazovL19fbW9kdWxlX2VudHJ5X3pqYXBwX18vLi9zcmMvdmlld3Mvc3BlY2lhbC1pbnNwZWN0LXJlZG8vcmVwb3NpdG9yaWVzL2Jhc2UuanMiLCJ3ZWJwYWNrOi8vX19tb2R1bGVfZW50cnlfemphcHBfXy8uL3NyYy92aWV3cy9zcGVjaWFsLWluc3BlY3QtcmVkby9zZXJ2aWNlL21vZGUtOTkuanMiLCJ3ZWJwYWNrOi8vX19tb2R1bGVfZW50cnlfemphcHBfXy8uL3NyYy92aWV3cy9zcGVjaWFsLWluc3BlY3QtcmVkby9zZXJ2aWNlL21vZGUtMTEuanMiLCJ3ZWJwYWNrOi8vX19tb2R1bGVfZW50cnlfemphcHBfXy8uL3NyYy92aWV3cy9zcGVjaWFsLWluc3BlY3QtcmVkby9zZXJ2aWNlL21vZGUtNC5qcyIsIndlYnBhY2s6Ly9fX21vZHVsZV9lbnRyeV96amFwcF9fLy4vc3JjL3ZpZXdzL3NwZWNpYWwtaW5zcGVjdC1yZWRvL3NlcnZpY2Uvb2xkLWZpdHRlci5qcyIsIndlYnBhY2s6Ly9fX21vZHVsZV9lbnRyeV96amFwcF9fLy4vc3JjL3ZpZXdzL3NwZWNpYWwtaW5zcGVjdC1yZWRvL3NlcnZpY2UvbW9kZS01LmpzIiwid2VicGFjazovL19fbW9kdWxlX2VudHJ5X3pqYXBwX18vLi9zcmMvdmlld3Mvc3BlY2lhbC1pbnNwZWN0LXJlZG8vcmVwb3NpdG9yaWVzL21vZGUtMy5qcyIsIndlYnBhY2s6Ly9fX21vZHVsZV9lbnRyeV96amFwcF9fLy4vc3JjL3ZpZXdzL3NwZWNpYWwtaW5zcGVjdC1yZWRvL3NlcnZpY2UvbW9kZS0xLmpzIiwid2VicGFjazovL19fbW9kdWxlX2VudHJ5X3pqYXBwX18vLi9zcmMvdmlld3Mvc3BlY2lhbC1pbnNwZWN0LXJlZG8vcmVwb3NpdG9yaWVzL21vZGUtNC5qcyIsIndlYnBhY2s6Ly9fX21vZHVsZV9lbnRyeV96amFwcF9fLy4vc3JjL3ZpZXdzL3NwZWNpYWwtaW5zcGVjdC1yZWRvL3JlcG9zaXRvcmllcy9tb2RlLTEwLmpzIiwid2VicGFjazovL19fbW9kdWxlX2VudHJ5X3pqYXBwX18vLi9zcmMvdmlld3Mvc3BlY2lhbC1pbnNwZWN0LXJlZG8vcmVwb3NpdG9yaWVzL21vZGUtMTEuanMiLCJ3ZWJwYWNrOi8vX19tb2R1bGVfZW50cnlfemphcHBfXy8uL3NyYy92aWV3cy9zcGVjaWFsLWluc3BlY3QtcmVkby9yZXBvc2l0b3JpZXMvbW9kZS0xLmpzIiwid2VicGFjazovL19fbW9kdWxlX2VudHJ5X3pqYXBwX18vLi9zcmMvdmlld3Mvc3BlY2lhbC1pbnNwZWN0LXJlZG8vcmVwb3NpdG9yaWVzL21vZGUtMTAwLmpzIiwid2VicGFjazovL19fbW9kdWxlX2VudHJ5X3pqYXBwX18vLi9ub2RlX21vZHVsZXMvX0BiYWJlbF9ydW50aW1lQDcuMTIuNUBAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9nZXQuanMiLCJ3ZWJwYWNrOi8vX19tb2R1bGVfZW50cnlfemphcHBfXy8uL25vZGVfbW9kdWxlcy9fQGJhYmVsX3J1bnRpbWVANy4xMi41QEBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL3N1cGVyUHJvcEJhc2UuanMiLCJ3ZWJwYWNrOi8vX19tb2R1bGVfZW50cnlfemphcHBfXy8uL3NyYy92aWV3cy9zcGVjaWFsLWluc3BlY3QtcmVkby9zZXJ2aWNlL2Jhc2UuanMiLCJ3ZWJwYWNrOi8vX19tb2R1bGVfZW50cnlfemphcHBfXy8uL3NyYy92aWV3cy9zcGVjaWFsLWluc3BlY3QtcmVkby9yZXBvc2l0b3JpZXMgc3luYyBub25yZWN1cnNpdmUgbW9kZVxcLVxcZCtcXC5qcyQiLCJ3ZWJwYWNrOi8vX19tb2R1bGVfZW50cnlfemphcHBfXy8uL3NyYy92aWV3cy9zcGVjaWFsLWluc3BlY3QtcmVkby9yZXBvc2l0b3JpZXMvbW9kZS0yLmpzIiwid2VicGFjazovL19fbW9kdWxlX2VudHJ5X3pqYXBwX18vLi9zcmMvdmlld3Mvc3BlY2lhbC1pbnNwZWN0LXJlZG8vc2VydmljZS9tb2RlLTkuanMiLCJ3ZWJwYWNrOi8vX19tb2R1bGVfZW50cnlfemphcHBfXy8uL3NyYy92aWV3cy9zcGVjaWFsLWluc3BlY3QtcmVkby9zZXJ2aWNlIHN5bmMgbm9ucmVjdXJzaXZlIG1vZGVcXC1cXGQrXFwuanMkIiwid2VicGFjazovL19fbW9kdWxlX2VudHJ5X3pqYXBwX18vLi9zcmMvdmlld3Mvc3BlY2lhbC1pbnNwZWN0LXJlZG8vc2VydmljZS9tb2RlLTIuanMiLCJ3ZWJwYWNrOi8vX19tb2R1bGVfZW50cnlfemphcHBfXy8uL3NyYy92aWV3cy9zcGVjaWFsLWluc3BlY3QtcmVkby9yZXBvc2l0b3JpZXMvbW9kZS03LmpzIiwid2VicGFjazovL19fbW9kdWxlX2VudHJ5X3pqYXBwX18vLi9zcmMvdmlld3Mvc3BlY2lhbC1pbnNwZWN0LXJlZG8vcmVwb3NpdG9yaWVzL21vZGUtOTkuanMiLCJ3ZWJwYWNrOi8vX19tb2R1bGVfZW50cnlfemphcHBfXy8uL3NyYy92aWV3cy9zcGVjaWFsLWluc3BlY3QtcmVkby9yZXBvc2l0b3JpZXMvbW9kZS05LmpzIiwid2VicGFjazovL19fbW9kdWxlX2VudHJ5X3pqYXBwX18vLi9zcmMvdmlld3Mvc3BlY2lhbC1pbnNwZWN0LXJlZG8vc2VydmljZS9tb2RlLTYuanMiLCJ3ZWJwYWNrOi8vX19tb2R1bGVfZW50cnlfemphcHBfXy8uL3NyYy92aWV3cy9zcGVjaWFsLWluc3BlY3QtcmVkby9yZXBvc2l0b3JpZXMvbW9kZS02LmpzIiwid2VicGFjazovL19fbW9kdWxlX2VudHJ5X3pqYXBwX18vLi9zcmMvdmlld3Mvc3BlY2lhbC1pbnNwZWN0LXJlZG8vc2VydmljZS9tb2RlLTEwLmpzIl0sIm5hbWVzIjpbIlJlcG9zaXRvcmllc01vZGUiLCJiYXRjaElkIiwic3FsIiwibG9jYWxEQiIsInF1ZXJ5IiwiUmVwb3NpdG9yaWVzQmFzZSIsIlNlcnZpY2VNb2RlIiwiaXRlbSIsImJhdGNoIiwiZWRpdGFibGUiLCJzdGF0dXMiLCJDT05TVCIsInRoaXMiLCJyb3V0ZVRvT2xkU2V0UGFzcyIsInRlbXBvcmFyeV9zdG9yYWdlIiwicm91dGVUb09sZFByb2JsZW1MaXN0Iiwicm91dGVUb09sZFByb2JsZW1FZGl0Iiwicm91dGVUb09sZFByb2JsZW1WaWV3Iiwic3BlY2lhbEluc3BlY3RJZCIsInBsYWNlSWQiLCJnb3RvT2xkUHJvYmxlbUxpc3QiLCJiYXRjaF9pZCIsIm1vZGUiLCJsaXN0RGF0YSIsInRyZWVEYXRhIiwic29tZSIsInRyZWVOb2RlSXNGaXJzdCIsInRyZWVOb2RlSXNFbmQiLCJQb3B1cCIsImNvbmZpcm0iLCJTZXJ2aWNlQmFzZSIsIlJlcG9zaXRvcmllc0Jhc2VDbGFzcyIsImZpbGVzIiwicmVxdWlyZSIsIm1vZHVsZXMiLCJnZXRSZXBvc2l0b3JpZXMiLCJrZXlzIiwiZm9yRWFjaCIsImtleSIsIk1vZGVDbGFzcyIsImRlZmF1bHQiLCJtb2RlTmFtZSIsInJlcGxhY2UiLCJwcm9ibGVtTnVtIiwidmFsdWUiLCJ0aXBzIiwiY29uZmlnIiwiZ3JheUtleSIsImlkIiwibmV0d29yayIsImdldEhhc05ldHdvcmsiLCJQcm9taXNlIiwicmVqZWN0IiwiV2ViU2VydmljZSIsInBvc3QiLCJkYXRhIiwicmVzIiwiaW1wb3J0RGF0YSIsInJlc3VsdCIsImV4X2RhdGEiLCJ1cGRhdGUiLCJyZXNldERhdGEiLCJkZWR1Y3Rpb24iLCJpbWFnZV9maWxlIiwicXVlcnlEYXRhIiwiUmVwb3NpdG9yaWVzIiwidXBkYXRlU3BlY2lhbEluc3BlY3RBbGwiLCJnZXREcmFmdFByb2JsZW1CeUJhdGNoSWQiLCJwcm9ibGVtSWRzIiwiaWRzIiwibWFwIiwiZGVsZXRlUHJvYmxlbUJ5SWQiLCJyb3V0ZXIiLCJwdXNoIiwicGF0aCIsImJpeklkIiwicGxhY2UiLCJ0cmltIiwiY29kZSIsIm1zZyIsInN0YXR1c1RvdGFsIiwiZ2V0RW5kVG90YWxCeWtleSIsIlNUQVRVU19ERUZBVUxUIiwibm90RGF0YU51bSIsInBvcEJveCIsInRpdGxlIiwiY2FuY2VsVGV4dCIsIm9rVGV4dCIsIkNIRUNLX09GRiIsIlVOX1NFVFRJTkciLCJEUkFGVCIsInNhdmVTdGF0dXNMaXN0IiwiZ2V0SW5kZXhMaXN0IiwibGlzdCIsInRlbXBsYXRlX2V4dGVuc2lvbiIsImpzb25QYXJzZSIsInRyZWUiLCJjcmVhdGVUcmVlQnlBcnJheSIsInJlbGF0aW9uS2V5Iiwic2V0TGV2ZWwiLCJoYXNEb25lIiwidiIsIkJhdGNoQ2xhc3MiLCJiYXRjaFRlbXBsYXRlTW9kZUNhY2hlIiwic3BlY2lhbEluc3BlY3RUZW1wbGF0ZU1vZGVDYWNoZSIsInByb2pJZCIsInN0b3JlIiwic3RhdGUiLCJnbG9iYWwiLCJjdXJyZW50UHJvamVjdCIsIm1ta3YiLCJnZXRVc2VyS2V5IiwiZGVmYXVsdEJhdGNoIiwiZGVmYXVsdEJhdGNoSWQiLCJnZXRCYXRjaEJ5SWQiLCJzZXRVc2VyS2V5IiwidXNlcklkIiwiY29udGV4dCIsImdldFVzZXIiLCJ1c2VyX2lkIiwiZ2V0QmF0Y2hMaXN0IiwiZ2V0Rmlyc3RCYXRjaCIsImdldERlZmF1bHRCYXRjaCIsImJhdGNoRGF0YSIsImdldEJhdGNoQ29udHJhY3RzIiwicmVzb2x2ZSIsImdldFRlbXBsYXRlTGlzdCIsImdldENvbnRyYWN0TGlzdCIsIkJhdGNoU2VydmljZSIsImdldEJhdGNoVXNlcnMiLCJ1bmRlZmluZWQiLCJnZXRCYXRjaFRlbXBsYXRlTW9kZSIsImdldFNwZWNpYWxJbnNwZWN0QmF0Y2hJZCIsIkJhc2VTZXJ2aWNlIiwiQmFzZUNsYXNzIiwiZ2V0U2VydmljZSIsImdldFNlcnZpY2VCeVNwZWNpYWxJbnNwZWN0SWQiLCJnZXRTcGVjaWFsSW5zcGVjdFRlbXBsYXRlTW9kZSIsIm1vZGVNYXRjaCIsIm1hdGNoIiwicXVlcnlPbmUiLCJnZXRCYXRjaFNxbCIsImJhdGNoSWRzIiwiJHEiLCJBcnJheSIsImlzQXJyYXkiLCJmaWx0ZXIiLCJqb2luIiwic3FsSW4iLCJzcWxzIiwiaSIsImxlbmd0aCIsImV4ZWN1dGVTcWwiLCJ0YWJsZU5hbWUiLCJpZHNGaWx0ZXIiLCJnZXRCYXRjaFBsYWNlcyIsImdldE1vZGUxMVBsYWNlc0VuZEl0ZW1Ub3RhbCIsInBsYWNlVG90YWwiLCJzZXQiLCJ0b3RhbCIsImNvdW50IiwiZG9uZSIsInVucXVhbGlmaWVkIiwiZHJhZnQiLCJnZXRNb2RlMTFFbmRJdGVtcyIsInRoZW4iLCJwbGFjZV9pZCIsIm5hbWUiLCJwbGFjZV9uYW1lIiwiaGFzQmF0Y2hDaGVja2l0ZW0iLCJFcnJvciIsInBsYWNlRGF0YSIsIlV0aWxzIiwidXVpZCIsImZ1bGxuYW1lIiwicHJval9pZCIsImJ1aWxkaW5nX2lkIiwiYnVpbGRpbmciLCJ1bml0IiwiZmxvb3IiLCJyb29tX2lkIiwicm9vbSIsInJlZ2lzdF9kYXRlIiwibm93IiwiYWRkQmF0Y2hQbGFjZSIsImFkZEJhdGNoUGxhY2VDaGVja2l0ZW0iLCJEYXRhU3luY2hyb25pemVyIiwiYWRkU3luY0dyb3VwIiwidXBkYXRlQmF0Y2hQbGFjZSIsImRvd25sb2FkX3RpbWUiLCJkZWxldGVCYXRjaFBsYWNlIiwicmVtb3ZlU3luY0dyb3VwIiwiZ2V0QmF0Y2hBbGxTcGVjaWFsSW5zcGVjdCIsImNoZWNraXRlbXMiLCJjaGVja2l0ZW1EYXRhIiwic3BlY2lhbF9pbnNwZWN0X2lkIiwicmVtYXJrIiwiY2hlY2tlciIsImNoZWNrX3RpbWUiLCJ0b3RhbE9wdGlvbnMiLCJtb2RlMTFfcGFzc3JhdGVfbW9kZSIsImdldE1vZGUyVG90YWxEYXRhIiwiZ2V0TW9kZTFUb3RhbERhdGEiLCJnZXRBbGxEb25lRGF0YSIsImFsbERvbmVEYXRhIiwic2NvcmUiLCJxdWFsaWZpZWQiLCJOdW1iZXIiLCJpbmZvcyIsImNyZWRpdFN1bSIsInNjb3JlU3VtIiwiaGFzUmVzdWx0IiwiQm9vbGVhbiIsImZvcm11bGFDYWxjIiwicGFzc3JhdGUiLCJwZXJjZW50IiwiY3JlZGl0U3VtQXJyIiwic2NvcmVTdW1BcnIiLCJmb3JtYXRGbG9hdCIsIm5vdGUiLCJmb3JtdWxhVGV4dCIsImdldEFsbEl0ZW1zIiwiYWxsSXRlbXMiLCJkb25lSXRlbXMiLCJleHRlbnNpb24iLCJKU09OIiwicGFyc2UiLCJjaGVja2l0ZW1fZXh0ZW5zaW9uIiwiaXNEZWR1Y3Rpb25JdGVtIiwiaXNfZGVkdWN0aW9uX2l0ZW0iLCJjaGVja2l0ZW1faWQiLCJwcm9ibGVtcyIsImdldEl0ZW1BbGxQcm9ibGVtcyIsInF1YWxpZmllZHMiLCJkZWR1Y3Rpb25Ub3RhbCIsInJlZHVjZSIsImR1Y3VjdGlvbkl0ZW1Qcm9sYmVtcyIsImR1Y3VjdGlvbkl0ZW1Ub3RhbCIsImFsbFByb2JsZW1zIiwicmVqZWN0aW9uIiwidmFsaWRJdGVtcyIsImhhc1JlY29yZCIsImNoaWxkcmVuIiwiY2hpbGQiLCJjb25jYXQiLCJnZXRCYXRjaFBsYWNlIiwiZ2V0QmF0Y2hQbGFjZUNoZWNraXRlbXMiLCJpdGVtTWFwIiwicnVsZSIsInJhdGluZ19ydWxlIiwicGFyZW50SWQiLCJjaGVja2l0ZW1fcGFyZW50X2lkIiwidW5xdWFsaWZpZWROdW0iLCJzZXREYXRhTGV2ZWwiLCJnZXRTcGVjaWFsSW5zcGVjdERhdGEiLCJjaGVja2l0ZW1FeHRlbnNpb24iLCJpbWFnZXMiLCJjaGVja2l0ZW0iLCJjaGVja2l0ZW1fbmFtZSIsImNoZWNraXRlbV9jb2RlIiwiY2hlY2tpdGVtX2Z1bGxfbmFtZSIsImNoZWNrZXJfbmFtZSIsIm1vYmlsZSIsImNoZWNrZXJfbW9iaWxlIiwiaXNfaW1fdXNlciIsImNoZWNrZXJfaXNfaW1fdXNlciIsInBhcmFtcyIsImpzb25TdHJpbmdpZnkiLCJzYXZlRHJhZnRUb01ta3YiLCJyZW1vdmVEcmFmdEZyb21NbWt2IiwidXBkYXRlU3BlY2lhbEluc3BlY3REYXRhIiwiZ2V0V2FpdFVwbG9hZENvdW50Iiwibm90RG9uZVBsYWNlcyIsImhhc0RyYWZ0UGxhY2VzIiwicGxhY2VOYW1lU2V0IiwiZGVzY0xpc3QiLCJnZXRTcGVjaWFsSW5zcGVjdERlc2NzIiwiZGVzYyIsInBhcmVudCIsInNpYmxpbmdzIiwiT2xkRml0dGVyIiwiZ2V0T2xkUm91dGVRdWVyeSIsInJvb3RfaWQiLCJjaGVja0l0ZW1JZCIsInJvb3RJZCIsInByb2JsZW1faWQiLCJwb2ludElkIiwiZ2V0Um9vdFNwZWNpYWxJbnNwZWN0SWQiLCJnZXRCYXRjaEVuZFNwZWNpYWxJbnNwZWN0SWRzIiwiZW5kU3BlY2lhbEluc3BlY3RJZHMiLCJlbmRQYXJhbXMiLCJwYXJlbnRJZFNldCIsImVuZEl0ZW1zIiwiaW5zZXJ0T2JqZWN0IiwiYWxsIiwidGFyZ2V0IiwicHJvcGVydHkiLCJyZWNlaXZlciIsIlJlZmxlY3QiLCJnZXQiLCJiYXNlIiwib2JqZWN0IiwiT2JqZWN0IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJjYWxsIiwiZ2V0UHJvdG90eXBlT2YiLCJnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IiLCJldmFsU3RyIiwiaXNOdW1iZXIiLCJoYXNWYWwiLCJzdHIiLCJjb21waWxlU3RyIiwiXyIsImlzTWF0Y2giLCJldmFsIiwibnVtIiwiaXNOYU4iLCJNYXRoIiwicm91bmQiLCJnZXRVc2VyT2JqZWN0IiwibW1rdktleXMiLCJTUEVDSUFMX0lOU1BFQ1RfRFJBRlQiLCJkcmFmdERhdGEiLCJpbmRleCIsImZpbmRJbmRleCIsInNwbGljZSIsInNhdmVVc2VyT2JqZWN0Iiwic3BlY2lhbF9pbnNwZWN0Iiwic3BlY2lhbEluc3BlY3REcmFmdCIsInNwZWNpYWxfaW5zcGVjdF9wbGFjZV9jaGVja2l0ZW0iLCJzcGVjaWFsSW5zcGVjdFBsYWNlQ2hlY2tpdGVtRHJhZnQiLCIkbG9nIiwibG9nIiwic2VsZWN0U3BlY2lhbEluc3BlY3QiLCJzZWxlY3RTcGVjaWFsSW5zcGVjdFBsYWNlQ2hlY2tpdGVtIiwidXBkYXRlUGxhY2VTcGVjaWFsSW5zcGVjdERhdGEiLCJTUEVDSUFMX0lOU1BFQ1RfREVUQUlMX0RSQUZUX1NUQVRVUyIsInN0YXR1c1NldCIsInRvdGFsTW9kZUNmZyIsInRvdGFsTW9kZSIsImRlZmF1bHRNb2RlIiwiZGVmYXVsdFRvdGFsTW9kZSIsIm9wdGlvbnMiLCJnZXRUb3RhbE1vZGUiLCJjbG9uZURlZXAiLCJzdHlsZU5hbWUiLCJzdHlsZSIsIm1lcmdlIiwiaGFuZGxlciIsIm9wdGlvbiIsInR5cGUiLCJtZXRob2QiLCJwYXR0ZXJuIiwiZXJyb3IiLCJ2YWxpZENoaWxkcmVuIiwiZXh0ZW5kRGF0YSIsIm1hcHMiLCJzaG93IiwidGV4dCIsImNvbG9yIiwiY2FsYyIsInRleHRTZXQiLCJyZXN1bHRUeXBlIiwibnVtYmVyRml4ZWQiLCJ0b0ZpeGVkIiwiZm9ybXVsYSIsImdldFN0YXR1cyIsInN0YXR1c1Nob3ciLCJyZW1vdmVTdGF0dXMiLCJzYXZlU3RhdHVzIiwic3VibWl0U3BlY2lhbEluc3BlY3REYXRhIiwicm91dGVUb0VkaXQiLCJyb3V0ZVRvVmlldyIsImJ0biIsIm9wZXJhdGUiLCJjaGFuZ2VTcGVjaWFsSW5zcGVjdFN0YXR1cyIsInNhdmVEZXRhaWwiLCJhbGVydCIsIndpdGhQcm9ibGVtIiwidGFibGVNYXBzIiwidGFibGVzIiwiZ2V0V2FpdFVwbG9hZFF1ZXJ5VGFibGVzIiwiZ2V0VXBsb2FkUXVldWUiLCJ1cGxvYWRRdWV1ZSIsInRhYmxlIiwicmVsYXRpb25fdGFibGVfbmFtZSIsInJlbGF0aW9uX2lkIiwiZmlsdGVySWRzQnlCYXRjaElkIiwiZGF0YXMiLCJmaW5pc2hCYXRjaENoZWNrIiwic3RhdHVzVG90YWxDb25maWciLCJpc0ZpbHRlckZpcnN0Iiwic3RhdHVzTGlzdCIsIml0ZW1Db25maWciLCJjYWxjVG90YWxWYWx1ZSIsInByZSIsIndlYnBhY2tDb250ZXh0IiwicmVxIiwid2VicGFja0NvbnRleHRSZXNvbHZlIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm8iLCJlIiwibW9kdWxlIiwiZXhwb3J0cyIsInJvdXRlVG9PbGRQcm9ibGVtRGV0YWlsIiwicHJvYmxlbUlkIiwiU1RBVFVTX0RSQUZUIl0sIm1hcHBpbmdzIjoidXVCQVdxQkEsRSxpS0FDTkMsR0FDWCxJQUFJQyxFQUFNLGdYQUFILE9BS2NELEVBTGQsZ0NBT1AsT0FBT0UsSUFBUUMsTUFBTUYsTyxhQVRxQkcsSSxxcUJDQ3pCQyxFLHFLQU1KQyxFQUFNQyxFQUFPQyxHQUN0QkYsRUFBS0csU0FBV0MsSUFDbEJDLEtBQUtD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TixJQUFPQyxLQUFLLENBQ1ZDLEtBQU0sNkJBQ050RSxNQUFPLENBQ0xILFFBQVNvQixFQUNUSCxpQkFBa0JpTCxFQUNsQndGLFlBQWFyRCxFQUNiaE4sS0FBTUEsRUFDTnNRLE9BQVFGLEssb0xBS2NuUixHLHVHQUN0QlcsRUFBbUJYLEdBQVFBLEVBQUt5QyxHLFNBQ2RwQyxLQUFLNlEsaUJBQWlCdlEsRyxPQUF4QzhDLEUsT0FDRW1JLEVBQXVEbkksRUFBdkRtSSxtQkFBb0JtQyxFQUFtQ3RLLEVBQW5Dc0ssYUFBY2hOLEVBQXFCMEMsRUFBckIxQyxLQUFNdVEsRUFBZTdOLEVBQWY2TixXQUU5Q3JOLElBQU9DLEtBQUssQ0FDVkMsS0FBTSw2QkFDTnRFLE1BQU8sQ0FDTGMsaUJBQWtCaUwsRUFDbEIwRixXQUFZQSxFQUNaRixZQUFhckQsRUFDYmhOLEtBQU1BLEssb0lBTUlyQixFQUFTaUIsRUFBa0JDLEdBQ3pDUCxLQUFLUSxtQkFBbUIsQ0FBRUMsU0FBVXBCLEVBQVNxQixLQUFNLE8sbUZBRTVCZCxFQUFPZSxFQUFVQyxHLDZGQUNwQ3dELEVBQWNDLFlBQWlCekQsRUFBVSxTQUFVLENBQUMrWCxTQUNwRHBGLEVBQVluUCxFQUFZdVUsTUFDWixHLG1CQUNWN1YsRUFBUzlCLElBQU13RCxPQUFPLENBQ3hCQyxNQUNFLHVDQUNBOE8sRUFDQSx3Q0FDRjdPLFdBQVksS0FDWkMsT0FBUSxPLHlDQUdEN0IsRyxnQ0FHSjlCLElBQU1DLFFBQVEsZ0Msa0dBMUVnQkMiLCJmaWxlIjoianMvY2h1bmstNTViZjUzNWMuanM/djE2MDg3MTQ0NTExOTUiLCJzb3VyY2VzQ29udGVudCI6WyIvKlxuICogQEF1dGhvcjogamlhbmdsMDJcbiAqIEBEYXRlOiAyMDIwLTA4LTI4IDE0OjM1OjM0XG4gKiBATGFzdEVkaXRvcnM6IGppYW5nbDAyXG4gKiBATGFzdEVkaXRUaW1lOiAyMDIwLTA5LTA5IDE4OjI0OjU3XG4gKiBARGVzY3JpcHRpb246IOS4k+mhueW3oeajgO+8jOWPr+aJk+WIhu+8jOaMiea7oeWIhuWHj+aJo+WIhuiuoeeul+aAu+WIhiDku5Plgqjmlofku7ZcbiAqL1xuXG5pbXBvcnQgbG9jYWxEQiBmcm9tICdAc3JjL2ZyYW1ld29yay9sb2NhbERCJztcbmltcG9ydCBSZXBvc2l0b3JpZXNCYXNlIGZyb20gJy4vYmFzZSc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFJlcG9zaXRvcmllc01vZGUgZXh0ZW5kcyBSZXBvc2l0b3JpZXNCYXNlIHtcbiAgZ2V0SW5kZXhMaXN0KGJhdGNoSWQpIHtcbiAgICB2YXIgc3FsID0gYHNlbGVjdCBzaS4qLCBzaS5jaGVja2l0ZW1fbmFtZSBhcyBuYW1lLFxuXHRcdChzZWxlY3QgY291bnQoKikgZnJvbSBjaGVja3F1YWxpdHlfcHJvYmxlbSBjcCB3aGVyZSBjcC5iaXpfaWQgPSBzaS5pZCApIGFzIHByb2JsZW1OdW0sXG5cdFx0KHNlbGVjdCBzdW0oZGVkdWN0aW9uKSBmcm9tIGNoZWNrcXVhbGl0eV9wcm9ibGVtIGNwMSBcbiAgICAgIHdoZXJlIGJhdGNoX3R5cGUgPSAn5LiT6aG55beh5qOAJyBhbmQgY3AxLmJpel9pZCA9IHNpLmlkIGFuZCBjcDEuc3RhdHVzICE9ICfojYnnqL8nIGFuZCBjcDEuc3RhdHVzICE9ICflt7LlhbPpl60nKSBhcyBkZWR1Y3Rpb24gXG5cdFx0ZnJvbSBzcGVjaWFsX2luc3BlY3Qgc2kgXG5cdFx0d2hlcmUgc2kuYmF0Y2hfaWQgPSAnJHtiYXRjaElkfScgb3JkZXIgYnkgc2kuY2hlY2tpdGVtX2NvZGVgO1xuXG4gICAgcmV0dXJuIGxvY2FsREIucXVlcnkoc3FsKTtcbiAgfVxufVxuIiwiLypcbiAqIEBBdXRob3I6IGppYW5nbDAyXG4gKiBARGF0ZTogMjAyMC0wOC0yOCAxNDoyNToyNFxuICogQExhc3RFZGl0b3JzOiBqaWFuZ2wwMlxuICogQExhc3RFZGl0VGltZTogMjAyMC0xMC0yMyAxNDoyNjo1MVxuICogQERlc2NyaXB0aW9uOiDkuJPpobnlt6Hmo4DvvIzlrp7mtYvlrp7ph4/mqKHmnb8gc2VydmljZVxuICovXG5cbmltcG9ydCBTZXJ2aWNlQmFzZSBmcm9tICcuL2Jhc2UnO1xuaW1wb3J0ICogYXMgQ09OU1QgZnJvbSAnLi4vY29uc3QuanMnO1xuaW1wb3J0IFBvcHVwIGZyb20gJ0BzcmMvdXRpbHMvcG9wdXAnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBTZXJ2aWNlTW9kZSBleHRlbmRzIFNlcnZpY2VCYXNlIHtcbiAgLyoqXG4gICAqIEBkZXNjcmlwdGlvbjog5pyr57qn6IqC54K554K55Ye75LqL5Lu2XG4gICAqIEBwYXJhbSB7dHlwZX1cbiAgICogQHJldHVybiB7Kn1cbiAgICovXG4gIG9uQ2xpY2tFbmROb2RlKGl0ZW0sIGJhdGNoLCBlZGl0YWJsZSkge1xuICAgIGlmIChpdGVtLnN0YXR1cyA9PT0gQ09OU1QuU1RBVFVTX1FVQUxJRklFRCkge1xuICAgICAgdGhpcy5yb3V0ZVRvT2xkU2V0UGFzcyhpdGVtKTtcbiAgICB9IGVsc2UgaWYgKGl0ZW0uc3RhdHVzICE9PSBDT05TVC5TVEFUVVNfREVGQVVMVCB8fCBpdGVtLnRlbXBvcmFyeV9zdG9yYWdlKSB7XG4gICAgICB0aGlzLnJvdXRlVG9PbGRQcm9ibGVtTGlzdChpdGVtLCBlZGl0YWJsZSk7XG4gICAgfVxuICB9XG5cbiAgcm91dGVUb0VkaXQoaXRlbSkge1xuICAgIHRoaXMucm91dGVUb09sZFByb2JsZW1FZGl0KGl0ZW0pO1xuICB9XG5cbiAgcm91dGVUb1ZpZXcoaXRlbSkge1xuICAgIHRoaXMucm91dGVUb09sZFByb2JsZW1WaWV3KGl0ZW0pO1xuICB9XG5cbiAgY2hhbmdlU3BlY2lhbEluc3BlY3RTdGF0dXMoaXRlbSkge1xuICAgIHRoaXMucm91dGVUb09sZFNldFBhc3MoaXRlbSk7XG4gIH1cblxuICAvKiDot7PovazliLDpl67popjliJfooaggKi9cbiAgZ290b1Byb2JsZW1MaXN0KGJhdGNoSWQsIHNwZWNpYWxJbnNwZWN0SWQsIHBsYWNlSWQpIHtcbiAgICB0aGlzLmdvdG9PbGRQcm9ibGVtTGlzdCh7IGJhdGNoX2lkOiBiYXRjaElkLCBtb2RlOiA4IH0pO1xuICB9XG5cbiAgYXN5bmMgZmluaXNoQmF0Y2hDb25maXJtKGJhdGNoLCBsaXN0RGF0YSwgdHJlZURhdGEpIHtcbiAgICBsZXQgaGFzRHJhZnQgPSAobGlzdERhdGEgfHwgW10pLnNvbWUoXG4gICAgICBpdGVtID0+ICFpdGVtLnRyZWVOb2RlSXNGaXJzdCAmJiBpdGVtLnRyZWVOb2RlSXNFbmQgJiYgaXRlbS50ZW1wb3Jhcnlfc3RvcmFnZVxuICAgICk7XG4gICAgaWYgKGhhc0RyYWZ0KSB7XG4gICAgICByZXR1cm4gUG9wdXAuY29uZmlybSgn5pyJ5pqC5a2Y5pWw5o2u5pyq5o+Q5Lqk77yM57un57ut5pON5L2c5bCG5riF6Zmk5omA5pyJ5pqC5a2Y5pWw5o2u77yM5piv5ZCm56Gu5a6a5o+Q5Lqk77yfJyk7XG4gICAgfVxuICB9XG59XG4iLCIvKlxuICogQEF1dGhvcjogamlhbmdsMDJcbiAqIEBEYXRlOiAyMDIwLTA4LTI4IDE0OjM1OjM0XG4gKiBATGFzdEVkaXRvcnM6IGppYW5nbDAyXG4gKiBATGFzdEVkaXRUaW1lOiAyMDIwLTEwLTIxIDE0OjA4OjAyXG4gKiBARGVzY3JpcHRpb246IOWQiOWQjOW3oeajgO+8jOS7k+WCqOaWh+S7tlxuICovXG5cbi8vIGltcG9ydCBsb2NhbERCIGZyb20gJ0BzcmMvZnJhbWV3b3JrL2xvY2FsREInO1xuaW1wb3J0IFJlcG9zaXRvcmllc0Jhc2UgZnJvbSAnLi9iYXNlJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUmVwb3NpdG9yaWVzTW9kZSBleHRlbmRzIFJlcG9zaXRvcmllc0Jhc2Uge1xuICBnZXRJbmRleExpc3QoYmF0Y2hJZCkge1xuICAgIHZhciBzcWwgPSBgc2VsZWN0IHNpLiosIHNpLmNoZWNraXRlbV9uYW1lIGFzIG5hbWUsXG4gICAgKHNlbGVjdCBjb3VudCgqKSBmcm9tIGNoZWNrcXVhbGl0eV9wcm9ibGVtIGNwIFxuICAgICAgd2hlcmUgY3AuYml6X2lkID0gc2kuaWQgYW5kIGNwLnN0YXR1cyAhPSfojYnnqL8nICkgYXMgcHJvYmxlbV9udW0sXG5cdCAgKHNlbGVjdCBjb3VudCgqKSBmcm9tIGNoZWNrcXVhbGl0eV9wcm9ibGVtIGNwIFxuICAgICAgd2hlcmUgY3AuYml6X2lkID0gc2kuaWQgYW5kIGNwLnN0YXR1cyA9J+iNieeovycgKSBhcyB0ZW1wb3Jhcnlfc3RvcmFnZSxcbiAgICAoc2VsZWN0IGRlZHVjdGlvbiBmcm9tIGNoZWNrcXVhbGl0eV9wcm9ibGVtIGNwMSBcbiAgICAgIHdoZXJlIGJhdGNoX3R5cGUgPSAn5LiT6aG55beh5qOAJyBhbmQgY3AxLmJpel9pZCA9IHNpLmlkIGFuZCBjcDEuc3RhdHVzICE9ICfojYnnqL8nIE9SREVSIEJZIGRlZHVjdGlvbiBkZXNjLCBjcmVhdGVkX29uIGRlc2MgbGltaXQgMSkgYXMgZGVkdWN0aW9uLFxuICAgIChzZWxlY3QgcmVkbGluZV9kZWR1Y3Rpb24gZnJvbSBjaGVja3F1YWxpdHlfcHJvYmxlbSBjcDEgXG4gICAgICB3aGVyZSBiYXRjaF90eXBlID0gJ+S4k+mhueW3oeajgCcgYW5kIGNwMS5iaXpfaWQgPSBzaS5pZCBhbmQgY3AxLnN0YXR1cyAhPSAn6I2J56i/JyBPUkRFUiBCWSBkZWR1Y3Rpb24gZGVzYywgY3JlYXRlZF9vbiBkZXNjIGxpbWl0IDEpIGFzIHJlZGxpbmVfZGVkdWN0aW9uLFxuICAgIChzZWxlY3QgZGVkdWN0aW9uX2xldmVsIGZyb20gY2hlY2txdWFsaXR5X3Byb2JsZW0gY3AxIFxuICAgICAgd2hlcmUgYmF0Y2hfdHlwZSA9ICfkuJPpobnlt6Hmo4AnIGFuZCBjcDEuYml6X2lkID0gc2kuaWQgYW5kIGNwMS5zdGF0dXMgIT0gJ+iNieeovycgT1JERVIgQlkgZGVkdWN0aW9uIGRlc2MsIGNyZWF0ZWRfb24gZGVzYyBsaW1pdCAxKSBhcyBkZWR1Y3Rpb25fbGV2ZWwsXG5cdFx0KHNlbGVjdCBpZCBmcm9tIGNoZWNrcXVhbGl0eV9wcm9ibGVtIGNwIHdoZXJlIGNwLmJpel9pZCA9IHNpLmlkIG9yZGVyIGJ5IGNwLmRvd25sb2FkX3RpbWUgZGVzYyBsaW1pdCAxKSBhcyBwcm9ibGVtX2lkXG5cdFx0ZnJvbSBzcGVjaWFsX2luc3BlY3Qgc2kgXG5cdFx0d2hlcmUgc2kuYmF0Y2hfaWQgPSAnJHtiYXRjaElkfScgb3JkZXIgYnkgc2kuY2hlY2tpdGVtX2NvZGVgO1xuXG4gICAgcmV0dXJuIGxvY2FsREIucXVlcnkoc3FsKTtcbiAgfVxufVxuIiwiLypcbiAqIEBBdXRob3I6IGppYW5nbDAyXG4gKiBARGF0ZTogMjAyMC0wOC0wMyAxMDo0MDowMFxuICogQExhc3RFZGl0b3JzOiBqaWFuZ2wwMlxuICogQExhc3RFZGl0VGltZTogMjAyMC0wOS0wOSAxMDowNTowM1xuICogQERlc2NyaXB0aW9uOiDkuJPpobnlt6Hmo4DvvIzku5Plgqjmlofku7blhaXlj6NcbiAqL1xuaW1wb3J0IFJlcG9zaXRvcmllc0Jhc2VDbGFzcyBmcm9tICcuL2Jhc2UnO1xuXG5jb25zdCBSZXBvc2l0b3JpZXNCYXNlID0gbmV3IFJlcG9zaXRvcmllc0Jhc2VDbGFzcygpO1xuXG5leHBvcnQgZGVmYXVsdCBSZXBvc2l0b3JpZXNCYXNlO1xuXG4vKiDmibnph4/liqDovb3mqKHmnb/ku5Plgqjmlofku7YgKi9cbmNvbnN0IGZpbGVzID0gcmVxdWlyZS5jb250ZXh0KCcuLycsIGZhbHNlLCAvbW9kZVxcLVxcZCtcXC5qcyQvKTtcbmxldCBtb2R1bGVzID0ge307XG5maWxlcy5rZXlzKCkuZm9yRWFjaChrZXkgPT4ge1xuICBsZXQgTW9kZUNsYXNzID0gZmlsZXMoa2V5KS5kZWZhdWx0O1xuICBsZXQgbW9kZU5hbWUgPSBrZXkucmVwbGFjZSgvKFxcLlxcL3xcXC5qcykvZywgJycpO1xuICBtb2R1bGVzW21vZGVOYW1lXSA9IG5ldyBNb2RlQ2xhc3MoKTtcbn0pO1xuXG5leHBvcnQgZnVuY3Rpb24gZ2V0UmVwb3NpdG9yaWVzKG1vZGUpIHtcbiAgcmV0dXJuIG1vZHVsZXNbYG1vZGUtJHttb2RlfWBdIHx8IFJlcG9zaXRvcmllc0Jhc2U7XG59XG4iLCIvKlxuICogQEF1dGhvcjogamlhbmdsMDJcbiAqIEBEYXRlOiAyMDIwLTA4LTI4IDE0OjI1OjI0XG4gKiBATGFzdEVkaXRvcnM6IGppYW5nbDAyXG4gKiBATGFzdEVkaXRUaW1lOiAyMDIwLTEwLTE0IDExOjI4OjQxXG4gKiBARGVzY3JpcHRpb246IOS4k+mhueW3oeajgO+8jFwi5Y+v5omT5YiG77yM5oyJ5b6X5YiG546H6K6h566X5oC75YiGXCIg5qih5p2/IHNlcnZpY2VcbiAqL1xuXG5pbXBvcnQgU2VydmljZUJhc2UgZnJvbSAnLi9iYXNlJztcbmltcG9ydCBEYXRhU3luY2hyb25pemVyIGZyb20gJ0BzcmMvc2VydmljZS9jb21tb24vZGF0YS1zeW5jaHJvbml6ZXInO1xuaW1wb3J0IG5ldHdvcmsgZnJvbSAnQHNyYy9mcmFtZXdvcmsvbmV0d29yayc7XG5pbXBvcnQgV2ViU2VydmljZSBmcm9tICdAc3JjL3NlcnZpY2UvY29tbW9uL3dlYi1zZXJ2aWNlJztcbmltcG9ydCBsb2NhbERCIGZyb20gJ0BzcmMvZnJhbWV3b3JrL2xvY2FsREInO1xuaW1wb3J0IHN0b3JlIGZyb20gJ0BzdG9yZSc7XG5pbXBvcnQgKiBhcyBDT05TVCBmcm9tICcuLi9jb25zdC5qcyc7XG4vLyBpbXBvcnQgUG9wdXAgZnJvbSAnQHNyYy91dGlscy9wb3B1cCc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFNlcnZpY2VNb2RlIGV4dGVuZHMgU2VydmljZUJhc2Uge1xuICAvKipcbiAgICogQGRlc2NyaXB0aW9uOiDmnKvnuqfoioLngrnngrnlh7vkuovku7ZcbiAgICogQHBhcmFtIHt0eXBlfVxuICAgKiBAcmV0dXJuIHsqfVxuICAgKi9cbiAgb25DbGlja0VuZE5vZGUoaXRlbSwgYmF0Y2gsIGVkaXRhYmxlKSB7XG4gICAgaWYgKGl0ZW0uc3RhdHVzID09PSBDT05TVC5TVEFUVVNfUVVBTElGSUVEKSB7XG4gICAgICAvLyDlkIjmoLxcbiAgICAgIHRoaXMucm91dGVUb09sZFNldFBhc3MoaXRlbSk7XG4gICAgfSBlbHNlIGlmIChpdGVtLnByb2JsZW1OdW0pIHtcbiAgICAgIC8vIOaciemXrumimFxuICAgICAgdGhpcy5yb3V0ZVRvT2xkUHJvYmxlbUxpc3QoaXRlbSwgZWRpdGFibGUpO1xuICAgIH1cbiAgfVxuXG4gIHJvdXRlVG9FZGl0KGl0ZW0pIHtcbiAgICB0aGlzLnJvdXRlVG9PbGRQcm9ibGVtRWRpdChpdGVtKTtcbiAgfVxuXG4gIHJvdXRlVG9WaWV3KGl0ZW0pIHtcbiAgICB0aGlzLnJvdXRlVG9PbGRQcm9ibGVtVmlldyhpdGVtKTtcbiAgfVxuXG4gIGFzeW5jIGNoYW5nZVNwZWNpYWxJbnNwZWN0U3RhdHVzKGl0ZW0sIHZhbHVlLCB0aXBzKSB7XG4gICAgLy8g5pqC5pe26YCC6YWN6ICB55qE6aG16Z2i77yM5ZCI5qC86Lez5Yiw6K6+572u5ZCI5qC855qE6aG16Z2i77yM5ZCO6Z2i5Lya56e76ZmkXG4gICAgaWYgKHZhbHVlID09PSBDT05TVC5TVEFUVVNfUVVBTElGSUVEKSB7XG4gICAgICB0aGlzLnJvdXRlVG9PbGRTZXRQYXNzKGl0ZW0pO1xuICAgIH0gZWxzZSB7XG4gICAgICBzdXBlci5jaGFuZ2VTcGVjaWFsSW5zcGVjdFN0YXR1cyhpdGVtLCB2YWx1ZSwgdGlwcyk7XG4gICAgfVxuICB9XG5cbiAgLy8g6Lez6L2s5Yiw6Zeu6aKY5YiX6KGo77yM5pqC5pe26Lez5Yiw6ICB6aG16Z2i77yM5ZCO6Z2i5Lya56e76ZmkXG4gIGdvdG9Qcm9ibGVtTGlzdChiYXRjaElkLCBzcGVjaWFsSW5zcGVjdElkLCBwbGFjZUlkKSB7XG4gICAgdGhpcy5nb3RvT2xkUHJvYmxlbUxpc3QoeyBiYXRjaF9pZDogYmF0Y2hJZCwgbW9kZTogdGhpcy5tb2RlIH0pO1xuICB9XG5cbiAgYXN5bmMgZmluaXNoQmF0Y2goYmF0Y2gsIGNvbmZpZykge1xuICAgIGlmIChjb25maWcuZ3JheUtleSA9PT0gJ1VzaW5nU3BlY2lhbEluc3BlY3RNb2RlM0RlZmF1bHRPaycpIHtcbiAgICAgIC8vIOWvuSBleF9kYXRhIOWBmuWkhOeQhlxuICAgICAgbGV0IGJhdGNoSWQgPSBiYXRjaC5pZDtcbiAgICAgIGJhdGNoLnN0YXR1cyA9IENPTlNULlNUQVRVU19CQVRDSF9GSU5JU0hFRDtcblxuICAgICAgbGV0IGhhc05ldHdvcmsgPSBhd2FpdCBuZXR3b3JrLmdldEhhc05ldHdvcmsoKTtcbiAgICAgIGlmICghaGFzTmV0d29yaykge1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoJ+W9k+WJjee9kee7nOaXoOazleWQjOatpeaVsOaNricpO1xuICAgICAgfVxuXG4gICAgICBsZXQgcmVzID0gYXdhaXQgV2ViU2VydmljZS5wb3N0KCcvYmF0Y2gvdXBsb2FkJywgbnVsbCwgeyBkYXRhOiB7IGJhdGNoOiBiYXRjaCB9IH0pO1xuXG4gICAgICBpZiAoJ2V4X2RhdGEnIGluIHJlcykge1xuICAgICAgICBhd2FpdCBXZWJTZXJ2aWNlLmltcG9ydERhdGEoeyByZXN1bHQ6IHJlcy5leF9kYXRhIH0pO1xuICAgICAgfVxuICAgICAgYXdhaXQgbG9jYWxEQi51cGRhdGUoJ2JhdGNoJywgcmVzLmJhdGNoLCB7IGlkOiBiYXRjaElkIH0pO1xuICAgICAgLy8g5oGi5aSN5qOA5p+l6aG56I2J56i/5pWw5o2uXG4gICAgICBsZXQgcmVzZXREYXRhID0geyBzdGF0dXM6IENPTlNULlNUQVRVU19ERUZBVUxULCBkZWR1Y3Rpb246IDAsIGltYWdlX2ZpbGU6ICdbXScgfTtcbiAgICAgIGxldCBxdWVyeURhdGEgPSB7XG4gICAgICAgIGJhdGNoX2lkOiBiYXRjaC5pZCxcbiAgICAgICAgc3RhdHVzOiBDT05TVC5TVEFUVVNfRFJBRlQsXG4gICAgICB9O1xuICAgICAgYXdhaXQgdGhpcy5SZXBvc2l0b3JpZXMudXBkYXRlU3BlY2lhbEluc3BlY3RBbGwocXVlcnlEYXRhLCByZXNldERhdGEpO1xuICAgICAgLy8g5Yig6Zmk5omA5pyJ6I2J56i/6Zeu6aKYXG4gICAgICBsZXQgcHJvYmxlbUlkcyA9IGF3YWl0IHRoaXMuUmVwb3NpdG9yaWVzLmdldERyYWZ0UHJvYmxlbUJ5QmF0Y2hJZChiYXRjaElkKTtcbiAgICAgIGxldCBpZHMgPSAocHJvYmxlbUlkcyB8fCBbXSkubWFwKGl0ZW0gPT4gaXRlbS5pZCk7XG4gICAgICByZXR1cm4gdGhpcy5SZXBvc2l0b3JpZXMuZGVsZXRlUHJvYmxlbUJ5SWQoaWRzKTtcbiAgICB9IGVsc2Uge1xuICAgICAgYXdhaXQgc3VwZXIuZmluaXNoQmF0Y2goYmF0Y2gpO1xuICAgIH1cbiAgfVxufVxuIiwiLypcbiAqIEBBdXRob3I6IGppYW5nbDAyXG4gKiBARGF0ZTogMjAyMC0wOC0yOCAxNDoyNToyNFxuICogQExhc3RFZGl0b3JzOiBqaWFuZ2wwMlxuICogQExhc3RFZGl0VGltZTogMjAyMC0wOS0xNCAxOTozNTozOFxuICogQERlc2NyaXB0aW9uOiDkuJPpobnlt6Hmo4DvvIzlrp7mtYvlrp7ph4/mqKHmnb8gc2VydmljZVxuICovXG5cbmltcG9ydCBTZXJ2aWNlQmFzZSBmcm9tICcuL2Jhc2UnO1xuLy8gaW1wb3J0ICogYXMgQ09OU1QgZnJvbSAnLi4vY29uc3QuanMnO1xuaW1wb3J0IHJvdXRlciBmcm9tICdAcm91dGVyJztcbmltcG9ydCBQb3B1cCBmcm9tICdAdXRpbHMvcG9wdXAnO1xuaW1wb3J0IHsgZ2V0RW5kVG90YWxCeWtleSB9IGZyb20gJ0Bjb21tb24vZGF0YS1oYW5kbGUnO1xuaW1wb3J0IHsgU1RBVFVTX0RFRkFVTFQgfSBmcm9tICdAdmlld3Mvc3BlY2lhbC1pbnNwZWN0LXJlZG8vY29uc3QnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBTZXJ2aWNlTW9kZSBleHRlbmRzIFNlcnZpY2VCYXNlIHtcbiAgLyoqXG4gICAqIEBkZXNjcmlwdGlvbjog54K55Ye75pyr57qn6IqC54K577yI6Z2e5pyr57qn6IqC54K56Ieq5Yqo5omn6KGM5bGV5byAL+aUtue8qe+8iVxuICAgKiBAcGFyYW0ge09iamVjdH0gaXRlbSDngrnlh7vnmoToioLngrlcbiAgICogQHBhcmFtIHtPYmplY3R9IGJhdGNoIOW9k+WJjeaJueasoeaVsOaNrlxuICAgKiBAcGFyYW0ge0Jvb2xlYW59IGVkaXRhYmxlIOaYr+WQpuWPr+S7pee8lui+kVxuICAgKiBAcmV0dXJuIHt1bmRlZmluZWR9fVxuICAgKi9cbiAgb25DbGlja0VuZE5vZGUoaXRlbSwgYmF0Y2gsIGVkaXRhYmxlKSB7XG4gICAgLy8g5a6e5rWL5a6e6YeP55qE6K+m5oOF6aG15pqC5pyq5pW055CG77yM5YWI6Lez5Yiw6ICB6aG16Z2iXG4gICAgcm91dGVyLnB1c2goe1xuICAgICAgcGF0aDogJy9zcGVjaWFsLWluc3BlY3QtbWVhc3VyZS1wcm9ibGVtLWRldGFpbCcsXG4gICAgICBxdWVyeToge1xuICAgICAgICBiaXpJZDogaXRlbS5pZCxcbiAgICAgIH0sXG4gICAgfSk7XG4gICAgLyogaWYgKGVkaXRhYmxlKSB7XG4gICAgICByb3V0ZXIucHVzaCh7XG4gICAgICAgIG5hbWU6IENPTlNULlJPVVRFX05BTUVfREVUQUlMX01FQVNVUkUsXG4gICAgICAgIHF1ZXJ5OiB7XG4gICAgICAgICAgc3BlY2lhbEluc3BlY3RJZDogaXRlbS5pZCxcbiAgICAgICAgfSxcbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyDkuI3og73nvJbovpHvvIzkvYbmmK/lj6/ku6Xmn6XnnIvlt7LmnInmlbDmja5cbiAgICAgIGlmIChpdGVtLnN0YXR1cyA9PT0gQ09OU1QuU1RBVFVTX0ZJTklTSEVEKSB7XG4gICAgICAgIHJvdXRlci5wdXNoKHtcbiAgICAgICAgICBuYW1lOiBDT05TVC5ST1VURV9OQU1FX0RFVEFJTF9NRUFTVVJFLFxuICAgICAgICAgIHF1ZXJ5OiB7XG4gICAgICAgICAgICBzcGVjaWFsSW5zcGVjdElkOiBpdGVtLmlkLFxuICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0gKi9cbiAgfVxuICBhc3luYyBiYXRjaENoZWNrKGJhdGNoLCBsaXN0RGF0YSwgY29uZmlnLCB0cmVlRGF0YSkge1xuICAgIGxldCBkYXRhID0gYXdhaXQgc3VwZXIuYmF0Y2hDaGVjayhiYXRjaCwgbGlzdERhdGEsIGNvbmZpZywgdHJlZURhdGEpO1xuICAgIGlmIChkYXRhKSB7XG4gICAgICByZXR1cm4gZGF0YTtcbiAgICB9XG4gICAgbGV0IGhhc1BsYWNlID0gYmF0Y2gucGxhY2UgJiYgYmF0Y2gucGxhY2UudHJpbSgpO1xuICAgIGlmICghaGFzUGxhY2UpIHtcbiAgICAgIHJldHVybiB7IGNvZGU6IDEsIG1zZzogJ+ajgOafpemDqOS9jeW/heWhqycgfTtcbiAgICB9XG4gIH1cbiAgYXN5bmMgZmluaXNoQmF0Y2hDb25maXJtKGJhdGNoLCBsaXN0RGF0YSwgdHJlZURhdGEpIHtcbiAgICBsZXQgc3RhdHVzVG90YWwgPSBnZXRFbmRUb3RhbEJ5a2V5KHRyZWVEYXRhLCAnc3RhdHVzJywgW1NUQVRVU19ERUZBVUxUXSk7XG4gICAgbGV0IG5vdERhdGFOdW0gPSBzdGF0dXNUb3RhbFtTVEFUVVNfREVGQVVMVF07XG4gICAgaWYgKG5vdERhdGFOdW0gPiAwKSB7XG4gICAgICBsZXQgcmVzdWx0ID0gUG9wdXAucG9wQm94KHtcbiAgICAgICAgdGl0bGU6XG4gICAgICAgICAgJ+aciTxzcGFuIGNsYXNzPVwiY29sb3Itb3JhbmdlIHBsNSBwcjVcIj4nICsgbm90RGF0YU51bSArICc8L3NwYW4+6aG55peg6K6w5b2V77yM5piv5ZCm5q2j5bi45o+Q5Lqk77yfJyxcbiAgICAgICAgY2FuY2VsVGV4dDogJ+WPlua2iCcsXG4gICAgICAgIG9rVGV4dDogJ+aPkOS6pCcsXG4gICAgICB9KTtcbiAgICAgIGlmICghcmVzdWx0KSB7XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBQb3B1cC5jb25maXJtKCfor7fnoa7kv53miYDmnInmo4Dmn6Xkurrlt7LkuIrkvKDmlbDmja7vvIzmj5DkuqTlkI7kuI3lj6/kv67mlLnvvIznoa7orqTmj5DkuqTvvJ8nKTtcbiAgfVxufVxuIiwiZXhwb3J0IGNvbnN0IENIRUNLX09GRiA9ICfmo4Dmn6Xlrozmr5UnO1xuZXhwb3J0IGNvbnN0IFFVQUxJRklFRCA9ICflkIjmoLwnO1xuZXhwb3J0IGNvbnN0IERJU1FVQUxJRklFRCA9ICfkuI3lkIjmoLwnO1xuZXhwb3J0IGNvbnN0IERJU0NBUkRfSVRFTSA9ICflt7LnlKnpobknO1xuZXhwb3J0IGNvbnN0IFVOX1NFVFRJTkcgPSAn5pyq6K6+572uJztcbmV4cG9ydCBjb25zdCBEUkFGVCA9ICfojYnnqL8nO1xuZXhwb3J0IGNvbnN0IHNhdmVTdGF0dXNMaXN0ID0gW1VOX1NFVFRJTkcsIERSQUZUXTtcbiIsIi8qXG4gKiBAQXV0aG9yOiBqaWFuZ2wwMlxuICogQERhdGU6IDIwMjAtMDktMTQgMTU6MTM6MzRcbiAqIEBMYXN0RWRpdG9yczogamlhbmdsMDJcbiAqIEBMYXN0RWRpdFRpbWU6IDIwMjAtMDktMTUgMTU6NTE6MjVcbiAqIEBEZXNjcmlwdGlvbjog5LiT6aG55beh5qOA77yM5bWM5aWX5qih5p2/XG4gKi9cblxuaW1wb3J0IFNlcnZpY2VCYXNlIGZyb20gJy4vYmFzZSc7XG5pbXBvcnQgKiBhcyBDT05TVCBmcm9tICcuLi9jb25zdC5qcyc7XG5pbXBvcnQgUG9wdXAgZnJvbSAnQHNyYy91dGlscy9wb3B1cCc7XG5pbXBvcnQgeyBqc29uUGFyc2UsIGNyZWF0ZVRyZWVCeUFycmF5IH0gZnJvbSAnQHNyYy9jb21tb24vZGF0YS1oYW5kbGUnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBTZXJ2aWNlTW9kZSBleHRlbmRzIFNlcnZpY2VCYXNlIHtcbiAgYXN5bmMgZ2V0SW5kZXhMaXN0KGJhdGNoSWQpIHtcbiAgICBsZXQgbGlzdCA9IGF3YWl0IHRoaXMuUmVwb3NpdG9yaWVzLmdldEluZGV4TGlzdChiYXRjaElkKTtcblxuICAgIChsaXN0IHx8IFtdKS5mb3JFYWNoKGl0ZW0gPT4ge1xuICAgICAgLy8g6I635Y+W4oCc5b2T5YmN5bGC57qn566X5rOV4oCdXG4gICAgICAvLyB0ZW1wbGF0ZV9leHRlbnNpb24udG90YWxfc2NvcmVfYWxnb3JpdGhtXG4gICAgICBpdGVtLnRlbXBsYXRlX2V4dGVuc2lvbiA9IGpzb25QYXJzZShpdGVtLnRlbXBsYXRlX2V4dGVuc2lvbikgfHwge307XG4gICAgfSk7XG5cbiAgICBsZXQgdHJlZSA9IGNyZWF0ZVRyZWVCeUFycmF5KGxpc3QsIHtcbiAgICAgIGtleTogJ2lkJyxcbiAgICAgIHJlbGF0aW9uS2V5OiAncGFyZW50X2lkJyxcbiAgICAgIHNldExldmVsOiB0cnVlLFxuICAgIH0pO1xuXG4gICAgcmV0dXJuIHsgdHJlZSwgbGlzdCB9O1xuICB9XG5cbiAgLy8g5om55qyh5a6M5oiQ5qOA5p+l5qCh6aqMXG4gIGJhdGNoQ2hlY2soYmF0Y2gsIGxpc3REYXRhID0gW10pIHtcbiAgICBsZXQgaGFzRG9uZSA9IGxpc3REYXRhLnNvbWUodiA9PiB2LnN0YXR1cyA9PT0gQ09OU1QuU1RBVFVTX0JBVENIX0ZJTklTSEVEKTtcbiAgICBpZiAoIWhhc0RvbmUpIHtcbiAgICAgIHJldHVybiB7IGNvZGU6IDEsIG1zZzogJ+ivt+WujOaIkOiHs+WwkeS4gOS4quacq+e6p+aooeadv+WGjeaPkOS6pCcgfTtcbiAgICB9XG4gIH1cbn1cbiIsIi8qXG4gKiBAQXV0aG9yOiBqaWFuZ2wwMlxuICogQERhdGU6IDIwMjAtMDgtMzEgMTc6MTY6NTdcbiAqIEBMYXN0RWRpdG9yczogamlhbmdsMDJcbiAqIEBMYXN0RWRpdFRpbWU6IDIwMjAtMTAtMjIgMTg6MTQ6MTdcbiAqIEBEZXNjcmlwdGlvbjog5LiT6aG55beh5qOA77yM5om55qyhIHNlcnZpY2VcbiAqL1xuXG5pbXBvcnQgUmVwb3NpdG9yaWVzIGZyb20gJy4uL3JlcG9zaXRvcmllcy9pbmRleC5qcyc7XG5pbXBvcnQgY29udGV4dCBmcm9tICdAc3JjL2ZyYW1ld29yay9jb250ZXh0JztcbmltcG9ydCBtbWt2IGZyb20gJ0BzcmMvZnJhbWV3b3JrL21ta3YnO1xuaW1wb3J0IHN0b3JlIGZyb20gJ0BzdG9yZSc7XG5pbXBvcnQgQmF0Y2hTZXJ2aWNlIGZyb20gJ0BzcmMvc2VydmljZS9jb21tb24vYmF0Y2gtc2VydmljZSc7XG5pbXBvcnQgeyBqc29uUGFyc2UgfSBmcm9tICdAc3JjL2NvbW1vbi9kYXRhLWhhbmRsZSc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEJhdGNoQ2xhc3Mge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLmJhdGNoVGVtcGxhdGVNb2RlQ2FjaGUgPSB7fTtcbiAgICB0aGlzLnNwZWNpYWxJbnNwZWN0VGVtcGxhdGVNb2RlQ2FjaGUgPSB7fTtcbiAgfVxuICAvKipcbiAgICogQGRlc2NyaXB0aW9uOiDojrflj5Yv5L+d5a2Y6buY6K6k5om55qyh77yMbW1rdlxuICAgKiBAcGFyYW0ge3R5cGV9XG4gICAqIEByZXR1cm46XG4gICAqL1xuICBhc3luYyBnZXREZWZhdWx0QmF0Y2gocHJvaklkID0gc3RvcmUuc3RhdGUuZ2xvYmFsLmN1cnJlbnRQcm9qZWN0LmlkKSB7XG4gICAgbGV0IGtleSA9IGBTcGVjaWFsSW5zcGVjdEJhdGNoU3RvcmFnZUtleS0ke3Byb2pJZH1gO1xuICAgIGxldCBkZWZhdWx0QmF0Y2ggPSBhd2FpdCBtbWt2LmdldFVzZXJLZXkoa2V5KTtcbiAgICBsZXQgZGVmYXVsdEJhdGNoSWQgPSBkZWZhdWx0QmF0Y2ggJiYgZGVmYXVsdEJhdGNoLmlkO1xuICAgIGxldCByZXM7XG5cbiAgICByZXMgPSBhd2FpdCB0aGlzLmdldEJhdGNoQnlJZChkZWZhdWx0QmF0Y2hJZCk7XG5cbiAgICByZXR1cm4gcmVzO1xuICB9XG4gIHNldERlZmF1bHRCYXRjaChiYXRjaCwgcHJvaklkID0gc3RvcmUuc3RhdGUuZ2xvYmFsLmN1cnJlbnRQcm9qZWN0LmlkKSB7XG4gICAgbGV0IGtleSA9IGBTcGVjaWFsSW5zcGVjdEJhdGNoU3RvcmFnZUtleS0ke3Byb2pJZH1gO1xuICAgIHJldHVybiBtbWt2LnNldFVzZXJLZXkoa2V5LCBiYXRjaCk7XG4gIH1cblxuICAvKipcbiAgICogQGRlc2NyaXB0aW9uOiDojrflj5bmibnmrKHliJfooahcbiAgICogQHBhcmFtIHt0eXBlfVxuICAgKiBAcmV0dXJuOlxuICAgKi9cbiAgYXN5bmMgZ2V0QmF0Y2hMaXN0KFxuICAgIHByb2pJZCA9IHN0b3JlLnN0YXRlLmdsb2JhbC5jdXJyZW50UHJvamVjdC5pZCxcbiAgICB1c2VySWQgPSBjb250ZXh0LmdldFVzZXIoKS51c2VyX2lkXG4gICkge1xuICAgIGxldCBsaXN0ID0gYXdhaXQgUmVwb3NpdG9yaWVzLmdldEJhdGNoTGlzdChwcm9qSWQsIHVzZXJJZCk7XG4gICAgcmV0dXJuIChsaXN0IHx8IFtdKS5tYXAoaXRlbSA9PiAoe1xuICAgICAgLi4uaXRlbSxcbiAgICAgIHRlbXBsYXRlX2V4dGVuc2lvbjoganNvblBhcnNlKGl0ZW0udGVtcGxhdGVfZXh0ZW5zaW9uKSB8fCB7fSxcbiAgICB9KSk7XG4gIH1cbiAgYXN5bmMgZ2V0Rmlyc3RCYXRjaChcbiAgICBwcm9qSWQgPSBzdG9yZS5zdGF0ZS5nbG9iYWwuY3VycmVudFByb2plY3QuaWQsXG4gICAgdXNlcklkID0gY29udGV4dC5nZXRVc2VyKCkudXNlcl9pZFxuICApIHtcbiAgICBsZXQgcmVzID0gYXdhaXQgUmVwb3NpdG9yaWVzLmdldEZpcnN0QmF0Y2gocHJvaklkLCB1c2VySWQpO1xuICAgIGlmIChyZXMpIHtcbiAgICAgIHJlcy50ZW1wbGF0ZV9leHRlbnNpb24gPSBqc29uUGFyc2UocmVzICYmIHJlcy50ZW1wbGF0ZV9leHRlbnNpb24pIHx8IHt9O1xuICAgIH1cbiAgICByZXR1cm4gcmVzO1xuICB9XG4gIGFzeW5jIGdldEJhdGNoQnlJZChiYXRjaElkKSB7XG4gICAgbGV0IHJlcyA9IGF3YWl0IFJlcG9zaXRvcmllcy5nZXRCYXRjaEJ5SWQoYmF0Y2hJZCk7XG4gICAgaWYgKHJlcykge1xuICAgICAgcmVzLnRlbXBsYXRlX2V4dGVuc2lvbiA9IGpzb25QYXJzZShyZXMgJiYgcmVzLnRlbXBsYXRlX2V4dGVuc2lvbikgfHwge307XG4gICAgfVxuICAgIHJldHVybiByZXM7XG4gIH1cblxuICAvKipcbiAgICogQGRlc2NyaXB0aW9uOiDojrflj5bmjIflrprpobnnm67nmoTpu5jorqTmibnmrKFcbiAgICogMS4g5LuOIG1ta3Yg6I635Y+W5LiK5qyh6YCJ5oup55qE5om55qyhXG4gICAqIDIuIOiOt+WPluesrOS4gOS4quaJueasoVxuICAgKiBAcGFyYW0ge1N0cmluZ30gcHJvaklkIOmhueebriBpZFxuICAgKiBAcmV0dXJuIHsqfVxuICAgKi9cbiAgYXN5bmMgZ2V0Q3VycmVudEJhdGNoKHByb2pJZCA9IHN0b3JlLnN0YXRlLmdsb2JhbC5jdXJyZW50UHJvamVjdC5pZCkge1xuICAgIGxldCBiYXRjaERhdGEgPSBhd2FpdCB0aGlzLmdldERlZmF1bHRCYXRjaChwcm9qSWQpO1xuXG4gICAgaWYgKCFiYXRjaERhdGEpIHtcbiAgICAgIGJhdGNoRGF0YSA9IGF3YWl0IHRoaXMuZ2V0Rmlyc3RCYXRjaChwcm9qSWQpO1xuICAgIH1cblxuICAgIHJldHVybiBiYXRjaERhdGE7XG4gIH1cblxuICAvKipcbiAgICogQGRlc2NyaXB0aW9uOiDojrflj5bmibnmrKHnmoTlkIjlkIxcbiAgICogQHBhcmFtIHtTdHJpbmd9IGJhdGNoSWRcbiAgICogQHJldHVybjpcbiAgICovXG4gIGdldEJhdGNoQ29udHJhY3RzKGJhdGNoSWQpIHtcbiAgICByZXR1cm4gUmVwb3NpdG9yaWVzLmdldEJhdGNoQ29udHJhY3RzKGJhdGNoSWQpO1xuICB9XG5cbiAgZ2V0QmF0Y2hXaWxsVXBsb2FkTnVtKCkge1xuICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgfVxuICBmaW5pc2hDaGVja0JhdGNoKCkge1xuICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAZGVzY3JpcHRpb246IOiOt+WPluaooeadv+WIl+ihqFxuICAgKiBAcmV0dXJuOlxuICAgKi9cbiAgZ2V0VGVtcGxhdGVMaXN0KCkge1xuICAgIHJldHVybiBSZXBvc2l0b3JpZXMuZ2V0VGVtcGxhdGVMaXN0KCk7XG4gIH1cblxuICAvKipcbiAgICogQGRlc2NyaXB0aW9uOiDojrflj5blkIjlkIzliJfooahcbiAgICogQHBhcmFtIHtTdHJpbmd9IHByb2pJZFxuICAgKiBAcmV0dXJuOlxuICAgKi9cbiAgZ2V0Q29udHJhY3RMaXN0KHByb2pJZCkge1xuICAgIHJldHVybiBSZXBvc2l0b3JpZXMuZ2V0Q29udHJhY3RMaXN0KHByb2pJZCk7XG4gIH1cblxuICBnZXRCYXRjaFVzZXJzKGJhdGNoSWQpIHtcbiAgICByZXR1cm4gQmF0Y2hTZXJ2aWNlLmdldEJhdGNoVXNlcnMoYmF0Y2hJZCk7XG4gIH1cblxuICAvKipcbiAgICogQGRlc2NyaXB0aW9uOiDojrflj5bmibnmrKHnmoTmqKHmnb9tb2Rl77yM57yT5a2Y6YG/5YWN5aSa5qyh6YeN5aSN5Y+W5pWwXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBiYXRjaElkIOaJueasoWlkXG4gICAqIEByZXR1cm46IE51bWJlclxuICAgKi9cbiAgYXN5bmMgZ2V0QmF0Y2hUZW1wbGF0ZU1vZGUoYmF0Y2hJZCkge1xuICAgIGlmICghYmF0Y2hJZCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAodGhpcy5iYXRjaFRlbXBsYXRlTW9kZUNhY2hlW2JhdGNoSWRdICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIHJldHVybiB0aGlzLmJhdGNoVGVtcGxhdGVNb2RlQ2FjaGVbYmF0Y2hJZF07XG4gICAgfSBlbHNlIHtcbiAgICAgIGxldCByZXMgPSBhd2FpdCBSZXBvc2l0b3JpZXMuZ2V0QmF0Y2hUZW1wbGF0ZU1vZGUoYmF0Y2hJZCk7XG4gICAgICBsZXQgbW9kZSA9IHJlcyAmJiByZXMubW9kZTtcbiAgICAgIGlmIChtb2RlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgdGhpcy5iYXRjaFRlbXBsYXRlTW9kZUNhY2hlW2JhdGNoSWRdID0gbW9kZTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBtb2RlO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBAZGVzY3JpcHRpb246IOiOt+WPluS4k+mhueW3oeajgOajgOafpemhueeahOaJueasoUlEXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBzcGVjaWFsSW5zcGVjdElkXG4gICAqIEByZXR1cm4ge1Byb21pc2V9XG4gICAqL1xuICBhc3luYyBnZXRTcGVjaWFsSW5zcGVjdFRlbXBsYXRlTW9kZShzcGVjaWFsSW5zcGVjdElkKSB7XG4gICAgaWYgKHRoaXMuc3BlY2lhbEluc3BlY3RUZW1wbGF0ZU1vZGVDYWNoZVtzcGVjaWFsSW5zcGVjdElkXSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICByZXR1cm4gdGhpcy5zcGVjaWFsSW5zcGVjdFRlbXBsYXRlTW9kZUNhY2hlW3NwZWNpYWxJbnNwZWN0SWRdO1xuICAgIH0gZWxzZSB7XG4gICAgICBsZXQgcmVzID0gYXdhaXQgUmVwb3NpdG9yaWVzLmdldFNwZWNpYWxJbnNwZWN0QmF0Y2hJZChzcGVjaWFsSW5zcGVjdElkKTtcbiAgICAgIGxldCBiYXRjaElkID0gcmVzICYmIHJlcy5iYXRjaF9pZDtcbiAgICAgIGxldCBtb2RlID0gYXdhaXQgdGhpcy5nZXRCYXRjaFRlbXBsYXRlTW9kZShiYXRjaElkKTtcbiAgICAgIGlmIChtb2RlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgdGhpcy5zcGVjaWFsSW5zcGVjdFRlbXBsYXRlTW9kZUNhY2hlW3NwZWNpYWxJbnNwZWN0SWRdID0gbW9kZTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBtb2RlO1xuICAgIH1cbiAgfVxufVxuIiwiLypcbiAqIEBBdXRob3I6IGppYW5nbDAyXG4gKiBARGF0ZTogMjAyMC0wOC0wMyAxMDozNjo1OVxuICogQExhc3RFZGl0b3JzOiBqaWFuZ2wwMlxuICogQExhc3RFZGl0VGltZTogMjAyMC0wOS0xNSAxNjo1MjoxMlxuICogQERlc2NyaXB0aW9uOiDkuJPpobnlt6Hmo4DvvIzmqKHlnZflhazlhbEgc2VydmljZVxuICovXG5pbXBvcnQgQmF0Y2hDbGFzcyBmcm9tICcuL2JhdGNoJztcbmltcG9ydCBCYXNlQ2xhc3MgZnJvbSAnLi9iYXNlJztcblxuZXhwb3J0IGNvbnN0IEJhdGNoU2VydmljZSA9IG5ldyBCYXRjaENsYXNzKCk7XG5jb25zdCBCYXNlU2VydmljZSA9IG5ldyBCYXNlQ2xhc3MoKTtcblxuZXhwb3J0IGRlZmF1bHQgQmFzZVNlcnZpY2U7XG5cbi8qIOaJuemHj+WKoOi9vSBzZXJ2aWNlICovXG5jb25zdCBmaWxlcyA9IHJlcXVpcmUuY29udGV4dCgnLi8nLCBmYWxzZSwgL21vZGVcXC1cXGQrXFwuanMkLyk7XG5sZXQgbW9kdWxlcyA9IHt9O1xuZmlsZXMua2V5cygpLmZvckVhY2goa2V5ID0+IHtcbiAgbGV0IE1vZGVDbGFzcyA9IGZpbGVzKGtleSkuZGVmYXVsdDtcbiAgbGV0IG1vZGVOYW1lID0ga2V5LnJlcGxhY2UoLyhcXC5cXC98XFwuanMpL2csICcnKTtcbiAgbGV0IG1vZGVNYXRjaCA9IGtleS5tYXRjaCgvbW9kZVxcLShcXGQrKVxcLmpzJC8pO1xuICBsZXQgbW9kZSA9IG1vZGVNYXRjaCAmJiBtb2RlTWF0Y2hbMV07XG4gIG1vZHVsZXNbbW9kZU5hbWVdID0gbmV3IE1vZGVDbGFzcyhtb2RlKTtcbn0pO1xuXG5leHBvcnQgZnVuY3Rpb24gZ2V0U2VydmljZShtb2RlKSB7XG4gIHJldHVybiBtb2R1bGVzW2Btb2RlLSR7bW9kZX1gXSB8fCBCYXNlU2VydmljZTtcbn1cblxuLyoqXG4gKiBAZGVzY3JpcHRpb246IOmAmui/h+aJueasoWlk6I635Y+WIHNlcnZpY2VcbiAqIEBwYXJhbSB7U3RyaW5nfSBiYXRjaElkXG4gKiBAcmV0dXJuIHtPYmplY3R9XG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRTZXJ2aWNlQnlCYXRjaElkKGJhdGNoSWQpIHtcbiAgbGV0IG1vZGUgPSBhd2FpdCBCYXRjaFNlcnZpY2UuZ2V0QmF0Y2hUZW1wbGF0ZU1vZGUoYmF0Y2hJZCk7XG4gIHJldHVybiBnZXRTZXJ2aWNlKG1vZGUpO1xufVxuXG4vKipcbiAqIEBkZXNjcmlwdGlvbjog6YCa6L+H5LiT6aG55beh5qOAaWTojrflj5Ygc2VydmljZVxuICogQHBhcmFtIHtTdHJpbmd9IHNwZWNpYWxJbnNwZWN0SWRcbiAqIEByZXR1cm4ge09iamVjdH1cbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFNlcnZpY2VCeVNwZWNpYWxJbnNwZWN0SWQoc3BlY2lhbEluc3BlY3RJZCkge1xuICBsZXQgbW9kZSA9IGF3YWl0IEJhdGNoU2VydmljZS5nZXRTcGVjaWFsSW5zcGVjdFRlbXBsYXRlTW9kZShzcGVjaWFsSW5zcGVjdElkKTtcbiAgcmV0dXJuIGdldFNlcnZpY2UobW9kZSk7XG59XG4iLCIvKlxuICogQEF1dGhvcjogamlhbmdsMDJcbiAqIEBEYXRlOiAyMDIwLTA4LTAzIDEwOjQwOjAwXG4gKiBATGFzdEVkaXRvcnM6IGppYW5nbDAyXG4gKiBATGFzdEVkaXRUaW1lOiAyMDIwLTEyLTA5IDE4OjM2OjUyXG4gKiBARGVzY3JpcHRpb246IOS4k+mhueW3oeajgO+8jOaooeadv+WFrOWFseS7k+WCqOaWh+S7tlxuICovXG5cbmltcG9ydCBsb2NhbERCIGZyb20gJ0BzcmMvZnJhbWV3b3JrL2xvY2FsREInO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBSZXBvc2l0b3JpZXNCYXNlIHtcbiAgLyoqXG4gICAqIEBkZXNjcmlwdGlvbjog6I635Y+W5om55qyh5qih5p2/bW9kZVxuICAgKiBAcGFyYW0ge1N0cmluZ30gYmF0Y2hJZFxuICAgKiBAcmV0dXJuOiBQcm9taXNlXG4gICAqL1xuICBnZXRCYXRjaFRlbXBsYXRlTW9kZShiYXRjaElkID0gJycpIHtcbiAgICBsZXQgc3FsID0gYHNlbGVjdCB0Lm1vZGUgZnJvbSBiYXRjaCBiIFxuICAgICAgam9pbiBzcGVjaWFsX2luc3BlY3RfdGVtcGxhdGUgdCBvbiB0LmlkID0gaWZudWxsKGIudGVtcGxhdGVfaWQsJycpXG4gICAgICB3aGVyZSBiLmlkID0gJyR7YmF0Y2hJZH0nYDtcbiAgICByZXR1cm4gbG9jYWxEQi5xdWVyeU9uZShzcWwpO1xuICB9XG5cbiAgZ2V0U3BlY2lhbEluc3BlY3RCYXRjaElkKHNwZWNpYWxJbnNwZWN0SWQpIHtcbiAgICBsZXQgc3FsID0gYHNlbGVjdCBiYXRjaF9pZCBmcm9tIHNwZWNpYWxfaW5zcGVjdCB3aGVyZSBpZCA9ICcke3NwZWNpYWxJbnNwZWN0SWR9J2A7XG4gICAgcmV0dXJuIGxvY2FsREIucXVlcnlPbmUoc3FsKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAZGVzY3JpcHRpb246IOafpeivouaJueasoeeahHNxbFxuICAgKiBAcGFyYW0ge3R5cGV9XG4gICAqIEByZXR1cm46XG4gICAqL1xuICBnZXRCYXRjaFNxbChwcm9qSWQsIHVzZXJJZCkge1xuICAgIHJldHVybiBgc2VsZWN0IGIuKiwgXG4gICAgICBpZm51bGwodGVtcC5tb2RlLCAnMScpIGFzIG1vZGUsXG4gICAgICB1Lm5hbWUgYXMgY3JlYXRlZF9ieV9uYW1lXG4gICAgICBmcm9tIGJhdGNoIGJcbiAgICAgIGpvaW4gc3BlY2lhbF9pbnNwZWN0X3RlbXBsYXRlIHRlbXAgb24gdGVtcC5pZCA9IGlmbnVsbChiLnRlbXBsYXRlX2lkLCcnKVxuXHRcdFx0am9pbiB1c2VyIHUgb24gdS5pZCA9IGIuY3JlYXRlZF9ieVxuICAgICAgd2hlcmUgYi5wcm9qX2lkID0gJyR7cHJvaklkfScgYW5kIGlmbnVsbChiLnRlbXBsYXRlX2lkLCcnKSA8PiAnJyBcbiAgICAgIGFuZCAoYi5pc19jbG9zZWQgaXMgbnVsbCBvciBiLmlzX2Nsb3NlZCAhPSAxKSBcbiAgICAgIGFuZCBiLmJhdGNoX3R5cGUgPSAn5LiT6aG55beh5qOAJyBcbiAgICAgIGFuZCAoXG4gICAgICAgIGV4aXN0cyAoc2VsZWN0IDEgZnJvbSBiYXRjaF91c2VyIGJ1IHdoZXJlIGJ1LmJhdGNoX2lkID0gYi5pZCBhbmQgYnUudXNlcl9pZCA9ICcke3VzZXJJZH0nKVxuICAgICAgICBvciBleGlzdHMgKHNlbGVjdCAxIGZyb20gYmF0Y2hfY2MgYmMgd2hlcmUgYmMuYmF0Y2hfaWQgPSBiLmlkIGFuZCBiYy51c2VyX2lkID0gJyR7dXNlcklkfScpXG4gICAgICAgIG9yIGV4aXN0cyAoc2VsZWN0IHZhbHVlIGZyb20gZ2xvYmFsX3N0b3JhZ2Ugd2hlcmUga2V5PSAnaXMtY29tcGFueS1sZWFkZXInIGFuZCB2YWx1ZSA9IDEpXG4gICAgICApXG4gICAgICBvcmRlciBieSBjcmVhdGVkX29uIGRlc2NgO1xuICB9XG5cbiAgLyoqXG4gICAqIEBkZXNjcmlwdGlvbjog6I635Y+W5om55qyh5YiX6KGoXG4gICAqIEBwYXJhbSB7dHlwZX1cbiAgICogQHJldHVybjpcbiAgICovXG4gIGdldEJhdGNoTGlzdChwcm9qSWQsIHVzZXJJZCkge1xuICAgIGxldCBzcWwgPSB0aGlzLmdldEJhdGNoU3FsKHByb2pJZCwgdXNlcklkKTtcbiAgICByZXR1cm4gbG9jYWxEQi5xdWVyeShzcWwpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBkZXNjcmlwdGlvbjog6I635Y+W5pyA6L+R55qE5om55qyhXG4gICAqIEBwYXJhbSB7dHlwZX1cbiAgICogQHJldHVybjpcbiAgICovXG4gIGdldEZpcnN0QmF0Y2gocHJvaklkLCB1c2VySWQpIHtcbiAgICBsZXQgc3FsID0gdGhpcy5nZXRCYXRjaFNxbChwcm9qSWQsIHVzZXJJZCk7XG4gICAgcmV0dXJuIGxvY2FsREIucXVlcnlPbmUoc3FsKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAZGVzY3JpcHRpb246IOiOt+WPluaJueasoeS/oeaBr1xuICAgKiBAcGFyYW0ge3R5cGV9XG4gICAqIEByZXR1cm46XG4gICAqL1xuICBnZXRCYXRjaEJ5SWQoYmF0Y2hJZCkge1xuICAgIGxldCBzcWwgPSBgc2VsZWN0IGIuKiwgdXAubmFtZSBhcyBwcm9qX25hbWUsIFxuICAgICAgc2l0LmlkIGFzIHRlbXBfaWQsIHNpdC5uYW1lIGFzIHRlbXBfbmFtZSwgc2l0Lm1vZGUgYXMgdGVtcF9tb2RlLCBzaXQubW9kZSBhcyBtb2RlLCBcblx0XHRcdHUubmFtZSBhcyBjcmVhdGVkX2J5X25hbWUsIHUubW9iaWxlIGFzIGNyZWF0ZWRfYnlfbW9iaWxlLCB1LmlzX2ltX3VzZXIgYXMgaXNfaW1fdXNlciBcbiAgICAgIGZyb20gYmF0Y2ggYiBcblx0XHRcdGxlZnQgam9pbiB1c2VyX3Byb2plY3QgdXAgb24gYi5wcm9qX2lkID0gdXAuaWQgXG5cdFx0XHRsZWZ0IGpvaW4gc3BlY2lhbF9pbnNwZWN0X3RlbXBsYXRlIHNpdCBvbiBiLnRlbXBsYXRlX2lkID0gc2l0LmlkXG5cdFx0XHRsZWZ0IGpvaW4gdXNlciB1IG9uIHUuaWQgPSBiLmNyZWF0ZWRfYnkgXG5cdFx0XHR3aGVyZSBiLmlkID0gJyR7YmF0Y2hJZH0nYDtcbiAgICByZXR1cm4gbG9jYWxEQi5xdWVyeU9uZShzcWwpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBkZXNjcmlwdGlvbjog6I635Y+W5om55qyh55qE5ZCI5ZCMXG4gICAqIEBwYXJhbSB7dHlwZX1cbiAgICogQHJldHVybjpcbiAgICovXG4gIGdldEJhdGNoQ29udHJhY3RzKGJhdGNoSWQpIHtcbiAgICB2YXIgc3FsID0gYHNlbGVjdCBjYy5pZCBhcyBpZCwgY2MubmFtZSBhcyBuYW1lLCBjYy5jb2RlIGFzIGNvZGUsIHNjLnJlbWFyayBhcyByZW1hcmssIFxuXHRcdFx0KHNlbGVjdCBjb3VudCgqKSBmcm9tIGNoZWNrcXVhbGl0eV9wcm9ibGVtIGNwIHdoZXJlIGNwLmJhdGNoX2lkID0gc2MuYmF0Y2hfaWQgYW5kIGNwLmNvbnRyYWN0X2lkID0gY2MuaWQgKSBhcyBwcm9ibGVtTnVtIFxuXHRcdFx0ZnJvbSBzcGVjaWFsX2luc3BlY3RfYmF0Y2hfY29udHJhY3RzIHNjIFxuXHRcdFx0bGVmdCBqb2luIGNvbnRyYWN0b3JfY29udHJhY3RzIGNjIG9uIGNjLmlkID0gc2MuY29udHJhY3RfaWQgXG5cdFx0XHR3aGVyZSBzYy5iYXRjaF9pZCA9ICcke2JhdGNoSWR9JyBcbiAgICAgIG9yZGVyIGJ5IHNjLnNvcnRgO1xuICAgIHJldHVybiBsb2NhbERCLnF1ZXJ5KHNxbCk7XG4gIH1cblxuICAvKipcbiAgICogQGRlc2NyaXB0aW9uOiDojrflj5bmqKHmnb/liJfooahcbiAgICogQHJldHVybjpcbiAgICovXG4gIGdldFRlbXBsYXRlTGlzdCgpIHtcbiAgICBsZXQgc3FsID0gYHNlbGVjdCAqIGZyb20gc3BlY2lhbF9pbnNwZWN0X3RlbXBsYXRlIFxuICAgICAgd2hlcmUgaXNfZGlzcGxheSAhPSAwIFxuICAgICAgb3JkZXIgYnkgdXBkYXRlX3RpbWVzdGFtcCBkZXNjYDtcbiAgICByZXR1cm4gbG9jYWxEQi5xdWVyeShzcWwpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBkZXNjcmlwdGlvbjog6I635Y+W5ZCI5ZCM5YiX6KGoXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBwcm9qSWRcbiAgICogQHJldHVybjpcbiAgICovXG4gIGdldENvbnRyYWN0TGlzdChwcm9qSWQpIHtcbiAgICBsZXQgc3FsID0gYHNlbGVjdCBjY3MuKiBmcm9tIHNlY3Rpb24gc1xuXHRcdFx0am9pbiBzZWN0aW9uX2NvbnRyYWN0b3Igc2Mgb24gc2MuYmlkc2VjdGlvbl9pZCA9IHMuaWRcblx0XHRcdGpvaW4gY29udHJhY3RvciBjIG9uIGMuaWQgPSBzYy5jb250cmFjdG9yX2lkXG5cdFx0XHRqb2luIGNvbnRyYWN0b3JfY29udHJhY3RzIGNjcyBvbiBjY3MuY29udHJhY3Rvcl9pZCA9IGMuaWRcblx0XHRcdHdoZXJlIHMucHJval9pZCA9ICcke3Byb2pJZH0nXG5cdFx0XHRncm91cCBieSBjY3MuaWQgb3JkZXIgYnkgYy5uYW1lX3B5LCBjY3Muc29ydGA7XG4gICAgcmV0dXJuIGxvY2FsREIucXVlcnkoc3FsKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAZGVzY3JpcHRpb246IOiOt+WPluaooeWdl+mmlumhteWIl+ihqFxuICAgKiBAcGFyYW0ge1N0cmluZ30gYmF0Y2hJZFxuICAgKiBAcmV0dXJuIHtQcm9taXNlfVxuICAgKi9cbiAgZ2V0SW5kZXhMaXN0KGJhdGNoSWQpIHtcbiAgICBsZXQgc3FsID0gYHNlbGVjdCAqIGZyb20gc3BlY2lhbF9pbnNwZWN0XG5cdFx0ICB3aGVyZSBiYXRjaF9pZCA9ICcke2JhdGNoSWR9JyBcbiAgICAgIG9yZGVyIGJ5IGNoZWNraXRlbV9jb2RlYDtcblxuICAgIHJldHVybiBsb2NhbERCLnF1ZXJ5KHNxbCk7XG4gIH1cblxuICAvKipcbiAgICogQGRlc2NyaXB0aW9uOiDojrflj5bmibnmrKHnmoTmiYDmnInmo4Dmn6XpobnnmoTmiYDmnInmj4/ov7BcbiAgICogQHBhcmFtIHtTdHJpbmd9IGJhdGNoSWRcbiAgICogQHJldHVybiB7UHJvbWlzZX1cbiAgICovXG4gIGdldFNwZWNpYWxJbnNwZWN0RGVzY3MoYmF0Y2hJZCkge1xuICAgIGxldCBzcWwgPSBgc2VsZWN0ICogZnJvbSBzcGVjaWFsX2luc3BlY3RfY2hlY2tpdGVtX2Rlc2Mgd2hlcmUgY2hlY2tpdGVtX2lkIGluIFxuICAgIChzZWxlY3QgY2hlY2tpdGVtX2lkIGZyb20gc3BlY2lhbF9pbnNwZWN0IHdoZXJlIGJhdGNoX2lkID0gJyR7YmF0Y2hJZH0nKVxuICAgIG9yZGVyIGJ5IHNvcnRgO1xuICAgIHJldHVybiBsb2NhbERCLnF1ZXJ5KHNxbCk7XG4gIH1cblxuICAvKipcbiAgICogQGRlc2NyaXB0aW9uOiDojrflj5bkuJPpobnlt6Hmo4Dmo4Dmn6XpobnmlbDmja5cbiAgICogQHBhcmFtIHtTdHJpbmd9IHNwZWNpYWxJbnNwZWN0SWQgc3BlY2lhbF9pbnNwZWN0IOihqGlkXG4gICAqIEByZXR1cm46IFByb21pc2VcbiAgICovXG4gIGdldFNwZWNpYWxJbnNwZWN0RGF0YShzcGVjaWFsSW5zcGVjdElkKSB7XG4gICAgbGV0IHNxbCA9IGBzZWxlY3Qgc2kuKiwgXG4gICAgICB1Lm5hbWUgYXMgY2hlY2tlcl9uYW1lLCB1Lm1vYmlsZSBhcyBjaGVja2VyX21vYmlsZSwgdS5pc19pbV91c2VyIGFzIGNoZWNrX2lzX2ltX3VzZXJcbiAgICAgIGZyb20gc3BlY2lhbF9pbnNwZWN0IHNpXG4gICAgICBsZWZ0IGpvaW4gdXNlciB1IG9uIHUuaWQgPSBzaS5jaGVja2VyXG4gICAgICB3aGVyZSBzaS5pZCA9ICcke3NwZWNpYWxJbnNwZWN0SWR9J2A7XG4gICAgcmV0dXJuIGxvY2FsREIucXVlcnlPbmUoc3FsKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAZGVzY3JpcHRpb246IOS/ruaUuSBzcGVjaWFsX2luc3BlY3Qg6KGo5pWw5o2uXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBkYXRhXG4gICAqIEByZXR1cm46IFByb21pc2VcbiAgICovXG4gIHVwZGF0ZVNwZWNpYWxJbnNwZWN0RGF0YShkYXRhKSB7XG4gICAgcmV0dXJuIGxvY2FsREIudXBkYXRlKCdzcGVjaWFsX2luc3BlY3QnLCBkYXRhLCB7IGlkOiBkYXRhLmlkIH0pO1xuICB9XG5cbiAgLy8g5p+l6K+i6I2J56i/6Zeu6aKYXG4gIGdldERyYWZ0UHJvYmxlbUJ5QmF0Y2hJZChiYXRjaElkcykge1xuICAgIGlmICh0eXBlb2YgYmF0Y2hJZHMgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICByZXR1cm4gJHEucmVqZWN0KCfmibnmrKFpZOS4jeiDveS4uuepuicpO1xuICAgIH1cblxuICAgIGlmICghQXJyYXkuaXNBcnJheShiYXRjaElkcykpIHtcbiAgICAgIGJhdGNoSWRzID0gW2JhdGNoSWRzXTtcbiAgICB9XG4gICAgbGV0IGZpbHRlciA9IFwiJ1wiICsgYmF0Y2hJZHMuam9pbihcIicsJ1wiKSArIFwiJ1wiO1xuICAgIGxldCBzcWwgPSBgc2VsZWN0IGEuaWQgZnJvbSBjaGVja3F1YWxpdHlfcHJvYmxlbSBhIFxuXHRcdGpvaW4gc3BlY2lhbF9pbnNwZWN0IHNpIG9uIGEuYml6X2lkID0gc2kuaWQgXG5cdFx0am9pbiBiYXRjaCBiIG9uIGIuaWQgPSBzaS5iYXRjaF9pZCBhbmQgYi5zdGF0dXMgPSBcIuajgOafpeWujOavlVwiIFxuXHRcdHdoZXJlIGEuYmF0Y2hfaWQgaW4gKCR7ZmlsdGVyfSkgYW5kIGEuc3RhdHVzIGluICgn6I2J56i/JywgJ+WQiOagvOiNieeovycsICfkuI3lkIjmoLzojYnnqL8nKWA7XG5cbiAgICByZXR1cm4gbG9jYWxEQi5xdWVyeShzcWwpO1xuICB9XG5cbiAgYXN5bmMgZGVsZXRlUHJvYmxlbUJ5SWQocHJvYmxlbUlkcykge1xuICAgIGlmICghQXJyYXkuaXNBcnJheShwcm9ibGVtSWRzKSkge1xuICAgICAgcHJvYmxlbUlkcyA9IFtwcm9ibGVtSWRzXTtcbiAgICB9XG5cbiAgICBsZXQgc3FsSW4gPSBcIidcIiArIHByb2JsZW1JZHMuam9pbihcIicsJ1wiKSArIFwiJ1wiO1xuXG4gICAgbGV0IHNxbHMgPSBbXG4gICAgICBgZGVsZXRlIGZyb20gY2hlY2txdWFsaXR5X3Byb2JsZW1fZnBpbmZvIHdoZXJlIGNoZWNrcXVhbGl0eV9wcm9ibGVtX2lkIGluICgke3NxbElufSlgLFxuICAgICAgYGRlbGV0ZSBmcm9tIGNoZWNrcXVhbGl0eV9wcm9ibGVtX2xvZyB3aGVyZSBjaGVja3F1YWxpdHlfcHJvYmxlbV9pZCBpbiAoJHtzcWxJbn0pYCxcbiAgICAgIGBkZWxldGUgZnJvbSBjaGVja3F1YWxpdHlfY2Mgd2hlcmUgY2hlY2txdWFsaXR5X3Byb2JsZW1faWQgaW4gKCR7c3FsSW59KWAsXG4gICAgICBgZGVsZXRlIGZyb20gY2hlY2txdWFsaXR5X3JlcGFpciB3aGVyZSBjaGVja3F1YWxpdHlfcHJvYmxlbV9pZCBpbiAoJHtzcWxJbn0pYCxcbiAgICAgIGBkZWxldGUgZnJvbSBjaGVja3F1YWxpdHlfcmVpbnNwZWN0IHdoZXJlIGNoZWNrcXVhbGl0eV9wcm9ibGVtX2lkIGluICgke3NxbElufSlgLFxuICAgICAgYGRlbGV0ZSBmcm9tIGNoZWNrcXVhbGl0eV9wcm9ibGVtIHdoZXJlIGlkIGluICgke3NxbElufSlgLFxuICAgIF07XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNxbHMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGF3YWl0IGxvY2FsREIuZXhlY3V0ZVNxbChzcWxzW2ldKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQGRlc2NyaXB0aW9uOiDojrflj5bmibnmrKHnmoTmiYDmnIlcbiAgICogQHBhcmFtIHtTdHJpbmd9IGJhdGNoSWRcbiAgICogQHJldHVybjogUHJvbWlzZVxuICAgKi9cbiAgZmlsdGVySWRzQnlCYXRjaElkKHRhYmxlTmFtZSwgaWRzLCBiYXRjaElkKSB7XG4gICAgaWYgKCFBcnJheS5pc0FycmF5KGlkcykpIHtcbiAgICAgIGlkcyA9IFtpZHNdO1xuICAgIH1cblxuICAgIGxldCBpZHNGaWx0ZXIgPSBcIidcIiArIGlkcy5qb2luKFwiJywnXCIpICsgXCInXCI7XG4gICAgbGV0IHNxbCA9IGBzZWxlY3QgaWQgZnJvbSAke3RhYmxlTmFtZX0gd2hlcmUgYmF0Y2hfaWQgPSAnJHtiYXRjaElkfScgYW5kIGlkIGluICgke2lkc0ZpbHRlcn0pYDtcbiAgICByZXR1cm4gbG9jYWxEQi5xdWVyeShzcWwpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBkZXNjcmlwdGlvbjog6I635Y+W6ICB6Lev55Sx6aG16Z2i55qE5Y+C5pWw77yM5ZCO6Z2i5Lya5bqf6ZmkXG4gICAqIEBwYXJhbSB7dHlwZX0gc3BlY2lhbEluc3BlY3RJZFxuICAgKiBAcmV0dXJuIHt0eXBlfSBiYXRjaF9pZCwgc3BlY2lhbF9pbnNwZWN0X2lkLCBjaGVja2l0ZW1faWQsIG1vZGUsIHJvb3RfaWQsIHByb2JsZW1faWRcbiAgICovXG4gIGdldE9sZFJvdXRlUXVlcnkoc3BlY2lhbEluc3BlY3RJZCkge1xuICAgIGxldCBzcWwgPSBgc2VsZWN0IHNpLmJhdGNoX2lkLCBzaS5pZCBhcyBzcGVjaWFsX2luc3BlY3RfaWQsIHNpLmNoZWNraXRlbV9pZCwgXG4gICAgICAoc2VsZWN0IG1vZGUgZnJvbSBzcGVjaWFsX2luc3BlY3RfdGVtcGxhdGUgc2l0IHdoZXJlIHNpdC5pZCA9IGIudGVtcGxhdGVfaWQpIGFzIG1vZGUsXG4gICAgICAoc2VsZWN0IGlkIGZyb20gY2hlY2txdWFsaXR5X3Byb2JsZW0gY3Agd2hlcmUgY3AuYml6X2lkID0gJyR7c3BlY2lhbEluc3BlY3RJZH0nIG9yZGVyIGJ5IGNwLmRvd25sb2FkX3RpbWUgZGVzYyBsaW1pdCAxKSBhcyBwcm9ibGVtX2lkXG4gICAgICBmcm9tIHNwZWNpYWxfaW5zcGVjdCBzaSBcbiAgICAgIGpvaW4gYmF0Y2ggYiBvbiBiLmlkID0gc2kuYmF0Y2hfaWRcbiAgICAgIHdoZXJlIHNpLmlkID0gJyR7c3BlY2lhbEluc3BlY3RJZH0nYDtcbiAgICByZXR1cm4gbG9jYWxEQi5xdWVyeU9uZShzcWwpO1xuICB9XG4gIGdldFJvb3RTcGVjaWFsSW5zcGVjdElkKHNwZWNpYWxJbnNwZWN0SWQpIHtcbiAgICBsZXQgc3FsID0gYFNFTEVDVCBpZCxjaGVja2l0ZW1fcGFyZW50X2lkIEZST00gc3BlY2lhbF9pbnNwZWN0IHNpXG4gICAgICBXSEVSRSBFWElTVFMgKFxuICAgICAgICBTRUxFQ1QgMSBGUk9NIHNwZWNpYWxfaW5zcGVjdCBzaTIgXG4gICAgICAgIFdIRVJFIHNpMi5pZCA9ICcke3NwZWNpYWxJbnNwZWN0SWR9JyBBTkQgc2kuY2hlY2tpdGVtX2lkID0gc2kyLmNoZWNraXRlbV9wYXJlbnRfaWQgQU5EIHNpLmJhdGNoX2lkID0gc2kyLmJhdGNoX2lkXG4gICAgICApYDtcbiAgICByZXR1cm4gbG9jYWxEQi5xdWVyeU9uZShzcWwpO1xuICB9XG4gIC8qKlxuICAgKiBbdXBkYXRlU3BlY2lhbEluc3BlY3Qg5pu05paw5LiT6aG55beh5qOA5qOA5p+l6aG5XVxuICAgKiBAcGFyYW0gcXVlcnlEYXRhIHtvYmplY3R9IOafpeivouadoeS7tlxuICAgKiBAcGFyYW0gZGF0YSB7b2JqZWN0fSDmm7TmlrDlrZfmrrVcbiAgICogQHJldHVybiB7W3Byb21pc2VdfSAgICAgIFtkZXNjcmlwdGlvbl1cbiAgICogbG9jYWxEQi5xdWVyeSgnc2VsZWN0ICogZnJvbSBzcGVjaWFsX2luc3BlY3Qgd2hlcmUgYmF0Y2hfaWQgPSBcImYyZWNkZmVhLThjZTEtNGRjNy1iZGRhLTRhNThjZTEwMDE1MVwiIGFuZCBzdGF0dXM9XCLojYnnqL9cIicpLnRoZW4ocmVzID0+IHtjb25zb2xlLmxvZyhyZXMpfSlcbiAgICogbG9jYWxEQi51cGRhdGUoJ3NwZWNpYWxfaW5zcGVjdCcsIHtzdGF0dXM6ICfmnKrorr7nva4nfSwge2JhdGNoX2lkOiAnZjJlY2RmZWEtOGNlMS00ZGM3LWJkZGEtNGE1OGNlMTAwMTUxJywgc3RhdHVzOiAn6I2J56i/J30pXG4gICAqICovXG4gIHVwZGF0ZVNwZWNpYWxJbnNwZWN0QWxsKHF1ZXJ5RGF0YSwgZGF0YSkge1xuICAgIHJldHVybiBsb2NhbERCLnVwZGF0ZSgnc3BlY2lhbF9pbnNwZWN0JywgZGF0YSwgcXVlcnlEYXRhKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAZGVzY3JpcHRpb246IOiOt+WPluihqOaVsOaNrlxuICAgKiBAcGFyYW0ge3R5cGV9XG4gICAqIEByZXR1cm46XG4gICAqL1xuICBzZWxlY3RTcGVjaWFsSW5zcGVjdChpZCkge1xuICAgIGxldCBzcWwgPSBgc2VsZWN0ICogZnJvbSBzcGVjaWFsX2luc3BlY3Qgd2hlcmUgaWQgPSA/YDtcbiAgICByZXR1cm4gbG9jYWxEQi5xdWVyeU9uZShzcWwsIFtpZF0pO1xuICB9XG4gIHNlbGVjdFNwZWNpYWxJbnNwZWN0UGxhY2VDaGVja2l0ZW0oaWQpIHtcbiAgICBsZXQgc3FsID0gYHNlbGVjdCAqIGZyb20gc3BlY2lhbF9pbnNwZWN0X3BsYWNlX2NoZWNraXRlbSB3aGVyZSBpZCA9ID9gO1xuICAgIHJldHVybiBsb2NhbERCLnF1ZXJ5T25lKHNxbCwgW2lkXSk7XG4gIH1cbn1cbiIsIi8qXG4gKiBAQXV0aG9yOiBqaWFuZ2wwMlxuICogQERhdGU6IDIwMjAtMDgtMjggMTQ6MjU6MjRcbiAqIEBMYXN0RWRpdG9yczogamlhbmdsMDJcbiAqIEBMYXN0RWRpdFRpbWU6IDIwMjAtMDktMTUgMTU6NTE6MTFcbiAqIEBEZXNjcmlwdGlvbjog5LiT6aG55beh5qOA77yMXCLlj6/miZPliIbvvIzmjInmnYPph43orqHnrpfmgLvliIZcIiDmqKHmnb8gc2VydmljZVxuICovXG5cbmltcG9ydCBTZXJ2aWNlQmFzZSBmcm9tICcuL2Jhc2UnO1xuaW1wb3J0ICogYXMgQ09OU1QgZnJvbSAnLi4vY29uc3QuanMnO1xuaW1wb3J0IFBvcHVwIGZyb20gJ0BzcmMvdXRpbHMvcG9wdXAnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBTZXJ2aWNlTW9kZSBleHRlbmRzIFNlcnZpY2VCYXNlIHtcbiAgYXN5bmMgZ2V0SW5kZXhMaXN0KGJhdGNoSWQpIHtcbiAgICBsZXQgbGlzdCA9IGF3YWl0IHRoaXMuUmVwb3NpdG9yaWVzLmdldEluZGV4TGlzdChiYXRjaElkKTtcblxuICAgIHJldHVybiBsaXN0O1xuICB9XG5cbiAgLy8g5om55qyh5a6M5oiQ5qOA5p+l5qCh6aqMXG4gIGJhdGNoQ2hlY2soYmF0Y2gsIGxpc3REYXRhID0gW10pIHtcbiAgICBsZXQgaGFzRG9uZSA9IGxpc3REYXRhLnNvbWUodiA9PiB2LnN0YXR1cyA9PT0gQ09OU1QuU1RBVFVTX0JBVENIX0ZJTklTSEVEKTtcbiAgICBpZiAoIWhhc0RvbmUpIHtcbiAgICAgIHJldHVybiB7IGNvZGU6IDEsIG1zZzogJ+ivt+iHs+WwkeWujOaIkOS4gOS4quivhOWIhuihqOaVsOaNruW9leWFpScgfTtcbiAgICB9XG4gIH1cbn1cbiIsIi8qXG4gKiBAQXV0aG9yOiBqaWFuZ2wwMlxuICogQERhdGU6IDIwMjAtMDgtMjggMTQ6MjU6MjRcbiAqIEBMYXN0RWRpdG9yczogamlhbmdsMDJcbiAqIEBMYXN0RWRpdFRpbWU6IDIwMjAtMTAtMTYgMTE6NTU6MjlcbiAqIEBEZXNjcmlwdGlvbjog5LiT6aG55beh5qOA77yM6KeC5oSf5pWI5p6c5qih5p2/IHNlcnZpY2VcbiAqL1xuXG5pbXBvcnQgRGF0YVN5bmNocm9uaXplciBmcm9tICdAc3JjL3NlcnZpY2UvY29tbW9uL2RhdGEtc3luY2hyb25pemVyJztcbmltcG9ydCBVdGlscyBmcm9tICdAc3JjL3V0aWxzL2luZGV4JztcbmltcG9ydCBTZXJ2aWNlQmFzZSBmcm9tICcuL2Jhc2UnO1xuaW1wb3J0IHsgcGVyY2VudCB9IGZyb20gJ0BzcmMvZmlsdGVycy9wZXJjZW50JztcbmltcG9ydCB7XG4gIC8qIGhhc1ZhbCwgKi8ganNvblBhcnNlLFxuICBqc29uU3RyaW5naWZ5LFxuICBjcmVhdGVUcmVlQnlBcnJheSxcbiAgc2V0RGF0YUxldmVsLFxufSBmcm9tICdAc3JjL2NvbW1vbi9kYXRhLWhhbmRsZSc7XG5pbXBvcnQgY29udGV4dCBmcm9tICdAc3JjL2ZyYW1ld29yay9jb250ZXh0JztcbmltcG9ydCBuZXR3b3JrIGZyb20gJ0BzcmMvZnJhbWV3b3JrL25ldHdvcmsnO1xuaW1wb3J0IFdlYlNlcnZpY2UgZnJvbSAnQHNyYy9zZXJ2aWNlL2NvbW1vbi93ZWItc2VydmljZSc7XG5pbXBvcnQgcm91dGVyIGZyb20gJ0Byb3V0ZXInO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBTZXJ2aWNlTW9kZSBleHRlbmRzIFNlcnZpY2VCYXNlIHtcbiAgYXN5bmMgZ2V0SW5kZXhMaXN0KGJhdGNoSWQpIHtcbiAgICBsZXQgbGlzdERhdGEgPSBhd2FpdCB0aGlzLmdldEJhdGNoUGxhY2VzKGJhdGNoSWQpO1xuICAgIGxldCBwbGFjZVRvdGFsID0gYXdhaXQgdGhpcy5nZXRNb2RlMTFQbGFjZXNFbmRJdGVtVG90YWwoYmF0Y2hJZCk7XG5cbiAgICBsZXQgc2V0ID0ge307XG4gICAgKHBsYWNlVG90YWwgfHwgW10pLmZvckVhY2goaXRlbSA9PiB7XG4gICAgICBzZXRbaXRlbS5pZF0gPSBpdGVtO1xuICAgIH0pO1xuXG4gICAgLy8g5rWL5Yy655qE5qOA5p+l6L+b5bqmXG4gICAgKGxpc3REYXRhIHx8IFtdKS5mb3JFYWNoKGl0ZW0gPT4ge1xuICAgICAgbGV0IHRvdGFsID0gc2V0W2l0ZW0uaWRdO1xuICAgICAgaXRlbS5jb3VudCA9ICh0b3RhbCAmJiB0b3RhbC5jb3VudCkgfHwgMDtcbiAgICAgIGl0ZW0uZG9uZSA9ICh0b3RhbCAmJiB0b3RhbC5kb25lKSB8fCAwO1xuICAgICAgaXRlbS51bnF1YWxpZmllZCA9ICh0b3RhbCAmJiB0b3RhbC51bnF1YWxpZmllZCkgfHwgMDtcbiAgICAgIGl0ZW0uZHJhZnQgPSAodG90YWwgJiYgdG90YWwuZHJhZnQpIHx8IDA7XG4gICAgfSk7XG5cbiAgICByZXR1cm4gbGlzdERhdGE7XG4gIH1cbiAgLyoqXG4gICAqIEBkZXNjcmlwdGlvbjog6I635Y+W5om55qyh55qE5omA5pyJ5rWL5Yy6XG4gICAqIEBwYXJhbSB7U3RyaW5nfSBiYXRjaElkXG4gICAqIEByZXR1cm46IFByb21pc2VcbiAgICovXG4gIGdldEJhdGNoUGxhY2VzKGJhdGNoSWQpIHtcbiAgICByZXR1cm4gdGhpcy5SZXBvc2l0b3JpZXMuZ2V0QmF0Y2hQbGFjZXMoYmF0Y2hJZCk7XG4gIH1cblxuICAvKipcbiAgICogQGRlc2NyaXB0aW9uOiDojrflj5bmibnmrKHmiYDmnInmtYvljLrnmoTmnKvnuqfmo4Dmn6Xpobnnu5/orqFcbiAgICogQHBhcmFtIHtTdHJpbmd9IGJhdGNoSWRcbiAgICogQHJldHVybjogUHJvbWlzZSAtPiBBcnJheVxuICAgKiB7XG4gICAgaWQ6IOa1i+WMumlkLFxuICAgIG5hbWU6IOa1i+WMum5hbWUsXG4gICAgY291bnQ6IOacq+e6p+ajgOafpemhueaAu+aVsCxcbiAgICBkb25lOiDlt7LlrozmiJDmlbDph48sXG4gICAgdW5xdWFsaWZpZWQ6IOS4jeWQiOagvOaVsOmHjyxcbiAgICBkcmFmdDog6I2J56i/5pWw6YePLFxuICAgIH1cbiAgICovXG4gIGdldE1vZGUxMVBsYWNlc0VuZEl0ZW1Ub3RhbChiYXRjaElkKSB7XG4gICAgcmV0dXJuIHRoaXMuUmVwb3NpdG9yaWVzLmdldE1vZGUxMUVuZEl0ZW1zKGJhdGNoSWQpLnRoZW4ocmVzID0+IHtcbiAgICAgIGxldCByZXN1bHQgPSBbXTtcbiAgICAgIGxldCBzZXQgPSB7fTtcblxuICAgICAgKHJlcyB8fCBbXSkuZm9yRWFjaChpdGVtID0+IHtcbiAgICAgICAgaWYgKCFzZXRbaXRlbS5wbGFjZV9pZF0pIHtcbiAgICAgICAgICBzZXRbaXRlbS5wbGFjZV9pZF0gPSB7XG4gICAgICAgICAgICBpZDogaXRlbS5wbGFjZV9pZCxcbiAgICAgICAgICAgIG5hbWU6IGl0ZW0ucGxhY2VfbmFtZSxcbiAgICAgICAgICAgIGNvdW50OiAwLFxuICAgICAgICAgICAgZG9uZTogMCxcbiAgICAgICAgICAgIHVucXVhbGlmaWVkOiAwLFxuICAgICAgICAgICAgZHJhZnQ6IDAsXG4gICAgICAgICAgfTtcbiAgICAgICAgICByZXN1bHQucHVzaChzZXRbaXRlbS5wbGFjZV9pZF0pO1xuICAgICAgICB9XG5cbiAgICAgICAgc2V0W2l0ZW0ucGxhY2VfaWRdLmNvdW50ICs9IDE7XG5cbiAgICAgICAgaWYgKGl0ZW0uc3RhdHVzID09PSAn5ZCI5qC8Jykge1xuICAgICAgICAgIHNldFtpdGVtLnBsYWNlX2lkXS5kb25lICs9IDE7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGl0ZW0uc3RhdHVzID09PSAn5LiN5ZCI5qC8Jykge1xuICAgICAgICAgIHNldFtpdGVtLnBsYWNlX2lkXS5kb25lICs9IDE7XG4gICAgICAgICAgc2V0W2l0ZW0ucGxhY2VfaWRdLnVucXVhbGlmaWVkICs9IDE7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGl0ZW0uc3RhdHVzID09PSAn6I2J56i/Jykge1xuICAgICAgICAgIHNldFtpdGVtLnBsYWNlX2lkXS5kcmFmdCArPSAxO1xuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAZGVzY3JpcHRpb246IOaJueasoeaYr+WQpuacieajgOafpemhue+8jOWPr+iDveacquS4i+i9vVxuICAgKiBAcGFyYW0ge1N0cmluZ30gYmF0Y2hJZFxuICAgKiBAcmV0dXJuOiBCb29sZWFuXG4gICAqL1xuICBoYXNCYXRjaENoZWNraXRlbShiYXRjaElkKSB7XG4gICAgcmV0dXJuIHRoaXMuUmVwb3NpdG9yaWVzLmhhc0JhdGNoQ2hlY2tpdGVtKGJhdGNoSWQpLnRoZW4ocmVzID0+IHtcbiAgICAgIHJldHVybiAhIXJlcztcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAZGVzY3JpcHRpb246IOa3u+WKoOa1i+WMulxuICAgKiBAcGFyYW0ge09iamVjdH0gZGF0YVxuICAgKiBAcmV0dXJuOiBScm9taXNlXG4gICAqL1xuICBhc3luYyBhZGRCYXRjaFBsYWNlKGRhdGEsIGJhdGNoSWQsIHByb2pJZCkge1xuICAgIGlmICghZGF0YSB8fCAhYmF0Y2hJZCB8fCAhcHJvaklkKSB7XG4gICAgICByZXR1cm4gbmV3IEVycm9yKCdhZGRCYXRjaFBsYWNlIOe8uuWwkeWPguaVsCcpO1xuICAgIH1cblxuICAgIGxldCBoYXNDaGVja2l0ZW0gPSBhd2FpdCB0aGlzLmhhc0JhdGNoQ2hlY2tpdGVtKGJhdGNoSWQpO1xuICAgIGlmICghaGFzQ2hlY2tpdGVtKSB7XG4gICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoJ+aJueasoee8uuWwkeajgOafpemhuScpO1xuICAgIH1cblxuICAgIGxldCBwbGFjZURhdGEgPSB7XG4gICAgICBpZDogVXRpbHMudXVpZCgpLFxuICAgICAgbmFtZTogZGF0YS5mdWxsbmFtZSB8fCAnJyxcbiAgICAgIGJhdGNoX2lkOiBiYXRjaElkLFxuICAgICAgcHJval9pZDogcHJvaklkLFxuICAgICAgYnVpbGRpbmdfaWQ6IChkYXRhLmJ1aWxkaW5nICYmIGRhdGEuYnVpbGRpbmcuaWQpIHx8ICcnLFxuICAgICAgdW5pdDogKGRhdGEudW5pdCAmJiBkYXRhLnVuaXQuaWQpIHx8ICcnLFxuICAgICAgZmxvb3I6IChkYXRhLmZsb29yICYmIGRhdGEuZmxvb3IuaWQpIHx8ICcnLFxuICAgICAgcm9vbV9pZDogKGRhdGEucm9vbSAmJiBkYXRhLnJvb20uaWQpIHx8ICcnLFxuICAgICAgcmVnaXN0X2RhdGU6IFV0aWxzLm5vdygpLFxuICAgIH07XG4gICAgYXdhaXQgdGhpcy5SZXBvc2l0b3JpZXMuYWRkQmF0Y2hQbGFjZShwbGFjZURhdGEpO1xuICAgIGF3YWl0IHRoaXMuYWRkQmF0Y2hQbGFjZUNoZWNraXRlbShwbGFjZURhdGEuaWQsIGJhdGNoSWQsIHByb2pJZCk7XG4gICAgYXdhaXQgRGF0YVN5bmNocm9uaXplci5hZGRTeW5jR3JvdXAoW1xuICAgICAgWydzcGVjaWFsX2luc3BlY3RfcGxhY2UnLCBwbGFjZURhdGEuaWRdLFxuICAgICAgWydzcGVjaWFsX2luc3BlY3RfcGxhY2VfY2hlY2tpdGVtJywgcGxhY2VEYXRhLmlkXSxcbiAgICBdKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAZGVzY3JpcHRpb246IOS/ruaUuea1i+WMulxuICAgKiBAcGFyYW0ge3R5cGV9XG4gICAqIEByZXR1cm46XG4gICAqL1xuICBhc3luYyB1cGRhdGVCYXRjaFBsYWNlKGRhdGEpIHtcbiAgICBhd2FpdCB0aGlzLlJlcG9zaXRvcmllcy51cGRhdGVCYXRjaFBsYWNlKGRhdGEpO1xuICAgIGF3YWl0IERhdGFTeW5jaHJvbml6ZXIuYWRkU3luY0dyb3VwKFtbJ3NwZWNpYWxfaW5zcGVjdF9wbGFjZScsIGRhdGEuaWRdXSk7XG4gIH1cblxuICAvKipcbiAgICogQGRlc2NyaXB0aW9uOiDliKDpmaTmtYvljLpcbiAgICogQHBhcmFtIHtPYmplY3R9IGRhdGEgLCBpZDog5rWL5Yy6aWTvvIwgZG93bmxvYWRfdGltZTog5rWL5Yy655qE5LiL6L295pe26Ze0XG4gICAqIEByZXR1cm46XG4gICAqL1xuICBhc3luYyBkZWxldGVCYXRjaFBsYWNlKGRhdGEpIHtcbiAgICBpZiAoZGF0YSAmJiBkYXRhLmRvd25sb2FkX3RpbWUpIHtcbiAgICAgIC8vIOWcqOe6v+WIoOmZpFxuICAgICAgbGV0IGhhc05ldHdvcmsgPSBuZXR3b3JrLmdldEhhc05ldHdvcmsoKTtcbiAgICAgIGlmICghaGFzTmV0d29yaykge1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoJ+W9k+WJjee9kee7nOaXoOazleWQjOatpeaVsOaNricpO1xuICAgICAgfVxuICAgICAgYXdhaXQgV2ViU2VydmljZS5wb3N0KCcvc3BlY2lhbC1pbnNwZWN0LXBsYWNlL2RlbGV0ZScsIG51bGwsIHsgaWQ6IGRhdGEuaWQgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBhd2FpdCB0aGlzLlJlcG9zaXRvcmllcy5kZWxldGVCYXRjaFBsYWNlKGRhdGEuaWQpO1xuICAgIGF3YWl0IERhdGFTeW5jaHJvbml6ZXIucmVtb3ZlU3luY0dyb3VwKGRhdGEuaWQpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBkZXNjcmlwdGlvbjog5re75Yqg5rWL5Yy655qE5qOA5p+l6aG5XG4gICAqIEBwYXJhbSB7dHlwZX1cbiAgICogQHJldHVybjpcbiAgICovXG4gIGFzeW5jIGFkZEJhdGNoUGxhY2VDaGVja2l0ZW0ocGxhY2VJZCwgYmF0Y2hJZCwgcHJvaklkKSB7XG4gICAgLy8g6I635Y+W5om55qyh55qE5omA5pyJ5qOA5p+l6aG5XG4gICAgbGV0IGNoZWNraXRlbXMgPSBhd2FpdCB0aGlzLlJlcG9zaXRvcmllcy5nZXRCYXRjaEFsbFNwZWNpYWxJbnNwZWN0KGJhdGNoSWQpO1xuICAgIGlmICghY2hlY2tpdGVtcyB8fCAhY2hlY2tpdGVtcy5sZW5ndGgpIHtcbiAgICAgIHJldHVybiBuZXcgRXJyb3IoJ+aJueasoeayoeacieS4k+mhueW3oeajgOajgOafpemhuScpO1xuICAgIH1cblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY2hlY2tpdGVtcy5sZW5ndGg7IGkrKykge1xuICAgICAgbGV0IGl0ZW0gPSBjaGVja2l0ZW1zW2ldO1xuICAgICAgbGV0IGNoZWNraXRlbURhdGEgPSB7XG4gICAgICAgIGlkOiBVdGlscy51dWlkKCksXG4gICAgICAgIGJhdGNoX2lkOiBiYXRjaElkLFxuICAgICAgICBwcm9qX2lkOiBwcm9qSWQsXG4gICAgICAgIHBsYWNlX2lkOiBwbGFjZUlkLFxuICAgICAgICBzcGVjaWFsX2luc3BlY3RfaWQ6IGl0ZW0uaWQsXG4gICAgICAgIHN0YXR1czogJ+acquiuvue9ricsXG4gICAgICAgIGRlZHVjdGlvbjogJycsXG4gICAgICAgIHJlbWFyazogJycsXG4gICAgICAgIGltYWdlX2ZpbGU6ICcnLFxuICAgICAgICBjaGVja2VyOiAnJyxcbiAgICAgICAgY2hlY2tfdGltZTogJycsXG4gICAgICB9O1xuXG4gICAgICBhd2FpdCB0aGlzLlJlcG9zaXRvcmllcy5hZGRCYXRjaFBsYWNlQ2hlY2tpdGVtKGNoZWNraXRlbURhdGEpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBAZGVzY3JpcHRpb246IOiOt+WPlue7n+iuoeaVsOaNrlxuICAgKiBAcGFyYW0ge0FycmF5fSBsaXN0IOWIl+ihqOaVsOaNrlxuICAgKiBAcGFyYW0ge09iamVjdH0gdG90YWxPcHRpb25zIOiuoeeul+e7n+iuoeaVsOaNrueahOmFjee9rlxuICAgKiBAcGFyYW0ge09iamVjdH0gYmF0Y2hEYXRhIOaJueasoeaVsOaNrlxuICAgKiBAcmV0dXJuIHtPYmplY3R9IHt0aXRsZTog5qCH6aKYLCBub3RlOiDmj5DnpLrkv6Hmga8sIHJlc3VsdDog57uT5p6cLCBoYXNSZXN1bHQ6IOaYr+WQpuaciee7k+aenCwgZm9ybXVsYVRleHQ6IOiuoeeul+WFrOW8j31cbiAgICovXG4gIGdldFRvdGFsRGF0YShsaXN0LCB0b3RhbE9wdGlvbnMsIGJhdGNoRGF0YSkge1xuICAgIGxldCBiYXRjaElkID0gYmF0Y2hEYXRhICYmIGJhdGNoRGF0YS5pZDtcbiAgICBsZXQgcGFzc3JhdGVNb2RlID1cbiAgICAgIChiYXRjaERhdGEgJiZcbiAgICAgICAgYmF0Y2hEYXRhLnRlbXBsYXRlX2V4dGVuc2lvbiAmJlxuICAgICAgICBiYXRjaERhdGEudGVtcGxhdGVfZXh0ZW5zaW9uLm1vZGUxMV9wYXNzcmF0ZV9tb2RlKSB8fFxuICAgICAgMTtcblxuICAgIHN3aXRjaCAocGFzc3JhdGVNb2RlKSB7XG4gICAgICBjYXNlIDI6XG4gICAgICAgIHJldHVybiB0aGlzLmdldE1vZGUyVG90YWxEYXRhKGJhdGNoSWQpO1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0TW9kZTFUb3RhbERhdGEoYmF0Y2hJZCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEBkZXNjcmlwdGlvbjog6I635Y+W5pyr57qn6K6h566X5qih5byP55qE57uf6K6h5pWw5o2uXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBiYXRjaElkXG4gICAqIEByZXR1cm46IFByb21pc2VcbiAgICovXG4gIGFzeW5jIGdldE1vZGUxVG90YWxEYXRhKGJhdGNoSWQpIHtcbiAgICBsZXQgYWxsRG9uZURhdGEgPSBhd2FpdCB0aGlzLlJlcG9zaXRvcmllcy5nZXRBbGxEb25lRGF0YShiYXRjaElkKTtcbiAgICBsZXQgbWFwID0ge307XG4gICAgKGFsbERvbmVEYXRhIHx8IFtdKS5mb3JFYWNoKGl0ZW0gPT4ge1xuICAgICAgaWYgKCFtYXBbaXRlbS5zcGVjaWFsX2luc3BlY3RfaWRdKSB7XG4gICAgICAgIG1hcFtpdGVtLnNwZWNpYWxfaW5zcGVjdF9pZF0gPSB7XG4gICAgICAgICAgdG90YWw6IDAsXG4gICAgICAgICAgc2NvcmU6IGl0ZW0uc2NvcmUsXG4gICAgICAgICAgZGVkdWN0aW9uOiAwLFxuICAgICAgICAgIHF1YWxpZmllZDogMCxcbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICAgIG1hcFtpdGVtLnNwZWNpYWxfaW5zcGVjdF9pZF0udG90YWwgKz0gMTtcbiAgICAgIG1hcFtpdGVtLnNwZWNpYWxfaW5zcGVjdF9pZF0uZGVkdWN0aW9uICs9IE51bWJlcihpdGVtLmRlZHVjdGlvbikgfHwgMDtcbiAgICAgIGlmIChpdGVtLnN0YXR1cyA9PT0gJ+WQiOagvCcpIHtcbiAgICAgICAgbWFwW2l0ZW0uc3BlY2lhbF9pbnNwZWN0X2lkXS5xdWFsaWZpZWQgKz0gMTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIGxldCBpbmZvcyA9IFtdO1xuICAgIGZvciAobGV0IGlkIGluIG1hcCkge1xuICAgICAgaW5mb3MucHVzaCh7IC4uLm1hcFtpZF0sIGlkIH0pO1xuICAgIH1cblxuICAgIC8vIOW3sua1i+ajgOafpemhueeahOW+l+WIhuaAu+WSjFxuICAgIGxldCBjcmVkaXRTdW0gPSAwO1xuICAgIC8vIOW3sua1i+ajgOafpemhueeahOa7oeWIhuaAu+WSjFxuICAgIGxldCBzY29yZVN1bSA9IDA7XG4gICAgbGV0IGhhc1Jlc3VsdCA9IEJvb2xlYW4oaW5mb3MubGVuZ3RoKTtcbiAgICAvLyDnu5PmnpxcbiAgICBsZXQgcmVzdWx0O1xuICAgIGxldCBmb3JtdWxhQ2FsYyA9ICcnO1xuXG4gICAgaW5mb3MuZm9yRWFjaChpdGVtID0+IHtcbiAgICAgIGxldCBwYXNzcmF0ZSA9IGl0ZW0ucXVhbGlmaWVkIC8gaXRlbS50b3RhbDtcbiAgICAgIGNyZWRpdFN1bSArPSBwYXNzcmF0ZSAqIGl0ZW0uc2NvcmUgLSBpdGVtLmRlZHVjdGlvbjtcbiAgICAgIHNjb3JlU3VtICs9IGl0ZW0uc2NvcmU7XG4gICAgfSk7XG5cbiAgICBpZiAoc2NvcmVTdW0pIHtcbiAgICAgIHJlc3VsdCA9IHBlcmNlbnQoY3JlZGl0U3VtIC8gc2NvcmVTdW0sIDIpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXN1bHQgPSAnJztcbiAgICB9XG5cbiAgICBpZiAoaGFzUmVzdWx0KSB7XG4gICAgICBsZXQgY3JlZGl0U3VtQXJyID0gW107XG4gICAgICBsZXQgc2NvcmVTdW1BcnIgPSBbXTtcbiAgICAgIGluZm9zLmZvckVhY2goaXRlbSA9PiB7XG4gICAgICAgIGxldCBwYXNzcmF0ZSA9IHBlcmNlbnQoaXRlbS5xdWFsaWZpZWQgLyBpdGVtLnRvdGFsLCAyKTtcblxuICAgICAgICBjcmVkaXRTdW1BcnIucHVzaChgKCR7cGFzc3JhdGV9KiR7aXRlbS5zY29yZX0tJHt0aGlzLmZvcm1hdEZsb2F0KGl0ZW0uZGVkdWN0aW9uKX0pYCk7XG4gICAgICAgIHNjb3JlU3VtQXJyLnB1c2goaXRlbS5zY29yZSk7XG4gICAgICB9KTtcblxuICAgICAgZm9ybXVsYUNhbGMgKz0gYD0oJHtjcmVkaXRTdW1BcnIuam9pbignKycpfSkvKCR7c2NvcmVTdW1BcnIuam9pbignKycpfSk9JHtyZXN1bHR9YDtcbiAgICB9XG5cbiAgICByZXR1cm4ge1xuICAgICAgdGl0bGU6ICflvZPliY3nu7zlkIjlvpfliIYnLFxuICAgICAgbm90ZTogJycsXG4gICAgICByZXN1bHQ6IHJlc3VsdCxcbiAgICAgIGhhc1Jlc3VsdDogaGFzUmVzdWx0LFxuICAgICAgZm9ybXVsYVRleHQ6XG4gICAgICAgICflvZPliY3nu7zlkIjlvpfliIY94oiR77yI5bey5qOA6aG555qE5ZCI5qC8546HKua7oeWIhuWAvC3lgJLmiaPliIbvvIkv4oiR77yI5bey5qOA6aG555qE5ruh5YiG5YC877yJJyArIGZvcm11bGFDYWxjLFxuICAgIH07XG4gIH1cblxuICAvKipcbiAgICogQGRlc2NyaXB0aW9uOiDojrflj5bkuIDnuqfmo4Dmn6XpobnorqHnrpfmqKHlvI/nmoTnu5/orqHmlbDmja5cbiAgICogQHBhcmFtIHtTdHJpbmd9IGJhdGNoSWRcbiAgICogQHJldHVybjogUHJvbWlzZSAtPiBBcnJheVxuICAgKi9cbiAgYXN5bmMgZ2V0TW9kZTJUb3RhbERhdGEoYmF0Y2hJZCkge1xuICAgIGxldCBhbGxJdGVtcyA9IGF3YWl0IHRoaXMuUmVwb3NpdG9yaWVzLmdldEFsbEl0ZW1zKGJhdGNoSWQpO1xuICAgIGxldCBkb25lSXRlbXMgPSBhd2FpdCB0aGlzLlJlcG9zaXRvcmllcy5nZXRBbGxEb25lRGF0YShiYXRjaElkKTtcblxuICAgIC8vIOaKiuavj+S4quajgOafpemhueeahOmXrumimOaxh+aAu1xuICAgIGxldCBtYXAgPSB7fTtcbiAgICAoYWxsSXRlbXMgfHwgW10pLmZvckVhY2goaXRlbSA9PiB7XG4gICAgICAvLyDmmK/lkKbkuLrigJzlgJLmiaPliIbigJ3poblcbiAgICAgIHRyeSB7XG4gICAgICAgIGxldCBleHRlbnNpb24gPSBKU09OLnBhcnNlKGl0ZW0uY2hlY2tpdGVtX2V4dGVuc2lvbik7XG4gICAgICAgIGl0ZW0uaXNEZWR1Y3Rpb25JdGVtID0gISFleHRlbnNpb24uaXNfZGVkdWN0aW9uX2l0ZW07XG4gICAgICB9IGNhdGNoIHtcbiAgICAgICAgaXRlbS5pc0RlZHVjdGlvbkl0ZW0gPSBmYWxzZTtcbiAgICAgIH1cbiAgICAgIG1hcFtpdGVtLmNoZWNraXRlbV9pZF0gPSBpdGVtO1xuICAgIH0pO1xuICAgIChkb25lSXRlbXMgfHwgW10pLmZvckVhY2goaXRlbSA9PiB7XG4gICAgICBpZiAoIW1hcFtpdGVtLmNoZWNraXRlbV9pZF0pIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgaWYgKCFtYXBbaXRlbS5jaGVja2l0ZW1faWRdLnByb2JsZW1zKSB7XG4gICAgICAgIG1hcFtpdGVtLmNoZWNraXRlbV9pZF0ucHJvYmxlbXMgPSBbXTtcbiAgICAgIH1cbiAgICAgIG1hcFtpdGVtLmNoZWNraXRlbV9pZF0ucHJvYmxlbXMucHVzaChpdGVtKTtcbiAgICB9KTtcblxuICAgIGxldCB0cmVlID0gY3JlYXRlVHJlZUJ5QXJyYXkoYWxsSXRlbXMsIHtcbiAgICAgIGtleTogJ2NoZWNraXRlbV9pZCcsXG4gICAgICByZWxhdGlvbktleTogJ2NoZWNraXRlbV9wYXJlbnRfaWQnLFxuICAgIH0pO1xuXG4gICAgLy8g6YCS5b2S6K6h566X5omA5pyJ5LiA57qn55qE4oCc5ZCI5qC8546H4oCd5ZKM4oCc5YCS5omj5YiG4oCd77yM5b+955Wl4oCc5YCS5omj5YiG4oCd6aG5XG4gICAgKHRyZWUgfHwgW10pLmZvckVhY2goaXRlbSA9PiB7XG4gICAgICAvLyDpnZ7igJzlgJLmiaPliIbpobnigJ3nmoTmsYfmgLtcbiAgICAgIGxldCBwcm9ibGVtcyA9IHRoaXMuZ2V0SXRlbUFsbFByb2JsZW1zKGl0ZW0sIHYgPT4gIXYuaXNEZWR1Y3Rpb25JdGVtKTtcbiAgICAgIGxldCBxdWFsaWZpZWRzID0gcHJvYmxlbXMuZmlsdGVyKHYgPT4gdi5zdGF0dXMgPT09ICflkIjmoLwnKTtcbiAgICAgIGxldCB1bnF1YWxpZmllZCA9IHByb2JsZW1zLmZpbHRlcih2ID0+IHYuc3RhdHVzID09PSAn5LiN5ZCI5qC8Jyk7XG4gICAgICBsZXQgZGVkdWN0aW9uVG90YWwgPSB1bnF1YWxpZmllZC5yZWR1Y2UoKHRvdGFsLCB2KSA9PiB7XG4gICAgICAgIHJldHVybiB0b3RhbCArICh2LmRlZHVjdGlvbiB8fCAwKTtcbiAgICAgIH0sIDApO1xuXG4gICAgICAvLyDigJzlgJLmiaPliIbpobnigJ3nmoTmsYfmgLtcbiAgICAgIGxldCBkdWN1Y3Rpb25JdGVtUHJvbGJlbXMgPSB0aGlzLmdldEl0ZW1BbGxQcm9ibGVtcyhpdGVtLCB2ID0+IHYuaXNEZWR1Y3Rpb25JdGVtKTtcbiAgICAgIGxldCBkdWN1Y3Rpb25JdGVtVG90YWwgPSBkdWN1Y3Rpb25JdGVtUHJvbGJlbXMucmVkdWNlKCh0b3RhbCwgdikgPT4ge1xuICAgICAgICByZXR1cm4gdG90YWwgKyAodi5kZWR1Y3Rpb24gfHwgMCk7XG4gICAgICB9LCAwKTtcblxuICAgICAgaXRlbS5hbGxQcm9ibGVtcyA9IFsuLi5wcm9ibGVtcywgLi4uZHVjdWN0aW9uSXRlbVByb2xiZW1zXTtcblxuICAgICAgaWYgKHByb2JsZW1zICYmIHByb2JsZW1zLmxlbmd0aCkge1xuICAgICAgICBpdGVtLnJlamVjdGlvbiA9IGZhbHNlO1xuICAgICAgICBpdGVtLnBhc3NyYXRlID0gcXVhbGlmaWVkcy5sZW5ndGggLyBwcm9ibGVtcy5sZW5ndGg7XG4gICAgICAgIGl0ZW0uZGVkdWN0aW9uVG90YWwgPSB0aGlzLmZvcm1hdEZsb2F0KGRlZHVjdGlvblRvdGFsKTtcbiAgICAgICAgaXRlbS5kdWN1Y3Rpb25JdGVtVG90YWwgPSB0aGlzLmZvcm1hdEZsb2F0KGR1Y3VjdGlvbkl0ZW1Ub3RhbCk7XG4gICAgICAgIGl0ZW0ucmVzdWx0ID0gaXRlbS5zY29yZSAqIGl0ZW0ucGFzc3JhdGUgLSBpdGVtLmRlZHVjdGlvblRvdGFsIC0gaXRlbS5kdWN1Y3Rpb25JdGVtVG90YWw7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyDnlKnpoblcbiAgICAgICAgaXRlbS5yZWplY3Rpb24gPSB0cnVlO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgLy8g6I635Y+W5omA5pyJ5Y+C5LiO6K6h566X55qE5qOA5p+l6aG577yM5Y2z6Z2e55Sp6aG555qE5qOA5p+l6aG5XG4gICAgbGV0IHZhbGlkSXRlbXMgPSAodHJlZSB8fCBbXSkuZmlsdGVyKGl0ZW0gPT4gIWl0ZW0ucmVqZWN0aW9uKTtcbiAgICAvLyDlt7LmtYvmo4Dmn6XpobnnmoTlvpfliIbmgLvlkoxcbiAgICBsZXQgY3JlZGl0U3VtID0gMDtcbiAgICAvLyDlt7LmtYvmo4Dmn6XpobnnmoTmu6HliIbmgLvlkoxcbiAgICBsZXQgc2NvcmVTdW0gPSAwO1xuICAgIGxldCBoYXNSZXN1bHQgPSBCb29sZWFuKHZhbGlkSXRlbXMubGVuZ3RoKTtcbiAgICAvLyDnu5PmnpxcbiAgICBsZXQgcmVzdWx0O1xuICAgIGxldCBmb3JtdWxhQ2FsYyA9ICcnO1xuICAgIC8vIOaYr+WQpuacieiusOW9le+8jOWAkuaJo+WIhumhueS5n+eul1xuICAgIGxldCBoYXNSZWNvcmQgPSB0cmVlLnNvbWUoaXRlbSA9PiBpdGVtLmFsbFByb2JsZW1zICYmIGl0ZW0uYWxsUHJvYmxlbXMubGVuZ3RoKTtcblxuICAgIHZhbGlkSXRlbXMuZm9yRWFjaChpdGVtID0+IHtcbiAgICAgIGNyZWRpdFN1bSArPSBpdGVtLnJlc3VsdDtcbiAgICAgIHNjb3JlU3VtICs9IGl0ZW0uc2NvcmU7XG4gICAgfSk7XG5cbiAgICBpZiAoaGFzUmVzdWx0KSB7XG4gICAgICByZXN1bHQgPSBwZXJjZW50KGNyZWRpdFN1bSAvIHNjb3JlU3VtLCAyKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmVzdWx0ID0gaGFzUmVjb3JkID8gJzAuMDAlJyA6ICcnO1xuICAgIH1cblxuICAgIGlmIChoYXNSZXN1bHQpIHtcbiAgICAgIGxldCBjcmVkaXRTdW1BcnIgPSBbXTtcbiAgICAgIGxldCBzY29yZVN1bUFyciA9IFtdO1xuICAgICAgdmFsaWRJdGVtcy5mb3JFYWNoKGl0ZW0gPT4ge1xuICAgICAgICBsZXQgcGFzc3JhdGUgPSBwZXJjZW50KGl0ZW0ucGFzc3JhdGUsIDIpO1xuICAgICAgICBjcmVkaXRTdW1BcnIucHVzaChcbiAgICAgICAgICBgKCR7cGFzc3JhdGV9KiR7aXRlbS5zY29yZX0tJHtpdGVtLmRlZHVjdGlvblRvdGFsfS0ke2l0ZW0uZHVjdWN0aW9uSXRlbVRvdGFsfSlgXG4gICAgICAgICk7XG4gICAgICAgIHNjb3JlU3VtQXJyLnB1c2goaXRlbS5zY29yZSk7XG4gICAgICB9KTtcblxuICAgICAgZm9ybXVsYUNhbGMgKz0gYD0oJHtjcmVkaXRTdW1BcnIuam9pbignKycpfSkvKCR7c2NvcmVTdW1BcnIuam9pbignKycpfSk9JHtyZXN1bHR9YDtcbiAgICB9XG5cbiAgICByZXR1cm4ge1xuICAgICAgdGl0bGU6ICfnu7zlkIjmiaPliIYnLFxuICAgICAgbm90ZTogJycsXG4gICAgICByZXN1bHQ6IHJlc3VsdCxcbiAgICAgIGhhc1Jlc3VsdDogaGFzUmVzdWx0LFxuICAgICAgZm9ybXVsYVRleHQ6XG4gICAgICAgICfnu7zlkIjmiaPliIY9zqPvvIjlt7Lmo4Dmn6XkuIDnuqfpobnlkIjmoLznjocq5bey5qOA5LiA57qn6aG55ruh5YiG5YC8Lc6j5bey5qOA5LiA57qn6aG55YaF5pyr57qn6aG55YCS5omj5YiGLc6j5bey5qOA5LiA57qn6aG55YaF5bim5pif5pyr57qn6aG55YCS5omj5YiG77yJL86j77yI5bey5qOA5p+l5LiA57qn6aG55ruh5YiG77yJJyArXG4gICAgICAgIGZvcm11bGFDYWxjLFxuICAgIH07XG4gIH1cblxuICAvKipcbiAgICogQGRlc2NyaXB0aW9uOiDojrflj5bmo4Dmn6XpobnnmoTmiYDmnInpl67popjvvIzmn6Xor6LmiYDmnInlrZDnuqfvvIjlkKvoh6rouqvvvIlcbiAgICogQHBhcmFtIHt0eXBlfVxuICAgKiBAcmV0dXJuOlxuICAgKi9cbiAgZ2V0SXRlbUFsbFByb2JsZW1zKGl0ZW0sIG1hdGNoKSB7XG4gICAgbGV0IHJlc3VsdCA9IFtdO1xuICAgIGlmIChpdGVtLmNoaWxkcmVuICYmIGl0ZW0uY2hpbGRyZW4ubGVuZ3RoKSB7XG4gICAgICBpdGVtLmNoaWxkcmVuLmZvckVhY2goY2hpbGQgPT4ge1xuICAgICAgICByZXN1bHQgPSByZXN1bHQuY29uY2F0KHRoaXMuZ2V0SXRlbUFsbFByb2JsZW1zKGNoaWxkLCBtYXRjaCkpO1xuICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmIChtYXRjaCkge1xuICAgICAgICBpZiAobWF0Y2goaXRlbSkpIHtcbiAgICAgICAgICByZXN1bHQgPSBpdGVtLnByb2JsZW1zIHx8IFtdO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXN1bHQgPSBpdGVtLnByb2JsZW1zIHx8IFtdO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cblxuICAvKipcbiAgICogQGRlc2NyaXB0aW9uOiDojrflj5bmtYvljLrnmoTkv6Hmga9cbiAgICogQHBhcmFtIHtTdHJpbmd9IHBsYWNlSWRcbiAgICogQHJldHVybjogUHJvbWlzZVxuICAgKi9cbiAgZ2V0QmF0Y2hQbGFjZShwbGFjZUlkKSB7XG4gICAgcmV0dXJuIHRoaXMuUmVwb3NpdG9yaWVzLmdldEJhdGNoUGxhY2UocGxhY2VJZCk7XG4gIH1cblxuICAvKipcbiAgICogQGRlc2NyaXB0aW9uOiDojrflj5bmibnmrKHmtYvljLrnmoTmiYDmnInmo4Dmn6XpoblcbiAgICogQHBhcmFtIHtTdHJpbmd9IHBsYWNlSWRcbiAgICogQHJldHVybjogUHJvbWlzZVxuICAgKi9cbiAgZ2V0QmF0Y2hQbGFjZUNoZWNraXRlbXMocGxhY2VJZCkge1xuICAgIHJldHVybiB0aGlzLlJlcG9zaXRvcmllcy5nZXRCYXRjaFBsYWNlQ2hlY2tpdGVtcyhwbGFjZUlkKS50aGVuKHJlcyA9PiB7XG4gICAgICBpZiAoIXJlcyB8fCAhcmVzLmxlbmd0aCkge1xuICAgICAgICByZXR1cm4gW107XG4gICAgICB9XG4gICAgICAvLyDmlbDnu4TovazmjaLmiJAgdHJlZVxuICAgICAgbGV0IGl0ZW1NYXAgPSB7fTtcbiAgICAgIHJlcy5mb3JFYWNoKGl0ZW0gPT4ge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGl0ZW0uY2hlY2tpdGVtX2V4dGVuc2lvbiA9IEpTT04ucGFyc2UoaXRlbS5jaGVja2l0ZW1fZXh0ZW5zaW9uIHx8ICd7fScpO1xuICAgICAgICB9IGNhdGNoIHtcbiAgICAgICAgICBpdGVtLmNoZWNraXRlbV9leHRlbnNpb24gPSB7fTtcbiAgICAgICAgfVxuICAgICAgICBpdGVtLnJ1bGUgPSBpdGVtLmNoZWNraXRlbV9leHRlbnNpb24ucmF0aW5nX3J1bGUgfHwgJyc7XG4gICAgICAgIGl0ZW0uaXNEZWR1Y3Rpb25JdGVtID0gaXRlbS5jaGVja2l0ZW1fZXh0ZW5zaW9uLmlzX2RlZHVjdGlvbl9pdGVtIHx8IDA7XG4gICAgICAgIGl0ZW1NYXBbaXRlbS5jaGVja2l0ZW1faWRdID0gaXRlbTtcbiAgICAgIH0pO1xuXG4gICAgICByZXMuZm9yRWFjaChpdGVtID0+IHtcbiAgICAgICAgbGV0IHBhcmVudElkID0gaXRlbSAmJiBpdGVtLmNoZWNraXRlbV9wYXJlbnRfaWQ7XG4gICAgICAgIGlmICghcGFyZW50SWQgfHwgIWl0ZW1NYXBbcGFyZW50SWRdKSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmICghaXRlbU1hcFtwYXJlbnRJZF0uY2hpbGRyZW4pIHtcbiAgICAgICAgICBpdGVtTWFwW3BhcmVudElkXS5jaGlsZHJlbiA9IFtdO1xuICAgICAgICB9XG5cbiAgICAgICAgaXRlbU1hcFtwYXJlbnRJZF0uY2hpbGRyZW4ucHVzaChpdGVtKTtcblxuICAgICAgICAvLyDntK/orqHkuI3lkIjmoLznmoTmlbDph49cbiAgICAgICAgaWYgKCFpdGVtTWFwW3BhcmVudElkXS51bnF1YWxpZmllZE51bSkge1xuICAgICAgICAgIGl0ZW1NYXBbcGFyZW50SWRdLnVucXVhbGlmaWVkTnVtID0gMDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaXRlbS5zdGF0dXMgPT09ICfkuI3lkIjmoLwnKSB7XG4gICAgICAgICAgaXRlbU1hcFtwYXJlbnRJZF0udW5xdWFsaWZpZWROdW0gKz0gMTtcbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIGxldCB0cmVlID0gcmVzLmZpbHRlcihpdGVtID0+ICFpdGVtLmNoZWNraXRlbV9wYXJlbnRfaWQpO1xuXG4gICAgICBzZXREYXRhTGV2ZWwodHJlZSk7XG5cbiAgICAgIHJldHVybiB0cmVlO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIEBkZXNjcmlwdGlvbjog6I635Y+W5LiT6aG55beh5qOA5qOA5p+l6aG55pWw5o2uXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBzcGVjaWFsSW5zcGVjdElkIHNwZWNpYWxfaW5zcGVjdCDooahpZFxuICAgKiBAcGFyYW0ge1N0cmluZ30gcGxhY2VJZCBzcGVjaWFsX2luc3BlY3RfcGxhY2Ug6KGoaWTvvIzop4LmhJ/mqKHmnb/nlKjliLBcbiAgICogQHJldHVybjogUHJvbWlzZVxuICAgKi9cbiAgYXN5bmMgZ2V0U3BlY2lhbEluc3BlY3REYXRhKHNwZWNpYWxJbnNwZWN0SWQsIHBsYWNlSWQpIHtcbiAgICBsZXQgcmVzID0gYXdhaXQgdGhpcy5SZXBvc2l0b3JpZXMuZ2V0U3BlY2lhbEluc3BlY3REYXRhKHNwZWNpYWxJbnNwZWN0SWQsIHBsYWNlSWQpO1xuXG4gICAgaWYgKCFyZXMpIHtcbiAgICAgIHJldHVybiB7fTtcbiAgICB9XG5cbiAgICBsZXQgY2hlY2tpdGVtRXh0ZW5zaW9uID0ganNvblBhcnNlKHJlcy5jaGVja2l0ZW1fZXh0ZW5zaW9uKSB8fCB7fTtcbiAgICBsZXQgaW1hZ2VzID0ganNvblBhcnNlKHJlcy5pbWFnZV9maWxlKSB8fCBbXTtcblxuICAgIHJldHVybiB7XG4gICAgICAuLi5yZXMsXG4gICAgICBjaGVja2l0ZW06IHtcbiAgICAgICAgaWQ6IHJlcy5jaGVja2l0ZW1faWQsXG4gICAgICAgIG5hbWU6IHJlcy5jaGVja2l0ZW1fbmFtZSxcbiAgICAgICAgY29kZTogcmVzLmNoZWNraXRlbV9jb2RlLFxuICAgICAgICBwYXJlbnRJZDogcmVzLmNoZWNraXRlbV9wYXJlbnRfaWQsXG4gICAgICAgIGZ1bGxuYW1lOiByZXMuY2hlY2tpdGVtX2Z1bGxfbmFtZSxcbiAgICAgICAgZXh0ZW5zaW9uOiBjaGVja2l0ZW1FeHRlbnNpb24sXG4gICAgICB9LFxuICAgICAgaW1hZ2VzLFxuICAgICAgY2hlY2tlcjoge1xuICAgICAgICBpZDogcmVzLmNoZWNrZXIsXG4gICAgICAgIG5hbWU6IHJlcy5jaGVja2VyX25hbWUsXG4gICAgICAgIG1vYmlsZTogcmVzLmNoZWNrZXJfbW9iaWxlLFxuICAgICAgICBpc19pbV91c2VyOiByZXMuY2hlY2tlcl9pc19pbV91c2VyLFxuICAgICAgfSxcbiAgICB9O1xuICB9XG5cbiAgLyoqXG4gICAqIEBkZXNjcmlwdGlvbjog5L+u5pS5IHNwZWNpYWxfaW5zcGVjdF9wbGFjZV9jaGVja2l0ZW0g6KGo5pWw5o2uXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBkYXRhXG4gICAqIEByZXR1cm46IFByb21pc2VcbiAgICovXG4gIHVwZGF0ZVNwZWNpYWxJbnNwZWN0RGF0YShkYXRhKSB7XG4gICAgaWYgKCFkYXRhIHx8ICFkYXRhLmlkKSB7XG4gICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoJ+S/neWtmOa1i+WMuuajgOafpemhueaVsOaNru+8jOWPguaVsOmUmeivrycpO1xuICAgIH1cblxuICAgIGxldCBwYXJhbXMgPSB7XG4gICAgICBpZDogZGF0YS5pZCxcbiAgICB9O1xuICAgIGRhdGEuc3RhdHVzICE9PSB1bmRlZmluZWQgJiYgKHBhcmFtcy5zdGF0dXMgPSBkYXRhLnN0YXR1cyB8fCAnJyk7XG4gICAgZGF0YS5jaGVja2VyICE9PSB1bmRlZmluZWQgJiYgKHBhcmFtcy5jaGVja2VyID0gZGF0YS5jaGVja2VyIHx8ICcnKTtcbiAgICBkYXRhLmNoZWNrX3RpbWUgIT09IHVuZGVmaW5lZCAmJiAocGFyYW1zLmNoZWNrX3RpbWUgPSBkYXRhLmNoZWNrX3RpbWUgfHwgJycpO1xuICAgIGRhdGEuZGVkdWN0aW9uICE9PSB1bmRlZmluZWQgJiYgKHBhcmFtcy5kZWR1Y3Rpb24gPSBkYXRhLmRlZHVjdGlvbik7XG4gICAgZGF0YS5pbWFnZXMgIT09IHVuZGVmaW5lZCAmJiAocGFyYW1zLmltYWdlX2ZpbGUgPSBqc29uU3RyaW5naWZ5KGRhdGEuaW1hZ2VzKSB8fCAnW10nKTtcbiAgICBkYXRhLnJlbWFyayAhPT0gdW5kZWZpbmVkICYmIChwYXJhbXMucmVtYXJrID0gZGF0YS5yZW1hcmsgfHwgJycpO1xuXG4gICAgaWYgKHBhcmFtcy5zdGF0dXMgPT09ICfojYnnqL8nKSB7XG4gICAgICB0aGlzLnNhdmVEcmFmdFRvTW1rdihwYXJhbXMsICdzcGVjaWFsX2luc3BlY3RfcGxhY2VfY2hlY2tpdGVtJyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMucmVtb3ZlRHJhZnRGcm9tTW1rdihwYXJhbXMsICdzcGVjaWFsX2luc3BlY3RfcGxhY2VfY2hlY2tpdGVtJyk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLlJlcG9zaXRvcmllcy51cGRhdGVTcGVjaWFsSW5zcGVjdERhdGEocGFyYW1zKTtcbiAgfVxuICBhc3luYyBzdWJtaXRTcGVjaWFsSW5zcGVjdERhdGEoZGF0YSkge1xuICAgIGlmICghZGF0YSB8fCAhZGF0YS5pZCkge1xuICAgICAgcmV0dXJuIG5ldyBFcnJvcign5o+Q5Lqk5rWL5Yy65qOA5p+l6aG55pWw5o2u77yM5Y+C5pWw6ZSZ6K+vJyk7XG4gICAgfVxuICAgIGRhdGEuY2hlY2tlciA9IGNvbnRleHQuZ2V0VXNlcigpLnVzZXJfaWQ7XG4gICAgZGF0YS5jaGVja190aW1lID0gVXRpbHMubm93KCk7XG4gICAgYXdhaXQgdGhpcy51cGRhdGVTcGVjaWFsSW5zcGVjdERhdGEoZGF0YSk7XG4gICAgYXdhaXQgRGF0YVN5bmNocm9uaXplci5hZGRTeW5jR3JvdXAoW1snc3BlY2lhbF9pbnNwZWN0X3BsYWNlX2NoZWNraXRlbScsIGRhdGEuaWQsICdpZCddXSk7XG4gIH1cblxuICAvKipcbiAgICogQGRlc2NyaXB0aW9uOiDmibnmrKHlrozmiJDmo4Dmn6XnmoTmoKHpqoxcbiAgICogQHBhcmFtIHtPYmplY3R9IGJhdGNoXG4gICAqIEBwYXJhbSB7QXJyYXl9IGxpc3REYXRhXG4gICAqIEByZXR1cm4ge0Jvb2xlYW4gfCBPYmplY3R9XG4gICAqL1xuICBhc3luYyBiYXRjaENoZWNrKGJhdGNoLCBsaXN0RGF0YSkge1xuICAgIGxldCB3YWl0VXBsb2FkQ291bnQgPSBhd2FpdCB0aGlzLmdldFdhaXRVcGxvYWRDb3VudChiYXRjaC5pZCk7XG4gICAgaWYgKHdhaXRVcGxvYWRDb3VudCkge1xuICAgICAgcmV0dXJuIHsgY29kZTogMSwgbXNnOiAn6L+Y5pyJ6Zeu6aKY5q2j5Zyo5LiK5Lyg77yM6K+3562J5b6F6Zeu6aKY5LiK5Lyg5a6M5q+VJyB9O1xuICAgIH1cblxuICAgIC8vIOacqua1i+eahOa1i+WMulxuICAgIGxldCBub3REb25lUGxhY2VzID0gbGlzdERhdGEuZmlsdGVyKGl0ZW0gPT4gaXRlbS5kb25lID09PSAwKTtcbiAgICAvLyDmnInojYnnqL/nmoTmtYvljLpcbiAgICBsZXQgaGFzRHJhZnRQbGFjZXMgPSBsaXN0RGF0YS5maWx0ZXIoaXRlbSA9PiBpdGVtLmRyYWZ0ICE9PSAwKTtcblxuICAgIGlmIChub3REb25lUGxhY2VzLmxlbmd0aCkge1xuICAgICAgbGV0IHBsYWNlTmFtZVNldCA9IG5vdERvbmVQbGFjZXMubWFwKHBsYWNlID0+IHBsYWNlLm5hbWUpLmpvaW4oJ+OAgScpO1xuICAgICAgcmV0dXJuIHsgY29kZTogMSwgbXNnOiBgJHtwbGFjZU5hbWVTZXR95pyq5qOA5p+l77yM6K+35YWI5aSE55CG5YaN5o+Q5LqkYCB9O1xuICAgIH1cbiAgICBpZiAoaGFzRHJhZnRQbGFjZXMubGVuZ3RoKSB7XG4gICAgICBsZXQgcGxhY2VOYW1lU2V0ID0gaGFzRHJhZnRQbGFjZXMubWFwKHBsYWNlID0+IHBsYWNlLm5hbWUpLmpvaW4oJ+OAgScpO1xuICAgICAgcmV0dXJuIHsgY29kZTogMSwgbXNnOiBgJHtwbGFjZU5hbWVTZXR95pyJ6I2J56i/5pWw5o2u77yM6K+35YWI5aSE55CG5YaN5o+Q5LqkYCB9O1xuICAgIH1cbiAgfVxuXG4gIC8vIOi3s+i9rOWIsOmXrumimOWIl+ihqO+8jOaaguaXtui3s+WIsOiAgemhtemdou+8jOWQjumdouS8muenu+mZpFxuICBnb3RvUHJvYmxlbUxpc3QoYmF0Y2hJZCwgc3BlY2lhbEluc3BlY3RJZCwgcGxhY2VJZCkge1xuICAgIHRoaXMuZ290b09sZFByb2JsZW1MaXN0KHsgYmF0Y2hJZCwgcGxhY2VJZCB9KTtcbiAgfVxuXG4gIC8vXG4gIGdvdG9PbGRQcm9ibGVtTGlzdChwYXJhbXMpIHtcbiAgICByb3V0ZXIucHVzaCh7XG4gICAgICBwYXRoOiAnc3BlY2lhbC1pbnNwZWN0LXByb2JsZW0tcHVyZS1saXN0JyxcbiAgICAgIHF1ZXJ5OiB7XG4gICAgICAgIGJhdGNoSWQ6IHBhcmFtcy5iYXRjaElkLFxuICAgICAgICBwbGFjZUlkOiBwYXJhbXMucGxhY2VJZCxcbiAgICAgIH0sXG4gICAgfSk7XG4gIH1cbn1cbiIsIi8qXG4gKiBAQXV0aG9yOiBqaWFuZ2wwMlxuICogQERhdGU6IDIwMjAtMDgtMjggMTQ6MjU6MjRcbiAqIEBMYXN0RWRpdG9yczogamlhbmdsMDJcbiAqIEBMYXN0RWRpdFRpbWU6IDIwMjAtMTAtMTQgMTQ6MTU6NDhcbiAqIEBEZXNjcmlwdGlvbjog5LiT6aG55beh5qOA77yM5p2D6YeNK+W+l+WIhueOh+aooeadvyBzZXJ2aWNlXG4gKi9cblxuaW1wb3J0IFNlcnZpY2VCYXNlIGZyb20gJy4vYmFzZSc7XG5pbXBvcnQgKiBhcyBDT05TVCBmcm9tICcuLi9jb25zdC5qcyc7XG5pbXBvcnQgbW1rdiBmcm9tICdAc3JjL2ZyYW1ld29yay9tbWt2JztcbmltcG9ydCB7IGNyZWF0ZVRyZWVCeUFycmF5IH0gZnJvbSAnQHNyYy9jb21tb24vZGF0YS1oYW5kbGUnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBTZXJ2aWNlTW9kZSBleHRlbmRzIFNlcnZpY2VCYXNlIHtcbiAgLyoqXG4gICAqIEBkZXNjcmlwdGlvbjog6I635Y+W5qih5Z2X6aaW6aG15YiX6KGoXG4gICAqIEBwYXJhbSB7dHlwZX1cbiAgICogQHJldHVybjpcbiAgICovXG4gIGFzeW5jIGdldEluZGV4TGlzdChiYXRjaElkKSB7XG4gICAgbGV0IGxpc3QgPSBhd2FpdCB0aGlzLlJlcG9zaXRvcmllcy5nZXRJbmRleExpc3QoYmF0Y2hJZCk7XG4gICAgbGV0IGRlc2NMaXN0ID0gW107XG5cbiAgICAvLyDliqDovb3mj4/ov7DliJfooahcbiAgICBsZXQgc2hvd0Rlc2MgPSBhd2FpdCBtbWt2LmdldFVzZXJLZXkoQ09OU1QuS0VZX0xJU1RfU0hPV19ERVNDKTtcbiAgICBpZiAoc2hvd0Rlc2MpIHtcbiAgICAgIGRlc2NMaXN0ID0gYXdhaXQgdGhpcy5nZXRTcGVjaWFsSW5zcGVjdERlc2NzKGJhdGNoSWQpO1xuICAgICAgLy8g5o+P6L+w5re75Yqg5YiwIHNpYmxpbmdzXG4gICAgICBpZiAoZGVzY0xpc3QgJiYgZGVzY0xpc3QubGVuZ3RoKSB7XG4gICAgICAgIGxldCBtYXAgPSB7fTtcbiAgICAgICAgbGlzdC5mb3JFYWNoKGl0ZW0gPT4ge1xuICAgICAgICAgIG1hcFtpdGVtLmNoZWNraXRlbV9pZF0gPSBpdGVtO1xuICAgICAgICB9KTtcbiAgICAgICAgZGVzY0xpc3QuZm9yRWFjaChkZXNjID0+IHtcbiAgICAgICAgICBsZXQgcGFyZW50ID0gbWFwW2Rlc2MuY2hlY2tpdGVtX2lkXTtcbiAgICAgICAgICBpZiAoIXBhcmVudCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoIXBhcmVudC5zaWJsaW5ncykge1xuICAgICAgICAgICAgcGFyZW50LnNpYmxpbmdzID0gW107XG4gICAgICAgICAgfVxuICAgICAgICAgIHBhcmVudC5zaWJsaW5ncy5wdXNoKGRlc2MpO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBsZXQgdHJlZSA9IGNyZWF0ZVRyZWVCeUFycmF5KGxpc3QsIHtcbiAgICAgIGtleTogJ2NoZWNraXRlbV9pZCcsXG4gICAgICByZWxhdGlvbktleTogJ2NoZWNraXRlbV9wYXJlbnRfaWQnLFxuICAgICAgc2V0TGV2ZWw6IHRydWUsXG4gICAgfSk7XG5cbiAgICByZXR1cm4geyB0cmVlLCBsaXN0IH07XG4gIH1cblxuICAvKipcbiAgICogQGRlc2NyaXB0aW9uOiDmnKvnuqfoioLngrnngrnlh7vkuovku7ZcbiAgICogQHBhcmFtIHt0eXBlfVxuICAgKiBAcmV0dXJuIHsqfVxuICAgKi9cbiAgb25DbGlja0VuZE5vZGUoaXRlbSwgYmF0Y2gsIGVkaXRhYmxlKSB7XG4gICAgaWYgKGl0ZW0uc3RhdHVzID09PSBDT05TVC5TVEFUVVNfUVVBTElGSUVEKSB7XG4gICAgICAvLyDlkIjmoLxcbiAgICAgIHRoaXMucm91dGVUb09sZFNldFBhc3MoaXRlbSk7XG4gICAgfSBlbHNlIGlmIChpdGVtLnByb2JsZW1OdW0pIHtcbiAgICAgIC8vIOaciemXrumimFxuICAgICAgdGhpcy5yb3V0ZVRvT2xkUHJvYmxlbUxpc3QoaXRlbSwgZWRpdGFibGUpO1xuICAgIH1cbiAgfVxuXG4gIHJvdXRlVG9FZGl0KGl0ZW0pIHtcbiAgICB0aGlzLnJvdXRlVG9PbGRQcm9ibGVtRWRpdChpdGVtKTtcbiAgfVxuXG4gIHJvdXRlVG9WaWV3KGl0ZW0pIHtcbiAgICB0aGlzLnJvdXRlVG9PbGRQcm9ibGVtVmlldyhpdGVtKTtcbiAgfVxuXG4gIGNoYW5nZVNwZWNpYWxJbnNwZWN0U3RhdHVzKGl0ZW0sIHZhbHVlKSB7XG4gICAgLy8g5pqC5pe26YCC6YWN6ICB55qE6aG16Z2i77yM5ZCI5qC86Lez5Yiw6K6+572u5ZCI5qC855qE6aG16Z2i77yM5ZCO6Z2i5Lya56e76ZmkXG4gICAgaWYgKHZhbHVlID09PSBDT05TVC5TVEFUVVNfUVVBTElGSUVEKSB7XG4gICAgICB0aGlzLnJvdXRlVG9PbGRTZXRQYXNzKGl0ZW0pO1xuICAgIH1cbiAgfVxuXG4gIC8vIOi3s+i9rOWIsOmXrumimOWIl+ihqO+8jOaaguaXtui3s+WIsOiAgemhtemdou+8jOWQjumdouS8muenu+mZpFxuICBnb3RvUHJvYmxlbUxpc3QoYmF0Y2hJZCwgc3BlY2lhbEluc3BlY3RJZCwgcGxhY2VJZCkge1xuICAgIHRoaXMuZ290b09sZFByb2JsZW1MaXN0KHsgYmF0Y2hfaWQ6IGJhdGNoSWQsIG1vZGU6IHRoaXMubW9kZSB9KTtcbiAgfVxufVxuIiwiLypcbiAqIEBBdXRob3I6IGppYW5nbDAyXG4gKiBARGF0ZTogMjAyMC0xMC0xMyAxNzoyMjoxNFxuICogQExhc3RFZGl0b3JzOiBqaWFuZ2wwMlxuICogQExhc3RFZGl0VGltZTogMjAyMC0xMC0xMyAxODoxNToyNFxuICogQERlc2NyaXB0aW9uOiDpgILphY3ml6fniYjmnKznmoTpl67popjpobXpnaLvvIzmmoLml7bmlrnmoYhcbiAqL1xuXG5pbXBvcnQgcm91dGVyIGZyb20gJ0Byb3V0ZXInO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBPbGRGaXR0ZXIge1xuICBhc3luYyByb3V0ZVRvT2xkUHJvYmxlbUVkaXQoaXRlbSkge1xuICAgIGxldCBzcGVjaWFsSW5zcGVjdElkID0gaXRlbSAmJiBpdGVtLmlkO1xuICAgIGxldCBxdWVyeURhdGEgPSBhd2FpdCB0aGlzLmdldE9sZFJvdXRlUXVlcnkoc3BlY2lhbEluc3BlY3RJZCk7XG4gICAgbGV0IHsgYmF0Y2hfaWQsIHNwZWNpYWxfaW5zcGVjdF9pZCwgY2hlY2tpdGVtX2lkLCBtb2RlLCByb290X2lkIH0gPSBxdWVyeURhdGE7XG4gICAgcm91dGVyLnB1c2goe1xuICAgICAgcGF0aDogJy9zcGVjaWFsLWluc3BlY3QtcHJvYmxlbS1lZGl0JyxcbiAgICAgIHF1ZXJ5OiB7XG4gICAgICAgIGJhdGNoSWQ6IGJhdGNoX2lkLFxuICAgICAgICBzcGVjaWFsSW5zcGVjdElkOiBzcGVjaWFsX2luc3BlY3RfaWQsXG4gICAgICAgIGNoZWNrSXRlbUlkOiBjaGVja2l0ZW1faWQsXG4gICAgICAgIG1vZGU6IG1vZGUsXG4gICAgICAgIHJvb3RJZDogcm9vdF9pZCxcbiAgICAgIH0sXG4gICAgfSk7XG4gIH1cblxuICBhc3luYyByb3V0ZVRvT2xkUHJvYmxlbVZpZXcoaXRlbSkge1xuICAgIGxldCBzcGVjaWFsSW5zcGVjdElkID0gaXRlbSAmJiBpdGVtLmlkO1xuICAgIGxldCBxdWVyeURhdGEgPSBhd2FpdCB0aGlzLmdldE9sZFJvdXRlUXVlcnkoc3BlY2lhbEluc3BlY3RJZCk7XG4gICAgbGV0IHsgc3BlY2lhbF9pbnNwZWN0X2lkLCBjaGVja2l0ZW1faWQsIG1vZGUsIHByb2JsZW1faWQgfSA9IHF1ZXJ5RGF0YTtcblxuICAgIHJvdXRlci5wdXNoKHtcbiAgICAgIHBhdGg6ICcvc3BlY2lhbC1pbnNwZWN0LXByb2JsZW0tZGV0YWlsJyxcbiAgICAgIHF1ZXJ5OiB7XG4gICAgICAgIHNwZWNpYWxJbnNwZWN0SWQ6IHNwZWNpYWxfaW5zcGVjdF9pZCxcbiAgICAgICAgcHJvYmxlbV9pZDogcHJvYmxlbV9pZCxcbiAgICAgICAgY2hlY2tJdGVtSWQ6IGNoZWNraXRlbV9pZCxcbiAgICAgICAgbW9kZTogbW9kZSxcbiAgICAgIH0sXG4gICAgfSk7XG4gIH1cblxuICBhc3luYyByb3V0ZVRvT2xkU2V0UGFzcyhpdGVtKSB7XG4gICAgbGV0IHNwZWNpYWxJbnNwZWN0SWQgPSBpdGVtICYmIGl0ZW0uaWQ7XG4gICAgbGV0IHF1ZXJ5RGF0YSA9IGF3YWl0IHRoaXMuZ2V0T2xkUm91dGVRdWVyeShzcGVjaWFsSW5zcGVjdElkKTtcbiAgICBsZXQgeyBiYXRjaF9pZCwgc3BlY2lhbF9pbnNwZWN0X2lkLCBjaGVja2l0ZW1faWQsIG1vZGUsIHJvb3RfaWQgfSA9IHF1ZXJ5RGF0YTtcblxuICAgIHJvdXRlci5wdXNoKHtcbiAgICAgIHBhdGg6ICcvc3BlY2lhbC1pbnNwZWN0LXBhc3MnLFxuICAgICAgcXVlcnk6IHtcbiAgICAgICAgYmF0Y2hJZDogYmF0Y2hfaWQsXG4gICAgICAgIHNwZWNpYWxJbnNwZWN0SWQ6IHNwZWNpYWxfaW5zcGVjdF9pZCxcbiAgICAgICAgY2hlY2tJdGVtSWQ6IGNoZWNraXRlbV9pZCxcbiAgICAgICAgbW9kZTogbW9kZSxcbiAgICAgICAgcm9vdElkOiByb290X2lkLFxuICAgICAgfSxcbiAgICB9KTtcbiAgfVxuXG4gIGFzeW5jIHJvdXRlVG9PbGRQcm9ibGVtTGlzdChpdGVtLCBlZGl0YWJsZSkge1xuICAgIGxldCBzcGVjaWFsSW5zcGVjdElkID0gaXRlbSAmJiBpdGVtLmlkO1xuICAgIGxldCBxdWVyeURhdGEgPSBhd2FpdCB0aGlzLmdldE9sZFJvdXRlUXVlcnkoc3BlY2lhbEluc3BlY3RJZCk7XG5cbiAgICB0aGlzLmdvdG9PbGRQcm9ibGVtTGlzdCh7IC4uLnF1ZXJ5RGF0YSwgZWRpdGFibGUgfSk7XG4gIH1cbiAgZ290b09sZFByb2JsZW1MaXN0KHBhcmFtcykge1xuICAgIHJvdXRlci5wdXNoKHtcbiAgICAgIHBhdGg6ICcvc3BlY2lhbC1pbnNwZWN0LXByb2JsZW0tbGlzdCcsXG4gICAgICBxdWVyeToge1xuICAgICAgICBiYXRjaElkOiBwYXJhbXMuYmF0Y2hfaWQgfHwgJycsXG4gICAgICAgIHNwZWNpYWxJbnNwZWN0SWQ6IHBhcmFtcy5zcGVjaWFsX2luc3BlY3RfaWQgfHwgJycsXG4gICAgICAgIGNoZWNrSXRlbUlkOiBwYXJhbXMuY2hlY2tpdGVtX2lkIHx8ICcnLFxuICAgICAgICBtb2RlOiBwYXJhbXMubW9kZSB8fCAnJyxcbiAgICAgICAgcm9vdElkOiBwYXJhbXMucm9vdF9pZCB8fCAnJyxcbiAgICAgICAgZWRpdGFibGU6IE51bWJlcihwYXJhbXMuZWRpdGFibGUgfHwgJycpLFxuICAgICAgfSxcbiAgICB9KTtcbiAgfVxuXG4gIC8vIOmAgumFjeiAgeeahOi3r+eUseaWueahiO+8jOiOt+WPlui3r+eUseaJgOmcgOeahOWPguaVsFxuICBhc3luYyBnZXRPbGRSb3V0ZVF1ZXJ5KHNwZWNpYWxJbnNwZWN0SWQpIHtcbiAgICBsZXQgcXVlcnlEYXRhID0gYXdhaXQgdGhpcy5SZXBvc2l0b3JpZXMuZ2V0T2xkUm91dGVRdWVyeShzcGVjaWFsSW5zcGVjdElkKTtcbiAgICBsZXQgcm9vdF9pZDtcbiAgICBsZXQgcG9pbnRJZCA9IHNwZWNpYWxJbnNwZWN0SWQ7XG5cbiAgICAvLyDmn6Xor6LkuIDnuqfigJzkuJPpobnlt6Hmo4BpZOKAnVxuICAgIHdoaWxlICghcm9vdF9pZCkge1xuICAgICAgbGV0IHJlcyA9IGF3YWl0IHRoaXMuUmVwb3NpdG9yaWVzLmdldFJvb3RTcGVjaWFsSW5zcGVjdElkKHBvaW50SWQpO1xuICAgICAgaWYgKHJlcyAmJiByZXMuaWQpIHtcbiAgICAgICAgaWYgKHJlcy5jaGVja2l0ZW1fcGFyZW50X2lkKSB7XG4gICAgICAgICAgcG9pbnRJZCA9IHJlcy5pZDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByb290X2lkID0gcmVzLmlkO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByb290X2lkID0gcG9pbnRJZDtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHsgLi4ucXVlcnlEYXRhLCByb290X2lkIH07XG4gIH1cbn1cbiIsIi8qXG4gKiBAQXV0aG9yOiBqaWFuZ2wwMlxuICogQERhdGU6IDIwMjAtMDgtMjggMTQ6MjU6MjRcbiAqIEBMYXN0RWRpdG9yczogamlhbmdsMDJcbiAqIEBMYXN0RWRpdFRpbWU6IDIwMjAtMTAtMTQgMTY6Mzk6MDlcbiAqIEBEZXNjcmlwdGlvbjog5LiT6aG55beh5qOA77yMXCLlj6/miZPliIbvvIzmjInmnYPph43orqHnrpfmgLvliIZcIiDmqKHmnb8gc2VydmljZVxuICovXG5cbmltcG9ydCBTZXJ2aWNlQmFzZSBmcm9tICcuL2Jhc2UnO1xuaW1wb3J0ICogYXMgQ09OU1QgZnJvbSAnLi4vY29uc3QuanMnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBTZXJ2aWNlTW9kZSBleHRlbmRzIFNlcnZpY2VCYXNlIHtcbiAgLy8g5om55qyh5a6M5oiQ5qOA5p+l5qCh6aqMXG4gIC8vIGJhdGNoQ2hlY2soKSB7fVxuXG4gIC8qKlxuICAgKiBAZGVzY3JpcHRpb246IOacq+e6p+iKgueCueeCueWHu+S6i+S7tlxuICAgKiBAcGFyYW0ge3R5cGV9XG4gICAqIEByZXR1cm4geyp9XG4gICAqL1xuICBvbkNsaWNrRW5kTm9kZShpdGVtLCBiYXRjaCwgZWRpdGFibGUpIHtcbiAgICBpZiAoaXRlbS5zdGF0dXMgPT09IENPTlNULlNUQVRVU19RVUFMSUZJRUQpIHtcbiAgICAgIC8vIOWQiOagvFxuICAgICAgdGhpcy5yb3V0ZVRvT2xkU2V0UGFzcyhpdGVtKTtcbiAgICB9IGVsc2UgaWYgKGl0ZW0ucHJvYmxlbU51bSkge1xuICAgICAgLy8g5pyJ6Zeu6aKYXG4gICAgICB0aGlzLnJvdXRlVG9PbGRQcm9ibGVtTGlzdChpdGVtLCBlZGl0YWJsZSk7XG4gICAgfVxuICB9XG5cbiAgcm91dGVUb0VkaXQoaXRlbSkge1xuICAgIHRoaXMucm91dGVUb09sZFByb2JsZW1FZGl0KGl0ZW0pO1xuICB9XG5cbiAgcm91dGVUb1ZpZXcoaXRlbSkge1xuICAgIHRoaXMucm91dGVUb09sZFByb2JsZW1WaWV3KGl0ZW0pO1xuICB9XG5cbiAgY2hhbmdlU3BlY2lhbEluc3BlY3RTdGF0dXMoaXRlbSwgdmFsdWUpIHtcbiAgICAvLyDmmoLml7bpgILphY3ogIHnmoTpobXpnaLvvIzlkIjmoLzot7PliLDorr7nva7lkIjmoLznmoTpobXpnaLvvIzlkI7pnaLkvJrnp7vpmaRcbiAgICBpZiAodmFsdWUgPT09IENPTlNULlNUQVRVU19RVUFMSUZJRUQpIHtcbiAgICAgIHRoaXMucm91dGVUb09sZFNldFBhc3MoaXRlbSk7XG4gICAgfVxuICB9XG5cbiAgLy8g6Lez6L2s5Yiw6Zeu6aKY5YiX6KGo77yM5pqC5pe26Lez5Yiw6ICB6aG16Z2i77yM5ZCO6Z2i5Lya56e76ZmkXG4gIGdvdG9Qcm9ibGVtTGlzdChiYXRjaElkLCBzcGVjaWFsSW5zcGVjdElkLCBwbGFjZUlkKSB7XG4gICAgdGhpcy5nb3RvT2xkUHJvYmxlbUxpc3QoeyBiYXRjaF9pZDogYmF0Y2hJZCwgbW9kZTogdGhpcy5tb2RlIH0pO1xuICB9XG59XG4iLCIvKlxuICogQEF1dGhvcjogamlhbmdsMDJcbiAqIEBEYXRlOiAyMDIwLTA4LTI4IDE0OjM1OjM0XG4gKiBATGFzdEVkaXRvcnM6IGppYW5nbDAyXG4gKiBATGFzdEVkaXRUaW1lOiAyMDIwLTA5LTA5IDE2OjMzOjI0XG4gKiBARGVzY3JpcHRpb246IOS4k+mhueW3oeajgO+8jOWPr+aJk+WIhu+8jOaMieW+l+WIhueOh+iuoeeul+aAu+WIhiDku5Plgqjmlofku7ZcbiAqL1xuXG5pbXBvcnQgbG9jYWxEQiBmcm9tICdAc3JjL2ZyYW1ld29yay9sb2NhbERCJztcbmltcG9ydCBSZXBvc2l0b3JpZXNCYXNlIGZyb20gJy4vYmFzZSc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFJlcG9zaXRvcmllc01vZGUgZXh0ZW5kcyBSZXBvc2l0b3JpZXNCYXNlIHtcbiAgZ2V0SW5kZXhMaXN0KGJhdGNoSWQpIHtcbiAgICB2YXIgc3FsID0gYHNlbGVjdCBzaS4qLCBzaS5jaGVja2l0ZW1fbmFtZSBhcyBuYW1lLFxuXHRcdChzZWxlY3QgY291bnQoKikgZnJvbSBjaGVja3F1YWxpdHlfcHJvYmxlbSBjcCB3aGVyZSBjcC5iaXpfaWQgPSBzaS5pZCApIGFzIHByb2JsZW1OdW0sXG5cdFx0KHNlbGVjdCBzdW0oZGVkdWN0aW9uKSBmcm9tIGNoZWNrcXVhbGl0eV9wcm9ibGVtIGNwMSBcbiAgICAgIHdoZXJlIGJhdGNoX3R5cGUgPSAn5LiT6aG55beh5qOAJyBhbmQgY3AxLmJpel9pZCA9IHNpLmlkIGFuZCBjcDEuc3RhdHVzICE9ICfojYnnqL8nIGFuZCBjcDEuc3RhdHVzICE9ICflt7LlhbPpl60nKSBhcyBkZWR1Y3Rpb24gXG5cdFx0ZnJvbSBzcGVjaWFsX2luc3BlY3Qgc2kgXG5cdFx0d2hlcmUgc2kuYmF0Y2hfaWQgPSAnJHtiYXRjaElkfScgb3JkZXIgYnkgc2kuY2hlY2tpdGVtX2NvZGVgO1xuXG4gICAgcmV0dXJuIGxvY2FsREIucXVlcnkoc3FsKTtcbiAgfVxufVxuIiwiLypcbiAqIEBBdXRob3I6IGppYW5nbDAyXG4gKiBARGF0ZTogMjAyMC0wOC0yOCAxNDoyNToyNFxuICogQExhc3RFZGl0b3JzOiBqaWFuZ2wwMlxuICogQExhc3RFZGl0VGltZTogMjAyMC0xMC0xNCAxNjozNzo1NVxuICogQERlc2NyaXB0aW9uOiDkuJPpobnlt6Hmo4DvvIxcIuWPr+aJk+WIhu+8jOaMieadg+mHjeiuoeeul+aAu+WIhlwiIOaooeadvyBzZXJ2aWNlXG4gKi9cblxuaW1wb3J0IFNlcnZpY2VCYXNlIGZyb20gJy4vYmFzZSc7XG5pbXBvcnQgKiBhcyBDT05TVCBmcm9tICcuLi9jb25zdC5qcyc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFNlcnZpY2VNb2RlIGV4dGVuZHMgU2VydmljZUJhc2Uge1xuICAvLyDmibnmrKHlrozmiJDmo4Dmn6XmoKHpqoxcbiAgLy8gYmF0Y2hDaGVjaygpIHt9XG5cbiAgLyoqXG4gICAqIEBkZXNjcmlwdGlvbjog5pyr57qn6IqC54K554K55Ye75LqL5Lu2XG4gICAqIEBwYXJhbSB7dHlwZX1cbiAgICogQHJldHVybiB7Kn1cbiAgICovXG4gIG9uQ2xpY2tFbmROb2RlKGl0ZW0sIGJhdGNoLCBlZGl0YWJsZSkge1xuICAgIGlmIChpdGVtLnN0YXR1cyA9PT0gQ09OU1QuU1RBVFVTX1FVQUxJRklFRCkge1xuICAgICAgLy8g5ZCI5qC8XG4gICAgICB0aGlzLnJvdXRlVG9PbGRTZXRQYXNzKGl0ZW0pO1xuICAgIH0gZWxzZSBpZiAoaXRlbS5wcm9ibGVtTnVtKSB7XG4gICAgICAvLyDmnInpl67pophcbiAgICAgIHRoaXMucm91dGVUb09sZFByb2JsZW1MaXN0KGl0ZW0sIGVkaXRhYmxlKTtcbiAgICB9XG4gIH1cblxuICByb3V0ZVRvRWRpdChpdGVtKSB7XG4gICAgdGhpcy5yb3V0ZVRvT2xkUHJvYmxlbUVkaXQoaXRlbSk7XG4gIH1cblxuICByb3V0ZVRvVmlldyhpdGVtKSB7XG4gICAgdGhpcy5yb3V0ZVRvT2xkUHJvYmxlbVZpZXcoaXRlbSk7XG4gIH1cblxuICBjaGFuZ2VTcGVjaWFsSW5zcGVjdFN0YXR1cyhpdGVtLCB2YWx1ZSkge1xuICAgIC8vIOaaguaXtumAgumFjeiAgeeahOmhtemdou+8jOWQiOagvOi3s+WIsOiuvue9ruWQiOagvOeahOmhtemdou+8jOWQjumdouS8muenu+mZpFxuICAgIGlmICh2YWx1ZSA9PT0gQ09OU1QuU1RBVFVTX1FVQUxJRklFRCkge1xuICAgICAgdGhpcy5yb3V0ZVRvT2xkU2V0UGFzcyhpdGVtKTtcbiAgICB9XG4gIH1cblxuICAvLyDot7PovazliLDpl67popjliJfooajvvIzmmoLml7bot7PliLDogIHpobXpnaLvvIzlkI7pnaLkvJrnp7vpmaRcbiAgZ290b1Byb2JsZW1MaXN0KGJhdGNoSWQsIHNwZWNpYWxJbnNwZWN0SWQsIHBsYWNlSWQpIHtcbiAgICB0aGlzLmdvdG9PbGRQcm9ibGVtTGlzdCh7IGJhdGNoX2lkOiBiYXRjaElkLCBtb2RlOiB0aGlzLm1vZGUgfSk7XG4gIH1cbn1cbiIsIi8qXG4gKiBAQXV0aG9yOiBqaWFuZ2wwMlxuICogQERhdGU6IDIwMjAtMDgtMjggMTQ6MzU6MzRcbiAqIEBMYXN0RWRpdG9yczogamlhbmdsMDJcbiAqIEBMYXN0RWRpdFRpbWU6IDIwMjAtMDktMTQgMTk6NDE6MTlcbiAqIEBEZXNjcmlwdGlvbjog5LiT6aG55beh5qOA77yM6KeC5oSf5pWI5p6c5LuT5YKo5paH5Lu2XG4gKi9cblxuaW1wb3J0IGxvY2FsREIgZnJvbSAnQHNyYy9mcmFtZXdvcmsvbG9jYWxEQic7XG5pbXBvcnQgUmVwb3NpdG9yaWVzQmFzZSBmcm9tICcuL2Jhc2UnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBSZXBvc2l0b3JpZXNNb2RlIGV4dGVuZHMgUmVwb3NpdG9yaWVzQmFzZSB7XG4gIGdldEluZGV4TGlzdChiYXRjaElkKSB7XG4gICAgdmFyIHNxbCA9IGBzZWxlY3Qgc2kuKiwgc2kuY2hlY2tpdGVtX25hbWUgYXMgbmFtZSxcblx0XHQoc2VsZWN0IHN1bShjcC5yZWRsaW5lX2RlZHVjdGlvbikgZnJvbSBjaGVja3F1YWxpdHlfcHJvYmxlbSBjcCBcbiAgICAgIHdoZXJlIGJhdGNoX3R5cGUgPSAn5LiT6aG55beh5qOAJyBhbmQgY3AuYml6X2lkID0gc2kuaWQgYW5kIGNwLnN0YXR1cyAhPSAn6I2J56i/JyBhbmQgY3Auc3RhdHVzICE9ICflt7LlhbPpl60nICkgYXMgcmVkbGluZV9kZWR1Y3Rpb24sIFxuXHRcdChzZWxlY3QgY291bnQoKikgZnJvbSBjaGVja3F1YWxpdHlfcHJvYmxlbSBjcCB3aGVyZSBjcC5iaXpfaWQgPSBzaS5pZCApIGFzIHByb2JsZW1OdW0sXG5cdFx0KHNlbGVjdCBzdW0oZGVkdWN0aW9uKSBmcm9tIGNoZWNrcXVhbGl0eV9wcm9ibGVtIGNwMSBcbiAgICAgIHdoZXJlIGJhdGNoX3R5cGUgPSAn5LiT6aG55beh5qOAJyBhbmQgY3AxLmJpel9pZCA9IHNpLmlkIGFuZCBjcDEuc3RhdHVzICE9ICfojYnnqL8nIGFuZCBjcDEuc3RhdHVzICE9ICflt7LlhbPpl60nKSBhcyBkZWR1Y3Rpb24gXG5cdFx0ZnJvbSBzcGVjaWFsX2luc3BlY3Qgc2kgXG5cdFx0d2hlcmUgc2kuYmF0Y2hfaWQgPSAnJHtiYXRjaElkfScgb3JkZXIgYnkgc2kuY2hlY2tpdGVtX2NvZGVgO1xuXG4gICAgcmV0dXJuIGxvY2FsREIucXVlcnkoc3FsKTtcbiAgfVxufVxuIiwiLypcbiAqIEBBdXRob3I6IGppYW5nbDAyXG4gKiBARGF0ZTogMjAyMC0wOC0yOCAxNDozNTozNFxuICogQExhc3RFZGl0b3JzOiBqaWFuZ2wwMlxuICogQExhc3RFZGl0VGltZTogMjAyMC0xMC0xMyAxNjoxOTozMVxuICogQERlc2NyaXB0aW9uOiDlkIjlkIzlt6Hmo4DvvIzku5Plgqjmlofku7ZcbiAqL1xuXG4vLyBpbXBvcnQgbG9jYWxEQiBmcm9tICdAc3JjL2ZyYW1ld29yay9sb2NhbERCJztcbmltcG9ydCBSZXBvc2l0b3JpZXNCYXNlIGZyb20gJy4vYmFzZSc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFJlcG9zaXRvcmllc01vZGUgZXh0ZW5kcyBSZXBvc2l0b3JpZXNCYXNlIHtcbiAgLy9cbn1cbiIsIi8qXG4gKiBAQXV0aG9yOiBqaWFuZ2wwMlxuICogQERhdGU6IDIwMjAtMDgtMjggMTQ6MzU6MzRcbiAqIEBMYXN0RWRpdG9yczogamlhbmdsMDJcbiAqIEBMYXN0RWRpdFRpbWU6IDIwMjAtMTAtMjYgMDk6NTE6MTBcbiAqIEBEZXNjcmlwdGlvbjog5LiT6aG55beh5qOA77yM6KeC5oSf5pWI5p6c5LuT5YKo5paH5Lu2XG4gKi9cblxuaW1wb3J0IGxvY2FsREIgZnJvbSAnQHNyYy9mcmFtZXdvcmsvbG9jYWxEQic7XG5pbXBvcnQgUmVwb3NpdG9yaWVzQmFzZSBmcm9tICcuL2Jhc2UnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBSZXBvc2l0b3JpZXNNb2RlIGV4dGVuZHMgUmVwb3NpdG9yaWVzQmFzZSB7XG4gIC8qKlxuICAgKiBAZGVzY3JpcHRpb246IOiOt+WPluaJueasoeeahOaJgOaciea1i+WMulxuICAgKiBAcGFyYW0ge1N0cmluZ30gYmF0Y2hJZFxuICAgKiBAcmV0dXJuOiBQcm9taXNlXG4gICAqL1xuICBnZXRCYXRjaFBsYWNlcyhiYXRjaElkKSB7XG4gICAgbGV0IHNxbCA9IGBzZWxlY3QgKiBmcm9tIHNwZWNpYWxfaW5zcGVjdF9wbGFjZSB3aGVyZSBiYXRjaF9pZCA9ICcke2JhdGNoSWR9J1xuICAgICAgb3JkZXIgYnkgcmVnaXN0X2RhdGVgO1xuICAgIHJldHVybiBsb2NhbERCLnF1ZXJ5KHNxbCk7XG4gIH1cblxuICAvKipcbiAgICogQGRlc2NyaXB0aW9uOiDojrflj5bmibnmrKHnmoTmiYDmnInmnKvnuqfmo4Dmn6XpobnjgILku4XpgILnlKjop4LmhJ/mlYjmnpxcbiAgICogQHBhcmFtIHtTdHJpbmd9IGJhdGNoSWRcbiAgICogQHJldHVybjogUHJvbWlzZVxuICAgKi9cbiAgYXN5bmMgZ2V0TW9kZTExRW5kSXRlbXMoYmF0Y2hJZCkge1xuICAgIGxldCBlbmRTcGVjaWFsSW5zcGVjdElkcyA9IGF3YWl0IHRoaXMuZ2V0QmF0Y2hFbmRTcGVjaWFsSW5zcGVjdElkcyhiYXRjaElkKTtcbiAgICBsZXQgZW5kUGFyYW1zID1cbiAgICAgIGVuZFNwZWNpYWxJbnNwZWN0SWRzICYmIGVuZFNwZWNpYWxJbnNwZWN0SWRzLmxlbmd0aFxuICAgICAgICA/IGAgYW5kIHNpcGMuc3BlY2lhbF9pbnNwZWN0X2lkIGluICgnJHtlbmRTcGVjaWFsSW5zcGVjdElkcy5qb2luKFwiJywnXCIpfScpYFxuICAgICAgICA6ICcnO1xuICAgIGxldCBzcWwgPSBgc2VsZWN0IHNpcGMuKiwgc2lwLm5hbWUgYXMgcGxhY2VfbmFtZVxuICAgICAgZnJvbSBzcGVjaWFsX2luc3BlY3RfcGxhY2VfY2hlY2tpdGVtIHNpcGNcbiAgICAgIGpvaW4gc3BlY2lhbF9pbnNwZWN0X3BsYWNlIHNpcCBvbiBzaXAuaWQgPSBzaXBjLnBsYWNlX2lkXG4gICAgICB3aGVyZSBzaXBjLmJhdGNoX2lkID0gPyAke2VuZFBhcmFtc31gO1xuICAgIHJldHVybiBsb2NhbERCLnF1ZXJ5KHNxbCwgW2JhdGNoSWRdKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAZGVzY3JpcHRpb246IOiOt+WPluaJueasoeeahOacq+e6p+ajgOafpemhueeahCBzcGVjaWFsX2luc3BlY3Qg6KGoIGlkXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBiYXRjaElkXG4gICAqIEByZXR1cm46IFByb21pc2VcbiAgICovXG4gIGFzeW5jIGdldEJhdGNoRW5kU3BlY2lhbEluc3BlY3RJZHMoYmF0Y2hJZCkge1xuICAgIGxldCBzcWwgPSBgc2VsZWN0ICogZnJvbSBzcGVjaWFsX2luc3BlY3Qgd2hlcmUgYmF0Y2hfaWQgPSAnJHtiYXRjaElkfSdgO1xuICAgIGxldCByZXMgPSBhd2FpdCBsb2NhbERCLnF1ZXJ5KHNxbCk7XG4gICAgaWYgKCFyZXMgfHwgIXJlcy5sZW5ndGgpIHtcbiAgICAgIHJldHVybiBbXTtcbiAgICB9XG5cbiAgICBsZXQgcGFyZW50SWRTZXQgPSB7fTtcbiAgICByZXMuZm9yRWFjaChpdGVtID0+IHtcbiAgICAgIGlmIChpdGVtLmNoZWNraXRlbV9wYXJlbnRfaWQpIHtcbiAgICAgICAgcGFyZW50SWRTZXRbaXRlbS5jaGVja2l0ZW1fcGFyZW50X2lkXSA9IDE7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBsZXQgZW5kSXRlbXMgPSByZXMuZmlsdGVyKGl0ZW0gPT4gIXBhcmVudElkU2V0W2l0ZW0uY2hlY2tpdGVtX2lkXSk7XG4gICAgcmV0dXJuIGVuZEl0ZW1zLm1hcChpdGVtID0+IGl0ZW0uaWQpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBkZXNjcmlwdGlvbjog6I635Y+W5LiA5p2h5om55qyh5qOA5p+l6aG5XG4gICAqIEBwYXJhbSB7U3RyaW5nfSBiYXRjaElkXG4gICAqIEByZXR1cm46IFByb21pc2VcbiAgICovXG4gIGhhc0JhdGNoQ2hlY2tpdGVtKGJhdGNoSWQpIHtcbiAgICBsZXQgc3FsID0gYHNlbGVjdCAxIGZyb20gc3BlY2lhbF9pbnNwZWN0IHdoZXJlIGJhdGNoX2lkID0gJyR7YmF0Y2hJZH0nYDtcbiAgICByZXR1cm4gbG9jYWxEQi5xdWVyeU9uZShzcWwpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBkZXNjcmlwdGlvbjog5rWL5Yy6XG4gICAqIEBwYXJhbSB7T2JqZWN0fSBkYXRhXG4gICAqIEByZXR1cm46IFByb21pc2VcbiAgICovXG4gIGFkZEJhdGNoUGxhY2UoZGF0YSkge1xuICAgIHJldHVybiBsb2NhbERCLmluc2VydE9iamVjdCgnc3BlY2lhbF9pbnNwZWN0X3BsYWNlJywgZGF0YSk7XG4gIH1cbiAgdXBkYXRlQmF0Y2hQbGFjZShkYXRhKSB7XG4gICAgcmV0dXJuIGxvY2FsREIudXBkYXRlKCdzcGVjaWFsX2luc3BlY3RfcGxhY2UnLCBkYXRhLCB7IGlkOiBkYXRhLmlkIH0pO1xuICB9XG4gIGdldEJhdGNoUGxhY2UocGxhY2VJZCkge1xuICAgIGxldCBzcWwgPSBgc2VsZWN0ICogZnJvbSBzcGVjaWFsX2luc3BlY3RfcGxhY2Ugd2hlcmUgaWQgPSA/YDtcbiAgICByZXR1cm4gbG9jYWxEQi5xdWVyeU9uZShzcWwsIFtwbGFjZUlkXSk7XG4gIH1cbiAgZGVsZXRlQmF0Y2hQbGFjZShwbGFjZUlkKSB7XG4gICAgbGV0IGRlbGV0ZVBsYWNlU3FsID0gYGRlbGV0ZSBmcm9tIHNwZWNpYWxfaW5zcGVjdF9wbGFjZSB3aGVyZSBpZCA9ID9gO1xuICAgIGxldCBkZWxldGVQbGFjZVByb2JsZW1TcWwgPSBgZGVsZXRlIGZyb20gY2hlY2txdWFsaXR5X3Byb2JsZW0gd2hlcmUgYml6X2NoaWxkcmVuX2lkIGluXG4gICAgICAoc2VsZWN0IGlkIGZyb20gc3BlY2lhbF9pbnNwZWN0X3BsYWNlX2NoZWNraXRlbSB3aGVyZSBwbGFjZV9pZCA9ID8pYDtcbiAgICBsZXQgZGVsZXRlUGxhY2VDaGVja2l0ZW1TcWwgPSBgZGVsZXRlIGZyb20gc3BlY2lhbF9pbnNwZWN0X3BsYWNlX2NoZWNraXRlbSB3aGVyZSBwbGFjZV9pZCA9ID9gO1xuXG4gICAgcmV0dXJuIFByb21pc2UuYWxsKFtcbiAgICAgIGxvY2FsREIuZXhlY3V0ZVNxbChkZWxldGVQbGFjZVNxbCwgW3BsYWNlSWRdKSxcbiAgICAgIGxvY2FsREIuZXhlY3V0ZVNxbChkZWxldGVQbGFjZVByb2JsZW1TcWwsIFtwbGFjZUlkXSksXG4gICAgICBsb2NhbERCLmV4ZWN1dGVTcWwoZGVsZXRlUGxhY2VDaGVja2l0ZW1TcWwsIFtwbGFjZUlkXSksXG4gICAgXSk7XG4gIH1cblxuICAvKipcbiAgICogQGRlc2NyaXB0aW9uOiDmlrDlop7mtYvljLrmo4Dmn6XpoblcbiAgICogQHBhcmFtIHtPYmplY3R9IGRhdGFcbiAgICogQHJldHVybjogUHJvbWlzZVxuICAgKi9cbiAgYWRkQmF0Y2hQbGFjZUNoZWNraXRlbShkYXRhKSB7XG4gICAgcmV0dXJuIGxvY2FsREIuaW5zZXJ0T2JqZWN0KCdzcGVjaWFsX2luc3BlY3RfcGxhY2VfY2hlY2tpdGVtJywgZGF0YSk7XG4gIH1cblxuICAvKipcbiAgICogQGRlc2NyaXB0aW9uOiDojrflj5bmibnmrKHnmoTmiYDmnInmo4Dmn6XpoblcbiAgICogQHBhcmFtIHtTdHJpbmd9IGJhdGNoSWRcbiAgICogQHJldHVybjogUHJvbWlzZVxuICAgKi9cbiAgZ2V0QmF0Y2hBbGxTcGVjaWFsSW5zcGVjdChiYXRjaElkKSB7XG4gICAgbGV0IHNxbCA9IGBzZWxlY3QgKiBmcm9tIHNwZWNpYWxfaW5zcGVjdCB3aGVyZSBiYXRjaF9pZCA9ICcke2JhdGNoSWR9J2A7XG4gICAgcmV0dXJuIGxvY2FsREIucXVlcnkoc3FsKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAZGVzY3JpcHRpb246IOiOt+WPluaJueasoeeahOaJgOacieajgOafpemhuVxuICAgKiBAcGFyYW0ge1N0cmluZ30gcGxhY2VJZFxuICAgKiBAcmV0dXJuOiBQcm9taXNlXG4gICAqL1xuICBnZXRCYXRjaFBsYWNlQ2hlY2tpdGVtcyhwbGFjZUlkKSB7XG4gICAgbGV0IHNxbCA9IGBzZWxlY3Qgc2lwYy4qLCBzaS5jaGVja2l0ZW1fbmFtZSBhcyBuYW1lLFxuICAgICAgc2kuY2hlY2tpdGVtX2lkLFxuICAgICAgc2kuY2hlY2tpdGVtX2NvZGUsXG4gICAgICBzaS5jaGVja2l0ZW1fbmFtZSxcbiAgICAgIHNpLmNoZWNraXRlbV9mdWxsX25hbWUsXG4gICAgICBzaS5jaGVja2l0ZW1fcGFyZW50X2lkLFxuICAgICAgc2kuY2hlY2tpdGVtX2V4dGVuc2lvblxuICAgICAgZnJvbSBzcGVjaWFsX2luc3BlY3RfcGxhY2VfY2hlY2tpdGVtIHNpcGNcbiAgICAgIGpvaW4gc3BlY2lhbF9pbnNwZWN0IHNpIG9uIHNpLmlkID0gc2lwYy5zcGVjaWFsX2luc3BlY3RfaWRcbiAgICAgIHdoZXJlIHNpcGMucGxhY2VfaWQgPSA/XG4gICAgICBvcmRlciBieSBzaS5jaGVja2l0ZW1fY29kZWA7XG4gICAgcmV0dXJuIGxvY2FsREIucXVlcnkoc3FsLCBbcGxhY2VJZF0pO1xuICB9XG5cbiAgLyoqXG4gICAqIEBkZXNjcmlwdGlvbjog6I635Y+W5om55qyh5omA5pyJ5bey5rWL55qE5pWw5o2u77yM5LuF6YCC55So5LqO6KeC5oSf5pWI5p6cXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBiYXRjaElkXG4gICAqIEByZXR1cm46IFByb21pc2VcbiAgICovXG4gIGdldEFsbERvbmVEYXRhKGJhdGNoSWQpIHtcbiAgICBsZXQgc3FsID0gYHNlbGVjdCBzaXBjLiosXG4gICAgICBzaS5jaGVja2l0ZW1faWQsIHNpLmNoZWNraXRlbV9wYXJlbnRfaWQsIHNpLnNjb3JlIFxuICAgICAgZnJvbSBzcGVjaWFsX2luc3BlY3RfcGxhY2VfY2hlY2tpdGVtIHNpcGNcbiAgICAgIGpvaW4gc3BlY2lhbF9pbnNwZWN0IHNpIG9uIHNpLmlkID0gc2lwYy5zcGVjaWFsX2luc3BlY3RfaWRcbiAgICAgIHdoZXJlIChzaXBjLnN0YXR1cyA9ICflkIjmoLwnIG9yIHNpcGMuc3RhdHVzID0gJ+S4jeWQiOagvCcpIGFuZCBzaXBjLmJhdGNoX2lkID0gJyR7YmF0Y2hJZH0nXG4gICAgICBvcmRlciBieSBzaS5jaGVja2l0ZW1fY29kZWA7XG4gICAgcmV0dXJuIGxvY2FsREIucXVlcnkoc3FsKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAZGVzY3JpcHRpb246IOiOt+WPluaJgOacieeahOajgOafpemhuVxuICAgKiBAcGFyYW0ge1N0cmluZ30gYmF0Y2hJZFxuICAgKiBAcmV0dXJuOiBQcm9taXNlIC0+IEFycmF5XG4gICAqL1xuICBnZXRBbGxJdGVtcyhiYXRjaElkKSB7XG4gICAgbGV0IHNxbCA9IGBzZWxlY3QgKiBmcm9tIHNwZWNpYWxfaW5zcGVjdCBcbiAgICAgIHdoZXJlIGJhdGNoX2lkID0gJyR7YmF0Y2hJZH0nXG4gICAgICBvcmRlciBieSBjaGVja2l0ZW1fY29kZWA7XG4gICAgcmV0dXJuIGxvY2FsREIucXVlcnkoc3FsKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAZGVzY3JpcHRpb246IOiOt+WPluaJgOaciemdnuacq+e6p+eahOajgOafpemhuVxuICAgKiBAcGFyYW0ge1N0cmluZ30gYmF0Y2hJZFxuICAgKiBAcmV0dXJuOiBQcm9taXNlIC0+IEFycmF5XG4gICAqL1xuICBnZXROb3RFbmRJdGVtcyhiYXRjaElkKSB7XG4gICAgbGV0IHNxbCA9IGBzZWxlY3QgKiBmcm9tIHNwZWNpYWxfaW5zcGVjdFxuICAgICAgd2hlcmUgY2hlY2tpdGVtX2lkIGluIChzZWxlY3QgY2hlY2tpdGVtX3BhcmVudF9pZCBmcm9tIHNwZWNpYWxfaW5zcGVjdCB3aGVyZSBiYXRjaF9pZCA9ICcke2JhdGNoSWR9JylcbiAgICAgICAgb3IgKGlmbnVsbChjaGVja2l0ZW1fcGFyZW50X2lkLCAnJykgPSAnJyBhbmQgYmF0Y2hfaWQgPSAnJHtiYXRjaElkfScpXG4gICAgICBvcmRlciBieSBjaGVja2l0ZW1fY29kZWA7XG4gICAgcmV0dXJuIGxvY2FsREIucXVlcnkoc3FsKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAZGVzY3JpcHRpb246IOiOt+WPluS4k+mhueW3oeajgOa1i+WMuuajgOafpemhueaVsOaNrlxuICAgKiBAcGFyYW0ge1N0cmluZ30gc3BlY2lhbEluc3BlY3RJZCBzcGVjaWFsX2luc3BlY3Qg6KGoaWRcbiAgICogQHBhcmFtIHtTdHJpbmd9IHBsYWNlSWQgc3BlY2lhbF9pbnNwZWN0X3BsYWNlIOihqGlkXG4gICAqIEByZXR1cm46IFByb21pc2VcbiAgICovXG4gIGdldFNwZWNpYWxJbnNwZWN0RGF0YShzcGVjaWFsSW5zcGVjdElkLCBwbGFjZUlkKSB7XG4gICAgbGV0IHNxbCA9IGBzZWxlY3Qgc2lwYy4qLFxuICAgICAgc2kuY2hlY2tpdGVtX2lkLFxuICAgICAgc2kuY2hlY2tpdGVtX2NvZGUsXG4gICAgICBzaS5jaGVja2l0ZW1fbmFtZSxcbiAgICAgIHNpLmNoZWNraXRlbV9mdWxsX25hbWUsXG4gICAgICBzaS5jaGVja2l0ZW1fcGFyZW50X2lkLFxuICAgICAgc2kuY2hlY2tpdGVtX2V4dGVuc2lvbixcbiAgICAgIHUubmFtZSBhcyBjaGVja2VyX25hbWUsIHUubW9iaWxlIGFzIGNoZWNrZXJfbW9iaWxlLCB1LmlzX2ltX3VzZXIgYXMgY2hlY2tfaXNfaW1fdXNlclxuICAgICAgZnJvbSBzcGVjaWFsX2luc3BlY3RfcGxhY2VfY2hlY2tpdGVtIHNpcGNcbiAgICAgIGpvaW4gc3BlY2lhbF9pbnNwZWN0IHNpIG9uIHNpLmlkID0gc2lwYy5zcGVjaWFsX2luc3BlY3RfaWRcbiAgICAgIGxlZnQgam9pbiB1c2VyIHUgb24gdS5pZCA9IHNpcGMuY2hlY2tlclxuICAgICAgd2hlcmUgc2lwYy5zcGVjaWFsX2luc3BlY3RfaWQgPSAnJHtzcGVjaWFsSW5zcGVjdElkfScgYW5kIHNpcGMucGxhY2VfaWQgPSAnJHtwbGFjZUlkfSdgO1xuICAgIHJldHVybiBsb2NhbERCLnF1ZXJ5T25lKHNxbCk7XG4gIH1cblxuICAvKipcbiAgICogQGRlc2NyaXB0aW9uOiDkv67mlLkgc3BlY2lhbF9pbnNwZWN0X3BsYWNlX2NoZWNraXRlbSDooajmlbDmja5cbiAgICogQHBhcmFtIHtPYmplY3R9IGRhdGFcbiAgICogQHJldHVybjogUHJvbWlzZVxuICAgKi9cbiAgdXBkYXRlU3BlY2lhbEluc3BlY3REYXRhKGRhdGEpIHtcbiAgICByZXR1cm4gbG9jYWxEQi51cGRhdGUoJ3NwZWNpYWxfaW5zcGVjdF9wbGFjZV9jaGVja2l0ZW0nLCBkYXRhLCB7IGlkOiBkYXRhLmlkIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIEBkZXNjcmlwdGlvbjog6I635Y+W5LiT6aG55beh5qOA5rWL5Yy65qOA5p+l6aG55pWw5o2uXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBzcGVjaWFsSW5zcGVjdElkIHNwZWNpYWxfaW5zcGVjdCDooahpZFxuICAgKiBAcGFyYW0ge1N0cmluZ30gcGxhY2VJZCBzcGVjaWFsX2luc3BlY3RfcGxhY2Ug6KGoaWRcbiAgICogQHJldHVybjogUHJvbWlzZVxuICAgKi9cbiAgZ2V0UGxhY2VTcGVjaWFsSW5zcGVjdERhdGEoc3BlY2lhbEluc3BlY3RJZCwgcGxhY2VJZCkge1xuICAgIGxldCBzcWwgPSBgc2VsZWN0IHNpcGMuKixcbiAgICAgIHNpLmNoZWNraXRlbV9pZCxcbiAgICAgIHNpLmNoZWNraXRlbV9jb2RlLFxuICAgICAgc2kuY2hlY2tpdGVtX25hbWUsXG4gICAgICBzaS5jaGVja2l0ZW1fZnVsbF9uYW1lLFxuICAgICAgc2kuY2hlY2tpdGVtX3BhcmVudF9pZCxcbiAgICAgIHNpLmNoZWNraXRlbV9leHRlbnNpb24sXG4gICAgICB1Lm5hbWUgYXMgY2hlY2tlcl9uYW1lLFxuICAgICAgdS5tb2JpbGUgYXMgY2hlY2tlcl9tb2JpbGUsXG4gICAgICB1LmlzX2ltX3VzZXIgYXMgY2hlY2tfaXNfaW1fdXNlclxuICAgICAgZnJvbSBzcGVjaWFsX2luc3BlY3RfcGxhY2VfY2hlY2tpdGVtIHNpcGNcbiAgICAgIGpvaW4gc3BlY2lhbF9pbnNwZWN0IHNpIG9uIHNpLmlkID0gc2lwYy5zcGVjaWFsX2luc3BlY3RfaWRcbiAgICAgIGxlZnQgam9pbiB1c2VyIHUgb24gdS5pZCA9IHNpcGMuY2hlY2tlclxuICAgICAgd2hlcmUgc2lwYy5zcGVjaWFsX2luc3BlY3RfaWQgPSA/IGFuZCBzaXBjLnBsYWNlX2lkID0gP2A7XG4gICAgcmV0dXJuIGxvY2FsREIucXVlcnlPbmUoc3FsLCBbc3BlY2lhbEluc3BlY3RJZCwgcGxhY2VJZF0pO1xuICB9XG4gIC8qKlxuICAgKiBAZGVzY3JpcHRpb246IOS/ruaUuSBzcGVjaWFsX2luc3BlY3RfcGxhY2VfY2hlY2tpdGVtIOihqOaVsOaNrlxuICAgKiBAcGFyYW0ge09iamVjdH0gZGF0YVxuICAgKiBAcmV0dXJuOiBQcm9taXNlXG4gICAqL1xuICB1cGRhdGVQbGFjZVNwZWNpYWxJbnNwZWN0RGF0YShkYXRhKSB7XG4gICAgcmV0dXJuIGxvY2FsREIudXBkYXRlKCdzcGVjaWFsX2luc3BlY3RfcGxhY2VfY2hlY2tpdGVtJywgZGF0YSwgeyBpZDogZGF0YS5pZCB9KTtcbiAgfVxufVxuIiwiLypcbiAqIEBBdXRob3I6IGppYW5nbDAyXG4gKiBARGF0ZTogMjAyMC0wOC0yOCAxNDozNTozNFxuICogQExhc3RFZGl0b3JzOiBqaWFuZ2wwMlxuICogQExhc3RFZGl0VGltZTogMjAyMC0xMC0xMyAxNzowNTo1OFxuICogQERlc2NyaXB0aW9uOiDkuJPpobnlt6Hmo4DvvIzmnYPph43ku5Plgqjmlofku7ZcbiAqL1xuXG5pbXBvcnQgbG9jYWxEQiBmcm9tICdAc3JjL2ZyYW1ld29yay9sb2NhbERCJztcbmltcG9ydCBSZXBvc2l0b3JpZXNCYXNlIGZyb20gJy4vYmFzZSc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFJlcG9zaXRvcmllc01vZGUgZXh0ZW5kcyBSZXBvc2l0b3JpZXNCYXNlIHtcbiAgZ2V0SW5kZXhMaXN0KGJhdGNoSWQpIHtcbiAgICBsZXQgc3FsID0gYHNlbGVjdCBzaS4qLFxuICAgICAgKHNlbGVjdCBjb3VudCgqKSBmcm9tIGNoZWNrcXVhbGl0eV9wcm9ibGVtIGNwIHdoZXJlIGNwLmJpel9pZCA9IHNpLmlkICkgYXMgcHJvYmxlbU51bSxcbiAgICAgIChzZWxlY3Qgc3VtKGRlZHVjdGlvbikgZnJvbSBjaGVja3F1YWxpdHlfcHJvYmxlbSBjcDEgXG4gICAgICAgIHdoZXJlIGJhdGNoX3R5cGUgPSAn5LiT6aG55beh5qOAJyBhbmQgY3AxLmJpel9pZCA9IHNpLmlkIGFuZCBjcDEuc3RhdHVzICE9ICfojYnnqL8nIGFuZCBjcDEuc3RhdHVzICE9ICflt7LlhbPpl60nKSBhcyBkZWR1Y3Rpb24gXG4gICAgICBmcm9tIHNwZWNpYWxfaW5zcGVjdCBzaSBcbiAgICAgIHdoZXJlIHNpLmJhdGNoX2lkID0gJyR7YmF0Y2hJZH0nIG9yZGVyIGJ5IHNpLmNoZWNraXRlbV9jb2RlYDtcblxuICAgIHJldHVybiBsb2NhbERCLnF1ZXJ5KHNxbCk7XG4gIH1cbn1cbiIsIi8qXG4gKiBAQXV0aG9yOiBqaWFuZ2wwMlxuICogQERhdGU6IDIwMjAtMDgtMjggMTQ6MzU6MzRcbiAqIEBMYXN0RWRpdG9yczogamlhbmdsMDJcbiAqIEBMYXN0RWRpdFRpbWU6IDIwMjAtMDktMTQgMTU6NDk6MzNcbiAqIEBEZXNjcmlwdGlvbjog5LiT6aG55beh5qOA77yM5p2D6YeN5LuT5YKo5paH5Lu2XG4gKi9cblxuaW1wb3J0IGxvY2FsREIgZnJvbSAnQHNyYy9mcmFtZXdvcmsvbG9jYWxEQic7XG5pbXBvcnQgUmVwb3NpdG9yaWVzQmFzZSBmcm9tICcuL2Jhc2UnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBSZXBvc2l0b3JpZXNNb2RlIGV4dGVuZHMgUmVwb3NpdG9yaWVzQmFzZSB7XG4gIGdldEluZGV4TGlzdChiYXRjaElkKSB7XG4gICAgbGV0IHNxbCA9IGBzZWxlY3QgYi4qLCB0Lm5hbWUgYXMgdGVtcGxhdGVfbmFtZSwgdC5tb2RlIGFzIHRlbXBsYXRlX21vZGUsIGJjLndlaWdodFxuICAgICAgZnJvbSBiYXRjaCBiXG4gICAgICBsZWZ0IGpvaW4gc3BlY2lhbF9pbnNwZWN0X3RlbXBsYXRlIHQgb24gdC5pZCA9IGIudGVtcGxhdGVfaWRcbiAgICAgIGxlZnQgam9pbiBzcGVjaWFsX2luc3BlY3RfdGVtcGxhdGVfYmF0Y2hfY29tYm8gYmMgb24gYmMuYmF0Y2hfaWQgPSBiLmlkIGFuZCBiYy50ZW1wbGF0ZV9pZCA9IHQuaWRcbiAgICAgIHdoZXJlIGIucm9vdF9pZCA9ICcke2JhdGNoSWR9JyBhbmQgaWZudWxsKGIucGFyZW50X2lkLCAnJykgIT0gJydcbiAgICAgIG9yZGVyIGJ5IGJjLnNvcnRgO1xuICAgIHJldHVybiBsb2NhbERCLnF1ZXJ5KHNxbCk7XG4gIH1cbn1cbiIsImltcG9ydCBzdXBlclByb3BCYXNlIGZyb20gXCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9zdXBlclByb3BCYXNlXCI7XG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBfZ2V0KHRhcmdldCwgcHJvcGVydHksIHJlY2VpdmVyKSB7XG4gIGlmICh0eXBlb2YgUmVmbGVjdCAhPT0gXCJ1bmRlZmluZWRcIiAmJiBSZWZsZWN0LmdldCkge1xuICAgIF9nZXQgPSBSZWZsZWN0LmdldDtcbiAgfSBlbHNlIHtcbiAgICBfZ2V0ID0gZnVuY3Rpb24gX2dldCh0YXJnZXQsIHByb3BlcnR5LCByZWNlaXZlcikge1xuICAgICAgdmFyIGJhc2UgPSBzdXBlclByb3BCYXNlKHRhcmdldCwgcHJvcGVydHkpO1xuICAgICAgaWYgKCFiYXNlKSByZXR1cm47XG4gICAgICB2YXIgZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoYmFzZSwgcHJvcGVydHkpO1xuXG4gICAgICBpZiAoZGVzYy5nZXQpIHtcbiAgICAgICAgcmV0dXJuIGRlc2MuZ2V0LmNhbGwocmVjZWl2ZXIpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gZGVzYy52YWx1ZTtcbiAgICB9O1xuICB9XG5cbiAgcmV0dXJuIF9nZXQodGFyZ2V0LCBwcm9wZXJ0eSwgcmVjZWl2ZXIgfHwgdGFyZ2V0KTtcbn0iLCJpbXBvcnQgZ2V0UHJvdG90eXBlT2YgZnJvbSBcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2dldFByb3RvdHlwZU9mXCI7XG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBfc3VwZXJQcm9wQmFzZShvYmplY3QsIHByb3BlcnR5KSB7XG4gIHdoaWxlICghT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpKSB7XG4gICAgb2JqZWN0ID0gZ2V0UHJvdG90eXBlT2Yob2JqZWN0KTtcbiAgICBpZiAob2JqZWN0ID09PSBudWxsKSBicmVhaztcbiAgfVxuXG4gIHJldHVybiBvYmplY3Q7XG59IiwiLypcbiAqIEBBdXRob3I6IGppYW5nbDAyXG4gKiBARGF0ZTogMjAyMC0wOC0wMyAxMDozNjo1OVxuICogQExhc3RFZGl0b3JzOiBqaWFuZ2wwMlxuICogQExhc3RFZGl0VGltZTogMjAyMC0xMC0yMyAxNDoyMDo1NFxuICogQERlc2NyaXB0aW9uOiDkuJPpobnlt6Hmo4DvvIzmqKHlnZflhazlhbEgc2VydmljZVxuICovXG5cbmltcG9ydCB7IGdldFJlcG9zaXRvcmllcyB9IGZyb20gJy4uL3JlcG9zaXRvcmllcy8nO1xuaW1wb3J0IGNvbnRleHQgZnJvbSAnQHNyYy9mcmFtZXdvcmsvY29udGV4dCc7XG5pbXBvcnQgVXRpbHMgZnJvbSAnQHNyYy91dGlscy9pbmRleCc7XG5pbXBvcnQgRGF0YVN5bmNocm9uaXplciBmcm9tICdAc3JjL3NlcnZpY2UvY29tbW9uL2RhdGEtc3luY2hyb25pemVyJztcbmltcG9ydCB7XG4gIGhhc1ZhbCxcbiAgaXNOdW1iZXIsXG4gIGpzb25QYXJzZSxcbiAganNvblN0cmluZ2lmeSxcbiAgY3JlYXRlVHJlZUJ5QXJyYXksXG4gIGV2YWxTdHIsXG4gIGNvbXBpbGVTdHIsXG4gIGdldEVuZFRvdGFsQnlrZXksXG59IGZyb20gJ0BzcmMvY29tbW9uL2RhdGEtaGFuZGxlJztcbmltcG9ydCB7IHBlcmNlbnQgfSBmcm9tICdAc3JjL2ZpbHRlcnMvcGVyY2VudCc7XG5pbXBvcnQgKiBhcyBDT05TVCBmcm9tICcuLi9jb25zdC5qcyc7XG5pbXBvcnQgbW1rdiBmcm9tICdAc3JjL2ZyYW1ld29yay9tbWt2JztcbmltcG9ydCBtbWt2S2V5cyBmcm9tICdAc3JjL2ZyYW1ld29yay9tbWt2LmtleXMnO1xuLy8gaW1wb3J0IEJhdGNoQ2xhc3MgZnJvbSAnLi9iYXRjaCc7XG5pbXBvcnQgcm91dGVyIGZyb20gJ0Byb3V0ZXInO1xuaW1wb3J0IG5ldHdvcmsgZnJvbSAnQHNyYy9mcmFtZXdvcmsvbmV0d29yayc7XG5pbXBvcnQgbG9jYWxEQiBmcm9tICdAc3JjL2ZyYW1ld29yay9sb2NhbERCJztcbmltcG9ydCBXZWJTZXJ2aWNlIGZyb20gJ0BzcmMvc2VydmljZS9jb21tb24vd2ViLXNlcnZpY2UnO1xuaW1wb3J0IFBvcHVwIGZyb20gJ0BzcmMvdXRpbHMvcG9wdXAnO1xuaW1wb3J0IE9sZEZpdHRlciBmcm9tICcuL29sZC1maXR0ZXInO1xuXG4vLyBPbGRGaXR0ZXI6IOaXp+mhtemdoumAgumFjSAs6Lez5Yiw6ICB55qE6Zeu6aKY6aG177yM5pqC5pe25pa55qGI77yM5ZCO6Z2i5Lya5bqf6ZmkXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBTZXJ2aWNlQmFzZSBleHRlbmRzIE9sZEZpdHRlciB7XG4gIGNvbnN0cnVjdG9yKG1vZGUpIHtcbiAgICBzdXBlcigpO1xuICAgIHRoaXMubW9kZSA9IG1vZGU7XG4gICAgdGhpcy5SZXBvc2l0b3JpZXMgPSBnZXRSZXBvc2l0b3JpZXMobW9kZSk7XG4gIH1cbiAgZXZhbChjb2RlLCBkYXRhKSB7XG4gICAgcmV0dXJuIGV2YWxTdHIoY29kZSwgeyAuLi5kYXRhLCBwZXJjZW50LCBpc051bWJlciwgaGFzVmFsIH0pO1xuICB9XG4gIC8qKlxuICAgKiBAZGVzY3JpcHRpb246IOino+aekOWtl+espuS4slxuICAgKiBAcGFyYW0ge3R5cGV9XG4gICAqIEByZXR1cm46XG4gICAqL1xuICBjb21waWxlU3RyKHN0ciwgZGF0YSkge1xuICAgIHJldHVybiBjb21waWxlU3RyKHN0ciwgeyAuLi5kYXRhLCBwZXJjZW50LCBpc051bWJlciwgaGFzVmFsIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIEBkZXNjcmlwdGlvbjog5omn6KGM5a+55q+U77yMXG4gICAqIEBwYXJhbSB7U3RyaW5nICwgT2JqZWN0fSB0YXJnZXQg5omn6KGM55qE5a+56LGh77yMU3RyaW5n5pe25omn6KGMIGV2YWzvvIxPYmplY3Tml7bmiafooYwgXy5pc01hdGNoXG4gICAqIEByZXR1cm4ge0Jvb2xlYW59XG4gICAqL1xuICBpc01hdGNoKHRhcmdldCwgZGF0YSkge1xuICAgIHJldHVybiB0eXBlb2YgdGFyZ2V0ID09PSAnb2JqZWN0JyA/IF8uaXNNYXRjaChkYXRhLCB0YXJnZXQpIDogdGhpcy5ldmFsKHRhcmdldCwgZGF0YSk7XG4gIH1cblxuICAvKipcbiAgICogQGRlc2NyaXB0aW9uOiDmta7ngrnov5DnrpfnmoTnu5PmnpzlpITnkIZcbiAgICogQHBhcmFtIHt0eXBlfVxuICAgKiBAcmV0dXJuOlxuICAgKi9cbiAgZm9ybWF0RmxvYXQobnVtKSB7XG4gICAgaWYgKGlzTmFOKG51bSkpIHtcbiAgICAgIHJldHVybiBudW07XG4gICAgfVxuICAgIHJldHVybiBNYXRoLnJvdW5kKG51bSAqIDEwMDAwMCkgLyAxMDAwMDA7XG4gIH1cblxuICAvKipcbiAgICogQGRlc2NyaXB0aW9uOiDojrflj5bmqKHmnb/liJfooahcbiAgICogQHJldHVybjpcbiAgICovXG4gIGdldFRlbXBsYXRlTGlzdCgpIHtcbiAgICByZXR1cm4gdGhpcy5SZXBvc2l0b3JpZXMuZ2V0VGVtcGxhdGVMaXN0KCk7XG4gIH1cblxuICAvKipcbiAgICogQGRlc2NyaXB0aW9uOiDojrflj5blkIjlkIzliJfooahcbiAgICogQHBhcmFtIHtTdHJpbmd9IHByb2pJZFxuICAgKiBAcmV0dXJuOlxuICAgKi9cbiAgZ2V0Q29udHJhY3RMaXN0KHByb2pJZCkge1xuICAgIHJldHVybiB0aGlzLlJlcG9zaXRvcmllcy5nZXRDb250cmFjdExpc3QocHJvaklkKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAZGVzY3JpcHRpb246IOS7jiBtbWt2IOiOt+WPluiNieeov+aVsOaNrlxuICAgKiBAcGFyYW0ge1N0cmluZ30gdGFibGVOYW1lIOihqOWQjVxuICAgKiBAcmV0dXJuIHtBcnJheX1cbiAgICovXG4gIGFzeW5jIGdldERyYWZ0RnJvbU1ta3YoKSB7XG4gICAgbGV0IGRyYWZ0RGF0YSA9IGF3YWl0IG1ta3YuZ2V0VXNlck9iamVjdChtbWt2S2V5cy5TUEVDSUFMX0lOU1BFQ1RfRFJBRlQpO1xuICAgIHJldHVybiBkcmFmdERhdGEgfHwge307XG4gIH1cblxuICAvKipcbiAgICogQGRlc2NyaXB0aW9uOiDmiorojYnnqL/lrZjliLAgbW1rdu+8jOWboOS4uuiNieeov+WPr+iDveS8muiiq+acjeWKoeerr+S4i+WPkeeahOaVsOaNruimhuebllxuICAgKiBAcGFyYW0ge09iamVjdH0gZGF0YSDmlbDmja5cbiAgICogQHBhcmFtIHtTdHJpbmd9IHRhYmxlTmFtZSDooajlkI1cbiAgICogQHJldHVybjogUHJvbWlzZVxuICAgKi9cbiAgYXN5bmMgc2F2ZURyYWZ0VG9NbWt2KGRhdGEsIHRhYmxlTmFtZSkge1xuICAgIGlmICghZGF0YSB8fCAhdGFibGVOYW1lKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGxldCBkcmFmdERhdGEgPSBhd2FpdCBtbWt2LmdldFVzZXJPYmplY3QobW1rdktleXMuU1BFQ0lBTF9JTlNQRUNUX0RSQUZUKTtcbiAgICAhZHJhZnREYXRhICYmIChkcmFmdERhdGEgPSB7fSk7XG4gICAgIWRyYWZ0RGF0YVt0YWJsZU5hbWVdICYmIChkcmFmdERhdGFbdGFibGVOYW1lXSA9IFtdKTtcblxuICAgIGxldCBpbmRleCA9IGRyYWZ0RGF0YVt0YWJsZU5hbWVdLmZpbmRJbmRleChpdGVtID0+IGl0ZW0uaWQgPT09IGRhdGEuaWQpO1xuICAgIGlmIChpbmRleCA8IDApIHtcbiAgICAgIC8vIOaWsOWinlxuICAgICAgZHJhZnREYXRhW3RhYmxlTmFtZV0ucHVzaChkYXRhKTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8g5pu05pawXG4gICAgICBkcmFmdERhdGFbdGFibGVOYW1lXS5zcGxpY2UoaW5kZXgsIDEsIGRhdGEpO1xuICAgIH1cbiAgICBhd2FpdCBtbWt2LnNhdmVVc2VyT2JqZWN0KG1ta3ZLZXlzLlNQRUNJQUxfSU5TUEVDVF9EUkFGVCwgZHJhZnREYXRhKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAZGVzY3JpcHRpb246IOS7jiBtbWt2IOenu+mZpOiNieeov1xuICAgKiBAcGFyYW0ge09iamVjdH0gZGF0YSDmlbDmja5cbiAgICogQHBhcmFtIHtTdHJpbmd9IHRhYmxlTmFtZSDooajlkI1cbiAgICogQHJldHVybjpcbiAgICovXG4gIGFzeW5jIHJlbW92ZURyYWZ0RnJvbU1ta3YoZGF0YSwgdGFibGVOYW1lKSB7XG4gICAgaWYgKCFkYXRhIHx8ICF0YWJsZU5hbWUpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgbGV0IGRyYWZ0RGF0YSA9IChhd2FpdCBtbWt2LmdldFVzZXJPYmplY3QobW1rdktleXMuU1BFQ0lBTF9JTlNQRUNUX0RSQUZUKSkgfHwge307XG4gICAgIWRyYWZ0RGF0YVt0YWJsZU5hbWVdICYmIChkcmFmdERhdGFbdGFibGVOYW1lXSA9IFtdKTtcblxuICAgIGxldCBpbmRleCA9IGRyYWZ0RGF0YVt0YWJsZU5hbWVdLmZpbmRJbmRleChpdGVtID0+IGl0ZW0uaWQgPT09IGRhdGEuaWQpO1xuXG4gICAgaWYgKGluZGV4ID49IDApIHtcbiAgICAgIGRyYWZ0RGF0YVt0YWJsZU5hbWVdLnNwbGljZShpbmRleCwgMSk7XG4gICAgICBhd2FpdCBtbWt2LnNhdmVVc2VyT2JqZWN0KG1ta3ZLZXlzLlNQRUNJQUxfSU5TUEVDVF9EUkFGVCwgZHJhZnREYXRhKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQGRlc2NyaXB0aW9uOiDku44gTW1rdiDmgaLlpI3ojYnnqL9cbiAgICogQHJldHVybjpcbiAgICovXG4gIGFzeW5jIHJlY292ZXJEcmFmdEZyb21NbWt2KCkge1xuICAgIGxldCBkcmFmdERhdGEgPSAoYXdhaXQgbW1rdi5nZXRVc2VyT2JqZWN0KG1ta3ZLZXlzLlNQRUNJQUxfSU5TUEVDVF9EUkFGVCkpIHx8IHt9O1xuICAgIGxldCB7XG4gICAgICBzcGVjaWFsX2luc3BlY3Q6IHNwZWNpYWxJbnNwZWN0RHJhZnQgPSBbXSwgLy8gc3BlY2lhbF9pbnNwZWN0IOihqOeahOiNieeov1xuICAgICAgc3BlY2lhbF9pbnNwZWN0X3BsYWNlX2NoZWNraXRlbTogc3BlY2lhbEluc3BlY3RQbGFjZUNoZWNraXRlbURyYWZ0ID0gW10sIC8vIHNwZWNpYWxfaW5zcGVjdF9wbGFjZV9jaGVja2l0ZW0g6KGo55qE6I2J56i/XG4gICAgfSA9IGRyYWZ0RGF0YSB8fCB7fTtcblxuICAgICRsb2cubG9nKCflvIDlp4vmgaLlpI3kuJPpobnlt6Hmo4DojYnnqL8nLCBkcmFmdERhdGEpO1xuXG4gICAgZm9yIChsZXQgaXRlbSBvZiBzcGVjaWFsSW5zcGVjdERyYWZ0KSB7XG4gICAgICBpZiAoaXRlbSAmJiBpdGVtLmlkKSB7XG4gICAgICAgIGxldCBkYXRhID0gYXdhaXQgdGhpcy5SZXBvc2l0b3JpZXMuc2VsZWN0U3BlY2lhbEluc3BlY3QoaXRlbS5pZCk7XG4gICAgICAgIGlmIChkYXRhICYmIGRhdGEuc3RhdHVzID09PSBDT05TVC5TVEFUVVNfREVGQVVMVCkge1xuICAgICAgICAgIGF3YWl0IHRoaXMuUmVwb3NpdG9yaWVzLnVwZGF0ZVNwZWNpYWxJbnNwZWN0RGF0YShpdGVtKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGZvciAobGV0IGl0ZW0gb2Ygc3BlY2lhbEluc3BlY3RQbGFjZUNoZWNraXRlbURyYWZ0KSB7XG4gICAgICBpZiAoaXRlbSAmJiBpdGVtLmlkKSB7XG4gICAgICAgIGxldCBkYXRhID0gYXdhaXQgdGhpcy5SZXBvc2l0b3JpZXMuc2VsZWN0U3BlY2lhbEluc3BlY3RQbGFjZUNoZWNraXRlbShpdGVtLmlkKTtcbiAgICAgICAgaWYgKGRhdGEgJiYgZGF0YS5zdGF0dXMgPT09IENPTlNULlNUQVRVU19ERUZBVUxUKSB7XG4gICAgICAgICAgYXdhaXQgdGhpcy5SZXBvc2l0b3JpZXMudXBkYXRlUGxhY2VTcGVjaWFsSW5zcGVjdERhdGEoaXRlbSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBtbWt2LnNhdmVVc2VyT2JqZWN0KG1ta3ZLZXlzLlNQRUNJQUxfSU5TUEVDVF9EUkFGVCwge30pO1xuICB9XG5cbiAgLy8g6I635Y+W57yT5a2Y55qE54q25oCBXG4gIGFzeW5jIGdldFN0YXR1cyhzcGVjaWFsSW5zcGVjdElkKSB7XG4gICAgbGV0IHN0YXR1c1NldCA9IGF3YWl0IG1ta3YuZ2V0VXNlck9iamVjdChtbWt2S2V5cy5TUEVDSUFMX0lOU1BFQ1RfREVUQUlMX0RSQUZUX1NUQVRVUyk7XG4gICAgcmV0dXJuIHN0YXR1c1NldCAmJiBzdGF0dXNTZXRbc3BlY2lhbEluc3BlY3RJZF07XG4gIH1cbiAgLy8g5L+d5a2Y57yT5a2Y55qE54q25oCBXG4gIGFzeW5jIHNhdmVTdGF0dXMoc3BlY2lhbEluc3BlY3RJZCwgc3RhdHVzKSB7XG4gICAgbGV0IHN0YXR1c1NldCA9IChhd2FpdCBtbWt2LmdldFVzZXJPYmplY3QobW1rdktleXMuU1BFQ0lBTF9JTlNQRUNUX0RFVEFJTF9EUkFGVF9TVEFUVVMpKSB8fCB7fTtcbiAgICBzdGF0dXNTZXRbc3BlY2lhbEluc3BlY3RJZF0gPSBzdGF0dXM7XG4gICAgYXdhaXQgbW1rdi5zYXZlVXNlck9iamVjdChtbWt2S2V5cy5TUEVDSUFMX0lOU1BFQ1RfREVUQUlMX0RSQUZUX1NUQVRVUywgc3RhdHVzU2V0KTtcbiAgfVxuICAvLyDliKDpmaTnvJPlrZjnmoTnirbmgIFcbiAgYXN5bmMgcmVtb3ZlU3RhdHVzKHNwZWNpYWxJbnNwZWN0SWQpIHtcbiAgICBsZXQgc3RhdHVzU2V0ID0gKGF3YWl0IG1ta3YuZ2V0VXNlck9iamVjdChtbWt2S2V5cy5TUEVDSUFMX0lOU1BFQ1RfREVUQUlMX0RSQUZUX1NUQVRVUykpIHx8IHt9O1xuICAgIGRlbGV0ZSBzdGF0dXNTZXRbc3BlY2lhbEluc3BlY3RJZF07XG4gICAgYXdhaXQgbW1rdi5zYXZlVXNlck9iamVjdChtbWt2S2V5cy5TUEVDSUFMX0lOU1BFQ1RfREVUQUlMX0RSQUZUX1NUQVRVUywgc3RhdHVzU2V0KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAZGVzY3JpcHRpb246IOiOt+WPluaJueasoeeahOaJgOacieaPj+i/sFxuICAgKiBAcGFyYW0ge1N0cmluZ30gYmF0Y2hJZFxuICAgKiBAcmV0dXJuIHtQcm9taXNlIHwgQXJyYXl9XG4gICAqL1xuICBnZXRTcGVjaWFsSW5zcGVjdERlc2NzKGJhdGNoSWQpIHtcbiAgICByZXR1cm4gdGhpcy5SZXBvc2l0b3JpZXMuZ2V0U3BlY2lhbEluc3BlY3REZXNjcyhiYXRjaElkKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAZGVzY3JpcHRpb246IOiOt+WPluaooeWdl+mmlumhteWIl+ihqFxuICAgKiBAcGFyYW0ge1N0cmluZ30gYmF0Y2hJZFxuICAgKiBAcmV0dXJuIHtQcm9taXNlIHwgT2JqZWN0fVxuICAgKi9cbiAgYXN5bmMgZ2V0SW5kZXhMaXN0KGJhdGNoSWQpIHtcbiAgICBsZXQgbGlzdCA9IGF3YWl0IHRoaXMuUmVwb3NpdG9yaWVzLmdldEluZGV4TGlzdChiYXRjaElkKTtcblxuICAgIGxldCB0cmVlID0gY3JlYXRlVHJlZUJ5QXJyYXkobGlzdCwge1xuICAgICAga2V5OiAnY2hlY2tpdGVtX2lkJyxcbiAgICAgIHJlbGF0aW9uS2V5OiAnY2hlY2tpdGVtX3BhcmVudF9pZCcsXG4gICAgICBzZXRMZXZlbDogdHJ1ZSxcbiAgICB9KTtcblxuICAgIHJldHVybiB7IHRyZWUsIGxpc3QgfTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAZGVzY3JpcHRpb246IOiOt+WPlue7n+iuoeeul+azlVxuICAgKiBAcGFyYW0ge09iamVjdH0gY29uZmlnIOaooeadv+mFjee9rlxuICAgKiBAcGFyYW0ge09iamVjdH0gYmF0Y2hEYXRhIOaJueasoVxuICAgKi9cbiAgZ2V0VG90YWxNb2RlKGNvbmZpZywgYmF0Y2hEYXRhKSB7XG4gICAgbGV0IHRvdGFsTW9kZUNmZyA9IGNvbmZpZyAmJiBjb25maWcudG90YWxNb2RlO1xuICAgIGxldCBkZWZhdWx0TW9kZSA9IGNvbmZpZyAmJiBjb25maWcuZGVmYXVsdFRvdGFsTW9kZTtcblxuICAgIGxldCB0b3RhbE1vZGUgPSB0b3RhbE1vZGVDZmcgJiYgdGhpcy5ldmFsKHRvdGFsTW9kZUNmZywgeyBiYXRjaDogYmF0Y2hEYXRhIH0pO1xuICAgIGlmICghaGFzVmFsKHRvdGFsTW9kZSkgJiYgaGFzVmFsKGRlZmF1bHRNb2RlKSkge1xuICAgICAgdG90YWxNb2RlID0gY29uZmlnLmRlZmF1bHRUb3RhbE1vZGU7XG4gICAgfVxuICAgIHJldHVybiB0b3RhbE1vZGU7XG4gIH1cblxuICAvKipcbiAgICogQGRlc2NyaXB0aW9uOiDojrflj5bmoJHlsZ7mgKfphY3nva5cbiAgICogQHBhcmFtIHtTdHJpbmd9IGtleSDpnIDopoHojrflj5bphY3nva7nmoTlkI3np7DvvIxhdHRyLCBub3RlcywgaW5mb3MsIGJ0bnNcbiAgICogQHBhcmFtIHtPYmplY3R9IGNvbmZpZyDmqKHmnb/phY3nva5cbiAgICogQHBhcmFtIHtPYmplY3R9IGJhdGNoRGF0YSDmibnmrKFcbiAgICogQHJldHVybiB7QXJyYXl9XG4gICAqL1xuICBnZXRUcmVlT3B0aW9ucyhrZXksIGNvbmZpZywgYmF0Y2hEYXRhKSB7XG4gICAgbGV0IG9wdGlvbnMgPSAoY29uZmlnICYmIGNvbmZpZy50cmVlICYmIGNvbmZpZy50cmVlW2tleV0pIHx8IFtdO1xuICAgIGxldCB0b3RhbE1vZGUgPSB0aGlzLmdldFRvdGFsTW9kZShjb25maWcsIGJhdGNoRGF0YSk7XG4gICAgbGV0IHJlcztcbiAgICBpZiAoaGFzVmFsKHRvdGFsTW9kZSkpIHtcbiAgICAgIC8vIHRvdGFsTW9kZe+8jOaooeadv+eahOWQiOagvOeOh+eul+azlVxuICAgICAgcmVzID0gb3B0aW9ucy5maWx0ZXIodiA9PiAhaGFzVmFsKHYudG90YWxNb2RlKSB8fCB2LnRvdGFsTW9kZSA9PT0gdG90YWxNb2RlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmVzID0gb3B0aW9ucztcbiAgICB9XG5cbiAgICByZXR1cm4gXy5jbG9uZURlZXAocmVzKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAZGVzY3JpcHRpb246IOiOt+WPluagkeeahOagt+W8j1xuICAgKiBAcGFyYW0ge1N0cmluZ30gbmFtZSDmoLflvI/lkI3np7DvvIzlnKggLi4vY29uc3QuanMgVFJFRV9TVFlMRV9NQVAg6YWN572uXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBiYXRjaCDmibnmrKHmlbDmja5cbiAgICogQHJldHVybiB7T2JqZWN0fVxuICAgKi9cbiAgZ2V0VHJlZVVpKG5hbWUgPSAnZGVmYXVsdCcsIGJhdGNoKSB7XG4gICAgbGV0IHN0eWxlTmFtZSA9IHRoaXMuY29tcGlsZVN0cihuYW1lLCB7IGJhdGNoIH0pO1xuICAgIGxldCBzdHlsZSA9IENPTlNULlRSRUVfU1RZTEVfTUFQW3N0eWxlTmFtZV07XG5cbiAgICBpZiAoc3R5bGUpIHtcbiAgICAgIHJldHVybiBfLm1lcmdlKHt9LCBDT05TVC5UUkVFX1NUWUxFX0RFRkFVTFQsIHN0eWxlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIENPTlNULlRSRUVfU1RZTEVfREVGQVVMVDtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQGRlc2NyaXB0aW9uOiDmoJHoioLngrnlsZ7mgKflpITnkIbvvIzmlrDlop4v5L+u5pS5XG4gICAqIEBwYXJhbSB7QXJyYXl9IHRyZWUg5qCR55qE5pWw5o2uXG4gICAqIEBwYXJhbSB7QXJyYXl9IG9wdGlvbnMg6YWN572uXG4gICAqL1xuICB0cmVlQXR0cnNIYW5kbGUodHJlZSwgb3B0aW9ucyA9IFtdKSB7XG4gICAgaWYgKCF0cmVlIHx8ICF0cmVlLmxlbmd0aCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IGhhbmRsZXIgPSAoZGF0YSA9IFtdKSA9PiB7XG4gICAgICBkYXRhLmZvckVhY2goaXRlbSA9PiB7XG4gICAgICAgIGlmIChpdGVtLmNoaWxkcmVuICYmIGl0ZW0uY2hpbGRyZW4ubGVuZ3RoKSB7XG4gICAgICAgICAgaGFuZGxlcihpdGVtLmNoaWxkcmVuKTtcbiAgICAgICAgfVxuXG4gICAgICAgIG9wdGlvbnMuZm9yRWFjaChvcHRpb24gPT4ge1xuICAgICAgICAgIC8vIG1hdGNoIOWMuemFjemcgOimgeWkhOeQhueahOiKgueCuVxuICAgICAgICAgIGlmIChvcHRpb24ubWF0Y2ggJiYgIXRoaXMuaXNNYXRjaChvcHRpb24ubWF0Y2gsIGl0ZW0pKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgbGV0IHtcbiAgICAgICAgICAgIGtleSxcbiAgICAgICAgICAgIHR5cGUgPSAnbnVtYmVyJyxcbiAgICAgICAgICAgIG1ldGhvZCA9ICdzb21lJyxcbiAgICAgICAgICAgIHJlc3VsdCxcbiAgICAgICAgICAgIHBhdHRlcm4gPSAnY29tcHV0ZWQnLFxuICAgICAgICAgICAgZmlsdGVyLFxuICAgICAgICAgIH0gPSBvcHRpb247XG5cbiAgICAgICAgICBpZiAocGF0dGVybiA9PT0gJ2NvbXB1dGVkJykge1xuICAgICAgICAgICAgLy8g6K6h566X5bGe5oCn77yM5L2/55So6IqC54K56Ieq6Lqr55qE5pWw5o2uXG4gICAgICAgICAgICBpZiAodHlwZSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgaXRlbVtrZXldID0gdGhpcy5jb21waWxlU3RyKHJlc3VsdCwgaXRlbSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBpdGVtW2tleV0gPSB0aGlzLmV2YWwocmVzdWx0LCBpdGVtKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGVsc2UgaWYgKHBhdHRlcm4gPT09ICd0cmFuc21pdCcpIHtcbiAgICAgICAgICAgIGlmICghaXRlbS5jaGlsZHJlbiB8fCAhaXRlbS5jaGlsZHJlbi5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgLy8g5rKh5pyJ5a2Q57qnXG4gICAgICAgICAgICAgICRsb2cuZXJyb3Ioa2V5LCBwYXR0ZXJuLCAn5rKh5pyJ5a2Q57qn77yM5peg5rOV5rGH5oC7Jyk7XG4gICAgICAgICAgICAgIGl0ZW1ba2V5XSA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBmaWx0ZXIg6L+H5ruk5a2Q57qnXG4gICAgICAgICAgICBsZXQgdmFsaWRDaGlsZHJlbiA9IGZpbHRlclxuICAgICAgICAgICAgICA/IGl0ZW0uY2hpbGRyZW4uZmlsdGVyKGNoaWxkID0+IHRoaXMuaXNNYXRjaChmaWx0ZXIsIGNoaWxkKSlcbiAgICAgICAgICAgICAgOiBpdGVtLmNoaWxkcmVuO1xuXG4gICAgICAgICAgICBpZiAoIXZhbGlkQ2hpbGRyZW4ubGVuZ3RoKSB7XG4gICAgICAgICAgICAgIGl0ZW1ba2V5XSA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyDntK/orqHlsZ7mgKfvvIznlKjlrZDnuqfnmoTmlbDmja5cbiAgICAgICAgICAgIGlmICh0eXBlID09PSAnbnVtYmVyJykge1xuICAgICAgICAgICAgICAvLyDmlbDlrZfntK/liqBcbiAgICAgICAgICAgICAgaXRlbVtrZXldID0gdmFsaWRDaGlsZHJlbi5yZWR1Y2UoKHJlcywgY2hpbGQpID0+IHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzICsgdGhpcy5ldmFsKHJlc3VsdCwgY2hpbGQpO1xuICAgICAgICAgICAgICB9LCAwKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodHlwZSA9PT0gJ2Jvb2xlYW4nKSB7XG4gICAgICAgICAgICAgIC8vIOW4g+WwlOWAvO+8jOaMiemFjee9rueahCBtZXRob2Qg5YGa5Yik5patXG4gICAgICAgICAgICAgIGxldCBzZXQgPSB2YWxpZENoaWxkcmVuLm1hcChjaGlsZCA9PiB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZXZhbChyZXN1bHQsIGNoaWxkKTtcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgIGlmIChtZXRob2QgPT09ICdzb21lJykge1xuICAgICAgICAgICAgICAgIGl0ZW1ba2V5XSA9IHNldC5zb21lKHYgPT4gdik7XG4gICAgICAgICAgICAgIH0gZWxzZSBpZiAobWV0aG9kID09PSAnYWxsJykge1xuICAgICAgICAgICAgICAgIGl0ZW1ba2V5XSA9ICFzZXQuc29tZSh2ID0+ICF2KTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIGlmICh0eXBlID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAvLyDlrZfnrKbkuLLntK/liqBcbiAgICAgICAgICAgICAgaXRlbVtrZXldID0gdmFsaWRDaGlsZHJlbi5yZWR1Y2UoKHJlcywgY2hpbGQpID0+IHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzICsgdGhpcy5jb21waWxlU3RyKHJlc3VsdCwgY2hpbGQpO1xuICAgICAgICAgICAgICB9LCAnJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH07XG5cbiAgICBoYW5kbGVyKHRyZWUpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBkZXNjcmlwdGlvbjog5qC55o2u6YWN572u77yM6I635Y+W5qCR6IqC54K555qE5L+h5oGvXG4gICAqIEBwYXJhbSB7QXJyYXl9IGxpc3RcbiAgICogQHBhcmFtIHtBcnJheX0gb3Rpb25zXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBleHRlbmREYXRhXG4gICAqIEByZXR1cm4ge09iamVjdH1cbiAgICovXG4gIGdldFRyZWVNYXAobGlzdCA9IFtdLCBvcHRpb25zLCBleHRlbmREYXRhKSB7XG4gICAgbGV0IHJlc3VsdCA9IHt9O1xuICAgIGxpc3QuZm9yRWFjaChpdGVtID0+IHtcbiAgICAgIGxldCBkYXRhID0geyAuLi5pdGVtLCAuLi5leHRlbmREYXRhIH07XG4gICAgICBsZXQgdmFsaWRPcHRpb25zID0gb3B0aW9ucy5maWx0ZXIob3B0aW9uID0+IHtcbiAgICAgICAgaWYgKCFvcHRpb24uc2hvdykge1xuICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLmlzTWF0Y2gob3B0aW9uLnNob3csIGRhdGEpO1xuICAgICAgfSk7XG4gICAgICAvLyDlpITnkIblrZfnrKbkuLLmqKHmnb9cbiAgICAgIGxldCBtYXBzID0gdmFsaWRPcHRpb25zLm1hcChvcHRpb24gPT4ge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIC4uLm9wdGlvbixcbiAgICAgICAgICB0ZXh0OiB0aGlzLmNvbXBpbGVTdHIob3B0aW9uLnRleHQsIGRhdGEpLFxuICAgICAgICAgIGNvbG9yOiB0aGlzLmNvbXBpbGVTdHIob3B0aW9uLmNvbG9yLCBkYXRhKSxcbiAgICAgICAgfTtcbiAgICAgIH0pO1xuXG4gICAgICBpdGVtLmlkICYmIChyZXN1bHRbaXRlbS5pZF0gPSBtYXBzKTtcbiAgICB9KTtcbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG5cbiAgLyoqXG4gICAqIEBkZXNjcmlwdGlvbjog6I635Y+W57uf6K6h5pWw5o2uXG4gICAqIEBwYXJhbSB7QXJyYXl9IGxpc3Qg5YiX6KGo5pWw5o2uXG4gICAqIEBwYXJhbSB7T2JqZWN0fSB0b3RhbE9wdGlvbnMg6K6h566X57uf6K6h5pWw5o2u55qE6YWN572uXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBiYXRjaCDlvZPliY3mibnmrKHmlbDmja5cbiAgICogQHJldHVybiB7T2JqZWN0fSB7dGl0bGU6IOagh+mimCwgbm90ZTog5o+Q56S65L+h5oGvLCByZXN1bHQ6IOe7k+aenCwgaGFzUmVzdWx0OiDmmK/lkKbmnInnu5PmnpwsIGZvcm11bGE6IOiuoeeul+WFrOW8j31cbiAgICovXG4gIGdldFRvdGFsRGF0YShsaXN0LCB0b3RhbE9wdGlvbnMsIGJhdGNoKSB7XG4gICAgbGV0IHRvdGFsID0ge307XG4gICAgaWYgKCF0b3RhbE9wdGlvbnMpIHtcbiAgICAgIHJldHVybiB0b3RhbDtcbiAgICB9XG5cbiAgICAvLyDorqHnrpdcbiAgICAoKHRvdGFsT3B0aW9ucyAmJiB0b3RhbE9wdGlvbnMuY2FsYykgfHwgW10pLmZvckVhY2gob3B0aW9uID0+IHtcbiAgICAgICFoYXNWYWwodG90YWxbb3B0aW9uLmtleV0pICYmICh0b3RhbFtvcHRpb24ua2V5XSA9IHsgdmFsdWU6IDAsIHRleHQ6ICcnIH0pO1xuXG4gICAgICBsZXQgZGF0YSA9IGxpc3QuZmlsdGVyKGl0ZW0gPT4ge1xuICAgICAgICByZXR1cm4gIW9wdGlvbi5tYXRjaCB8fCB0aGlzLmlzTWF0Y2gob3B0aW9uLm1hdGNoLCBpdGVtKTtcbiAgICAgIH0pO1xuICAgICAgbGV0IHRleHRTZXQgPSBbXTtcbiAgICAgIGRhdGEuZm9yRWFjaChpdGVtID0+IHtcbiAgICAgICAgdG90YWxbb3B0aW9uLmtleV0udmFsdWUgKz0gdGhpcy5ldmFsKG9wdGlvbi52YWx1ZSwgaXRlbSk7XG4gICAgICAgIG9wdGlvbi50ZXh0ICYmIHRleHRTZXQucHVzaCh0aGlzLmNvbXBpbGVTdHIob3B0aW9uLnRleHQsIGl0ZW0pKTtcbiAgICAgIH0pO1xuICAgICAgaWYgKHRleHRTZXQubGVuZ3RoKSB7XG4gICAgICAgIHRvdGFsW29wdGlvbi5rZXldLnRleHQgPSB0ZXh0U2V0LmpvaW4oJysnKTtcbiAgICAgIH1cblxuICAgICAgaWYgKHR5cGVvZiB0b3RhbFtvcHRpb24ua2V5XS52YWx1ZSA9PT0gJ251bWJlcicpIHtcbiAgICAgICAgdG90YWxbb3B0aW9uLmtleV0udmFsdWUgPSB0aGlzLmZvcm1hdEZsb2F0KHRvdGFsW29wdGlvbi5rZXldLnZhbHVlKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIC8vIOWxnuaAp++8iOWPmOmHj++8iVxuICAgIC8vICgodG90YWxPcHRpb25zICYmIHRvdGFsT3B0aW9ucy5kYXRhKSB8fCBbXSkuZm9yRWFjaChkYXRhID0+IHtcbiAgICAvLyAgIGxldCB7IGtleSwgcmVzdWx0IH0gPSBkYXRhO1xuICAgIC8vICAgdG90YWxba2V5XSA9IHRoaXMuZXZhbChyZXN1bHQsIHsgLi4udG90YWwsIGJhdGNoIH0pO1xuICAgIC8vIH0pO1xuXG4gICAgbGV0IGhhc1Jlc3VsdCA9IHRoaXMuZXZhbCh0b3RhbE9wdGlvbnMuaGFzUmVzdWx0LCB7IC4uLnRvdGFsLCBiYXRjaCB9KTtcblxuICAgIHRvdGFsLmhhc1Jlc3VsdCA9IGhhc1Jlc3VsdDtcblxuICAgIC8vIOaJueasoeW+l+WIhlxuICAgIGlmIChoYXNSZXN1bHQpIHtcbiAgICAgIHRvdGFsLnJlc3VsdCA9IHRoaXMuZXZhbCh0b3RhbE9wdGlvbnMucmVzdWx0LCB7IC4uLnRvdGFsLCBiYXRjaCB9KTtcbiAgICAgIC8vIOaAu+W+l+WIhueahOaVsOaNruexu+Wei++8jOm7mOiupOaYr+aVsOWtl1xuICAgICAgaWYgKHRvdGFsT3B0aW9ucy5yZXN1bHRUeXBlID09PSAncGVyY2VudCcpIHtcbiAgICAgICAgLy8g55m+5YiG5q+U77yM5Zu65a6a5Lik5L2N5bCP5pWwXG4gICAgICAgIHRvdGFsLnJlc3VsdCA9IHBlcmNlbnQodG90YWwucmVzdWx0LCAyKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIOaVsOWtl++8jOWbuuWumuS/neeVmeS4pOS9jeWwj+aVsFxuICAgICAgICBpZiAodG90YWxPcHRpb25zLm51bWJlckZpeGVkICE9PSBmYWxzZSkge1xuICAgICAgICAgIHRvdGFsLnJlc3VsdCA9IHRvdGFsLnJlc3VsdC50b0ZpeGVkKDIpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHRvdGFsLnJlc3VsdCA9ICcnO1xuICAgIH1cblxuICAgIC8vIOiuoeeul+WFrOW8j1xuICAgIHRvdGFsLmZvcm11bGEgPSB0b3RhbE9wdGlvbnMuZm9ybXVsYTtcbiAgICB0b3RhbC5mb3JtdWxhQ2FsYyA9IGhhc1Jlc3VsdFxuICAgICAgPyB0aGlzLmNvbXBpbGVTdHIodG90YWxPcHRpb25zLmZvcm11bGFDYWxjLCB7IC4uLnRvdGFsLCBiYXRjaCB9KVxuICAgICAgOiAnJztcbiAgICB0b3RhbC5mb3JtdWxhVGV4dCA9IHRoaXMuY29tcGlsZVN0cih0b3RhbE9wdGlvbnMuZm9ybXVsYVRleHQsIHsgLi4udG90YWwsIGJhdGNoIH0pO1xuXG4gICAgdG90YWwudGl0bGUgPSB0aGlzLmNvbXBpbGVTdHIodG90YWxPcHRpb25zLnRpdGxlLCB7IC4uLnRvdGFsLCBiYXRjaCB9KSB8fCAnJztcbiAgICB0b3RhbC5ub3RlID0gdGhpcy5jb21waWxlU3RyKHRvdGFsT3B0aW9ucy5ub3RlLCB7IC4uLnRvdGFsLCBiYXRjaCB9KTtcblxuICAgIC8vIGNvbnNvbGUubG9nKCd0b3RhbCA9PT09PT09ICcsIHRvdGFsKTtcbiAgICByZXR1cm4gdG90YWw7XG4gIH1cblxuICAvKipcbiAgICogQGRlc2NyaXB0aW9uOiDojrflj5bkuJPpobnlt6Hmo4Dmo4Dmn6XpobnmlbDmja5cbiAgICogQHBhcmFtIHtTdHJpbmd9IHNwZWNpYWxJbnNwZWN0SWQgc3BlY2lhbF9pbnNwZWN0IOihqGlkXG4gICAqIEByZXR1cm46IFByb21pc2VcbiAgICovXG4gIGFzeW5jIGdldFNwZWNpYWxJbnNwZWN0RGF0YShzcGVjaWFsSW5zcGVjdElkKSB7XG4gICAgbGV0IHJlcyA9IGF3YWl0IHRoaXMuUmVwb3NpdG9yaWVzLmdldFNwZWNpYWxJbnNwZWN0RGF0YShzcGVjaWFsSW5zcGVjdElkKTtcblxuICAgIGlmICghcmVzKSB7XG4gICAgICByZXR1cm4ge307XG4gICAgfVxuXG4gICAgbGV0IGNoZWNraXRlbUV4dGVuc2lvbiA9IGpzb25QYXJzZShyZXMuY2hlY2tpdGVtX2V4dGVuc2lvbikgfHwge307XG4gICAgbGV0IGltYWdlcyA9IGpzb25QYXJzZShyZXMuaW1hZ2VfZmlsZSkgfHwgW107XG5cbiAgICByZXR1cm4ge1xuICAgICAgLi4ucmVzLFxuICAgICAgY2hlY2tpdGVtOiB7XG4gICAgICAgIGlkOiByZXMuY2hlY2tpdGVtX2lkLFxuICAgICAgICBuYW1lOiByZXMuY2hlY2tpdGVtX25hbWUsXG4gICAgICAgIGNvZGU6IHJlcy5jaGVja2l0ZW1fY29kZSxcbiAgICAgICAgcGFyZW50SWQ6IHJlcy5jaGVja2l0ZW1fcGFyZW50X2lkLFxuICAgICAgICBmdWxsbmFtZTogcmVzLmNoZWNraXRlbV9mdWxsX25hbWUsXG4gICAgICAgIGV4dGVuc2lvbjogY2hlY2tpdGVtRXh0ZW5zaW9uLFxuICAgICAgfSxcbiAgICAgIGltYWdlcyxcbiAgICAgIGNoZWNrZXI6IHtcbiAgICAgICAgaWQ6IHJlcy5jaGVja2VyLFxuICAgICAgICBuYW1lOiByZXMuY2hlY2tlcl9uYW1lLFxuICAgICAgICBtb2JpbGU6IHJlcy5jaGVja2VyX21vYmlsZSxcbiAgICAgICAgaXNfaW1fdXNlcjogcmVzLmNoZWNrZXJfaXNfaW1fdXNlcixcbiAgICAgIH0sXG4gICAgfTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAZGVzY3JpcHRpb246IOiOt+WPluajgOafpemhueivpuaDhVxuICAgKiBAcGFyYW0ge3R5cGV9IHNwZWNpYWxJbnNwZWN0SWQg5qOA5p+l6aG5aWTvvIxzcGVjaWFsX2luc3BlY3Qg6KGo5Li76ZSuXG4gICAqIEByZXR1cm4ge3R5cGV9XG4gICAqL1xuICBhc3luYyBnZXREZXRhaWwoc3BlY2lhbEluc3BlY3RJZCwgcGxhY2VJZCkge1xuICAgIGxldCByZXMgPSBhd2FpdCB0aGlzLmdldFNwZWNpYWxJbnNwZWN0RGF0YShzcGVjaWFsSW5zcGVjdElkLCBwbGFjZUlkKTtcblxuICAgIGlmIChyZXMuc3RhdHVzID09PSBDT05TVC5TVEFUVVNfRFJBRlQpIHtcbiAgICAgIC8vIOiNieeov++8jOiOt+WPluaaguWtmOeahOeKtuaAgVxuICAgICAgbGV0IHN0YXR1cyA9IGF3YWl0IHRoaXMuZ2V0U3RhdHVzKHJlcy5pZCk7XG4gICAgICByZXMuc3RhdHVzU2hvdyA9IHN0YXR1cztcbiAgICB9IGVsc2Uge1xuICAgICAgcmVzLnN0YXR1c1Nob3cgPSByZXMuc3RhdHVzO1xuICAgIH1cbiAgICByZXR1cm4gcmVzO1xuICB9XG4gIC8qKlxuICAgKiBAZGVzY3JpcHRpb246IOS/neWtmOajgOafpemhueivpuaDhVxuICAgKiBAcGFyYW0ge3R5cGV9IGRhdGEg5pWw5o2uXG4gICAqIEByZXR1cm4ge3R5cGV9XG4gICAqL1xuICBhc3luYyBzYXZlRGV0YWlsKGRhdGEpIHtcbiAgICBhd2FpdCB0aGlzLnVwZGF0ZVNwZWNpYWxJbnNwZWN0RGF0YShkYXRhKTtcblxuICAgIGlmIChkYXRhLnN0YXR1cyA9PT0gQ09OU1QuU1RBVFVTX0RFRkFVTFQpIHtcbiAgICAgIC8vIOeKtuaAgeS4uuKAnOacquiuvue9ruKAneaXtu+8jOenu+mZpG1ta3bmmoLlrZjnmoTnirbmgIFcbiAgICAgIGF3YWl0IHRoaXMucmVtb3ZlU3RhdHVzKGRhdGEuaWQpO1xuICAgIH0gZWxzZSBpZiAoZGF0YS5zdGF0dXMgPT09IENPTlNULlNUQVRVU19EUkFGVCkge1xuICAgICAgLy8g6I2J56i/77yM5oqK54q25oCB5L+d5a2Y5YiwIG1ta3ZcbiAgICAgIGF3YWl0IHRoaXMuc2F2ZVN0YXR1cyhkYXRhLmlkLCBkYXRhLnN0YXR1c1Nob3cpO1xuICAgIH1cbiAgfVxuICAvKipcbiAgICogQGRlc2NyaXB0aW9uOiDmj5DkuqTmo4Dmn6Xpobnor6bmg4VcbiAgICogQHBhcmFtIHt0eXBlfSBkYXRhIOaVsOaNrlxuICAgKiBAcmV0dXJuIHt0eXBlfVxuICAgKi9cbiAgYXN5bmMgc3VibWl0RGV0YWlsKGRhdGEpIHtcbiAgICByZXR1cm4gdGhpcy5zdWJtaXRTcGVjaWFsSW5zcGVjdERhdGEoZGF0YSk7XG4gIH1cblxuICAvKipcbiAgICogQGRlc2NyaXB0aW9uOiDkv67mlLnmo4Dmn6XpobnmlbDmja5cbiAgICogQHBhcmFtIHt0eXBlfVxuICAgKiBAcmV0dXJuOlxuICAgKi9cbiAgYXN5bmMgdXBkYXRlU3BlY2lhbEluc3BlY3REYXRhKGRhdGEpIHtcbiAgICBpZiAoIWRhdGEgfHwgIWRhdGEuaWQpIHtcbiAgICAgIHJldHVybiBuZXcgRXJyb3IoJ+S/neWtmOajgOafpemhueaVsOaNru+8jOWPguaVsOmUmeivrycpO1xuICAgIH1cbiAgICBsZXQgcGFyYW1zID0ge1xuICAgICAgaWQ6IGRhdGEuaWQsXG4gICAgfTtcbiAgICBkYXRhLnN0YXR1cyAhPT0gdW5kZWZpbmVkICYmIChwYXJhbXMuc3RhdHVzID0gZGF0YS5zdGF0dXMgfHwgJycpO1xuICAgIGRhdGEuY2hlY2tlciAhPT0gdW5kZWZpbmVkICYmIChwYXJhbXMuY2hlY2tlciA9IGRhdGEuY2hlY2tlciB8fCAnJyk7XG4gICAgZGF0YS5jaGVja190aW1lICE9PSB1bmRlZmluZWQgJiYgKHBhcmFtcy5jaGVja190aW1lID0gZGF0YS5jaGVja190aW1lIHx8ICcnKTtcbiAgICBkYXRhLmRlZHVjdGlvbiAhPT0gdW5kZWZpbmVkICYmIChwYXJhbXMuZGVkdWN0aW9uID0gZGF0YS5kZWR1Y3Rpb24pO1xuICAgIGRhdGEuaW1hZ2VzICE9PSB1bmRlZmluZWQgJiYgKHBhcmFtcy5pbWFnZV9maWxlID0ganNvblN0cmluZ2lmeShkYXRhLmltYWdlcykgfHwgJ1tdJyk7XG4gICAgZGF0YS5yZW1hcmsgIT09IHVuZGVmaW5lZCAmJiAocGFyYW1zLnJlbWFyayA9IGRhdGEucmVtYXJrIHx8ICcnKTtcblxuICAgIGlmIChwYXJhbXMuc3RhdHVzID09PSAn6I2J56i/Jykge1xuICAgICAgYXdhaXQgdGhpcy5zYXZlRHJhZnRUb01ta3YocGFyYW1zLCAnc3BlY2lhbF9pbnNwZWN0Jyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGF3YWl0IHRoaXMucmVtb3ZlRHJhZnRGcm9tTW1rdihwYXJhbXMsICdzcGVjaWFsX2luc3BlY3QnKTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5SZXBvc2l0b3JpZXMudXBkYXRlU3BlY2lhbEluc3BlY3REYXRhKHBhcmFtcyk7XG4gIH1cbiAgYXN5bmMgc3VibWl0U3BlY2lhbEluc3BlY3REYXRhKGRhdGEpIHtcbiAgICBpZiAoIWRhdGEgfHwgIWRhdGEuaWQpIHtcbiAgICAgIHJldHVybiBuZXcgRXJyb3IoJ+aPkOS6pOajgOafpemhueaVsOaNru+8jOWPguaVsOmUmeivrycpO1xuICAgIH1cbiAgICBkYXRhLmNoZWNrZXIgPSBjb250ZXh0LmdldFVzZXIoKS51c2VyX2lkO1xuICAgIGRhdGEuY2hlY2tfdGltZSA9IFV0aWxzLm5vdygpO1xuICAgIGF3YWl0IHRoaXMudXBkYXRlU3BlY2lhbEluc3BlY3REYXRhKGRhdGEpO1xuICAgIGF3YWl0IERhdGFTeW5jaHJvbml6ZXIuYWRkU3luY0dyb3VwKFtbJ3NwZWNpYWxfaW5zcGVjdCcsIGRhdGEuaWRdXSk7XG4gIH1cblxuICAvKiDmqKHlnZfpppbpobXliJfooajkuovku7YgKi9cbiAgLyoqXG4gICAqIEBkZXNjcmlwdGlvbjog54K55Ye75pyr57qn6IqC54K577yI6Z2e5pyr57qn6IqC54K56Ieq5Yqo5omn6KGM5bGV5byAL+aUtue8qe+8iVxuICAgKiBAcGFyYW0ge09iamVjdH0gaXRlbSDngrnlh7vnmoToioLngrlcbiAgICogQHBhcmFtIHtPYmplY3R9IGJhdGNoIOW9k+WJjeaJueasoeaVsOaNrlxuICAgKiBAcGFyYW0ge0Jvb2xlYW59IGVkaXRhYmxlIOaYr+WQpuWPr+S7pee8lui+kVxuICAgKiBAcmV0dXJuIHsqfVxuICAgKi9cbiAgb25DbGlja0VuZE5vZGUoaXRlbSwgYmF0Y2gsIGVkaXRhYmxlKSB7XG4gICAgaWYgKGVkaXRhYmxlKSB7XG4gICAgICB0aGlzLnJvdXRlVG9FZGl0KGl0ZW0pO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnJvdXRlVG9WaWV3KGl0ZW0pO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBAZGVzY3JpcHRpb246IOaJp+ihjOaMiemSrueahOaTjeS9nFxuICAgKiBAcGFyYW0ge09iamVjdH0gYnRuIOeCueWHu+eahOaMiemSrlxuICAgKiBAcGFyYW0ge09iamVjdH0gaXRlbSDngrnlh7vnmoToioLngrlcbiAgICogQHJldHVybiB7Kn1cbiAgICovXG4gIGFzeW5jIHJ1bkJ0bk9wZXJhdGUoYnRuLCBpdGVtKSB7XG4gICAgbGV0IHsgb3BlcmF0ZSA9ICcnLCB2YWx1ZSwgdGlwcyB9ID0gYnRuO1xuICAgIGlmIChvcGVyYXRlID09PSAncm91dGUtdG8tZWRpdCcpIHtcbiAgICAgIHRoaXMucm91dGVUb0VkaXQoaXRlbSwgYnRuKTtcbiAgICB9IGVsc2UgaWYgKG9wZXJhdGUgPT09ICdyb3V0ZS10by12aWV3Jykge1xuICAgICAgdGhpcy5yb3V0ZVRvVmlldyhpdGVtLCBidG4pO1xuICAgIH0gZWxzZSBpZiAob3BlcmF0ZSA9PT0gJ2NoYW5nZS1zdGF0dXMnKSB7XG4gICAgICBhd2FpdCB0aGlzLmNoYW5nZVNwZWNpYWxJbnNwZWN0U3RhdHVzKGl0ZW0sIHZhbHVlLCB0aXBzKTtcbiAgICB9XG4gIH1cblxuICAvLyDot7PliLDmo4Dmn6XpobnnvJbovpHpobVcbiAgcm91dGVUb0VkaXQoaXRlbSwgYnRuKSB7XG4gICAgcm91dGVyLnB1c2goe1xuICAgICAgbmFtZTogQ09OU1QuUk9VVEVfTkFNRV9ERVRBSUxfRURJVCxcbiAgICAgIHF1ZXJ5OiB7IHNwZWNpYWxJbnNwZWN0SWQ6IGl0ZW0uaWQsIGJ0bjogYnRuICYmIGJ0bi5pbmRleCB9LFxuICAgIH0pO1xuICB9XG4gIC8vIOi3s+WIsOajgOafpemhueafpeeci+mhtemdolxuICByb3V0ZVRvVmlldyhpdGVtLCBidG4pIHtcbiAgICByb3V0ZXIucHVzaCh7XG4gICAgICBuYW1lOiBDT05TVC5ST1VURV9OQU1FX0RFVEFJTF9WSUVXLFxuICAgICAgcXVlcnk6IHsgc3BlY2lhbEluc3BlY3RJZDogaXRlbS5pZCwgYnRuOiBidG4gJiYgYnRuLmluZGV4IH0sXG4gICAgfSk7XG4gIH1cbiAgLy8g5pS55Y+Y5qOA5p+l6aG554q25oCBXG4gIGFzeW5jIGNoYW5nZVNwZWNpYWxJbnNwZWN0U3RhdHVzKGl0ZW0sIHZhbHVlLCB0aXBzKSB7XG4gICAgLy8g56e76Zmk6L+Y5pyq5LiK5Lyg55qE6Zif5YiXXG4gICAgYXdhaXQgRGF0YVN5bmNocm9uaXplci5yZW1vdmVTeW5jR3JvdXAoaXRlbS5pZCk7XG4gICAgYXdhaXQgdGhpcy5zYXZlRGV0YWlsKHsgaWQ6IGl0ZW0uaWQsIHN0YXR1czogdmFsdWUgfSk7XG4gICAgYXdhaXQgRGF0YVN5bmNocm9uaXplci5hZGRTeW5jR3JvdXAoW1snc3BlY2lhbF9pbnNwZWN0JywgaXRlbS5pZF1dKTtcbiAgICBpdGVtLnN0YXR1cyA9IHZhbHVlO1xuICAgIHRpcHMgJiYgUG9wdXAuYWxlcnQodGlwcyk7XG4gIH1cblxuICAvKipcbiAgICogQGRlc2NyaXB0aW9uOiDot7PovazliLDpl67popjliJfooajpobXpnaJcbiAgICogQHBhcmFtIGJhdGNoSWQge251bWJlcn1cbiAgICogQHBhcmFtIHNwZWNpYWxJbnNwZWN0SWQge251bWJlcn1cbiAgICogQHBhcmFtIHBsYWNlSWQge251bWJlcn1cbiAgICogQHJldHVyblxuICAgKi9cbiAgZ290b1Byb2JsZW1MaXN0KGJhdGNoSWQsIHNwZWNpYWxJbnNwZWN0SWQsIHBsYWNlSWQpIHtcbiAgICByb3V0ZXIucHVzaCh7XG4gICAgICBuYW1lOiBDT05TVC5ST1VURV9OQU1FX1BST0JMRU1fTElTVCxcbiAgICAgIHF1ZXJ5OiB7XG4gICAgICAgIGJhdGNoSWQ6IGJhdGNoSWQsXG4gICAgICAgIHNwZWNpYWxJbnNwZWN0SWQ6IHNwZWNpYWxJbnNwZWN0SWQsXG4gICAgICAgIHBsYWNlSWQ6IHBsYWNlSWQsXG4gICAgICB9LFxuICAgIH0pO1xuICB9XG5cbiAgLy8g6ZyA6KaB5p+l6K+i55qE6KGoXG4gIGdldFdhaXRVcGxvYWRRdWVyeVRhYmxlcyh3aXRoUHJvYmxlbSkge1xuICAgIGxldCB0YWJsZU1hcHMgPSBbJ3NwZWNpYWxfaW5zcGVjdCcsICdzcGVjaWFsX2luc3BlY3RfcGxhY2VfY2hlY2tpdGVtJ107XG4gICAgd2l0aFByb2JsZW0gJiYgdGFibGVNYXBzLnB1c2goJ2NoZWNrcXVhbGl0eV9wcm9ibGVtJyk7XG4gICAgcmV0dXJuIHRhYmxlTWFwcztcbiAgfVxuXG4gIC8qKlxuICAgKiBAZGVzY3JpcHRpb246IOiOt+WPluaJueasoeW+heS4iuS8oOeahOaVsOaNruaVsOmHj1xuICAgKiBAcGFyYW0ge1N0cmluZ30gYmF0Y2hJZFxuICAgKiBAcGFyYW0ge0Jvb2xlYW59IHdpdGhQcm9ibGVtIOaYr+WQpuWMheWQq+mXrumimFxuICAgKiBAcmV0dXJuIHtQcm9taXNlfVxuICAgKi9cbiAgYXN5bmMgZ2V0V2FpdFVwbG9hZENvdW50KGJhdGNoSWQsIHdpdGhQcm9ibGVtID0gZmFsc2UpIHtcbiAgICAvLyDpnIDopoHmn6Xor6LnmoTooahcbiAgICBsZXQgdGFibGVzID0gdGhpcy5nZXRXYWl0VXBsb2FkUXVlcnlUYWJsZXMod2l0aFByb2JsZW0pO1xuICAgIC8vIOS4iuS8oOmYn+WIl1xuICAgIGxldCB1cGxvYWRRdWV1ZSA9IGF3YWl0IERhdGFTeW5jaHJvbml6ZXIuZ2V0VXBsb2FkUXVldWUoKTtcblxuICAgIGxldCBtYXBzID0ge307XG5cbiAgICB0YWJsZXMuZm9yRWFjaCh0YWJsZSA9PiB7XG4gICAgICBtYXBzW3RhYmxlXSA9ICh1cGxvYWRRdWV1ZSB8fCBbXSlcbiAgICAgICAgLmZpbHRlcihpdGVtID0+IGl0ZW0ucmVsYXRpb25fdGFibGVfbmFtZSA9PT0gdGFibGUpXG4gICAgICAgIC5tYXAoaXRlbSA9PiBpdGVtLnJlbGF0aW9uX2lkKTtcbiAgICB9KTtcblxuICAgIGxldCByZXMgPSAwO1xuXG4gICAgZm9yIChsZXQgdGFibGUgaW4gbWFwcykge1xuICAgICAgbGV0IGlkcyA9IG1hcHNbdGFibGVdO1xuICAgICAgbGV0IGRhdGFzID0gYXdhaXQgdGhpcy5SZXBvc2l0b3JpZXMuZmlsdGVySWRzQnlCYXRjaElkKHRhYmxlLCBpZHMsIGJhdGNoSWQpO1xuICAgICAgcmVzICs9IGRhdGFzLmxlbmd0aDtcbiAgICB9XG5cbiAgICByZXR1cm4gcmVzO1xuICB9XG5cbiAgLyoqXG4gICAqIEBkZXNjcmlwdGlvbjog5om55qyh5a6M5oiQ5qOA5p+l55qE5qCh6aqMXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBiYXRjaFxuICAgKiBAcGFyYW0ge0FycmF5fSBsaXN0RGF0YVxuICAgKiBAcmV0dXJuIHtCb29sZWFufVxuICAgKi9cbiAgYXN5bmMgYmF0Y2hDaGVjayhiYXRjaCwgbGlzdERhdGEsIGNvbmZpZywgdHJlZURhdGEpIHtcbiAgICBpZiAoXG4gICAgICAhY29uZmlnIHx8XG4gICAgICAhY29uZmlnLmZpbmlzaEJhdGNoQ2hlY2sgfHxcbiAgICAgICFBcnJheS5pc0FycmF5KGNvbmZpZy5maW5pc2hCYXRjaENoZWNrKSB8fFxuICAgICAgIWNvbmZpZy5maW5pc2hCYXRjaENoZWNrLmxlbmd0aFxuICAgICkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGZvciAobGV0IGl0ZW0gb2YgY29uZmlnLmZpbmlzaEJhdGNoQ2hlY2spIHtcbiAgICAgIGlmIChcbiAgICAgICAgIWl0ZW0ubWF0Y2ggfHxcbiAgICAgICAgIWl0ZW0uc3RhdHVzVG90YWxDb25maWcgfHxcbiAgICAgICAgIUFycmF5LmlzQXJyYXkoaXRlbS5zdGF0dXNUb3RhbENvbmZpZykgfHxcbiAgICAgICAgIWl0ZW0uc3RhdHVzVG90YWxDb25maWcubGVuZ3RoXG4gICAgICApIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgICBsZXQgbGlzdCA9IHRyZWVEYXRhIHx8IFtdO1xuICAgICAgaWYgKGl0ZW0uaXNGaWx0ZXJGaXJzdCkge1xuICAgICAgICBsaXN0ID0gbGlzdC5maWx0ZXIoaXRlbSA9PiBpdGVtLmNoaWxkcmVuICYmIGl0ZW0uY2hpbGRyZW4ubGVuZ3RoKTtcbiAgICAgIH1cbiAgICAgIGxldCBzdGF0dXNMaXN0ID0gaXRlbS5zdGF0dXNUb3RhbENvbmZpZy5tYXAoaXRlbUNvbmZpZyA9PiBpdGVtQ29uZmlnLnN0YXR1cyk7XG4gICAgICBsZXQgc3RhdHVzVG90YWwgPSBnZXRFbmRUb3RhbEJ5a2V5KGxpc3QsICdzdGF0dXMnLCBzdGF0dXNMaXN0KTtcbiAgICAgIGxldCBjYWxjVG90YWxWYWx1ZSA9IGl0ZW0uc3RhdHVzVG90YWxDb25maWcucmVkdWNlKChwcmUsIGl0ZW1Db25maWcpID0+IHtcbiAgICAgICAgcHJlW2l0ZW1Db25maWcua2V5XSA9IHN0YXR1c1RvdGFsW2l0ZW1Db25maWcuc3RhdHVzXTtcbiAgICAgICAgcmV0dXJuIHByZTtcbiAgICAgIH0sIHt9KTtcbiAgICAgIGxldCByZXN1bHQgPSB0aGlzLmV2YWwoaXRlbS5tYXRjaCwgY2FsY1RvdGFsVmFsdWUpO1xuICAgICAgaWYgKHJlc3VsdCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIGNvZGU6IDIsXG4gICAgICAgICAgbXNnOiB0aGlzLmNvbXBpbGVTdHIoaXRlbS5tc2csIGNhbGNUb3RhbFZhbHVlKSxcbiAgICAgICAgICB0eXBlOiBpdGVtLnR5cGUgfHwgJ2FsZXJ0JyxcbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBsZXQgd2FpdFVwbG9hZENvdW50ID0gYXdhaXQgdGhpcy5nZXRXYWl0VXBsb2FkQ291bnQoYmF0Y2guaWQpO1xuICAgIGlmICh3YWl0VXBsb2FkQ291bnQpIHtcbiAgICAgIHJldHVybiB7IGNvZGU6IDEsIG1zZzogJ+i/mOaciemXrumimOato+WcqOS4iuS8oO+8jOivt+etieW+hemXrumimOS4iuS8oOWujOavlScsIHR5cGU6ICdhbGVydCcgfTtcbiAgICB9XG4gIH1cbiAgYXN5bmMgZmluaXNoQmF0Y2hDb25maXJtKCkge1xuICAgIHJldHVybiBQb3B1cC5jb25maXJtKCfor7fnoa7kv53miYDmnInmo4Dmn6Xkurrlt7LkuIrkvKDmlbDmja7vvIzmj5DkuqTlkI7kuI3lj6/kv67mlLnvvIznoa7orqTmj5DkuqTvvJ8nKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAZGVzY3JpcHRpb246IOaPkOS6pOWujOaIkOajgOafpVxuICAgKiBAcGFyYW0ge09iamVjdH0gYmF0Y2hcbiAgICogQHJldHVybiB7UHJvbWlzZX1cbiAgICovXG4gIGFzeW5jIGZpbmlzaEJhdGNoKGJhdGNoKSB7XG4gICAgbGV0IGJhdGNoSWQgPSBiYXRjaC5pZDtcbiAgICBiYXRjaC5zdGF0dXMgPSBDT05TVC5TVEFUVVNfQkFUQ0hfRklOSVNIRUQ7XG5cbiAgICBsZXQgaGFzTmV0d29yayA9IGF3YWl0IG5ldHdvcmsuZ2V0SGFzTmV0d29yaygpO1xuICAgIGlmICghaGFzTmV0d29yaykge1xuICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KCflvZPliY3nvZHnu5zml6Dms5XlkIzmraXmlbDmja4nKTtcbiAgICB9XG5cbiAgICBsZXQgcmVzID0gYXdhaXQgV2ViU2VydmljZS5wb3N0KCcvYmF0Y2gvdXBsb2FkJywgbnVsbCwgeyBkYXRhOiB7IGJhdGNoOiBiYXRjaCB9IH0pO1xuICAgIGF3YWl0IGxvY2FsREIudXBkYXRlKCdiYXRjaCcsIHJlcy5iYXRjaCwgeyBpZDogYmF0Y2hJZCB9KTtcbiAgICAvLyDmgaLlpI3mo4Dmn6XpobnojYnnqL/mlbDmja5cbiAgICBsZXQgcmVzZXREYXRhID0geyBzdGF0dXM6IENPTlNULlNUQVRVU19ERUZBVUxULCBkZWR1Y3Rpb246IDAsIGltYWdlX2ZpbGU6ICdbXScgfTtcbiAgICBsZXQgcXVlcnlEYXRhID0ge1xuICAgICAgYmF0Y2hfaWQ6IGJhdGNoLmlkLFxuICAgICAgc3RhdHVzOiBDT05TVC5TVEFUVVNfRFJBRlQsXG4gICAgfTtcbiAgICBhd2FpdCB0aGlzLlJlcG9zaXRvcmllcy51cGRhdGVTcGVjaWFsSW5zcGVjdEFsbChxdWVyeURhdGEsIHJlc2V0RGF0YSk7XG4gICAgLy8g5Yig6Zmk5omA5pyJ6I2J56i/6Zeu6aKYXG4gICAgbGV0IHByb2JsZW1JZHMgPSBhd2FpdCB0aGlzLlJlcG9zaXRvcmllcy5nZXREcmFmdFByb2JsZW1CeUJhdGNoSWQoYmF0Y2hJZCk7XG4gICAgbGV0IGlkcyA9IChwcm9ibGVtSWRzIHx8IFtdKS5tYXAoaXRlbSA9PiBpdGVtLmlkKTtcbiAgICByZXR1cm4gdGhpcy5SZXBvc2l0b3JpZXMuZGVsZXRlUHJvYmxlbUJ5SWQoaWRzKTtcbiAgfVxufVxuIiwidmFyIG1hcCA9IHtcblx0XCIuL21vZGUtMS5qc1wiOiBcIjdhNDJcIixcblx0XCIuL21vZGUtMTAuanNcIjogXCI3NDNkXCIsXG5cdFwiLi9tb2RlLTEwMC5qc1wiOiBcIjg3ZDBcIixcblx0XCIuL21vZGUtMTEuanNcIjogXCI3NjQ3XCIsXG5cdFwiLi9tb2RlLTIuanNcIjogXCJhODMzXCIsXG5cdFwiLi9tb2RlLTMuanNcIjogXCI1NWRjXCIsXG5cdFwiLi9tb2RlLTQuanNcIjogXCI2NmY1XCIsXG5cdFwiLi9tb2RlLTUuanNcIjogXCIwNWFjXCIsXG5cdFwiLi9tb2RlLTYuanNcIjogXCJmZDFiXCIsXG5cdFwiLi9tb2RlLTcuanNcIjogXCJkODk5XCIsXG5cdFwiLi9tb2RlLTguanNcIjogXCIxMDc5XCIsXG5cdFwiLi9tb2RlLTkuanNcIjogXCJkZDJmXCIsXG5cdFwiLi9tb2RlLTk5LmpzXCI6IFwiZGM1ZVwiXG59O1xuXG5cbmZ1bmN0aW9uIHdlYnBhY2tDb250ZXh0KHJlcSkge1xuXHR2YXIgaWQgPSB3ZWJwYWNrQ29udGV4dFJlc29sdmUocmVxKTtcblx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oaWQpO1xufVxuZnVuY3Rpb24gd2VicGFja0NvbnRleHRSZXNvbHZlKHJlcSkge1xuXHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKG1hcCwgcmVxKSkge1xuXHRcdHZhciBlID0gbmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIiArIHJlcSArIFwiJ1wiKTtcblx0XHRlLmNvZGUgPSAnTU9EVUxFX05PVF9GT1VORCc7XG5cdFx0dGhyb3cgZTtcblx0fVxuXHRyZXR1cm4gbWFwW3JlcV07XG59XG53ZWJwYWNrQ29udGV4dC5rZXlzID0gZnVuY3Rpb24gd2VicGFja0NvbnRleHRLZXlzKCkge1xuXHRyZXR1cm4gT2JqZWN0LmtleXMobWFwKTtcbn07XG53ZWJwYWNrQ29udGV4dC5yZXNvbHZlID0gd2VicGFja0NvbnRleHRSZXNvbHZlO1xubW9kdWxlLmV4cG9ydHMgPSB3ZWJwYWNrQ29udGV4dDtcbndlYnBhY2tDb250ZXh0LmlkID0gXCI5ZGZiXCI7IiwiLypcbiAqIEBBdXRob3I6IGppYW5nbDAyXG4gKiBARGF0ZTogMjAyMC0wOC0yOCAxNDozNTozNFxuICogQExhc3RFZGl0b3JzOiBqaWFuZ2wwMlxuICogQExhc3RFZGl0VGltZTogMjAyMC0xMC0yMCAxNjo0MzozM1xuICogQERlc2NyaXB0aW9uOiDkuJPpobnlt6Hmo4DvvIzkuI3miZPliIbku5Plgqjmlofku7ZcbiAqL1xuXG4vLyBpbXBvcnQgbG9jYWxEQiBmcm9tICdAc3JjL2ZyYW1ld29yay9sb2NhbERCJztcbmltcG9ydCBSZXBvc2l0b3JpZXNCYXNlIGZyb20gJy4vYmFzZSc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFJlcG9zaXRvcmllc01vZGUgZXh0ZW5kcyBSZXBvc2l0b3JpZXNCYXNlIHtcbiAgZ2V0SW5kZXhMaXN0KGJhdGNoSWQpIHtcbiAgICBsZXQgc3FsID0gYHNlbGVjdCBzaS4qLCBzaS5jaGVja2l0ZW1fbmFtZSBhcyBuYW1lLFxuXHRcdCAgKHNlbGVjdCBpZCBmcm9tIGNoZWNrcXVhbGl0eV9wcm9ibGVtIGNwIHdoZXJlIGNwLmJpel9pZCA9IHNpLmlkIG9yZGVyIGJ5IGNwLmRvd25sb2FkX3RpbWUgZGVzYyBsaW1pdCAxKSBhcyBwcm9ibGVtX2lkXG5cdFx0ZnJvbSBzcGVjaWFsX2luc3BlY3Qgc2kgXG5cdFx0d2hlcmUgc2kuYmF0Y2hfaWQgPSAnJHtiYXRjaElkfScgb3JkZXIgYnkgc2kuY2hlY2tpdGVtX2NvZGVgO1xuXG4gICAgcmV0dXJuIGxvY2FsREIucXVlcnkoc3FsKTtcbiAgfVxufVxuIiwiLypcbiAqIEBBdXRob3I6IGppYW5nbDAyXG4gKiBARGF0ZTogMjAyMC0xMC0xMiAxMTo0MTozOVxuICogQExhc3RFZGl0b3JzOiBqaWFuZ2wwMlxuICogQExhc3RFZGl0VGltZTogMjAyMC0xMC0xNiAxMDozMzoyMVxuICogQERlc2NyaXB0aW9uOiDkuJPpobnlt6Hmo4DvvIxcIuWQiOWQjOW3oeajgFwiIOaooeadvyBzZXJ2aWNlXG4gKi9cblxuaW1wb3J0IFNlcnZpY2VCYXNlIGZyb20gJy4vYmFzZSc7XG5pbXBvcnQgKiBhcyBDT05TVCBmcm9tICcuLi9jb25zdC5qcyc7XG5pbXBvcnQgcm91dGVyIGZyb20gJ0Byb3V0ZXInO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBTZXJ2aWNlTW9kZSBleHRlbmRzIFNlcnZpY2VCYXNlIHtcbiAgLy8g5om55qyh5a6M5oiQ5qOA5p+l5qCh6aqMXG4gIC8vIGJhdGNoQ2hlY2soKSB7fVxuXG4gIC8qKlxuICAgKiBAZGVzY3JpcHRpb246IOacq+e6p+iKgueCueeCueWHu+S6i+S7tlxuICAgKiBAcGFyYW0ge3R5cGV9XG4gICAqIEByZXR1cm4geyp9XG4gICAqL1xuICBvbkNsaWNrRW5kTm9kZShpdGVtLCBiYXRjaCwgZWRpdGFibGUpIHtcbiAgICBpZiAoZWRpdGFibGUpIHtcbiAgICAgIHRoaXMucm91dGVUb09sZFByb2JsZW1FZGl0KGl0ZW0pO1xuICAgIH0gZWxzZSB7XG4gICAgICBpZiAoaXRlbS5zdGF0dXMgPT09IENPTlNULlNUQVRVU19GSU5JU0hFRCkge1xuICAgICAgICB0aGlzLnJvdXRlVG9PbGRQcm9ibGVtVmlldyhpdGVtKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICByb3V0ZVRvRWRpdChpdGVtKSB7XG4gICAgdGhpcy5yb3V0ZVRvT2xkUHJvYmxlbUVkaXQoaXRlbSk7XG4gIH1cblxuICByb3V0ZVRvVmlldyhpdGVtKSB7XG4gICAgdGhpcy5yb3V0ZVRvT2xkUHJvYmxlbVZpZXcoaXRlbSk7XG4gIH1cblxuICBhc3luYyByb3V0ZVRvT2xkUHJvYmxlbUVkaXQoaXRlbSkge1xuICAgIGxldCBzcGVjaWFsSW5zcGVjdElkID0gaXRlbSAmJiBpdGVtLmlkO1xuICAgIGxldCBxdWVyeURhdGEgPSBhd2FpdCB0aGlzLmdldE9sZFJvdXRlUXVlcnkoc3BlY2lhbEluc3BlY3RJZCk7XG4gICAgbGV0IHsgc3BlY2lhbF9pbnNwZWN0X2lkLCBjaGVja2l0ZW1faWQsIG1vZGUgfSA9IHF1ZXJ5RGF0YTtcbiAgICByb3V0ZXIucHVzaCh7XG4gICAgICBwYXRoOiAnL3NwZWNpYWwtaW5zcGVjdC1nZXQtc2NvcmUnLFxuICAgICAgcXVlcnk6IHtcbiAgICAgICAgc3BlY2lhbEluc3BlY3RJZDogc3BlY2lhbF9pbnNwZWN0X2lkLFxuICAgICAgICBjaGVja0l0ZW1JZDogY2hlY2tpdGVtX2lkLFxuICAgICAgICBtb2RlOiBtb2RlLFxuICAgICAgfSxcbiAgICB9KTtcbiAgfVxuXG4gIGFzeW5jIHJvdXRlVG9PbGRQcm9ibGVtVmlldyhpdGVtKSB7XG4gICAgbGV0IHNwZWNpYWxJbnNwZWN0SWQgPSBpdGVtICYmIGl0ZW0uaWQ7XG4gICAgbGV0IHF1ZXJ5RGF0YSA9IGF3YWl0IHRoaXMuZ2V0T2xkUm91dGVRdWVyeShzcGVjaWFsSW5zcGVjdElkKTtcbiAgICBsZXQgeyBzcGVjaWFsX2luc3BlY3RfaWQsIGNoZWNraXRlbV9pZCwgbW9kZSB9ID0gcXVlcnlEYXRhO1xuICAgIHJvdXRlci5wdXNoKHtcbiAgICAgIHBhdGg6ICcvc3BlY2lhbC1pbnNwZWN0LWdldC1zY29yZS1kZXRhaWwnLFxuICAgICAgcXVlcnk6IHtcbiAgICAgICAgc3BlY2lhbEluc3BlY3RJZDogc3BlY2lhbF9pbnNwZWN0X2lkLFxuICAgICAgICBjaGVja0l0ZW1JZDogY2hlY2tpdGVtX2lkLFxuICAgICAgICBtb2RlOiBtb2RlLFxuICAgICAgfSxcbiAgICB9KTtcbiAgfVxuXG4gIC8qIOi3s+i9rOWIsOmXrumimOWIl+ihqCAqL1xuICBnb3RvUHJvYmxlbUxpc3QoYmF0Y2hJZCwgc3BlY2lhbEluc3BlY3RJZCwgcGxhY2VJZCkge1xuICAgIHRoaXMuZ290b09sZFByb2JsZW1MaXN0KHsgYmF0Y2hfaWQ6IGJhdGNoSWQsIG1vZGU6IDkgfSk7XG4gIH1cbn1cbiIsInZhciBtYXAgPSB7XG5cdFwiLi9tb2RlLTEuanNcIjogXCI2MjY4XCIsXG5cdFwiLi9tb2RlLTEwLmpzXCI6IFwiZmU5MVwiLFxuXHRcIi4vbW9kZS0xMDAuanNcIjogXCIyNjZmXCIsXG5cdFwiLi9tb2RlLTExLmpzXCI6IFwiM2FiZFwiLFxuXHRcIi4vbW9kZS0yLmpzXCI6IFwiYjM3NlwiLFxuXHRcIi4vbW9kZS0zLmpzXCI6IFwiMWUzM1wiLFxuXHRcIi4vbW9kZS00LmpzXCI6IFwiM2MxNmVcIixcblx0XCIuL21vZGUtNS5qc1wiOiBcIjRiMmVcIixcblx0XCIuL21vZGUtNi5qc1wiOiBcImZiMjlcIixcblx0XCIuL21vZGUtNy5qc1wiOiBcIjIxNTBcIixcblx0XCIuL21vZGUtOC5qc1wiOiBcIjA5ZDZcIixcblx0XCIuL21vZGUtOS5qc1wiOiBcImE5NmNcIixcblx0XCIuL21vZGUtOTkuanNcIjogXCIzOTFjYlwiXG59O1xuXG5cbmZ1bmN0aW9uIHdlYnBhY2tDb250ZXh0KHJlcSkge1xuXHR2YXIgaWQgPSB3ZWJwYWNrQ29udGV4dFJlc29sdmUocmVxKTtcblx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oaWQpO1xufVxuZnVuY3Rpb24gd2VicGFja0NvbnRleHRSZXNvbHZlKHJlcSkge1xuXHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKG1hcCwgcmVxKSkge1xuXHRcdHZhciBlID0gbmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIiArIHJlcSArIFwiJ1wiKTtcblx0XHRlLmNvZGUgPSAnTU9EVUxFX05PVF9GT1VORCc7XG5cdFx0dGhyb3cgZTtcblx0fVxuXHRyZXR1cm4gbWFwW3JlcV07XG59XG53ZWJwYWNrQ29udGV4dC5rZXlzID0gZnVuY3Rpb24gd2VicGFja0NvbnRleHRLZXlzKCkge1xuXHRyZXR1cm4gT2JqZWN0LmtleXMobWFwKTtcbn07XG53ZWJwYWNrQ29udGV4dC5yZXNvbHZlID0gd2VicGFja0NvbnRleHRSZXNvbHZlO1xubW9kdWxlLmV4cG9ydHMgPSB3ZWJwYWNrQ29udGV4dDtcbndlYnBhY2tDb250ZXh0LmlkID0gXCJhZTBmXCI7IiwiLypcbiAqIEBBdXRob3I6IGppYW5nbDAyXG4gKiBARGF0ZTogMjAyMC0wOC0yOCAxNDoyNToyNFxuICogQExhc3RFZGl0b3JzOiBqaWFuZ2wwMlxuICogQExhc3RFZGl0VGltZTogMjAyMC0xMC0yMCAxNjozNDoxNlxuICogQERlc2NyaXB0aW9uOiDkuJPpobnlt6Hmo4DvvIxcIuaXoOaJk+WIhlwiIOaooeadvyBzZXJ2aWNlXG4gKi9cblxuaW1wb3J0IFNlcnZpY2VCYXNlIGZyb20gJy4vYmFzZSc7XG5pbXBvcnQgKiBhcyBDT05TVCBmcm9tICcuLi9jb25zdC5qcyc7XG5pbXBvcnQgcm91dGVyIGZyb20gJ0Byb3V0ZXInO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBTZXJ2aWNlTW9kZSBleHRlbmRzIFNlcnZpY2VCYXNlIHtcbiAgb25DbGlja0VuZE5vZGUoaXRlbSwgYmF0Y2gsIGVkaXRhYmxlKSB7XG4gICAgaWYgKGl0ZW0uc3RhdHVzID09PSBDT05TVC5TVEFUVVNfUVVBTElGSUVEKSB7XG4gICAgICAvLyDlkIjmoLxcbiAgICAgIHRoaXMucm91dGVUb09sZFNldFBhc3MoaXRlbSk7XG4gICAgfSBlbHNlIGlmIChpdGVtLnN0YXR1cyA9PT0gQ09OU1QuU1RBVFVTX1VOUVVBTElGSUVEKSB7XG4gICAgICAvLyDkuI3lkIjmoLxcbiAgICAgIHRoaXMucm91dGVUb09sZFByb2JsZW1WaWV3KGl0ZW0pO1xuICAgIH0gZWxzZSBpZiAoaXRlbS5zdGF0dXMgPT09IENPTlNULlNUQVRVU19EUkFGVCkge1xuICAgICAgdGhpcy5yb3V0ZVRvT2xkUHJvYmxlbUVkaXQoaXRlbSk7XG4gICAgfVxuICB9XG5cbiAgcm91dGVUb0VkaXQoaXRlbSkge1xuICAgIHRoaXMucm91dGVUb09sZFByb2JsZW1FZGl0KGl0ZW0pO1xuICB9XG5cbiAgcm91dGVUb1ZpZXcoaXRlbSkge1xuICAgIHRoaXMucm91dGVUb09sZFByb2JsZW1WaWV3KGl0ZW0pO1xuICB9XG5cbiAgYXN5bmMgcm91dGVUb09sZFNldFBhc3MoaXRlbSkge1xuICAgIGxldCBzcGVjaWFsSW5zcGVjdElkID0gaXRlbSAmJiBpdGVtLmlkO1xuICAgIGxldCBxdWVyeURhdGEgPSBhd2FpdCB0aGlzLmdldE9sZFJvdXRlUXVlcnkoc3BlY2lhbEluc3BlY3RJZCk7XG4gICAgbGV0IHsgc3BlY2lhbF9pbnNwZWN0X2lkLCBtb2RlIH0gPSBxdWVyeURhdGE7XG5cbiAgICByb3V0ZXIucHVzaCh7XG4gICAgICBwYXRoOiAnL3NwZWNpYWwtaW5zcGVjdC1wcm9ibGVtLWRldGFpbC1wYXNzJyxcbiAgICAgIHF1ZXJ5OiB7IHNwZWNpYWxJbnNwZWN0SWQ6IHNwZWNpYWxfaW5zcGVjdF9pZCwgbW9kZTogbW9kZSB9LFxuICAgIH0pO1xuICB9XG59XG4iLCIvKlxuICogQEF1dGhvcjogamlhbmdsMDJcbiAqIEBEYXRlOiAyMDIwLTA4LTI4IDE0OjM1OjM0XG4gKiBATGFzdEVkaXRvcnM6IGppYW5nbDAyXG4gKiBATGFzdEVkaXRUaW1lOiAyMDIwLTEwLTE1IDA5OjUwOjAwXG4gKiBARGVzY3JpcHRpb246IOS4k+mhueW3oeajgO+8jOinguaEn+aViOaenOS7k+WCqOaWh+S7tlxuICovXG5cbmltcG9ydCBsb2NhbERCIGZyb20gJ0BzcmMvZnJhbWV3b3JrL2xvY2FsREInO1xuaW1wb3J0IFJlcG9zaXRvcmllc0Jhc2UgZnJvbSAnLi9iYXNlJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUmVwb3NpdG9yaWVzTW9kZSBleHRlbmRzIFJlcG9zaXRvcmllc0Jhc2Uge1xuICAvLyDojrflj5bkuJPpobnlt6Hmo4Dlrp7mtYvlrp7ph4/nmoTmiYDmnInmo4Dmn6XpoblcbiAgZ2V0SW5kZXhMaXN0KGJhdGNoSWQpIHtcbiAgICBsZXQgc3FsID0gYHNlbGVjdCBzaS4qLCBzaS5jaGVja2l0ZW1fbmFtZSBhcyBuYW1lLCBzbS5tZWFzdXJlbWVudF9wb2ludHMsIHNtLnByb2JsZW1fcG9pbnRzICwgc20ucGFzc3JhdGVfbW9kZSBcblx0XHRcdGZyb20gc3BlY2lhbF9pbnNwZWN0IHNpIFxuXHRcdFx0bGVmdCBqb2luIHNwZWNpYWxfaW5zcGVjdF9tZWFzdXJlX2l0ZW0gc20gb24gc20uc3BlY2lhbF9pbnNwZWN0X2lkID0gc2kuaWQgXG5cdFx0XHR3aGVyZSBiYXRjaF9pZCA9ICcke2JhdGNoSWR9JyBcbiAgICAgIG9yZGVyIGJ5IHNpLmNoZWNraXRlbV9jb2RlYDtcbiAgICByZXR1cm4gbG9jYWxEQi5xdWVyeShzcWwpO1xuICB9XG59XG4iLCIvKlxuICogQEF1dGhvcjogamlhbmdsMDJcbiAqIEBEYXRlOiAyMDIwLTA4LTI4IDE0OjM1OjM0XG4gKiBATGFzdEVkaXRvcnM6IGppYW5nbDAyXG4gKiBATGFzdEVkaXRUaW1lOiAyMDIwLTA5LTE0IDE5OjQxOjI5XG4gKiBARGVzY3JpcHRpb246IOS4k+mhueW3oeajgO+8jOadg+mHjeS7k+WCqOaWh+S7tlxuICovXG5cbmltcG9ydCBsb2NhbERCIGZyb20gJ0BzcmMvZnJhbWV3b3JrL2xvY2FsREInO1xuaW1wb3J0IFJlcG9zaXRvcmllc0Jhc2UgZnJvbSAnLi9iYXNlJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUmVwb3NpdG9yaWVzTW9kZSBleHRlbmRzIFJlcG9zaXRvcmllc0Jhc2Uge1xuICBnZXRJbmRleExpc3QoYmF0Y2hJZCkge1xuICAgIGxldCBzcWwgPSBgc2VsZWN0IGIuKiwgYi5pZCBhcyBiYXRjaF9pZCwgXG4gICAgICBzdC5pZCBhcyB0ZW1wbGF0ZV9pZCwgc3QubmFtZSBhcyB0ZW1wbGF0ZV9uYW1lLCBcbiAgICAgIHNjLndlaWdodCBhcyB3ZWlnaHRcblx0XHRcdGZyb20gYmF0Y2ggYlxuXHRcdFx0bGVmdCBqb2luIHNwZWNpYWxfaW5zcGVjdF90ZW1wbGF0ZSBzdCBvbiBzdC5pZCA9IGIudGVtcGxhdGVfaWQgXG5cdFx0XHRsZWZ0IGpvaW4gc3BlY2lhbF9pbnNwZWN0X3RlbXBsYXRlX2JhdGNoX2NvbWJvIHNjIG9uIHNjLmJhdGNoX2lkID0gYi5wYXJlbnRfaWQgYW5kIHNjLnRlbXBsYXRlX2lkID0gc3QuaWQgXG5cdFx0XHR3aGVyZSBiLnBhcmVudF9pZCA9ICcke2JhdGNoSWR9JyBvcmRlciBieSBzYy5zb3J0YDtcbiAgICByZXR1cm4gbG9jYWxEQi5xdWVyeShzcWwpO1xuICB9XG59XG4iLCIvKlxuICogQEF1dGhvcjogamlhbmdsMDJcbiAqIEBEYXRlOiAyMDIwLTA4LTI4IDE0OjM1OjM0XG4gKiBATGFzdEVkaXRvcnM6IGppYW5nbDAyXG4gKiBATGFzdEVkaXRUaW1lOiAyMDIwLTEwLTEzIDE0OjQwOjQ4XG4gKiBARGVzY3JpcHRpb246IOW+l+WIhueOh++8jOWumuaho+e7meWIhu+8jOS7k+WCqOaWh+S7tlxuICovXG5cbi8vIGltcG9ydCBsb2NhbERCIGZyb20gJ0BzcmMvZnJhbWV3b3JrL2xvY2FsREInO1xuaW1wb3J0IFJlcG9zaXRvcmllc0Jhc2UgZnJvbSAnLi9iYXNlJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUmVwb3NpdG9yaWVzTW9kZSBleHRlbmRzIFJlcG9zaXRvcmllc0Jhc2Uge1xuICAvL1xufVxuIiwiLypcbiAqIEBBdXRob3I6IGppYW5nbDAyXG4gKiBARGF0ZTogMjAyMC0xMC0xMiAxMTo0MTozOVxuICogQExhc3RFZGl0b3JzOiBqaWFuZ2wwMlxuICogQExhc3RFZGl0VGltZTogMjAyMC0xMC0xMiAxNjozNDowN1xuICogQERlc2NyaXB0aW9uOiDkuJPpobnlt6Hmo4DvvIxcIuWQiOWQjOW3oeajgFwiIOaooeadvyBzZXJ2aWNlXG4gKi9cblxuaW1wb3J0IFNlcnZpY2VCYXNlIGZyb20gJy4vYmFzZSc7XG4vLyBpbXBvcnQgKiBhcyBDT05TVCBmcm9tICcuLi9jb25zdC5qcyc7XG5pbXBvcnQgcm91dGVyIGZyb20gJ0Byb3V0ZXInO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBTZXJ2aWNlTW9kZSBleHRlbmRzIFNlcnZpY2VCYXNlIHtcbiAgLy8g5om55qyh5a6M5oiQ5qOA5p+l5qCh6aqMXG4gIC8vIGJhdGNoQ2hlY2soKSB7fVxuXG4gIC8qKlxuICAgKiBAZGVzY3JpcHRpb246IOacq+e6p+iKgueCueeCueWHu+S6i+S7tlxuICAgKiBAcGFyYW0ge3R5cGV9XG4gICAqIEByZXR1cm4geyp9XG4gICAqL1xuICBvbkNsaWNrRW5kTm9kZShpdGVtLCBiYXRjaCwgZWRpdGFibGUpIHtcbiAgICBpZiAoaXRlbS5wcm9ibGVtX2lkKSB7XG4gICAgICB0aGlzLnJvdXRlVG9PbGRQcm9ibGVtRGV0YWlsKGl0ZW0pO1xuICAgIH1cbiAgfVxuXG4gIHJvdXRlVG9FZGl0KGl0ZW0pIHtcbiAgICByb3V0ZXIucHVzaCh7XG4gICAgICBwYXRoOiAnL3NwZWNpYWwtaW5zcGVjdC1jb250cmFjdC1wcm9ibGVtLWRldGFpbCcsXG4gICAgICBxdWVyeToge1xuICAgICAgICBiaXpJZDogaXRlbS5pZCxcbiAgICAgICAgdHlwZTogMCxcbiAgICAgIH0sXG4gICAgfSk7XG4gIH1cblxuICByb3V0ZVRvVmlldyhpdGVtKSB7XG4gICAgdGhpcy5yb3V0ZVRvT2xkUHJvYmxlbURldGFpbChpdGVtKTtcbiAgfVxuXG4gIHJvdXRlVG9PbGRQcm9ibGVtRGV0YWlsKGl0ZW0pIHtcbiAgICByb3V0ZXIucHVzaCh7XG4gICAgICBwYXRoOiAnL3NwZWNpYWwtaW5zcGVjdC1jb250cmFjdC1wcm9ibGVtLWRldGFpbCcsXG4gICAgICBxdWVyeToge1xuICAgICAgICBwcm9ibGVtSWQ6IGl0ZW0ucHJvYmxlbV9pZCxcbiAgICAgIH0sXG4gICAgfSk7XG4gIH1cblxuICAvLyDlkIjmoLxcbiAgY2hhbmdlU3BlY2lhbEluc3BlY3RTdGF0dXMoaXRlbSkge1xuICAgIHJvdXRlci5wdXNoKHtcbiAgICAgIHBhdGg6ICcvc3BlY2lhbC1pbnNwZWN0LWNvbnRyYWN0LXByb2JsZW0tZGV0YWlsJyxcbiAgICAgIHF1ZXJ5OiB7XG4gICAgICAgIGJpeklkOiBpdGVtLmlkLFxuICAgICAgICB0eXBlOiAxLFxuICAgICAgfSxcbiAgICB9KTtcbiAgfVxuXG4gIC8qIOi3s+i9rOWIsOmXrumimOWIl+ihqCAqL1xuICBnb3RvUHJvYmxlbUxpc3QoYmF0Y2hJZCwgc3BlY2lhbEluc3BlY3RJZCwgcGxhY2VJZCkge1xuICAgIHRoaXMuZ290b09sZFByb2JsZW1MaXN0KHsgYmF0Y2hfaWQ6IGJhdGNoSWQsIG1vZGU6IDYgfSk7XG4gIH1cbn1cbiIsIi8qXG4gKiBAQXV0aG9yOiBqaWFuZ2wwMlxuICogQERhdGU6IDIwMjAtMDgtMjggMTQ6MzU6MzRcbiAqIEBMYXN0RWRpdG9yczogamlhbmdsMDJcbiAqIEBMYXN0RWRpdFRpbWU6IDIwMjAtMTAtMTIgMTQ6MTI6MzJcbiAqIEBEZXNjcmlwdGlvbjog5ZCI5ZCM5beh5qOA77yM5LuT5YKo5paH5Lu2XG4gKi9cblxuLy8gaW1wb3J0IGxvY2FsREIgZnJvbSAnQHNyYy9mcmFtZXdvcmsvbG9jYWxEQic7XG5pbXBvcnQgUmVwb3NpdG9yaWVzQmFzZSBmcm9tICcuL2Jhc2UnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBSZXBvc2l0b3JpZXNNb2RlIGV4dGVuZHMgUmVwb3NpdG9yaWVzQmFzZSB7XG4gIGdldEluZGV4TGlzdChiYXRjaElkKSB7XG4gICAgdmFyIHNxbCA9IGBzZWxlY3Qgc2kuKiwgc2kuY2hlY2tpdGVtX25hbWUgYXMgbmFtZSxcblx0XHQoc2VsZWN0IGlkIGZyb20gY2hlY2txdWFsaXR5X3Byb2JsZW0gY3Agd2hlcmUgY3AuYml6X2lkID0gc2kuaWQgb3JkZXIgYnkgY3AuZG93bmxvYWRfdGltZSBkZXNjIGxpbWl0IDEpIGFzIHByb2JsZW1faWRcblx0XHRmcm9tIHNwZWNpYWxfaW5zcGVjdCBzaSBcblx0XHR3aGVyZSBzaS5iYXRjaF9pZCA9ICcke2JhdGNoSWR9JyBvcmRlciBieSBzaS5jaGVja2l0ZW1fY29kZWA7XG5cbiAgICByZXR1cm4gbG9jYWxEQi5xdWVyeShzcWwpO1xuICB9XG59XG4iLCIvKlxuICogQEF1dGhvcjogamlhbmdsMDJcbiAqIEBEYXRlOiAyMDIwLTEwLTEyIDExOjQxOjM5XG4gKiBATGFzdEVkaXRvcnM6IGppYW5nbDAyXG4gKiBATGFzdEVkaXRUaW1lOiAyMDIwLTEwLTEzIDE2OjMyOjU1XG4gKiBARGVzY3JpcHRpb246IOS4k+mhueW3oeajgO+8jFwi5ZCI5ZCM5beh5qOAXCIg5qih5p2/IHNlcnZpY2VcbiAqL1xuXG5pbXBvcnQgU2VydmljZUJhc2UgZnJvbSAnLi9iYXNlJztcbi8vIGltcG9ydCAqIGFzIENPTlNUIGZyb20gJy4uL2NvbnN0LmpzJztcbmltcG9ydCByb3V0ZXIgZnJvbSAnQHJvdXRlcic7XG5pbXBvcnQgeyBnZXRFbmRUb3RhbEJ5a2V5IH0gZnJvbSAnQGNvbW1vbi9kYXRhLWhhbmRsZSc7XG5pbXBvcnQgUG9wdXAgZnJvbSAnQHV0aWxzL3BvcHVwJztcbmltcG9ydCB7IFNUQVRVU19EUkFGVCB9IGZyb20gJ0B2aWV3cy9zcGVjaWFsLWluc3BlY3QtcmVkby9jb25zdCc7XG5pbXBvcnQgeyBEUkFGVCB9IGZyb20gJ0B2aWV3cy9zcGVjaWFsLWluc3BlY3QvamZrZi9jb25maWcnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBTZXJ2aWNlTW9kZSBleHRlbmRzIFNlcnZpY2VCYXNlIHtcbiAgLy8g5om55qyh5a6M5oiQ5qOA5p+l5qCh6aqMXG4gIC8vIGJhdGNoQ2hlY2soKSB7fVxuXG4gIC8qKlxuICAgKiBAZGVzY3JpcHRpb246IOacq+e6p+iKgueCueeCueWHu+S6i+S7tlxuICAgKiBAcGFyYW0ge3R5cGV9XG4gICAqIEByZXR1cm4geyp9XG4gICAqL1xuICBvbkNsaWNrRW5kTm9kZShpdGVtLCBiYXRjaCwgZWRpdGFibGUpIHtcbiAgICB0aGlzLnJvdXRlVG9FZGl0KGl0ZW0pO1xuICB9XG5cbiAgcm91dGVUb0VkaXQoaXRlbSkge1xuICAgIHRoaXMucm91dGVUb09sZFByb2JsZW1FZGl0KGl0ZW0pO1xuICB9XG5cbiAgcm91dGVUb1ZpZXcoaXRlbSkge1xuICAgIHRoaXMucm91dGVUb09sZFByb2JsZW1WaWV3KGl0ZW0pO1xuICB9XG5cbiAgLy8g6Lez5Yiw6ICB55qE6Zeu6aKY57yW6L6R6aG177yM5pqC5pe25pa55qGI77yM5ZCO6Z2i5Lya5bqf6ZmkXG4gIGFzeW5jIHJvdXRlVG9PbGRQcm9ibGVtRWRpdChpdGVtKSB7XG4gICAgbGV0IHNwZWNpYWxJbnNwZWN0SWQgPSBpdGVtICYmIGl0ZW0uaWQ7XG4gICAgbGV0IHF1ZXJ5RGF0YSA9IGF3YWl0IHRoaXMuZ2V0T2xkUm91dGVRdWVyeShzcGVjaWFsSW5zcGVjdElkKTtcbiAgICBsZXQgeyBiYXRjaF9pZCwgc3BlY2lhbF9pbnNwZWN0X2lkLCBjaGVja2l0ZW1faWQsIG1vZGUsIHJvb3RfaWQgfSA9IHF1ZXJ5RGF0YTtcbiAgICByb3V0ZXIucHVzaCh7XG4gICAgICBwYXRoOiAnL3NwZWNpYWwtaW5zcGVjdC1qZmtmLWVkaXQnLFxuICAgICAgcXVlcnk6IHtcbiAgICAgICAgYmF0Y2hJZDogYmF0Y2hfaWQsXG4gICAgICAgIHNwZWNpYWxJbnNwZWN0SWQ6IHNwZWNpYWxfaW5zcGVjdF9pZCxcbiAgICAgICAgY2hlY2tJdGVtSWQ6IGNoZWNraXRlbV9pZCxcbiAgICAgICAgbW9kZTogbW9kZSxcbiAgICAgICAgcm9vdElkOiByb290X2lkLFxuICAgICAgfSxcbiAgICB9KTtcbiAgfVxuICAvLyDot7PliLDogIHnmoTpl67popjor6bmg4XpobXvvIzmmoLml7bmlrnmoYjvvIzlkI7pnaLkvJrlup/pmaRcbiAgYXN5bmMgcm91dGVUb09sZFByb2JsZW1WaWV3KGl0ZW0pIHtcbiAgICBsZXQgc3BlY2lhbEluc3BlY3RJZCA9IGl0ZW0gJiYgaXRlbS5pZDtcbiAgICBsZXQgcXVlcnlEYXRhID0gYXdhaXQgdGhpcy5nZXRPbGRSb3V0ZVF1ZXJ5KHNwZWNpYWxJbnNwZWN0SWQpO1xuICAgIGxldCB7IHNwZWNpYWxfaW5zcGVjdF9pZCwgY2hlY2tpdGVtX2lkLCBtb2RlLCBwcm9ibGVtX2lkIH0gPSBxdWVyeURhdGE7XG5cbiAgICByb3V0ZXIucHVzaCh7XG4gICAgICBwYXRoOiAnL3NwZWNpYWwtaW5zcGVjdC1qZmtmLWVkaXQnLFxuICAgICAgcXVlcnk6IHtcbiAgICAgICAgc3BlY2lhbEluc3BlY3RJZDogc3BlY2lhbF9pbnNwZWN0X2lkLFxuICAgICAgICBwcm9ibGVtX2lkOiBwcm9ibGVtX2lkLFxuICAgICAgICBjaGVja0l0ZW1JZDogY2hlY2tpdGVtX2lkLFxuICAgICAgICBtb2RlOiBtb2RlLFxuICAgICAgfSxcbiAgICB9KTtcbiAgfVxuXG4gIC8qIOi3s+i9rOWIsOmXrumimOWIl+ihqCAqL1xuICBnb3RvUHJvYmxlbUxpc3QoYmF0Y2hJZCwgc3BlY2lhbEluc3BlY3RJZCwgcGxhY2VJZCkge1xuICAgIHRoaXMuZ290b09sZFByb2JsZW1MaXN0KHsgYmF0Y2hfaWQ6IGJhdGNoSWQsIG1vZGU6IDEwIH0pO1xuICB9XG4gIGFzeW5jIGZpbmlzaEJhdGNoQ29uZmlybShiYXRjaCwgbGlzdERhdGEsIHRyZWVEYXRhKSB7XG4gICAgbGV0IHN0YXR1c1RvdGFsID0gZ2V0RW5kVG90YWxCeWtleSh0cmVlRGF0YSwgJ3N0YXR1cycsIFtTVEFUVVNfRFJBRlRdKTtcbiAgICBsZXQgZHJhZnREYXRhID0gc3RhdHVzVG90YWxbU1RBVFVTX0RSQUZUXTtcbiAgICBpZiAoZHJhZnREYXRhID4gMCkge1xuICAgICAgbGV0IHJlc3VsdCA9IFBvcHVwLnBvcEJveCh7XG4gICAgICAgIHRpdGxlOlxuICAgICAgICAgICfmnIk8c3BhbiBjbGFzcz1cImNvbG9yLW9yYW5nZSBwbDUgcHI1XCI+JyArXG4gICAgICAgICAgZHJhZnREYXRhICtcbiAgICAgICAgICAnPC9zcGFuPumhueiNieeov+iusOW9leacquaPkOS6pO+8jOe7p+e7reaTjeS9nOWwhua4hemZpOaJgOacieaaguWtmOaVsOaNru+8jOaYr+WQpuato+W4uOaPkOS6pO+8nycsXG4gICAgICAgIGNhbmNlbFRleHQ6ICflj5bmtognLFxuICAgICAgICBva1RleHQ6ICfmj5DkuqQnLFxuICAgICAgfSk7XG4gICAgICBpZiAoIXJlc3VsdCkge1xuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gUG9wdXAuY29uZmlybSgn6K+356Gu5L+d5omA5pyJ5qOA5p+l5Lq65bey5LiK5Lyg5pWw5o2u77yM5o+Q5Lqk5ZCO5LiN5Y+v5L+u5pS577yM56Gu6K6k5o+Q5Lqk77yfJyk7XG4gIH1cbn1cbiJdLCJzb3VyY2VSb290IjoiIn0=