(window.webpackJsonp_module_entry_zjapp_=window.webpackJsonp_module_entry_zjapp_||[]).push([["chunk-e13219d8"],{"2e48":function(t,e,a){"use strict";a("f722")},"3a66":function(t,e,a){"use strict";a.r(e);a("6a61");var r,n=a("2e91"),o=(a("ed63"),a("8cf2"),a("cc57"),a("309f"),a("0b53"),a("07d2")),s=a("774b"),i=a("409e"),c=a("f7ab"),d=a("3e47"),l=(a("e2a7"),a("0f1f")),p=a("2137"),h=a("ef39"),u={components:{TemplateItem:h.a},props:{dataSource:{type:Array,default:function(){return[]}},pageLoading:{type:Boolean,default:!1}},data:function(){return{}}},f=(a("ceed"),a("17cc")),m=Object(f.a)(u,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"list-page-wrapper"},[this._l(this.dataSource,(function(t){return e("template-item",{key:t.id,attrs:{"data-source":t}})})),e("loading-status",{attrs:{"is-loading":this.pageLoading,"is-empty":0==this.dataSource.length,"empty-text":"暂无可查看文档"}})],2)}),[],!1,null,"1798de90",null).exports,g={components:{TemplateItem:h.a},props:{dataSource:{type:Array,default:function(){return[]}},keyword:{type:String,default:""},pageLoading:{type:Boolean,default:!1}},data:function(){return{}}},y=(a("2e48"),Object(f.a)(g,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"search-page-wrapper"},[t._l(t.dataSource,(function(e){return a("template-item",{key:e.id,attrs:{"data-source":e,keyword:t.keyword}})})),a("loading-status",{attrs:{type:"search","is-loading":t.pageLoading,"is-empty":0==t.dataSource.length,"empty-text":"未搜索到相关内容"}})],2)}),[],!1,null,"12e23ccd",null).exports),S=a("1b7e"),b={NAME_SORT:Symbol("1"),TIME_SORT_ASC:Symbol("2"),TIME_SORT_DESC:Symbol("3")},w=[{id:b.NAME_SORT,name:"按名称排序"},{id:b.TIME_SORT_ASC,name:"按时间升序"},{id:b.TIME_SORT_DESC,name:"按时间降序"}],_={name:"TemplateManage",components:{Item:o.default,Scroller:s.default,ProgressRound:i.a,SynchronizeTipBar:c.a,AppSearchBar:l.a,ListCon:m,SearchCon:y,DropDownSelectSingle:p.a},data:function(){return{searchStatus:!1,isLoading:!1,listConllection:[],isSecondary:!1,parentId:"",dirName:"",keyword:"",searchKeyword:"",name_sort:-1,mtime_sort:"",pageLoading:!1,hasNetwork:!0,sectionOptions:w,currentSection:w[0]}},computed:{hasList:function(){return!!this.listConllection.length},projId:function(){return this.$store.state.global.currentProject.id}},watch:{$route:{handler:function(t){t.name.indexOf("TemplateManage")>-1&&this.init()},immediate:!0}},activated:function(){this.$refs["app-search-bar"]&&(this.$refs["app-search-bar"].isSeaching=!1)},deactivated:function(){this.$refs["home-index-section-select"].closePopup()},methods:{init:function(){var t=this;this.parentId=this.$route.query.parentId||"",this.parentName=this.$route.query.parentName||"",this.keyword="",this.searchKeyword="",this.listConllection=[],d.a.fetchBimfaceSupported().then((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];t.$store.commit("templateManage/SET_SUPPORT_BIMFACE",e)})),this.$route.name.includes("TemplateManage")?(this.isSecondary=!1,this.getTemplateList()):(this.isSecondary=!0,this.getTemplateList())},getTemplateList:(r=Object(n.a)(regeneratorRuntime.mark((function t(){var e,a=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,S.a.getHasNetwork();case 2:if(this.hasNetwork=t.sent,this.hasNetwork){t.next=5;break}return t.abrupt("return");case 5:this.pageLoading=!0,e={projId:this.projId,parent_id:this.parentId,keywords:this.searchKeyword,name_sort:this.name_sort,mtime_sort:this.mtime_sort},d.a._getTemplateList(e).then((function(t){a.listConllection=t,a.pageLoading=!1}));case 8:case"end":return t.stop()}}),t,this)}))),function(){return r.apply(this,arguments)}),keywordChange:function(t){this.keyword=t,this.keyword||(this.searchKeyword="",this.getTemplateList())},onSearch:function(t){this.searchKeyword=t,this.getTemplateList()},onRefresh:function(){this.getTemplateList()},changeSearchStatus:function(t){this.searchStatus=t},toLocalPage:function(){this.$router.push("/template-local")},onSelectSection:function(t){var e=t.id;this.name_sort="",this.mtime_sort="",e===b.NAME_SORT&&(this.name_sort=-1),e===b.TIME_SORT_ASC&&(this.mtime_sort=-1),e===b.TIME_SORT_DESC&&(this.mtime_sort=1),this.currentSection=t,this.getTemplateList()}}},k=(a("7638"),Object(f.a)(_,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("page-content",{attrs:{title:t.parentName||"常用文档","show-go-root":t.isSecondary}},[a("div",{staticClass:"header-right-btns",attrs:{slot:"header-bar-right"},slot:"header-bar-right"},[a("icon",{staticClass:"header-btn local-template-icon",attrs:{name:"lixian"},on:{click:t.toLocalPage}}),a("drop-down-select-single",{ref:"home-index-section-select",attrs:{options:t.sectionOptions,selected:t.currentSection},on:{select:t.onSelectSection}},[a("icon",{staticClass:"header-btn local-template-icon sort",attrs:{name:"nav-sort"}})],1)],1),a("app-search-bar",{ref:"app-search-bar",attrs:{placeholder:"搜索",value:t.keyword},on:{changeSearchStatus:t.changeSearchStatus,search:t.onSearch,keywordChange:t.keywordChange}}),a("div",{staticClass:"border-block"}),a("synchronize-tip-bar",{attrs:{"automatic-update-callback":t.onRefresh}}),a("scroller",{attrs:{"is-empty":!t.hasList},on:{pullDown:t.onRefresh}},[t.hasNetwork&&t.searchKeyword?a("search-con",{attrs:{"data-source":t.listConllection,"page-loading":t.pageLoading,keyword:t.searchKeyword}}):t.hasNetwork?a("list-con",{attrs:{"data-source":t.listConllection,"page-loading":t.pageLoading}}):a("loading-status",{attrs:{type:"error","is-loading":!1,"is-empty":!0,"empty-text":"当前没有可用网络"}})],1)],1)}),[],!1,null,"775dc2f6",null));e.default=k.exports},4044:function(t,e,a){(t.exports=a("690e")(!1)).push([t.i,".zjapp .border-block[data-v-775dc2f6]{height:1px;border:none;background-image:linear-gradient(0deg,#dcdcdc,#dcdcdc 50%,transparent 0);background-size:100% 1px;background-repeat:no-repeat;background-position:bottom}.zjapp .header-right-btns[data-v-775dc2f6]{display:flex}.zjapp .header-right-btns[data-v-775dc2f6] .drop-down-select-single{margin:0 auto}.zjapp .local-template-icon[data-v-775dc2f6]{line-height:22px;font-size:20px}.zjapp .local-template-icon.sort[data-v-775dc2f6]{font-size:22px;position:relative;top:2px}",""])},6594:function(t,e,a){var r=a("b0da");"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);(0,a("85cb").default)("34b58a3a",r,!0,{sourceMap:!1,shadowMode:!1})},7638:function(t,e,a){"use strict";a("bb89")},"8b33":function(t,e,a){(t.exports=a("690e")(!1)).push([t.i,".zjapp .search-page-wrapper[data-v-12e23ccd]{flex:1}",""])},b0da:function(t,e,a){(t.exports=a("690e")(!1)).push([t.i,".zjapp .list-page-wrapper[data-v-1798de90]{flex:1}",""])},bb89:function(t,e,a){var r=a("4044");"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);(0,a("85cb").default)("ad263404",r,!0,{sourceMap:!1,shadowMode:!1})},ceed:function(t,e,a){"use strict";a("6594")},f722:function(t,e,a){var r=a("8b33");"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);(0,a("85cb").default)("6fff6315",r,!0,{sourceMap:!1,shadowMode:!1})}}]);