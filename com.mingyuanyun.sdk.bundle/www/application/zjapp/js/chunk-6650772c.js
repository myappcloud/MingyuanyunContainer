(window.webpackJsonp_module_entry_zjapp_=window.webpackJsonp_module_entry_zjapp_||[]).push([["chunk-6650772c"],{"175c":function(e,t,i){var a=i("e125");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);(0,i("85cb").default)("a767881e",a,!0,{sourceMap:!1,shadowMode:!1})},"197b":function(e,t,i){"use strict";i.r(t);var a=i("f2cf").a,o=(i("44fe"),i("17cc")),n=Object(o.a)(a,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("page-content",{attrs:{title:e.projectData.name,"on-close":e.backEvent}},[i("div",{attrs:{slot:"header-bar-right"},slot:"header-bar-right"},[e.projectData.parent_name||e.isLoading?e._e():i("star-ui",{attrs:{"is-follow":e.isFollow},on:{onClick:e.follow}}),2===e.tabIndex?i("icon",{staticClass:"header-btn",attrs:{name:"nav-info"},nativeOn:{click:function(t){e.dropInfo()}}}):e._e()],1),i("van-tabs",{attrs:{animated:"",swipeable:"","lazy-render":!1},model:{value:e.tabIndex,callback:function(t){e.tabIndex=t},expression:"tabIndex"}},[i("van-tab",{attrs:{title:"项目概况"}},[i("project-situation",{attrs:{"process-menu-actions":e.processMenuActions,"project-img":e.projectImg,"has-plan-quota":e.hasPlanQuota,"plan-quota-data":e.planQuotaData,"project-data":e.projectData,"user-projects":e.userProjects,"time-line":e.timeLine}})],1),i("van-tab",{attrs:{title:"进度管理"}},[i("schedule-manage",{ref:"scheduleManage",attrs:{"process-menu-actions":e.processMenuActions,"project-img":e.projectImg,"has-plan-quota":e.hasPlanQuota,"plan-quota-data":e.planQuotaData,"project-data":e.projectData,"user-projects":e.userProjects,"time-line":e.timeLine}})],1),i("van-tab",{attrs:{title:"现场管理"}},[i("site-management",{ref:"siteData",attrs:{"process-menu-actions":e.processMenuActions,"project-data":e.projectData,"user-projects":e.userProjects},on:{onGrayRelease:e.onGrayRelease,onShowProcessMenu:e.onShowProcessMenu}})],1)],1),i("van-action-sheet",{attrs:{actions:e.processMenuActions,"cancel-text":"取消","get-container":"body"},on:{cancel:function(t){e.showProcessMenu=!1},select:e.goPivotalProcess},model:{value:e.showProcessMenu,callback:function(t){e.showProcessMenu=t},expression:"showProcessMenu"}})],1)}),[],!1,null,"160fcea4",null);t.default=n.exports},"370d":function(e,t,i){(e.exports=i("690e")(!1)).push([e.i,'.zjapp .time-line-container[data-v-71cf711a]{position:relative;height:124px}.zjapp .time-line-wrapper[data-v-71cf711a]{overflow-y:scroll}.zjapp .time-point-bar[data-v-71cf711a]{position:absolute;z-index:2;top:31px;left:0;width:100%;height:2px;background-color:#f4f4f4}.zjapp .time-line[data-v-71cf711a]{display:inline-block;vertical-align:top;white-space:nowrap;padding:13px 15px 5px;padding-left:5px;font-size:0}.zjapp .time-text[data-v-71cf711a]{font-size:10px}.zjapp .time-line-item[data-v-71cf711a]{position:relative;display:inline-block;vertical-align:top;text-align:center;font-size:14px;padding-right:4px}.zjapp .time-point-name[data-v-71cf711a]{height:18px;font-size:13px;color:#8c8c8c;line-height:18px;margin-bottom:28px}.zjapp .time-point-icon[data-v-71cf711a]{position:absolute;z-index:3;top:29px;left:50%;height:6px;width:6px;margin-left:-3px;background-color:#c8c8c8;border-radius:50%}.zjapp .time-line-item-first .time-point-bar[data-v-71cf711a]{left:50%;width:50%}.zjapp .time-point-con[data-v-71cf711a]{height:20px;font-size:12px;color:#666;line-height:20px}.zjapp .project-detail-time-line[data-v-71cf711a]{background-color:transparent;margin-bottom:10px}.zjapp .color-black[data-v-71cf711a]{color:#333!important}.zjapp .bd[data-v-71cf711a]{padding:15px 0}.zjapp .time-point[data-v-71cf711a]{position:relative;height:85px;box-sizing:content-box}.zjapp .schedule-plan-collapse[data-v-71cf711a] .van-cell__title{position:relative;padding-left:12px;font-weight:700}.zjapp .schedule-plan-collapse[data-v-71cf711a] .van-cell__title:before{position:absolute;content:" ";width:4px;height:16px;background:#4275e8;top:3px;left:0}.zjapp .schedule-plan-collapse[data-v-71cf711a] .van-cell__label{margin-left:-12px;color:#999;font-weight:400}',""])},"3db7":function(e,t,i){"use strict";(function(e){i("cc57"),i("163d"),i("f548");var a=i("9a8c");t.a={name:"ThreeDBuilding",filters:{floorName:function(e){return e?e.replace("层","")+"层":""}},props:{type:{type:String,default:"process"},startRander:{type:Boolean,default:!1},buildingName:{type:String},floors:{type:Array,default:function(){return[]}},preSale:{type:Number,default:NaN},acceptData:{type:Object,default:function(){return{}}}},data:function(){return{show:!1,isProcess:!0,isAcceptV3:!1,height:"",preSaleTop:"",background:"",backgroundSize:"",finishedFloorNum:"",tier:"",tierTop:""}},computed:{buildingStyle:function(){return{background:this.background,"background-size":this.backgroundSize,height:this.height}}},watch:{startRander:function(e,t){var i=this;e&&(this.show=!1,console.log("初始化： watch"),this.$nextTick((function(){i.init()})))}},created:function(){var e=this;console.log("初始化： created"),this.show=!1,this.$nextTick((function(){e.init()}))},methods:{init:function(){var t=this,i=0,o="",n="",s=[];this.isProcess="process"===this.type,this.isAcceptV3="acceptV3"===this.type,this.height=5*this.floors.length+74+"px",e.each(this.floors,(function(e,r){if(e.complete&&(i+=1),e.color&&s.push(e),t.isProcess||t.isAcceptV3){var c=0===r?a.e:a.d;o+="url("+c[e.color||0]+") center "+(5+5*(r+1))+"px no-repeat,"}else{var l=0===r?a.b:a.a;o+="url("+l[2*!!e.complete+(Number(e.index)===t.preSale)]+") center "+(5+5*(r+1))+"px no-repeat,"}n+="54px,"})),this.preSaleTop=5*(this.floors.length-this.preSale)+23+"px",this.background="".concat(o,"url('").concat(a.c,"') center bottom no-repeat"),this.backgroundSize=n+"98px",this.finishedFloorNum=i;var r=(s[0]||{}).name;this.tier=r?r.replace("层","")+"层":"",this.tierTop=5*(this.floors.length-((s[0]||{}).index||0)-1)+15+"px",setTimeout((function(){t.show=!0}),200)}}}}).call(this,i("391c"))},4025:function(e,t,i){var a=i("370d");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);(0,i("85cb").default)("2a57238c",a,!0,{sourceMap:!1,shadowMode:!1})},"44fe":function(e,t,i){"use strict";i("75a2")},"480e":function(e,t,i){"use strict";var a=i("3db7").a,o=(i("bbe7"),i("17cc")),n=Object(o.a)(a,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.show?i("div",{staticClass:"three-d-building-wrap"},[i("div",{staticClass:"b-building",style:e.buildingStyle}),i("div",{staticClass:"b-name"},[e._v(e._s(e.buildingName))]),e.isProcess?e._e():i("div",{staticClass:"b-txt"},[e._v(e._s(e.finishedFloorNum)+"/"+e._s(e.floors.length))]),e.isProcess?i("div",{staticClass:"b-txt"},[e._v(e._s(e.floors.length)+"层")]):e._e(),i("div",{directives:[{name:"show",rawName:"v-show",value:e.isProcess&&(e.preSale||0===e.preSale),expression:"isProcess && (preSale || preSale === 0)"}],staticClass:"b-pre-sale",style:{top:e.preSaleTop}}),i("div",{directives:[{name:"show",rawName:"v-show",value:!e.isProcess&&(e.preSale||0===e.preSale),expression:"!isProcess && (preSale || preSale === 0)"}],staticClass:"b-pre-sale-accept",style:{top:e.preSaleTop}},[i("div",{staticClass:"pre-sale-line"}),i("div",{staticClass:"pre-sale-name"},[e._v(e._s(e._f("floorName")(e.acceptData.lineName)))])]),i("div",{directives:[{name:"show",rawName:"v-show",value:e.isProcess&&e.tier,expression:"isProcess && tier"}],staticClass:"b-tier",style:{top:e.tierTop}},[e._v(e._s(e.tier))]),i("div",{directives:[{name:"show",rawName:"v-show",value:!e.isProcess,expression:"!isProcess"}],staticClass:"b-tier"},[e._v(e._s(e._f("floorName")(e.acceptData.topFloorName)))])]):e._e()}),[],!1,null,"62833b01",null);t.a=n.exports},5332:function(e,t,i){var a=i("fc2a");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);(0,i("85cb").default)("51022505",a,!0,{sourceMap:!1,shadowMode:!1})},"75a2":function(e,t,i){var a=i("c445");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);(0,i("85cb").default)("a1a95d14",a,!0,{sourceMap:!1,shadowMode:!1})},"8edb":function(e,t,i){"use strict";i("3122");var a={name:"ProjectTimeline",components:{IonicScroller:i("11e8").a},props:{item:{type:Object,default:function(){}},isShow:{type:Boolean,default:!0}},data:function(){return{activeNames:["1"],viewSize:$rootScope.viewSize,timePointWidth:{a:"100%",r:"100%",l:"50%"},timePointLeft:{a:0,r:"50%",l:0},startX:0,startY:0}},computed:{},watch:{$rootScope:function(e){console.log("🚀 ~ file: schedule-plan.vue ~ line 162 ~ $rootScope ~ val",e)}},methods:{schedulePlan:function(e,t){this.$router.push({path:"schedule-plan/"+t.schedule_plan_id,query:{proj_id:e.proj_id,plan_id:t.schedule_plan_id}})},strat:function(e){this.startX=e.touches[0].pageX,this.startY=e.touches[0].pageY},end:function(e){e.stopPropagation()},move:function(e){var t=e.changedTouches[0].pageX,i=e.changedTouches[0].pageY,a=t-this.startX,o=i-this.startY;Math.abs(a)>Math.abs(o)&&a>0||Math.abs(a)>Math.abs(o)&&a<0?e.stopPropagation():Math.abs(o)>Math.abs(a)&&o<0||(Math.abs(o),Math.abs(a))}}},o=(i("b092"),i("17cc")),n=Object(o.a)(a,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"project-detail-time-line"},[i("van-collapse",{staticClass:"schedule-plan-collapse",model:{value:e.activeNames,callback:function(t){e.activeNames=t},expression:"activeNames"}},[i("van-collapse-item",{attrs:{title:"进度计划",name:"1"}},[e.item.schedule_plans&&e.item.schedule_plans.length?e._e():i("div",{staticClass:"bd time-point border-bottom",on:{touchmove:e.move,touchstart:e.strat}},[i("ionic-scroller",{staticClass:"time-line-wrapper",attrs:{"scrolling-x":!0,bouncing:!1,width:e.viewSize.width+""}},[i("div",{staticClass:"time-line"},e._l(e.item.times,(function(t,a){return i("div",{key:a,staticClass:"time-line-item",class:{"time-line-item-first":0===a}},[i("div",{staticClass:"time-point-name"},[e._v(e._s(t.title))]),i("div",{staticClass:"time-point-icon"}),i("div",{staticClass:"time-point-bar"}),i("div",{staticClass:"time-point-con time-text"},[e._v("\n                "+e._s(e._f("formatDate")(t.plan_date,"YY/MM/DD"))+"\n              ")])])})))])],1),e.item.schedule_plans&&e.item.schedule_plans.length?e._l(e.item.schedule_plans,(function(t){return i("div",{key:t.id,staticClass:"bd border-bottom needsclick",on:{click:function(i){e.schedulePlan(e.item,t)}}},[i("div",{staticClass:"bd-title"},[i("p",{staticClass:"bd-title-text",domProps:{textContent:e._s(t.schedule_plan_name)}}),t.timeout_views.level_1?i("div",{staticClass:"plan-warning-first",domProps:{textContent:e._s(t.timeout_views.level_1)}}):e._e(),t.timeout_views.level_2?i("div",{staticClass:"plan-warning-second",domProps:{textContent:e._s(t.timeout_views.level_2)}}):e._e()]),i("div",{staticClass:"time-line-container needsclick",on:{touchmove:e.move,touchstart:e.strat}},[i("ionic-scroller",{staticClass:"time-line-wrapper",attrs:{"scrolling-x":!0,bouncing:!1,width:"100%"}},[i("div",{staticClass:"time-line"},[i("div",{staticClass:"time-line-slide"},[i("div",{staticClass:"time-point-name"})]),e._l(t.details,(function(t,a){return i("div",{key:t.id,staticClass:"time-line-item",class:{"time-line-item-first":0===a}},[i("div",{staticClass:"time-point-name",class:{"color-text":"pending"===t.node_status,"color-black":"pending"!==t.node_status},domProps:{textContent:e._s(t.schedule_plan_detail_name)}}),i("div",{staticClass:"time-point-icon",class:t.node_status},["finish"===t.node_status?i("icon",{attrs:{name:"qualified"}}):e._e()],1),i("div",{staticClass:"time-point-bar"},[i("div",{staticClass:"time-point-fill",style:{width:e.timePointWidth[t.bar_status],left:e.timePointLeft[t.bar_status]}})]),i("div",{staticClass:"time-point-con time-text"},[e._v("\n                    "+e._s(e._f("formatDate")(t.deadline.slice(0,10),"YY/MM/DD"))+"\n                  ")]),i("div",{staticClass:"time-point-con time-text"},[e._v("\n                    "+e._s(e._f("formatDate")(t.complate_show,"YY/MM/DD"))+"\n                  ")]),i("div",{staticClass:"time-point-level",class:{"time-point-level-1":"1级"===t.level&&t.isTimeout&&"已完成"!==t.status&&!t.complete_time,"time-point-level-2":"2级"===t.level&&t.isTimeout&&"已完成"!==t.status&&!t.complete_time,"time-complate-level":t.isTimeout&&"已完成"===t.status&&t.complete_time},domProps:{textContent:e._s(t.schedule_node_level_value)}})])}))],2)])],1)])})):e._e()],2)],1)],1)}),[],!1,null,"71cf711a",null);t.a=n.exports},9251:function(e,t,i){var a=i("fb68"),o=i("f71f").onFreeze;i("f0cc")("freeze",(function(e){return function(t){return e&&a(t)?e(o(t)):t}}))},"9a8c":function(e,t,i){"use strict";i.d(t,"d",(function(){return a})),i.d(t,"e",(function(){return o})),i.d(t,"a",(function(){return n})),i.d(t,"b",(function(){return s})),i.d(t,"c",(function(){return r}));var a=["static/report/floor-empty.png","static/report/floor-blue.png","static/report/floor-green.png","static/report/floor-yellow.png","static/report/floor-red.png","static/report/floor-purple.png","static/report/floor-orange.png"],o=["static/report/floor-empty.png","static/report/floor-blue-top.png","static/report/floor-green-top.png","static/report/floor-yellow-top.png","static/report/floor-red-top.png","static/report/floor-purple-top.png","static/report/floor-orange-top.png"],n=["static/report/floor-empty.png","static/report/floor-blue.png","static/report/floor-green.png","static/report/floor-purple.png"],s=["static/report/floor-empty.png","static/report/floor-blue-top.png","static/report/floor-green-top.png","static/report/floor-purple-top.png"],r="static/report/floor-ground.png"},ad0c:function(e,t){e.exports="data:image/png;base64,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"},b092:function(e,t,i){"use strict";i("4025")},b37f:function(e,t,i){"use strict";i("175c")},b9cd:function(e,t,i){"use strict";i.d(t,"b",(function(){return a})),i.d(t,"d",(function(){return o})),i.d(t,"c",(function(){return n})),i.d(t,"a",(function(){return s}));var a={IMAGE:"image",NUMBER:"number",TEXT:"text",DATE:"date",RADIO:"radio",DATETIME:"datetime"},o={CONSTRUCTION:31,SUPERVISING:32,DEVELOPMENT:33},n={ROAD_WORK:1,OTHER:0},s={V1:"accept",V3:"acceptV3"}},bbe7:function(e,t,i){"use strict";i("5332")},c445:function(e,t,i){(e.exports=i("690e")(!1)).push([e.i,".zjapp .active[data-v-160fcea4]{background:#f2f2f2;z-index:10}.zjapp .header-btn[data-v-160fcea4]{font-size:20px}",""])},d602:function(e,t){e.exports="data:image/png;base64,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"},e125:function(e,t,i){(e.exports=i("690e")(!1)).push([e.i,'.zjapp .scroll-warp[data-v-18f85a42]{height:100%}.zjapp .pivotal-process-box[data-v-18f85a42]{background:#fff;padding:0 0 12px 0}.zjapp .pivotal-process-box>.title[data-v-18f85a42]{position:relative;display:flex;align-items:center;justify-content:space-between;height:46px;line-height:46px;font-size:16px;font-weight:700;padding:0 15px 0 27px;color:#333}.zjapp .pivotal-process-box>.title[data-v-18f85a42]:before{content:"";position:absolute;left:15px;top:15px;width:4px;height:16px;background:#4275e8}.zjapp .pivotal-process-box>.title>a[data-v-18f85a42]{font-size:14px;font-weight:400;color:#4275e8}.zjapp .pivotal-process-box>.title>a.disabled[data-v-18f85a42]{color:#8c8c8c;pointer-events:none}.zjapp .pivotal-process-box .empty-tips[data-v-18f85a42]{margin-top:-4px;padding-left:15px;color:#999}.zjapp .pivotal-process-box .process-name[data-v-18f85a42]{display:flex;align-items:center;justify-content:space-between;height:40px;line-height:40px;background-color:#ebf1ff;font-weight:400;padding:0 15px;font-size:14px;color:#333}.zjapp .pivotal-process-box .process-name .text[data-v-18f85a42]{flex:1;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.zjapp .pivotal-process-box .process-name .icon-nav-filter[data-v-18f85a42]{color:#c8c8c8;font-size:18px}.zjapp .pivotal-process-box .color-tags[data-v-18f85a42]{display:flex;height:38px;line-height:38px;justify-content:space-between;padding:0 15px;background-color:#fafafa}.zjapp .pivotal-process-box .color-tags.v3[data-v-18f85a42]{justify-content:flex-start}.zjapp .pivotal-process-box .color-tags.v3>div[data-v-18f85a42]{margin:0 40px 0 0}.zjapp .pivotal-process-box .color-tags>div[data-v-18f85a42]{position:relative;padding:0 0 0 20px}.zjapp .pivotal-process-box .color-tags>div[data-v-18f85a42]:before{position:absolute;content:"";width:15px;height:10px;left:0;top:13px}.zjapp .pivotal-process-box .color-tags .blue[data-v-18f85a42]:before{background:#98b8ff}.zjapp .pivotal-process-box .color-tags .green[data-v-18f85a42]:before{background:#48d58d}.zjapp .pivotal-process-box .color-tags .purple[data-v-18f85a42]:before{background:#8e81ff}.zjapp .building-box[data-v-18f85a42]{height:100%;overflow:auto;background-color:#fff;padding-bottom:20px;margin-bottom:20px}.zjapp .building-box .section[data-v-18f85a42]{padding-top:15px;overflow:hidden}.zjapp .building-box .section .title[data-v-18f85a42]{padding-left:15px;position:relative}.zjapp .building-box .section .title p[data-v-18f85a42]{font-size:14px;line-height:1.4}.zjapp .building-box .b-table[data-v-18f85a42]{font-size:0;margin:auto 15px}.zjapp .building-box .b-table .b-cell[data-v-18f85a42]{width:33.33%;display:inline-block;vertical-align:bottom}.zjapp .building-box .b-table .b-cell::nth-child(3n+2)>div[data-v-18f85a42]{margin:auto}.zjapp .building-box .b-table .b-cell::nth-child(3n+3)>div[data-v-18f85a42]{margin-left:auto}.zjapp .check-item-sheet[data-v-18f85a42] .van-action-sheet__header .van-icon{display:none}.zjapp .check-item-sheet[data-v-18f85a42] .van-action-sheet__content{height:40vh;overflow:auto}.zjapp .check-item-sheet[data-v-18f85a42] .van-action-sheet__content .van-cell{padding:11px 16px}.zjapp .check-item-sheet[data-v-18f85a42] .van-action-sheet__content .van-radio{justify-content:flex-end}.zjapp .check-item-sheet[data-v-18f85a42] .van-action-sheet__content .van-radio__icon .van-icon{display:inline-block}.zjapp .check-item-sheet[data-v-18f85a42] .van-action-sheet__content .van-cell__value{flex:0 0 40px}',""])},e191:function(e,t,i){"use strict";var a=i("f86a").a,o=(i("b37f"),i("17cc")),n=Object(o.a)(a,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{style:{height:e.viewSize.contentHeight+"px"}},[!e.isLoading&&e.isHasNetwork?i("scroller",[e.isLoading?e._e():i("div",{staticClass:"swipe-wrap"},[e._l(e.timeLine,(function(e,t){return i("schedule-plan",{key:t,attrs:{item:e}})})),e.show3DBuilding?i("div",{staticClass:"pivotal-process-box"},[i("div",{staticClass:"title",class:{"van-hairline--bottom":!e.isEmptySectionList}},[i("div",[e._v("\n            关键工序进度\n            "),i("icon",{staticStyle:{color:"#C8C8C8"},attrs:{name:"yiwen"},on:{click:e.tips}})],1)]),e.isEmptySectionList?i("p",{staticClass:"empty-tips"},[e._v("PC端检查项未设关键工序")]):e._e(),e.isEmptySectionList?e._e():i("div",{staticClass:"process-name"},[i("div",{staticClass:"text"},[e._v("\n            "+e._s(e.checkItemSelected.name)+"\n          ")]),i("icon",{attrs:{name:"nav-filter"},on:{click:function(t){e.showCheckItem=!0}}})],1),e.isEmptySectionList?e._e():i("div",{staticClass:"color-tags",class:{v3:e.show3DBuilding===e.BUILDING_DATA_TYPE_ENUM.V3}},[e.show3DBuilding===e.BUILDING_DATA_TYPE_ENUM.V1?i("div",{staticClass:"blue"},[e._v("预售楼层未验收")]):e._e(),e.show3DBuilding===e.BUILDING_DATA_TYPE_ENUM.V3?i("div",{staticClass:"blue"},[e._v("已报验")]):e._e(),e.show3DBuilding===e.BUILDING_DATA_TYPE_ENUM.V1?i("div",{staticClass:"purple"},[e._v("预售楼层已验收")]):e._e(),e.show3DBuilding===e.BUILDING_DATA_TYPE_ENUM.V1?i("div",{staticClass:"green"},[e._v("完成楼层")]):e._e(),e.show3DBuilding===e.BUILDING_DATA_TYPE_ENUM.V3?i("div",{staticClass:"green"},[e._v("已验收")]):e._e(),e.show3DBuilding===e.BUILDING_DATA_TYPE_ENUM.V3?i("div",{staticClass:"purple"},[e._v("已抽验")]):e._e()]),e.isEmptySectionList?e._e():i("div",{staticClass:"building-box"},e._l(e.sectionList,(function(t,a){return i("div",{key:a,staticClass:"section"},[i("div",{staticClass:"title"},[i("p",[e._v(e._s(t.section_name))])]),i("section",{staticClass:"b-table"},e._l(t.builds,(function(a,o){return i("div",{key:o,staticClass:"b-cell",on:{click:function(i){e.goReport(t,a)}}},[i("three-d-building",{attrs:{type:e.show3DBuilding,"start-rander":e.startRander,"building-name":a.building_name,floors:a.floors,"pre-sale":a.pre_sale_line,"hide-title-style":!0,"accept-data":{lineName:a.pre_sale_line_name,topFloorName:a.top_floor_name}}})],1)})))])})))]):e._e()],2),i("van-action-sheet",{staticClass:"check-item-sheet",attrs:{"get-container":"body",title:"检查项",round:""},model:{value:e.showCheckItem,callback:function(t){e.showCheckItem=t},expression:"showCheckItem"}},[i("van-radio-group",{model:{value:e.radio,callback:function(t){e.radio=t},expression:"radio"}},[i("van-cell-group",e._l(e.checkItemList,(function(t,a){return i("van-cell",{key:a,attrs:{title:t.name,clickable:""},on:{click:function(i){e.selectedCheckItem(t)}}},[[i("van-radio",{attrs:{name:t.item_id}})]],2)})))],1)],1)],1):e._e(),i("loading-status",{attrs:{"is-loading":e.isLoading,"is-empty":!e.isHasNetwork,"empty-text":"当前无网络连接",type:"error"}})],1)}),[],!1,null,"18f85a42",null);t.a=n.exports},f2cf:function(e,t,i){"use strict";(function(e){i("cc57"),i("6a61");var a,o=i("2e91"),n=(i("f548"),i("e2a7")),s=i("6718"),r=i("6bf2"),c=i.n(r),l=(i("4360"),i("1b7e"),i("162a")),p=i("c656"),d=i("07d2"),u=i("2cc7"),f=i("e191"),h=i("0c00"),m=i("9967"),g=i("3715"),b=i("fc08"),v=i("04f3");i("6144"),i("bc69");t.a={components:{Item:d.default,SwipeTabs:s.b,SwipeTab:s.a,SiteManagement:u.a,ProjectSituation:h.a,ScheduleManage:f.a,StarUi:function(){return i.e("chunk-3fae4ada").then(i.bind(null,"8e32"))}},data:function(){return{isLoading:!0,tabIndex:0,processMenuActions:[],projectImg:{index:0,list:[]},hasPlanQuota:!1,planQuotaData:{},projectData:{},userProjects:[],timeLine:[],isFollow:!1,grayRelease:{},showProcessMenu:!1,prevRouter:"",backButtonEvent:null}},computed:{tabsWidth:function(){return window.innerWidth/3},projectSelected:function(){return this.$store.state.global.currentProject}},activated:function(){this.$router.isBack||(this.showProcessMenu=!1,this.isLoading=!0,this.init())},methods:{backEvent:function(){this.prevRouter?this.$router.replace(this.prevRouter,!0):this.$router.go(-1),this.backButtonEvent&&(Object(v.c)(this.backButtonEvent),this.backButtonEvent=null)},follow:(a=Object(o.a)(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log(this.projectData),this.projectData&&this.projectData.proj_id){e.next=3;break}return e.abrupt("return");case 3:if(!(t=!this.isFollow)){e.next=10;break}return e.next=7,b.a.add({id:this.projectData.proj_id,name:this.projectData.name,corp_name:this.projectData.corp_name,sort_by:this.projectData.code,is_end:1});case 7:n.a.alert("关注成功"),e.next=13;break;case 10:return e.next=12,b.a.remove(this.projectData.proj_id);case 12:n.a.alert("取消关注");case 13:this.isFollow=t;case 14:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)}),init:function(){var e=this;p.a.getPivotalProcessModules().then((function(t){console.log("processMenuActions",t),e.processMenuActions=t}));var t=this.$route.query,i=t.proj_id,a=t.tabIndex,o=t.prevRouter;this.tabIndex=a||0,this.prevRouter=o,o&&(this.backButtonEvent=Object(v.a)(this.backEvent)),this.loadProjectDetail(i).then((function(t){b.a.isFollow(i).then((function(t){return e.isFollow=t}))}))},loadProjectDetail:function(t){var i=this;return l.a.request("/project-map/detail",{projID:t}).then((function(t){var a=JSON.parse(t.img_url||"[]");i.projectImg.list=e.map(a,(function(e){return{name:e.file_name.replace(/(\.jpg)|(\.gif)|(\.png)|(\.jpeg)$/,""),img:e.img_url}})),i.projectData=t,i.planQuotaData=e.isEmpty(t.property)?{}:t.property,i.hasPlanQuota=!e.isEmpty(i.planQuotaData),i.timeLine=[],t.schedule_plans&&t.schedule_plans.length&&e.each(t.schedule_plans,(function(t){e.each(t.details,(function(e,i){var a,o,n,s,r;e.node_status="已完成"===e.status?"finish":"1"===e.has_report?"doing":"pending","finish"!==e.node_status&&"doing"!==e.node_status||i&&"finish"===t.details[i-1].node_status&&(i===t.details.length-1?e.bar_status="a":e.bar_status="l","l"===t.details[i-1].bar_status?t.details[i-1].bar_status="a":t.details[i-1].bar_status=1===i?"a":"r"),e.complate_show="","已完成"===e.status&&e.complete_time?(a=Object(g.b)(e.deadline).getTime(),o=Object(g.b)(e.complete_time).getTime(),e.complate_show=c()(e.complete_time).format("YYYY-MM-DD"),e.isTimeout=a<o):e.deadline&&((a=Object(g.b)(e.deadline).getTime())<(n=(new Date).getTime())?(e.isTimeout=!0,s=Math.floor((n-a)/864e5),e.complate_show=s?"超时"+s+"天":"今天"):(e.isTimeout=!1,(r=Math.ceil((a-n)/864e5))<=7&&(e.complate_show="还剩"+r+"天")))}))})),i.timeLine=[{name:t.name?t.name.replace(t.parent_name+"-",""):"",has_cameral:t.has_cameral,proj_id:t.proj_id,times:t.node_list,schedule_plans:t.schedule_plans}],i.projectImg.index=0})).then((function(){i.getUserProj()})).finally((function(){i.isLoading=!1}))},getUserProj:function(){var e=this;return p.a.getUserProjects().then((function(t){e.userProjects=t}))},dropInfo:function(){m.a.openPopup(this.grayRelease)},onGrayRelease:function(){var e=this.$refs.siteData;this.grayRelease={isHasProcessAccept:e.isHasProcessAccept,isHasProcessAcceptV2:e.isHasProcessAcceptV2,isHasProcessAcceptV3:e.isHasProcessAcceptV3,isHasProcessCheck:e.isHasProcessCheck,isHasCheck:e.isHasCheck,isHasProblemSecure:e.isHasProblemSecure}},onShowProcessMenu:function(){this.showProcessMenu=!0},goPivotalProcess:function(e){this.projectData;"pile"!==e.type?this.projectData.proj_id&&this.$router.push({name:"PivotalProcessIndex",query:{projId:this.projectData.proj_id,type:e.type}}):this.$router.push({name:"ReportPileAcceptList",query:{projId:this.projectData.proj_id}})}}}}).call(this,i("391c"))},f86a:function(e,t,i){"use strict";(function(e){i("e204"),i("e697");var a,o=i("28f8"),n=(i("f548"),i("6a61"),i("2e91")),s=(i("9251"),i("fd50"),i("6bf2"),i("1b7e")),r=i("162a"),c=i("e2a7"),l=i("7a10"),p=i("8edb"),d=i("774b"),u=i("480e"),f=i("11e8"),h=i("6144"),m=i("bc69"),g=i("b9cd");i("4ad6");t.a={components:{Scroller:d.default,PlanQuota:l.a,SchedulePlan:p.a,ThreeDBuilding:u.a,IonicScroller:f.a},props:{processMenuActions:{type:Array,default:function(){return[]}},hasPlanQuota:{type:Boolean,default:!1},planQuotaData:{type:Object,default:function(){}},projectData:{type:Object,default:function(){}},userProjects:{type:Array,default:function(){return[]}},timeLine:{type:Array,default:function(){return[]}}},data:function(){return{isLoading:!0,project:{selected:{},list:[]},projId:"",viewSize:$rootScope.viewSize,sectionList:[],showCheckItem:!1,checkItemList:[],checkItemSelected:{},startRander:!1,isHasNetwork:!0,BUILDING_DATA_TYPE_ENUM:Object.freeze(g.a)}},computed:{show3DBuilding:function(){var t=e.some(this.processMenuActions,(function(e){return"processAccept"===e.type}))?g.a.V1:"";return(1===this.$store.state.global.allGrayRelease.ProcessAcceptV3?g.a.V3:"")||t||""},checkDefaultLocalKey:function(){return"".concat(m.a.IMPORTANT_ACCEPT_CHECK_DEFAULT,"-").concat(this.show3DBuilding,"-").concat(this.projId)},radio:{get:function(){return this.checkItemSelected.item_id},set:function(){}},isEmptySectionList:function(){return!this.sectionList.length}},watch:{processMenuActions:function(t){e.isEmpty(t)||this.init()}},methods:{init:function(){var e=this;return this.projId=this.$route.query.proj_id,this.isLoading=!0,this.checkItemSelected={},this.checkItemList=[],this.sectionList=[],this.emptyTips="",s.a.getHasNetwork().then((function(t){t?(e.isHasNetwork=!0,e.loadData()):(e.isLoading=!1,e.isHasNetwork=!1)})).finally((function(){e.isLoading=!1}))},loadData:(a=Object(n.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getCheckItemList();case 2:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)}),goReport:function(t,i){var a=[];e.each(t.buildings,(function(e){i.building_id===e.building_id&&a.push({id:e.unit,name:e.unit.replace("单元","")+"单元"})}));var n={proj_id:this.projId,section_id:t.section_id,floor:"[]",building_id:i.building_id,unit:(a[0]||{}).id,building_title:i.building_name,type:3};console.log({query:n});var s=Object(o.a)({},g.a.V3,"ReportProcessAcceptProcessV3")[this.show3DBuilding]||"ReportProcessAcceptProcess";this.$router.push({name:s,query:n})},getCheckItemList:function(){var t,i=this;this.startRander=!1;var a=(t={},Object(o.a)(t,g.a.V1,"/project-map/crucial-process-accept"),Object(o.a)(t,g.a.V3,"/project-map/get-crucial-by-process-accept-v3"),t)[this.show3DBuilding];a&&r.a.request(a,{projID:this.projId}).then((function(t){if(i.checkItemList=t,t.length){var a=h.a.getObject(i.checkDefaultLocalKey,h.a.level.user)||{};e.isEmpty(a)?(i.checkItemSelected=i.checkItemList[0],h.a.saveObject(i.checkDefaultLocalKey,i.checkItemSelected,h.a.level.user)):i.checkItemSelected=e.find(t,(function(e){return e.item_id===a.item_id}))||t[0]}})).then((function(){console.log("this.checkItemSelected",i.checkItemSelected),e.isEmpty(i.checkItemSelected)?i.isLoading=!1:i.getBuildingList()}))},getBuildingList:function(){var t=this;if(this.show3DBuilding===g.a.V3)return this.getV3BuildingList();var i={projID:this.projId,itemID:this.checkItemSelected.item_id};r.a.request("/project-map/process-accept",i).then((function(i){var a={},o=i.processAccept;e.each(i.floors,(function(e){a[e.bid_id]||(a[e.bid_id]={id:e.bid_id,section_id:e.bid_id,section_name:e.bid_name,buildings:{}}),a[e.bid_id].buildings[e.bld_id+"-"+e.unit_name]||(a[e.bid_id].buildings[e.bld_id+"-"+e.unit_name]={building_id:e.bld_id,building_name:e.bld_name,floor:0,floors:[],floor_order:0,new_data_count:0,total_floor:e.floor_num,top_floor_name:e.top_floor_name||"",unit:e.unit_name,pre_sale_line:e.pre_sale_line,pre_sale_line_name:e.pre_sale_line_name||""})})),e.each(o,(function(t){var i;a[t.bidsection_id]&&("1"===t.process_mode||"5"===t.process_mode?a[t.bidsection_id].buildings[t.building_id+"-"+t.unit]&&!1!==t.real_floor_index&&null!==t.real_floor_index&&(a[t.bidsection_id].buildings[t.building_id+"-"+t.unit].floors.push({index:t.real_floor_index,name:t.floor,complete:!0,color:""}),a[t.bidsection_id].buildings[t.building_id+"-"+t.unit].floor_order<t.real_floor_index+1&&(a[t.bidsection_id].buildings[t.building_id+"-"+t.unit].floor_order=t.real_floor_index+1,a[t.bidsection_id].buildings[t.building_id+"-"+t.unit].floor=t.floor)):"2"===t.process_mode?(i=e.filter(a[t.bidsection_id].buildings,(function(e){return e.building_id===t.building_id})),e.each(i,(function(e){e.floors.push({index:t.real_floor_index,name:t.floor,complete:!0,color:""}),e.floor_order<t.real_floor_index+1&&(e.floor_order=t.real_floor_index+1,e.floor=t.floor)}))):"3"===t.process_mode&&(i=e.filter(a[t.bidsection_id].buildings,(function(e){return e.building_id===t.building_id})),e.each(i,(function(e){e.floors=[],e.floor_order=e.total_floor,e.floor=e.total_floor;for(var t=0;t<parseInt(e.total_floor);t++)e.floors.push({index:t,name:t,complete:!0,color:""})}))))}));var n=[];e.each(a,(function(t){var i=[];e.each(t.buildings,(function(t){for(var a=0;a<parseInt(t.total_floor);a++)e.some(t.floors,{index:a})||t.floors.push({index:a,name:a,complete:!1});t.floors=e.uniqBy(t.floors,(function(e){return e.index})),t.floors=e.sortBy(t.floors,(function(e){return-e.index})),i.push(t)})),n.push({id:t.id,section_id:t.section_id,section_name:t.section_name,buildings:i})})),e.each(n,(function(t){var i=e.groupBy(t.buildings,"building_id");t.builds=[],e.each(i,(function(i,a){if(i.length>1){var o={unitIndex:-1,index:-1};e.each(i,(function(t,i){var a=e.find(t.floors,(function(e){if(e.complete)return!0}));a&&a.index>o.index&&((o=a).unitIndex=i)})),t.builds.push(i[Math.max(0,o.unitIndex)])}else t.builds.push(i[0])}))})),t.sectionList=n})).finally((function(){t.isLoading=!1,t.startRander=!0,console.log("this.sectionList",t.sectionList)}))},getV3BuildingList:function(){var t=this,i={projID:this.projId,itemID:this.checkItemSelected.item_id,processMode:this.checkItemSelected.process_mode};r.a.request("/project-map/3d-building-by-process-accept-v3",i).then((function(i){var a={"":0,"已报验":1,"已验收":2,"已抽验":5};e.each(i,(function(t){t.section_id=t.bidsection_id,t.section_name=t.bidsection_name,e.each(t.building_info,(function(t){e.each(t.floor_info,(function(e,i){e.complete=!!e.status,e.index=t.floor_info.length-i-1,e.name=e.floor,e.color=a[e.status]}));var i=e.find(t.floor_info,(function(e){return e.pre_sale_line}))||{},o=e.findIndex(t.floor_info,{pre_sale_line:!0});t.pre_sale_line=-1===o?NaN:t.floor_info.length-o-1,t.pre_sale_line_name=i.floor,t.top_floor_name=(t.floor_info[0]||{}).floor,t.total_floor=t.floor_info.length,t.floors=t.floor_info})),t.builds=t.building_info})),t.sectionList=i})).catch((function(e){console.error(e)})).finally((function(){t.isLoading=!1,t.startRander=!0,console.log("this.sectionList",t.sectionList)}))},selectedCheckItem:function(e){this.checkItemSelected=e,h.a.saveObject(this.checkDefaultLocalKey,this.checkItemSelected,h.a.level.user),this.showCheckItem=!1,this.startRander=!1,this.getBuildingList()},tips:function(){var e="";this.show3DBuilding===g.a.V3?e="1、关键工序：后台检查项中设置的关键工序（即星标点亮的末级检查项），不含部位划分为“自定义检验批”的工序。\n2、已报验：如果按楼栋验收，则楼栋已报验时所有楼层都视为已报验；如果按分单元整层验收，则任一单元对应的楼层已报验则视为已报验；如果是分户验收，则楼层中的任一房间报验后则视为已报验。\n3、已验收：如果按楼栋验收，则楼栋已验收时所有楼层都视为已验收；如果按分单元整层验收，则所有单元中的对应楼层验收后才视为已验收；如果是分户验收，则楼层中的所有房间都验收后才视为已验收。\n4、已抽验：如果按楼栋验收，则楼栋已抽验时所有楼层都视为已抽验；如果按分单元整层验收，则任一单元对应的楼层已抽验则视为已抽验；如果是分户验收，则楼层中的任一房间抽验后则视为已抽验。\n5、状态显示优先级——已抽验>已验收>已报验；验收流程完结才会视为已验收，已报验待验收或验收中的不视为已验收。":this.show3DBuilding===g.a.V1&&(e="1、关键工序：后台检查项中设置的关键工序（即星标点亮的末级检查项）\n2、完成楼层：如果按楼栋验收，则楼栋已验收时所有楼层都视为已验收；如果按分单元整层验收，则任一单元中的对应楼层验收后才视为已验收；如果是分户验收，则楼层中的任一房间都验收后才视为已验收。\n3、提交过任一张验收照片即视为已验收。"),e&&c.a.notify(e,{buttonName:"知道了",className:"message-notify-dialog"})}}}}).call(this,i("391c"))},fc2a:function(e,t,i){var a=i("5454");(e.exports=i("690e")(!1)).push([e.i,".zjapp .three-d-building-wrap[data-v-62833b01]{position:relative;text-align:center;width:98px}.zjapp .three-d-building-wrap .b-building[data-v-62833b01]{width:100%}.zjapp .three-d-building-wrap .b-name[data-v-62833b01]{font-size:14px;color:#111;line-height:2;margin-top:-15px;overflow:hidden;width:100%;text-overflow:ellipsis;white-space:nowrap}.zjapp .three-d-building-wrap .b-txt[data-v-62833b01]{font-size:12px;color:#8c8c8c}.zjapp .three-d-building-wrap .b-pre-sale[data-v-62833b01]{position:absolute;width:45px;height:15px;top:25px;right:-10px;background:url("+a(i("ad0c"))+") 50% no-repeat;background-size:cover}.zjapp .three-d-building-wrap .b-pre-sale-accept[data-v-62833b01]{position:absolute;display:flex;top:25px;left:58px}.zjapp .three-d-building-wrap .b-pre-sale-accept .pre-sale-line[data-v-62833b01]{width:24px;height:15px;background:url("+a(i("d602"))+') 50% no-repeat;background-size:cover}.zjapp .three-d-building-wrap .b-pre-sale-accept .pre-sale-name[data-v-62833b01]{width:35px;font-size:12px;text-align:left;margin:-8px 0 0 -2px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;transform:scale(.8)}.zjapp .three-d-building-wrap .b-tier[data-v-62833b01]{position:absolute;min-width:22px;max-width:54px;height:15px;line-height:15px;padding:0 2px;top:10px;left:50%;transform:translateX(-50%);color:#fff;font-size:9px;text-align:center;border-radius:2px;background:#000;opacity:.6;white-space:nowrap;z-index:99999}.zjapp .three-d-building-wrap .b-tier[data-v-62833b01]:before{content:"";position:absolute;height:0;width:0;overflow:hidden;bottom:-4px;left:50%;transform:translateX(-50%);border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid #000}',""])}}]);