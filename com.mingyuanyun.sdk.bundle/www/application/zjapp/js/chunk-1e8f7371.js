(window.webpackJsonp_module_entry_zjapp_=window.webpackJsonp_module_entry_zjapp_||[]).push([["chunk-1e8f7371","chunk-739f37c8"],{"0748":function(t,e,i){"use strict";i("3cc7")},"0c52":function(t,e,i){(t.exports=i("690e")(!1)).push([t.i,".zjapp .app-stepper[data-v-03df57b7]{display:inline-block;width:110px;height:34px;margin:-2px 0;white-space:nowrap;font-size:0;line-height:0;vertical-align:top}.zjapp .app-stepper .number-input[data-v-03df57b7]{width:51px;height:34px;border:1px solid #dcdcdc;border-radius:0;font-size:14px;text-align:center;background-color:#fff;color:#111;box-sizing:border-box}.zjapp .app-stepper .number-input-focus[data-v-03df57b7]{border-color:#4275e8}.zjapp .btn-add[data-v-03df57b7],.zjapp .btn-minus[data-v-03df57b7]{display:inline-block;width:28px;height:34px;line-height:34px;padding:0;border:1px solid #dcdcdc;color:#666;text-align:center;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;box-sizing:border-box;background-color:#fff}.zjapp .btn-minus[data-v-03df57b7]{border-right:none;border-radius:4px 0 0 4px}.zjapp .btn-add[data-v-03df57b7]{border-left:none;border-radius:0 4px 4px 0}.zjapp .icon-add[data-v-03df57b7],.zjapp .icon-minus[data-v-03df57b7]{font-size:11px;vertical-align:top;display:inline-block;margin-top:10.5px}.zjapp .disabled[data-v-03df57b7]{color:#c8c8c8}.zjapp .activing[data-v-03df57b7]{color:#4275e8}",""])},"0ebd":function(t,e,i){"use strict";(function(t){i("cc57");var a=i("dc52"),n=i("cd05"),o=i("5a71"),s=i("0f7b"),c=i("07d2"),r=i("fd50"),l=i("3bd5"),d=i("f97c"),p=i("3516"),u=i("37d5"),h=i("e2a7"),f=i("f431"),m=i("bcc7"),b=i("b61f"),g=i("be2b"),v=i("6144"),y=i("7cb8");e.a={components:{AppStepper:s.a,appRadio:a.a,UserSelect:n.a,SingleSelect:o.a,Item:c.default,TreeSelect:f.a},data:function(){return{type:"add",viewTitle:"新建批次",batchId:"",batch:{},data:this.initData(),originRooms:[],buildingMap:{},rooms:[],roomTextArr:[],checkitems:[],roomOptions:[],checkitemOptions:[],currentUserId:l.a.getUser().user_id}},computed:{defaultStorageKey:function(){return"实测巡检_"+this.$store.state.global.currentProject.id}},activated:function(){$log.log("现场检查添加批次，activated"),this.init()},destroyed:function(){window.clearTimeout(this.timeoutEvent)},methods:{initData:function(){return{timeoutEvent:null,bidsectionData:[],inspectorData:[],ccOptions:[],batchName:"",type:"随机检查",checkItem:{id:"",name:""},building:{id:"",name:"",unit:""},cc:[],purpose:"正式",batchBidsection:{},batchInspector:[]}},init:function(){var e=this,i=this.$route.query,a=d.a.getDefaultProject().id;this.batchId=i&&i.id?i.id:"",this.batch={},this.data=this.initData(),this.originRooms=[],this.buildingMap={},this.rooms=[],this.roomTextArr=[],this.checkitems=[],r.a.when().then((function(){if(e.batchId)return e.type="edit",e.viewTitle="编辑批次",e.loadData();e.type="add",e.viewTitle="新建批次",e.$nextTick((function(){e.timeoutEvent=window.setTimeout((function(){e.$refs.batch_add_name_input.focus()}),500)}))})).then((function(){u.default.getProjectCheckUsers(a,[31,32,33]).then((function(i){e.data.inspectorData=t.map(i,(function(i){var a=!1,n=!1;return"add"===e.type?i.user_id===e.currentUserId&&(a=!0,n=!0):"edit"===e.type&&i.user_id===e.data.created_by&&(a=!0,n=!0),t.extend({},i,{checked:a,disabled:n})}))}))})).catch((function(t){$log.error(t)})),p.a.getSectionList(a).then((function(i){e.data.bidsectionData=t.map(i,(function(t){return{id:t.id,name:t.name+"（"+t.proj_name+"）",proj_id:t.proj_id}}))})),u.default.getProjectUsers(a,[31,32,33]).then((function(t){e.data.ccOptions=t}))},isCheckItemSelected:function(){if(!this.data.batchBidsection.name)return h.a.alert("请选择所属标段"),!1;this.batchId},onSelectSection:function(){this.rooms=[],this.checkitems=[],this.batchInspector=[],this.cc=[],this.getCheckitemOptions(),this.getRoomOptions()},getCheckitemOptions:function(){var e=this;return m.a.getBidSectionCheckItemTreeByType(this.data.batchBidsection.id,41).then((function(i){e.checkitemOptions=t.map(i,(function(e){return{id:e.id,name:e.name,children:t.map(e.subitem,(function(t){return{id:t.id,name:t.name}}))}}))}))},getRoomOptions:function(){var e=this;return p.a.getBuildingAndRooms(this.data.batchBidsection.id).then((function(i){var a=[];t.each(i,(function(e){e.units&&e.units.length?t.each(e.units,(function(t){a.push({id:e.id+t.id,name:e.name+t.name,buildingId:e.id,buildingName:e.name,unitId:t.id,unitName:t.name,floors:t.floors})})):a.push(e)})),e.roomOptions=a,e.buildingMap={},t.each(i,(function(t){e.$set(e.buildingMap,t.id,t)}))}))},getRoomsText:function(){var e=this,i=[];if(!this.rooms.length)return i;var a=t.groupBy(this.rooms,(function(t){return t.building_id+t.unit}));return t.each(a,(function(a){if(!t.isEmpty(a)){var n=a[0].building_id,o=a[0].unit?Object(y.a)(a[0].unit,"单元"):"",s=e.buildingMap[n],c=t.map(a,"name").join("、");s&&i.push("".concat(s.name).concat(o).concat(c))}})),i},openRoomSelect:function(){var t=this,e=this.isCheckItemSelected();e instanceof Promise||(e=Promise.resolve(e)),e.then((function(e){!1!==e&&b.a.openPopup({title:"检查房间",type:"unit-floor-room",options:t.roomOptions,selected:t.rooms,autoSuffix:!1,rightBtn:"确定",rightBtnEvent:function(e){t.rooms=e,t.roomTextArr=t.getRoomsText()}})}))},loadData:function(){var e=this;return p.a.getBatchUsers(this.batchId).then((function(i){var a=[];e.data.batchInspector=t.map(i,(function(t){return a.push(t.user_name),{id:t.user_id,name:t.user_name,checked:!0}}))})),p.a.getBatchCCs(this.batchId).then((function(i){var a=[];e.data.cc=t.map(i,(function(t){return a.push(t.user_name),{id:t.user_id,name:t.user_name}}))})),p.a.getBatch(this.batchId).then((function(t){e.batch=t,e.data.batchName=t.name,e.data.purpose=t.batch_purpose||"正式",e.data.batchBidsection={id:t.section_id,name:t.section_name+"（"+t.proj_name+"）",proj_id:t.proj_id},e.data.created_by=t.created_by})).then((function(){if(e.data.batchBidsection.id)return r.a.all([e.getRoomOptions(),e.getCheckitemOptions()])})).then((function(){if(e.batchId)return p.a.getBatchRooms(e.batchId).then((function(t){e.rooms=t,e.originRooms=e.rooms.slice(0),e.roomTextArr=e.getRoomsText()}))})).then((function(){if(e.batchId)return p.a.getBatchCheckitems(e.batchId).then((function(t){e.checkitems=t}))}))},saveBatch:function(){var e=this;if(""!==this.data.batchName)if(this.data.batchBidsection&&this.data.batchBidsection.id)if(t.isEmpty(this.rooms))h.a.alert("请选择检查房间");else if(t.isEmpty(this.checkitems))h.a.alert("请选择检查项");else if(this.data.batchInspector&&this.data.batchInspector.length){var i={batch:{id:this.batchId,batch_type:"实测巡检",proj_id:this.data.batchBidsection.proj_id,bidsection_id:this.data.batchBidsection.id,name:this.data.batchName,batch_purpose:"正式"},batch_user:t.map(this.data.batchInspector,"id"),batch_cc:t.map(this.data.cc,"id"),batch_room:t.map(this.rooms,(function(t){return{building_id:t.building_id,room_id:t.id,unit:t.unit}})),checkitem:t.map(this.checkitems,"id")};r.a.when().then((function(){var a=t.difference(t.map(e.originRooms,"id"),t.map(e.rooms,"id"))||[];a.length&&g.a.deleteBatchProblems(e.batchId,a),h.a.loading("请稍等..."),p.a.uploadBatch(i).then((function(t){v.a.saveUserObject(e.defaultStorageKey,t),e.$router.go(-1)})).catch((function(t){h.a.alert(t)})).finally((function(){h.a.hideLoading()}))})).catch((function(t){console.error(t)}))}else h.a.alert("请选择检查人");else h.a.alert("请选择所属标段");else h.a.alert("请输入批次名称")}}}}).call(this,i("391c"))},"0f7b":function(t,e,i){"use strict";i("f548"),i("163d");var a,n,o={name:"AppStepper",components:{NumberInput:i("6948").a},props:{value:{type:[String,Number],default:""},max:{type:[String,Number],default:200},range:{type:Array}},data:function(){return{addActiving:!1,minusActiving:!1}},computed:{rangeMin:function(){return this.range&&this.range[0]||0},rangeMax:function(){return this.range&&this.range[1]?this.range[1]:this.max},allowAdd:function(){return""!==this.value&&this.value<this.rangeMax},allowMinus:function(){return""!==this.value&&this.value>this.rangeMin}},methods:{onChange:function(t){t&&(t=String(t).replace(/\D/g,"")),parseInt(t,10)>parseInt(this.max,10)&&(t=this.max),this.$emit("input",Number(t)),this.$emit("change",Number(t))},add:function(){if(this.allowAdd){var t=parseInt(this.value,10)+1;this.isInRange(t)&&(this.$emit("input",t),this.$emit("change",t)),this.setActiving("add")}},minus:function(){if(this.allowMinus){var t=parseInt(this.value,10)-1;this.isInRange(t)&&(this.$emit("input",t),this.$emit("change",t)),this.setActiving("minus")}},isInRange:function(t){return t>=this.rangeMin&&t<=this.rangeMax},setActiving:function(t){var e=this;t&&("minus"===t?(this.minusActiving=!0,clearTimeout(n),n=setTimeout((function(){e.minusActiving=!1}),300)):(this.addActiving=!0,clearTimeout(a),a=setTimeout((function(){e.addActiving=!1}),300)))}}},s=(i("91cb"),i("17cc")),c=Object(s.a)(o,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"app-stepper"},[i("button",{staticClass:"btn-minus",class:{disabled:!t.allowMinus,activing:t.minusActiving},on:{click:t.minus}},[i("icon",{attrs:{name:"minus"}})],1),i("number-input",{attrs:{value:t.value,type:"int",range:t.range},on:{input:t.onChange}}),i("button",{staticClass:"btn-add",class:{disabled:!t.allowAdd,activing:t.addActiving},on:{click:t.add}},[i("icon",{attrs:{name:"add"}})],1)],1)}),[],!1,null,"03df57b7",null);e.a=c.exports},1969:function(t,e,i){"use strict";i("8d89")},"242a":function(t,e,i){"use strict";var a={name:"Checkbox",props:{semiSelection:{type:Boolean,default:!1},status:{type:String,default:null},value:{type:Boolean,default:!1},text:{type:String,default:""},type:{type:String,default:"circular"}},data:function(){return{}},computed:{iconName:function(){var t="";return"circular"===this.type?t=this.value?"checkbox-checked":"checkbox":"square"===this.type&&(t=this.value?"checkbox-square-checked":"checkbox-square"),t}},methods:{semiClickHandle:function(t){if(t.stopPropagation(),this.semiSelection){var e="partSelected"===this.status||!this.value,i="partSelected"===this.status||e?"fullSelected":null;this.$emit("input",e,i),this.$emit("change",e,i)}else this.$emit("input",!this.value),this.$emit("change",!this.value)}}},n=(i("53e4"),i("17cc")),o=Object(n.a)(a,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{class:{checkbox:!t.semiSelection,semiCheckbox:t.semiSelection,"semiCheckbox-indeterminate":"partSelected"===t.status,"semiCheckbox-checked":"fullSelected"===t.status},on:{click:function(e){t.semiClickHandle(e)}}},[t.semiSelection?i("span",{staticClass:"semiCheckbox-inner"}):t._e(),t.semiSelection?t._e():i("icon",{attrs:{name:t.iconName}}),t._v(t._s(t.text)+"\n")],1)}),[],!1,null,"afcfdff2",null);e.a=o.exports},"292d":function(t,e,i){(t.exports=i("690e")(!1)).push([t.i,'.zjapp .item[data-v-528a59dc]{align-items:center}.zjapp .item-text[data-v-528a59dc]{color:#666}.zjapp .tree-icon[data-v-528a59dc]{position:relative;width:20px;height:30px;line-height:30px;color:#c8c8c8;font-size:26px}.zjapp .tree-blank[data-v-528a59dc]{width:14px;height:30px}.zjapp .icon-dropdown[data-v-528a59dc]:before,.zjapp .icon-dropright[data-v-528a59dc]:before{content:"";position:absolute;width:0;height:0;border:6px solid #c8c8c8}.zjapp .icon-dropdown[data-v-528a59dc]:before{top:12px;left:0;border-left-color:transparent}.zjapp .icon-dropdown[data-v-528a59dc]:before,.zjapp .icon-dropright[data-v-528a59dc]:before{border-right-color:transparent;border-bottom-color:transparent}.zjapp .icon-dropright[data-v-528a59dc]:before{top:9px;left:2px;border-top-color:transparent}',""])},3925:function(t,e,i){(t.exports=i("690e")(!1)).push([t.i,".zjapp .layout-main[data-v-555b8276] .layout-content{display:flex;flex-direction:column}.zjapp .page-scroll[data-v-555b8276]{flex:1;overflow:auto;scroll-behavior:smooth}.zjapp .header-right-flex[data-v-555b8276]{display:flex}",""])},"3cc7":function(t,e,i){var a=i("44a1");"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);(0,i("85cb").default)("12a96fd8",a,!0,{sourceMap:!1,shadowMode:!1})},"44a1":function(t,e,i){(t.exports=i("690e")(!1)).push([t.i,".zjapp .multiple-place-content[data-v-4b9b8166]{z-index:99999;max-height:134px;border-bottom:1px solid #ececec;overflow:auto;scroll-behavior:smooth}.zjapp .multiple-place-content.-fixed[data-v-4b9b8166]{position:absolute;left:0;right:0;top:0}.zjapp .selected[data-v-4b9b8166]{position:relative;display:flex;padding:13px 15px;font-size:15px;background-color:#fff;overflow:scroll}.zjapp .selected label[data-v-4b9b8166]{margin-right:10px;color:#999;white-space:nowrap}.zjapp .select-wrap[data-v-4b9b8166]{flex:1;background-color:#fff;overflow:auto;scroll-behavior:smooth}.zjapp .van-collapse[data-v-4b9b8166] .van-cell{align-items:center}.zjapp .van-collapse[data-v-4b9b8166] .icon{margin-right:10px;vertical-align:middle}.zjapp .van-collapse[data-v-4b9b8166] .van-collapse-item__content{padding:0}.zjapp .group.-border-bottom[data-v-4b9b8166]{border-bottom:1px solid #ececec}.zjapp .group-name[data-v-4b9b8166]{font-size:14px;color:#999;height:34px;padding-top:15px}.zjapp .element-list[data-v-4b9b8166]{display:flex;flex-wrap:wrap}.zjapp .element[data-v-4b9b8166]{min-width:75px;height:28px;line-height:28px;text-align:center;margin:10px 6px 10px 0;padding:0 10px;background:#fff;border-radius:100px;color:#333;font-size:14px;border:1px solid #dcdcdc}.zjapp .element.-disabled[data-v-4b9b8166]{background:#ececec;color:#999;border-color:#ececec}.zjapp .element.-checked[data-v-4b9b8166]{background:#4275e8;color:#fff;border-color:#4275e8}",""])},"53e4":function(t,e,i){"use strict";i("75b9")},5909:function(t,e,i){(t.exports=i("690e")(!1)).push([t.i,".zjapp .scroll-wrap[data-v-4e7f2b9e]{flex:1;overflow:auto;padding-bottom:100px}.zjapp .date[data-v-4e7f2b9e]{padding-right:30px}.zjapp .unit[data-v-4e7f2b9e]{position:absolute;right:15px;top:10px}.zjapp .cell-item[data-v-4e7f2b9e]{position:relative;font-size:16px;line-height:30px}.zjapp .cell-item input[data-v-4e7f2b9e]{border:none;margin:0;display:block;height:34px;color:#111;vertical-align:middle;line-height:16px;text-align:right}.zjapp .cell-item .fr[data-v-4e7f2b9e]{color:#b2b2b2;line-height:30px}.zjapp .cell-item i[data-v-4e7f2b9e]{float:right;margin-top:2px}.zjapp .cell-item .gray[data-v-4e7f2b9e]{color:#666}.zjapp .cell-item[data-v-4e7f2b9e] .van-cell__value{padding-left:90px}.zjapp .cell-item[data-v-4e7f2b9e] .van-cell__value .custom-text{position:absolute;left:0}.zjapp .cell-item[data-v-4e7f2b9e] .van-cell__right-icon{color:#c8c8c8}",""])},"6e88":function(t,e,i){"use strict";i("acfc")},"75b9":function(t,e,i){var a=i("e5a0");"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);(0,i("85cb").default)("417e698a",a,!0,{sourceMap:!1,shadowMode:!1})},"774b":function(t,e,i){"use strict";i.r(e);var a=i("d18d").a,n=(i("b225"),i("17cc")),o=Object(n.a)(a,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{ref:"scroll-warp",staticClass:"scroll-warp",class:{"scroll-warp-pulling":t.pulling,"scroll-warp-complete":!t.hasNext&&!t.isEmpty,"scroll-warp-empty":t.isEmpty},style:{"padding-bottom":t.numberKeyboardCoverHeight+"px"},on:{scroll:t.onScroll,touchstart:t.onTouchstart,touchmove:t.onTouchmove,touchend:t.onTouchend}},[t.allowPullDown?i("div",{staticClass:"pull-refresh-warp",style:{height:t.pullDist+"px"}},[i("div",{staticClass:"pull-refresh"},[i("div",{staticClass:"animation-refresher",class:{refreshing:t.refreshing}}),t.updateTime?i("p",{staticClass:"pull-refresh-date"},[t._v("最后成功同步："+t._s(t.updateTime))]):t._e()])]):t._e(),t._t("default"),t.loading?i("div",{staticClass:"page-loading"},[i("svg",{staticClass:"svg-loading",attrs:{viewBox:"0 0 80 80"}},[i("circle",{attrs:{cx:"40",cy:"40",r:"36"}})])]):t._e(),t.hasNext||t.isEmpty?t._e():[t.$slots.end?t._t("end"):t._e(),!t.$slots.end&&t.endText?i("div",{staticClass:"end-text"},[t._v("\n      "+t._s(t.endText)+"\n    ")]):t._e()]],2)}),[],!1,null,"2b1a346c",null);e.default=o.exports},"7c9b":function(t,e,i){"use strict";(function(t){i("e204"),i("f548"),i("6d57"),i("cc57"),i("c904");var a=i("e89f"),n=i("1df9"),o=i("774b"),s=i("e2a7"),c=i("7cb8");e.a={components:{PageContent:n.a,Scroller:o.default},mixins:[a.a],data:function(){return{show:!1,title:"",options:[],actionTabs:[],mapSelectedItems:[],selectedResult:"",optionsMap:{},statusMap:{},autoSuffix:!0,nameKeys:{"unit-floor-room":[{id:"unit",name:"unit_name",children:"floors"},{id:"floor",name:"floor_name",children:"rooms"},{name:"room_name"}],"floor-room":[{id:"floor",name:"floor_name",children:"rooms"},{name:"room_name"}],"unit-floor":[{id:"unit",name:"unit_name",children:"floors"},{id:"floor",name:"floor_name"}],floor:[{id:"floor",name:"floor_name"}]}}},computed:{selectedResultText:function(){return t.clone(this.mapSelectedItems).sort((function(t,e){return t.order-e.order})).reduce((function(t,e){return t+="、"+e.name}),"").substring(1)}},mounted:function(){window.dialogTest=this},methods:{initData:function(t){var e=this;this.actionTabs=[],this.mapSelectedItems=[],this.selectedResult="",this.options=t||[],"floor"===this.type&&this.options.floors&&(this.options=this.options[0].floors);var i=this.traversOptions(this.options);if("floor"===this.type){var a=0,n=[];for(var o in this.statusMap)this.statusMap[o].pid="allfloors",this.statusMap[o].disabled||(a+=2),n.push(o);var s=!1;0===a&&(s=!0),this.statusMap.allfloors={id:"allfloors",status:"0",total:a,countChecked:0,children:n,disabled:s}}i.forEach((function(t){e.toggleItem(t.id,!0)}))},traversOptions:function(t){var e=this,i={},a={},n=[],o=this.nameKeys[this.type],s=0;function r(t){var o=t.val,c=t.mapId,r=t.parentId,d=t.childrenKey,p=t.isChecked,u=t.isForceChecked,h=t.isDisabled;i[c]=o;var f=r?a[r].name:"",m={id:c,status:"0",order:s++,originName:o.name,disabled:h,isForceChecked:u,name:e.autoSuffix?(f+o.name).replace(/单元.*层(.)/,"单元$1"):f+o.name};if(a[c]=m,d&&(m.total=o[d]?2*o[d].filter((function(t){return!l(t)})).length:0,0===m.total&&(m.disabled=!0),m.countChecked=0),r){m.pid=r;var b=a[r];b.children||(b.children=[]),b.children.push(c)}o.status&&(m.statusText=o.status),p&&n.push(m)}function l(t){return!!(t.used||t.disabled||t.status&&!t.checked)}return function t(i){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(Array.isArray(i)&&i.length){var s=n?n+"-":"",d=a===o.length-1;i.forEach((function(i){var p=o[a];i.name||(i.name=i[p.name]||""),i.id||(i.id=i[p.id]),e.autoSuffix&&(i.hasOwnProperty("floors")&&(i.name=Object(c.a)(i.name,"单元")),i.hasOwnProperty("rooms")&&(i.name=Object(c.a)(i.name,"层")));var u=!1;d&&l(i)&&(u=!0);var h=!1,f=!1;d&&((h=i.checked||!1)&&(f=!0),~e.selected.findIndex((function(t){return"unit-floor"===e.type?t.id===i.id&&t.unit===i.unit:t.id===i.id}))&&(f=!0));var m=s+i.id,b=p.children;r({val:i,mapId:m,parentId:n,childrenKey:b,isChecked:f,isForceChecked:h,isDisabled:u}),b&&t(i[b],a+1,m)}))}}(t),this.optionsMap=i,this.statusMap=a,n},openPopup:function(t){this.show=!0,this.title=t.title,this.selected=t.selected,this.onSelect=t.onSelect,this.rightBtn=t.rightBtn,this.type=t.type,this.rightBtnEvent=t.rightBtnEvent,this.autoSuffix=!1!==t.autoSuffix,this.initData(t.options),this.$emit("open")},closePopup:function(){this.show=!1,this.$emit("close")},_handlerItemSelected:function(t,e){if(!t.total){var i=this.mapSelectedItems.indexOf(t);e?~i&&this.mapSelectedItems.splice(i,1):~i||this.mapSelectedItems.push(t)}},toggleItem:function(t,e){var i=this,a=this.statusMap;var n=a[t];if(!e&&n.isForceChecked||n.disabled)n.statusText&&!e&&s.a.alert(n.statusText);else{var o,c=n.status;(function t(e,o){var s=a[e];s.status=o,"2"===o&&s.total?s.countChecked=s.total:s.countChecked=0,s.hasOwnProperty("children")?s.children.length&&s.children.forEach((function(e){i.optionsMap[e].checked||t(e,o)})):n.isForceChecked||s.disabled||i._handlerItemSelected(s,"0"===o)})(t,o="2"===c?"0":"2"),function t(e,i){var n=a[e].pid;if(n){var o=a[n],s=function(t,e){var i=t.status,a=t.total;t.countChecked=t.countChecked+e;var n=t.countChecked;switch(!0){case 0===n:t.status="0";break;case n<a:t.status="1";break;case n===a:t.status="2";break;default:$log.error("something is wrong on @toggleItem: current pItem's pCountChecked: ".concat(n,", pTotal: ").concat(a))}return t.status-i}(o,i);0!==s&&t(o.id,s)}}(t,o-c)}},mapStatusToClass:function(t,e){if(this.statusMap[t].disabled)return"-disabled";return["","-indeterminate","-checked"][this.statusMap[t].status]},onRightBtnEvent:function(){var e=this;if(t.isEmpty(this.mapSelectedItems)){if("room"===this.type.substr(-4))return s.a.alert("请选择房间");if("floor"===this.type.substr(-5))return s.a.alert("请选择楼层")}var i=[];this.mapSelectedItems.forEach((function(t){i.push(e.optionsMap[t.id])})),this.rightBtnEvent(i),this.show=!1}}}}).call(this,i("391c"))},"8d89":function(t,e,i){var a=i("5909");"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);(0,i("85cb").default)("00890b91",a,!0,{sourceMap:!1,shadowMode:!1})},"91cb":function(t,e,i){"use strict";i("c82d")},9455:function(t,e,i){"use strict";i("f272")},"9d55":function(t,e,i){(t.exports=i("690e")(!1)).push([t.i,'.zjapp .scroll-warp[data-v-2b1a346c]{flex:1;overflow:auto;-webkit-overflow-scrolling:touch}.zjapp .scroll-warp-pulling[data-v-2b1a346c]{overflow:hidden}.zjapp .scroll-warp-complete[data-v-2b1a346c]:after{content:"";display:block;height:100px}.zjapp .scroll-warp-empty[data-v-2b1a346c]{display:flex;flex-direction:column}.zjapp .pull-refresh-warp[data-v-2b1a346c]{position:relative;height:0;overflow:hidden}.zjapp .pull-refresh[data-v-2b1a346c]{position:absolute;left:0;bottom:0;height:70px;width:100%;padding:6px;text-align:center}.zjapp .pull-refresh-date[data-v-2b1a346c]{margin-top:4px;height:16px;line-height:16px;font-size:12px;color:#bcbcbc}.zjapp .page-loading[data-v-2b1a346c]{padding:10px;text-align:center}.zjapp .end-text[data-v-2b1a346c]{color:#c8c8c8;background:#f4f4f4;position:relative;line-height:76px;height:76px;text-align:center}.zjapp .end-text[data-v-2b1a346c]:after,.zjapp .end-text[data-v-2b1a346c]:before{content:"";position:absolute;width:48px;height:1px;background:#e4e4e4;top:50%;margin-top:-1px}.zjapp .end-text[data-v-2b1a346c]:after{left:50%;transform:translateX(-92px)}.zjapp .end-text[data-v-2b1a346c]:before{right:50%;transform:translateX(90px)}.zjapp .end-slot[data-v-2b1a346c]{padding:30px;line-height:18px;text-align:center;color:#c8c8c8}',""])},a8e5:function(t,e,i){"use strict";(function(t){i("163d");var a=i("ab8e"),n=i("07d2");e.a={name:"TreeSelect",components:{Item:n.default},model:{prop:"selected"},props:{label:{type:String,default:""},title:{type:String,default:""},mode:{type:String,default:"edit"},multi:{type:Boolean,default:!1},options:{type:Array},selected:{type:[Object,Array],default:function(){return{}}},selectedText:{type:[String,Number]},editabled:{type:Boolean,default:!0},beforeOpen:{type:Function,default:function(){}}},data:function(){return{}},computed:{hasSelected:function(){return!t.isEmpty(this.selected)}},methods:{open:function(){var t=this;if(this.editabled){var e=this.beforeOpen();e instanceof Promise||(e=Promise.resolve(e)),e.then((function(e){!1!==e&&a.a.open({title:t.title||"选择"+t.label,multi:t.multi,options:t.options,selected:t.selected,callback:function(e){t.$emit("input",e),t.$emit("onSelect",e)}})}))}}}}}).call(this,i("391c"))},ab8e:function(t,e,i){"use strict";var a=i("329b"),n=i("ef6c").a,o=(i("bf8f"),i("17cc")),s=Object(o.a)(n,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("transition",{attrs:{name:"slide-right"}},[t.show?i("page-content",{attrs:{mode:"dialog",title:t.title,"on-close":t.close}},[t.multi?i("div",{staticClass:"header-btn",attrs:{slot:"header-bar-right"},on:{click:t.onConfirm},slot:"header-bar-right"},[t._v("\n      确定("+t._s(t.selected.length)+")\n    ")]):t._e(),i("scroller",{attrs:{"is-empty":!t.treeList.length||t.isSearching}},[i("app-search-bar",{ref:"app-search-bar-tree-select",staticClass:"bg-white",attrs:{"history-key":"tree-select-search-history-key"},on:{changeSearchStatus:t.setSearchMode},model:{value:t.searchKeyword,callback:function(e){t.searchKeyword=e},expression:"searchKeyword"}}),!t.isSearching||t.searchKeyword?i("tree",{attrs:{data:t.treeList,keyword:t.searchKeyword,selected:t.selected,multi:t.multi},on:{onSelect:t.onSelect}}):t._e(),i("loading-status",{attrs:{"is-empty":!t.treeList.length,"empty-text":"没有检查项"}},[t.isSearching?i("template",{slot:"empty-text"},[t._v("\n          未搜索到包含"),i("span",{staticClass:"color-blue"},[t._v(t._s(t.searchKeyword))]),t._v("的结果\n        ")]):t._e()],2)],1)],1):t._e()],1)}),[],!1,null,"555b8276",null).exports,c=!1;c||(c=new(a.default.extend(s))({el:document.createElement("div")}),document.body.appendChild(c.$el));e.a=c},acfc:function(t,e,i){var a=i("292d");"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);(0,i("85cb").default)("48e4ef14",a,!0,{sourceMap:!1,shadowMode:!1})},b225:function(t,e,i){"use strict";i("ef48")},b61f:function(t,e,i){"use strict";var a=i("329b"),n=i("7c9b").a,o=(i("0748"),i("17cc")),s=Object(o.a)(n,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("transition",{attrs:{name:"slide-right"}},[t.show?i("page-content",{attrs:{title:t.title,mode:"dialog","on-close":t.closePopup}},[t.rightBtn?i("div",{staticClass:"header-btn",attrs:{slot:"header-bar-right"},on:{click:t.onRightBtnEvent},slot:"header-bar-right"},[t._v("\n      "+t._s(t.rightBtn)+"("+t._s(t.mapSelectedItems.length)+")\n    ")]):t._e(),i("div",{staticClass:"multiple-place-content"},[i("div",{staticClass:"selected"},[i("label",[t._v("已选:")]),i("div",{staticClass:"text"},[t._v("\n          "+t._s(t.selectedResultText)+"\n        ")])])]),i("div",{staticClass:"multiple-place-content -fixed"},[i("div",{staticClass:"selected"},[i("label",[t._v("已选:")]),i("div",{staticClass:"text"},[t._v("\n          "+t._s(t.selectedResultText)+"\n        ")])])]),i("div",{staticClass:"select-wrap"},["unit-floor-room"===t.type?i("van-collapse",{model:{value:t.actionTabs,callback:function(e){t.actionTabs=e},expression:"actionTabs"}},t._l(t.options,(function(e){return i("van-collapse-item",{key:e.id,staticClass:"section",attrs:{name:e.id}},[i("strong",{attrs:{slot:"title"},on:{click:function(i){i.stopPropagation(),t.toggleItem(e.id)}},slot:"title"},[i("icon",{attrs:{slot:"icon",name:"checkbox-square"+t.mapStatusToClass(e.id)},slot:"icon"}),t._v(t._s(e.name))],1),t._l(e[t.nameKeys[t.type][0].children],(function(a){return i("div",{key:a.id,staticClass:"group pl40 pr15  -border-bottom"},[i("div",{staticClass:"group-name"},[t._v(t._s(a.name))]),i("div",{staticClass:"element-list"},[i("div",{staticClass:"element -all",class:t.mapStatusToClass([e.id,a.id].join("-"),a),on:{click:function(i){t.toggleItem([e.id,a.id].join("-"))}}},[t._v("\n                  全选\n                ")]),t._l(a[t.nameKeys[t.type][1].children],(function(n){return i("div",{key:n.name,staticClass:"element",class:t.mapStatusToClass([e.id,a.id,n.id].join("-")),on:{click:function(i){t.toggleItem([e.id,a.id,n.id].join("-"))}}},[t._v("\n                  "+t._s(n.name)+"\n                ")])}))],2)])}))],2)}))):t._e(),"floor-room"===t.type?i("div",{staticClass:"section"},t._l(t.options,(function(e){return i("div",{key:e.id,staticClass:"group pl15 pr15"},[i("div",{staticClass:"group-name"},[t._v(t._s(e.name))]),i("div",{staticClass:"element-list"},[i("div",{staticClass:"element -all",class:t.mapStatusToClass(e.id,e),on:{click:function(i){t.toggleItem(e.id)}}},[t._v("\n              全选\n            ")]),t._l(e[t.nameKeys[t.type][0].children],(function(a){return i("div",{key:a.id,staticClass:"element mr15",class:t.mapStatusToClass([e.id,a.id].join("-")),on:{click:function(i){t.toggleItem([e.id,a.id].join("-"))}}},[t._v("\n              "+t._s(a.name)+"\n            ")])}))],2)])}))):t._e(),"floor"===t.type?i("div",{staticClass:"section"},[i("div",{staticClass:"group pl15 pr15"},[i("div",{staticClass:"group-name"},[t._v("全部")]),i("div",{staticClass:"element-list"},[i("div",{staticClass:"element mr15",class:t.mapStatusToClass("allfloors"),on:{click:function(e){t.toggleItem("allfloors")}}},[t._v("\n              全选\n            ")]),t._l(t.options,(function(e){return i("div",{key:e.name,staticClass:"element mr15",class:t.mapStatusToClass(e.id),on:{click:function(i){t.toggleItem(e.id)}}},[t._v("\n              "+t._s(e.name)+"\n            ")])}))],2)])]):t._e(),"unit-floor"===t.type?i("div",{staticClass:"section"},t._l(t.options,(function(e){return i("div",{key:e.name,staticClass:"group pl15 pr15"},[i("div",{staticClass:"group-name"},[t._v(t._s(e.name))]),i("div",{staticClass:"element-list"},[i("div",{staticClass:"element mr15",class:t.mapStatusToClass(e.id,e),on:{click:function(i){t.toggleItem(e.id)}}},[t._v("\n              全选\n            ")]),t._l(e[t.nameKeys[t.type][0].children],(function(a){return i("div",{key:a.name,staticClass:"element mr15",class:t.mapStatusToClass([e.id,a.id].join("-")),on:{click:function(i){t.toggleItem([e.id,a.id].join("-"))}}},[t._v("\n              "+t._s(a.name)+"\n            ")])}))],2)])}))):t._e(),t.options.length?t._e():i("loading-status",{attrs:{"is-empty":!0,"empty-text":"没有内容"}})],1)]):t._e()],1)}),[],!1,null,"4b9b8166",null).exports,c=!1;c||(c=new(a.default.extend(s))({el:document.createElement("div")}),document.body.appendChild(c.$el));e.a=c},bc26:function(t,e,i){"use strict";i.r(e);var a=i("0ebd").a,n=(i("1969"),i("17cc")),o=Object(n.a)(a,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("page-content",{attrs:{title:"add"==t.type?"新建批次":"编辑批次","show-go-root":!0}},[i("div",{staticClass:"scroll-wrap"},[i("div",{staticClass:"list"},[i("item",{attrs:{label:"批次名称",mode:"edit"}},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.data.batchName,expression:"data.batchName"},{name:"track",rawName:"v-track",value:"实测巡检-修改批次-修改名称",expression:"'实测巡检-修改批次-修改名称'"}],ref:"batch_add_name_input",staticClass:"input-align-r f16",attrs:{slot:"right",type:"text",placeholder:"请填写"},domProps:{value:t.data.batchName},on:{input:function(e){e.target.composing||t.$set(t.data,"batchName",e.target.value)}},slot:"right"})]),i("single-select",{attrs:{title:"所属标段",options:t.data.bidsectionData,mode:"edit",editabled:"add"===t.type},on:{onSelect:t.onSelectSection},model:{value:t.data.batchBidsection,callback:function(e){t.$set(t.data,"batchBidsection",e)},expression:"data.batchBidsection"}}),i("item",{attrs:{label:"检查房间",mode:"edit",editabled:!0},on:{click:t.openRoomSelect}},[t.roomTextArr&&t.roomTextArr.length?i("div",{staticClass:"item-text align-r",attrs:{slot:"right"},slot:"right"},t._l(t.roomTextArr,(function(e,a){return i("p",{key:a},[t._v(t._s(e))])}))):t._e()]),i("tree-select",{attrs:{label:"检查项",multi:!0,"selected-text":t.checkitems&&t.checkitems.length?"已选"+t.checkitems.length+"项":"",options:t.checkitemOptions,"before-open":t.isCheckItemSelected,editabled:"add"===t.type},model:{value:t.checkitems,callback:function(e){t.checkitems=e},expression:"checkitems"}}),i("user-select",{attrs:{options:t.data.inspectorData,title:"检查人",multi:!0,"before-open":t.isCheckItemSelected},model:{value:t.data.batchInspector,callback:function(e){t.$set(t.data,"batchInspector",e)},expression:"data.batchInspector"}}),i("user-select",{attrs:{options:t.data.ccOptions,title:"抄送人",multi:!0,"before-open":t.isCheckItemSelected},model:{value:t.data.cc,callback:function(e){t.$set(t.data,"cc",e)},expression:"data.cc"}})],1),i("app-button-group",["add"===t.type?i("app-button",{on:{click:t.saveBatch}},[t._v("\n        提交\n      ")]):i("app-button",{on:{click:t.saveBatch}},[t._v("\n        保存\n      ")])],1)],1)])}),[],!1,null,"4e7f2b9e",null);e.default=o.exports},bf8f:function(t,e,i){"use strict";i("e003")},c62c:function(t,e,i){(t.exports=i("690e")(!1)).push([t.i,'.zjapp .app-radio[data-v-2340da0b]{position:relative;line-height:20px;font-size:0}.zjapp .app-radio>*[data-v-2340da0b]{display:inline-block;vertical-align:middle}.zjapp .app-radio .app-radio-icon[data-v-2340da0b]{width:20px;height:20px;border:1px solid #d9d9d9;border-radius:20px}.zjapp .app-radio .app-radio-icon+*[data-v-2340da0b]{margin-left:10px;font-size:16px}.zjapp .app-radio .checked-icon[data-v-2340da0b]{position:relative;border:1px solid #4275e8}.zjapp .app-radio .checked-icon[data-v-2340da0b]:before{content:" ";background:#4275e8;display:inline-block;width:14px;height:14px;border-radius:20px;position:absolute;top:2px;left:2px}',""])},c82d:function(t,e,i){var a=i("0c52");"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);(0,i("85cb").default)("26e0fa2e",a,!0,{sourceMap:!1,shadowMode:!1})},c9a9:function(t,e,i){"use strict";var a=i("d6ed").a,n=(i("6e88"),i("17cc")),o=Object(n.a)(a,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"tree-list"},[t._l(t.list,(function(e){return[i("item",{key:e.id,attrs:{border:"bottom"},on:{click:function(i){t.itemClick(e)}}},[t._l(t.blanks,(function(t,e){return i("div",{key:e,staticClass:"tree-blank"})})),t.multi?i("icon",{staticClass:"color-theme mr5",attrs:{name:"checked"===t.statusSet[e.id]?"checkbox-checked":"checkbox"},on:{click:function(i){i.stopPropagation(),t.clickCheckbox(e)}}}):i("div",{class:{"tree-icon":!0,"icon-dropdown":e.children&&e.children.length&&t.openSet[e.id],"icon-dropright":e.children&&e.children.length&&!t.openSet[e.id]}}),i("div",{staticClass:"item-text",class:{"fw-b":0===t.level},domProps:{innerHTML:t._s(t.showTextSet[e.id])}}),t.multi?[e.children&&e.children.length?i("icon",{attrs:{name:t.openSet[e.id]?"arrow-up":"arrow-down"}}):t._e()]:i("icon",{staticClass:"color-theme",attrs:{name:"checked"===t.statusSet[e.id]?"qualified":""}})],2),e.children&&e.children.length&&t.openSet[e.id]?[i("tree",{key:e.id+"-children",attrs:{data:e.children,level:t.level+1,keyword:t.keyword,selected:t.selected,status:t.statusSet,multi:t.multi},on:{onSelect:t.onSelect}})]:t._e()]}))],2)}),[],!1,null,"528a59dc",null);e.a=o.exports},d18d:function(t,e,i){"use strict";(function(t){i("2b45");var a,n=i("4360"),o=i("48f4"),s=i("162a"),c=i("e2a7"),r=i("a500"),l=i("6f9e"),d={};e.a={name:"Scroller",props:{buildingId:{type:String,default:""},hasNext:{type:Boolean,default:!1},isEmpty:{type:Boolean,default:!1},isSync:{type:Boolean,default:!0},endText:{type:String,default:""},memoryScrollTop:{type:Boolean,default:!0},keepScrollTop:{type:Boolean},hasPullDown:{type:Boolean,default:!0},onPullDown:{type:Function}},data:function(){return{pullDist:0,refreshing:!1,pulling:!1,loading:!1,scrollTop:0,isCurrKeyboard:!1,gapBottom:0}},computed:{allowPullDown:function(){return this.hasPullDown&&(!!this.$listeners.pullDown||!!this.onPullDown)},updateTime:function(){return n.a.state.global.businessDownloadTime},numberKeyboardCoverHeight:function(){return n.a.state.global.isNumberInputOpen?n.a.state.global.numberKeyboardHeight-this.gapBottom:0}},mounted:function(){var t=this;l.a.$on("numberKeyboardOpen",this.onNumberKeyboardOpen),this.$nextTick((function(){var e=t.$refs["scroll-warp"]&&t.$refs["scroll-warp"].getBoundingClientRect&&t.$refs["scroll-warp"].getBoundingClientRect();e&&(t.gapBottom=document.documentElement.clientHeight-e.bottom),t.$el&&t.$el.addEventListener("focus",(function(e){var i=e&&e.target,a=i&&i.tagName&&i.tagName.toLowerCase();if("input"===a||"textarea"===a){window.addEventListener("resize",(function e(){var a=i.getBoundingClientRect(),n=t.$el.getBoundingClientRect(),o=a.bottom-n.bottom;o>0&&t.scrollBy(o),window.removeEventListener("resize",e,!1)}),!1)}}),!0)}))},destroyed:function(){l.a.$off("numberKeyboardOpen",this.onNumberKeyboardOpen)},activated:function(){var t=this.keepScrollTop||this.$router.isBack&&this.memoryScrollTop;this.scrollTop&&t&&(this.$refs["scroll-warp"].scrollTop=this.scrollTop)},deactivated:function(){this.memoryScrollTop&&(this.scrollTop=this.$refs["scroll-warp"].scrollTop)},methods:{onScroll:function(t){var e=this,i=this.$refs["scroll-warp"].scrollTop,a=this.$refs["scroll-warp"].scrollHeight;if(i+this.$refs["scroll-warp"].clientHeight>=a-5&&!this.loading&&this.hasNext){this.loading=!0;var n=this.$listeners.loadNext();n&&n.then&&"function"==typeof n.then?n.then((function(){e.loading=!1})):this.loading=!1}this.$emit("scroll",t)},getTouchDiretion:function(t){if(!(d&&t&&t.touches&&t.touches[0]))return"";var e=t.touches[0].clientX,i=t.touches[0].clientY;return Math.abs(i-d.y)>Math.abs(e-d.x)&&Math.abs(i-d.y)>=3?i>d.y?"down":"up":""},onTouchstart:function(t){this.allowPullDown&&t.touches&&1===t.touches.length&&(d={x:t.touches[0].clientX,y:t.touches[0].clientY,scrollTop:this.$refs["scroll-warp"].scrollTop,pullDist:this.pullDist})},onTouchmove:function(t){if(this.allowPullDown&&t.touches&&1===t.touches.length){var e=this.$refs["scroll-warp"].scrollTop,i=t.touches[0].clientY,a=i-d.y,n=this.getTouchDiretion(t);"down"===n?!this.refreshing&&e<=0?(this.pulling=!0,this.pullDist=(a-d.scrollTop)/2,t.preventDefault()):this.pulling=!1:"up"===n?this.pullDist>0&&(this.pullDist=d.pullDist-(d.y-i),t.preventDefault()):this.pullDist=d.pullDist}},onTouchend:function(){var t=this;this.allowPullDown&&(d={},this.pulling=!1,this.pullDist>=70&&this.isSync?this.refreshing?this.makePullTo(70):this.makePullTo(70).then((function(){if(t.refreshing=!0,t.onPullDown){var e=t.onPullDown();e&&e.then&&"function"==typeof e?e.finally((function(){t.refreshing=!1,t.makePullTo(0)})):(t.refreshing=!1,t.makePullTo(0))}else t.dataSync().then((function(){t.refreshing=!1,t.makePullTo(0),t.$emit("pullDown")})).catch((function(){t.refreshing=!1,t.makePullTo(0),t.$emit("pullDown")}))})):(this.refreshing=!1,this.makePullTo(0)))},makePullTo:function(t){var e=this,i=this.pullDist,a=t,n=a-i,o=i;return i===a?Promise.resolve():new Promise((function(t){!function s(){window.requestAnimationFrame((function(){o+=n/6,e.pullDist=o,i<a&&o<a||i>a&&o>a?s():(e.pullDist=a,e.refreshing=!1,t())}))}()}))},dataSync:function(){var t,e=o.default.getCurrentModuleCode(),i=o.default.getCurrentRoute(),a=i.meta&&i.meta.isTodo;if(o.default.isModuleNeedBuilding(e)&&!a){if(!this.buildingId)return new Promise((function(t){setTimeout((function(){t()}),500)}));t=this.buildingId}return r.a.addTrack("公共-手动下拉刷新","",""),s.a.beginManualUpdate(),o.default.checkSync(t).then((function(t){return s.a.endManualUpdate(),t})).catch((function(t){$log.error("下拉刷新错误",t),t&&"Error: Network Error"===t.toString()?c.a.alert("当前网络无法同步数据"):c.a.alert(t),s.a.endManualUpdate()}))},getScrollHeight:function(){return this.$refs["scroll-warp"].offsetHeight},getScrollTop:function(){return this.$refs["scroll-warp"].scrollTop},setScrollTop:function(t){this.$refs["scroll-warp"].scrollTop=t},scrollBy:function(t){var e=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:200,n=this.getScrollTop(),o=n+t,s=Math.round(i/16.7),c=t/s,r=n,l=a=+new Date;return n===o?Promise.resolve():new Promise((function(t){!function i(){window.requestAnimationFrame((function(){l===a&&(r+=c,e.$refs["scroll-warp"].scrollTop=r,n<o&&r<o||n>o&&r>o?i():(e.$refs["scroll-warp"].scrollTop=o,t()))}))}()}))},scrollTo:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:200,i=this.getScrollTop(),a=t-i;return this.scrollBy(a,e)},scrollToEle:function(t){var e=t.keyboardHeight||232,i=(t=t.$el?t.$el:t).getBoundingClientRect(),a=this.$refs["scroll-warp"].getBoundingClientRect();if(i&&a){var o=document.documentElement.clientHeight-(n.a.state.global.isNumberInputOpen?e:0),s=a.bottom<o?a.bottom:o,c=a.top-i.top,r=i.bottom-s;c>0?this.scrollBy(-c-10):r>0&&this.scrollBy(r+10)}},isCurrent:function(e,i){var a=this;e.length&&t.each(e,(function(t){t._uid===i?a.isCurrKeyboard=!0:a.isCurrent(t.$children,i)}))},onNumberKeyboardOpen:function(t){this.isCurrKeyboard=!1,this.isCurrent(this.$children,t._uid),this.isCurrKeyboard&&this.scrollToEle(t)}}}}).call(this,i("391c"))},d6ed:function(t,e,i){"use strict";(function(t){i("5ab2"),i("6d57"),i("e10e"),i("e204"),i("f548"),i("9dd9"),i("cc57");var a=i("28f8"),n=(i("163d"),i("07d2")),o=i("242a");function s(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,a)}return i}function c(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?s(Object(i),!0).forEach((function(e){Object(a.a)(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):s(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}e.a={name:"Tree",components:{Item:n.default,Checkbox:o.a},props:{data:{type:Array,default:function(){return[]}},keyword:{type:String,default:""},level:{type:Number,default:0},selected:{type:[Array,Object],default:function(){return[]}},status:{type:Object,default:function(){return{}}},multi:{type:Boolean,default:!1}},data:function(){return{blanks:new Array(this.level),openSet:{}}},computed:{list:function(){return t.map(this.data,(function(t){return c({},t)}))},showTextSet:function(){var e=this,i={};return t.each(this.data,(function(t){var a="";if(e.keyword&&t.name){var n=new RegExp(e.keyword,"gm");a=t.name.replace(n,'<span class="color-blue">'.concat(e.keyword,"</span>"))}else a=t.name;i[t.id]=a})),i},selectedSet:function(){var e={};return t.isArray(this.selected)?t.each(this.selected,(function(t){e[t.id]=!0})):this.selected&&this.selected.id&&(e[this.selected.id]=!0),e},statusSet:function(){return 0===this.level?this.getStatusSet(this.data):this.status}},mounted:function(){var e=this;t.each(this.data,(function(t){t.children&&t.children.length&&e.statusSet[t.id]&&e.$set(e.openSet,t.id,!0)}))},methods:{itemClick:function(e){if(e.children&&e.children.length)this.$set(this.openSet,e.id,!this.openSet[e.id]);else if(this.multi){var i=t.clone(this.selected);t.isEmpty(i)||t.isArray(i)||(i=[i]);var a=t.findIndex(i,{id:e.id});a<0?i.push(e):i.splice(a,1),this.$emit("onSelect",i)}else this.$emit("onSelect",e)},clickCheckbox:function(t){var e;t&&(e="checked"===this.statusSet[t.id]?this.setAllSelected(t,!1):this.setAllSelected(t,!0),this.$emit("onSelect",e))},setAllSelected:function(e,i){if(e){var a=t.clone(this.selected);return t.isEmpty(e)?n(e):n([e]),a}function n(e){t.each(e,(function(e){if(e.children&&e.children.length)n(e.children);else{var o=t.findIndex(a,{id:e.id});i?o<0&&a.push(c({},e)):o>=0&&a.splice(o,1)}}))}},onSelect:function(t){this.$emit("onSelect",t)},getStatusSet:function(e){var i={},a={};return t.isArray(this.selected)?t.each(this.selected,(function(t){a[t.id]=!0})):this.selected&&this.selected.id&&(a[this.selected.id]=!0),function e(n){t.each(n,(function(n){if(n.children&&n.children.length){e(n.children);var o=t.some(n.children,(function(t){return i[t.id]})),s=t.some(n.children,(function(t){return!i[t.id]}));o&&(i[n.id]=s?"indeterminate":"checked")}else a[n.id]&&(i[n.id]="checked")}))}(e),i}}}}).call(this,i("391c"))},dc52:function(t,e,i){"use strict";var a={props:{text:{type:String,default:""},checked:{type:Boolean,default:!1},changeRadio:{type:Function,default:function(){return 0}}},data:function(){return{status:!1}},watch:{checked:function(t){this.status=t}},created:function(){this.status=this.checked},methods:{clickEvent:function(){this.status=!0,this.$emit("changeRadio",this.status)}}},n=(i("9455"),i("17cc")),o=Object(n.a)(a,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"app-radio",on:{click:this.clickEvent}},[e("span",{class:{"app-radio-icon":!0,"checked-icon":this.status}}),this.text?e("span",[this._v(this._s(this.text))]):e("span",[this._t("default")],2)])}),[],!1,null,"2340da0b",null);e.a=o.exports},e003:function(t,e,i){var a=i("3925");"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);(0,i("85cb").default)("28a3abcd",a,!0,{sourceMap:!1,shadowMode:!1})},e5a0:function(t,e,i){(t.exports=i("690e")(!1)).push([t.i,'.zjapp .checkbox[data-v-afcfdff2]{font-size:14px;line-height:20px}.zjapp .icon[data-v-afcfdff2]{vertical-align:top;margin-top:1px;margin-right:7px}.zjapp .semiCheckbox[data-v-afcfdff2]{font-family:Chinese Quote,-apple-system,BlinkMacSystemFont,Segoe UI,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Helvetica Neue,Helvetica,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol;font-size:14px;font-variant:tabular-nums;line-height:1.5;color:rgba(0,0,0,.65);box-sizing:border-box;margin:0;padding:0;list-style:none;white-space:nowrap;cursor:pointer;outline:none;display:inline-block;line-height:1;position:relative;vertical-align:middle}.zjapp .semiCheckbox-inner[data-v-afcfdff2]{position:relative;top:0;left:0;display:block;width:18px;height:18px;border:1px solid #d9d9d9;border-radius:2px;background-color:#fff;transition:all .3s}.zjapp .semiCheckbox-indeterminate .semiCheckbox-inner[data-v-afcfdff2]:after{content:" ";transform:translate(-50%,-50%) scale(1);border:0;left:50%;top:50%;width:8px;height:8px;background-color:#4275e8;opacity:1}.zjapp .semiCheckbox-inner[data-v-afcfdff2]:after{transform:rotate(45deg) scale(0);position:absolute;left:5.57142857px;top:2.14285714px;display:table;width:5.71428571px;height:9.14285714px;border:2px solid #fff;border-top:0;border-left:0;content:" ";transition:all .1s cubic-bezier(.71,-.46,.88,.6),opacity .1s;opacity:0}.zjapp .semiCheckbox-checked .semiCheckbox-inner[data-v-afcfdff2]{background-color:#4275e8;border-color:#4275e8}.zjapp .semiCheckbox-checked .semiCheckbox-inner[data-v-afcfdff2]:after{transform:rotate(45deg) scale(1);position:absolute;display:table;border:2px solid #fff;border-top:0;border-left:0;content:" ";transition:opacity .2s cubic-bezier(.12,.4,.29,1.46) .1s;opacity:1}',""])},ef48:function(t,e,i){var a=i("9d55");"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);(0,i("85cb").default)("a1a65c0c",a,!0,{sourceMap:!1,shadowMode:!1})},ef6c:function(t,e,i){"use strict";(function(t){i("cc57"),i("9dd9");var a=i("e89f"),n=i("c9a9"),o=i("07d2"),s=i("774b"),c=i("9eea"),r=i("6144"),l=i("4360");e.a={name:"TreeSelectDialog",components:{Tree:n.a,Item:o.default,Scroller:s.default,appSearchBar:c.default},mixins:[a.a],store:l.a,props:{},data:function(){return{timer:null,show:!1,title:"",isSearching:!1,treeListOri:[],treeList:[],selected:[],callback:function(){},searchKeyword:"",inputFocus:!1,historyLocalstorageKey:"tree-select-search-history",searchHistory:[]}},watch:{searchKeyword:function(t){var e=this;this.$nextTick((function(){e.treeList=t?e.fitlerByKeyword(e.treeListOri,t):e.treeListOri}))}},mounted:function(){this.searchHistory=r.a.getObject(this.historyLocalstorageKey)||[]},methods:{open:function(e){this.show=!0,this.multi=e.multi,this.title=e.title,this.selected=t.clone(e.selected),this.callback=e.callback,this.treeListOri=this.deepClone(e.options),this.treeList=this.treeListOri,this.timer=window.setTimeout((function(){var t=document.querySelector(".color-theme.icon.icon-qualified");t&&t.scrollIntoViewIfNeeded()}),400),this.$emit("open")},close:function(){this.show=!1,this.setSearchMode(!1),this.$refs["app-search-bar-tree-select"]&&this.$refs["app-search-bar-tree-select"].cancelSearch(),window.clearTimeout(this.timer),this.$emit("close")},fitlerByKeyword:function(e,i){var a=this,n=[];return t.each(e,(function(e){if(new RegExp(i,"gm").test(e.name))e.isOpen=!0,n.push(e);else if(!t.isEmpty(e.children)){var o=a.fitlerByKeyword(e.children,i);t.isEmpty(o)||(e.isOpen=!0,e.children=o,n.push(e))}})),n},onSelect:function(t){this.$refs["app-search-bar-tree-select"]&&this.$refs["app-search-bar-tree-select"].saveHistory(),this.selected=t,this.multi||(this.callback(t),this.close())},onConfirm:function(){this.callback(this.selected),this.close()},setSearchMode:function(t){this.isSearching=t},searchClear:function(){this.searchKeyword="",this.treeList=this.treeListOri},selectHistory:function(t){this.searchKeyword=t.val,this.$refs["app-search-bar-tree-select"].setValue(t.val)},hasHistory:function(e){return t.some(this.searchHistory,(function(t){return t.val===e}))},saveHistory:function(){this.searchKeyword&&!this.hasHistory(this.searchKeyword)&&(this.searchHistory.unshift({val:this.searchKeyword}),r.a.saveObject(this.historyLocalstorageKey,this.searchHistory))},deleteHistory:function(t){var e=this.searchHistory.indexOf(t);this.searchHistory.splice(e,1),r.a.saveObject(this.historyLocalstorageKey,this.searchHistory)},deleteHistoryAll:function(){this.searchHistory=[],r.a.saveObject(this.historyLocalstorageKey,[])},deepClone:function(t){return JSON.parse(JSON.stringify(t))}}}}).call(this,i("391c"))},f272:function(t,e,i){var a=i("c62c");"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);(0,i("85cb").default)("6a97aac3",a,!0,{sourceMap:!1,shadowMode:!1})},f431:function(t,e,i){"use strict";var a=i("a8e5").a,n=i("17cc"),o=Object(n.a)(a,(function(){var t=this.$createElement;return(this._self._c||t)("item",{attrs:{label:this.label,text:this.hasSelected?this.selectedText:"",mode:this.mode,editabled:this.editabled},on:{click:this.open}})}),[],!1,null,null,null);e.a=o.exports}}]);