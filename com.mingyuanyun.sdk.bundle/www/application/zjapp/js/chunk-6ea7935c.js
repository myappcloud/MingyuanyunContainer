(window.webpackJsonp_module_entry_zjapp_=window.webpackJsonp_module_entry_zjapp_||[]).push([["chunk-6ea7935c"],{"013c":function(t,e,i){(t.exports=i("690e")(!1)).push([t.i,".zjapp .f-blue[data-v-342fc3b4]{color:#4275e8!important}.zjapp .f-gray[data-v-342fc3b4]{color:#666}",""])},"052b":function(t,e,i){var a=i("013c");"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);(0,i("85cb").default)("3072aa28",a,!0,{sourceMap:!1,shadowMode:!1})},"0b69":function(t,e,i){(t.exports=i("690e")(!1)).push([t.i,".zjapp .influences-image[data-v-1f68c575]{padding:0 15px 13px;flex-direction:column}.zjapp .influences-image[data-v-1f68c575] .item-label{line-height:46px;padding:0;color:#333}.zjapp .influences-textarea[data-v-1f68c575]{margin-bottom:30px}.zjapp .influences-textarea[data-v-1f68c575] textarea{min-height:88px}",""])},1300:function(t,e,i){(t.exports=i("690e")(!1)).push([t.i,'.zjapp .detail-traceability2 .item-text_right[data-v-1a37110c] .item-text{text-align:right}.zjapp .detail-traceability2 .form-check-input[data-v-1a37110c]::-webkit-input-placeholder{color:red}.zjapp .detail-traceability2 .form-check-input[data-v-1a37110c]:-moz-placeholder,.zjapp .detail-traceability2 .form-check-input[data-v-1a37110c]::-moz-placeholder{color:red}.zjapp .detail-traceability2 .form-check-input[data-v-1a37110c]:-ms-input-placeholder{color:red}.zjapp .detail-traceability2 .information[data-v-1a37110c]{padding:12px 15px;position:relative;background:#fff;height:46px;font-size:16px;color:#333;border-bottom:1px solid #ececec}.zjapp .detail-traceability2 .information[data-v-1a37110c]:before{content:"";background:#4275e8;width:4px;height:16px;position:absolute;left:0;top:50%;transform:translateY(-50%)}.zjapp .detail-traceability2 .information-remark[data-v-1a37110c]{padding:15px;font-size:14px;color:#999;background:#fff;line-height:20px;word-break:break-word}.zjapp .detail-traceability2 .information-remark div[data-v-1a37110c]{padding:10px;background:#fafafa}.zjapp .detail-traceability2 .information-item-layer[data-v-1a37110c]{background:#fff;margin-bottom:10px}.zjapp .detail-traceability2 .information-item-layer[data-v-1a37110c]:last-child{margin-bottom:0}.zjapp .detail-traceability2 .information-item[data-v-1a37110c]{display:flex}.zjapp .detail-traceability2 .information-item .item[data-v-1a37110c]{padding:8px 15px 8px 0}.zjapp .detail-traceability2 .information-item .item-label[data-v-1a37110c]{width:40%}.zjapp .detail-traceability2 .information-item .information-item_delete[data-v-1a37110c]{width:48px;display:flex;justify-content:center;align-items:center}.zjapp .detail-traceability2 .information-item .information-item_delete i[data-v-1a37110c]{position:relative;width:18px;height:18px;border-radius:50%;background:#ff3c46;display:flex;justify-content:center;align-items:center}.zjapp .detail-traceability2 .information-item .information-item_delete i[data-v-1a37110c]:after{content:"";width:8px;height:1px;background:#fff}.zjapp .detail-traceability2 .information-item .information-item_right[data-v-1a37110c]{flex:1}.zjapp .detail-traceability2 .information-add[data-v-1a37110c]{padding:20px 0;color:#4275e8;font-size:16px;text-align:center;background:#f2f2f2;margin-bottom:20px}',""])},1304:function(t,e,i){"use strict";var a=i("c5a7");e.__esModule=!0,e.SlotsMixin=void 0;var n=a(i("329b")).default.extend({methods:{slots:function(t,e){void 0===t&&(t="default");var i=this.$slots,a=this.$scopedSlots[t];return a?a(e):i[t]}}});e.SlotsMixin=n},"13a0":function(t,e,i){"use strict";i("cc57");var a=i("07d2"),n=i("e68e"),r=i("e2a7"),o=i("4603"),s={name:"DetailTraceability2",components:{Item:a.default,ItemImgList:n.a},props:{data:{type:Object,data:function(){}}},data:function(){return{activeNames:[1,2,3,4],material:"",materialBy:"",remark:"",materialList:[{name:"",remark:"",image_file:[],formCheck:!0}],id:null,maximumLength:!0}},methods:{init:function(){this.material=this.data.material,this.materialBy=this.data.materialBy,this.remark=this.data.remark,this.materialList=this.data.materialList.map((function(t){return t.formCheck=!1,t})),this.id=this.data.id,this.maximumLength=this.data.material&&this.data.material.length<=15},result:function(){this.activeNames=[1,2,3,4],this.material="",this.materialBy="",this.remark="",this.materialList=[],this.id=null},submit:function(){for(var t=this,e=this.materialList,i=0;i<e.length;i++){var a=e[i];if(!a.name||!a.remark)return this.$set(this.materialList,i,Object.assign(a,{formCheck:!0})),r.a.alert("请完善原材信息"),!1}var n={id:this.id,materialList:e.map((function(t){return{name:t.name,remark:t.remark,image_file:t.image_file}}))};return o.a.postSaveRawMaterial(n).then((function(){setTimeout((function(){t.$emit("result")}),500)}))},informationDelete:function(t){var e=this.materialList;1!==e.length?(e.splice(t,1),this.materialList=e,this.maximumLength=!0):r.a.alert("原料信息不可清空")},informationAdd:function(){this.materialList.push({name:"",remark:"",image_file:[]}),this.materialList.length>=15&&(this.maximumLength=!1)}}},c=(i("e5fe"),i("17cc")),l=Object(c.a)(s,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"detail-traceability2"},[i("item",{staticClass:"item-text_right",attrs:{label:"原材商",text:t.material}}),i("item",{staticClass:"item-text_right",attrs:{label:"原材商经办人",text:t.materialBy}}),i("div",{staticClass:"m10"}),i("div",{staticClass:"information"},[t._v("原材信息")]),t.remark?i("div",{staticClass:"information-remark"},[i("div",[t._v(t._s(t.remark))])]):t._e(),i("div",{staticClass:"m10"}),t._l(t.materialList,(function(e,a){return i("div",{key:a,staticClass:"information-item-layer"},[i("div",{staticClass:"information-item"},[i("div",{staticClass:"information-item_delete",on:{click:function(e){t.informationDelete(a)}}},[i("i")]),i("div",{staticClass:"information-item_right"},[i("item",{attrs:{label:"原材名称",border:"bottom",mode:"edit"}},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.name,expression:"item.name"}],staticClass:"input-align-r f16",class:{"form-check-input":e.formCheck},attrs:{slot:"right",type:"text",placeholder:"请输入",maxlength:"200"},domProps:{value:e.name},on:{input:[function(i){i.target.composing||t.$set(e,"name",i.target.value)},function(t){e.formCheck=!1}]},slot:"right"})]),i("item",{attrs:{label:"原材说明",border:"bottom",mode:"edit"}},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.remark,expression:"item.remark"}],staticClass:"input-align-r f16",class:{"form-check-input":e.formCheck},attrs:{slot:"right",type:"text",placeholder:"请输入",maxlength:"200"},domProps:{value:e.remark},on:{input:[function(i){i.target.composing||t.$set(e,"remark",i.target.value)},function(t){e.formCheck=!1}]},slot:"right"})])],1)]),i("item",{staticClass:"p15"},[i("item-img-list",{ref:"check-edit-item-img",refInFor:!0,attrs:{maxlength:50,"allow-select-album":!0,"allow-buildin-album":!0,"track-text":"材料溯源"},model:{value:e.image_file,callback:function(i){t.$set(e,"image_file",i)},expression:"item.image_file"}})],1)],1)})),t.maximumLength?i("div",{staticClass:"information-add",on:{click:t.informationAdd}},[t._v("添加原材")]):t._e(),i("app-button-group",[i("app-button",{on:{click:t.submit}},[t._v("提交")])],1)],2)}),[],!1,null,"1a37110c",null);e.a=l.exports},"17f4":function(t,e,i){(t.exports=i("690e")(!1)).push([t.i,'.zjapp .detail-traceability1 .traceability-collapse[data-v-41a06b36]{margin-bottom:30px}.zjapp .detail-traceability1 .item-text_right[data-v-41a06b36] .item-text{text-align:right}.zjapp .detail-traceability1[data-v-41a06b36] .item-label{word-break:break-word}.zjapp .detail-traceability1 .info-main[data-v-41a06b36]{padding:0 15px 10px;background:#fff}.zjapp .detail-traceability1 .info-title[data-v-41a06b36]{height:46px;line-height:46px;color:#333;font-size:16px}.zjapp .detail-traceability1 .info-list[data-v-41a06b36]{padding:0 10px;background:#fafafa}.zjapp .detail-traceability1 .info-list .item[data-v-41a06b36]{padding:8px 0;background:#fafafa}.zjapp .detail-traceability1 .info-list .item-label[data-v-41a06b36]{color:#999}.zjapp .detail-traceability1 .info-list .item-text[data-v-41a06b36]{color:#333}.zjapp .detail-traceability1 .info-list input[data-v-41a06b36]{background:#fafafa}.zjapp .detail-traceability1 .info-list[data-v-41a06b36] .item-img-list li{margin-left:10px}.zjapp .detail-traceability1 .information-add[data-v-41a06b36]{padding:20px 0;color:#4275e8;font-size:16px;text-align:center}.zjapp .detail-traceability1[data-v-41a06b36] .information-item{display:flex;margin-bottom:10px;background:#fff}.zjapp .detail-traceability1[data-v-41a06b36] .information-item .item{padding:8px 15px 8px 0}.zjapp .detail-traceability1[data-v-41a06b36] .information-item .item-label{width:40%}.zjapp .detail-traceability1[data-v-41a06b36] .information-item .information-item_delete{width:48px;display:flex;justify-content:center;align-items:center}.zjapp .detail-traceability1[data-v-41a06b36] .information-item .information-item_delete i{position:relative;width:18px;height:18px;border-radius:50%;background:#ff3c46;display:flex;justify-content:center;align-items:center}.zjapp .detail-traceability1[data-v-41a06b36] .information-item .information-item_delete i:after{content:"";width:8px;height:1px;background:#fff}.zjapp .detail-traceability1[data-v-41a06b36] .information-item .information-item_right{flex:1}',""])},"19b5":function(t,e,i){"use strict";i("a240")},2064:function(t,e,i){"use strict";e.__esModule=!0,e.addUnit=function(t){if(!(0,a.isDef)(t))return;return t=String(t),(0,n.isNumber)(t)?t+"px":t};var a=i("b7b4"),n=i("f24f")},"237e":function(t,e,i){(t.exports=i("690e")(!1)).push([t.i,".zjapp .detail-traceability3 .item-text_right[data-v-61697f5a] .item-text{text-align:right}.zjapp .detail-traceability3[data-v-61697f5a] .item-label{word-break:break-word}.zjapp .detail-traceability3 .info-main[data-v-61697f5a]{padding:0 15px;background:#fff}.zjapp .detail-traceability3 .info-title[data-v-61697f5a]{height:46px;line-height:46px;color:#333;font-size:16px}.zjapp .detail-traceability3 .info-list[data-v-61697f5a]{padding:0 10px;background:#fafafa}.zjapp .detail-traceability3 .info-list .item[data-v-61697f5a]{padding:8px 0;background:#fafafa}.zjapp .detail-traceability3 .info-list .item-label[data-v-61697f5a]{color:#999}.zjapp .detail-traceability3 .info-list .item-text[data-v-61697f5a]{color:#333}.zjapp .detail-traceability3 .founder-created[data-v-61697f5a]{padding:12px 0;display:flex;align-items:center;justify-content:space-between}.zjapp .detail-traceability3 .founder-name[data-v-61697f5a]{font-size:12px;color:#999;overflow:hidden;text-overflow:ellipsis;-webkit-line-clamp:2;-webkit-box-orient:vertical;display:-webkit-box;flex:1}.zjapp .detail-traceability3 .founder-name span[data-v-61697f5a]{margin-right:5px}.zjapp .detail-traceability3 .founder-edit[data-v-61697f5a]{color:#4275e8;font-size:14px;display:inline-block;min-width:50px;text-align:right}.zjapp .detail-traceability3 .material-main[data-v-61697f5a]{padding:15px 15px 0 15px;background:#fff}.zjapp .detail-traceability3 .material-list[data-v-61697f5a]{padding:0 10px;background:#fafafa;margin-bottom:10px}.zjapp .detail-traceability3 .material-list[data-v-61697f5a]:last-child{margin-bottom:0}.zjapp .detail-traceability3 .material-list .item[data-v-61697f5a]{padding:8px 0;background:#fafafa}.zjapp .detail-traceability3 .material-list .item-label[data-v-61697f5a]{color:#999}.zjapp .detail-traceability3 .material-list .item-text[data-v-61697f5a]{color:#333}.zjapp .detail-traceability3 .conditon.disabled[data-v-61697f5a] .van-icon{display:none}.zjapp .detail-traceability3 .title[data-v-61697f5a]{color:#333}.zjapp .detail-traceability3 .title-nodata[data-v-61697f5a]{font-size:12px;color:#999;margin-left:5px}",""])},2572:function(t,e,i){"use strict";i("e56d")},"25e0":function(t,e,i){var a=i("5570");"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);(0,i("85cb").default)("5ddc5216",a,!0,{sourceMap:!1,shadowMode:!1})},"27c4":function(t,e,i){var a=i("db6b2");"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);(0,i("85cb").default)("42e360af",a,!0,{sourceMap:!1,shadowMode:!1})},"2c76":function(t,e,i){"use strict";i("c070")},3050:function(t,e,i){"use strict";e.__esModule=!0,e.default=void 0;e.default={name:"姓名",tel:"电话",save:"保存",confirm:"确认",cancel:"取消",delete:"删除",complete:"完成",loading:"加载中...",telEmpty:"请填写电话",nameEmpty:"请填写姓名",confirmDelete:"确定要删除么",telInvalid:"请填写正确的电话",vanContactCard:{addText:"添加联系人"},vanContactList:{addText:"新建联系人"},vanPagination:{prev:"上一页",next:"下一页"},vanPullRefresh:{pulling:"下拉即可刷新...",loosing:"释放即可刷新..."},vanSubmitBar:{label:"合计："},vanCoupon:{valid:"有效期",unlimited:"无使用门槛",discount:function(t){return t+"折"},condition:function(t){return"满"+t+"元可用"}},vanCouponCell:{title:"优惠券",tips:"使用优惠",count:function(t){return t+"张可用"}},vanCouponList:{empty:"暂无优惠券",exchange:"兑换",close:"不使用优惠",enable:"可使用优惠券",disabled:"不可使用优惠券",placeholder:"请输入优惠码"},vanAddressEdit:{area:"地区",postal:"邮政编码",areaEmpty:"请选择地区",addressEmpty:"请填写详细地址",postalEmpty:"邮政编码格式不正确",defaultAddress:"设为默认收货地址",telPlaceholder:"收货人手机号",namePlaceholder:"收货人姓名",areaPlaceholder:"选择省 / 市 / 区"},vanAddressEditDetail:{label:"详细地址",placeholder:"街道门牌、楼层房间号等信息"},vanAddressList:{add:"新增地址"}}},"3c64":function(t,e,i){"use strict";i("163d");var a={name:"ItemTextarea",components:{},props:{value:{type:String,default:""},placeholder:{type:String,default:""},maxlength:{type:Number,default:200},borderBottom:{type:Boolean,default:!0}},data:function(){return{textareaHeight:40,isLock:!1,blurTime:null}},computed:{lastLength:function(){var t=this.value&&this.value.length||0,e=this.maxlength-t;return e>0?e:0}},mounted:function(){var t=this;this.$nextTick((function(){t.textareaHeight=t.$refs.rule&&t.$refs.rule.offsetHeight||40}))},methods:{onfocus:function(){var t=(new Date).getTime();this.blurTime&&t-this.blurTime<300&&window.cordova&&window.cordova.plugins&&window.cordova.plugins.Keyboard&&(this.$refs.input.blur(),window.cordova.plugins.Keyboard.close()),this.blurTime=null,this.$emit("focus")},onblur:function(){this.blurTime=(new Date).getTime(),this.$emit("blur")},setStatus:function(t){console.log(t),this.isLock=t},oninput:function(t){var e=this;setTimeout((function(){if(!e.isLock){var i=t.target.value;i.length>e.maxlength&&(i=i.substring(0,e.maxlength),e.$refs.input.value=i),e.$refs.rule.innerText=i,e.textareaHeight=e.$refs.rule&&e.$refs.rule.offsetHeight+20,e.$emit("input",i),e.$emit("change",i)}}),0)}}},n=(i("2c76"),i("17cc")),r=Object(n.a)(a,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"item-textarea",class:{"border-bottom":t.borderBottom}},[i("div",{staticClass:"item-textarea-content"},[i("textarea",{ref:"input",style:{height:t.textareaHeight+"px"},attrs:{placeholder:t.placeholder},domProps:{value:t.value},on:{focus:t.onfocus,blur:t.onblur,compositionstart:function(e){t.setStatus(!0)},compositionend:function(e){t.setStatus(!1)},input:t.oninput}}),i("div",{ref:"rule",staticClass:"rule"},[t._v("\n      "+t._s(t.value)+"\n    ")]),t.maxlength!==1/0?i("p",{staticClass:"counter"},[t._v("\n      "+t._s(t.lastLength)+"\n    ")]):t._e()])])}),[],!1,null,null,null);e.a=r.exports},"3fcb":function(t,e,i){var a=i("237e");"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);(0,i("85cb").default)("37b37ee2",a,!0,{sourceMap:!1,shadowMode:!1})},"427f":function(t,e,i){"use strict";i("6cb0")},"42d6":function(t,e,i){"use strict";var a=i("8969").a,n=(i("7648"),i("17cc")),r=Object(n.a)(a,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"detail-traceability1"},[i("item",{staticClass:"item-text_right",attrs:{label:"材料供应商",text:t.contractor}}),i("item",{staticClass:"item-text_right",attrs:{label:"供应商经办人",text:t.contractorBy}}),i("div",{staticClass:"m10"}),i("van-collapse",{staticClass:"traceability-collapse",model:{value:t.activeNames,callback:function(e){t.activeNames=e},expression:"activeNames"}},[i("van-collapse-item",{staticClass:"conditon",attrs:{name:1}},[i("div",{attrs:{slot:"title"},slot:"title"},[t._v("材料信息")]),i("div",{staticClass:"info-main"},[t.basic.length?i("div",{staticClass:"info-title"},[t._v("基本信息")]):t._e(),i("div",{staticClass:"info-list"},t._l(t.basic,(function(e,a){return i("item",{key:a,attrs:{label:e.name,border:"bottom",mode:"edit"}},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.value,expression:"item.value"}],staticClass:"input-align-r f16",attrs:{slot:"right",type:"text",placeholder:"请输入",maxlength:"200"},domProps:{value:e.value},on:{input:function(i){i.target.composing||t.$set(e,"value",i.target.value)}},slot:"right"})])}))),t.composition.length?i("div",{staticClass:"info-title"},[t._v("产品构造")]):t._e(),i("div",{staticClass:"info-list"},t._l(t.composition,(function(e,a){return i("item",{key:a,attrs:{label:e.name,border:"bottom",mode:"edit"}},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.value,expression:"item.value"}],staticClass:"input-align-r f16",attrs:{slot:"right",type:"text",placeholder:"请输入",maxlength:"200"},domProps:{value:e.value},on:{input:function(i){i.target.composing||t.$set(e,"value",i.target.value)}},slot:"right"})])}))),i("div",{staticClass:"info-title"},[t._v("影视资料")]),i("div",{staticClass:"info-list"},[i("item",[i("item-img-list",{ref:"check-edit-item-img",attrs:{maxlength:50,"allow-select-album":!0,"allow-buildin-album":!0,"track-text":"材料溯源"},model:{value:t.image_file,callback:function(e){t.image_file=e},expression:"image_file"}})],1)],1)]),i("loading-status",{staticClass:"traceability-empty",attrs:{"is-empty":!t.basic.length,"empty-text":"暂无基本信息"}})],1),i("van-collapse-item",{staticClass:"conditon",attrs:{name:2}},[i("div",{attrs:{slot:"title"},slot:"title"},[t._v("原材信息")]),t._l(t.material_information,(function(e,a){return i("div",{key:a,staticClass:"information-item"},[i("div",{staticClass:"information-item_delete",on:{click:function(i){t.informationDelete(e,a)}}},[Boolean(!1===e.can_change_user)?t._e():i("i")]),i("div",{staticClass:"information-item_right"},[i("single-select",{attrs:{options:t.contractorList,"form-check":e.formCheck,title:"原材商",editabled:e.can_change_user},on:{onSelect:function(e){t.changeContractor(e,a)}},model:{value:e.information,callback:function(i){t.$set(e,"information",i)},expression:"item.information"}}),i("user-select",{attrs:{"form-check":e.formCheck,options:t.contractorUsersList[e.information.id]||[],"linked-data":e.information,"before-open":t.checkContractorIsAvailable,editabled:e.can_change_user,title:"原材商经办人"},model:{value:e.informationBy,callback:function(i){t.$set(e,"informationBy",i)},expression:"item.informationBy"}})],1)])})),t.material_information.length&&t.maximumLength?i("div",{staticClass:"information-add",on:{click:t.informationAdd}},[t._v("\n        添加原材商\n      ")]):t._e(),i("loading-status",{staticClass:"traceability-empty",attrs:{type:"todo","is-empty":!t.material_information.length,"empty-text":""}},[t.maximumLength?i("div",{staticClass:"information-add",attrs:{slot:"empty-content"},on:{click:t.informationAdd},slot:"empty-content"},[t._v("\n          添加原材商\n        ")]):t._e()])],2)],1),i("app-button-group",[i("app-button",{on:{click:t.submit}},[t._v("提交")])],1)],1)}),[],!1,null,"41a06b36",null);e.a=r.exports},4412:function(t,e,i){"use strict";e.__esModule=!0,e.createBEM=function(t){return function(e,i){return e&&"string"!=typeof e&&(i=e,e=""),e=a(t,e,"__"),i?[e,n(e,i)]:e}};function a(t,e,i){return e?t+i+e:t}function n(t,e){if("string"==typeof e)return a(t,e,"--");if(Array.isArray(e))return e.map((function(e){return n(t,e)}));var i={};return e&&Object.keys(e).forEach((function(a){i[t+"--"+a]=e[a]})),i}},4603:function(t,e,i){"use strict";(function(t){i("163d"),i("cc57"),i("6d57"),i("06a2");var a=i("1b7e"),n=i("e2a7"),r=i("6bf2"),o=i.n(r),s=i("3122"),c=i("162a"),l=i("3bd5"),u=i("9094");function d(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"YYYY-MM-DD HH:mm";return t.isEmpty(e)?"":o()(e).format(i)}function f(){return a.a.getHasNetwork().then((function(t){if(!t)return n.a.alert("当前无网络"),Promise.reject("no network")}))}function p(t){try{return t&&"string"==typeof t?JSON.parse(t):t}catch(e){return t}}function m(e){var i=[];return t.each(e,(function(t){!t.url&&t.temp?i.push(s.a.uploadImage(t.temp).then((function(e){t.url=e,delete t.temp}))):delete t.temp,!t.videoUrl&&t.videoTemp?i.push(s.a.uploadImage(t.videoTemp).then((function(e){t.videoUrl=e,delete t.videoTemp}))):delete t.videoTemp})),Promise.all(i).then((function(){return e}))}var h={getSectionList:function(t){return c.a.request("/online/common/get-bidsection-list-of-project",{proj_id:t}).catch((function(t){return $log.error("获取标段列表-error：",t),Promise.reject(t)}))},getMaterialList:function(){return Object(u.c)().catch((function(t){return $log.error("获取标段下材料列表-error：",t),Promise.reject(t)}))},getBrandList:function(t){return c.a.request("/online/common/get-brand-list-of-material",{material_id:t}).catch((function(t){return $log.error("获取材料下品牌列表-error：",t),Promise.reject(t)}))},getContractorList:function(t){return Object(u.b)({proj_id:t}).catch((function(t){return $log.error("获取标段下供应商列表-error：",t),Promise.reject(t)}))},getContractorUsersList:function(t){return c.a.request("/online/common/get-users-of-contractor",{contractor_id:t}).then((function(t){return(t||[]).map((function(t){return t.head_portrait=function(t,e){try{return t?s.a.getThumbnailFromUrl(t):"image"===e?"static/photo-default.png":"static/default_img_simple.png"}catch(t){return"image"===e?"static/photo-default.png":"static/default_img_simple.png"}}(t.headimg_url,"avater"),t}))})).catch((function(t){return $log.error("获取供应商下用户-error：",t),Promise.reject(t)}))},postSubmitTask:function(t){return n.a.loading("正在提交..."),f().then((function(){var e={proj_id:t.proj_id,name:t.name,material_id:t.materialId,brand_id:t.brandId,contractor_id:t.contractorId,agent_user_id:t.contractorUsersId,place:t.place,remark:t.remark};return t.id&&(e.id=t.id),$log.log("材料溯源-提交任务-数据：",e),c.a.post("/online/material-traceability/save-task",null,e).then((function(t){return n.a.hideLoading(),n.a.alert("提交成功"),t})).catch((function(t){return n.a.hideLoading(),n.a.alert(t.errmsg),Promise.reject(t)}))})).catch((function(t){return $log.error("材料溯源-提交任务-error：",t),Promise.reject(t)}))},getIndexList:function(t){return f().then((function(){return c.a.request("/online/material-traceability/task-list",t).then((function(t){return t.items=(t.items||[]).map((function(t){return t.created_on=d(t.created_on,"YYYY-MM-DD"),t})),t}))})).catch((function(t){return $log.error("材料溯源-列表-error：",t),Promise.reject(t)}))},getTaskDetail:function(t){return f().then((function(){return c.a.request("/online/material-traceability/get-task-detail",{id:t})})).then((function(t){return t?{id:t.id,can_change_user:t.can_change_user,created_by_name:t.created_by_name,can_edit:t.can_edit,section:{id:t.bidsection_id,name:t.bidsection_name},material:{id:t.material_id,name:t.material_name},brand:{id:t.brand_id,name:t.brand_name},contractor:{id:t.contractor_id,name:t.contractor_name},contractorUsers:{id:t.agent_user_id,name:t.agent_user_name},place:t.place,remark:t.remark,name:t.name}:Promise.reject(t.errmsg)})).catch((function(t){return $log.error("材料溯源-任务详情-error：",t),Promise.reject(t)}))},getTraceabilityDetail:function(e){return f().then((function(){return c.a.request("/online/material-traceability/get-trace-detail",{id:e}).then((function(e){if(!e)return Promise.reject(e.errmsg);e.task&&(e.task.basic_info=p(e.task.basic_info),e.task.composition=p(e.task.composition)),e.supply&&(e.supply.images=p(e.supply.images),e.supply.basic_info=p(e.supply.basic_info),e.supply.composition=p(e.supply.composition)),e.status=Number(e.status);var i=e.task,a=void 0===i?{}:i,n=e.supply,r=void 0===n?{}:n,o=e.raw_supply,s=void 0===o?{}:o;a=a||{},r=r||{},s=s||[];var c=t.isEmpty(r.basic_info)?(a.basic_info||[]).map((function(t){return{name:t,value:""}})):r.basic_info,u=t.isEmpty(r.composition)?(a.composition||[]).map((function(t){return{name:t,value:""}})):r.composition,f=t.isEmpty(s)?[]:(s||[]).map((function(t){return{id:t.id,can_change_user:t.can_change_user,information:{id:t.contractor_id,name:t.contractor_name,formCheck:!1},informationBy:{id:t.agent_user_id,name:t.agent_user_name,formCheck:!1}}})),m={basic:c,composition:u,image_file:r.images||[],material_information:f,proj_id:a.proj_id,contractor:r.contractor_name,contractorBy:r.agent_user_name},h=s.filter((function(t){return t.agent_user_id===l.a.getUser().user_id}))[0]||{},b=t.isEmpty(h.raw_material_info)?[{name:"",remark:"",image_file:[]}]:p(h.raw_material_info||[{name:"",remark:"",image_file:[]}]);return{traceability1:m,traceability2:{id:h.id,material:h.contractor_name,materialBy:h.agent_user_name,remark:a.guideline,materialList:b},traceability3:{material:{basic:r.basic_info||[],product:r.composition||[],submit_time:d(r.submit_time,"YYYY-MM-DD"),annotate:"".concat(r.agent_user_name," - ").concat(r.contractor_name),image_file:r.images||[],can_edit:r.can_edit},rawMaterial:s.filter((function(t){return 0===Number(t.is_system_created)})).map((function(t){return t.annotate="".concat(t.agent_user_name," - ").concat(t.contractor_name),t.submit_time=d(t.submit_time,"YYYY-MM-DD"),t.raw_material_info=p(t.raw_material_info||"[]"),t}))},status:e.status,title:a.name}}))})).catch((function(t){return $log.error("材料溯源-任务详情-error：",t),Promise.reject(t)}))},postSaveTraceabilitySupplier:function(t){return n.a.loading("正在提交..."),f().then((function(){return m(t.image_file).then((function(e){t.image_file=e})).then((function(){var e={task_id:t.id,basic_info:JSON.stringify(t.basic),composition:JSON.stringify(t.composition),images:JSON.stringify(t.image_file),raw_supply:JSON.stringify(t.material_information),proj_id:t.proj_id};return c.a.post("/online/material-traceability/save-supply-data",null,e).then((function(t){return n.a.hideLoading(),n.a.alert("提交成功"),t})).catch((function(t){return n.a.hideLoading(),n.a.alert(t.errmsg),Promise.reject(t)}))}))})).catch((function(t){return $log.error("材料溯源-供应商数据-error：",t),Promise.reject(t)}))},postSaveRawMaterial:function(e){return n.a.loading("正在提交..."),f().then((function(){var i=[];return t.each(e.materialList,(function(t){var e=m(t.image_file).then((function(e){t.image_file=e}));i.push(e)})),Promise.all(i).then((function(){var t={id:e.id,raw_material_info:JSON.stringify(e.materialList)};return c.a.post("/online/material-traceability/save-raw-supply-data",null,t).then((function(t){return n.a.hideLoading(),n.a.alert("提交成功"),t})).catch((function(t){return n.a.hideLoading(),n.a.alert(t.errmsg),Promise.reject(t)}))}))})).catch((function(t){return $log.error("材料溯源-原材商保存-error：",t),Promise.reject(t)}))},getInfluencesList:function(t,e){return f().then((function(){var i={process:"get-process-list",accept:"get-accept-list",assemble:"get-assemble-list"}[e];return $log.log("材料溯源-加工出厂等列表-参数：",t,i),c.a.request("/online/material-traceability/".concat(i),t).then((function(t){return t&&t.items?(t.items=t.items.map((function(t){return t.created_info=[{id:t.user_id,name:t.user_name}],t.created_on=d(t.created_on),t.images=p(t.images||"[]"),t})),t):Promise.reject(t.errmsg)}))})).catch((function(t){return $log.error("材料溯源-加工出厂等列表-error：",t),Promise.reject(t)}))},postSaveInfluences:function(t,e){return n.a.loading("正在提交..."),f().then((function(){return m(t.images).then((function(e){t.images=e})).then((function(){var i={task_id:t.task_id,proj_id:t.proj_id,images:JSON.stringify(t.images),remark:t.remark,building_id:t.building_id,unit:t.unit,floor:t.floor,room_id:t.room_id,place:t.place};t.id&&(i.id=t.id);var a={process:"save-process-data",accept:"save-accept-data",assemble:"save-assemble-data"}[e];return c.a.post("/online/material-traceability/".concat(a),null,i).then((function(t){return n.a.hideLoading(),n.a.alert("提交成功"),t})).catch((function(t){return n.a.hideLoading(),n.a.alert(t.errmsg),Promise.reject(t)}))}))})).catch((function(t){return $log.error("材料溯源-加工出厂、进场验收、安装的保存-error：",t),Promise.reject(t)}))},postDelelteTask:function(t){return n.a.loading("正在提交..."),f().then((function(){return $log.log("材料溯源-删除任务-参数：",t),c.a.post("/online/material-traceability/delete-task",null,{id:t}).then((function(t){return n.a.hideLoading(),n.a.alert("删除成功"),t})).catch((function(t){return n.a.hideLoading(),n.a.alert(t.errmsg),Promise.reject(t)}))})).catch((function(t){return $log.error("材料溯源-删除任务-error：",t),Promise.reject(t)}))}};e.a=h}).call(this,i("391c"))},"4d1b":function(t,e,i){"use strict";var a=i("c5a7");e.__esModule=!0,e.default=void 0;var n=a(i("329b")),r=i("53a5"),o=a(i("3050")),s=n.default.prototype,c=n.default.util.defineReactive;c(s,"$vantLang","zh-CN"),c(s,"$vantMessages",{"zh-CN":o.default});var l={messages:function(){return s.$vantMessages[s.$vantLang]},use:function(t,e){var i;s.$vantLang=t,this.add(((i={})[t]=e,i))},add:function(t){void 0===t&&(t={}),(0,r.deepAssign)(s.$vantMessages,t)}};e.default=l},"53a5":function(t,e,i){"use strict";e.__esModule=!0,e.deepAssign=r;var a=i("b7b4"),n=Object.prototype.hasOwnProperty;function r(t,e){return Object.keys(e).forEach((function(i){!function(t,e,i){var o=e[i];(0,a.isDef)(o)&&(n.call(t,i)&&(0,a.isObj)(o)&&"function"!=typeof o?t[i]=r(Object(t[i]),e[i]):t[i]=o)}(t,e,i)})),t}},5570:function(t,e,i){(t.exports=i("690e")(!1)).push([t.i,".zjapp .popup-customize-use-header[data-v-16a26812]{display:flex;flex-direction:column}[data-v-16a26812] .popup-customize-use-header.van-popup--bottom.van-popup--round{border-radius:10px 10px 0 0}.zjapp .popup-customize-use-header .popup-header[data-v-16a26812]{display:flex;align-items:center;justify-content:space-between;padding:0 15px;height:46px;border:none;background-image:linear-gradient(0deg,#ececec,#ececec 50%,transparent 0);background-size:100% 1px;background-repeat:no-repeat;background-position:bottom}.zjapp .popup-customize-use-header .popup-header .popup-header__left[data-v-16a26812]{width:80px;flex-shrink:0}.zjapp .popup-customize-use-header .popup-header .popup-header__title[data-v-16a26812]{flex:1;text-align:center;font-size:18px}.zjapp .popup-customize-use-header .popup-header .popup-header__right[data-v-16a26812]{width:80px;flex-shrink:0;font-weight:800;text-align:right}.zjapp .popup-customize-use-header .popup-body[data-v-16a26812]{display:flex;position:relative;height:calc(100% - 46px);overflow:hidden}.zjapp .f-blue[data-v-16a26812]{color:#4275e8}.zjapp .f-gray[data-v-16a26812]{color:#666}",""])},"574c":function(t,e,i){(t.exports=i("690e")(!1)).push([t.i,".zjapp .item-textarea{background-color:#fff;padding:5px 15px}.zjapp .item-textarea-content{position:relative}.zjapp .item-textarea .rule,.zjapp .item-textarea textarea{width:100%;min-height:40px;line-height:20px;font-size:16px;padding:0;border:none}.zjapp .item-textarea .rule{position:absolute;top:0;left:0;visibility:hidden;word-break:break-all}.zjapp .item-textarea .counter{text-align:right;margin:0 0 -5px 0;height:15px;line-height:15px;color:#b2b2b2;font-size:12px}",""])},"5a34":function(t,e,i){"use strict";(function(t){i("6d57"),i("e10e");var a=i("774b"),n=i("42d6"),r=i("13a0"),o=i("941a"),s=i("4603");e.a={name:"DetailTraceability",components:{Scroller:a.default,DetailTraceability1:n.a,DetailTraceability2:r.a,DetailTraceability3:o.a},data:function(){return{isLoading:!1,emptyTips:"暂无数据",mode:2,traceability1:{},traceability2:{},traceability3:{}}},computed:{id:function(){return this.$store.state.materialTraceability.id},noData:function(){var t=this[["traceability1","traceability2","traceability3"][this.mode-1]];return 0===Object.keys(t||{}).length}},methods:{init:function(){var t=this.refsSelect();t&&t.result(),this.getTraceabilityDetail()},refsSelect:function(){var t=this.mode-1;return this.$refs[["traceability1","traceability2","traceability3"][t]]},edit:function(e,i){var a=this;if(this.mode=e,2===e){var n=this.traceability2;this.traceability2={id:i.id,material:i.contractor_name,materialBy:i.agent_user_name,remark:n.remark,materialList:t.isEmpty(i.raw_material_info)?[{name:"",remark:"",image_file:[]}]:i.raw_material_info}}this.$nextTick((function(){var t=a.refsSelect();t&&t.init()}))},getTraceabilityDetail:function(){var t=this;return this.isLoading=!0,s.a.getTraceabilityDetail(this.id).then((function(e){t.traceability1=e.traceability1,t.traceability2=e.traceability2,t.traceability3=e.traceability3,console.log("材料溯源-溯源页面-处理后的数据：",JSON.parse(JSON.stringify(e))),t.mode=e.status,t.$store.commit("materialTraceability/SET_DETAIL_TITLE",e.title),t.$nextTick((function(){t.refsSelect().init()}))})).finally((function(){t.isLoading=!1}))}}}}).call(this,i("391c"))},"5f91":function(t,e,i){"use strict";i("8005")},6147:function(t,e,i){"use strict";e.__esModule=!0,e.createNamespace=function(t){return t="van-"+t,[(0,n.createComponent)(t),(0,a.createBEM)(t),(0,r.createI18N)(t)]};var a=i("4412"),n=i("7e06"),r=i("65af")},"65af":function(t,e,i){"use strict";var a=i("c5a7");e.__esModule=!0,e.createI18N=function(t){var e=(0,r.camelize)(t)+".";return function(t){for(var i=(0,n.get)(o.default.messages(),e+t)||(0,n.get)(o.default.messages(),t),a=arguments.length,r=new Array(a>1?a-1:0),s=1;s<a;s++)r[s-1]=arguments[s];return"function"==typeof i?i.apply(void 0,r):i}};var n=i("b7b4"),r=i("a1aa"),o=a(i("4d1b"))},6718:function(t,e,i){"use strict";i.d(e,"a",(function(){return o}));i("163d"),i("cc57");var a=i("b7b4"),n={name:"SwipeTab",props:{title:{type:String}},data:function(){return{offset:0,style:{},bem:Object(a.createNamespace)("swipe-item")[1](),parent:{}}},computed:{index:function(){return this.parent.tabs.indexOf(this)}},beforeCreate:function(){this.$parent.swipes.push(this)},created:function(){this.findParent("SwipeTabs")},destroyed:function(){this.$parent.swipes.splice(this.$parent.swipes.indexOf(this),1)},mounted:function(){var t=this,e=this.parent.tabs,i=this.parent.$slots.default.indexOf(this.$vnode);e.splice(-1===i?e.length:i,0,this),this.$nextTick((function(){var e=t.$parent,i=e.vertical,a=e.computedWidth,n=e.computedHeight;t.style={width:a+"px",height:i?a+"px":n+"px",transform:"translate".concat(i?"Y":"X","(").concat(t.offset,"px)")}}))},methods:{findParent:function(t){for(var e=this.$parent;e;){if(e.$options.name===t){this.parent=e;break}e=e.$parent}}}},r=i("17cc"),o=Object(r.a)(n,(function(){var t=this.$createElement;return(this._self._c||t)("div",this._g({class:this.bem,style:this.style},this.$listeners),[this._t("default")],2)}),[],!1,null,null,null).exports,s={name:"SwipeTabs",model:{prop:"tabIndex",event:"change"},props:{tabIndex:{type:Number,default:0},markType:{type:String,default:"line"},showTabs:{type:Boolean,default:!0},touchable:{type:Boolean,default:!0}},data:function(){return{curIndex:0,initIndex:0,tabs:[],tabScrollVersion:null}},computed:{tabsPadding:function(){return Math.max(24-4*this.tabs.length,0)},markLeft:function(){var t=(100-2*this.tabsPadding)/this.tabs.length;return this.tabsPadding+(this.curIndex+.5)*t}},watch:{tabIndex:function(t){t!==this.curIndex&&(this.curIndex=t,this.$refs.swipe.swipeTo(t,{immediate:!0}))},curIndex:function(){this.scrollTabsTocurrent()}},created:function(){this.initIndex=this.tabIndex,this.curIndex=this.tabIndex},activated:function(){this.initIndex=this.tabIndex,this.curIndex=this.tabIndex},mounted:function(){this.$nextTick(this.scrollTabsTocurrent)},methods:{changeIndex:function(t){this.$refs.swipe.swipeTo(t)},onChange:function(t){this.curIndex=t,this.$emit("change",t)},scrollTabsTocurrent:function(){var t=this.$refs["tabs-scroll"],e=this.$refs["tab-point"]?this.$refs["tab-point"][this.curIndex]:null;if(t&&e){var i=t.getBoundingClientRect(),a=e.getBoundingClientRect(),n=a.left-i.left,r=i.right-a.right;n<0&&this.tabScrollBy(n),r<0&&this.tabScrollBy(-r)}},tabScrollBy:function(t){var e=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:200,a=this.$refs["tabs-scroll"];if(a){var n=a.scrollLeft,r=n+t,o=Math.round(i/16.7),s=t/o,c=n,l=this.tabScrollVersion=+new Date;return n===r?Promise.resolve():new Promise((function(t){!function i(){window.requestAnimationFrame((function(){l===e.tabScrollVersion&&(c+=s,a.scrollLeft=c,n<r&&c<r||n>r&&c>r?i():(a.scrollTop=r,t()))}))}()}))}}}},c=(i("bcf4"),Object(r.a)(s,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"swipe-tabs"},[t.showTabs?["line"===t.markType?i("div",{staticClass:"tabs border-bottom",style:{padding:"0 "+Math.max(24-4*t.tabs.length,0)+"%"}},[t._l(t.tabs,(function(e){return i("div",{key:e.index,staticClass:"tab",class:{"tab-current":e.index===t.curIndex},on:{click:function(i){t.changeIndex(e.index)}}},[t._v("\n        "+t._s(e.title)+"\n      ")])})),i("div",{staticClass:"mark-line",style:{left:t.markLeft+"%"}})],2):t._e(),"point"===t.markType?i("div",{staticClass:"tabs-point border-bottom"},[i("div",{ref:"tabs-scroll",staticClass:"tabs-scroll"},t._l(t.tabs,(function(e){return i("div",{key:e.index,ref:"tab-point",refInFor:!0,staticClass:"tab-point",class:{"tab-current":e.index===t.curIndex},on:{click:function(i){t.changeIndex(e.index)}}},[t._v("\n          "+t._s(e.title)+"\n        ")])})))]):t._e()]:t._e(),t._t("fixed"),i("van-swipe",{ref:"swipe",attrs:{"initial-swipe":t.initIndex,"show-indicators":!1,duration:250,loop:!1,touchable:t.touchable},on:{change:t.onChange}},[t._t("default")],2)],2)}),[],!1,null,"025feb99",null));e.b=c.exports},"6cb0":function(t,e,i){var a=i("c5fd");"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);(0,i("85cb").default)("12c8d735",a,!0,{sourceMap:!1,shadowMode:!1})},7648:function(t,e,i){"use strict";i("c589")},"78ee":function(t,e,i){var a=i("0b69");"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);(0,i("85cb").default)("9d3de35e",a,!0,{sourceMap:!1,shadowMode:!1})},"7e06":function(t,e,i){"use strict";var a=i("c5a7");e.__esModule=!0,e.unifySlots=s,e.createComponent=function(t){return function(e){var i;return"function"==typeof e&&(e={functional:!0,props:(i=e).props,model:i.model,render:function(t,e){return i(t,e.props,s(e),e)}}),e.functional||(e.mixins=e.mixins||[],e.mixins.push(r.SlotsMixin)),e.name=t,e.install=o,e}},i("4d1b");var n=i("a1aa"),r=i("1304");a(i("329b"));function o(t){var e=this.name;t.component(e,this),t.component((0,n.camelize)("-"+e),this)}function s(t){var e=t.scopedSlots||t.data.scopedSlots||{},i=t.slots();return Object.keys(i).forEach((function(t){e[t]||(e[t]=function(){return i[t]})})),e}},"7e4d":function(t,e,i){"use strict";i("25e0")},8005:function(t,e,i){var a=i("f6ba7");"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);(0,i("85cb").default)("0aea2708",a,!0,{sourceMap:!1,shadowMode:!1})},8153:function(t,e,i){"use strict";var a=i("ae7d").a,n=(i("9b7b"),i("17cc")),r=Object(n.a)(a,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("popup-has-header",{attrs:{title:"选择部位"},on:{closed:t.onClosed},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[i("span",{staticClass:"f-gray",attrs:{slot:"header_left"},on:{click:t.closePopup},slot:"header_left"},[t._v("取消")]),i("span",{staticClass:"f-gray",class:{"f-blue":t.computedIsCanFinish},attrs:{slot:"header_right"},on:{click:t.submit},slot:"header_right"},[t._v("确定")]),i("widget",t._b({ref:"place-widget",attrs:{slot:"body_main","position-data":t.positionData,selected:t.selected},slot:"body_main"},"widget",t.$attrs,!1))],1)}),[],!1,null,"342fc3b4",null);e.a=r.exports},"853c":function(t,e,i){(t.exports=i("690e")(!1)).push([t.i,".zjapp .material-traceability-detail .detail-tabs[data-v-28c3ae48] .tab{padding:10px 3px}",""])},8969:function(t,e,i){"use strict";(function(t){i("ed63"),i("cc57");var a=i("07d2"),n=i("e68e"),r=i("5a71"),o=i("cd05"),s=i("e2a7"),c=i("4603");i("f97c");e.a={name:"DetailTraceability1",components:{Item:a.default,ItemImgList:n.a,SingleSelect:r.a,UserSelect:o.a},props:{data:{type:Object,data:function(){}}},data:function(){return{activeNames:[1,2],contractor:"",contractorBy:"",basic:[],composition:[],material_information:[],image_file:[],contractorList:[],contractorUsersList:{},proj_id:"",maximumLength:!0}},computed:{id:function(){return this.$store.state.materialTraceability.id}},activated:function(){},methods:{init:function(){var t=this.data,e=t.contractor,i=t.contractorBy,a=t.basic,n=t.composition,r=t.material_information,o=t.image_file,s=t.proj_id;this.contractor=e||"",this.contractorBy=i||"",this.basic=a||[],this.composition=n||[],this.material_information=r||[],this.image_file=o||[],this.proj_id=s,this.maximumLength=r&&r.length<=10,this.getContractorList()},result:function(){this.activeNames=[1,2],this.contractor="",this.contractorBy="",this.basic=[],this.composition=[],this.material_information=[],this.image_file=[],this.contractorList=[],this.contractorUsersList={}},submit:function(){var e=this,i=this.basic,a=this.composition,n=this.material_information;for(var r in i){var o=i[r];if(t.isEmpty(o.value))return void s.a.alert("请填写基本信息-".concat(o.name))}for(var l in a){var u=a[l];if(t.isEmpty(u.value))return void s.a.alert("请填写产品构造-".concat(u.name))}for(var d=[],f=0;f<n.length;f++){var p=n[f];if(!p.information.id||!p.informationBy.id)return this.$set(this.material_information,f,Object.assign(p,{formCheck:!0})),s.a.alert("请完善原材商信息"),!1;if(d.includes(p.informationBy.id))return s.a.alert("原材商经办人不能重复"),!1;d.push(p.informationBy.id)}n=n.map((function(t){return{id:t.id,contractor_id:t.information.id,agent_user_id:t.informationBy.id}}));var m={basic:i,composition:a,image_file:this.image_file,material_information:n,id:this.id,proj_id:this.proj_id};return c.a.postSaveTraceabilitySupplier(m).then((function(){setTimeout((function(){e.$emit("result")}),500)}))},getContractorList:function(){var t=this;c.a.getContractorList(this.proj_id).then((function(e){t.contractorList=e}))},checkContractorIsAvailable:function(t){var e=this,i=this.contractorUsersList;return $log.log("材料溯源-溯源-供应商添加数据-点击供应人选择：",t," 已选择原材商：",Boolean(t&&t.id)," 请求供应人列表：",Boolean(t&&t.id&&(!i||!i[t.id]))),t&&t.id?!(!i||!i[t.id])||(s.a.loading("加载中..."),this.getContractorUsersList(t.id).then((function(){return new Promise((function(t){e.$nextTick((function(){s.a.hideLoading(),t(!0)}))}))})).catch((function(t){return s.a.alert(t.errmsg),s.a.hideLoading(),!1}))):(s.a.alert("请先选择原材商"),!1)},changeContractor:function(t,e){this.$set(this.contractorUsersList,t.id,[]),this.material_information=this.material_information.map((function(i,a){return i.information&&i.information.id===t.id&&a===e&&(i.informationBy={}),i})),this.getContractorUsersList(t.id)},getContractorUsersList:function(t){var e=this;return c.a.getContractorUsersList(t).then((function(i){e.$set(e.contractorUsersList,t,i)}))},informationDelete:function(t,e){if(!1===t.can_change_user)return!1;var i=this.material_information;i.splice(e,1),this.material_information=i,this.maximumLength=!0},informationAdd:function(){this.material_information.push({information:{},informationBy:{}}),this.material_information.length>=10&&(this.maximumLength=!1)}}}}).call(this,i("391c"))},"8e40":function(t,e,i){"use strict";i("78ee")},9094:function(t,e,i){"use strict";i.d(e,"c",(function(){return o})),i.d(e,"b",(function(){return s})),i.d(e,"a",(function(){return c}));var a=i("5e8d"),n=i("da71"),r=i("162a");function o(){return Object(a.a)().then((function(){var t=n.a.materialList.url;return r.a.request(t)}))}function s(t){return Object(a.a)().then((function(){var e=n.a.contractorListByProject.url;return r.a.request(e,t)}))}function c(t){return Object(a.a)().then((function(){var e=n.a.getContractList.url;return r.a.request(e,t)}))}},"941a":function(t,e,i){"use strict";var a=i("07d2"),n=i("e68e"),r={name:"DetailTraceability3",components:{Item:a.default,ItemImgList:n.a},props:{data:{type:Object,data:function(){}}},data:function(){return{activeNames:[],material:{basic:[],product:[],submit_time:"",annotate:"",image_file:[]},rawMaterial:[]}},computed:{materialNoDate:function(){return!((this.material.basic&&this.material.basic.length||this.material.product&&this.material.product.length)&&this.material.annotate)}},methods:{init:function(){this.material=this.data.material,this.rawMaterial=this.data.rawMaterial,this.isPutAway()},result:function(){this.activeNames=[1,2],this.material=[],this.rawMaterial=[],this.isPutAway()},isPutAway:function(){this.activeNames=[],this.materialNoDate||this.activeNames.push(1),this.rawMaterial.length&&this.activeNames.push(2)},edit:function(t,e){this.$emit("onEdit",t,e)}}},o=(i("ade5"),i("17cc")),s=Object(o.a)(r,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"detail-traceability3"},[i("van-collapse",{staticClass:"traceability-collapse",model:{value:t.activeNames,callback:function(e){t.activeNames=e},expression:"activeNames"}},[i("van-collapse-item",{staticClass:"conditon",class:{disabled:t.materialNoDate},attrs:{disabled:t.materialNoDate,name:1}},[i("div",{staticClass:"title",attrs:{slot:"title"},slot:"title"},[t._v("\n        材料信息"),t.materialNoDate?i("span",{staticClass:"title-nodata"},[t._v("暂无数据")]):t._e()]),t.materialNoDate?t._e():i("div",{staticClass:"info-main"},[i("div",{staticClass:"info-title"},[t._v("基本信息")]),i("div",{staticClass:"info-list"},t._l(t.material.basic,(function(t,e){return i("item",{key:e,staticClass:"item-text_right",attrs:{label:t.name,text:t.value}})}))),t.material.product&&t.material.product?i("div",{staticClass:"info-title"},[t._v("产品构造")]):t._e(),i("div",{staticClass:"info-list"},t._l(t.material.product,(function(t,e){return i("item",{key:e,staticClass:"item-text_right",attrs:{label:t.name,text:t.value}})}))),t.material.image_file&&t.material.image_file.length?i("div",{staticClass:"info-title"},[t._v("\n          影像资料\n        ")]):t._e(),i("item-img-list",{attrs:{editabled:!1},model:{value:t.material.image_file,callback:function(e){t.$set(t.material,"image_file",e)},expression:"material.image_file"}}),i("div",{staticClass:"founder-created"},[i("div",{staticClass:"founder-name"},[i("span",[t._v(t._s(t.material.submit_time))]),t._v(t._s(t.material.annotate)+"\n          ")]),t.material.can_edit?i("span",{staticClass:"founder-edit",on:{click:function(e){t.edit(1)}}},[t._v("修改")]):t._e()])],1),i("loading-status",{staticClass:"traceability-empty",attrs:{"is-empty":t.materialNoDate,"empty-text":"暂无材料信息"}})],1),i("van-collapse-item",{staticClass:"conditon",class:{disabled:!t.rawMaterial.length},attrs:{disabled:!t.rawMaterial.length,name:2}},[i("div",{staticClass:"title",attrs:{slot:"title"},slot:"title"},[t._v("\n        原材信息"),t.rawMaterial.length?t._e():i("span",{staticClass:"title-nodata"},[t._v("暂无数据")])]),t.rawMaterial.length?i("div",{staticClass:"material-main"},t._l(t.rawMaterial,(function(e,a){return i("div",{key:a,staticClass:"material-content"},[i("div",t._l(e.raw_material_info,(function(e,a){return i("div",{key:a,staticClass:"material-list"},[i("item",{attrs:{label:"原材名称",text:e.name}}),i("item",{attrs:{label:"原材说明",text:e.remark}}),e.image_file&&e.image_file.length?i("item",{attrs:{label:"影像资料"}},[i("div",{staticClass:"item-con",attrs:{slot:"right"},slot:"right"},[i("item-img-list",{attrs:{editabled:!1},model:{value:e.image_file,callback:function(i){t.$set(e,"image_file",i)},expression:"x.image_file"}})],1)]):t._e()],1)}))),i("div",{staticClass:"founder-created"},[i("div",{staticClass:"founder-name"},[i("span",[t._v(t._s(e.submit_time))]),t._v(t._s(e.annotate)+"\n            ")]),e.can_edit?i("span",{staticClass:"founder-edit",on:{click:function(i){t.edit(2,e)}}},[t._v("修改")]):t._e()])])}))):t._e(),i("loading-status",{staticClass:"traceability-empty",attrs:{"is-empty":!t.rawMaterial.length,"empty-text":"暂无原材信息"}})],1)],1)],1)}),[],!1,null,"61697f5a",null);e.a=s.exports},9808:function(t,e,i){(t.exports=i("690e")(!1)).push([t.i,".zjapp .flex-box[data-v-5ccdfc17]{flex:1;display:flex;align-self:center;justify-content:center}.zjapp .place-select-box[data-v-5ccdfc17]{width:100%;flex:1;height:100%;display:flex;flex-direction:row}.zjapp .place-select-list[data-v-5ccdfc17]{max-width:50%;flex:1;padding:0 5px 0 10px;height:100%;flex-shrink:0;overflow-y:auto}.zjapp .place-select-list__item[data-v-5ccdfc17]{padding:10px 2px}.zjapp .place-select-list__item span[data-v-5ccdfc17]{display:block;padding-bottom:4px}.zjapp .place-select-list__item.actived span[data-v-5ccdfc17]{color:#4275e8;border:none;background-image:linear-gradient(0deg,#4275e8,#4275e8 50%,transparent 0);background-size:100% 1px;background-repeat:no-repeat;background-position:bottom}",""])},"9b7b":function(t,e,i){"use strict";i("052b")},a1aa:function(t,e,i){"use strict";e.__esModule=!0,e.camelize=function(t){return t.replace(a,(function(t,e){return e.toUpperCase()}))},e.padZero=function(t,e){void 0===e&&(e=2);var i=t+"";for(;i.length<e;)i="0"+i;return i};var a=/-(\w)/g},a240:function(t,e,i){var a=i("853c");"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);(0,i("85cb").default)("03e133a6",a,!0,{sourceMap:!1,shadowMode:!1})},a336:function(t,e,i){"use strict";(function(t){i("309f"),i("0b53"),i("06a2"),i("ec25"),i("2b45");var a,n,r,o,s=i("4c09"),c=(i("cc57"),i("e697"),i("6d57"),i("6a61"),i("2e91"));i("e204"),i("e2a7"),i("07d2");function l(t,e){var i;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(i=function(t,e){if(!t)return;if("string"==typeof t)return u(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return u(t,e)}(t))||e&&t&&"number"==typeof t.length){i&&(t=i);var a=0,n=function(){};return{s:n,n:function(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function(t){throw t},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,o=!0,s=!1;return{s:function(){i=t[Symbol.iterator]()},n:function(){var t=i.next();return o=t.done,t},e:function(t){s=!0,r=t},f:function(){try{o||null==i.return||i.return()}finally{if(s)throw r}}}}function u(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,a=new Array(e);i<e;i++)a[i]=t[i];return a}e.a={props:{positionData:{type:Object},isSelfPlace:{type:Boolean,default:!0},items:{type:Array,default:function(){return["building","unit","floor","room"]}},selected:{type:Object,default:function(){return{}}}},data:function(){return{activeTab:"",tabList:[],isNeedInit:!0,loading:!1}},computed:{computedNextType:function(){var t=this,e=this.items.findIndex((function(e){return e===t.activeTab}));return this.items[e+1]}},mounted:function(){var t=this,e=this.$refs["place-select-box"];e&&new IntersectionObserver((function(e){e[0].isIntersecting&&t.domIntoView()})).observe(e)},methods:{init:(o=Object(c.a)(regeneratorRuntime.mark((function e(){var i,a,n,r,o,s,c=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.tabList=[],this.loading=!0,this.isNeedInit=!0,this.activeTab="",e.next=6,this.setTypeData(this.items[0]);case 6:if(i=e.sent,t.isEmpty(this.selected)||!i){e.next=38;break}a="",e.prev=9,n=l(this.items),e.prev=11,o=regeneratorRuntime.mark((function t(){var e,n,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=r.value,i){t.next=3;break}return t.abrupt("return","break");case 3:if(n=c.getDefaultId(e),o=i.find((function(t){return t.id===n}))){t.next=7;break}return t.abrupt("return","continue");case 7:return a=e,t.next=10,c.onSelectPositionItem(o,i);case 10:i=t.sent;case 11:case"end":return t.stop()}}),t)})),n.s();case 14:if((r=n.n()).done){e.next=23;break}return e.delegateYield(o(),"t0",16);case 16:if("break"!==(s=e.t0)){e.next=19;break}return e.abrupt("break",23);case 19:if("continue"!==s){e.next=21;break}return e.abrupt("continue",21);case 21:e.next=14;break;case 23:e.next=28;break;case 25:e.prev=25,e.t1=e.catch(11),n.e(e.t1);case 28:return e.prev=28,n.f(),e.finish(28);case 31:e.next=36;break;case 33:e.prev=33,e.t2=e.catch(9),console.error(e.t2);case 36:this.activeTab=a,console.log("selectType",a);case 38:this.loading=!1,this.$nextTick((function(){c.domIntoView()}));case 40:case"end":return e.stop()}}),e,this,[[9,33],[11,25,28,31]])}))),function(){return o.apply(this,arguments)}),domIntoView:function(){(this.$refs["place-select-list"]||[]).forEach((function(t){var e=t.querySelector(".actived");e&&(e.scrollIntoViewIfNeeded?e.scrollIntoViewIfNeeded():e.scrollIntoView())}))},setDeaultPositon:function(){},getDefaultId:function(t){if(!this.selected)return"";this.selected[t];switch(t){case"building":return this.selected.building_id||"";case"unit":return this.selected.unit_id||"";case"floor":return this.selected.floor||"";case"room":return this.selected.room_id||""}},getOptions:(r=Object(c.a)(regeneratorRuntime.mark((function t(e){var i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.t0=e,t.next="building"===t.t0?3:"unit"===t.t0?8:"floor"===t.t0?13:"room"===t.t0?18:"self"===t.t0?23:28;break;case 3:return t.next=5,this.positionData.getBuildings();case 5:return i=t.sent,console.log("获取楼栋数据",i),t.abrupt("break",28);case 8:return t.next=10,this.positionData.getUnits();case 10:return i=t.sent,console.log("获取单元数据",i),t.abrupt("break",28);case 13:return t.next=15,this.positionData.getFloors();case 15:return i=t.sent,console.log("获取楼层数据",i),t.abrupt("break",28);case 18:return t.next=20,this.positionData.getRooms();case 20:return i=t.sent,console.log("获取房间数据",i),t.abrupt("break",28);case 23:return t.next=25,this.positionData.getSelfPosition();case 25:return i=t.sent,console.log("获取自定义部位数据",i),t.abrupt("break",28);case 28:return Array.isArray(i)?(i=i.filter((function(t){return!!t.name}))).forEach((function(t){t.type=e,t.checked=!1})):(i=[],console.error("获取数据失败")),t.abrupt("return",i);case 30:case"end":return t.stop()}}),t,this)}))),function(t){return r.apply(this,arguments)}),setTypeData:(n=Object(c.a)(regeneratorRuntime.mark((function e(i){var a,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i){e.next=4;break}this.end(),e.next=23;break;case 4:return e.next=6,this.getOptions(i);case 6:if(a=e.sent,"building"!==i||!this.isSelfPlace){e.next=12;break}return e.next=10,this.getOptions("self");case 10:n=e.sent,a=[].concat(Object(s.a)(a),Object(s.a)(n));case 12:if(!t.isEmpty(a)||"unit"!==i){e.next=17;break}return i="floor",e.next=16,this.getOptions(i);case 16:a=e.sent;case 17:if(!t.isEmpty(a)){e.next=21;break}this.end(),e.next=23;break;case 21:return this.setTab(i,a),e.abrupt("return",a);case 23:case"end":return e.stop()}}),e,this)}))),function(t){return n.apply(this,arguments)}),updatePositonParam:function(t,e){switch(e||this.activeTab){case"building":this.positionData.setBuilding(t.id,t.name,t.type);break;case"unit":this.positionData.setUnit(t.id,t.name);break;case"floor":this.positionData.setFloor(t.id,t.name);break;case"room":this.positionData.setRoom(t.id,t.name)}},setTab:function(e,i){var a=this;this.isNeedInit&&(this.tabList=[],this.isNeedInit=!1),t.isEmpty(i)||(console.log("加载"+e+"数据"),this.tabList.push({children:i,name:"请选择",type:e}),console.log("tabList",this.tabList),this.$nextTick((function(){a.activeTab=e})))},clearTab:function(t){var e=this.tabList.findIndex((function(e){return e.type===t}));this.tabList.splice(e+1)},checkPosition:function(t){"self"===t&&(t="building"),this.activeTab=t},onSelectPositionItem:(a=Object(c.a)(regeneratorRuntime.mark((function e(i,a){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.isEmpty(i)){e.next=2;break}return e.abrupt("return");case 2:if(this.checkPosition(i.type),a.forEach((function(t){return t.checked=!1})),i.checked=!0,this.updateTabName(i.name),this.clearTab(this.activeTab),this.updatePositonParam(i),"self"!==i.type){e.next=13;break}return this.setTab("unit",i.units.map((function(t){return t.type="unit",t}))),e.abrupt("return",i.units);case 13:return e.abrupt("return",this.setTypeData(this.computedNextType));case 14:case"end":return e.stop()}}),e,this)}))),function(t,e){return a.apply(this,arguments)}),updateTabName:function(t){var e=this;this.tabList.find((function(t){return t.type===e.activeTab})).name=t},end:function(){}}}}).call(this,i("391c"))},ade5:function(t,e,i){"use strict";i("3fcb")},ae7d:function(t,e,i){"use strict";(function(t){var a=i("bf9f"),n=i("cf4d"),r=i("d8a5"),o=i("e2a7");e.a={components:{PopupHasHeader:a.a,Widget:n.a},props:{projectId:{type:String,default:""},sectionId:{type:String,default:""},selected:{type:Object,default:function(){return{}}},useOnlineDataSource:{type:Boolean,default:!1}},data:function(){return{activeTab:"",show:!1,loading:!1,positionData:{},isFresh:!0}},computed:{computedIsCanFinish:function(){var e=t.get(this.positionData,"getPosition");return Boolean(e&&e.call(this.positionData).building.id)}},watch:{show:function(t){t||this.$emit("close")}},methods:{closePopup:function(t){this.show=!1},openPopup:function(){var t=this;this.show=!0,this.loading=!0,this.isFresh&&(this.positionData=this.useOnlineDataSource?new r.b({section:{id:this.sectionId},project:{id:this.projectId}}):new r.a({section:{id:this.sectionId},project:{id:this.projectId}}),this.isFresh=!1,this.$nextTick((function(){t.$refs["place-widget"].init()})))},onClosed:function(){this.positionData.getPosition().full_name!==this.selected.full_name&&this.$refs["place-widget"].init()},submit:function(){if(!this.computedIsCanFinish)return o.a.alert("请先选择一个部位");console.log("选择已完成"),this.$emit("onChange",this.positionData.getPosition())},clearData:function(){this.positionData={},this.isFresh=!0}}}}).call(this,i("391c"))},b7b4:function(t,e,i){"use strict";var a=i("c5a7");e.__esModule=!0,e.noop=function(){},e.isDef=c,e.isObj=function(t){var e=typeof t;return null!==t&&("object"===e||"function"===e)},e.get=function(t,e){var i=e.split("."),a=t;return i.forEach((function(t){a=c(a[t])?a[t]:""})),a},e.isServer=e.addUnit=e.createNamespace=void 0;var n=a(i("329b")),r=i("6147");e.createNamespace=r.createNamespace;var o=i("2064");e.addUnit=o.addUnit;var s=n.default.prototype.$isServer;function c(t){return null!=t}e.isServer=s},bcf4:function(t,e,i){"use strict";i("27c4")},bf9f:function(t,e,i){"use strict";var a={props:{title:{type:String,default:""},value:{type:Boolean,default:!1},height:{type:String,default:"70%"}},data:function(){return{show:this.value}},watch:{value:function(t){t!==this.show&&(this.show=t)},show:function(t){t!==this.value&&this.$emit("input",t)}},methods:{closePopup:function(){this.show=!1}}},n=(i("7e4d"),i("17cc")),r=Object(n.a)(a,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("van-popup",t._g({staticClass:"popup-customize-use-header",style:{height:t.height},attrs:{position:"bottom",round:"","get-container":"#app","safe-area-inset-bottom":"","close-on-popstate":""},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},t.$listeners),[i("div",{staticClass:"popup-header"},[i("div",{staticClass:"popup-header__left"},[t._t("header_left")],2),i("div",{staticClass:"popup-header__title"},[t._v(t._s(t.title))]),i("div",{staticClass:"popup-header__right"},[t._t("header_right",[i("icon",{staticClass:"f-gray",attrs:{name:"nav-close"},on:{click:t.closePopup}})])],2)]),i("div",{staticClass:"popup-body"},[t._t("body_main")],2)])],1)}),[],!1,null,"16a26812",null);e.a=r.exports},c070:function(t,e,i){var a=i("574c");"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);(0,i("85cb").default)("35590dcb",a,!0,{sourceMap:!1,shadowMode:!1})},c589:function(t,e,i){var a=i("17f4");"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);(0,i("85cb").default)("4b86c129",a,!0,{sourceMap:!1,shadowMode:!1})},c5a7:function(t,e){t.exports=function(t){return t&&t.__esModule?t:{default:t}}},c5fd:function(t,e,i){(t.exports=i("690e")(!1)).push([t.i,'.zjapp .detail-traceability[data-v-6156a194] .traceability-collapse .van-collapse-item__title{padding:12px 15px;position:relative}.zjapp .detail-traceability[data-v-6156a194] .traceability-collapse .van-collapse-item__title:before{content:"";background:#4275e8;width:4px;height:16px;position:absolute;left:0;top:50%;transform:translateY(-50%)}.zjapp .detail-traceability[data-v-6156a194] .traceability-collapse .van-collapse-item__content{padding:0;background:initial}.zjapp .detail-traceability[data-v-6156a194] .traceability-collapse .van-collapse-item{margin-bottom:10px}.zjapp .detail-traceability[data-v-6156a194] .traceability-empty{min-height:250px}.zjapp .detail-traceability[data-v-6156a194] .traceability-empty .information-add{color:#4275e8;font-size:16px}',""])},cf4d:function(t,e,i){"use strict";var a=i("a336").a,n=(i("2572"),i("17cc")),r=Object(n.a)(a,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{ref:"place-select-box",staticClass:"place-select-box"},[t.loading?i("div",{staticClass:"flex-box"},[i("van-loading",{attrs:{color:"#1989fa",size:"60px"}})],1):t._l(t.tabList,(function(e,a){return i("div",{key:e.type,ref:"place-select-list",refInFor:!0,staticClass:"place-select-list"},t._l(e.children,(function(n){return i("div",{key:n.id,staticClass:"place-select-list__item",class:{actived:n.checked},on:{click:function(i){t.onSelectPositionItem(n,e.children,a)}}},[i("span",{},[t._v(t._s(n.name))])])})))}))],2)}),[],!1,null,"5ccdfc17",null);e.a=r.exports},d8a5:function(t,e,i){"use strict";i.d(e,"a",(function(){return _})),i.d(e,"b",(function(){return $}));i("5ab2"),i("6d57"),i("e10e");var a=i("4c09"),n=(i("e697"),i("28f8")),r=(i("6a61"),i("2e91")),o=(i("cc57"),i("0e4d")),s=i("94ef"),c=i("fc9f"),l=function(t){var e="select * from section\n      where proj_id = '".concat(t,"'\n      order by name");return c.a.query(e)},u=function(t){var e="select b.*, sb.section_id from building b\n      join section_building sb on b.id = sb.building_id\n      where b.proj_id = '".concat(t,"'\n      order by b.sort, b.code");return c.a.query(e)},d=function(t){var e="select b.* from section_building sb\n      INNER join building b on sb.building_id = b.id\n      where sb.section_id = '".concat(t,"'\n      order by b.sort, b.code");return c.a.query(e)},f=function(t){var e="select * from build_unit\n      where building_id = '".concat(t,"'\n      order by sort");return c.a.query(e)},p=function(t){var e="select * from building_floor\n      where building_id = '".concat(t,"'\n      order by sort");return c.a.query(e)},m=function(t,e,i){var a=e?" and unit = '".concat(e,"' "):"",n="select * from room where\n      building_id = '".concat(t,"' and floor = '").concat(i,"' ").concat(a,"\n      order by sort");return c.a.query(n)},h=i("7cb8"),b=i("bcc7");function g(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,a)}return i}function v(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?g(Object(i),!0).forEach((function(e){Object(n.a)(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):g(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}var _=function(){function t(e){Object(o.a)(this,t),this._section=e.section||{id:"",name:""},this._proj=e.project||{id:"",name:""},this._building=e.building||{id:"",name:""},this._unit=e.unit||{id:"",name:"",type:"building"},this._floor=e.floor||{id:"",name:""},this._room=e.room||{id:"",name:""}}var e,i,n,c;return Object(s.a)(t,[{key:"getPosition",value:function(){return{section:this._section,project:this._proj,building:this._building,unit:this._unit,floor:this._floor,room:this._room,full_name:this._building.name+this._unit.name+this._floor.name+this._room.name}}},{key:"getSections",value:function(){return this._proj.id?l(this._proj.id):(console.error("根据项目获取标段错误：未定义项目id"),Promise.resolve(null))}},{key:"getBuildings",value:function(){return this._section.id?this.getBuildingsBySection():this.getBuildingsByProject()}},{key:"getBuildingsByProject",value:function(){return this._proj.id?u(this._proj.id):(console.error("根据项目获取楼栋错误：未定义项目id"),Promise.resolve(null))}},{key:"getBuildingsBySection",value:function(){return this._section.id?d(this._section.id).catch((function(t){return console.error("获取楼栋失败",t),null})):(console.error("根据标段获取楼栋错误：未定义标段id"),Promise.resolve(null))}},{key:"getUnits",value:(c=Object(r.a)(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this._building.id){t.next=3;break}return console.error("获取单元错误：未定义楼栋id"),t.abrupt("return",Promise.resolve(null));case 3:return t.next=5,f(this._building.id);case 5:return e=(e=t.sent).filter((function(t){return!!t.name})),t.abrupt("return",(e||[]).map((function(t){return v(v({},t),{},{id:t.name,name:Object(h.a)(t.name,"单元")})})));case 8:case"end":return t.stop()}}),t,this)}))),function(){return c.apply(this,arguments)})},{key:"getFloors",value:(n=Object(r.a)(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this._building.id){t.next=3;break}return console.error("获取楼层错误：未定义楼栋id"),t.abrupt("return",Promise.resolve(null));case 3:return t.next=5,p(this._building.id);case 5:return e=t.sent,t.abrupt("return",(e||[]).map((function(t){return v(v({},t),{},{id:t.floor,name:Object(h.a)(t.floor,"层")})})));case 7:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})},{key:"getRooms",value:(i=Object(r.a)(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this._building.id&&this._floor.id){t.next=3;break}return console.error("获取房间列表错误：未定义楼栋id, 或未获取楼层id"),t.abrupt("return",Promise.resolve(null));case 3:return t.next=5,m(this._building.id,this._unit.id,this._floor.id);case 5:return e=t.sent,t.abrupt("return",(e||[]).map((function(t){return v(v({},t),{},{name:t.room_no})})));case 7:case"end":return t.stop()}}),t,this)}))),function(){return i.apply(this,arguments)})},{key:"getSelfPosition",value:(e=Object(r.a)(regeneratorRuntime.mark((function t(){var e,i,n=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this._proj.id){t.next=3;break}return console.error("获取自定义部位错误：未定义项目id"),t.abrupt("return",Promise.resolve(null));case 3:return t.next=5,b.a.getSelfDefinitionPlace(this._proj.id);case 5:if(e=t.sent,!this._section.id){t.next=11;break}return i=(e||[]).find((function(t){return t.id===n._section.id})),t.abrupt("return",i&&i.buildings);case 11:return t.abrupt("return",e.reduce((function(t,e){return t.push.apply(t,Object(a.a)(e.buildings||[])),t}),[]));case 12:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})},{key:"setProj",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";this._proj={id:t,name:e}}},{key:"setSection",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";this._section={id:t,name:e}}},{key:"setBuilding",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"building";this._building={id:t,name:e,type:i},this.clearUnit()}},{key:"setUnit",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";this._unit={id:t,name:e},this.clearFloor()}},{key:"setFloor",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";this._floor={id:t,name:e},this.clearRoom()}},{key:"setRoom",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";this._room={id:t,name:e}}},{key:"clearBuilding",value:function(){this._building={id:"",name:"",type:"building"},this.clearUnit()}},{key:"clearUnit",value:function(){this._unit={id:"",name:""},this.clearFloor()}},{key:"clearFloor",value:function(){this._floor={id:"",name:""},this.clearRoom()}},{key:"clearRoom",value:function(){this._room={id:"",name:""}}},{key:"checkProjId",value:function(){}},{key:"checkSectionId",value:function(){}},{key:"checkBuildingId",value:function(){}},{key:"checkFloorId",value:function(){}},{key:"checkRoomId",value:function(){}},{key:"checkPosition",value:function(){}}]),t}(),y=(i("2b45"),i("fc58"),i("76ff")),x=i("4b67"),k=i("d703"),j=i("5e8d"),w=i("da71"),C=i("162a");function z(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,a)}return i}function T(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?z(Object(i),!0).forEach((function(e){Object(n.a)(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):z(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function P(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,a=Object(k.a)(t);if(e){var n=Object(k.a)(this).constructor;i=Reflect.construct(a,arguments,n)}else i=a.apply(this,arguments);return Object(x.a)(this,i)}}var $=function(t){Object(y.a)(a,t);var e,i=P(a);function a(){return Object(o.a)(this,a),i.apply(this,arguments)}return Object(s.a)(a,[{key:"getBuildingsByProject",value:function(){return this._proj.id?(t={proj_id:this._proj.id},Object(j.a)().then((function(){var e=w.a.buildingsByProject.url;return C.a.request(e,t)}))).then((function(t){return t.map((function(t,e){return{id:t.building_id,name:t.full_name,sort:e}}))})):(console.error("根据项目获取楼栋错误：未定义项目id"),Promise.resolve(null));var t}},{key:"getUnits",value:function(){return this._building.id?(t={building_id:this._building.id},Object(j.a)().then((function(){var e=w.a.units.url;return C.a.request(e,t)}))).then((function(t){return((t=t.filter((function(t){return!!t.unit})))||[]).map((function(t){return T(T({},t),{},{id:t.unit,name:Object(h.a)(t.unit_name,"单元")})}))})):(console.error("获取单元错误：未定义楼栋id"),Promise.resolve(null));var t}},{key:"getFloors",value:function(){return this._building.id?(t={building_id:this._building.id},Object(j.a)().then((function(){var e=w.a.floors.url;return C.a.request(e,t)}))).then((function(t){return(t||[]).map((function(t){return{id:t.floor,name:Object(h.a)(t.floor_name,"层")}}))})):(console.error("获取楼层错误：未定义楼栋id"),Promise.resolve(null));var t}},{key:"getRooms",value:function(){return this._building.id&&this._floor.id?(t={building_id:this._building.id,unit:this._unit.id,floor:this._floor.id},Object(j.a)().then((function(){var e=w.a.rooms.url;return C.a.request(e,t)}))).then((function(t){return(t||[]).map((function(t){return{id:t.room_id,name:t.room_name}}))})):(console.error("获取房间列表错误：未定义楼栋id, 或未获取楼层id"),Promise.resolve(null));var t}},{key:"getSelfPosition",value:(e=Object(r.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this._proj.id){t.next=3;break}return console.error("获取自定义部位错误：未定义项目id"),t.abrupt("return",Promise.resolve(null));case 3:return t.abrupt("return",[]);case 4:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})}]),a}(_)},db6b2:function(t,e,i){(t.exports=i("690e")(!1)).push([t.i,'.zjapp .swipe-tabs[data-v-025feb99]{display:flex;flex-direction:column;flex:1;overflow:hidden}.zjapp .tabs[data-v-025feb99]{position:relative;display:flex;background-color:#fff}.zjapp .tab[data-v-025feb99]{flex:1;height:40px;line-height:20px;padding:10px;font-size:14px;text-align:center;box-sizing:border-box}.zjapp .tab-current[data-v-025feb99]{color:#4275e8}.zjapp .mark-line[data-v-025feb99]{position:absolute;bottom:0;left:0;width:20px;height:2px;margin-left:-10px;background-image:linear-gradient(90deg,#5ea2ff,#4f83eb 50%,#4275e8);transition:left .4s cubic-bezier(.1,.7,.1,1)}.zjapp .tabs-point[data-v-025feb99]{position:relative;z-index:1;height:40px;font-size:0;text-align:center;background-color:#fff;overflow:visible}.zjapp .tabs-scroll[data-v-025feb99]{position:relative;padding-bottom:3px;margin-bottom:-3px;white-space:nowrap;overflow-x:auto}.zjapp .tabs-scroll[data-v-025feb99]::-webkit-scrollbar{display:none}.zjapp .tab-point[data-v-025feb99]{display:inline-block;padding:10px 15px;line-height:20px;font-size:16px;color:#333;white-space:nowrap}.zjapp .tab-point.tab-current[data-v-025feb99]{position:relative;z-index:3;color:#4275e8}.zjapp .tab-point.tab-current[data-v-025feb99]:after{content:"";position:absolute;z-index:3;bottom:-3px;left:50%;margin-left:-3px;width:7px;height:7px;border-radius:50%;background-color:#4275e8}',""])},dd74:function(t,e,i){"use strict";i.r(e);i("163d");var a=i("6718"),n=(i("f548"),i("cc57"),i("07d2")),r=i("774b"),o=i("4603"),s=i("e2a7"),c={name:"DetailTask",components:{Item:n.default,Scroller:r.default},data:function(){return{isLoading:!1,emptyTips:"暂无数据",form:{}}},computed:{noData:function(){var t=this.form;return!t||!t.id},id:function(){return this.$store.state.materialTraceability.id}},activated:function(){},methods:{init:function(){this.form={},this.getTaskDetail()},getTaskDetail:function(){var t=this;this.isLoading=!0,o.a.getTaskDetail(this.id).then((function(e){t.form=e})).catch((function(e){t.form={},t.emptyTips="no network"===e?"当前无网络连接":"暂无数据",-2===e.errcode&&(s.a.alert("任务不存在"),t.goIndex())})).finally((function(){t.isLoading=!1}))},deleteTask:function(){var t=this;s.a.confirm({message:"确定删除任务？"}).then((function(e){e&&o.a.postDelelteTask(t.form.id).then((function(){t.goIndex()}))}))},editTask:function(){var t=this.form;this.$router.push({name:"MaterialTraceabilityAddTask",query:{data:{id:t.id,name:t.name,material:t.material,brand:t.brand,contractor:t.contractor,contractorUsers:t.contractorUsers,place:t.place,remark:t.remark,can_change_user:t.can_change_user}}})},goIndex:function(){var t=this;this.$router.replace({name:"MaterialTraceability"}),setTimeout((function(){t.$router.go(-1)}),300)}}},l=i("17cc"),u=Object(l.a)(c,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("scroller",{staticClass:"detail-task"},[t.noData||t.isLoading?t._e():i("div",[i("div",{staticClass:"m10"}),i("item",{attrs:{label:"材料名称",text:t.form.material.name}}),i("item",{attrs:{label:"品牌",text:t.form.brand.name}}),i("item",{attrs:{label:"材料供应商",text:t.form.contractor.name}}),i("item",{attrs:{label:"供应商经办人",text:t.form.contractorUsers.name}}),i("item",{attrs:{label:"创建人",text:t.form.created_by_name}}),t.form.place?i("item",{attrs:{label:"使用部位",text:t.form.place}}):t._e(),t.form.remark?i("item",{attrs:{label:"备注",text:t.form.remark}}):t._e(),i("div",{staticClass:"m10"}),i("div",{staticClass:"m10"}),i("div",{staticClass:"m10"}),t.form.can_edit?i("app-button-group",[i("app-button",{attrs:{type:"warning",plain:"",rimless:""},on:{click:t.deleteTask}},[t._v("\n        删除\n      ")]),i("app-button",{on:{click:t.editTask}},[t._v("\n        修改\n      ")])],1):t._e()],1),i("loading-status",{attrs:{"is-loading":t.isLoading,"is-empty":t.noData,"empty-text":t.emptyTips}})],1)}),[],!1,null,"1191cae7",null).exports,d=i("5a34").a,f=(i("427f"),Object(l.a)(d,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("scroller",[t.noData||t.isLoading?t._e():i("div",{staticClass:"detail-traceability"},[i("div",{staticClass:"m10"}),1===t.mode?i("detail-traceability1",{ref:"traceability1",attrs:{data:t.traceability1},on:{result:t.init}}):t._e(),2===t.mode?i("detail-traceability2",{ref:"traceability2",attrs:{data:t.traceability2},on:{result:t.init}}):t._e(),3===t.mode?i("detail-traceability3",{ref:"traceability3",attrs:{data:t.traceability3},on:{onEdit:t.edit}}):t._e()],1),i("loading-status",{attrs:{"is-loading":t.isLoading,"is-empty":t.noData,"empty-text":t.emptyTips}})],1)}),[],!1,null,"6156a194",null).exports),p=i("e68e"),m=i("9864"),h=i("329b"),b=i("3c64"),g=i("f97c"),v=i("8153"),_=i("4360"),y=i("e89f"),x=i("6144"),k={name:"InfluencesDialog",components:{Item:n.default,ItemTextarea:b.a,Scroller:r.default,ItemImgList:p.a,PlaceSelect:v.a},mixins:[y.a],data:function(){return{show:!1,title:"",images:[],remark:"",id:"",mode:"",place:{building_id:"",unit:"",floor:"",room_id:"",place:""}}},computed:{task_id:function(){return _.a.state.materialTraceability.id},proj_id:function(){return g.a.getDefaultProject().id},editPlaceLocalStorageKey:function(){return this.proj_id+"-material-traceability-edit-place"},selectedPlace:function(){return Object.assign({},this.place,{unit_id:this.place.unit,full_name:this.place.place})},isShowPlace:function(){return"安装"===this.title}},methods:{openDialog:function(t){this.$refs["place-select"].clearData(),this.show=!0,this.title=t.title,this.onChange=t.onChange,this.images=t.images||[],this.remark=t.remark||"",this.id=t.id||null,this.mode=t.mode;var e=x.a.getObject(this.editPlaceLocalStorageKey,x.a.level.user);t.place?this.place={building_id:t.building_id,unit:t.unit,floor:t.floor,room_id:t.room_id,place:t.place}:e&&!this.id?this.place=e:this.place={building_id:"",unit:"",floor:"",room_id:"",place:""}},showSelectPositon:function(){this.$refs["place-select"].openPopup()},setPostion:function(t){console.log("获取选择部位",t);var e={building_id:t.building.id,unit:t.unit.id,room_id:t.room.id,floor:t.floor.id,place:t.full_name};this.setPlace(e),this.$refs["place-select"].closePopup()},setPlace:function(t){t.place&&(this.place.building_id=t.building_id,this.place.room_id=t.room_id,this.place.floor=t.floor,this.place.unit=t.unit,this.place.place=t.place),x.a.saveObject(this.editPlaceLocalStorageKey,t,x.a.level.user)},close:function(){this.$refs["place-select"].clearData(),this.$refs["place-select"].closePopup(),this.show=!1},submit:function(){var t=this;if(0!==this.images.length){var e={task_id:this.task_id,proj_id:this.proj_id,images:this.images,remark:this.remark,building_id:this.place.building_id,unit:this.place.unit,floor:this.place.floor,room_id:this.place.room_id,place:this.place.place};return this.id&&(e.id=this.id),o.a.postSaveInfluences(e,this.mode).then((function(){t.onChange(),t.close()}))}s.a.alert("照片不能为空")}}},j=(i("8e40"),Object(l.a)(k,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("transition",{attrs:{name:"slide-right"}},[i("page-content",{directives:[{name:"show",rawName:"v-show",value:t.show,expression:"show"}],attrs:{title:t.title,mode:"dialog","on-close":t.close}},[i("scroller",[i("item",{staticClass:"influences-image border-bottom",attrs:{label:"影像资料"}},[i("div",{staticClass:"item-con",attrs:{slot:"right"},slot:"right"},[i("item-img-list",{ref:"check-edit-item-img",attrs:{maxlength:50,"allow-select-album":!0,"allow-buildin-album":!0,"track-text":"材料溯源"},model:{value:t.images,callback:function(e){t.images=e},expression:"images"}})],1)]),t.isShowPlace?i("item",{attrs:{label:"部位",text:t.place&&t.place.place||"",mode:"edit",editabled:"",placeholder:"选填","form-check":!1},on:{click:t.showSelectPositon}}):t._e(),i("item-textarea",{staticClass:"influences-textarea",attrs:{placeholder:"备注"},model:{value:t.remark,callback:function(e){t.remark=e},expression:"remark"}}),i("app-button-group",[i("app-button",{on:{click:t.submit}},[t._v("提交")])],1)],1),i("place-select",{ref:"place-select",attrs:{selected:t.selectedPlace,"project-id":t.proj_id,"use-online-data-source":!0},on:{onChange:t.setPostion}})],1)],1)}),[],!1,null,"1f68c575",null).exports),w=!1;w||(w=new(h.default.extend(j))({el:document.createElement("div")}),document.body.appendChild(w.$el));var C=w,z=i("6bf2"),T=i.n(z),P={name:"DetailInfluences",components:{Item:n.default,Scroller:r.default,ItemImgList:p.a,CheckUserContact:m.a},props:{title:{type:String,default:""},mode:{type:String,default:"process"}},data:function(){return{isLoading:!1,influences:[],loading:!1,hasNext:!1,page:1,page_size:15}},computed:{id:function(){return this.$store.state.materialTraceability.id},noData:function(){return!this.influences||!this.influences.length}},methods:{init:function(){this.page=1,this.isLoading=!0,this.influences=[],this.getList()},onRefresh:function(){return this.page=1,this.getList()},onloadUp:function(){return this.page+=1,this.getList()},getList:function(t){var e=this,i={task_id:this.id,page:this.page,page_size:this.page_size};return o.a.getInfluencesList(i,this.mode).then((function(t){e.influences=1===e.page?t.items:e.influences.concat(t.items),e.hasNext=t.has_next_page})).catch((function(){e.hasNext=!1})).finally((function(){e.isLoading=!1}))},addInfluences:function(){var t=this;C.openDialog({title:this.title,mode:this.mode,onChange:function(){t.init()}})},edit:function(t){var e=this;C.openDialog({title:this.title,mode:this.mode,images:t.images,remark:t.remark,id:t.id,building_id:t.building_id,unit:t.unit,floor:t.floor,room_id:t.room_id,place:t.place,onChange:function(){e.init()}})},formatDate:function(t){return T()(t).format("YYYY-MM-DD HH:mm")}}},$=(i("5f91"),Object(l.a)(P,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"detail-influences"},[i("scroller",{attrs:{"has-next":t.hasNext,"is-empty":!t.influences.length},on:{loadNext:t.onloadUp}},[t.noData||t.isLoading?t._e():i("div",{staticClass:"m10"}),t.noData||t.isLoading?t._e():i("div",{staticClass:"influences-list"},t._l(t.influences,(function(e,a){return i("div",{key:a,staticClass:"influences-item"},[e.images&&e.images.length?i("item",{attrs:{label:"影像资料"}},[i("div",{staticClass:"item-con",attrs:{slot:"right"},slot:"right"},[i("item-img-list",{attrs:{editabled:!1},model:{value:e.images,callback:function(i){t.$set(e,"images",i)},expression:"item.images"}})],1)]):t._e(),e.place?i("item",{attrs:{label:"部位",text:e.place}}):t._e(),e.remark?i("item",{attrs:{label:"备注",text:e.remark}}):t._e(),i("item",{attrs:{label:"提交人"}},[i("div",{staticClass:"item-text",attrs:{slot:"right"},slot:"right"},[e.created_info?i("check-user-contact",{attrs:{list:e.created_info}}):i("div",[t._v("系统预置")]),i("div",{staticClass:"color-light mt10"},[t._v("\n              "+t._s(t._f("formatDate")(e.created_on))+"\n              "),e.can_edit?i("span",{staticClass:"influences-edit",on:{click:function(i){t.edit(e)}}},[t._v("修改")]):t._e()])],1)])],1)}))),i("loading-status",{attrs:{"is-loading":t.isLoading,"is-empty":t.noData,"empty-text":t.title+"暂无数据"}})],1),i("app-button-group",{attrs:{"fixed-bottom":""}},[i("app-button",{on:{click:t.addInfluences}},[t._v("新增记录")])],1)],1)}),[],!1,null,"412ee7d4",null).exports),O={name:"MaterialTraceabilityDetail",components:{SwipeTabs:a.b,SwipeTab:a.a,DetailTask:u,DetailTraceability:f,DetailInfluences:$},data:function(){return{tabIndex:1}},computed:{title:function(){return this.$store.state.materialTraceability.detailTitle||"材料溯源"},tabsWidth:function(){return window.innerWidth/5},refsSelect:function(){return this.$refs[["detailTask","detailTraceability","detailTnfluences1","detailTnfluences2","detailTnfluences3"][this.tabIndex]]}},activated:function(){this.$router.isBack||this.init()},methods:{init:function(){var t=this.$route.query,e=Number(t.tabIndex);this.tabIndex=e||0===e?e:1,t.id&&this.$store.commit("materialTraceability/SET_ID",t.id),console.log("query.title",t.title),t.title&&this.$store.commit("materialTraceability/SET_DETAIL_TITLE",t.title),this.swipeSelect()},swipeSelect:function(){this.refsSelect.init()}}},L=(i("19b5"),Object(l.a)(O,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("page-content",{staticClass:"material-traceability-detail",attrs:{title:t.title,"show-go-root":!0}},[i("swipe-tabs",{staticClass:"detail-tabs",attrs:{color:"#4275e8","mark-type":"point","title-active-color":"#4275e8","line-width":t.tabsWidth},on:{change:t.swipeSelect},model:{value:t.tabIndex,callback:function(e){t.tabIndex=e},expression:"tabIndex"}},[i("swipe-tab",{attrs:{title:"任务"}},[i("detail-task",{ref:"detailTask"})],1),i("swipe-tab",{attrs:{title:"溯源"}},[i("detail-traceability",{ref:"detailTraceability"})],1),i("swipe-tab",{attrs:{title:"加工出厂"}},[i("detail-influences",{ref:"detailTnfluences1",attrs:{title:"加工出厂",mode:"process"}})],1),i("swipe-tab",{attrs:{title:"进场验收"}},[i("detail-influences",{ref:"detailTnfluences2",attrs:{title:"进场验收",mode:"accept"}})],1),i("swipe-tab",{attrs:{title:"安装"}},[i("detail-influences",{ref:"detailTnfluences3",attrs:{title:"安装",mode:"assemble"}})],1)],1)],1)}),[],!1,null,"28c3ae48",null));e.default=L.exports},de148:function(t,e,i){var a=i("1300");"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);(0,i("85cb").default)("2bcdb042",a,!0,{sourceMap:!1,shadowMode:!1})},e56d:function(t,e,i){var a=i("9808");"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);(0,i("85cb").default)("19a9969d",a,!0,{sourceMap:!1,shadowMode:!1})},e5fe:function(t,e,i){"use strict";i("de148")},f24f:function(t,e,i){"use strict";e.__esModule=!0,e.isNumber=function(t){return/^\d+(\.\d+)?$/.test(t)},e.isNaN=function(t){if(Number.isNaN)return Number.isNaN(t);return t!=t}},f6ba7:function(t,e,i){(t.exports=i("690e")(!1)).push([t.i,".zjapp .detail-influences[data-v-412ee7d4]{height:100%;display:flex;flex-direction:column}.zjapp .detail-influences .influences-edit[data-v-412ee7d4]{color:#4275e8;font-size:14px;margin-left:5px}.zjapp .detail-influences .influences-list[data-v-412ee7d4]{padding:10px 15px;background:#fff}.zjapp .detail-influences .influences-item[data-v-412ee7d4]{padding:8px 10px;margin-bottom:10px;background:#fafafa}.zjapp .detail-influences .influences-item[data-v-412ee7d4]:last-child{margin-bottom:0}.zjapp .detail-influences .influences-item .item[data-v-412ee7d4]{padding:8px 0;background:#fafafa}.zjapp .detail-influences .influences-item .item-label[data-v-412ee7d4]{color:#999}.zjapp .detail-influences .influences-item .item-text[data-v-412ee7d4]{color:#333}",""])}}]);