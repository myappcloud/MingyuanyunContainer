(window.webpackJsonp_module_entry_zjapp_=window.webpackJsonp_module_entry_zjapp_||[]).push([["chunk-f70ae83a"],{"00ea":function(t,e,a){var o=a("5454");(t.exports=a("690e")(!1)).push([t.i,".zjapp .no-img[data-v-5be30c46]{position:absolute;top:0;bottom:0;left:0;right:0;display:flex;flex-direction:column;align-items:center;justify-content:center;background-color:#f0f0f0}.zjapp .no-img .icon-logo[data-v-5be30c46]{font-size:48px;color:#d5d5d5}.zjapp .no-img .text[data-v-5be30c46]{margin-top:10px;line-height:20px;font-size:14px;color:#999;text-align:center}.zjapp .swipe-wrap[data-v-5be30c46]{padding-bottom:100px}.zjapp .swipe[data-v-5be30c46]{position:relative}.zjapp .swipe .indicators[data-v-5be30c46]{color:#fff;position:absolute;bottom:0;width:100%;display:flex;padding:5px 20px}.zjapp .swipe .indicators .name[data-v-5be30c46]{flex:1}.zjapp .project-select[data-v-5be30c46]{text-align:center;padding:0 10px;line-height:44px}.zjapp .project-select .text[data-v-5be30c46]{pointer-events:none}.zjapp .project-select-con[data-v-5be30c46]{display:inline-block;position:relative;padding-right:23px;max-width:100%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;pointer-events:none;vertical-align:top}.zjapp .project-select-con .arrow[data-v-5be30c46]{position:absolute;top:13px;right:0;width:18px;height:18px;background:url("+o(a("7fb27"))+") no-repeat;background-size:100% 100%;transition:transform .2s}.zjapp .project-select-con .arrow.active[data-v-5be30c46]{transform:rotate(180deg)}",""])},"2c9e":function(t,e,a){(t.exports=a("690e")(!1)).push([t.i,".zjapp .plan-quota[data-v-2307cc70]{background-color:#fff;padding:1px;margin-bottom:10px}.zjapp .plan-quota .plan-quota-content[data-v-2307cc70]{height:55px;overflow:hidden;margin:5px 0}.zjapp .plan-quota .plan-quota-content.on[data-v-2307cc70]{height:auto}.zjapp .plan-quota table[data-v-2307cc70],.zjapp table[data-v-2307cc70]{border-spacing:0;border-collapse:collapse}.zjapp .plan-quota table[data-v-2307cc70]{width:100%;text-align:center;padding-bottom:10px}.zjapp .plan-quota table td[data-v-2307cc70]{width:33%;white-space:nowrap;overflow:hidden;padding:15px 0 0 0}.zjapp .plan-quota table tr:first-child td[data-v-2307cc70]{padding:10px 0 0 0}.zjapp .plan-quota table .plan-field-value[data-v-2307cc70]{color:#111;display:block;font-size:16px;line-height:26px}.zjapp .plan-quota table .plan-field-name[data-v-2307cc70]{color:#8c8c8c;display:block;font-size:12px;line-height:22px}.zjapp .plan-quota-spread[data-v-2307cc70]{line-height:30px;text-align:center;color:#8c8c8c;font-size:14px}.zjapp .icon-toggle[data-v-2307cc70]{display:block;color:#d2d2d2;font-size:22px}.zjapp .ui-turn[data-v-2307cc70]{transform:rotate(180deg)}",""])},"2d5b":function(t,e,a){var o=a("00ea");"string"==typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);(0,a("85cb").default)("de1453d4",o,!0,{sourceMap:!1,shadowMode:!1})},3026:function(t,e,a){var o=a("e98d");"string"==typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);(0,a("85cb").default)("3d8e8b9d",o,!0,{sourceMap:!1,shadowMode:!1})},"47df":function(t,e,a){var o=a("cc4c");"string"==typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);(0,a("85cb").default)("1ffcc628",o,!0,{sourceMap:!1,shadowMode:!1})},"5f7c":function(t,e,a){"use strict";a("3026")},7098:function(t,e,a){var o=a("2c9e");"string"==typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);(0,a("85cb").default)("0ebba687",o,!0,{sourceMap:!1,shadowMode:!1})},"7a10":function(t,e,a){"use strict";var o={name:"PlanQuota",props:{planQuota:Object,hasPlanQuota:Boolean,canFold:{type:Boolean,default:!1}},data:function(){return{showMorePlanQuota:!1}},methods:{togglePlanQuotaPanel:function(){this.showMorePlanQuota=!this.showMorePlanQuota}}},i=(a("c1e7"),a("17cc")),s=Object(i.a)(o,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"plan-quota"},[a("div",{staticClass:"plan-quota-content",class:{on:t.showMorePlanQuota||!t.canFold}},[a("table",[a("tr",[a("td",[a("span",{staticClass:"plan-field-value",style:{color:t.hasPlanQuota?"":"#8c8c8c"}},[t._v(t._s(t.hasPlanQuota?t.planQuota.floor_area:"未设置"))]),a("span",{staticClass:"plan-field-name"},[t._v("占地面积/㎡")])]),a("td",[a("span",{staticClass:"plan-field-value",style:{color:t.hasPlanQuota?"":"#8c8c8c"}},[t._v(t._s(t.hasPlanQuota?t.planQuota.overall_building_area:"未设置"))]),a("span",{staticClass:"plan-field-name"},[t._v("总建筑面积/㎡")])]),a("td",[a("span",{staticClass:"plan-field-value",style:{color:t.hasPlanQuota?"":"#8c8c8c"}},[t._v(t._s(t.hasPlanQuota?t.planQuota.overground_building_area:"未设置"))]),a("span",{staticClass:"plan-field-name"},[t._v("地上建筑面积/㎡")])])]),a("tr",[a("td",[a("span",{staticClass:"plan-field-value",style:{color:t.hasPlanQuota?"":"#8c8c8c"}},[t._v(t._s(t.hasPlanQuota?t.planQuota.underground_building_area:"未设置"))]),a("span",{staticClass:"plan-field-name"},[t._v("地下建筑面积/㎡")])]),a("td",[a("span",{staticClass:"plan-field-value",style:{color:t.hasPlanQuota?"":"#8c8c8c"}},[t._v(t._s(t.hasPlanQuota?t.planQuota.salable_area:"未设置"))]),a("span",{staticClass:"plan-field-name"},[t._v("可售面积")])]),a("td",[a("span",{staticClass:"plan-field-value",style:{color:t.hasPlanQuota?"":"#8c8c8c"}},[t._v(t._s(t.hasPlanQuota?t.planQuota.salable_area_ratio+"%":"未设置"))]),a("span",{staticClass:"plan-field-name"},[t._v("可售比")])])]),a("tr",[a("td",[a("span",{staticClass:"plan-field-value",style:{color:t.hasPlanQuota?"":"#8c8c8c"}},[t._v(t._s(t.hasPlanQuota?t.planQuota.floor_area_ratio:"未设置"))]),a("span",{staticClass:"plan-field-name"},[t._v("容积率")])]),a("td",[a("span",{staticClass:"plan-field-value",style:{color:t.hasPlanQuota?"":"#8c8c8c"}},[t._v("\n            "+t._s(t.hasPlanQuota?t.planQuota.green_coverage_ratio+"%":"未设置"))]),a("span",{staticClass:"plan-field-name"},[t._v("绿化覆盖率")])]),a("td",[a("span",{staticClass:"plan-field-value",style:{color:t.hasPlanQuota?"":"#8c8c8c"}},[t._v(t._s(t.hasPlanQuota?t.planQuota.household_count:"未设置"))]),a("span",{staticClass:"plan-field-name"},[t._v("户数")])])]),a("tr",[a("td",[a("span",{staticClass:"plan-field-value",style:{color:t.hasPlanQuota?"":"#8c8c8c"}},[t._v(t._s(t.hasPlanQuota?t.planQuota.carport_count:"未设置"))]),a("span",{staticClass:"plan-field-name"},[t._v("车位数")])]),a("td",[a("span",{staticClass:"plan-field-value",style:{color:t.planQuota.product_type?"":"#8c8c8c"}},[t._v(t._s(t.planQuota.product_type||"未设置"))]),a("span",{staticClass:"plan-field-name"},[t._v("业态")])]),t._m(0)])])]),t.canFold?a("div",{staticClass:"fold"},[a("div",{staticClass:"plan-quota-spread",on:{click:function(e){t.togglePlanQuotaPanel()}}},[a("icon",{staticClass:"icon-toggle",class:{"ui-turn":t.showMorePlanQuota},attrs:{name:"zhankai"}})],1)]):t._e()])}),[function(){var t=this.$createElement,e=this._self._c||t;return e("td",[e("span",{staticClass:"plan-field-value"},[this._v(" ")]),e("span",{staticClass:"plan-field-name"},[this._v(" ")])])}],!1,null,"2307cc70",null);e.a=s.exports},"7fb6":function(t,e,a){"use strict";(function(t){var o=a("3122"),i=a("11e8");e.a={name:"ProjectTimeline",components:{IonicScroller:i.a},props:{isShow:{type:Boolean,default:!0},coreUserData:{type:Object,default:function(){}},majorContractorData:{type:Object,default:function(){}}},data:function(){return{activeNames:["1","2"],viewSize:$rootScope.viewSize,timePointWidth:{a:"100%",r:"100%",l:"50%"},timePointLeft:{a:0,r:"50%",l:0},startX:0,startY:0}},computed:{isEmptyCoreUser:function(){return!t.get(this.coreUserData,["list","length"])},isEmptyMajorContractor:function(){return!t.get(this.majorContractorData,["list","length"])}},methods:{handleEvents:function(){for(var t=arguments.length,e=new Array(t),a=0;a<t;a++)e[a]=arguments[a];var o=e.shift();this.$emit.apply(this,[o].concat(e))},schedulePlan:function(t,e){this.$router.push({path:"schedule-plan/"+e.schedule_plan_id,query:{proj_id:t.proj_id,plan_id:e.schedule_plan_id}})},gotoMonitor:function(t){this.$router.push({path:"monitor/"+t.proj_id,query:{proj_id:t.proj_id}})},getThumbnailFromUrl:function(t){try{return t?o.a.getThumbnailFromUrl(t):"static/default_img_simple.png"}catch(t){return"static/default_img_simple.png"}},loadAllData:function(t){var e={proj_id:this.$route.query.proj_id,type:t};this.$router.push({path:"/project-timeline-all-data",query:e})}}}}).call(this,a("391c"))},"8b4b":function(t,e,a){"use strict";var o=a("7fb6").a,i=(a("5f7c"),a("17cc")),s=Object(i.a)(o,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"project-detail-time-line"},[a("van-collapse",{staticClass:"schedule-plan-collapse",model:{value:t.activeNames,callback:function(e){t.activeNames=e},expression:"activeNames"}},[a("van-collapse-item",{staticClass:"core-staff-info mb10",attrs:{title:"核心人员信息",name:"1",label:t.isEmptyCoreUser?"暂无信息，可在后台>参数设置中设置":"","is-link":!t.isEmptyCoreUser}},[t.isEmptyCoreUser?t._e():t._l(t.coreUserData.list,(function(e,o){return a("div",{key:o,staticClass:"item-list"},[a("div",{staticClass:"user-avatar",style:{backgroundImage:"url("+t.getThumbnailFromUrl(e.headimg_url)+")"}}),a("div",{staticClass:"item-list-con",class:{"border-bottom":o!==t.coreUserData.list.length-1}},[a("div",{staticClass:"user-name"},[a("span",[t._v(t._s(e.name))]),e.post?a("span",[t._v(t._s(e.post))]):t._e()]),a("p",{staticClass:"user-phone"},[t._v(t._s(e.mobile))]),a("a",{staticClass:"item-phone-icon",attrs:{href:"tel:"+e.mobile}},[a("icon",{attrs:{name:"dianhua"}})],1)])])})),Number(t.coreUserData.has_next_page)?a("div",{staticClass:"show-all-data border-top bg-white",on:{click:function(e){t.loadAllData("project_core_user")}}},[t._v("\n        查看更多数据 "),a("icon",{staticClass:"show-more",attrs:{name:"chakangengduo"}})],1):t._e()],2),a("van-collapse-item",{staticClass:"supplier-unit mb10",attrs:{title:"主要供方单位",name:"2",label:t.isEmptyMajorContractor?"暂无信息，可在后台>标段管理中设置":"","is-link":!t.isEmptyMajorContractor}},[t.isEmptyMajorContractor?t._e():t._l(t.majorContractorData.list,(function(e,o){return a("div",{key:o,staticClass:"item-list"},[a("div",{staticClass:"item-content",class:{"border-bottom":o!==t.majorContractorData.list.length-1}},[a("div",{staticClass:"item-company"},[e.contractor_kind?a("span",{staticClass:"contractor-kind"},[t._v(t._s(e.contractor_kind))]):t._e(),a("span",{staticClass:"contractor-name"},[t._v(t._s(e.contractor_name))])]),a("div",{staticClass:"item-place"},[t._v("\n              "+t._s(e.bidsection_name)+"\n              "),e.building_name?a("span",[t._v("("+t._s(e.building_name)+")")]):t._e()])])])})),Number(t.majorContractorData.has_next_page)?a("div",{staticClass:"show-all-data border-top bg-white",on:{click:function(e){t.loadAllData("major_contractor")}}},[t._v("\n        查看更多数据 "),a("icon",{staticClass:"show-more",attrs:{name:"chakangengduo"}})],1):t._e()],2)],1)],1)}),[],!1,null,"0d6fc457",null);e.a=s.exports},ad46:function(t,e,a){"use strict";(function(t){a("f548"),a("e697"),a("cc57"),a("9dd9");var o,i=a("07d2"),s=a("9eea"),n=a("6f9e"),l=a("e89f"),c=[],r=[],p=[],d=!0,h=null,u=["没有标段","没有楼栋","没有单元","没有楼层"],f=["","list bg-gray6","list bg-gray5","list bg-gray4"];e.a={name:"DropDownSelectDialog",components:{Item:i.default,appSearchBar:s.default},mixins:[l.a],data:function(){return{show:!1,showList:!1,isOpening:!1,isClosing:!1,isSearching:!1,contentTop:64,listHeight:510,target:"",selectedSet:[],stage:1,layoutMap:[],keepStage:[],componentUid:"",showNote:!0,hasSearch:!1,searchTimer:null,keyword:""}},watch:{show:function(t){var e=this;t&&this.$nextTick((function(){e.showList=!0}))},showList:function(e){var a=this;e&&this.$nextTick((function(){a.$refs["list-wrap"]&&t.each(a.$refs["list-wrap"].querySelectorAll(".selected")||[],(function(t){setTimeout((function(){t.scrollIntoViewIfNeeded(!0)}),400)}))}))},keyword:function(t){var e=this;clearTimeout(this.searchTimer),this.searchTimer=setTimeout((function(){e.initSelectedSet(c,r)}),100)}},created:function(){n.a.$on("routerBeforeEach",this.closePopup),n.a.$on("pageContentClick",this.onClickOther)},destroyed:function(){n.a.$off("routerBeforeEach",this.closePopup),n.a.$off("pageContentClick",this.onClickOther)},methods:{openPopup:function(e){var a=this;if(this.show)return e.componentUid===this.componentUid?void this.closePopup():void this.closePopup().then((function(){a.openPopup(e)}));this.stage=e.stage,this.componentUid=e.componentUid||"";var i=document.querySelector(".layout-main .layout-header");this.contentTop=i.offsetHeight;var s=e.el&&e.el.$el?e.el.$el:e.el;if(s){var n=s.getBoundingClientRect();this.contentTop=n.bottom}this.target=s,this.listHeight=t.minBy([window.innerHeight-this.contentTop-50,510]),c=e.options,r=t.clone(e.selected),p=e.optionsMap||[],d=!1!==e.needFullSelecte||e.needFullSelecte,h=e.minSelectStage||this.stage,o=e.callback,this.showNote=e.showNote,this.layoutMap=[];for(var l=0;l<e.stage;l++)this.layoutMap.push({level:l,bgColor:e.hasBgColor?f[l]:"",emptyText:e.emptyText&&e.emptyText[l]?e.emptyText[l]:u[l],keep:!!t.isEmpty(e.keepStage)||!!e.keepStage[l]});this.hasSearch=!!e.hasSearch,this.initSelectedSet(e.options,e.selected),this.show=!0,this.$emit("open")},closePopup:function(){var t=this;if(!this.isOpening)return this.$refs["app-search-bar"]&&this.$refs["app-search-bar"].cancelSearch(),this.showList=!1,this.$emit("close"),new Promise((function(e){t.$on("afterClosePopup",e)}))},afterClose:function(){this.show=!1,this.keyword="",this.isClosing=!1,this.$emit("afterClosePopup")},onClickOther:function(t){t&&t.target&&t.target!==this.target&&this.show&&this.closePopup()},getLevelOptionsKey:function(t){return p&&p[t]&&p[t].key?p[t].key:"children"},initSelectedSet:function(){var e=this,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];this.selectedSet=[],t.each(o||[],(function(o,i){var s=e.getLevelOptionsKey(i);if(o&&!(i>e.stage-1)){if(!e.selectedSet[i]){var n;n=i?e.selectedSet[i-1].selected&&e.selectedSet[i-1].selected[s]||[]:a;var l=i||t.isEmpty(e.keyword)?n:t.filter(n,(function(t){return new RegExp(e.keyword,"gm").test(t.name)}));e.selectedSet[i]={selected:{},options:l}}var c=e.selectedSet[i].options,r=t.find(c,{id:o.id});r&&(e.selectedSet[i].selected=r)}})),t.isEmpty(this.selectedSet)&&(this.selectedSet=[{selected:{},options:a}])},showName:function(t){var e=t;return e=(e=e.replace(new RegExp("<","gm"),"&lt;")).replace(new RegExp(">","gm"),"&gt;")},highLightKeyword:function(t){if(this.keyword){var e="";return e=t.replace(new RegExp(this.keyword,"gm"),"-----hightLightTagL-----"+this.keyword+"-----hightLightTagR-----"),e=(e=(e=this.showName(e)).replace(/-----hightLightTagL-----/gm,'<span class="color-blue">')).replace(/-----hightLightTagR-----/gm,"</span>")}return this.showName(t)},getResult:function(){var e=this,a=[];return t.each(this.selectedSet,(function(o,i){var s=t.extend({},o.selected);delete s[e.getLevelOptionsKey(i+1)],t.isEmpty(s)||a.push(s)})),a},select:function(e,a){var i=this,s=this.getLevelOptionsKey(a+1),n=t.isEmpty(e[s]),l=a>=this.stage-1||a>=h-1&&n||!d&&n;this.selectedSet.splice(a+1),this.selectedSet[a].selected=e,r.splice(a),r.push(e),this.$refs["app-search-bar"]&&this.$refs["app-search-bar"].saveHistory(),l?setTimeout((function(){o&&o(i.getResult()),i.closePopup()}),100):this.selectedSet.push({selected:{},options:e[s]})},onSearchTypeChange:function(t){this.isSearching=t}}}}).call(this,a("391c"))},b187:function(t,e,a){"use strict";(function(t){a("e697"),a("f548"),a("cc57");var o=a("6bf2"),i=a.n(o),s=a("d152"),n=a("162a"),l=a("f97c"),c=a("c656"),r=a("e2a7"),p=a("11e8"),d=a("7a10"),h=a("8b4b"),u=a("4ad6"),f=a("3715");e.a={components:{PlanQuota:d.a,ProjectTimeline:h.a,IonicScroller:p.a},data:function(){return{isLoading:!0,project:{selected:{},list:[]},projectImg:{index:0,list:[]},proj_id:"",projectData:{},viewSize:$rootScope.viewSize,isChildPage:!0,hasPlanQuota:!1,planQuotaData:{},swipeIndex:1,timeLine:[],itemProjId:"",showProcessMenu:!1,processMenuActions:[]}},computed:{isProjectSelectOpen:function(){return s.a.show}},activated:function(){this.$router.isBack||this.init()},methods:{init:function(){var t=this;return this.proj_id=this.$route.query.proj_id,this.isLoading=!0,this.projectImg={index:0,list:[]},this.swipeIndex=1,this.loadProjectDetail(this.proj_id),c.a.getPivotalProcessModules().then((function(e){console.log("processMenuActions",e),t.processMenuActions=e}))},swipeChange:function(t){this.swipeIndex=t+1},swipeClick:function(e){var a,o=t.map(this.projectImg.list,(function(t,o){return t.img===e.img&&(a=o),t.img}));u.a.openImageBrowser(o,a||0)},iamgeProcess:function(e){var a=this;this.getUserProj().then((function(){t.some(a.userProjects,{id:e.proj_id})?a.$router.push({path:"/image-process-index",query:{proj_id:e.proj_id}}):r.a.alert("您无该项目权限或该项目尚未在PC端建立标段")}))},projectProcess:function(e){var a=this;this.getUserProj().then((function(){t.some(a.userProjects,{id:e.proj_id})?(a.showProcessMenu=!0,a.itemProjId=e.proj_id):r.a.alert("您无该项目权限或该项目尚未在PC端建立标段")}))},goPivotalProcess:function(t){"pile"!==t.type?this.itemProjId&&this.$router.push({name:"PivotalProcessIndex",query:{projId:this.itemProjId,type:t.type}}):this.$router.push({name:"ReportPileAcceptList",query:{projId:this.itemProjId}})},gotoReport:function(e){var a=this;this.getUserProj().then((function(){t.some(a.userProjects,{id:a.projectData.proj_id})?(a.$store.commit("global/SET_CURRENT_REPORT_PROJECT",{id:a.projectData.proj_id,name:a.projectData.name,parent_name:a.projectData.parent_name}),!0===window.__YL_SUPER_APP__?a.$router.push({path:"/super-report-index"}):a.$router.push({path:"/layout/report"})):r.a.alert("您无该项目权限或该项目尚未在PC端建立标段")}))},gotoHomePage:function(e){var a=this;this.getUserProj().then((function(){t.some(a.userProjects,{id:a.projectData.proj_id})?l.a.updateDefaultProject(a.projectData.proj_id).then((function(){!0===window.__YL_SUPER_APP__?__YL__.router.home():a.$router.push({path:"/layout/workbench"})})):r.a.alert("您无该项目权限或该项目尚未在PC端建立标段")}))},loadProjectDetail:function(e){var a=this;return this.isLoading=!0,n.a.request("/project-map/detail",{projID:e}).then((function(e){var o=JSON.parse(e.img_url||"[]");a.projectImg.list=t.map(o,(function(t){return{name:t.file_name.replace(/(\.jpg)|(\.gif)|(\.png)|(\.jpeg)$/,""),img:t.img_url}})),a.projectData=e,a.planQuotaData=e.property,a.hasPlanQuota=!t.isEmpty(a.planQuotaData),a.timeLine=[],e.schedule_plans&&e.schedule_plans.length&&t.each(e.schedule_plans,(function(e){t.each(e.details,(function(t,a){var o,s,n,l,c;t.node_status="已完成"===t.status?"finish":"1"===t.has_report?"doing":"pending","finish"!==t.node_status&&"doing"!==t.node_status||a&&"finish"===e.details[a-1].node_status&&(a===e.details.length-1?t.bar_status="a":t.bar_status="l","l"===e.details[a-1].bar_status?e.details[a-1].bar_status="a":e.details[a-1].bar_status=1===a?"a":"r"),t.complate_show="","已完成"===t.status&&t.complete_time?(o=Object(f.b)(t.deadline).getTime(),s=Object(f.b)(t.complete_time).getTime(),t.complate_show=i()(t.complete_time).format("YYYY-MM-DD"),t.isTimeout=o<s):t.deadline&&((o=Object(f.b)(t.deadline).getTime())<(n=(new Date).getTime())?(t.isTimeout=!0,l=Math.floor((n-o)/864e5),t.complate_show=l?"超时"+l+"天":"今天"):(t.isTimeout=!1,(c=Math.ceil((o-n)/864e5))<=7&&(t.complate_show="还剩"+c+"天")))}))})),a.timeLine=[{name:e.name?e.name.replace(e.parent_name+"-",""):"",has_cameral:e.has_cameral,proj_id:e.proj_id,times:e.node_list,schedule_plans:e.schedule_plans}],a.projectImg.index=0})).then((function(){a.getUserProj()})).finally((function(){a.isLoading=!1}))},getUserProj:function(){var t=this;return c.a.getUserProjects().then((function(e){t.userProjects=e}))},dropDown:function(e){var a=this;if(s.a.show)s.a.closePopup();else{var o=[],i=this.project.selected,n=i&&i.parent_name&&t.find(this.project.list,{name:i.parent_name});i&&(n&&o.push(n),o.push(i)),console.log(this.project.list,"dddd"),s.a.openPopup({options:this.project.list,selected:o,dimension:2,hasSearch:!1,hasBgColor:!0,el:e.target,needFullSelecte:!1,emptyText:["","无项目"],callback:function(t){var e=t.pop();e&&e.id&&(a.loadProjectDetail(e.id),a.project.selected=e)}})}}}}}).call(this,a("391c"))},bbd8:function(t,e,a){"use strict";a.r(e);var o=a("b187").a,i=(a("c9cb"),a("17cc")),s=Object(i.a)(o,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("page-content",{attrs:{"show-bar-left":"","show-go-root":t.isChildPage}},[t.isChildPage?a("div",{staticClass:"project-select",staticStyle:{margin:"0 88px"},attrs:{slot:"header-bar"},slot:"header-bar"},[a("div",{staticClass:"project-select-con"},[t._v(t._s(t.projectData.name||"..."))])]):a("div",{staticClass:"project-select",staticStyle:{margin:"0 44px"},attrs:{slot:"header-bar"},on:{click:t.dropDown},slot:"header-bar"},[0===t.project.list.length?[a("span",{staticClass:"text"},[t._v("...")])]:[t.project.list&&t.project.list.length?[a("div",{staticClass:"project-select-con"},[t._v("\n          "+t._s(t.project.selected.name)+"\n          "),a("i",{class:{arrow:!0,active:t.isProjectSelectOpen}})])]:[a("span",{staticClass:"text"},[t._v("无项目权限或未建标段")])]]],2),t.isLoading?t._e():a("ionic-scroller",{attrs:{bouncing:!1,height:t.viewSize.contentHeight+""}},[a("div",{staticClass:"swipe-wrap"},[a("div",{staticClass:"swipe",style:{height:.5*t.viewSize.width+"px"}},[t.projectImg.list&&t.projectImg.list.length?a("van-swipe",{attrs:{autoplay:3e3,"show-indicators":!1,"indicator-color":"white",height:.5*t.viewSize.width},on:{change:t.swipeChange}},t._l(t.projectImg.list,(function(e,o){return a("van-swipe-item",{directives:[{name:"track",rawName:"v-track",value:"领导首页-分期列表-查看项目图片大图",expression:"'领导首页-分期列表-查看项目图片大图'"}],key:o,on:{click:function(a){t.swipeClick(e)}}},[a("img",{attrs:{width:"100%",src:e.img}})])}))):t._e(),0===t.projectImg.list.length?a("div",{staticClass:"no-img"},[a("icon",{attrs:{name:"logo"}}),a("p",{staticClass:"text"},[t._v("PC端未上传照片")])],1):t._e(),t.projectImg.list.length?a("div",{staticClass:"indicators"},[a("div",{staticClass:"name flex"},[t._v(t._s(t.projectImg.list[t.projectImg.index].name))]),a("div",{staticClass:"page"},[a("span",{staticClass:"f16"},[t._v(t._s(t.swipeIndex))]),t._v("\n            / "+t._s(t.projectImg.list.length)+"张\n          ")])]):t._e()],1),a("plan-quota",{attrs:{"plan-quota":t.planQuotaData,"has-plan-quota":t.hasPlanQuota,"can-fold":""}}),t._l(t.timeLine,(function(e,o){return a("project-timeline",{key:o,attrs:{item:e,"is-show":t.processMenuActions.length>0},on:{iamgeProcess:t.iamgeProcess,projectProcess:t.projectProcess,gotoReport:t.gotoReport,gotoHomePage:t.gotoHomePage}})}))],2)]),a("van-action-sheet",{attrs:{actions:t.processMenuActions,"cancel-text":"取消"},on:{cancel:function(e){t.showProcessMenu=!1},select:t.goPivotalProcess},model:{value:t.showProcessMenu,callback:function(e){t.showProcessMenu=e},expression:"showProcessMenu"}}),a("loading-status",{attrs:{"is-loading":t.isLoading}})],1)}),[],!1,null,"5be30c46",null);e.default=s.exports},c1e7:function(t,e,a){"use strict";a("7098")},c9cb:function(t,e,a){"use strict";a("2d5b")},cc4c:function(t,e,a){(t.exports=a("690e")(!1)).push([t.i,".zjapp .content[data-v-1fa2658d]{position:fixed;width:100%;bottom:0;background-color:rgba(0,0,0,.4);overflow:hidden}.zjapp .box[data-v-1fa2658d]{flex-direction:column}.zjapp .box[data-v-1fa2658d],.zjapp .list-wrap[data-v-1fa2658d]{display:flex;background-color:#fff}.zjapp .list-wrap[data-v-1fa2658d]{flex-direction:row;align-items:flex-start;flex:1;overflow:hidden}.zjapp .list[data-v-1fa2658d]{padding:0 10px}.zjapp .list[data-v-1fa2658d],.zjapp .list-single[data-v-1fa2658d]{flex:1;overflow:auto;height:100%;scroll-behavior:smooth}.zjapp .item-dropdown[data-v-1fa2658d]{padding:6px 0;background-color:transparent}.zjapp .item-dropdown[data-v-1fa2658d] .item-text{font-size:14px}.zjapp .item-dropdown.selected[data-v-1fa2658d]{color:#4275e8;padding-bottom:5px;border-bottom:1px solid #4275e8}.zjapp .item-dropdown.selected[data-v-1fa2658d] .item-text{color:#4275e8}.zjapp .empty-tips[data-v-1fa2658d]{padding:13px 0;line-height:20px;color:#b2b2b2;font-size:14px}.zjapp .select-note[data-v-1fa2658d]{line-height:16px;font-size:12px;color:#8c8c8c}[data-v-1fa2658d] .icon-qualified{width:30px;height:30px;line-height:30px;text-align:center;color:#4275e8}",""])},d152:function(t,e,a){"use strict";var o=a("329b"),i=a("ad46").a,s=(a("fc72"),a("17cc")),n=Object(s.a)(i,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.show?a("div",{staticClass:"content",style:{top:t.contentTop+"px"},on:{click:function(e){return e.target!==e.currentTarget?null:t.closePopup(e)}}},[a("transition",{attrs:{name:"slide-down"},on:{enter:function(e){t.isOpening=!0},"after-enter":function(e){t.isOpening=!1},leave:function(e){t.isClosing=!0},"after-leave":t.afterClose}},[t.showList?a("div",{staticClass:"box",style:{height:t.listHeight+"px"}},[t.hasSearch?a("app-search-bar",{ref:"app-search-bar",attrs:{placeholder:"输入项目名称搜索","simple-mode":"","history-key":"drop-down-search-history-key"},on:{changeSearchStatus:t.onSearchTypeChange},model:{value:t.keyword,callback:function(e){t.keyword=e},expression:"keyword"}}):t._e(),!t.isSearching||t.keyword&&t.selectedSet[0]&&t.selectedSet[0].options.length?a("div",{ref:"list-wrap",staticClass:"list-wrap"},[1===t.stage?t._l(t.layoutMap,(function(e,o){var i;return a("div",{key:"map"+o,staticClass:"list-single",class:(i={},i[e.bgColor]=!0,i),style:{height:t.listHeight-(t.hasSearch?44:0)+"px"}},t._l(t.selectedSet[e.level]&&t.selectedSet[e.level].options||[],(function(i,s){return a("item",{key:s,class:{selected:t.selectedSet[e.level].selected&&t.selectedSet[e.level].selected.id===i.id},attrs:{border:"bottom"},on:{click:function(a){t.select(i,e.level)}}},[a("div",{staticClass:"item-text",class:{"color-theme":i.note&&t.selectedSet[e.level].selected&&t.selectedSet[e.level].selected.id===i.id},domProps:{innerHTML:t._s(o?t.showName(i.nameShow||i.name):t.highLightKeyword(i.nameShow||i.name))}}),!i.note&&t.selectedSet[e.level].selected&&t.selectedSet[e.level].selected.id===i.id?a("icon",{attrs:{name:"qualified"}}):t._e(),i.note?a("div",{staticClass:"item-font color-gray2 f14"},[t._v(t._s(i.note))]):t._e()],1)})))})):[t._l(t.layoutMap,(function(e,o){var i;return[e.keep||t.selectedSet[e.level]&&t.selectedSet[e.level].options&&t.selectedSet[e.level].options.length?a("div",{key:"map"+o,staticClass:"list",class:(i={},i[e.bgColor]=!0,i),style:{height:t.listHeight-(t.hasSearch?44:0)+"px"}},[t._l(t.selectedSet[e.level]&&t.selectedSet[e.level].options||[],(function(i,s){return a("item",{key:s,staticClass:"item-dropdown",class:{selected:t.selectedSet[e.level].selected&&t.selectedSet[e.level].selected.id===i.id},on:{click:function(a){t.select(i,e.level)}}},[a("div",{staticClass:"item-text"},[a("p",{domProps:{innerHTML:t._s(o?t.showName(i.nameShow||i.name):t.highLightKeyword(i.nameShow||i.name))}}),a("p",{staticClass:"select-note"},[t._v(t._s(i.note))])])])})),t.selectedSet[e.level]&&t.selectedSet[e.level].options&&t.selectedSet[e.level].options.length?t._e():a("div",{staticClass:"empty-tips"},[t._v("\n                "+t._s(t.selectedSet[e.level-1]&&t.selectedSet[e.level-1].selected&&t.selectedSet[e.level-1].selected.id?e.emptyText:"请选择")+"\n              ")])],2):t._e()]}))]],2):t._e(),!t.isSearching||!t.keyword||t.selectedSet[0]&&t.selectedSet[0].options.length?t._e():a("loading-status",{attrs:{"is-empty":!0,type:"search","empty-text":"未搜索到相关内容"}})],1):t._e()])],1):t._e()}),[],!1,null,"1fa2658d",null).exports,l=!1;l||(l=new(o.default.extend(n))({el:document.createElement("div")}),document.body.appendChild(l.$el));e.a=l},e89f:function(t,e,a){"use strict";var o=a("04f3"),i=a("cf09"),s=a("4360"),n=0;e.a={name:"PopupMixin",data:function(){return{backButtonEvent:null}},watch:{show:function(t){var e=this;if(t){if(this.$nextTick((function(){e.$el&&e.$el.style&&(e.$el.style.zIndex=++i.a.zIndex,n++,s.a.commit("app/SET_HAS_POPUP",!!n))})),!this.backButtonEvent){var a=this.close||this.closePopup;this.backButtonEvent=Object(o.a)(a)}}else--n<0&&(n=0),s.a.commit("app/SET_HAS_POPUP",!!n),this.backButtonEvent&&(Object(o.c)(this.backButtonEvent),this.backButtonEvent=null)}},methods:{}}},e98d:function(t,e,a){(t.exports=a("690e")(!1)).push([t.i,'.zjapp .project-detail-time-line[data-v-0d6fc457]{background-color:transparent;margin-bottom:10px}.zjapp .icon-title[data-v-0d6fc457]{display:inline-block;vertical-align:top;width:4px;height:16px;margin-top:2px;margin-right:5px;color:#4275e8;background-color:#4275e8}.zjapp .title-name[data-v-0d6fc457]{font-size:16px;font-weight:700}.zjapp .color-black[data-v-0d6fc457]{color:#333!important}.zjapp .bd[data-v-0d6fc457]{padding:15px 0}.zjapp .schedule-plan-collapse[data-v-0d6fc457] .van-cell__title{position:relative;padding-left:12px;font-weight:700}.zjapp .schedule-plan-collapse[data-v-0d6fc457] .van-cell__title:before{position:absolute;content:" ";width:4px;height:16px;background:#4275e8;top:3px;left:0}.zjapp .schedule-plan-collapse[data-v-0d6fc457] .van-cell__label{margin-left:-12px;color:#999;font-weight:400}.zjapp .core-staff-info[data-v-0d6fc457] .van-collapse-item__content{padding-right:0!important;padding-top:0!important;padding-bottom:0!important;padding-left:0!important}.zjapp .core-staff-info .item-list[data-v-0d6fc457]{display:flex;align-items:center;background-color:#fff;position:relative;padding-left:16px}.zjapp .core-staff-info .item-list .user-avatar[data-v-0d6fc457]{display:block;width:44px;height:44px;background:no-repeat 50%;background-size:cover;background-color:#ddd;border-radius:100%}.zjapp .core-staff-info .item-list .item-phone-icon[data-v-0d6fc457]{color:#4275e8;width:22px;height:22px;text-align:center;line-height:22px;position:absolute;right:22px;top:23px}.zjapp .core-staff-info .item-list .item-phone-icon .icon[data-v-0d6fc457]{font-size:18px}.zjapp .core-staff-info .item-list-con[data-v-0d6fc457]{flex:1;padding:12px 0 12px 10px}.zjapp .core-staff-info .item-list-con .user-name[data-v-0d6fc457]{color:#333;width:80%;line-height:22px}.zjapp .core-staff-info .item-list-con .user-name span[data-v-0d6fc457]{font-size:16px}.zjapp .core-staff-info .item-list-con .user-name span[data-v-0d6fc457]:nth-child(2){display:inline-block;position:relative;top:-2px;left:6px;height:16px;line-height:14px;font-size:12px;color:#4275e8;border:1px solid #4275e8;border-radius:2px;padding:0 4px}.zjapp .core-staff-info .item-list-con .user-phone[data-v-0d6fc457]{line-height:22px;font-size:14px;white-space:nowrap!important;overflow:hidden!important;text-overflow:ellipsis!important;color:#999}.zjapp .supplier-unit[data-v-0d6fc457] .van-collapse-item__content{padding:0!important}.zjapp .supplier-unit .item-list[data-v-0d6fc457]{padding:0 16px}.zjapp .supplier-unit .item-content[data-v-0d6fc457]{padding-top:12px;padding-bottom:12px}.zjapp .supplier-unit .item-company .contractor-kind[data-v-0d6fc457]{display:inline-block;border:1px solid #4275e8;border-radius:2px;color:#4275e8;font-size:12px;height:16px;line-height:14px;padding:0 4px;position:relative;top:-2px}.zjapp .supplier-unit .item-company .contractor-name[data-v-0d6fc457]{font-size:16px;line-height:22px;color:#333;padding-left:4px}.zjapp .supplier-unit .item-place[data-v-0d6fc457]{font-size:14px;color:#999;line-height:22px}.zjapp .show-all-data[data-v-0d6fc457]{width:100%;text-align:center;line-height:46px;font-size:14px;color:#4275e8}.zjapp .show-all-data .show-more[data-v-0d6fc457]{font-size:8px;position:relative;top:-1px}',""])},fc72:function(t,e,a){"use strict";a("47df")}}]);