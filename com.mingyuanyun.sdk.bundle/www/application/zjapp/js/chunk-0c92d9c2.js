(window.webpackJsonp_module_entry_zjapp_=window.webpackJsonp_module_entry_zjapp_||[]).push([["chunk-0c92d9c2"],{"0cb6":function(e,t,a){(e.exports=a("690e")(!1)).push([e.i,".zjapp .problem-detail-header[data-v-0901aadd]{display:flex;align-items:center;justify-content:center;height:40px;padding:0 15px;line-height:40px;background-color:#f2f2f2}.zjapp .problem-detail-header .status[data-v-0901aadd]{flex:1;height:16px;line-height:16px;border-left:5px solid #ddd;padding-left:5px;color:#111;font-size:16px}.zjapp .problem-detail-header .status-red[data-v-0901aadd]{border-color:#ff3d3d}.zjapp .problem-detail-header .status-blue[data-v-0901aadd]{border-color:#4275e8}.zjapp .problem-detail-header .status-green[data-v-0901aadd]{border-color:#0bc666}.zjapp .problem-detail-header .status-orange[data-v-0901aadd]{border-color:#fc8b01}.zjapp .problem-detail-header .status-black[data-v-0901aadd]{border-color:#333}.zjapp .problem-detail-header .status-gray[data-v-0901aadd]{border-color:#999}.zjapp .problem-detail-header .return[data-v-0901aadd],.zjapp .problem-detail-header .timeout[data-v-0901aadd],.zjapp .problem-detail-header .urgent[data-v-0901aadd]{display:block;padding:0 5px;margin-left:6px;height:16px;line-height:16px;color:#fff;font-size:12px;border-radius:2px;-webkit-border-radius:2px}.zjapp .problem-detail-header .urgent[data-v-0901aadd]{background-color:#ff3d3d}.zjapp .problem-detail-header .timeout[data-v-0901aadd]{background-color:#954cfe}.zjapp .problem-detail-header .return[data-v-0901aadd]{background-color:#fc8b01}.zjapp .problem-detail-header .operat[data-v-0901aadd]{height:40px;line-height:40px;white-space:nowrap;font-size:16px;color:#6b7ba9}",""])},"1f63":function(e,t,a){"use strict";a("7434")},"4aef":function(e,t,a){"use strict";var r=a("dd16").a,o=a("17cc"),n=Object(o.a)(r,(function(){var e=this.$createElement;return(this._self._c||e)("span",{class:this.classSet[this.status]},[this._v(this._s(this.text||this.status))])}),[],!1,null,null,null);t.a=n.exports},6289:function(e,t,a){"use strict";a("b1a2")},6869:function(e,t,a){(e.exports=a("690e")(!1)).push([e.i,".zjapp .content[data-v-f81ee496]{margin-bottom:15px;background:#fff}.zjapp .content[data-v-f81ee496] .item-text{line-height:inherit}.zjapp .content[data-v-f81ee496] .item-user-name{display:inline-block;vertical-align:middle}",""])},7434:function(e,t,a){var r=a("0cb6");"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);(0,a("85cb").default)("f6a1180a",r,!0,{sourceMap:!1,shadowMode:!1})},"83e4":function(e,t,a){"use strict";a.d(t,"d",(function(){return i})),a.d(t,"a",(function(){return s})),a.d(t,"c",(function(){return l})),a.d(t,"b",(function(){return d})),a.d(t,"f",(function(){return c})),a.d(t,"e",(function(){return u}));var r=a("5e8d"),o=a("162a"),n=a("bcc78");function i(e){return Object(r.a)().then((function(){var t=n.a.imageProcessList.url;return o.a.request(t,e)}))}function s(e){return Object(r.a)().then((function(){var t=n.a.imageProcessDeleted.url;return o.a.post(t,null,e)}))}function l(e){return Object(r.a)().then((function(){var t=n.a.imageProcessDetails.url;return o.a.request(t,e)}))}function d(e){return Object(r.a)().then((function(){var t=n.a.imageProcessBuildingList.url;return o.a.request(t,e)}))}function c(e){return Object(r.a)().then((function(){var t=n.a.imageProcessSave.url;return o.a.post(t,null,e)}))}function u(){return Object(r.a)().then((function(){var e=n.a.imageProcessTypeList.url;return o.a.request(e)}))}},a433:function(e,t,a){"use strict";a.r(t);a("cc57");var r=a("fd50"),o=a("e2a7"),n=a("3bd5"),i=a("07d2"),s=a("4aef"),l=a("cd05"),d=a("e68e"),c=a("da1c"),u=a("1b7e"),p=a("774b"),m=a("6f9e"),b=a("83e4"),f={name:"ImageProcessDetail",components:{Item:i.default,StatusText:s.a,UserSelect:l.a,ItemImgList:d.a,ProblemDetailHeader:c.a,Scroller:p.default},data:function(){return{id:"",type:"common",loaded:!1,loading:!1,user:n.a.getUser(),problemData:{},emptyTips:"内容加载失败"}},activated:function(){var e=this.$route.params;this.id=e&&e.id?e.id:"",this.getDetail(this.id)},methods:{checkNetWork:function(){var e=this;return u.a.getHasNetwork().then((function(t){if(!t)return e.type="error",r.a.reject({errmsg:"当前网络无法同步数据"})}))},getDetail:function(e){var t=this;this.loaded=!1,this.loading=!0,this.checkNetWork().then((function(t){return Object(b.c)({id:e})})).then((function(e){t.problemData={id:e.id,process_status:e.process_status,proj_id:e.proj_id,proj_name:e.proj_name,type:e.type,image_file:JSON.parse(e.image_file||"[]"),remark:e.remark,created_by:e.created_by.id,created_by_name:e.created_by.name,created_by_mobile:e.created_by.mobile,building_name:e.building_name||"",creator:{id:e.created_by.id,name:e.created_by.name,mobile:e.created_by.mobile,is_im_user:e.created_by.is_im_user},created_on:e.created_on,cc_set:e.cc&&e.cc.map((function(e){return{id:e.id,name:e.name,mobile:e.mobile,is_im_user:e.is_im_user}})),modified_on:e.modified_on!==e.created_on&&e.modified_on},t.loaded=!0})).catch((function(e){t.problemData={},t.emptyTips=e.errmsg||"内容获取失败",$log.log("获取形象进度详情失败",e)})).finally((function(){t.loading=!1}))},deleteProblem:function(){var e=this,t={title:"删除后不可恢复，确认删除？",cancelText:"取消",okText:"删除",callback:function(t){t&&(e.loaded=!1,e.checkNetWork().then((function(t){return Object(b.a)({id:e.id})})).then((function(){m.a.$emit("upDateList"),e.$router.back()})).catch((function(e){o.a.alert(e)})))}};o.a.popBox(t)},updateProblem:function(){this.$router.push("/image-process-add/".concat(this.id))}}},g=(a("6289"),a("17cc")),h=Object(g.a)(f,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("page-content",{attrs:{title:"形象进度详情","show-go-root":!0}},[e.problemData.created_by===e.user.user_id?a("div",{staticClass:"header-btn",attrs:{slot:"header-bar-right"},on:{click:e.deleteProblem},slot:"header-bar-right"},[e._v("删除")]):e._e(),a("scroller",{attrs:{"is-empty":!e.loaded}},[e.loaded?[a("div",{staticClass:"content"},[a("problem-detail-header",{staticStyle:{"background-color":"#ffffff",height:"44px"},attrs:{status:e.problemData.process_status}}),a("item",{attrs:{label:"项目/部位",text:e.problemData.proj_name+(e.problemData.building_name?"("+e.problemData.building_name+")":"")}}),a("item",{attrs:{label:"类型",text:e.problemData.type}}),a("item",{attrs:{label:"进度照片"}},[a("div",{staticClass:"item-con",attrs:{slot:"right"},slot:"right"},[a("item-img-list",{attrs:{editabled:!1},model:{value:e.problemData.image_file,callback:function(t){e.$set(e.problemData,"image_file",t)},expression:"problemData.image_file"}})],1)]),a("item",{attrs:{label:"进度说明",text:e.problemData.remark}}),a("user-select",{attrs:{title:"抄送人",mode:"view",multi:!0,editabled:!1},model:{value:e.problemData.cc_set,callback:function(t){e.$set(e.problemData,"cc_set",t)},expression:"problemData.cc_set"}}),a("user-select",{attrs:{title:"记录人",date:e._f("formatDate")(e.problemData.created_on),"modify-date":e._f("formatDate")(e.problemData.modified_on),mode:"view",editabled:!1},model:{value:e.problemData.creator,callback:function(t){e.$set(e.problemData,"creator",t)},expression:"problemData.creator"}})],1),e.problemData.created_by===e.user.user_id?a("app-button-group",[a("app-button",{attrs:{type:"operate"},on:{click:e.updateProblem}},[e._v("修改")])],1):e._e()]:e._e(),a("loading-status",{attrs:{"is-loading":e.loading,type:e.type,"is-empty":!e.loading&&!e.loaded&&!e.problemData.id,"empty-text":e.emptyTips}})],2)],1)}),[],!1,null,"f81ee496",null);t.default=h.exports},b1a2:function(e,t,a){var r=a("6869");"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);(0,a("85cb").default)("741c3250",r,!0,{sourceMap:!1,shadowMode:!1})},da1c:function(e,t,a){"use strict";a("163d");var r=a("65a8"),o={name:"ProblemHeader",props:{status:{type:String,default:""},statusText:{type:String,default:""},level:{type:String,default:""},isTimeout:{type:Boolean,default:!1},sentBackTimes:{type:[Number,String],default:0}},data:function(){return{edOptions:{}}},created:function(){var e=this;r.a.getOptions("紧急程度").then((function(t){e.edOptions=t}))}},n=(a("1f63"),a("17cc")),i=Object(n.a)(o,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",e._g({staticClass:"problem-detail-header border-bottom"},e.$listeners),[a("div",{staticClass:"status",class:{"待整改":"status-red","不合格":"status-red","已退回":"status-red","待复验":"status-orange","已放水待验收":"status-orange","检查中":"status-orange","待验收":"status-orange","已通过":"status-green","已整改":"status-green","已提交":"status-green","合格":"status-green","检查完毕":"status-green","已验收":"status-green","已关闭":"status-black","进度正常":"status-green","进度滞后":"status-red","验收中":"status-orange","已抽验":"status-green"}[e.status]},[e._v(e._s(e.statusText||e.status))]),"紧急"===e.level||"特急"===e.level?a("span",{staticClass:"urgent"},[e._v(e._s(e.edOptions[e.level]))]):e._e(),e.isTimeout?a("span",{staticClass:"timeout"},[e._v("超时")]):e._e(),e.sentBackTimes>0?a("span",{staticClass:"return"},[e._v("退回"+e._s(e.sentBackTimes)+"次")]):e._e(),e._t("operat")],2)}),[],!1,null,"0901aadd",null);t.a=i.exports},dd16:function(e,t,a){"use strict";(function(e){t.a={name:"StatusText",props:{status:{type:String},text:{type:String},extend:{type:Object,default:function(){return{}}}},data:function(){return{classSet:e.extend({"草稿":"color-gray","暂存":"color-gray","检查中":"color-orange","待整改":"color-red","待复验":"color-orange","待验收":"color-red","待报验":"color-red","待申请进场":"color-red","待初验":"color-red","待送检":"color-red","待上传报告":"color-red","待退场":"color-red","待建设单位验收":"color-red","待区域验收":"color-red","供应链退回":"color-red","预创建":"color-status-blue","已提交":"color-green","已整改":"color-green","已验收":"color-green","已通过":"color-green","已退场":"color-gray","已关闭":"color-gray","非正常关闭":"color-gray","已退回":"color-red","已完成":"color-green","已甩项":"color-gray","检查完毕":"color-green","送检合格":"color-green","复验合格":"color-green","验收合格":"color-green","验收不合格":"color-red","未验收":"color-orange","待点评":"color-orange","已点评":"color-green","合格":"color-green","不合格":"color-red","进度正常":"color-green","进度滞后":"color-red","正常":"color-green","滞后":"color-red","施工单位验收合格":"color-green","监理单位验收合格":"color-green","建设单位验收合格":"color-green","施工单位验收不合格":"color-red","监理单位验收不合格":"color-red","建设单位验收不合格":"color-red"},this.extend)}},mounted:function(){}}}).call(this,a("391c"))}}]);