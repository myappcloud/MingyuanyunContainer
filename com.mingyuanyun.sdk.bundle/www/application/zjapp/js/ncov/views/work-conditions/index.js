(window.webpackJsonp_module_entry_zjapp_=window.webpackJsonp_module_entry_zjapp_||[]).push([["ncov/views/work-conditions/index","chunk-2d2263f6"],{"050a":function(t,e,i){(t.exports=i("690e")(!1)).push([t.i,'.zjapp .ncov-work-conditions-edit .ncov-W-C-item[data-v-2f387bf2]{margin-bottom:10px}.zjapp .ncov-work-conditions-edit .ncov-W-C-icon[data-v-2f387bf2],.zjapp .ncov-work-conditions-edit .ncov-W-C-icon div[data-v-2f387bf2],.zjapp .ncov-work-conditions-edit .ncov-W-C-title[data-v-2f387bf2]{display:flex;align-items:center}.zjapp .ncov-work-conditions-edit .ncov-W-C-icon[data-v-2f387bf2],.zjapp .ncov-work-conditions-edit .ncov-W-C-icon div[data-v-2f387bf2]{justify-content:center}.zjapp .ncov-work-conditions-edit .ncov-W-C-title[data-v-2f387bf2]{font-size:16px;height:46px;padding:0 0 0 15px;justify-content:space-between;background:#fff;border-bottom:1px solid #ececec;position:relative;color:#333;font-weight:700}.zjapp .ncov-work-conditions-edit .ncov-W-C-title[data-v-2f387bf2]:after{content:"";width:4px;height:16px;background:#4275e8;position:absolute;top:50%;left:0;margin-top:-8px}.zjapp .ncov-work-conditions-edit .ncov-W-C-icon[data-v-2f387bf2]{width:46px;height:46px}.zjapp .ncov-work-conditions-edit .ncov-W-C-icon div[data-v-2f387bf2]{width:18px;height:18px;background:#ff3c46;border-radius:50%}.zjapp .ncov-work-conditions-edit .ncov-W-C-icon i[data-v-2f387bf2]{width:8px;height:1px;background:#fff;display:inline-block}.zjapp .ncov-work-conditions-edit .ncov-W-C-textarea[data-v-2f387bf2] {padding:12px 15px}.zjapp .ncov-work-conditions-edit .ncov-W-C-textarea[data-v-2f387bf2] textarea{line-height:22px;min-height:44px;max-height:110px}',""])},"0c52":function(t,e,i){(t.exports=i("690e")(!1)).push([t.i,".zjapp .app-stepper[data-v-03df57b7]{display:inline-block;width:110px;height:34px;margin:-2px 0;white-space:nowrap;font-size:0;line-height:0;vertical-align:top}.zjapp .app-stepper .number-input[data-v-03df57b7]{width:51px;height:34px;border:1px solid #dcdcdc;border-radius:0;font-size:14px;text-align:center;background-color:#fff;color:#111;box-sizing:border-box}.zjapp .app-stepper .number-input-focus[data-v-03df57b7]{border-color:#4275e8}.zjapp .btn-add[data-v-03df57b7],.zjapp .btn-minus[data-v-03df57b7]{display:inline-block;width:28px;height:34px;line-height:34px;padding:0;border:1px solid #dcdcdc;color:#666;text-align:center;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;box-sizing:border-box;background-color:#fff}.zjapp .btn-minus[data-v-03df57b7]{border-right:none;border-radius:4px 0 0 4px}.zjapp .btn-add[data-v-03df57b7]{border-left:none;border-radius:0 4px 4px 0}.zjapp .icon-add[data-v-03df57b7],.zjapp .icon-minus[data-v-03df57b7]{font-size:11px;vertical-align:top;display:inline-block;margin-top:10.5px}.zjapp .disabled[data-v-03df57b7]{color:#c8c8c8}.zjapp .activing[data-v-03df57b7]{color:#4275e8}",""])},"0f7b":function(t,e,i){"use strict";i("f548"),i("163d");var n,o,a={name:"AppStepper",components:{NumberInput:i("6948").a},props:{value:{type:[String,Number],default:""},max:{type:[String,Number],default:200},range:{type:Array}},data:function(){return{addActiving:!1,minusActiving:!1}},computed:{rangeMin:function(){return this.range&&this.range[0]||0},rangeMax:function(){return this.range&&this.range[1]?this.range[1]:this.max},allowAdd:function(){return""!==this.value&&this.value<this.rangeMax},allowMinus:function(){return""!==this.value&&this.value>this.rangeMin}},methods:{onChange:function(t){t&&(t=String(t).replace(/\D/g,"")),parseInt(t,10)>parseInt(this.max,10)&&(t=this.max),this.$emit("input",Number(t)),this.$emit("change",Number(t))},add:function(){if(this.allowAdd){var t=parseInt(this.value,10)+1;this.isInRange(t)&&(this.$emit("input",t),this.$emit("change",t)),this.setActiving("add")}},minus:function(){if(this.allowMinus){var t=parseInt(this.value,10)-1;this.isInRange(t)&&(this.$emit("input",t),this.$emit("change",t)),this.setActiving("minus")}},isInRange:function(t){return t>=this.rangeMin&&t<=this.rangeMax},setActiving:function(t){var e=this;t&&("minus"===t?(this.minusActiving=!0,clearTimeout(o),o=setTimeout((function(){e.minusActiving=!1}),300)):(this.addActiving=!0,clearTimeout(n),n=setTimeout((function(){e.addActiving=!1}),300)))}}},s=(i("91cb"),i("17cc")),r=Object(s.a)(a,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"app-stepper"},[i("button",{staticClass:"btn-minus",class:{disabled:!t.allowMinus,activing:t.minusActiving},on:{click:t.minus}},[i("icon",{attrs:{name:"minus"}})],1),i("number-input",{attrs:{value:t.value,type:"int",range:t.range},on:{input:t.onChange}}),i("button",{staticClass:"btn-add",class:{disabled:!t.allowAdd,activing:t.addActiving},on:{click:t.add}},[i("icon",{attrs:{name:"add"}})],1)],1)}),[],!1,null,"03df57b7",null);e.a=r.exports},1059:function(t,e,i){"use strict";var n=i("ebf1").a,o=(i("9dea"),i("17cc")),a=Object(o.a)(n,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"redio-box-group",class:"align-"+t.align+" "+t.customClass},t._l(t.options,(function(e,n){return i("span",{key:n,staticClass:"radio-box",class:{selected:"array"===t.optionsType?t.value===e:"object"===t.optionsType&&t.value===n},on:{click:function(e){t.onSelect(n)}}},[t._v("\n    "+t._s(e)+"\n  ")])})))}),[],!1,null,"b0a30924",null);e.a=a.exports},"16ff":function(t,e,i){var n=i("39e4");"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);(0,i("85cb").default)("801e728a",n,!0,{sourceMap:!1,shadowMode:!1})},"19a7":function(t,e,i){(t.exports=i("690e")(!1)).push([t.i,".zjapp .redio-box-group[data-v-b0a30924]{font-size:0;margin-top:-10px}.zjapp .redio-box-group.align-l[data-v-b0a30924]{text-align:left}.zjapp .redio-box-group.align-r[data-v-b0a30924]{text-align:right}.zjapp .radio-box[data-v-b0a30924]{display:inline-block;height:34px;line-height:32px;min-width:60px;padding:0 5px;margin:10px 0 0 10px;border:1px solid #d9d9d9;background:#fff;color:#666;vertical-align:top;font-size:14px;text-align:center;border-radius:3px}.zjapp .radio-box[data-v-b0a30924]:first-child{margin-left:0}.zjapp .radio-box.selected[data-v-b0a30924]{border-color:#4275e8;color:#4275e8}",""])},"2c76":function(t,e,i){"use strict";i("c070")},"38a7":function(t,e,i){"use strict";i("16ff")},"39e4":function(t,e,i){(t.exports=i("690e")(!1)).push([t.i,".zjapp .content[data-v-73ce749f]{display:flex;flex-direction:column;justify-content:flex-end;position:fixed;top:0;left:0;width:100%;height:100%;background-color:rgba(0,0,0,.4);overflow:hidden}",""])},"3a6e":function(t,e,i){"use strict";i.r(e);var n=i("ceec").a,o=(i("97ba"),i("17cc")),a=Object(o.a)(n,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("page-content",{staticClass:"ncov-work-conditions",attrs:{title:"复工条件准备","show-go-root":!0}},[i("div",{staticClass:"header-btn",attrs:{slot:"header-bar-right"},on:{click:t.edit},slot:"header-bar-right"},[t._v("\n    "+t._s(t.noData?"添加":"编辑")+"\n  ")]),t.isLoading?t._e():i("scroller",[i("div",[i("item",{staticClass:"item-part-title mb10"},[i("i",{staticClass:"icon-part"}),i("div",{staticClass:"item-text"},[t._v(t._s(t.proj_name)+t._s(t.bidsectionName))])]),i("van-collapse",{staticClass:"ncov-P-collapses",model:{value:t.workActiveNames,callback:function(e){t.workActiveNames=e},expression:"workActiveNames"}},[i("van-collapse-item",{staticClass:"mb10",class:{"ncov-no-data":0===t.return_work_conditions.length},attrs:{name:"1"}},[i("div",{staticClass:"ncov-W-C-item",attrs:{slot:"title"},slot:"title"},[i("div",{staticClass:"ncov-P-collapse-title ncov-W-collapse-title"},[t._v("\n              政府/企业要求的复工条件\n            ")]),i("div",{staticClass:"ncov-W-C-right"},[t._v("\n              已完成"+t._s(t.noConditions)+"/"+t._s(t.return_work_conditions.length)+"\n            ")])]),i("div",{staticClass:"ncov-W-C-content",class:{noData:t.noData}},[t._l(t.return_work_conditions,(function(e,n){return i("van-checkbox",{key:n,staticClass:"ncov-W-C-li",model:{value:e.checked,callback:function(i){t.$set(e,"checked",i)},expression:"item.checked"}},[t._v(t._s(e.text))])})),i("loading-status",{attrs:{"is-loading":!1,"is-empty":t.noData,"empty-text":"暂无复工条件"}},[i("div",{staticClass:"loading-status-button",attrs:{slot:"empty-content"},on:{click:t.edit},slot:"empty-content"},[t._v("去添加")])])],2)])],1),i("item",{staticClass:"ncov-W-C-item_edit",attrs:{mode:"edit",label:"政府是否已同意复工",text:t.workName,placeholder:"必选","form-check":t.formCheck,editabled:!0},on:{click:t.onIsWorkOpen}}),i("item",{attrs:{label:"是否已复工",mode:"edit"}},[i("div",{staticClass:"item-con",attrs:{slot:"right"},slot:"right"},[i("radio-box",{attrs:{options:t.whetherIsStartOption},model:{value:t.data.is_work,callback:function(e){t.$set(t.data,"is_work",e)},expression:"data.is_work"}})],1)]),i("date-select",{staticClass:"ncov-W-C-item_edit",attrs:{label:"复工或预计复工时间",type:"date",min:t.minDate,max:t.maxDate,"form-check":t.formCheck,format:"YYYY-MM-DD",placeholder:"必选"},model:{value:t.data.work_time,callback:function(e){t.$set(t.data,"work_time",e)},expression:"data.work_time"}}),i("item",{staticClass:"ncov-W-C-item_edit mb10",attrs:{label:"计划用工量",mode:"edit"}},[i("template",{slot:"right"},[i("app-stepper",{staticStyle:{flex:"1","text-align":"right"},attrs:{range:[0,999999],max:999999},model:{value:t.data.plan_worker_num,callback:function(e){t.$set(t.data,"plan_worker_num",e)},expression:"data.plan_worker_num"}}),i("div",{staticClass:"item-font ml5"},[t._v("人")])],1)],2),i("div",{staticClass:"ncov-W-C-item_text"},[t._v("附件"),i("span",[t._v("(选填)")])]),i("item",{staticClass:"pt0 bb pb15"},[i("item-img-list",{attrs:{mode:"edit",maxlength:15,"allow-select-album":!0,"allow-buildin-album":!0,"allow-multi-select":!0},model:{value:t.data.image,callback:function(e){t.$set(t.data,"image",e)},expression:"data.image"}})],1),i("item-textarea",{staticClass:"ncov-W-C-textarea",attrs:{placeholder:"备注 (选填)"},model:{value:t.remark,callback:function(e){t.remark=e},expression:"remark"}})],1)]),t.isLoading?t._e():i("app-button-group",{attrs:{"fixed-bottom":""}},[i("app-button",{on:{click:t.submit}},[t._v("提交")])],1),i("loading-status",{attrs:{"is-loading":t.isLoading,"is-empty":!1,"empty-text":"暂无复工条件"}})],1)}),[],!1,null,"46a574c5",null);e.default=a.exports},"3c64":function(t,e,i){"use strict";i("163d");var n={name:"ItemTextarea",components:{},props:{value:{type:String,default:""},placeholder:{type:String,default:""},maxlength:{type:Number,default:200},borderBottom:{type:Boolean,default:!0}},data:function(){return{textareaHeight:40,isLock:!1,blurTime:null}},computed:{lastLength:function(){var t=this.value&&this.value.length||0,e=this.maxlength-t;return e>0?e:0}},mounted:function(){var t=this;this.$nextTick((function(){t.textareaHeight=t.$refs.rule&&t.$refs.rule.offsetHeight||40}))},methods:{onfocus:function(){var t=(new Date).getTime();this.blurTime&&t-this.blurTime<300&&window.cordova&&window.cordova.plugins&&window.cordova.plugins.Keyboard&&(this.$refs.input.blur(),window.cordova.plugins.Keyboard.close()),this.blurTime=null,this.$emit("focus")},onblur:function(){this.blurTime=(new Date).getTime(),this.$emit("blur")},setStatus:function(t){console.log(t),this.isLock=t},oninput:function(t){var e=this;setTimeout((function(){if(!e.isLock){var i=t.target.value;i.length>e.maxlength&&(i=i.substring(0,e.maxlength),e.$refs.input.value=i),e.$refs.rule.innerText=i,e.textareaHeight=e.$refs.rule&&e.$refs.rule.offsetHeight+20,e.$emit("input",i),e.$emit("change",i)}}),0)}}},o=(i("2c76"),i("17cc")),a=Object(o.a)(n,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"item-textarea",class:{"border-bottom":t.borderBottom}},[i("div",{staticClass:"item-textarea-content"},[i("textarea",{ref:"input",style:{height:t.textareaHeight+"px"},attrs:{placeholder:t.placeholder},domProps:{value:t.value},on:{focus:t.onfocus,blur:t.onblur,compositionstart:function(e){t.setStatus(!0)},compositionend:function(e){t.setStatus(!1)},input:t.oninput}}),i("div",{ref:"rule",staticClass:"rule"},[t._v("\n      "+t._s(t.value)+"\n    ")]),t.maxlength!==1/0?i("p",{staticClass:"counter"},[t._v("\n      "+t._s(t.lastLength)+"\n    ")]):t._e()])])}),[],!1,null,null,null);e.a=a.exports},"574c":function(t,e,i){(t.exports=i("690e")(!1)).push([t.i,".zjapp .item-textarea{background-color:#fff;padding:5px 15px}.zjapp .item-textarea-content{position:relative}.zjapp .item-textarea .rule,.zjapp .item-textarea textarea{width:100%;min-height:40px;line-height:20px;font-size:16px;padding:0;border:none}.zjapp .item-textarea .rule{position:absolute;top:0;left:0;visibility:hidden;word-break:break-all}.zjapp .item-textarea .counter{text-align:right;margin:0 0 -5px 0;height:15px;line-height:15px;color:#b2b2b2;font-size:12px}",""])},"5efa":function(t,e,i){var n=i("d9eb");"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);(0,i("85cb").default)("168b7467",n,!0,{sourceMap:!1,shadowMode:!1})},"6dbc":function(t,e,i){"use strict";i("fae0")},7490:function(t,e,i){"use strict";i("5efa")},8474:function(t,e,i){"use strict";var n=i("329b"),o=(i("ed6c"),i("591c")),a=i("e89f"),s=i("4360"),r={name:"DateSelectDialog",components:{DatetimePicker:o.a},mixins:[a.a],store:s.a,data:function(){return{show:!1,showCon:!1,date:"",type:"",min:"",max:"",confirmFn:function(){}}},watch:{show:function(t){var e=this;t&&this.$nextTick((function(){e.showCon=!0}))}},methods:{open:function(t){this.date=t.date,this.type=t.type||"datetime",this.min=t.min||void 0,this.max=t.max||void 0,this.confirmFn=t.onConfirm,this.show=!0},close:function(){this.showCon=!1},afterClose:function(){this.show=!1},onConfirm:function(t){this.confirmFn&&this.confirmFn(t),this.close()},onCancel:function(t){this.close()}}},c=(i("38a7"),i("17cc")),l=Object(c.a)(r,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.show?i("div",{staticClass:"content",on:{click:function(e){return e.target!==e.currentTarget?null:t.close(e)}}},[i("transition",{attrs:{name:"slide-up"},on:{"after-leave":t.afterClose}},[t.showCon?i("van-datetime-picker",{attrs:{type:t.type,"min-date":t.min,"max-date":t.max},on:{confirm:t.onConfirm,cancel:t.onCancel},model:{value:t.date,callback:function(e){t.date=e},expression:"date"}}):t._e()],1)],1):t._e()}),[],!1,null,"73ce749f",null).exports,d=!1;d||(d=new(n.default.extend(l))({el:document.createElement("div")}),document.body.appendChild(d.$el));e.a=d},"8efa":function(t,e,i){var n=i("d7eb");"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);(0,i("85cb").default)("10b822b9",n,!0,{sourceMap:!1,shadowMode:!1})},"91cb":function(t,e,i){"use strict";i("c82d")},"97ba":function(t,e,i){"use strict";i("8efa")},"9baf":function(t,e,i){"use strict";var n=i("8474"),o=i("07d2"),a=i("6bf2"),s=i.n(a),r={name:"CheckitemSelect",components:{Item:o.default},props:{label:{type:String,default:""},mode:{type:String,default:"edit"},value:{type:String,default:""},text:{type:String,default:""},placeholder:{type:String,default:"请选择"},format:{type:String,default:"YYYY-MM-DD"},editabled:{type:Boolean,default:!0},min:{type:Date},max:{type:Date},type:{type:String,default:""},formCheck:{type:Boolean,default:!1}},data:function(){return{}},computed:{showText:function(){return this.text?this.text:this.value?s()(this.value).format(this.format):""}},methods:{open:function(){var t=this;n.a.open({date:this.value?s()(this.value).toDate():new Date,min:this.min,max:this.max,type:this.type,onConfirm:function(e){var i=s()(e).format("YYYY-MM-DD HH:mm:ss");t.$emit("input",i),t.$emit("change",i)}})},close:function(){n.a.close()}}},c=i("17cc"),l=Object(c.a)(r,(function(){var t=this.$createElement;return(this._self._c||t)("item",{attrs:{label:this.label,text:this.showText,mode:this.mode,placeholder:this.placeholder,editabled:!0,"form-check":this.formCheck},on:{click:this.open}})}),[],!1,null,null,null);e.a=l.exports},"9dea":function(t,e,i){"use strict";i("fda1")},aeb1:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACQAAAAkCAYAAADhAJiYAAABbUlEQVRYR+3WIU8DMRQH8H+LwjExECi+BwYOh+USFN+CBTnJgsFgEIDYF5hHIBAYEhL8QnC3ZGGIKcIeKVnD1q13ba/tjeTO3vXul//r6z2GFbvYinlQg9SKpCmt9Rvgz9fsS9yrNCGBGe5kXUZYH31upQJVGUhiQDieJtMTqEpAKkaWkUBX0UE6DIA+5997UUFFmPvO9ns0kAkmWpeZYqKAbDDBQbaYoCAXTDCQK2YR1Ca+P84uJ+A3DxebLy6TQBnMPKhNPBkPbgl0AmA4AT+wRZXF/IGIWNIa3E0xMhgrlA/MXELJadYhUEspkxHKF2ZhD7mgfGKWdpkNyjdG2/YmqBCY3HMoD9V8a76KSU8OVzP77neEEH9tlyOj8GDUoRjhiRgOlY+WxhSCxAMalBqAF4wRyADlDWMMykF5xViBlqC8Y6xBM6ijst2k60KnmXr3bNR4PN/4cG3tvHVOoBAQ+c4aVJRundC/S+gHjvBDwDF6SM4AAAAASUVORK5CYII="},c070:function(t,e,i){var n=i("574c");"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);(0,i("85cb").default)("35590dcb",n,!0,{sourceMap:!1,shadowMode:!1})},c13f:function(t,e,i){"use strict";var n=i("329b"),o=(i("cc57"),i("04f3")),a=i("915f"),s=i("4360"),r={name:"NcovGuide",components:{},mixins:[a.a],store:s.a,data:function(){return{show:!1,workList:[],selected:{},backButtonEvent:null}},methods:{openPopup:function(t){this.value=!0,this.show=!0,this.workList=t.workList,this.callback=t.callback,this.selected=t.selected,this.selectClassName(this.selected),this.backButtonEvent||(this.backButtonEvent=Object(o.a)(this.closePopup))},closePopup:function(){this.value=!1,this.show=!1,this.backButtonEvent&&(Object(o.c)(this.backButtonEvent),this.backButtonEvent=null)},onSelectWork:function(t){this.closePopup(),this.callback(t)},selectClassName:function(t){this.workList=this.workList.map((function(e){var i={id:e.id,name:e.name};return e.id===t.id&&(i.className="selected"),i}))}}},c=(i("7490"),i("17cc")),l=Object(c.a)(r,(function(){var t=this,e=t.$createElement;return(t._self._c||e)("van-action-sheet",{staticClass:"ncov-action-sheet",attrs:{title:"政府是否已同意复工",actions:t.workList,round:!1,"lock-scroll":!0},on:{select:t.onSelectWork},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}})}),[],!1,null,"5c437106",null).exports,d=!1;d||(d=new(n.default.extend(l))({el:document.createElement("div")}),document.body.appendChild(d.$el));e.a=d},c82d:function(t,e,i){var n=i("0c52");"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);(0,i("85cb").default)("26e0fa2e",n,!0,{sourceMap:!1,shadowMode:!1})},ceec:function(t,e,i){"use strict";(function(t){i("5ab2"),i("e10e"),i("6d57"),i("06a2");var n,o=i("28f8"),a=(i("f548"),i("6a61"),i("2e91")),s=(i("ed63"),i("8cf2"),i("163d"),i("cc57"),i("07d2")),r=i("3c64"),c=i("774b"),l=i("1059"),d=i("0f7b"),p=i("e68e"),u=i("9baf"),h=i("6144"),f=i("e2a7"),m=i("c13f"),v=i("fc06"),b=i("162a"),g=i("1b7e"),k=i("3122");function x(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function w(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?x(Object(i),!0).forEach((function(e){Object(o.a)(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):x(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}e.a={name:"NcovWorkConditions",components:{Scroller:c.default,Item:s.default,ItemTextarea:r.a,RadioBox:l.a,AppStepper:d.a,ItemImgList:p.a,DateSelect:u.a},data:function(){return{isLoading:!0,workActiveNames:["1"],bidsectionName:"",formCheck:!1,data:{is_allowed_work:null,is_work:"0-",work_time:null,plan_worker_num:0,image:[]},return_work_conditions:[],remark:"",workList:[{id:1,name:"同意（口头）"},{id:2,name:"同意（已备案）"},{id:3,name:"同意（已批复）"},{id:0,name:"未同意"}],workName:"",whetherIsStartOption:{"1-":"是","0-":"否"},minDate:new Date(2020,1,1),maxDate:new Date(2025,11,31)}},computed:{proj_id:function(){return this.$store.state.global.currentProject.id},proj_name:function(){return this.$store.state.global.currentProject.name},bidsection_id:function(){return this.$route.query.sectionId},noData:function(){return 0===this.return_work_conditions.length},noConditions:function(){return(this.return_work_conditions.filter((function(t){return t.checked}))||[]).length}},activated:function(){var t=h.a.getUserObject("ncov-index-section-default"+this.proj_id)||{};this.bidsectionName=t.name||"",this.init()},methods:{init:function(){this.isLoading=!0,this.reset(),this.getDownloadData()},getDownloadData:function(){var t=this;b.a.request("/online/ncov-plamtop/get-work-condition-detail",{proj_id:this.proj_id,bidsection_id:this.bidsection_id}).then((function(e){if(console.log("政府复工条件数据：",e),e){e.is_allowed_work=e.is_allowed_work?Number(e.is_allowed_work):"null",t.remark=e.remark,t.return_work_conditions=e.condition||[],t.data={is_allowed_work:e.is_allowed_work,is_work:(e.is_work||"0")+"-",work_time:e.work_time||null,plan_worker_num:e.plan_worker_num||0,image:"string"==typeof e.image?JSON.parse(e.image):[]},t.return_work_conditions.map((function(t){return Boolean(t.checked)})).includes(!1)||(t.workActiveNames=[]);var i=t.workList.filter((function(t){return e.is_allowed_work===t.id}));i=i&&i.length>0?i[0]:{},t.workName=i.name}t.isLoading=!1})).catch((function(e){t.isLoading=!1}))},reset:function(){this.formCheck=!1,this.workName="",this.workActiveNames=["1"],this.return_work_conditions=[],this.remark="",this.data={is_allowed_work:null,is_work:"0-",work_time:null,plan_worker_num:0,image:[]}},edit:function(){var t=this;v.a.openPopup({return_work_conditions:this.return_work_conditions,remark:this.remark,proj_id:this.proj_id,bidsection_id:this.bidsection_id,closeCallback:function(e){e&&(t.return_work_conditions=e.return_work_conditions,t.remark=e.remark)}})},submit:(n=Object(a.a)(regeneratorRuntime.mark((function t(){var e,i,n,o,a,s;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,this.formCheck=!0,e=this.data,i=e.is_allowed_work,n=e.work_time,o=e.plan_worker_num,e.image,(i||0===i)&&n&&o){t.next=5;break}return t.abrupt("return");case 5:return this.formCheck=!1,t.next=8,g.a.getHasNetwork();case 8:if(t.sent){t.next=12;break}return f.a.alert("当前无网络"),t.abrupt("return",!1);case 12:return f.a.loading("正在提交"),t.next=15,this.uploadImages();case 15:return t.sent,(a=JSON.parse(JSON.stringify(this.data))).is_work=a.is_work.replace("-",""),a.image&&a.image.length>0&&(a.image=a.image.map((function(t){return{url:t.url,id:t.id,user_id:t.user_id}}))),s=w(w({},a),{},{proj_id:this.proj_id,bidsection_id:this.bidsection_id,condition:JSON.stringify(this.return_work_conditions),remark:this.remark}),$log.log("复工条件准备，提交-数据：",s),t.next=23,b.a.post("/online/ncov-plamtop/save-work-condition",null,s);case 23:t.sent,f.a.hideLoading(),f.a.alert("保存成功"),t.next=32;break;case 28:t.prev=28,t.t0=t.catch(0),f.a.hideLoading(),$log.log("复工条件准备，提交-报错：",t.t0);case 32:case"end":return t.stop()}}),t,this,[[0,28]])}))),function(){return n.apply(this,arguments)}),uploadImages:function(){var e=[];return t.each(this.data.image||[],(function(t){!t.url&&t.temp&&e.push(k.a.uploadImage(t.temp).then((function(e){t.url=e})))})),Promise.all(e)},onSelectWork:function(t){this.data.is_allowed_work=t.id,this.workName=t.name},onIsWorkOpen:function(){m.a.openPopup({workList:this.workList,selected:{id:this.data.is_allowed_work},callback:this.onSelectWork})}}}}).call(this,i("391c"))},d7eb:function(t,e,i){(t.exports=i("690e")(!1)).push([t.i,'.zjapp .item-part-title[data-v-46a574c5]{align-items:center}.zjapp .item-part-title .item-text[data-v-46a574c5]{font-size:16px}.zjapp .icon-part[data-v-46a574c5]{position:absolute;top:15px;left:0;width:4px;height:16px;background-color:#4275e8}.zjapp .ncov-work-conditions .mb10[data-v-46a574c5]{margin-bottom:10px}.zjapp .ncov-work-conditions .bb[data-v-46a574c5]{border-bottom:1px solid #ececec}.zjapp .ncov-work-conditions .ncov-W-C-item[data-v-46a574c5]{display:flex;align-items:center;justify-content:space-between;font-size:16px}.zjapp .ncov-work-conditions .ncov-P-collapses[data-v-46a574c5] .van-collapse-item__content{padding:0}.zjapp .ncov-work-conditions .ncov-P-collapses[data-v-46a574c5] .displayFlex{background:#fafafa}.zjapp .ncov-work-conditions .ncov-W-C-right[data-v-46a574c5]{color:#666;margin-right:5px}.zjapp .ncov-work-conditions .ncov-W-C-icon[data-v-46a574c5]{color:#4275e8}.zjapp .ncov-work-conditions .ncov-W-collapse-title[data-v-46a574c5]{position:relative;color:#333;font-weight:700;line-height:26px}.zjapp .ncov-work-conditions .ncov-W-collapse-title[data-v-46a574c5]:after{content:"";width:4px;height:16px;background:#4275e8;position:absolute;top:50%;left:-15px;margin-top:-8px}.zjapp .ncov-work-conditions .ncov-W-C-content.noData[data-v-46a574c5]{height:275px}.zjapp .ncov-work-conditions .ncov-W-C-li[data-v-46a574c5]{background:#fafafa;line-height:22px;min-height:46px;padding:8px 15px;border-bottom:1px solid #ececec}.zjapp .ncov-work-conditions .ncov-W-C-li[data-v-46a574c5]:last-child{border-bottom:none}.zjapp .ncov-work-conditions .ncov-W-C-li[data-v-46a574c5] .van-checkbox__label{white-space:normal;word-break:break-all}.zjapp .ncov-work-conditions[data-v-46a574c5] .van-checkbox__label{margin-left:10px;font-size:16px;color:#333}.zjapp .ncov-work-conditions[data-v-46a574c5] .loading-status-button{padding:5px 16px;background:linear-gradient(270deg,#55abff,#4c7aff);border-radius:15px;margin-top:30px;color:#fff;font-size:14px}.zjapp .ncov-work-conditions .ncov-W-C-item_edit[data-v-46a574c5] .item-label{flex:1;min-width:35%;width:auto}.zjapp .ncov-work-conditions .ncov-W-C-item_text[data-v-46a574c5]{padding:0 15px;height:42px;line-height:42px;color:#333;font-size:16px;background:#fff}.zjapp .ncov-work-conditions .ncov-W-C-item_text span[data-v-46a574c5]{color:#c8c8c8}.zjapp .ncov-work-conditions .ncov-W-C-textarea[data-v-46a574c5] textarea{min-height:60px}',""])},d9eb:function(t,e,i){var n=i("5454");(t.exports=i("690e")(!1)).push([t.i,'.zjapp .ncov-action-sheet[data-v-5c437106] .van-action-sheet__item{height:46px;padding:0 15px;text-align:left;position:realtive}.zjapp .ncov-action-sheet[data-v-5c437106] .van-action-sheet__item.selected:before{content:"";background:url('+n(i("aeb1"))+") no-repeat;background-size:cover;width:18px;height:18px;position:absolute;right:15px;top:14px}",""])},e89f:function(t,e,i){"use strict";var n=i("04f3"),o=i("cf09"),a=i("4360"),s=0;e.a={name:"PopupMixin",data:function(){return{backButtonEvent:null}},watch:{show:function(t){var e=this;if(t){if(this.$nextTick((function(){e.$el&&e.$el.style&&(e.$el.style.zIndex=++o.a.zIndex,s++,a.a.commit("app/SET_HAS_POPUP",!!s))})),!this.backButtonEvent){var i=this.close||this.closePopup;this.backButtonEvent=Object(n.a)(i)}}else--s<0&&(s=0),a.a.commit("app/SET_HAS_POPUP",!!s),this.backButtonEvent&&(Object(n.c)(this.backButtonEvent),this.backButtonEvent=null)}},methods:{}}},ebf1:function(t,e,i){"use strict";(function(t){e.a={name:"RadioBox",props:{options:{type:[Array,Object],default:function(){return[]}},value:{type:String,default:""},align:{type:String,default:"r"},customClass:{type:String,default:""}},data:function(){return{}},computed:{optionsType:function(){return t.isArray(this.options)?"array":t.isObject(this.options)?"object":""}},methods:{onSelect:function(t){var e;"array"===this.optionsType?e=this.options[t]:"object"===this.optionsType&&(e=t),this.$emit("input",e),this.$emit("onSelect",e)}}}}).call(this,i("391c"))},fae0:function(t,e,i){var n=i("050a");"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);(0,i("85cb").default)("0e4ebec4",n,!0,{sourceMap:!1,shadowMode:!1})},fc06:function(t,e,i){"use strict";var n=i("329b"),o=(i("f548"),i("e89f")),a=i("07d2"),s=i("774b"),r=i("e2a7"),c=i("162a"),l=i("04f3"),d={name:"NcovWorkConditionsEdit",components:{Item:a.default,Scroller:s.default},mixins:[o.a],data:function(){return{show:!1,return_work_conditions:[],remark:"",isEdit:!1,proj_id:"",bidsection_id:"",backButtonEvent:null}},methods:{openPopup:function(t){this.value=!0,this.show=!0,this.isEdit=!1,this.return_work_conditions=this.deepClone(t.return_work_conditions),this.remark=t.remark,this.proj_id=t.proj_id,this.bidsection_id=t.bidsection_id,this.closeCallback=t.closeCallback,this.backButtonEvent||(this.backButtonEvent=Object(l.a)(this.onClose))},closePopup:function(t){this.value=!1,this.show=!1,"function"==typeof this.closeCallback&&this.closeCallback(t),this.backButtonEvent&&(Object(l.c)(this.backButtonEvent),this.backButtonEvent=null)},add:function(){this.return_work_conditions=this.return_work_conditions.concat([{text:""}]);var t=this.$refs.scroller.$el,e=t.scrollTop+$rootScope.viewSize.height,i=t.scrollHeight-100;e<i&&this.$refs.scroller.scrollTo(i)},deleteList:function(t,e){var i=this;0!==t.text.length?r.a.confirm({message:"确定要删除该复工条件吗?"},(function(){i.deleteData(e),i.onChangeState()})):this.deleteData(e)},deleteData:function(t){this.return_work_conditions=this.return_work_conditions.filter((function(e,i){return i!==t}))},onChangeState:function(t,e){var i=this;this.isEdit=!0,this.return_work_conditions=this.return_work_conditions.map((function(t,n){return e===n&&(t.text=i.emojiFilter(t.text)),t}))},emojiFilter:function(t){if("string"!=typeof t)return t;return t.replace(/[^\u4e00-\u9fa5a-zA-Z\d,\.。,，（）();:'"{}\[\]<>《》`·!@#$%^&*-+|=\-\/\ ]+/g,"")},submit:function(){var t=this,e=this.remark,i=this.return_work_conditions.filter((function(e){return!t.isEmpty(e.text)}));if(this.isEmpty(e)&&0===i.length)r.a.alert("政府复工条件不能为空");else{var n={proj_id:this.proj_id,bidsection_id:this.bidsection_id,condition:i,remark:e};c.a.post("/online/ncov-plamtop/save-work-condition",null,n).then((function(n){t.closePopup({return_work_conditions:i,remark:e})}))}},isEmpty:function(t){return!(t&&""!==t||0===t)||"string"==typeof t&&0===t.replace(/(^\s*)|(\s*$)/g,"").length},onClose:function(){var t=this;this.isEdit?r.a.confirm({message:"保存本次编辑?",okText:"保存",cancelText:"不保存"}).then((function(e){e?t.submit():t.closePopup()})):this.closePopup()},deepClone:function(t){return JSON.parse(JSON.stringify(t))}}},p=(i("6dbc"),i("17cc")),u=Object(p.a)(d,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("transition",{attrs:{name:"slide-right"}},[t.show?i("page-content",{staticClass:"ncov-work-conditions-edit",attrs:{mode:"dialog",title:"编辑复工条件","show-go-back":!1,"on-close":t.closePopup}},[i("div",{staticClass:"header-btn",attrs:{slot:"header-bar-left"},on:{click:t.onClose},slot:"header-bar-left"},[t._v("取消")]),i("div",{staticClass:"header-btn",attrs:{slot:"header-bar-right"},on:{click:t.submit},slot:"header-bar-right"},[t._v("保存")]),i("scroller",{ref:"scroller"},[i("div",{staticClass:"ncov-W-C-main"},t._l(t.return_work_conditions,(function(e,n){return i("div",{key:n,staticClass:"ncov-W-C-item"},[i("div",{staticClass:"ncov-W-C-title"},[i("span",[t._v(t._s(n+1))]),i("div",{staticClass:"ncov-W-C-icon",on:{click:function(i){t.deleteList(e,n)}}},[i("div",[i("i")])])]),i("van-field",{staticClass:"ncov-W-C-textarea",attrs:{rows:"1",autosize:"",type:"textarea",placeholder:"请输入复工条件"},on:{input:function(i){t.onChangeState(e,n)}},model:{value:e.text,callback:function(i){t.$set(e,"text",i)},expression:"item.text"}})],1)})))]),i("app-button-group",{attrs:{"fixed-bottom":""}},[i("app-button",{on:{click:t.add}},[t._v("\n        添加复工条件\n      ")])],1)],1):t._e()],1)}),[],!1,null,"2f387bf2",null).exports,h=!1;h||(h=new(n.default.extend(u))({el:document.createElement("div")}),document.body.appendChild(h.$el));e.a=h},fda1:function(t,e,i){var n=i("19a7");"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);(0,i("85cb").default)("cb2469e8",n,!0,{sourceMap:!1,shadowMode:!1})}}]);