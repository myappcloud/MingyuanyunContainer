(window.webpackJsonp_module_entry_zjapp_=window.webpackJsonp_module_entry_zjapp_||[]).push([["ncov"],{"23b12":function(e,t){e.exports="data:image/png;base64,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"},"532c":function(e,t,n){"use strict";(function(e){n("9a33"),n("6a61");var r,a,o,i,s,c,l,u=n("2e91"),d=(n("f548"),n("cc57"),n("4ad6")),p=(n("e2a7"),n("3122")),h=n("6144"),g=n("7bac"),f=n("a32d"),m=n.n(f),v=n("af8d");t.a={data:function(){return{url:"",shareUrl:"",shareDescription:"",title:"",throttleTakePicture:e.throttle(d.a.takePicture,2e3,{trailing:!1}),throttleSelectPicture:e.throttle(d.a.selectPicture,2e3,{trailing:!1})}},created:function(){var e=this;window.addEventListener("message",(function(t){t&&"message"===t.type&&"iframeSlideRight"===t.data&&e.$router.back()}),!1),KeyboardExt.shrinkView(!0,(function(e){console.log("设置键盘打开的响应",e)})),window.addEventListener("keyboardDidShow",(function(e){var t=e&&e.keyboardHeight||308;setTimeout((function(){document.getElementById("ncovFrame")&&document.getElementById("ncovFrame").contentWindow.postMessage({key:"keyboardHeight",value:t},"*")}))}),!1),window.addEventListener("keyboardWillHide",(function(e){document.getElementById("ncovFrame")&&document.getElementById("ncovFrame").contentWindow.postMessage({key:"keyboardHeight",value:0},"*")}),!1)},activated:function(){this.$route.query.url&&(this.url=this.$route.query.url),this.$route.query.share_url&&(this.shareUrl=this.$route.query.share_url),this.$route.query.title&&(this.title=this.$route.query.title),this.$route.query.share_description&&(this.shareDescription=this.$route.query.share_description)},deactivated:function(){window.KeyboardExt&&window.KeyboardExt.hide()},beforeRouteLeave:function(e,t,n){document.getElementById("ncovFrame")&&document.getElementById("ncovFrame").contentWindow.postMessage({key:"beforeRouteLeave"},"*"),n()},mounted:function(){var e=this;window.addEventListener("message",(function(t){"function"==typeof e[t.data.type]&&e[t.data.type](t.data.id,t.data.params)}),!1)},methods:{share:function(){v.a.openPopup({title:this.title,shareUrl:this.shareUrl,shareDescription:this.shareDescription,qrCodeId:this.$route.query.qrCodeId,name:this.$route.query.name})},goBack:function(){this.$router.replace({name:"NcovIndex"},!0)},takePicture:(l=Object(u.a)(regeneratorRuntime.mark((function e(t,n){var r,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.throttleTakePicture({edit:!1,waterMark:!1,position:!1});case 3:if(r=e.sent){e.next=6;break}return e.abrupt("return",Promise.reject("拍照未成功"));case 6:return document.getElementById("ncovFrame").contentWindow.postMessage({id:t,notify:r},"*"),e.next=9,p.a.uploadImage(r);case 9:a=e.sent,document.getElementById("ncovFrame").contentWindow.postMessage({id:t,result:a},"*"),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(0),$log.error(e.t0),document.getElementById("ncovFrame").contentWindow.postMessage({id:t,error:e.t0},"*");case 17:case"end":return e.stop()}}),e,this,[[0,13]])}))),function(e,t){return l.apply(this,arguments)}),selectPicture:(c=Object(u.a)(regeneratorRuntime.mark((function e(t,n){var r,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.throttleSelectPicture({edit:!1,waterMark:!1});case 3:return r=e.sent,document.getElementById("ncovFrame").contentWindow.postMessage({id:t,notify:r},"*"),e.next=7,p.a.uploadImage(r);case 7:a=e.sent,document.getElementById("ncovFrame").contentWindow.postMessage({id:t,result:a},"*"),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(0),$log.error(e.t0),document.getElementById("ncovFrame").contentWindow.postMessage({id:t,error:e.t0},"*");case 15:case"end":return e.stop()}}),e,this,[[0,11]])}))),function(e,t){return c.apply(this,arguments)}),savelocalStorage:(s=Object(u.a)(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:h.a.saveUserObject("iframe_"+n.key,n.value),document.getElementById("ncovFrame").contentWindow.postMessage({id:t,result:null},"*");case 2:case"end":return e.stop()}}),e)}))),function(e,t){return s.apply(this,arguments)}),getlocalStorage:function(e,t){var n=h.a.getUserObject("iframe_"+t.key);document.getElementById("ncovFrame").contentWindow.postMessage({id:e,result:n},"*")},saveMMKV:(i=Object(u.a)(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:g.a.saveUserObject("iframe_"+n.key,n.value),document.getElementById("ncovFrame").contentWindow.postMessage({id:t,result:null},"*");case 2:case"end":return e.stop()}}),e)}))),function(e,t){return i.apply(this,arguments)}),getMMKV:(o=Object(u.a)(regeneratorRuntime.mark((function e(t,n){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.a.getUserObject("iframe_"+n.key);case 2:r=e.sent,document.getElementById("ncovFrame").contentWindow.postMessage({id:t,result:r},"*");case 4:case"end":return e.stop()}}),e)}))),function(e,t){return o.apply(this,arguments)}),saveImageToAlbum:(a=Object(u.a)(regeneratorRuntime.mark((function e(t,n){var r,a,o,i,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=n.indexOf("base64,"),a="png",r>-1&&(o=n.substr(0,r+"base64,".length),n=n.substr(r+"base64,".length),a=o.split(",")[0].split(":")[1].split(";")[0].replace("image/","")),i=cordova.file.externalRootDirectory+"check-quality-album/",e.next=8,d.a.isFileExists(i);case 8:if(e.sent){e.next=11;break}return e.next=11,d.a.mkdir(i);case 11:return s=i+(new Date).getTime()+"."+a,e.next=14,d.a.saveImageFromBase64(n,s);case 14:return e.next=16,d.a.saveImageToAlbum(s);case 16:document.getElementById("ncovFrame").contentWindow.postMessage({id:t,result:null},"*"),e.next=23;break;case 19:e.prev=19,e.t0=e.catch(0),$log.error(e.t0),document.getElementById("ncovFrame").contentWindow.postMessage({id:t,error:e.t0},"*");case 23:case"end":return e.stop()}}),e,null,[[0,19]])}))),function(e,t){return a.apply(this,arguments)}),downloadImage:(r=Object(u.a)(regeneratorRuntime.mark((function e(t,n){var r,a,o,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.a.getTempDir();case 2:return r=e.sent,a=m.a.strLeft(m.a.strRightBack(n,"."),"?"),r+=(new Date).getTime()+"."+a,e.next=7,d.a.downloadFile(n,r);case 7:return e.next=9,d.a.convertImageToBase64(r);case 9:return o=e.sent,e.next=12,d.a.deleteFile(r);case 12:i="data:image/"+a+";base64,"+o,document.getElementById("ncovFrame").contentWindow.postMessage({id:t,result:i},"*");case 14:case"end":return e.stop()}}),e)}))),function(e,t){return r.apply(this,arguments)}),consoleLog:function(e,t){$log.log(t),document.getElementById("ncovFrame").contentWindow.postMessage({id:e,result:null},"*")}}}}).call(this,n("391c"))},"71ae":function(e,t,n){var r=n("951c");"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);(0,n("85cb").default)("fcdc735a",r,!0,{sourceMap:!1,shadowMode:!1})},"72c6":function(e,t,n){"use strict";n.r(t);var r=n("532c").a,a=(n("821b"),n("17cc")),o=Object(a.a)(r,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("page-content",{staticClass:"is-keyboard-open",attrs:{title:e.title}},[e.shareUrl?n("div",{staticClass:"header-btn",attrs:{slot:"header-bar-right"},on:{click:e.share},slot:"header-bar-right"},[e._v("分享")]):e._e(),e.url?n("iframe",{staticClass:"ncov-iframe",attrs:{id:"ncovFrame",src:e.url,width:"100%",frameborder:"0",marginwidth:"0",marginheight:"0",scrolling:"no",name:"iframea"}}):e._e()])}),[],!1,null,null,null);t.default=o.exports},"774b":function(e,t,n){"use strict";var r=n("d18d").a,a=(n("b225"),n("17cc")),o=Object(a.a)(r,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{ref:"scroll-warp",staticClass:"scroll-warp",class:{"scroll-warp-pulling":e.pulling,"scroll-warp-complete":!e.hasNext&&!e.isEmpty,"scroll-warp-empty":e.isEmpty},style:{"padding-bottom":e.numberKeyboardCoverHeight+"px"},on:{scroll:e.onScroll,touchstart:e.onTouchstart,touchmove:e.onTouchmove,touchend:e.onTouchend}},[e.allowPullDown?n("div",{staticClass:"pull-refresh-warp",style:{height:e.pullDist+"px"}},[n("div",{staticClass:"pull-refresh"},[n("div",{staticClass:"animation-refresher",class:{refreshing:e.refreshing}}),e.updateTime?n("p",{staticClass:"pull-refresh-date"},[e._v("最后成功同步："+e._s(e.updateTime))]):e._e()])]):e._e(),e._t("default"),e.loading?n("div",{staticClass:"page-loading"},[n("svg",{staticClass:"svg-loading",attrs:{viewBox:"0 0 80 80"}},[n("circle",{attrs:{cx:"40",cy:"40",r:"36"}})])]):e._e(),e.hasNext||e.isEmpty?e._e():[e.$slots.end?e._t("end"):e._e(),!e.$slots.end&&e.endText?n("div",{staticClass:"end-text"},[e._v("\n      "+e._s(e.endText)+"\n    ")]):e._e()]],2)}),[],!1,null,"2b1a346c",null);t.a=o.exports},"821b":function(e,t,n){"use strict";n("71ae")},"822a":function(e,t,n){"use strict";n("ae59")},"951c":function(e,t,n){(e.exports=n("690e")(!1)).push([e.i,".zjapp .ncov-iframe{width:1px;min-width:100%;*width:100%;box-sizing:border-box;flex:1}",""])},"9d55":function(e,t,n){(e.exports=n("690e")(!1)).push([e.i,'.zjapp .scroll-warp[data-v-2b1a346c]{flex:1;overflow:auto;-webkit-overflow-scrolling:touch}.zjapp .scroll-warp-pulling[data-v-2b1a346c]{overflow:hidden}.zjapp .scroll-warp-complete[data-v-2b1a346c]:after{content:"";display:block;height:100px}.zjapp .scroll-warp-empty[data-v-2b1a346c]{display:flex;flex-direction:column}.zjapp .pull-refresh-warp[data-v-2b1a346c]{position:relative;height:0;overflow:hidden}.zjapp .pull-refresh[data-v-2b1a346c]{position:absolute;left:0;bottom:0;height:70px;width:100%;padding:6px;text-align:center}.zjapp .pull-refresh-date[data-v-2b1a346c]{margin-top:4px;height:16px;line-height:16px;font-size:12px;color:#bcbcbc}.zjapp .page-loading[data-v-2b1a346c]{padding:10px;text-align:center}.zjapp .end-text[data-v-2b1a346c]{color:#c8c8c8;background:#f4f4f4;position:relative;line-height:76px;height:76px;text-align:center}.zjapp .end-text[data-v-2b1a346c]:after,.zjapp .end-text[data-v-2b1a346c]:before{content:"";position:absolute;width:48px;height:1px;background:#e4e4e4;top:50%;margin-top:-1px}.zjapp .end-text[data-v-2b1a346c]:after{left:50%;transform:translateX(-92px)}.zjapp .end-text[data-v-2b1a346c]:before{right:50%;transform:translateX(90px)}.zjapp .end-slot[data-v-2b1a346c]{padding:30px;line-height:18px;text-align:center;color:#c8c8c8}',""])},ae58:function(e,t,n){var r=n("5454");(e.exports=n("690e")(!1)).push([e.i,'.zjapp .ncov-return-trip-share .ncov-li[data-v-7047be72]{background:#fff}.zjapp .ncov-return-trip-share .ncov-li[data-v-7047be72]:first-child{margin-bottom:10px}.zjapp .ncov-return-trip-share .ncov-title[data-v-7047be72]{font-size:16px;height:46px;line-height:46px;padding:0 0 0 15px;justify-content:space-between;background:#fff;border-bottom:1px solid #ececec;position:relative;color:#333;font-weight:500}.zjapp .ncov-return-trip-share .ncov-title[data-v-7047be72]:after{content:"";width:4px;height:16px;background:#4275e8;position:absolute;top:50%;left:0;margin-top:-8px}.zjapp .ncov-return-trip-share .ncov-button[data-v-7047be72]{padding:15px 0}.zjapp .ncov-return-trip-share .ncov-button div[data-v-7047be72]{background:linear-gradient(270deg,#55abff,#4c7aff);border-radius:18px;width:136px;height:36px;line-height:36px;text-align:center;color:#fff;font-size:14px;margin:0 auto}.zjapp .ncov-return-trip-share .ncov-button.last[data-v-7047be72]{background:#fafafa}.zjapp .ncov-return-trip-share .ncov-code-layer[data-v-7047be72]{padding:15px 0;background:#fafafa}.zjapp .ncov-return-trip-share .ncov-code[data-v-7047be72]{width:280px;margin:0 auto}.zjapp .ncov-return-trip-share .ncov-code_header[data-v-7047be72]{width:100%;height:101px;border-radius:18px 18px 0 0;background:linear-gradient(135deg,#b3bedf,#8797c4);text-align:center}.zjapp .ncov-return-trip-share .ncov-code_title[data-v-7047be72]{background:url('+r(n("23b12"))+") no-repeat;background-size:cover;width:173px;height:26px;line-height:27px;color:#ccdbff;margin:0 auto 5px}.zjapp .ncov-return-trip-share .ncov-code_text[data-v-7047be72]{color:#fff;font-size:14px;line-height:22px;padding-top:5px;display:flex;align-items:center;justify-content:center;padding:0 15px;overflow:hidden;text-overflow:ellipsis;min-height:44px;letter-spacing:.8px}.zjapp .ncov-return-trip-share .ncov-code_qrCode[data-v-7047be72]{height:300px;border-radius:18px;margin-top:-23px;background:#fff;text-align:center;padding:25px 0 0 0}.zjapp .ncov-return-trip-share .ncov-code-img[data-v-7047be72]{width:225px;height:225px;margin-bottom:13px}.zjapp .ncov-return-trip-share .ncov-tips[data-v-7047be72]{color:#4275e8;font-size:14px;line-height:20px}.zjapp .ncov-return-trip-share .ncov-code_button[data-v-7047be72]{width:165px!important}.zjapp .ncov-return-trip-share .ncov-code_button .app-btn[data-v-7047be72]{padding:0}",""])},ae59:function(e,t,n){var r=n("ae58");"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);(0,n("85cb").default)("06bbf568",r,!0,{sourceMap:!1,shadowMode:!1})},af8d:function(e,t,n){"use strict";var r,a,o,i,c=n("329b"),l=(n("9a33"),n("f548"),n("6491"),n("cc57"),n("6a61"),n("2e91")),u=n("e89f"),d=n("07d2"),p=n("774b"),h=(n("162a"),n("4ad6")),g=n("3bd5"),f=n("3122"),m=n("e2a7"),v=(n("ed08"),n("072e")),A=n.n(v),b={name:"NcovReturnTripShareDialog",components:{Item:d.a,Scroller:p.a},mixins:[u.a],data:function(){return{isLoading:!1,show:!1,name:"",title:"",shareUrl:"",shareDescription:"",qrCodeId:"",qrCodeImageUrl:"",JudgeContinue:!0,interceptName:""}},updated:function(){this.JudgeContinue&&this.heightMonitor()},methods:{openPopup:(i=Object(l.a)(regeneratorRuntime.mark((function e(t){var n,r,a=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.value=!0,this.show=!0,$log.log("防疫宝-个人返程计划-分享填报-传入数据：",t),this.JudgeContinue=!0,this.name=t.name,this.title=t.title,this.interceptName=this.name,this.shareUrl=t.shareUrl,this.shareDescription=t.shareDescription,this.qrCodeId=t.qrCodeId,this.isLoading=!0,this.qrCodeImageUrl="",setTimeout((function(){a.heightMonitor(),clearTimeout(setTimeout)})),e.prev=13,n="".concat(h.a.appImagePath()).concat(g.a.getUser().user_id,"/qrCode/"),e.next=17,h.a.isFileExists(n);case 17:if(r=e.sent,$log.log("防疫宝-个人返程计划-分享填报-判断文件夹是否存在：",r),r){e.next=22;break}return e.next=22,h.a.mkdir(n);case 22:n+=this.qrCodeId+".png",MBarcode.generateQRCode(this.shareUrl,n,(function(e){a.accordingStatueImage(e)}),(function(e){return a.isLoading=!1,e}),{width:225,height:225}),e.next=29;break;case 26:e.prev=26,e.t0=e.catch(13),$log.log("防疫宝-个人返程计划-分享填报-生成二维码报错：",e.t0);case 29:case"end":return e.stop()}}),e,this,[[13,26]])}))),function(e){return i.apply(this,arguments)}),heightMonitor:function(){if(0===this.name.length||!this.$refs.ncovCodeText)return!1;var e=this.$refs.ncovCodeText.offsetHeight,t=this.interceptName,n=e-44>=22?10:4;e>60?this.interceptName=t.slice(0,t.length-n)+"...":this.JudgeContinue=!1},accordingStatueImage:function(e){var t=this;"dev"===APP_ENV?f.a.uploadImage(e).then((function(e){t.qrCodeImageUrl=e,t.isLoading=!1})):(this.qrCodeImageUrl=f.a._fixPath(e),this.isLoading=!1)},closePopup:function(e){this.value=!1,this.show=!1},share:function(){h.a.shareUrlToWeixin(this.title,this.shareUrl,this.shareDescription,0)},saveQrCodeToAlbum:(o=Object(l.a)(regeneratorRuntime.mark((function e(){var t,n,r,a,o=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t=this.$refs.qrCodeImage,!(n=t.src).startsWith("http")){e.next=8;break}return e.next=6,this.downloadImage(this.qrCodeImageUrl);case 6:(r=e.sent)&&(t.src=r);case 8:return a=this.$refs.mainCard,e.abrupt("return",A()(a,{allowTaint:!0,taintTest:!0,useCORS:!0,background:"#f4f4f4"}).then(function(){var e=Object(l.a)(regeneratorRuntime.mark((function e(r){var a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.saveImageToAlbum(r.toDataURL("image/jpeg",1));case 2:if(a=e.sent,t.src=n,-1!==a.errCode){e.next=7;break}return m.a.alert("该操作需要开启手机存储权限"),e.abrupt("return",a.errMsg);case 7:m.a.alert("保存成功");case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 12:e.prev=12,e.t0=e.catch(0),$log.log("防疫宝-个人返程计划-分享填报-html2canvas-报错：",e.t0);case 15:case 16:case"end":return e.stop()}}),e,this,[[0,12]])}))),function(){return o.apply(this,arguments)}),saveImageToAlbum:(a=Object(l.a)(regeneratorRuntime.mark((function e(t){var n,r,a,o,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=t.indexOf("base64,"),r="png",n>-1&&(a=t.substr(0,n+"base64,".length),t=t.substr(n+"base64,".length),r=a.split(",")[0].split(":")[1].split(";")[0].replace("image/","")),o=cordova.file.externalRootDirectory+"check-quality-album/",e.next=8,h.a.isFileExists(o);case 8:if(e.sent){e.next=11;break}return e.next=11,h.a.mkdir(o);case 11:return i=o+(new Date).getTime()+"."+r,e.next=14,h.a.saveImageFromBase64(t,i);case 14:return e.next=16,h.a.saveImageToAlbum(i);case 16:return e.abrupt("return",!0);case 19:return e.prev=19,e.t0=e.catch(0),$log.log("防疫宝-个人返程计划-分享填报-调用原生插件保存到相册-报错：",e.t0),e.abrupt("return",e.t0);case 23:case"end":return e.stop()}}),e,null,[[0,19]])}))),function(e){return a.apply(this,arguments)}),downloadImage:(r=Object(l.a)(regeneratorRuntime.mark((function e(t){var n,r,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h.a.getTempDir();case 3:return n=e.sent,r=s.strLeft(s.strRightBack(t,"."),"?"),n+=(new Date).getTime()+"."+r,e.next=8,h.a.downloadFile(t,n);case 8:return e.next=10,h.a.convertImageToBase64(n);case 10:return a=e.sent,e.next=13,h.a.deleteFile(n);case 13:return e.abrupt("return","data:image/"+r+";base64,"+a);case 16:e.prev=16,e.t0=e.catch(0),$log.log("防疫宝-个人返程计划-分享填报-保存相册时-将图片转换为base64码报错：",e.t0);case 19:case"end":return e.stop()}}),e,null,[[0,16]])}))),function(e){return r.apply(this,arguments)})}},x=(n("822a"),n("17cc")),w=Object(x.a)(b,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("transition",{attrs:{name:"slide-right"}},[e.show?n("page-content",{staticClass:"ncov-return-trip-share",attrs:{mode:"dialog",title:"选择分享填报方式","on-close":e.closePopup}},[e.isLoading?e._e():n("scroller",{ref:"scroller"},[n("div",{staticClass:"ncov-main"},[n("div",{staticClass:"ncov-li"},[n("div",{staticClass:"ncov-title"},[e._v("方式一：分享填报页面给微信好友")]),n("div",{staticClass:"ncov-button"},[n("div",{on:{click:e.share}},[e._v("去微信分享")])])]),n("div",{staticClass:"ncov-li"},[n("div",{staticClass:"ncov-title"},[e._v("方式二：出示二维码，供返程人员扫码填报")]),n("div",{ref:"mainCard",staticClass:"ncov-code-layer"},[n("div",{staticClass:"ncov-code"},[n("div",{staticClass:"ncov-code_header"},[n("div",{staticClass:"ncov-code_title"},[e._v("填报个人返程记录")]),n("div",{ref:"ncovCodeText",staticClass:"ncov-code_text van-multi-ellipsis--l2"},[e._v(e._s(e.interceptName))])]),n("div",{staticClass:"ncov-code_qrCode"},[n("img",{ref:"qrCodeImage",staticClass:"ncov-code-img",attrs:{src:e.qrCodeImageUrl}}),n("p",{staticClass:"ncov-tips"},[e._v("扫描二维码，填写个人返程记录")])])])]),n("div",{staticClass:"ncov-button last"},[n("app-button-group",{staticClass:"ncov-code_button"},[n("app-button",{on:{click:e.saveQrCodeToAlbum}},[e._v("\n                保存到手机相册\n              ")])],1)],1)])])]),n("loading-status",{attrs:{"is-loading":e.isLoading}})],1):e._e()],1)}),[],!1,null,"7047be72",null).exports,y=!1;y||(y=new(c.default.extend(w))({el:document.createElement("div")}),document.body.appendChild(y.$el));t.a=y},b225:function(e,t,n){"use strict";n("ef48")},d18d:function(e,t,n){"use strict";(function(e){n("2b45");var r,a=n("4360"),o=n("48f4"),i=n("162a"),s=n("e2a7"),c=n("a500"),l=n("6f9e"),u={};t.a={name:"Scroller",props:{buildingId:{type:String,default:""},hasNext:{type:Boolean,default:!1},isEmpty:{type:Boolean,default:!1},isSync:{type:Boolean,default:!0},endText:{type:String,default:""},memoryScrollTop:{type:Boolean,default:!0},keepScrollTop:{type:Boolean},hasPullDown:{type:Boolean,default:!0},onPullDown:{type:Function}},data:function(){return{pullDist:0,refreshing:!1,pulling:!1,loading:!1,scrollTop:0,isCurrKeyboard:!1,gapBottom:0}},computed:{allowPullDown:function(){return this.hasPullDown&&(!!this.$listeners.pullDown||!!this.onPullDown)},updateTime:function(){return a.a.state.global.businessDownloadTime},numberKeyboardCoverHeight:function(){return a.a.state.global.isNumberInputOpen?a.a.state.global.numberKeyboardHeight-this.gapBottom:0}},mounted:function(){var e=this;l.a.$on("numberKeyboardOpen",this.onNumberKeyboardOpen),this.$nextTick((function(){var t=e.$refs["scroll-warp"]&&e.$refs["scroll-warp"].getBoundingClientRect&&e.$refs["scroll-warp"].getBoundingClientRect();t&&(e.gapBottom=document.documentElement.clientHeight-t.bottom),e.$el&&e.$el.addEventListener("focus",(function(t){var n=t&&t.target,r=n&&n.tagName&&n.tagName.toLowerCase();if("input"===r||"textarea"===r){window.addEventListener("resize",(function t(){var r=n.getBoundingClientRect(),a=e.$el.getBoundingClientRect(),o=r.bottom-a.bottom;o>0&&e.scrollBy(o),window.removeEventListener("resize",t,!1)}),!1)}}),!0)}))},destroyed:function(){l.a.$off("numberKeyboardOpen",this.onNumberKeyboardOpen)},activated:function(){var e=this.keepScrollTop||this.$router.isBack&&this.memoryScrollTop;this.scrollTop&&e&&(this.$refs["scroll-warp"].scrollTop=this.scrollTop)},deactivated:function(){this.memoryScrollTop&&(this.scrollTop=this.$refs["scroll-warp"].scrollTop)},methods:{onScroll:function(e){var t=this,n=this.$refs["scroll-warp"].scrollTop,r=this.$refs["scroll-warp"].scrollHeight;if(n+this.$refs["scroll-warp"].clientHeight>=r-5&&!this.loading&&this.hasNext){this.loading=!0;var a=this.$listeners.loadNext();a&&a.then&&"function"==typeof a.then?a.then((function(){t.loading=!1})):this.loading=!1}this.$emit("scroll",e)},getTouchDiretion:function(e){if(!(u&&e&&e.touches&&e.touches[0]))return"";var t=e.touches[0].clientX,n=e.touches[0].clientY;return Math.abs(n-u.y)>Math.abs(t-u.x)&&Math.abs(n-u.y)>=3?n>u.y?"down":"up":""},onTouchstart:function(e){this.allowPullDown&&e.touches&&1===e.touches.length&&(u={x:e.touches[0].clientX,y:e.touches[0].clientY,scrollTop:this.$refs["scroll-warp"].scrollTop,pullDist:this.pullDist})},onTouchmove:function(e){if(this.allowPullDown&&e.touches&&1===e.touches.length){var t=this.$refs["scroll-warp"].scrollTop,n=e.touches[0].clientY,r=n-u.y,a=this.getTouchDiretion(e);"down"===a?!this.refreshing&&t<=0?(this.pulling=!0,this.pullDist=(r-u.scrollTop)/2,e.preventDefault()):this.pulling=!1:"up"===a?this.pullDist>0&&(this.pullDist=u.pullDist-(u.y-n),e.preventDefault()):this.pullDist=u.pullDist}},onTouchend:function(){var e=this;this.allowPullDown&&(u={},this.pulling=!1,this.pullDist>=70&&this.isSync?this.refreshing?this.makePullTo(70):this.makePullTo(70).then((function(){if(e.refreshing=!0,e.onPullDown){var t=e.onPullDown();t&&t.then&&"function"==typeof t?t.finally((function(){e.refreshing=!1,e.makePullTo(0)})):(e.refreshing=!1,e.makePullTo(0))}else e.dataSync().then((function(){e.refreshing=!1,e.makePullTo(0),e.$emit("pullDown")})).catch((function(){e.refreshing=!1,e.makePullTo(0),e.$emit("pullDown")}))})):(this.refreshing=!1,this.makePullTo(0)))},makePullTo:function(e){var t=this,n=this.pullDist,r=e,a=r-n,o=n;return n===r?Promise.resolve():new Promise((function(e){!function i(){window.requestAnimationFrame((function(){o+=a/6,t.pullDist=o,n<r&&o<r||n>r&&o>r?i():(t.pullDist=r,t.refreshing=!1,e())}))}()}))},dataSync:function(){var e,t=o.default.getCurrentModuleCode(),n=o.default.getCurrentRoute(),r=n.meta&&n.meta.isTodo;if(o.default.isModuleNeedBuilding(t)&&!r){if(!this.buildingId)return new Promise((function(e){setTimeout((function(){e()}),500)}));e=this.buildingId}return c.a.addTrack("公共-手动下拉刷新","",""),i.a.beginManualUpdate(),o.default.checkSync(e).then((function(e){return i.a.endManualUpdate(),e})).catch((function(e){$log.error("下拉刷新错误",e),e&&"Error: Network Error"===e.toString()?s.a.alert("当前网络无法同步数据"):s.a.alert(e),i.a.endManualUpdate()}))},getScrollHeight:function(){return this.$refs["scroll-warp"].offsetHeight},getScrollTop:function(){return this.$refs["scroll-warp"].scrollTop},setScrollTop:function(e){this.$refs["scroll-warp"].scrollTop=e},scrollBy:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:200,a=this.getScrollTop(),o=a+e,i=Math.round(n/16.7),s=e/i,c=a,l=r=+new Date;return a===o?Promise.resolve():new Promise((function(e){!function n(){window.requestAnimationFrame((function(){l===r&&(c+=s,t.$refs["scroll-warp"].scrollTop=c,a<o&&c<o||a>o&&c>o?n():(t.$refs["scroll-warp"].scrollTop=o,e()))}))}()}))},scrollTo:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:200,n=this.getScrollTop(),r=e-n;return this.scrollBy(r,t)},scrollToEle:function(e){var t=e.keyboardHeight||232,n=(e=e.$el?e.$el:e).getBoundingClientRect(),r=this.$refs["scroll-warp"].getBoundingClientRect();if(n&&r){var o=document.documentElement.clientHeight-(a.a.state.global.isNumberInputOpen?t:0),i=r.bottom<o?r.bottom:o,s=r.top-n.top,c=n.bottom-i;s>0?this.scrollBy(-s-10):c>0&&this.scrollBy(c+10)}},isCurrent:function(t,n){var r=this;t.length&&e.each(t,(function(e){e._uid===n?r.isCurrKeyboard=!0:r.isCurrent(e.$children,n)}))},onNumberKeyboardOpen:function(e){this.isCurrKeyboard=!1,this.isCurrent(this.$children,e._uid),this.isCurrKeyboard&&this.scrollToEle(e)}}}}).call(this,n("391c"))},e89f:function(e,t,n){"use strict";var r=n("04f3"),a=n("cf09"),o=n("4360"),i=0;t.a={name:"PopupMixin",data:function(){return{backButtonEvent:null}},watch:{show:function(e){var t=this;if(e){if(this.$nextTick((function(){t.$el&&t.$el.style&&(t.$el.style.zIndex=++a.a.zIndex,i++,o.a.commit("app/SET_HAS_POPUP",!!i))})),!this.backButtonEvent){var n=this.close||this.closePopup;this.backButtonEvent=Object(r.a)(n)}}else--i<0&&(i=0),o.a.commit("app/SET_HAS_POPUP",!!i),this.backButtonEvent&&(Object(r.c)(this.backButtonEvent),this.backButtonEvent=null)}},methods:{}}},ef48:function(e,t,n){var r=n("9d55");"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);(0,n("85cb").default)("a1a65c0c",r,!0,{sourceMap:!1,shadowMode:!1})}}]);