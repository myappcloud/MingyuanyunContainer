(window.webpackJsonp_module_entry_zjapp_=window.webpackJsonp_module_entry_zjapp_||[]).push([["chunk-9b785b48"],{"17a9":function(e,t,n){var r=n("bbd3");"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);(0,n("85cb").default)("430e1c86",r,!0,{sourceMap:!1,shadowMode:!1})},"310c":function(e,t,n){var r=n("34e3");"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);(0,n("85cb").default)("ca4785d6",r,!0,{sourceMap:!1,shadowMode:!1})},"34e3":function(e,t,n){(e.exports=n("690e")(!1)).push([e.i,'.zjapp .table-chart[data-v-486596b0]{position:relative;display:flex;flex:1;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.zjapp .drawing[data-v-486596b0]{flex:1;width:100%}.zjapp .chart-legend[data-v-486596b0]{position:absolute;padding:7px 10px;top:6px;right:6px;height:68px;background:#fff;border-radius:2px;z-index:10;box-shadow:0 0 2px 0 rgba(0,0,0,.5)}.zjapp .legend-item[data-v-486596b0]{margin:0;line-height:1.5;white-space:nowrap}.zjapp .legend-item[data-v-486596b0]:before{content:"";margin-right:8px;vertical-align:-1px;display:inline-block;width:15px;height:10px}.zjapp .legend-orange[data-v-486596b0]:before{background-color:#ffa340}.zjapp .legend-green[data-v-486596b0]:before{background-color:#48d48c}.zjapp .legend-red[data-v-486596b0]:before{background-color:#ff6e6e}.zjapp .legend-blue-shallow[data-v-486596b0]:before{background-color:#98b8ff}.zjapp .legend-blue-deep[data-v-486596b0]:before{background-color:#638df7}.zjapp .legend-purple[data-v-486596b0]:before{background-color:#8e81ff}',""])},"4f50":function(e,t,n){"use strict";(function(e){n("5ab2"),n("6d57"),n("e10e"),n("6f84"),n("cc57");var r=n("28f8");n("163d"),n("f548");function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){Object(r.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var o,l,c,s,u,f,d,h=0,p={red:"#ff6e6e",green:"#48d48c",orange:"#ffa340","blue-shallow":"#98b8ff","blue-deep":"#638df7",purple:"#8E81FF"},g={red:"#ff3d3d",green:"#0bc666",orange:"#ff8400","blue-shallow":"#6989e8","blue-deep":"#426fd6",purple:"#8E81FF"},x=0,b=0,y=0,m=0,v=0,w=0,S=0,k=0,j=0,P=!1,A={},O={},R=[];t.a={name:"TableChartDrawing",props:{xLabel:{type:String,default:"工序"},xItems:{type:Array,default:function(){return[]}},yLabel:{type:String,default:"楼层"},yItems:{type:Array,default:function(){return[]}},datas:{type:Array,default:function(){return[]}},cellWidth:{type:Number,default:30},showAllColorCellContain:{type:Boolean,default:!1}},data:function(){return{}},watch:{datas:function(e){this.initDatas(),this.setMoveStatus(),this.draw()}},mounted:function(){var e=this;this.$nextTick((function(){e.init()}))},methods:{init:function(){var e,t,n,r,i;this.$refs.drawing&&(o=this.$refs.drawing,l=o.getContext("2d"),c=o.offsetWidth,s=o.offsetHeight,u=this.getPixelRatio(l),o.style.width=c+"px",o.style.height=s+"px",o.width=c*u,o.height=s*u,h=s-110,!l.extended&&(n=(t=e=l).backingStorePixelRatio||CanvasRenderingContext2D.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1,1!==(i=(window.devicePixelRatio||1)/n)&&(function(e,t){for(var n in e)e.hasOwnProperty(n)&&t(e[n],n)}({fillRect:"all",clearRect:"all",strokeRect:"all",moveTo:"all",lineTo:"all",arc:[0,1,2],arcTo:"all",bezierCurveTo:"all",isPointinPath:"all",isPointinStroke:"all",quadraticCurveTo:"all",rect:"all",translate:"all",createRadialGradient:"all",createLinearGradient:"all"},(function(t,n){var r;e[n]=(r=e[n],function(){var e,n,a=Array.prototype.slice.call(arguments);if("all"===t)a=a.map((function(e){return e*i}));else if(Array.isArray(t))for(e=0,n=t.length;e<n;e++)a[t[e]]*=i;return r.apply(this,a)})})),e.stroke=(r=e.stroke,function(){this.lineWidth*=i,r.apply(this,arguments),this.lineWidth/=i}),e.fillText=function(e){return function(){var t=Array.prototype.slice.call(arguments);t[1]*=i,t[2]*=i,this.font=this.font.replace(/(\d+)(px|em|rem|pt)/g,(function(e,t,n){return t*i+n})),e.apply(this,t),this.font=this.font.replace(/(\d+)(px|em|rem|pt)/g,(function(e,t,n){return t/i+n}))}}(e.fillText),e.strokeText=function(e){return function(){var t=Array.prototype.slice.call(arguments);t[1]*=i,t[2]*=i,this.font=this.font.replace(/(\d+)(px|em|rem|pt)/g,(function(e,t,n){return t*i+n})),e.apply(this,t),this.font=this.font.replace(/(\d+)(px|em|rem|pt)/g,(function(e,t,n){return t/i+n}))}}(e.strokeText),e.extended=!0)),l.lineWidth=1/u,l.translate(1/u/2,1/u/2),this.initDatas(),this.setMoveStatus(),this.draw(),o.addEventListener("touchstart",this.onTouchstart),o.addEventListener("touchmove",this.onTouchmove),o.addEventListener("touchend",this.onTouchend))},initDatas:function(){var t=this,n=e.groupBy(this.datas,"x");A={},O={},R=[],e.each(this.xItems,(function(e,t){A[e.id]=a(a({},e),{},{index:t})})),e.each(this.yItems,(function(e,t){O[e.id]=a(a({},e),{},{index:t})})),e.each(n,(function(n){if(t.showAllColorCellContain)e.each(n,(function(e){R.push(a(a({},e),{},{xIndex:A[e.x].index,xName:A[e.x].name,yIndex:O[e.y].index,yName:O[e.y].name,content:e.content||""}))}));else{var r=e.maxBy(n,(function(e){return O[e.y].index}));R.push(a(a({},r),{},{xIndex:A[r.x].index,xName:A[r.x].name,yIndex:O[r.y].index,yName:O[r.y].name,content:r.content||""}))}}))},setMoveStatus:function(){x=0,b=0,y=c-65-this.xItems.length*this.cellWidth,m=20*this.yItems.length-(s-110),y>0&&(y=0),m<0&&(m=0)},getPixelRatio:function(e){var t=e.backingStorePixelRatio||CanvasRenderingContext2D.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1;return(window.devicePixelRatio||1)/t},draw:function(){this.drawTable(),this.drawStatus(),this.drawMaxYCell(),this.drawSlide(),this.drawMenu()},drawSlide:function(){l.beginPath(),l.fillStyle="#ffffff",l.rect(0,0,65,s),l.rect(0,s-110,c,110),l.fill()},drawMenu:function(){this.drawXMenu(),this.drawYMenu(),l.fillStyle="#ffffff",l.strokeStyle="#d9d9d9",l.beginPath(),l.rect(0,h,65,110),l.fill(),l.beginPath(),x&&(l.shadowBlur=4,l.shadowColor="rgba(0,0,0,0.76)"),l.rect(0,-10,65,s+10),l.stroke(),l.beginPath(),b?(l.shadowBlur=4,l.shadowColor="rgba(0,0,0,0.76)"):(l.shadowBlur=0,l.shadowColor="transparent"),l.rect(0,s-110,c,110),l.stroke(),l.shadowBlur=0,l.shadowColor="transparent",l.textAlign="center",l.textBaseline="middle",l.font="12px -apple-system, Helvetica Neue, Roboto, Segoe UI, sans-serif",l.fillStyle="#111",l.fillText(this.yLabel,32.5,s-98),l.textAlign="center",l.textBaseline="middle",l.font="12px -apple-system, Helvetica Neue, Roboto, Segoe UI, sans-serif",l.fillStyle="#111",l.fillText(this.xLabel,32.5,s-74),l.strokeStyle="#111",l.beginPath(),l.moveTo(20,s-86),l.lineTo(44,s-86),l.stroke()},drawXMenu:function(){var t=this,n=s-97.5;l.textAlign="center",l.textBaseline="middle",l.font="12px -apple-system, Helvetica Neue, Roboto, Segoe UI, sans-serif",l.fillStyle="#111",e.each(this.xItems,(function(r,i){var a=(t.cellWidth-30)/2;a=a>0?a:0;var o=80+t.cellWidth*i+x+a;o>65-t.cellWidth&&o<c+t.cellWidth&&e.each(r.name,(function(e,t){l.textAlign="center",l.textBaseline="middle",l.font="12px -apple-system, Helvetica Neue, Roboto, Segoe UI, sans-serif",l.fillStyle="#111",l.fillText(e,o,n+13*t)}))}))},drawYMenu:function(){var t=s-120;l.textAlign="center",l.textBaseline="middle",l.font="12px -apple-system, Helvetica Neue, Roboto, Segoe UI, sans-serif",l.fillStyle="#111",e.each(this.yItems,(function(e,n){var r=t-20*n+b;r>-20&&r<h+20&&(l.textAlign="center",l.textBaseline="middle",l.font="12px -apple-system, Helvetica Neue, Roboto, Segoe UI, sans-serif",l.fillStyle="#111",l.fillText(e.name,32.5,r))}))},drawTable:function(){var t=this;l.clearRect(65,0,c-65,h),l.strokeStyle="#d9d9d9";var n=65+x,r=h+b;l.beginPath(),e.each(this.xItems,(function(e,i){var a=n+t.cellWidth*(i+1);a>65&&a<c&&(l.moveTo(a,r),l.lineTo(a,r-20*t.yItems.length))})),e.each(this.yItems,(function(e,i){var a=r-20*(i+1);a>0&&a<h&&(l.moveTo(n,a),l.lineTo(n+t.cellWidth*t.xItems.length,a))})),l.stroke()},drawStatus:function(){var t=this,n=e.groupBy(this.datas,"status");e.each(n,(function(n){l.beginPath(),e.each(n,(function(e){if(e.status){var n=A[e.x].index,r=O[e.y].index+1,i=h+b,a=65+x+t.cellWidth*n,o=i-20*r;a>65-t.cellWidth&&a<c&&o>-20&&o<h&&(l.fillStyle=p[e.status],l.strokeStyle=g[e.status],l.rect(a,o,t.cellWidth,20))}})),l.fill(),l.stroke()}))},drawMaxYCell:function(){var t=this;l.textAlign="center",l.textBaseline="middle",l.font="12px -apple-system, Helvetica Neue, Roboto, Segoe UI, sans-serif",l.fillStyle="#fff",l.beginPath(),e.each(R,(function(e){var n=e.content||e.yName.substr(0,3),r=65+x+t.cellWidth*e.xIndex,i=h+b-20*(e.yIndex+1);r>65-t.cellWidth&&r<c&&i>-20&&i<h&&(l.textAlign="center",l.textBaseline="middle",l.font="12px -apple-system, Helvetica Neue, Roboto, Segoe UI, sans-serif",l.fillStyle="#fff",l.fillText(n,r+.5*t.cellWidth,i+10))}))},winToCanvas:function(e,t){var n=o.getBoundingClientRect();return{x:e-n.left,y:t-n.top}},onTouchstart:function(e){var t=e.touches[0];d={x:t.clientX,y:t.clientY,moveX:x,moveY:b,time:Date.now()},P=!1},onTouchmove:function(e){var t=e.touches[0],n=t.clientX,r=t.clientY,i=Math.abs(n-d.x),a=Math.abs(r-d.y),o=d.moveX+(n-d.x),l=d.moveY+(r-d.y);i<3&&a<3||(f||(f=i>a?"x":"y"),"x"===f?x=o>0?0:o<y?y:o:b=l>m?m:l<0?0:l,S=v,k=w,v=t.clientX,w=t.clientY,j=Date.now(),this.draw())},onTouchend:function(e){var t=e.changedTouches[0];if(d&&Date.now()-d.time<500&&Math.abs(t.clientX-d.x)<6&&Math.abs(t.clientY-d.y)<6){var n=this.winToCanvas(t.clientX,t.clientY),r=Math.floor((n.x-65-x)/this.cellWidth),i=Math.floor((h-n.y+b)/20);this.$emit("click",{x:this.xItems[r],y:this.yItems[i]})}else{var a=Date.now()-j,o="x"===f?(t.clientX-S)/a:0,l="y"===f?(t.clientY-k)/a:0;v=0,w=0,P=!0,this.glide(o,l)}f="",this.draw()},glide:function(e,t){var n=this;window.requestAnimationFrame((function(){x+=16.7*(e*=.95),b+=16.7*(t*=.95),e&&x>y&&x<0||t&&b>0&&b<m?(Math.abs(e)>.05||Math.abs(t)>.05)&&P&&n.glide(e,t):(e&&(x=x>0?0:x<y?y:x),t&&(b=b>m?m:b<0?0:b)),n.draw()}))}}}}).call(this,n("391c"))},"751c":function(e,t,n){"use strict";n("17a9")},"7b30":function(e,t,n){"use strict";n("310c")},"918e":function(e,t,n){"use strict";n("cc57"),n("163d");var r=n("4f50").a,i=(n("751c"),n("17cc")),a=Object(i.a)(r,(function(){var e=this.$createElement;return(this._self._c||e)("canvas",{ref:"drawing"})}),[],!1,null,"94867816",null).exports,o=n("391c"),l={name:"TableChart",components:{drawing:a},props:{xLabel:{type:String},xItems:{type:Array,default:function(){return[]}},yLabel:{type:String},yItems:{type:Array,default:function(){return[]}},datas:{type:Array,default:function(){return[]}},legend:{type:Array,default:function(){return[]}},cellWidth:{type:Number,default:void 0},showAllColorCellContain:{type:Boolean,default:!1}},data:function(){return{width:0,height:0}},computed:{legendBoxWidth:function(){var e=this.legend.map((function(e){return e.name.length}));return 6*Object(o.max)(e)+48+20}},mounted:function(){},methods:{onclick:function(){}}},c=(n("7b30"),Object(i.a)(l,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"table-chart"},[e.legend.length?n("div",{staticClass:"chart-legend",style:{width:e.legendBoxWidth+"px",height:18*e.legend.length+14+"px"}},e._l(e.legend,(function(t,r){return n("p",{key:r,class:"legend-item legend-"+t.color},[e._v("\n      "+e._s(t.name)+"\n    ")])}))):e._e(),n("drawing",{staticClass:"drawing",attrs:{"x-label":e.xLabel,"x-items":e.xItems,"y-label":e.yLabel,"y-items":e.yItems,datas:e.datas,"cell-width":e.cellWidth,"show-all-color-cell-contain":e.showAllColorCellContain},on:{click:function(t){return e.$emit("click",t)}}})],1)}),[],!1,null,"486596b0",null));t.a=c.exports},bbd3:function(e,t,n){(e.exports=n("690e")(!1)).push([e.i,".zjapp .table-chart[data-v-94867816]{flex:1}",""])},c77f:function(e,t,n){"use strict";n.d(t,"h",(function(){return l})),n.d(t,"g",(function(){return c})),n.d(t,"a",(function(){return s})),n.d(t,"e",(function(){return u})),n.d(t,"f",(function(){return f})),n.d(t,"d",(function(){return d})),n.d(t,"n",(function(){return h})),n.d(t,"o",(function(){return p})),n.d(t,"b",(function(){return g})),n.d(t,"i",(function(){return x})),n.d(t,"k",(function(){return b})),n.d(t,"c",(function(){return y})),n.d(t,"l",(function(){return m})),n.d(t,"p",(function(){return v})),n.d(t,"m",(function(){return w})),n.d(t,"j",(function(){return S}));var r=n("5e8d"),i=n("162a"),a=n("bcc78"),o=n("da71");function l(e){return Object(r.a)().then((function(){var t=a.a.commonGetProblemClassTree.url;return i.a.request(t,e)}))}function c(e){return Object(r.a)().then((function(){var t=a.a.pileAcceptGetPileBuildingSummary.url;return i.a.request(t,e)}))}function s(e){return Object(r.a)().then((function(){var t=a.a.pileAcceptGetBidsectionBuildingTree.url;return i.a.request(t,e)}))}function u(){return Object(r.a)().then((function(){var e=a.a.pileAcceptGetPileAcceptItems.url;return i.a.request(e)}))}function f(e){return Object(r.a)().then((function(){var t=a.a.pileAcceptGetPileAcceptList.url;return i.a.request(t,e)}))}function d(e){return Object(r.a)().then((function(){var t=a.a.pileAcceptGetPileAcceptInfo.url;return i.a.request(t,e)}))}function h(e){return Object(r.a)().then((function(){var t=a.a.processAcceptBuilding.url;return i.a.request(t,e)}))}function p(e){return Object(r.a)().then((function(){var t=a.a.processAcceptCollect.url;return i.a.request(t,e)}))}function g(e){return Object(r.a)().then((function(){var t=a.a.processAcceptv3GetBuildingList.url;return i.a.request(t,e)}))}function x(e){return Object(r.a)().then((function(){var t=a.a.processAcceptv3GetProcessAcceptv3List.url;return i.a.request(t,e)}))}function b(e){return Object(r.a)().then((function(){var t=o.a.getReportOrgTree.url;return i.a.request(t,e)}))}function y(e){return Object(r.a)().then((function(){var t=o.a.getHomeReports.url;return i.a.request(t,e)}))}function m(e){return Object(r.a)().then((function(){var t=o.a.getReportPools.url;return i.a.request(t,e)}))}function v(e){return Object(r.a)().then((function(){var t=o.a.saveMyReportsSetting.url;return i.a.post(t,null,e)}))}function w(e){return Object(r.a)().then((function(){var t=a.a.getUrlReportAuth.url;return i.a.request(t,e)}))}function S(e){return Object(r.a)().then((function(){var t=a.a.getProgressV3Summary.url;return i.a.request(t,e)}))}}}]);