(window.webpackJsonp_module_entry_zjapp_=window.webpackJsonp_module_entry_zjapp_||[]).push([["chunk-6f6c54d5","chunk-59fa3e5d","chunk-0b5b35be","chunk-b1eec014","chunk-2709989a"],{"0732":function(e,t,i){var a=i("81f2");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);(0,i("85cb").default)("1b5b07de",a,!0,{sourceMap:!1,shadowMode:!1})},"0aac":function(e,t,i){"use strict";i("2814")},"0c52":function(e,t,i){(e.exports=i("690e")(!1)).push([e.i,".zjapp .app-stepper[data-v-03df57b7]{display:inline-block;width:110px;height:34px;margin:-2px 0;white-space:nowrap;font-size:0;line-height:0;vertical-align:top}.zjapp .app-stepper .number-input[data-v-03df57b7]{width:51px;height:34px;border:1px solid #dcdcdc;border-radius:0;font-size:14px;text-align:center;background-color:#fff;color:#111;box-sizing:border-box}.zjapp .app-stepper .number-input-focus[data-v-03df57b7]{border-color:#4275e8}.zjapp .btn-add[data-v-03df57b7],.zjapp .btn-minus[data-v-03df57b7]{display:inline-block;width:28px;height:34px;line-height:34px;padding:0;border:1px solid #dcdcdc;color:#666;text-align:center;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;box-sizing:border-box;background-color:#fff}.zjapp .btn-minus[data-v-03df57b7]{border-right:none;border-radius:4px 0 0 4px}.zjapp .btn-add[data-v-03df57b7]{border-left:none;border-radius:0 4px 4px 0}.zjapp .icon-add[data-v-03df57b7],.zjapp .icon-minus[data-v-03df57b7]{font-size:11px;vertical-align:top;display:inline-block;margin-top:10.5px}.zjapp .disabled[data-v-03df57b7]{color:#c8c8c8}.zjapp .activing[data-v-03df57b7]{color:#4275e8}",""])},"0cb6":function(e,t,i){(e.exports=i("690e")(!1)).push([e.i,".zjapp .problem-detail-header[data-v-0901aadd]{display:flex;align-items:center;justify-content:center;height:40px;padding:0 15px;line-height:40px;background-color:#f2f2f2}.zjapp .problem-detail-header .status[data-v-0901aadd]{flex:1;height:16px;line-height:16px;border-left:5px solid #ddd;padding-left:5px;color:#111;font-size:16px}.zjapp .problem-detail-header .status-red[data-v-0901aadd]{border-color:#ff3d3d}.zjapp .problem-detail-header .status-blue[data-v-0901aadd]{border-color:#4275e8}.zjapp .problem-detail-header .status-green[data-v-0901aadd]{border-color:#0bc666}.zjapp .problem-detail-header .status-orange[data-v-0901aadd]{border-color:#fc8b01}.zjapp .problem-detail-header .status-black[data-v-0901aadd]{border-color:#333}.zjapp .problem-detail-header .status-gray[data-v-0901aadd]{border-color:#999}.zjapp .problem-detail-header .return[data-v-0901aadd],.zjapp .problem-detail-header .timeout[data-v-0901aadd],.zjapp .problem-detail-header .urgent[data-v-0901aadd]{display:block;padding:0 5px;margin-left:6px;height:16px;line-height:16px;color:#fff;font-size:12px;border-radius:2px;-webkit-border-radius:2px}.zjapp .problem-detail-header .urgent[data-v-0901aadd]{background-color:#ff3d3d}.zjapp .problem-detail-header .timeout[data-v-0901aadd]{background-color:#954cfe}.zjapp .problem-detail-header .return[data-v-0901aadd]{background-color:#fc8b01}.zjapp .problem-detail-header .operat[data-v-0901aadd]{height:40px;line-height:40px;white-space:nowrap;font-size:16px;color:#6b7ba9}",""])},"0f7b":function(e,t,i){"use strict";i("f548"),i("163d");var a,s,n={name:"AppStepper",components:{NumberInput:i("6948").a},props:{value:{type:[String,Number],default:""},max:{type:[String,Number],default:200},range:{type:Array}},data:function(){return{addActiving:!1,minusActiving:!1}},computed:{rangeMin:function(){return this.range&&this.range[0]||0},rangeMax:function(){return this.range&&this.range[1]?this.range[1]:this.max},allowAdd:function(){return""!==this.value&&this.value<this.rangeMax},allowMinus:function(){return""!==this.value&&this.value>this.rangeMin}},methods:{onChange:function(e){e&&(e=String(e).replace(/\D/g,"")),parseInt(e,10)>parseInt(this.max,10)&&(e=this.max),this.$emit("input",Number(e)),this.$emit("change",Number(e))},add:function(){if(this.allowAdd){var e=parseInt(this.value,10)+1;this.isInRange(e)&&(this.$emit("input",e),this.$emit("change",e)),this.setActiving("add")}},minus:function(){if(this.allowMinus){var e=parseInt(this.value,10)-1;this.isInRange(e)&&(this.$emit("input",e),this.$emit("change",e)),this.setActiving("minus")}},isInRange:function(e){return e>=this.rangeMin&&e<=this.rangeMax},setActiving:function(e){var t=this;e&&("minus"===e?(this.minusActiving=!0,clearTimeout(s),s=setTimeout((function(){t.minusActiving=!1}),300)):(this.addActiving=!0,clearTimeout(a),a=setTimeout((function(){t.addActiving=!1}),300)))}}},r=(i("91cb"),i("17cc")),o=Object(r.a)(n,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"app-stepper"},[i("button",{staticClass:"btn-minus",class:{disabled:!e.allowMinus,activing:e.minusActiving},on:{click:e.minus}},[i("icon",{attrs:{name:"minus"}})],1),i("number-input",{attrs:{value:e.value,type:"int",range:e.range},on:{input:e.onChange}}),i("button",{staticClass:"btn-add",class:{disabled:!e.allowAdd,activing:e.addActiving},on:{click:e.add}},[i("icon",{attrs:{name:"add"}})],1)],1)}),[],!1,null,"03df57b7",null);t.a=o.exports},1059:function(e,t,i){"use strict";var a=i("ebf1").a,s=(i("9dea"),i("17cc")),n=Object(s.a)(a,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"redio-box-group",class:"align-"+e.align+" "+e.customClass},e._l(e.options,(function(t,a){return i("span",{key:a,staticClass:"radio-box",class:{selected:"array"===e.optionsType?e.value===t:"object"===e.optionsType&&e.value===a},on:{click:function(t){e.onSelect(a)}}},[e._v("\n    "+e._s(t)+"\n  ")])})))}),[],!1,null,"b0a30924",null);t.a=n.exports},"11ed":function(e,t,i){var a=i("eb41");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);(0,i("85cb").default)("41182961",a,!0,{sourceMap:!1,shadowMode:!1})},"19a7":function(e,t,i){(e.exports=i("690e")(!1)).push([e.i,".zjapp .redio-box-group[data-v-b0a30924]{font-size:0;margin-top:-10px}.zjapp .redio-box-group.align-l[data-v-b0a30924]{text-align:left}.zjapp .redio-box-group.align-r[data-v-b0a30924]{text-align:right}.zjapp .radio-box[data-v-b0a30924]{display:inline-block;height:34px;line-height:32px;min-width:60px;padding:0 5px;margin:10px 0 0 10px;border:1px solid #d9d9d9;background:#fff;color:#666;vertical-align:top;font-size:14px;text-align:center;border-radius:3px}.zjapp .radio-box[data-v-b0a30924]:first-child{margin-left:0}.zjapp .radio-box.selected[data-v-b0a30924]{border-color:#4275e8;color:#4275e8}",""])},"1f63":function(e,t,i){"use strict";i("7434")},"242a":function(e,t,i){"use strict";var a={name:"Checkbox",props:{semiSelection:{type:Boolean,default:!1},status:{type:String,default:null},value:{type:Boolean,default:!1},text:{type:String,default:""},type:{type:String,default:"circular"}},data:function(){return{}},computed:{iconName:function(){var e="";return"circular"===this.type?e=this.value?"checkbox-checked":"checkbox":"square"===this.type&&(e=this.value?"checkbox-square-checked":"checkbox-square"),e}},methods:{semiClickHandle:function(e){if(e.stopPropagation(),this.semiSelection){var t="partSelected"===this.status||!this.value,i="partSelected"===this.status||t?"fullSelected":null;this.$emit("input",t,i),this.$emit("change",t,i)}else this.$emit("input",!this.value),this.$emit("change",!this.value)}}},s=(i("53e4"),i("17cc")),n=Object(s.a)(a,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{class:{checkbox:!e.semiSelection,semiCheckbox:e.semiSelection,"semiCheckbox-indeterminate":"partSelected"===e.status,"semiCheckbox-checked":"fullSelected"===e.status},on:{click:function(t){e.semiClickHandle(t)}}},[e.semiSelection?i("span",{staticClass:"semiCheckbox-inner"}):e._e(),e.semiSelection?e._e():i("icon",{attrs:{name:e.iconName}}),e._v(e._s(e.text)+"\n")],1)}),[],!1,null,"afcfdff2",null);t.a=n.exports},2464:function(e,t,i){"use strict";var a=i("329b"),s=i("573a").a,n=(i("3999"),i("17cc")),r=Object(n.a)(s,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("transition",{attrs:{name:"slide-right"}},[e.show?i("page-content",{attrs:{mode:"dialog",title:e.title,"on-close":e.closePopup}},[e.keyword?[i("div",{staticClass:"page-scroll"},[e.searchResults.length?e._l(e.searchResults,(function(t){return i("item",{key:t.id,attrs:{border:"bottom"},on:{click:function(i){e.searchItemClick(t)}}},[i("span",{staticClass:"search-item",domProps:{innerHTML:e._s(e.keyword?t.full_name.split(e.keyword).join("<span style='color:#4275E8;'>"+e.keyword+"</span>"):t.full_name)}})])})):e._e(),i("loading-status",{attrs:{"is-loading":e.isSearching,"is-empty":!e.searchResults||!e.searchResults.length,"empty-text":"没有信息"}})],2)]:e._e(),e.keyword?e._e():[i("item",[i("div",{staticClass:"bread-crumb"},e._l(e.breadCrumbs,(function(t){return i("span",{key:t.id,staticClass:"level-item",class:{active:t.id===e.activeCrumbIndex},on:{click:function(i){e.crumbClick(t)}}},[e._v(e._s(t.name)+"\n\n            "),i("icon",{attrs:{name:"arrow-right"}})],1)})))]),!e.isLoading&&e.options.length?i("div",{ref:"placeSelectScroll",staticClass:"page-scroll"},[e._l(e.options,(function(t){return i("item",{key:t.id,attrs:{border:"bottom",text:t.name,"icon-right":e.isCheck(t)?"qualified":""},on:{click:function(i){e.itemClick(t)}}})})),i("div",{staticClass:"empty-msg"},[i("span",{staticClass:"line"}),e._v("\n          就这么多了\n          "),i("span",{staticClass:"line"})])],2):e._e()],!e.isLoading&&e.options.length?i("app-button-group",{attrs:{"fixed-bottom":""}},[i("app-button",{attrs:{disabled:!e.selectedBuilding||!e.selectedBuilding.id&&!e.selectedUnit.id},on:{click:e.select}},[e._v("\n        确定\n      ")])],1):e._e(),i("loading-status",{attrs:{"is-loading":e.isLoading,"is-empty":!e.options||!e.options.length,"empty-text":"没有信息"}})],2):e._e()],1)}),[],!1,null,"153f7b00",null).exports,o=!1;o||(o=new(a.default.extend(r))({el:document.createElement("div")}),document.body.appendChild(o.$el));t.a=o},2814:function(e,t,i){var a=i("5033");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);(0,i("85cb").default)("9db19832",a,!0,{sourceMap:!1,shadowMode:!1})},2939:function(e,t,i){(e.exports=i("690e")(!1)).push([e.i,".zjapp .page-scroll[data-v-74102c05]{flex:1;overflow:auto;padding-bottom:100px;transform:translateZ(0)}.zjapp .sublist[data-v-74102c05]{padding-left:25px;padding-top:1px;background-color:#fff}.zjapp .sublist>.sublist[data-v-74102c05]{padding-left:10px;padding-top:0}",""])},"29be":function(e,t,i){"use strict";(function(e){i("5ab2"),i("6d57"),i("e10e");var a=i("28f8"),s=(i("cc57"),i("163d"),i("07d2")),n=i("a5c6"),r=i("6144");function o(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,a)}return i}function c(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?o(Object(i),!0).forEach((function(t){Object(a.a)(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):o(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}t.a={name:"SingleSelect",components:{Item:s.default},props:{title:{type:String,default:""},pageTitle:{type:String,default:""},placeholder:{type:String,default:""},value:{type:Object,default:function(){return{}}},options:{type:Array,default:function(){return[]}},optionsDisabled:{type:Array,default:function(){return[]}},required:{type:Boolean,default:!0},mode:{type:String,default:"edit"},editabled:{type:Boolean,default:!0},memory:{type:Boolean,default:!1},autoSelect:{type:Boolean,default:!1},beforeOpen:{type:Function,default:function(){}},searchBar:{type:Boolean,default:!0},grouping:{type:String,default:""},autoOpen:{type:Boolean,default:!1},rightBtn:{type:String,default:""},rightBtnEvent:{type:Function,default:function(){return 0}},ifToggle:{type:Boolean,default:!1},formCheck:{type:Boolean,default:!1},editorAddData:{type:Boolean,default:!1},lineLimit:{type:[Number,String],default:1}},data:function(){return{memoryKey:this.$route.name+encodeURI(this.title)}},watch:{options:function(){this.setSelected()}},mounted:function(){this.setSelected()},methods:{openSelect:function(){var t=this;if(this.editabled){var i=this.beforeOpen();i&&i.then&&e.isFunction(i.then)?i.then((function(e){!1!==e&&t.openPopup()})):!1!==i&&this.openPopup()}},openPopup:function(){var t=this;if(this.optionsDisabled&&this.optionsDisabled.length){var i={};e.each(this.optionsDisabled,(function(e){e.id&&(i[e.id]=e)})),e.each(this.options,(function(e,a){i[e.id]?t.options[a].disabled=!0:t.options[a].disabled=!1}))}n.a.openPopup({title:this.pageTitle||"选择"+this.title,selected:this.value,options:this.options,required:this.required,searchBar:this.searchBar,grouping:this.grouping,autoOpen:this.autoOpen,rightBtn:this.rightBtn,ifToggle:this.ifToggle,lineLimit:this.lineLimit,editorAddData:this.editorAddData,onSelect:function(i){var a=e.cloneDeep(t.value);i=e.isArray(i)?e.map(i,(function(e){return c({},e)})):c({},i),t.$emit("input",i,a),t.$emit("onSelect",i,a)},rightBtnEvent:function(i){var a=e.cloneDeep(t.value);t.$emit("rightBtnEvent",i,a)}})},closePopup:function(){n.a.closePopup()},onSelect:function(e){r.a.saveObject(this.memoryKey,e,r.a.level.user),this.$emit("input",e[0]),this.$emit("onSelect",e[0])},setSelected:function(){var t=r.a.getObject(this.memoryKey,r.a.level.user);!1===this.editabled||e.isEmpty(this.options)||(e.isEmpty(this.value)?this.memory&&!e.isEmpty(t)&&e.some(this.options,{id:t.id})&&(this.$emit("input",t),this.autoSelect&&this.$emit("onSelect",t)):this.autoSelect&&this.$emit("onSelect",this.value))}}}}).call(this,i("391c"))},"2a54":function(e,t,i){var a=i("d77c");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);(0,i("85cb").default)("a2ffe54e",a,!0,{sourceMap:!1,shadowMode:!1})},"2bac":function(e,t,i){(e.exports=i("690e")(!1)).push([e.i,".zjapp .layout-main[data-v-4c02e6e5] .layout-content{display:flex;flex-direction:column}.zjapp .page-scroll[data-v-4c02e6e5]{flex:1;overflow:auto;scroll-behavior:smooth}.zjapp .header-right-flex[data-v-4c02e6e5]{display:flex}",""])},"2c76":function(e,t,i){"use strict";i("c070")},"2dd6":function(e,t,i){(e.exports=i("690e")(!1)).push([e.i,".zjapp .single-item[data-v-6920dde7]{min-height:44px}.zjapp .single-item>div[data-v-6920dde7]{display:flex}.zjapp .single-item>div>span[data-v-6920dde7]{flex:1;overflow:hidden;text-overflow:ellipsis;display:-webkit-box;-webkit-box-orient:vertical}.zjapp .single-item>div>span[data-v-6920dde7] label{color:#4174e9}.zjapp .single-item i[data-v-6920dde7]{line-height:24px;font-size:24px;color:#4275e8}.zjapp .single-item .disabled-item[data-v-6920dde7]{color:#aaa}",""])},"2ddb":function(e,t,i){(e.exports=i("690e")(!1)).push([e.i,".zjapp .supplier-editor[data-v-e465319c]{margin-bottom:10px;padding:8px;display:flex;justify-content:space-between;align-items:center;height:52px;color:#4275e8;background-color:#fff}.zjapp .supplier-editor .icon[data-v-e465319c]{border-left:1px solid #c8c8c8;padding-left:12px}.zjapp .supplier-editor .icon-edit[data-v-e465319c]{color:#c8c8c8;font-size:18px}.zjapp .supplier-editor .icon-qualified[data-v-e465319c]{color:#4275e8}.zjapp .supplier-editor .margin-r[data-v-e465319c]{margin-right:10px}.zjapp .list-title[data-v-e465319c]{position:relative;top:0;color:#888;font-size:14px;line-height:30px;min-height:40px;margin-bottom:0;margin-top:0;padding:8px 16px 2px}.zjapp .search-item>div[data-v-e465319c]{padding-right:35px}.zjapp .search-item i[data-v-e465319c]{position:absolute;color:#ccc;font-size:26px;right:0;top:50%;transform:translateY(-50%)}.zjapp .van-popup--right[data-v-e465319c]{width:100%;height:100%}[data-v-e465319c] .van-cell__title{color:#4174e9;font-weight:700}[data-v-e465319c] .van-collapse-item__content{transform:translateZ(0);padding:0 0 0 25px}[data-v-e465319c] .van-collapse-item__content .van-cell{padding-left:0}",""])},"3156b":function(e,t,i){"use strict";i("163d");var a={name:"SingleSelectItem",props:{item:{type:Object,default:function(){return{id:"",name:""}}},checked:{type:Boolean,default:!1},renderField:{type:String,default:"name"},lineLimit:{type:[Number,String],default:1}},methods:{selectItem:function(e){e.disabled||this.$emit("click",e)}}},s=(i("9788"),i("17cc")),n=Object(s.a)(a,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("van-cell",{staticClass:"single-item",attrs:{clickable:!0},on:{click:function(t){e.selectItem(e.item)}}},[i("span",{class:{"disabled-item":e.item.disabled},style:{"-webkit-line-clamp":"unlimited"===e.lineLimit?"initial":e.lineLimit},domProps:{innerHTML:e._s(e.item[e.renderField])}}),e.checked?i("van-icon",{attrs:{name:"success"}}):e._e()],1)}),[],!1,null,"6920dde7",null);t.a=n.exports},3480:function(e,t,i){"use strict";(function(e){i("5ab2"),i("6d57"),i("e10e");var a=i("28f8"),s=i("e2a7"),n=i("e89f"),r=i("07d2"),o=i("3c64"),c=i("e68e");function l(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,a)}return i}t.a={name:"ProblemBack",components:{Item:r.default,ItemTextarea:o.a,ItemImgList:c.a},mixins:[n.a],props:{},data:function(){return{show:!1,multiple:!1,reasonList:[],reason:{},remark:"",images:[],placeholder:"补充说明",isBack:!1,photoRequest:"",allowSelectAlbum:void 0,allowBuildinAlbum:void 0}},methods:{openPopup:function(t){t.reasonList?this.reasonList=e.clone(t.reasonList):this.reasonList=[{id:1,text:"整改不合格"},{id:2,text:"其它",remarkRequire:!0}],this.isBack=t.isBack||!1,this.reason=e.clone(t.reason)||{},this.images=e.map(t.images,(function(e){return function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?l(Object(i),!0).forEach((function(t){Object(a.a)(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):l(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}({},e)})),this.remark=t.remark||"",this.placeholder=t.placeholder?t.placeholder:"补充说明",this.multiple=t.multiple,e.isEmpty(t.reasonList)||(this.reasonList=e.clone(t.reasonList)),this.callback=t.callback,this.beforeCallback=t.beforeCallback,this.photoRequest=t.photoRequest||"",t.allowSelectAlbum&&(this.allowSelectAlbum=Boolean(t.allowSelectAlbum)),t.allowBuildinAlbum&&(this.allowBuildinAlbum=Boolean(t.allowBuildinAlbum)),this.value=!0,this.show=!0,this.$emit("open")},closePopup:function(){this.value=!1,this.show=!1,this.$emit("close")},selectItem:function(e){this.multiple?this.$set(e,"checked",!e.checked):this.reason=e},submit:function(){var t=this;if(this.multiple){if(this.reason=e.filter(this.reasonList,{checked:!0}),e.isEmpty(this.remark))return void s.a.alert("补充说明必填")}else{if(e.isUndefined(this.reason.id))return void s.a.alert("请填写退回原因");if(this.reason.remarkRequire&&e.isEmpty(this.remark))return void s.a.alert("补充说明必填");if(this.photoRequest&&e.isEmpty(this.images))return void s.a.alert("请拍摄退回照片")}var i={reason:this.reason,remark:this.remark,images:this.images},a=!this.beforeCallback||this.beforeCallback(i);a&&a.then&&e.isFunction(a.then)?a.then((function(e){!1!==e&&(t.callback&&t.callback(i),t.closePopup())})):!1!==a&&(this.callback&&this.callback(i),this.closePopup())}}}}).call(this,i("391c"))},3869:function(e,t,i){"use strict";i("6d57");var a=i("0287"),s=i("7bac"),n={defaultDraft:Object(a.a)({key:function(e){return e=e||this.options,"".concat(a.a.keys.PROBLEM_RECTIFICATION,"_").concat(e.bizId)}}),createPrimaryKeys:function(e){return function(t){return t.primaryKeys=t.primaryKeys||{},t.primaryKeys.uuId===e.uuId}},getBizList:function(e){var t="".concat(a.a.keys.PROBLEM_RECTIFICATION,"_").concat(e);return s.a.getUserKey(t)}};t.a=n},3999:function(e,t,i){"use strict";i("5897")},"3c64":function(e,t,i){"use strict";i("163d");var a={name:"ItemTextarea",components:{},props:{value:{type:String,default:""},placeholder:{type:String,default:""},maxlength:{type:Number,default:200},borderBottom:{type:Boolean,default:!0}},data:function(){return{textareaHeight:40,isLock:!1,blurTime:null}},computed:{lastLength:function(){var e=this.value&&this.value.length||0,t=this.maxlength-e;return t>0?t:0}},mounted:function(){var e=this;this.$nextTick((function(){e.textareaHeight=e.$refs.rule&&e.$refs.rule.offsetHeight||40}))},methods:{onfocus:function(){var e=(new Date).getTime();this.blurTime&&e-this.blurTime<300&&window.cordova&&window.cordova.plugins&&window.cordova.plugins.Keyboard&&(this.$refs.input.blur(),window.cordova.plugins.Keyboard.close()),this.blurTime=null,this.$emit("focus")},onblur:function(){this.blurTime=(new Date).getTime(),this.$emit("blur")},setStatus:function(e){console.log(e),this.isLock=e},oninput:function(e){var t=this;setTimeout((function(){if(!t.isLock){var i=e.target.value;i.length>t.maxlength&&(i=i.substring(0,t.maxlength),t.$refs.input.value=i),t.$refs.rule.innerText=i,t.textareaHeight=t.$refs.rule&&t.$refs.rule.offsetHeight+20,t.$emit("input",i),t.$emit("change",i)}}),0)}}},s=(i("2c76"),i("17cc")),n=Object(s.a)(a,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"item-textarea",class:{"border-bottom":e.borderBottom}},[i("div",{staticClass:"item-textarea-content"},[i("textarea",{ref:"input",style:{height:e.textareaHeight+"px"},attrs:{placeholder:e.placeholder},domProps:{value:e.value},on:{focus:e.onfocus,blur:e.onblur,compositionstart:function(t){e.setStatus(!0)},compositionend:function(t){e.setStatus(!1)},input:e.oninput}}),i("div",{ref:"rule",staticClass:"rule"},[e._v("\n      "+e._s(e.value)+"\n    ")]),e.maxlength!==1/0?i("p",{staticClass:"counter"},[e._v("\n      "+e._s(e.lastLength)+"\n    ")]):e._e()])])}),[],!1,null,null,null);t.a=n.exports},"3cd8":function(e,t,i){var a=i("5c19");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);(0,i("85cb").default)("67c16200",a,!0,{sourceMap:!1,shadowMode:!1})},"3ea4":function(e,t,i){(e.exports=i("690e")(!1)).push([e.i,'.zjapp .tree-icon[data-v-792f710a]{position:relative;width:20px;height:30px;line-height:34px;color:#c8c8c8;font-size:26px}.zjapp .color-theme[data-v-792f710a]{position:relative;top:6px}.zjapp .icon-dropdown[data-v-792f710a]:before,.zjapp .icon-dropright[data-v-792f710a]:before{content:"";position:absolute;width:0;height:0;border:6px solid #c8c8c8}.zjapp .icon-dropdown[data-v-792f710a]:before{top:12px;left:0;border-left-color:transparent}.zjapp .icon-dropdown[data-v-792f710a]:before,.zjapp .icon-dropright[data-v-792f710a]:before{border-right-color:transparent;border-bottom-color:transparent}.zjapp .icon-dropright[data-v-792f710a]:before{top:8.5px;left:4px;border-top-color:transparent}.zjapp .list-tree[data-v-792f710a]{position:relative}.zjapp .tree-checkbox[data-v-792f710a]{position:absolute;right:0;top:0;padding:14px 16px}.zjapp .checkBox-right-padding[data-v-792f710a]{padding-right:50px}',""])},"409b":function(e,t,i){"use strict";(function(e){i("5ab2"),i("6d57"),i("e10e");var a=i("28f8"),s=i("e2a7"),n=i("e89f"),r=i("07d2"),o=i("3c64"),c=i("e68e");function l(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,a)}return i}t.a={name:"ProblemBack",components:{Item:r.default,ItemTextarea:o.a,ItemImgList:c.a},mixins:[n.a],props:{},data:function(){return{show:!1,reasonList:[],hasImages:!1,fixedRemark:!1,reason:{id:"",text:""},images:[],remark:""}},methods:{openPopup:function(t){e.isEmpty(t.reasonList)?this.reasonList=[{id:1,text:"问题登记错误"},{id:2,text:"已整改并复验通过"},{id:4,text:"无法整改"},{id:5,text:"延误整改窗口期"},{id:6,text:"留待后期整改"},{id:3,text:"其它",remarkRequire:!0}]:this.reasonList=e.clone(t.reasonList),this.callback=t.callback,this.beforeCallback=t.beforeCallback,this.value=!0,this.show=!0,e.isEmpty(t.reason)?(this.reason.id="",this.reason.text=""):(this.reason.id=t.reason.id,this.reason.text=t.reason.text),this.images=e.map(t.images,(function(e){return function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?l(Object(i),!0).forEach((function(t){Object(a.a)(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):l(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}({},e)})),this.remark=t.remark||"",this.hasImages=!!t.hasImages,this.fixedRemark=!!t.fixedRemark,this.$emit("open")},closePopup:function(){this.value=!1,this.show=!1,this.$emit("close")},selectItem:function(e){this.reason=e},submit:function(){var t,i=this,a="";if(this.reason&&this.reason.id)a=this.reason.text;else if(""===this.remark)return void s.a.alert("请选择关闭原因");if(this.reason.remarkRequire){if(""===this.remark)return void s.a.alert("请输入关闭原因");a=this.remark}t=this.hasImages?{reason:this.reason,remark:this.remark,images:this.images}:a;var n=!this.beforeCallback||this.beforeCallback(t);n&&n.then&&e.isFunction(n.then)?n.then((function(e){!1!==e&&(i.callback&&i.callback(t),i.closePopup())})):!1!==n&&(this.callback&&this.callback(t),this.closePopup())}}}}).call(this,i("391c"))},4378:function(e,t,i){"use strict";(function(e){i("e697"),i("cc57");var a=i("fd50"),s=i("3bd5"),n=i("ed08"),r=i("6bf2"),o=i.n(r),c=i("3122"),l=i("37d5"),d=i("f2d3"),u=i("48f4"),p=i("334f"),h=i("2f02"),m=i("7364"),f=i("dd9f"),g=i("b725"),b=i("6b81"),v=i("0136"),_=function(t,i){var a=s.a.getUser();return p.a.getProblemCCAllColumn(t).then((function(s){if(e.some(s,(function(e){return e.cc===a.user_id&&e.type===i})))return p.a.updateProblemReadingTime(t);var r={id:a.user_id,name:a.user_name,type:i,reading_time:n.a.getNowDate()};return p.a.appendCC(t,r).then((function(){return p.a.updateProblemReadingTime(t)}))}))},y={takePicture:function(){return c.a.takePicture()},save:function(e){if("待提交"!==e.status)return a.a.reject("问题单状态异常。");if(!/^\+?[0-9]*$/.test(e.deadline))return a.a.reject("整改期限必须是正整数");var t=s.a.getUser(),i={id:e.id,remark:e.remark||"",image_file:e.image_file,batch_id:e.batch_id,batch_type:e.batch_type,bidsection_id:e.bidsection_id,proj_id:e.proj_id,created_by:t.user_id,created_on:n.a.getNowDate(),status:e.status,room_id:e.room_id,building_id:e.building_id,process_check_id:e.process_check_id};return e.checkItem&&e.checkItem.id&&(i.item_id=e.checkItem.id),e.unit&&(i.floor=e.unit),e.place&&e.place.floor&&(i.floor=e.place.floor),e.place&&e.place.full_name&&(i.place=e.place.full_name),e.contractor&&e.contractor.id&&(i.contractor_id=e.contractor.id),e.description&&e.description.id?i.desc_id=e.description.id:i.desc_id="",i.emergency_degree=e.level,e.deadline&&(i.deadline=e.deadline),e.place_point&&(i.problem_values=JSON.stringify(e.place_point)),i.image_file=JSON.stringify(e.image_file),e.drawing_file&&(i.drawing_file=JSON.stringify(e.drawing_file)),e.id?f.a.update(i,e.cc_set,e.repair_set,e.reinspect_set).then((function(){return a.a.resolve(e.id)})).catch((function(e){return $log.error(e),a.a.reject(e)})):(i.id=n.a.uuid(),f.a.insert(i).then((function(){return a.a.resolve(i.id)})).catch((function(e){return $log.error(e),a.a.reject(e)})))},submit:function(e){if("待提交"!==e.status)return a.a.reject("问题单状态异常");if(!e.checkItem.id)return a.a.reject("请先选择检查项");if(!e.repair_set||!e.repair_set.id)return a.a.reject("请选择问题的整改人");if(!e.reinspect_set||!e.reinspect_set.id)return a.a.reject("请选择问题的复验人");if(e.photoRequired&&(!e.image_file||!e.image_file.length))return a.a.reject("请拍摄问题照片");var t=s.a.getUser();e.status="待整改";var i=new Date;return i.setDate(i.getDate()+e.deadline),e.repair_deadline=o()(i).format("YYYY-MM-DD"),e.regist_by=t.user_id,e.regist_date=n.a.getNowDate(),e.created_by=t.user_id,e.created_on=n.a.getNowDate(),e.image_file=JSON.stringify(e.image_file),e.drawing_file&&(e.drawing_file=JSON.stringify(e.drawing_file)),f.a.submit(e).then((function(){return m.a.saveProblemStatusLog(e.proj_id,e.bidsection_id,e.batch_id,e.id,"已提交","","",e.image_file)})).then((function(){return h.a.saveProblemFpInfo(e.proj_id,e.bidsection_id,e.batch_id,e.id,e.repair_set.id,"","分配整改人")})).then((function(){return _(e.id,"登记人")})).then((function(){var t=2;e.created_by===e.repair_set.id&&(t=1);var i=v.a.getTodoSort(e.status,e.repair_deadline,e.close_date,e.repair_date,e.sent_back_times,e.emergency_degree,"process_problem");return v.a.insertTodoData(e.created_by,e.id,"process-problem",t,i)})).then((function(){return u.default.addSyncGroup([["checkquality_problem",e.id],["checkquality_repair",e.id],["checkquality_reinspect",e.id],["checkquality_cc",e.id]])})).catch((function(e){return $log.error(e),a.a.reject(e)}))},getCheckProblemInfo:function(t){return a.a.all([f.a.getCheckProblem(t),g.a.getRepair(t),b.a.getReinspect(t),p.a.getCC(t),p.a.getProblemCCAllColumn(t)]).then((function(t){var i=t[0],s=t[1];s&&(i.repair_set={id:s.id,name:s.name,mobile:s.mobile,is_im_user:s.is_im_user});var n=t[2];n&&(i.reinspect_set={id:n.id,name:n.name,mobile:n.mobile,is_im_user:n.is_im_user});var r=t[3];r&&r.length>0&&(i.cc_set_id_array=e.map(r,(function(e){return{id:e.user_id}})),i.cc_set_name_array=e.map(r,(function(e){return{name:e.user_name}})),i.cc_set_array=r);var o=t[4];return o&&o.length>0&&(i.cc_set_all_id_array=e.map(o,(function(e){return{id:e.cc}}))),i.regist_by||i.sent_back_by||i.repair_by||i.reinspect_by?l.default.getAllProjectUsers(i.proj_id).then((function(t){if(i.regist_by){var a=e.find(t,(function(e){return e.user_id===i.regist_by}));a&&(i.regist=a)}if(i.sent_back_by){var s=e.find(t,(function(e){return e.user_id===i.sent_back_by}));s&&(i.sent_back=s)}if(i.repair_by){var n=e.find(t,(function(e){return e.user_id===i.repair_by}));n&&(i.repair=n)}if(i.reinspect_by){var r=e.find(t,(function(e){return e.user_id===i.reinspect_by}));r&&(i.reinspect=r)}return i.regist=i.regist||{},i.sent_back=i.sent_back||{},i.repair=i.repair||{},i.reinspect=i.reinspect||{},i})):a.a.resolve(i)})).catch((function(e){$log.log(e)}))},repair:function(e){if("待整改"!==e.status)return a.a.reject("问题单状态异常");if(e.photoRequired&&(!e.repair_image_file||0===e.repair_image_file.length))return a.a.reject("请拍摄整改照片");var t=s.a.getUser();e.status="待复验",e.repair_by=t.user_id,e.repair_date=n.a.getNowDate();var i=JSON.stringify(e.repair_image_file);return f.a.repairProblem(e.id,e.status,e.repair_by,e.repair_remark,e.repair_date,i).then((function(){return m.a.saveProblemStatusLog(e.proj_id,e.bidsection_id,e.batch_id,e.id,"已整改","",e.repair_remark,i)})).then((function(){_(e.id,"操作人")})).then((function(){var t=2;e.reinspect_set.id&&e.reinspect_set.id===e.repair_by&&(t=1);var i=v.a.getTodoSort(e.status,e.repair_deadline,e.close_date,e.repair_date,e.sent_back_times,e.emergency_degree,"process_problem");return v.a.insertTodoData(e.repair_by,e.id,"process-problem",t,i)})).then((function(){return u.default.addSyncGroup([["checkquality_problem",e.id],["checkquality_cc",e.id]])})).catch((function(e){return $log.error(e),a.a.reject(e)}))},getProblemLocalStatus:function(e){var t=e.status;return"已关闭"===e.status&&(t="非正常关闭"),a.a.resolve({status_text:t})},reinspectPass:function(e){if("待复验"!==e.status)return a.a.reject("问题单状态异常");var t=s.a.getUser();return e.status="已通过",e.respect_by=t.user_id,e.reinspect_completed_date=n.a.getNowDate(),f.a.reinspectProblemPass(e.id,e.status,e.reinspect_completed_date,e.respect_by).then((function(){return m.a.saveProblemStatusLog(e.proj_id,e.bidsection_id,e.batch_id,e.id,"已复验","","","")})).then((function(){_(e.id,"操作人")})).then((function(){var i=v.a.getTodoSort(e.status,e.repair_deadline,e.close_date,e.repair_date,e.sent_back_times,e.emergency_degree,"process_problem");return v.a.insertTodoData(t.user_id,e.id,"process-problem",2,i)})).then((function(){return u.default.addSyncGroup([["checkquality_problem",e.id],["checkquality_cc",e.id]])})).catch((function(e){return $log.error(e),a.a.reject(e)}))},reinspectReject:function(e){if("待复验"!==e.status)return a.a.reject("问题单状态异常");if(!e.sent_back_remark)return a.a.reject("请填写退回原因");if(e.photoRequired&&(!e.sent_back_image_file||0===e.sent_back_image_file.length))return a.a.reject("请拍摄退回照片");var t=s.a.getUser();e.sent_back_times?e.sent_back_times++:e.sent_back_times=1,e.status="待整改",e.sent_back_date=n.a.getNowDate(),e.sent_back_by=t.user_id;var i=JSON.stringify(e.sent_back_image_file);return f.a.reinspectProblemReject(e.id,e.status,e.sent_back_date,e.sent_back_remark,i,e.sent_back_by,e.sent_back_times).then((function(){return m.a.saveProblemStatusLog(e.proj_id,e.bidsection_id,e.batch_id,e.id,"已退回",e.sent_back_remark,"",i)})).then((function(){_(e.id,"操作人")})).then((function(){var i=2;e.repair_set.id&&e.repair_set.id===t.user_id&&(i=1);var a=v.a.getTodoSort(e.status,e.repair_deadline,e.close_date,e.repair_date,e.sent_back_times,e.emergency_degree,"process_problem");return v.a.insertTodoData(t.user_id,e.id,"process-problem",i,a)})).then((function(){return u.default.addSyncGroup([["checkquality_problem",e.id],["checkquality_cc",e.id]])})).catch((function(e){return $log.error(e),a.a.reject(e)}))},close:function(e){if("待整改"!==e.status)return a.a.reject("问题单状态异常");if(!e.close_reason)return a.a.reject("请填写关闭原因");e.close_date=n.a.getNowDate(),e.status="已关闭";var t=s.a.getUser();return f.a.closeProblem(e.id,e.status,e.close_date,e.close_reason).then((function(){return m.a.saveProblemStatusLog(e.proj_id,e.bidsection_id,e.batch_id,e.id,"已关闭",e.close_reason,"","")})).then((function(){_(e.id,"操作人")})).then((function(){var i=v.a.getTodoSort(e.status,e.repair_deadline,e.close_date,e.repair_date,e.sent_back_times,e.emergency_degree,"process_problem");return v.a.insertTodoData(t.user_id,e.id,"process-problem",2,i)})).then((function(){return u.default.addSyncGroup([["checkquality_problem",e.id],["checkquality_cc",e.id]])})).catch((function(e){return $log.error(e),a.a.reject(e)}))},changeRepair:function(e,t){if(!e.repair_set||!e.repair_set.id)return a.a.reject("请指定一个整改人");var i=s.a.getUser();return f.a.updateProblemModifiedBy(e.id).then((function(){if(t){var i=e.contractor&&e.contractor.id||"";return f.a.updateProblemContractor(e.id,i)}})).then((function(){return g.a.changeProblemRepair(e.id,e.repair_set)})).then((function(){return h.a.saveProblemFpInfo(e.proj_id,e.bidsection_id,e.batch_id,e.id,e.repair_set.id,e.repair_set_old.id,"分配整改人")})).then((function(){_(e.id,"操作人")})).then((function(){var t=2;e.repair_set.id&&e.repair_set.id===i.user_id&&(t=1);var a=v.a.getTodoSort(e.status,e.repair_deadline,e.close_date,e.repair_date,e.sent_back_times,e.emergency_degree,"process_problem");return v.a.insertTodoData(e.repair_set,e.id,"process-problem",t,a)})).then((function(){return u.default.addSyncGroup([["checkquality_problem",e.id],["checkquality_cc",e.id],["checkquality_repair",e.id]])})).catch((function(e){return $log.error(e),a.a.reject(e)}))},changeReinspect:function(e){if(!e.reinspect_set||!e.reinspect_set.id)return a.a.reject("请指定一个复验人");var t=s.a.getUser();return f.a.updateProblemModifiedBy(e.id).then((function(){return b.a.changeProblemReinspect(e.id,e.reinspect_set)})).then((function(){return h.a.saveProblemFpInfo(e.proj_id,e.bidsection_id,e.batch_id,e.id,e.reinspect_set.id,e.reinspect_set_old.id,"分配复验人")})).then((function(){_(e.id,"操作人")})).then((function(){var i=2;e.reinspect_set.id&&e.reinspect_set.id===t.user_id&&"待复验"===e.status&&(i=1);var a=v.a.getTodoSort(e.status,e.repair_deadline,e.close_date,e.repair_date,e.sent_back_times,e.emergency_degree,"process_problem");return v.a.insertTodoData(t.user_id,e.id,"process-problem",i,a)})).then((function(){return u.default.addSyncGroup([["checkquality_problem",e.id],["checkquality_cc",e.id],["checkquality_reinspect",e.id]])})).catch((function(e){return $log.error(e),a.a.reject(e)}))},changeCC:function(e){return f.a.updateProblemModifiedBy(e.id).then((function(){return p.a.saveProblemCC(e.id,e.cc_set)})).then((function(){return u.default.addSyncGroup([["checkquality_problem",e.id],["checkquality_cc",e.id]])})).catch((function(e){return $log.error(e),a.a.reject(e)}))},changeRepairDeadline:function(e){if(!/^(\d+)-(\d{1,2})-(\d{1,2})$/.test(e.repair_deadline))return a.a.reject("整改期限需要一个日期格式的值");var t=o()(e.repair_deadline).format("YYYY-MM-DD"),i=o()().format("YYYY-MM-DD");return e.is_timeout=t<i,f.a.updateProblemRepairDeadline(e.id,e.repair_deadline).then((function(){return u.default.addSyncGroup([["checkquality_problem",e.id]])})).catch((function(e){return $log.error(e),a.a.reject(e)}))},changeContractor:function(e){return e.contractor&&e.contractor.id?f.a.updateProblemContractor(e.id,e.contractor.id).then((function(){return u.default.addSyncGroup([["checkquality_problem",e.id]])})).catch((function(e){return $log.log(e),a.a.reject(e)})):a.a.reject("请指定责任单位")},saveRepairInfo:function(e,t,i){return i=JSON.stringify(i),f.a.saveRepairInfo(e,t,i).then((function(){return f.a.getCheckProblemDraft(e).then((function(t){return d.a.backUpDraft(e,t.proj_id,"checkquality_problem",t)}))}))},delete:function(e){return f.a.getCheckProblem(e).then((function(t){return"待提交"===t.status||"草稿"===t.status||"合格草稿"===t.status||"不合格草稿"===t.status?f.a.delete(e).catch((function(e){return $log.error(e),a.a.reject(e)})):($log.log("问题单状态异常："+e),a.a.reject("问题单状态异常"))}))}};t.a=y}).call(this,i("391c"))},"4a69":function(e,t,i){"use strict";i("571f")},"4b54":function(e,t,i){"use strict";(function(e){i("5ab2"),i("e10e"),i("6d57"),i("06a2");var a=i("28f8"),n=(i("163d"),i("6a61"),i("2e91")),r=(i("cc57"),i("e697"),i("774b")),o=i("f369"),c=i("07d2"),l=i("e68e"),d=i("7ab6"),u=i("3c64"),p=i("5a71"),h=i("1059"),m=i("cd05"),f=i("0f7b"),g=i("242a"),b=i("e2a7"),v=i("ed08"),_=i("fe13"),y=i("b6da"),x=i("da1c"),k=i("5e1b"),w=i("59a7"),P=i("75ca"),C=i("fd50"),j=i("6bf2"),S=i.n(j),O=i("1b7e"),I=(i("162a"),i("7cb8")),D=i("65a8"),z=i("aab3"),R=i("3bd5"),$=i("06f6"),T=i("242b"),B=i("5ff0"),E=i("112f"),L=i("bcc7"),M=(i("5028"),i("c745")),A=i("37d5"),Y=(i("4378"),i("3122")),N=i("7fc0"),F=i("3869");function q(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,a)}return i}function U(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?q(Object(i),!0).forEach((function(t){Object(a.a)(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):q(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var K,H,J,V=F.a.defaultDraft,G=null,X=R.a.getUser(),W={"templet-plan-v2":{},"process-accept-v3":{getInfo:"/online/process-acceptv3/get-info",getFloorInfo:"/online/process-acceptv3/get-floor-info"},process:{getInfo:"/online/process-check/get-info",getFloorInfo:"/online/process-check/get-floor-info"}};t.a={components:{Scroller:r.default,AppStepper:f.a,CheckGuide:o.a,Item:c.default,ItemImgList:l.a,PlaceSelect:_.a,CheckitemSelect:d.a,ItemTextarea:u.a,SingleSelect:p.a,RadioBox:h.a,UserSelect:m.a,Checkbox:g.a,ProblemDetailHeader:x.a},data:function(){return{isLoading:!0,title:"登记问题",id:"",moduleCode:"",uuId:"",hasDraft:!1,primaryKeys:{},repairOptions:[],ccOptions:[],reinspectOptions:[],contractorOptions:[],descriptionData:[],emergencyOptions:{},commonParms:{proj_id:"",biz_id:"",status:"",image_file:[],remark:"",deadline:7,repair:{},contractor:{},reinspect:{},cc:[],sent_back_image_file:[],repair_image_file:[],reinspect_image_file:[]},templetParams:{planName:"",templetName:""},processParams:{checkItemId:"",locationId:"",checkItem:{},deliverType:"",roomData:[],place:{},place_point:[],description:{},location:{drawing_file:[]},emergency_degree:"一般"},isRepair:!1,isReinspect:!1,isRegist:!1}},computed:{processFieldShow:function(){return"process-accept-v3"===this.moduleCode||"process"===this.moduleCode},currentProject:function(){return this.$store.state.global.currentProject},projName:function(){var t=this,i=this.$store.state.global.allProjects||[];return(e.find(i,(function(e){return e.id===t.commonParms.proj_id}))||{}).name||""},photoRequired:function(){return this.$store.state.global.isPhotoRequired},allowClose:function(){return"待整改"===this.commonParms.status&&this.isRegist},allowReinspectPassAndReject:function(){return"待复验"===this.commonParms.status&&this.isReinspect},allowRepair:function(){return"待整改"===this.commonParms.status&&this.isRepair},allowChangeRepairDeadline:function(){return"待整改"===this.commonParms.status&&this.isRegist&&this.$store.state.global.allowModifyRepairDeadline},allowChangeRepair:function(){return this.id&&"待整改"===this.commonParms.status&&(this.isRepair||this.isRegist)},allowChangeContractor:function(){return this.id&&("待整改"===this.commonParms.status&&this.isRegist||"待复验"===this.commonParms.status&&this.isRegist)},allowChangeReinspect:function(){return this.id&&("待整改"===this.commonParms.status&&this.isRegist||"待复验"===this.commonParms.status&&(this.isRegist||this.isReinspect))},allowChangeCc:function(){return this.id&&("待整改"===this.commonParms.status&&this.isRegist||"待复验"===this.commonParms.status&&this.isReinspect)},allowSelectPlace:function(){return 90===this.processParams.deliverType?this.processParams.location.drawing_file&&this.processParams.location.drawing_file.length:this.processParams.roomData.length>0},bgClass:function(){return{"草稿":"bg-gray7 b-color","待整改":"bg-red2 b-color","待复验":"bg-purple b-color","已通过":"bg-green2 b-color","已关闭":"bg-gray7 b-color"}},emergencyDegree:function(){var e=this.processParams.emergency_degree;return console.log(e,this.emergencyOptions,"this.emergencyOptions"),this.emergencyOptions[e]||""}},activated:function(){this.init()},methods:{init:(J=Object(n.a)(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.$route.query,this.moduleCode=t.moduleCode||"templet-plan-v2",this.id=t.id||"",this.title=t.id?"问题详情":"登记问题",!t.id){e.next=11;break}return this.hasDraft=!1,this.uuId="",e.next=9,this.getDetailData(t.id,!0);case 9:e.next=20;break;case 11:return this.hasDraft=!!t.uuId,this.uuId=t.uuId||v.a.uuid(),this.primaryKeys={uuId:this.uuId},G=F.a.createPrimaryKeys(this.primaryKeys),this.getDefaultValue(t),e.next=18,this.getDraftData();case 18:this.isLoading=!1,"templet-plan-v2"===t.moduleCode?this.commonParms.reinspect={id:X.user_id,name:X.user_name}:this.processFieldShow&&this.initProcess();case 20:this.getOptions();case 21:case"end":return e.stop()}}),e,this)}))),function(){return J.apply(this,arguments)}),getDefaultValue:function(e){this.commonParms={biz_id:e.biz_id,status:e.status||"",proj_id:e.projId||this.currentProject.id,image_file:JSON.parse(e.image_file||"[]"),remark:e.remark||"",deadline:e.deadline||7,repair:e.repair_by_user_info||{},contractor:e.contractor_id?{id:e.contractor_id,name:e.contractor_name}:{},reinspect:e.reinspect_by_user_info||{},cc:e.cc_user_info||[],repair_deadline:e.repair_deadline||"",regist:e.regist_by_user_info||{},regist_date:e.regist_date||"",close_date:e.close_date||"",close_reason:e.close_reason||"",repair_image_file:JSON.parse(e.repair_image_file||"[]"),repair_remark:e.repair_remark||"",reinspect_image_file:JSON.parse(e.reinspect_image_file||"[]"),reinspect_remark:e.reinspect_remark||"",sent_back_image_file:JSON.parse(e.sent_back_image_file||"[]"),sent_back_remark:e.sent_back_remark||"",repair_date:e.repair_date||"",reinspect_date:e.reinspect_date||"",sent_back_times:e.sent_back_times||"",is_timeout:e.is_timeout||!1},console.log("this.commonParms",this.commonParms),"templet-plan-v2"===this.moduleCode?this.templetParams={planName:e.plan_name,templetName:e.templet_name}:"process-accept-v3"===this.moduleCode?(this.processParams={checkItemId:e.checkItemId,checkItem:e.checkItem||{},deliverType:e.deliverType,place_point:JSON.parse(e.problem_values||"[]"),description:{id:e.desc_id,name:e.desc_name},place:e.place||{},drawing_file:JSON.parse(e.drawing_file||"[]"),problem_values:"",bidsection_id:e.bidsection_id,building_id:e.building_id,locationId:e.locationId,unit:e.unit,floor:e.floor,room_id:e.room_id,location:{drawing_file:JSON.parse(e.drawing_file||"[]")},roomData:[]},console.log("this.processParams",this.processParams)):"process"===this.moduleCode&&(this.processParams={checkItemId:e.checkItemId,checkItem:e.checkItem||{},deliverType:e.deliverType,place_point:JSON.parse(e.problem_values||"[]"),description:{id:e.desc_id,name:e.desc_name},place:e.place||{},drawing_file:JSON.parse(e.drawing_file||"[]"),problem_values:"",bidsection_id:e.bidsection_id,building_id:e.building_id,locationId:e.locationId,unit:e.unit,floor:e.floor,room_id:e.room_id,emergency_degree:e.emergency_degree||"一般",location:{drawing_file:JSON.parse(e.drawing_file||"[]")},roomData:[]},console.log("this.processParams",this.processParams))},getOptions:(H=Object(n.a)(regeneratorRuntime.mark((function t(){var i,a,s=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,A.default.getProjectUsers(this.commonParms.proj_id,[31]);case 2:return i=t.sent,t.next=5,A.default.getProjectUsers(this.commonParms.proj_id,[31,32,33]);case 5:a=t.sent,this.repairOptions="process"===this.moduleCode?i:a,this.reinspectOptions=a||[],this.ccOptions=a||[],this.loadContractor(),D.a.getOptions("紧急程度").then((function(t){t=e.omitBy(t,(function(t){return e.isEmpty(t)})),s.emergencyOptions=t}));case 11:case"end":return t.stop()}}),t,this)}))),function(){return H.apply(this,arguments)}),initProcess:function(){var t=this;this.isLoading=!0;var i=R.a.getUser(),a=[],s=[],n=this.processParams.deliverType,r=90!==n?this.processParams.building_id:"",o=90!==n?this.processParams.unit:"",c=this.processParams.locationId;return C.a.all([E.a.getCheckItemDescList(this.processParams.checkItemId),L.a.getCheckItem(this.processParams.checkItemId),Object(N.d)(W[this.moduleCode].getInfo,{id:this.commonParms.biz_id}),Object(N.e)(W[this.moduleCode].getFloorInfo,{id:this.commonParms.biz_id})]).then((function(r){console.log("process-results:",r),1===n?a=e.map(r[3],"room_id"):2!==n&&5!==n||(a=e.map(r[3],"floor")),s=r[3];var l=r[0];t.descriptionData=l;var d=r[1],u=r[2]||{},p={},h={};if(u.id&&(p={id:u.repair_user_info&&u.repair_user_info.id,name:u.repair_user_info&&u.repair_user_info.name},h={id:u.contractor_id,name:u.contractor_name}),t.hasDraft||(t.commonParms.contractor=h,t.commonParms.repair=p,t.commonParms.reinspect={id:i.user_id,name:i.user_name}),t.processParams.checkItem={id:d.id,name:d.name,full_name:d.full_name},90!==n&&(o=r[3]&&r[3].length&&r[3][0].unit||"",t.processParams.unit=o),r[3]&&1===r[3].length){var m=r[3],f=u.building_name,g=Object(I.a)(o,"单元");if(t.processParams.building_id=u.building_id,t.processParams.unit=o,2===n||5===n){var b=m[0].floor;t.processParams.place={building_id:u.building_id,unit_id:2===n?"":o,floor:b,room_id:"",full_name:f+g+Object(I.a)(b,"层")},t.processParams.floor_id=b}1===n&&(t.processParams.place={building_id:u.building_id,room_id:m[0].room_id||"",full_name:f+g+m[0].room_no,unit_id:o,floor:m[0].floor},t.processParams.room_id=t.processParams.place.room_id)}if(console.log("deliverType==>",n),90===n)return L.a.getSelfDefinitionPlaceInfo(c).then((function(e){t.processParams.location=e[0]||{},t.processParams.location.drawing_file=JSON.parse(t.processParams.location.drawing_file||"[]")})).then((function(){t.processParams.place={full_name:u.building_name+"-"+u.custom_location,name:u.custom_location}}));6===n&&(t.processParams.place=u.inspection_lot_name)})).then((function(){return 1===n?z.a.getPositionBuildingUnitRoomsByRoomsId(a,o).then((function(e){t.processParams.roomData=e})):2===n?z.a.getPositionBuildingRooms(r,a).then((function(e){t.processParams.roomData=e})):3===n?z.a.getPositionBuildingRooms(r).then((function(e){t.processParams.roomData=e})):5===n?z.a.getPositionBuildingUnitRooms(r,a,o,s).then((function(e){t.processParams.roomData=e})):void 0})).then((function(){if(e.isEmpty(t.processParams.drawing_file))return t.getDiagram(t.processParams.place).then((function(i){e.isEmpty(i)?(t.processParams.place_point=[],t.processParams.drawing_file=[]):t.processParams.drawing_file=[i]}))})).catch((function(e){console.error(e)})).finally((function(){t.isLoading=!1,console.log("this.processParams",t.processParams)}))},getDetailData:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.id,i=arguments.length>1?arguments[1]:void 0,a={id:t,module_code:this.moduleCode};return i&&(this.isLoading=!0),Object(N.f)(a).then((function(t){console.log(t),e.isRepair=X.user_id===(t.repair_by_user_info&&t.repair_by_user_info.id),e.isReinspect=X.user_id===(t.reinspect_by_user_info&&t.reinspect_by_user_info.id),e.isRegist=X.user_id===(t.regist_by_user_info&&t.regist_by_user_info.id),t.reinspect_image_file=t.reinspect_by&&t.reinspect_by[0]&&t.reinspect_by[0].reinspect_image_file,t.reinspect_remark=t.reinspect_by&&t.reinspect_by[0]&&t.reinspect_by[0].reinspect_remark,t.reinspect_date=t.reinspect_by&&t.reinspect_by[0]&&t.reinspect_by[0].reinspect_date,t.is_timeout="待整改"===t.status?t.repair_deadline<S()().format("YYYY-MM-DD"):"已关闭"===t.status?t.repair_deadline<S()(t.close_date).format("YYYY-MM-DD"):t.repair_deadline<S()(t.repair_date).format("YYYY-MM-DD"),t.projId=t.proj_id||e.currentProject.id,"process-accept-v3"===e.moduleCode&&(t.checkItem={id:t.item_id,name:t.item_name,full_name:t.item_name},t.checkItemId=t.item_id,t.deliverType=Number(t.process_mode)),"process"===e.moduleCode&&(t.checkItem={id:t.item_id,name:t.item_name,full_name:t.item_name},t.checkItemId=t.item_id,t.deliverType=Number(t.process_mode)),e.getDefaultValue(t)})).catch((function(e){console.error(e)})).finally((function(){e.isLoading=!1}))},getDraftData:function(){var e=this;return this.setMMKVModel(),V.get(G).then((function(t){t&&t.uuId===e.uuId&&"草稿"===t.status&&(e.commonParms=t.commonParms,e.templetParams=t.templetParams,e.processParams=t.processParams),console.log("this.templetParams",e.templetParams)}))},loadContractor:function(t){var i=this;return M.a.allowGroupUserByConstructor().then((function(t){if(t&&i.commonParms.repair&&i.commonParms.repair.id)return M.a.getOwnedContractorList(i.commonParms.repair.id).then((function(t){return e.isEmpty(t)||(i.contractorOptions=t,i.id||i.hasDraft||(i.commonParms.contractor=t[0])),t}))})).then((function(a){if(e.isEmpty(a))return B.a.getAllContractorList().then((function(e){i.contractorOptions=e,t&&(i.commonParms.contractor=e[0])}))}))},selectDeadline:function(){var e=this;this.allowChangeRepairDeadline&&k.a.openPopup({from:S()().toDate(),inputDate:S()(this.commonParms.repair_deadline).toDate(),callback:function(t){e.commonParms.repair_deadline=S()(t).format("YYYY-MM-DD"),e.changeOtherInfo("整改期限",S()(t).format("YYYY-MM-DD"))}})},selectDesc:function(e){this.processParams.description=e},showPlace:function(e){return e&&e.full_name||""},beforeConfirmPlace:function(t,i){var a=this;if(i.item&&i.item.disable){var s="";switch(i.type){case"building":s="已有此楼栋此工序流程的批次，不能重复创建";break;case"unit":s="已有此单元此工序流程的批次，不能重复创建";break;case"floor":s="已有此楼层此工序流程的批次，不能重复创建"}return b.a.alert(s),C.a.resolve(!1)}return this.getDiagram(t).then((function(i){return e.isEmpty(i)?(a.processParams.place_point=[],a.processParams.drawing_file=[],a.$refs.checkEditPlaceSelect.close(),!0):a.showHuxingMark(i,t).then((function(){if(a.processParams.drawing_file=[i],e.isEmpty(a.processParams.place_point))return!1}))}))},selectPlace:function(e){this.processParams.building_id=e.building_id,this.processParams.room_id=e.room_id,this.processParams.unit=e.unit_id,this.$set(this.processParams,"place",e),this.$refs.checkEditPlaceSelect.close()},markPoints:function(){var t=this;C.a.when().then((function(){var i=t.processParams.location.drawing_file[0]||{};t.processParams.drawing_file=[i],y.a.openPopup({mode:"remark",url:i.url,points:t.processParams.place_point||[],folder:"location-image",onmark:function(i){e.isArray(i)?t.processParams.place_point=i:t.processParams.place_point=[i]}})}))},getDiagram:function(t){var i,a=this;if(!t)return C.a.when();if(t.room_id)i=$.default.getDrawing(t.room_id,this.checkItemId).then((function(i){return e.isEmpty(i)?(a.isDrawing=!1,$.default.getRoomTypeDiagram(t.room_id)):i}));else if(t.floor){var s=t.unit_id?t.unit_id:"",n=t.unit_id?1:2,r=[t.building_id,s,t.floor,this.checkItemId,n],o=[t.building_id,s,t.floor,n];i=T.a.getDrawing.apply(T.a,r).then((function(t){return e.isEmpty(t)?(a.isDrawing=!1,T.a.getDiagram.apply(T.a,o)):t}))}else i=C.a.when();return i},showHuxingMark:function(t,i){var a=this,s=C.a.defer();return t=t||this.processParams.drawing_file[0],i=i||{room_id:this.processParams.room_id,building_id:this.processParams.building_id,unit_id:this.processParams.unit,floor:this.processParams.floor},y.a.openPopup({mode:this.id?"view":"remark",url:t.url,points:this.processParams.room_id===i.room_id?this.processParams.place_point:[],onmark:function(t){e.isArray(t)?a.processParams.place_point=t:a.processParams.place_point=[t],s.resolve()}}),s.promise},addProblem:(K=Object(n.a)(regeneratorRuntime.mark((function e(){var t,i,a,s,n,r=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.commonParms,i={"templet-plan-v2":this.templetParams,"process-accept-v3":this.processParams,process:this.processParams},a=i[this.moduleCode],e.next=5,this.getVerifyStatus(U(U({},t),a));case 5:if(!(s=e.sent)){e.next=8;break}return e.abrupt("return",b.a.alert(s));case 8:return n=this.getSubmitData(U(U({},t),a)),b.a.loading("正在提交"),e.abrupt("return",O.a.getHasNetwork().then((function(e){if(!e)return Promise.reject("当前无网络")})).then((function(){return r.uploadImages(n.image_file).then((function(e){return n.image_file=JSON.stringify(e||[]),Object(N.k)(n).then((function(){b.a.hideLoading(),b.a.alert("提交成功"),r.$router.go(-1)})).then((function(){return V.remove(G)}))}))})).catch((function(e){console.log("error",e),b.a.alert(e.errmsg||e)})));case 11:case"end":return e.stop()}}),e,this)}))),function(){return K.apply(this,arguments)}),getVerifyStatus:function(t){var i=this,a="";return"templet-plan-v2"===this.moduleCode&&(s.trim(t.remark)||(a="请输入补充说明"),t.repair.id||(a="请选择整改人"),t.contractor.id||(a="请选择责任单位"),t.reinspect.id||(a="请选择复验人")),"process-accept-v3"===this.moduleCode&&(t.repair.id||(a="请选择整改人"),t.reinspect.id||(a="请选择复验人"),t.contractor.id||(a="请选择责任单位"),!e.isEmpty(t.drawing_file)&&e.isEmpty(t.place_point))||"process"===this.moduleCode&&(t.repair.id||(a="请选择整改人"),t.reinspect.id||(a="请选择复验人"),t.contractor.id||(a="请选择责任单位"),!e.isEmpty(t.drawing_file)&&e.isEmpty(t.place_point))?(b.a.notify("尚未标记户型图","去标记").then((function(){return i.showHuxingMark(null,t.place)})),Promise.reject()):(this.getPhotoIsRequired("image_file",t)&&(a="请拍摄问题照片"),Promise.resolve(a))},getSubmitData:function(t){var i={},a=S()().add(t.deadline,"days").format("YYYY-MM-DD"),s=e.map(t.cc,(function(e){return e.id}));if("templet-plan-v2"===this.moduleCode)i={module_code:this.moduleCode,biz_id:t.biz_id,image_file:t.image_file||[],remark:t.remark||"",repair_deadline:S()(a).format("YYYY-MM-DD"),repair_user_id:t.repair.id||"",reinspect_user_id:t.reinspect.id||"",contractor_id:t.contractor.id||"",cc:String(s)};else if("process-accept-v3"===this.moduleCode){var n=t.deliverType;i={module_code:this.moduleCode,biz_id:t.biz_id,image_file:t.image_file||[],remark:t.remark||"",item_id:t.checkItemId||"",desc_id:t.description.id||"",place:6===n?t.place:t.place.full_name,drawing_file:JSON.stringify(t.drawing_file||[]),problem_values:JSON.stringify(t.place_point||[]),building_id:t.building_id||"",unit:t.unit||"",floor:t.floor||"",room_id:t.room_id||"",repair_deadline:S()(a).format("YYYY-MM-DD"),repair_user_id:t.repair.id||"",reinspect_user_id:t.reinspect.id||"",contractor_id:t.contractor.id||"",cc:String(s)}}else"process"===this.moduleCode&&(i={module_code:this.moduleCode,biz_id:t.biz_id,image_file:t.image_file||[],remark:t.remark||"",item_id:t.checkItemId||"",desc_id:t.description.id||"",place:t.place.full_name,drawing_file:JSON.stringify(t.drawing_file||[]),problem_values:JSON.stringify(t.place_point||[]),building_id:t.building_id||"",unit:t.unit||"",floor:t.floor||"",room_id:t.room_id||"",repair_deadline:S()(a).format("YYYY-MM-DD"),repair_user_id:t.repair.id||"",reinspect_user_id:t.reinspect.id||"",contractor_id:t.contractor.id||"",cc:String(s),emergency_degree:t.emergency_degree});return i},uploadImages:function(t){var i=[];return e.each(t,(function(e){!e.url&&e.temp?i.push(Y.a.uploadImage(e.temp).then((function(t){e.url=t,delete e.temp}))):delete e.temp,!e.videoUrl&&e.videoTemp?i.push(Y.a.uploadImage(e.videoTemp).then((function(t){e.videoUrl=t,delete e.videoTemp}))):delete e.videoTemp})),Promise.all(i).then((function(){return t}))},changeRepair:function(e){e&&e.id&&e.name&&(this.commonParms.repair={id:e.id,name:e.name,mobile:e.mobile},this.id?(b.a.loading("正在提交..."),this.changePerson("repair",e.id)):this.loadContractor(!0))},beforeChangeRepair:function(e){var t=this;return!(!e||!e.id)&&new Promise((function(i){if(!t.id)return i(e);b.a.popBox({title:"确定将整改人修改为【"+e.name+"】吗？",cancelText:"取消",okText:"确认",callback:function(e){i(e)}})}))},changeContractor:function(t){this.id&&!e.isEmpty(t)&&this.changeOtherInfo("责任单位",t.id)},beforeChangeReinspect:function(){var e=this;return new Promise((function(t){e.id?b.a.popBox({title:"确定修改复验人吗？",cancelText:"取消",okText:"确认",callback:function(e){t(e)}}):t()}))},changeReinspect:function(e){this.id&&this.changePerson("reinspect",e.id)},changeCc:function(t){var i=this;if(this.id&&e.isArray(t))return b.a.loading("正在提交..."),O.a.getHasNetwork().then((function(e){if(!e)return Promise.reject("当前无网络")})).then((function(){var a={id:i.id,module_code:i.moduleCode,cc:e.map(t,"id").join(",")};return Object(N.a)(a).then((function(){b.a.hideLoading(),b.a.alert("提交成功")}))})).catch((function(e){b.a.hideLoading(),b.a.alert(e.errmsg||e),i.getDetailData()}))},close:function(){var e=this;w.a.openPopup({callback:function(t){return e.commonParms.close_reason=t,b.a.loading("正在提交..."),O.a.getHasNetwork().then((function(e){if(!e)return Promise.reject("当前无网络")})).then((function(){var i={id:e.id,module_code:e.moduleCode,close_reason:t};return Object(N.c)(i).then((function(){b.a.hideLoading(),b.a.alert("提交成功"),e.getDetailData()}))})).catch((function(t){b.a.hideLoading(),b.a.alert(t.errmsg||t),e.getDetailData()}))}})},repairSubmit:function(){var e=this;return this.getPhotoIsRequired("repair_image_file",this.commonParms)?b.a.alert("请拍摄整改照片"):(b.a.loading("处理中"),O.a.getHasNetwork().then((function(e){if(!e)return Promise.reject("当前无网络")})).then((function(){return e.uploadImages(e.commonParms.repair_image_file).then((function(t){e.commonParms.repair_image_file=t;var i={id:e.id,module_code:e.moduleCode,repair_image_file:e.commonParms.repair_image_file,repair_remark:e.commonParms.repair_remark};return Object(N.i)(i).then((function(){b.a.hideLoading(),b.a.alert("提交成功"),e.getDetailData()}))}))})).catch((function(t){b.a.hideLoading(),b.a.alert(t.errmsg||t),e.getDetailData()})))},reinspect:function(){var e=this;return this.getPhotoIsRequired("reinspect_image_file",this.commonParms)&&!this.processFieldShow?b.a.alert("请拍摄复验照片"):b.a.popBox({title:"确定通过吗？",cancelText:"取消",okText:"通过"}).then((function(t){if(t)return b.a.loading("正在提交..."),O.a.getHasNetwork().then((function(e){if(!e)return Promise.reject("当前无网络")})).then((function(){return e.uploadImages(e.commonParms.reinspect_image_file).then((function(t){e.commonParms.reinspect_image_file=t;var i={id:e.id,module_code:e.moduleCode,reinspect_image_file:JSON.stringify(e.commonParms.reinspect_image_file||[]),reinspect_remark:e.commonParms.reinspect_remark};return Object(N.h)(i).then((function(){b.a.hideLoading(),b.a.alert("提交成功"),e.getDetailData()}))}))})).catch((function(t){b.a.hideLoading(),b.a.alert(t.errmsg||t),e.getDetailData()}))}))},back:function(){var t=this;P.a.openPopup({callback:function(i){var a=[];return i&&i.reason&&i.reason.id&&(1===i.reason.id&&a.push(i.reason.text),i.remark&&a.push(i.remark),t.commonParms.sent_back_remark=a.join(";")),e.isEmpty(i.images)?t.commonParms.sent_back_image_file=[]:t.commonParms.sent_back_image_file=i.images,b.a.loading("正在提交..."),O.a.getHasNetwork().then((function(e){if(!e)return Promise.reject("当前无网络")})).then((function(){return t.uploadImages(t.commonParms.sent_back_image_file).then((function(e){t.commonParms.sent_back_image_file=e;var i={id:t.id,module_code:t.moduleCode,sent_back_image_file:JSON.stringify(t.commonParms.sent_back_image_file||[]),sent_back_remark:t.commonParms.sent_back_remark};return Object(N.j)(i).then((function(){b.a.hideLoading(),b.a.alert("提交成功"),t.getDetailData()}))}))})).catch((function(e){b.a.hideLoading(),b.a.alert(e.errmsg||e),t.getDetailData()}))},photoRequest:"process"===this.moduleCode&&this.photoRequired.TYPE_PROCESS})},changeOtherInfo:function(e,t){var i=this;return b.a.loading("正在提交..."),O.a.getHasNetwork().then((function(e){if(!e)return Promise.reject("当前无网络")})).then((function(){var a={id:i.id,module_code:i.moduleCode};return"责任单位"===e?a.contractor_id=t:a.repair_deadline=t,Object(N.l)(a).then((function(){b.a.hideLoading(),b.a.alert("提交成功")}))})).catch((function(e){b.a.hideLoading(),b.a.alert(e.errmsg||e),i.getDetailData()}))},changePerson:function(e,t){var i=this;return b.a.loading("正在提交..."),O.a.getHasNetwork().then((function(e){if(!e)return Promise.reject("当前无网络")})).then((function(){var a={id:i.id,module_code:i.moduleCode,type:e};return"repair"===e?a.repair_user_id=t:a.reinspect_user_id=t,Object(N.b)(a).then((function(){b.a.hideLoading(),b.a.alert("提交成功"),i.getDetailData()}))})).catch((function(e){b.a.hideLoading(),b.a.alert(e.errmsg||e),i.getDetailData()}))},save:function(){var e=this,t=this.commonParms;if(t.remark||t.image_file.length)return this.setMMKVModel(),V.save(G).then((function(){return b.a.alert("保存成功").then((function(){e.$router.go(-1)}))}))},setMMKVModel:function(){var e=this.commonParms,t=this.templetParams,i=this.processParams,a=S()().add(e.deadline,"days").format("YYYY-MM-DD"),s=e.image_file,n=e.remark,r={primaryKeys:this.primaryKeys,bizId:e.biz_id,uuId:this.uuId,status:e.status||"草稿",commonParms:e,templetParams:t,processParams:i,images:s,deadline:a,remark:n};V.config({model:r,bizId:e.biz_id,modelKeys:["primaryKeys","commonParms","templetParams","processParams","uuId","bizId","status","images","deadline","remark","name"]})},delProblem:function(){var e=this;b.a.confirm("确定要删除此草稿吗？",(function(){return V.remove(G).then((function(){return b.a.alert("删除成功").then((function(){e.$router.go(-1)}))}))}))},getPhotoIsRequired:function(e,t){var i=this.photoRequired,a="TYPE_PROCESS";switch(this.moduleCode){case"process":a="TYPE_PROCESS";break;case"templet-plan-v2":a={image_file:"TEMPLET_PROBLEM",repair_image_file:"TEMPLET_REPAIR",reinspect_image_file:"TEMPLET_REVIEW"}[e];break;case"process-accept-v3":a={image_file:"TYPE_ACCEPT_V3_PROBLEM",repair_image_file:"TYPE_ACCEPT_V3_REPAIR"}[e]}return!(!i[a]||!t[e]||t[e].length)}}}}).call(this,i("391c"))},"4c2b":function(e,t,i){"use strict";var a=i("329b"),s=i("a065").a,n=(i("84e5"),i("17cc")),r=Object(n.a)(s,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("transition",{attrs:{name:"slide-right"}},[e.show?i("page-content",{attrs:{mode:"dialog",title:"选择检查项","on-close":e.closePopup}},[i("div",{staticClass:"header-right-flex",attrs:{slot:"header-bar-right"},slot:"header-bar-right"},[i("set-usual-items",{attrs:{module:e.module,"check-items":e.setUsualTreeList,"section-id":e.sectionId},on:{onSelect:e.getTreeList}}),i("check-guide",{attrs:{module:e.module,"section-id":e.sectionId}})],1),i("scroller",{attrs:{"is-empty":e.isLoading||!e.treeList.length||e.isSearching}},[e.isLoading?e._e():[i("app-search-bar",{ref:"app-search-bar-checkitem-select",staticClass:"bg-white",attrs:{"history-key":"checkitem-select-search-history-key"},on:{changeSearchStatus:e.setSearchMode},model:{value:e.searchKeyword,callback:function(t){e.searchKeyword=t},expression:"searchKeyword"}}),!e.isSearching||e.searchKeyword?i("tree",{attrs:{data:e.treeList,keyword:e.searchKeyword,selected:[e.selected,e.selectedDesc]},on:{onSelect:e.onSelect}}):e._e()],i("loading-status",{attrs:{"is-loading":e.isLoading,"is-empty":!e.treeList.length,"empty-text":"没有检查项"}},[e.isSearching?i("template",{slot:"empty-text"},[e._v("\n          未搜索到包含"),i("span",{staticClass:"color-blue"},[e._v(e._s(e.searchKeyword))]),e._v("的结果\n        ")]):e._e()],2)],2)],1):e._e()],1)}),[],!1,null,"4c02e6e5",null).exports,o=!1;o||(o=new(a.default.extend(r))({el:document.createElement("div")}),document.body.appendChild(o.$el));t.a=o},5033:function(e,t,i){var a=i("5454");(e.exports=i("690e")(!1)).push([e.i,".zjapp .drawing-con[data-v-fba5990a]{display:flex;flex-direction:column;align-items:center;justify-content:center;height:100%;font-size:0;line-height:0}.zjapp .drawing-con canvas[data-v-fba5990a]{display:block;height:100%;width:100%;background:url("+a(i("eb66"))+") #fff;background-size:4px 4px}.zjapp .loading-text[data-v-fba5990a]{margin-top:15px;color:#aaa}.zjapp .error-text[data-v-fba5990a],.zjapp .loading-text[data-v-fba5990a]{padding:0 15px;line-height:20px;text-align:center;font-size:16px}.zjapp .error-text[data-v-fba5990a]{color:#ff3d3d}",""])},"515e":function(e,t,i){"use strict";var a=i("329b"),s=i("f1e4").a,n=(i("fe9e"),i("17cc")),r=Object(n.a)(s,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("transition",{attrs:{name:"slide-right"}},[e.show?i("page-content",{class:{"content-not-empty":e.content.length},attrs:{mode:"dialog",title:"检查指引","on-close":e.closePopup}},[e.isLoading?e._e():i("div",{staticClass:"check-guide-detail-hd border-bottom"},[i("h2",{staticClass:"check-guide-detail-title pb10"},[e._v(e._s(e.title))])]),!e.isLoading&&e.content.length?i("div",{staticClass:"check-guide-detail-content"},e._l(e.content,(function(t,a){return i("p",{key:a},[t.isImg&&t.src?i("img",{class:{"img-not-ready":!t.ready,error:"rejected"===t.status},attrs:{src:e.getThumbnail(t)},on:{error:function(i){e.imgError(t,a)},click:function(i){e.imgClick(t)}}}):e._e(),t.isImg?e._e():i("span",[e._v("\n          "+e._s(t.val)+"\n        ")])])}))):e._e(),i("loading-status",{attrs:{"is-loading":e.isLoading,"is-empty":!e.content.length,"empty-text":"PC端未设置检查指引"}})],1):e._e()],1)}),[],!1,null,"43042f0d",null).exports,o=!1;o||(o=new(a.default.extend(r))({el:document.createElement("div")}),document.body.appendChild(o.$el));t.a=o},"53a4":function(e,t,i){"use strict";i("a5bf")},"53e4":function(e,t,i){"use strict";i("75b9")},"542f":function(e,t,i){(e.exports=i("690e")(!1)).push([e.i,".zjapp .layout-main[data-v-29e0b631] .layout-content{overflow:auto}[data-v-29e0b631] .item .icon{color:#4275e8}.zjapp .item-con[data-v-29e0b631] .item-img-list{margin-top:-8px}",""])},"571f":function(e,t,i){var a=i("3ea4");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);(0,i("85cb").default)("0f7a5f2a",a,!0,{sourceMap:!1,shadowMode:!1})},"573a":function(e,t,i){"use strict";(function(e){i("5ab2"),i("6d57"),i("e10e"),i("e697");var a=i("28f8"),s=(i("f548"),i("cc57"),i("9a33"),i("c0c3"),i("e89f")),n=i("07d2"),r=i("ab5c");function o(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,a)}return i}function c(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?o(Object(i),!0).forEach((function(t){Object(a.a)(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):o(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}t.a={name:"CheckitemSelectDialog",components:{Item:n.default},mixins:[s.a],data:function(){return{breadCrumbs:[{id:1,name:"全部",type:"batchs"}],hasBatch:!0,activeCrumbIndex:1,mapBreadCrumbs:{},beforeConfirm:function(){},callback:function(){},show:!1,isLoading:!0,keyword:"",title:"",options:[],selected:{},searchBar:!0,isSearching:!1,searchResults:[],selectedBuilding:{},selectedUnit:{},selectedFloor:{},selectedRoom:{id:""},isSelHasUnit:!0,list:[],batchs:[],buildings:[],units:[],floors:[],rooms:[],projectId:"",searchOrigin:[],floorIsId:!0}},computed:{lastItem:function(){var t;return e.isEmpty(this.selectedRoom)?e.isEmpty(this.selectedFloor)?e.isEmpty(this.selectedUnit)?e.isEmpty(this.selectedBuilding)||(t={type:"building",item:this.selectedBuilding}):t={type:"unit",item:this.selectedUnit}:t={type:"floor",item:this.selectedFloor}:t={type:"room",item:this.selectedRoom},t}},watch:{keyword:function(e){this.search(e)}},mounted:function(){window.multiPlaceTest=this},methods:{searchItemClick:function(e){var t={sec_id:e.sec_id,building_id:e.building_id,unit_id:e.unit,room_id:e.id,floor:e.floor,full_name:e.full_name.split("-").slice(1).join("")};this.callback(t)},search:function(e){this.searchResults=this.searchOrigin.filter((function(t){return t.full_name.indexOf(e)>-1}))},itemClick:function(t){if(console.log("自定义部位-console-itemClick：",t),t.buildings&&(this.selectBatch(t),t.buildings.length||this.select()),t.units){var i=this.selectBuilding(t);t.units.length||!1===i||this.select()}if(t.floors){var a=null;a=e.isEmpty(this.selectedBuilding)?this.selectBuilding(t):this.selectUnit(t),t.floors.length||!1===a||this.select()}t.rooms&&(this.selectFloor(t),t.rooms.length||this.select()),t.room_no&&this.selectRoom(t)},selectBatch:function(e){this.buildings=this.options=e.buildings,this.activeCrumbIndex=this.mapBreadCrumbs.batch,this.breadCrumbs.push({id:this.activeCrumbIndex,name:e.name,type:"buildings",item:e})},crumbClick:function(e){this.activeCrumbIndex=e.id,this.breadCrumbs=this.breadCrumbs.slice(0,e.id),this.breadCrumbs[this.breadCrumbs.length-1].selected=!0,this.options=this[e.type],["batchs","buildings"].indexOf(e.type)>-1&&this.selectBuilding();var t=e.item||{};t.units&&(this.selectedBuilding=t,this.selectedUnit={},this.selectedFloor={},this.selectedRoom={}),t.floors&&(this.selectedUnit=this.isSelHasUnit?t:{},this.selectedFloor={},this.selectedRoom={}),t.rooms&&(this.selectedFloor=t,this.selectedRoom={})},openPopup:function(t){var i=this;if(this.value=!0,this.show=!0,this.projectId=t.projectId,this.title=t.title,this.selected=t.selected,this.floorIsId=t.floorIsId,this.hasBatch=!!e.isBoolean(t.hasBatch)&&t.hasBatch,this.searchBar=!!e.isBoolean(t.searchBar)&&t.searchBar,this.beforeConfirm=e.isFunction(t.beforeConfirm)?t.beforeConfirm:function(){},this.callback=e.isFunction(t.callback)?t.callback:function(){},this.breadCrumbs=[{id:1,name:"全部",type:"batchs"}],e.isEmpty(t.options)){var a=t.getOptionsPromise&&t.getOptionsPromise();a&&a.then&&e.isFunction(a.then)&&(this.isLoading=!0,a.then((function(e){i.batchs=i.options=e,i.setDefaultSeleted(),i.isLoading=!1})))}else this.batchs=this.options=t.options,this.setDefaultSeleted(),this.isLoading=!1;this.projectId&&!this.searchOrigin.length&&this.getRooms(this.projectId);var s=["batch","building","unit","floor"];this.hasBatch||s.shift(),s.reduce((function(e,t){return i.mapBreadCrumbs[t]=e,++e}),2),this.$emit("open")},getRooms:function(e){var t=this;return r.a.getAllRooms(e).then((function(e){t.searchOrigin=e.map((function(e){var t="";return e.sec_name&&(t+=e.sec_name),e.building_name&&(t+="-".concat(e.building_name)),e.unit&&(e.unitName=e.unit.replace("单元","")+"单元",t+="-".concat(e.unitName)),e.floor&&(e.floorName=e.floor.replace("层","")+"层",t+="-".concat(e.floorName)),t+="-".concat(e.room_no),c(c({},e),{},{full_name:t})}))}))},closePopup:function(){this.value=!1,this.show=!1,this.$emit("close")},setDefaultSeleted:function(){var t,i=this,a=1;this.selected&&this.selected.building_id&&(this.hasBatch?(this.mapBreadCrumbs.batch=++a,this.mapBreadCrumbs.building=++a,e.each(this.batchs||[],(function(a){e.each(a.buildings||[],(function(e){e.id===i.selected.building_id&&(t=e,i.selectBatch(a))}))}))):(this.mapBreadCrumbs.building=++a,e.each(this.batchs||[],(function(e){e.id===i.selected.building_id&&(t=e)}))));var s=this.selected&&this.selected.unit_id&&t&&e.find(t.units||[],(function(e){return e.id.toUpperCase()===i.selected.unit_id.toUpperCase()})),n=this.selected&&this.selected.floor&&t&&e.find(s?s.floors:t.floors||[],(function(e){return i.floorIsId?e.id===i.selected.floor:e.floor===i.selected.floor})),r=this.selected&&this.selected.room_id&&n&&e.find(n.rooms||[],(function(e){return e.id.toUpperCase()===i.selected.room_id.toUpperCase()}));this.selectedBuilding={},this.selectedUnit={},this.selectedFloor={},this.selectedRoom={},t&&this.selectBuilding(t),s&&this.selectUnit(s),n&&this.selectFloor(n),r&&this.selectRoom(r,!0)},selectBuilding:function(t){return!t||t.disabled?(this.selectedBuilding={},this.selectedUnit={},this.selectedFloor={},void(this.selectedRoom={})):this.selectedBuilding&&this.selectedBuilding.id===t.id&&90===t.process_mode?(this.selectedBuilding={},!1):(this.selectedBuilding=t,e.isEmpty(t.units)&&e.isEmpty(t.floors)?90===t.process_mode&&(this.activeCrumbIndex=1):(t.units?(this.units=this.options=t.units,i="units"):(this.floors=this.options=t.floors,i="floors",this.isSelHasUnit=!1),this.activeCrumbIndex=this.mapBreadCrumbs.building,this.breadCrumbs.push({id:this.activeCrumbIndex,name:t.name,type:i,item:t})),this.selectedUnit={},this.selectedFloor={},void(this.selectedRoom={}));var i},selectUnit:function(t){return!t||t.disabled?(this.selectedUnit={},this.selectedFloor={},void(this.selectedRoom={})):this.selectedUnit&&this.selectedUnit.id===t.id&&90===t.process_mode?(this.selectedUnit={},!1):(this.selectedUnit=t,e.isEmpty(t.floors)||(this.floors=this.options=t.floors,this.activeCrumbIndex=this.mapBreadCrumbs.unit,this.breadCrumbs.push({id:this.activeCrumbIndex,name:t.name,type:"floors",item:t})),this.selectedFloor={},void(this.selectedRoom={}))},selectFloor:function(t){if(!t||t.disabled)return this.selectedFloor={},void(this.selectedRoom={});this.selectedFloor=t,e.isEmpty(t.rooms)||(this.rooms=this.options=t.rooms,this.activeCrumbIndex=this.mapBreadCrumbs.floor,this.breadCrumbs.push({id:this.activeCrumbIndex,name:t.name,type:"rooms",item:t})),this.selectedRoom={}},selectRoom:function(e,t){e&&!e.disabled?this.selectedRoom&&this.selectedRoom.id===e.id?this.selectedRoom={}:(this.selectedRoom=e,!0!==t&&this.select()):this.selectedRoom={}},select:function(){var e=this,t=this.getResult(),i=this.beforeConfirm(t,this.lastItem);i&&i.then?i.then((function(i){!1!==i&&e.callback(t)})):!1!==i&&this.callback(t)},getResult:function(){var t={sec_id:"",building_id:"",unit_id:"",room_id:"",full_name:"",process_mode:null};return e.isEmpty(this.selectedBuilding)||(t.building_id=this.selectedBuilding.id,t.sec_id=this.selectedBuilding.sec_id||this.selectedBuilding.section_id||"",t.full_name+=this.selectedBuilding.name,t.process_mode=this.selectedBuilding.process_mode),e.isEmpty(this.selectedUnit)||(t.unit_id=this.selectedUnit.id,t.full_name+=this.selectedUnit.name,t.process_mode=this.selectedUnit.process_mode),e.isEmpty(this.selectedFloor)||(this.floorIsId?t.floor=this.selectedFloor.id:t.floor=this.selectedFloor.floor,e.isEmpty(this.selectedRoom)&&(t.full_name+=this.selectedFloor.name)),e.isEmpty(this.selectedRoom)||(t.room_id=this.selectedRoom.id,t.full_name+=this.selectedRoom.name),t},isCheck:function(t){var i,a=e.find(this.breadCrumbs,{id:this.activeCrumbIndex}),s=a?a.type:"";return 90===t.process_mode&&"batchs"===s||"buildings"===s?i=this.selectedBuilding:"units"===s?i=this.selectedUnit:"floors"===s?i=this.selectedFloor:"rooms"===s&&(i=this.selectedRoom),i&&i.id===t.id}}}}).call(this,i("391c"))},"574c":function(e,t,i){(e.exports=i("690e")(!1)).push([e.i,".zjapp .item-textarea{background-color:#fff;padding:5px 15px}.zjapp .item-textarea-content{position:relative}.zjapp .item-textarea .rule,.zjapp .item-textarea textarea{width:100%;min-height:40px;line-height:20px;font-size:16px;padding:0;border:none}.zjapp .item-textarea .rule{position:absolute;top:0;left:0;visibility:hidden;word-break:break-all}.zjapp .item-textarea .counter{text-align:right;margin:0 0 -5px 0;height:15px;line-height:15px;color:#b2b2b2;font-size:12px}",""])},5897:function(e,t,i){var a=i("9b8b");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);(0,i("85cb").default)("bf5c2528",a,!0,{sourceMap:!1,shadowMode:!1})},"59a7":function(e,t,i){"use strict";var a=i("329b"),s=i("409b").a,n=(i("d2d4"),i("17cc")),r=Object(n.a)(s,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("transition",{attrs:{name:"slide-right"}},[e.show?i("page-content",{attrs:{mode:"dialog",title:"选择非正常关闭原因","on-close":e.closePopup}},[e._l(e.reasonList,(function(t,a){return i("item",{key:a,staticStyle:{"min-height":"46px","align-items":"center"},attrs:{mode:"view",border:"bottom",text:t.text,"icon-right":t.id===e.reason.id?"qualified":"","icon-right-color":"color-theme"},on:{click:function(i){e.selectItem(t)}}})})),i("div",{staticClass:"mt10"},[e.hasImages?i("item",{staticClass:"p15"},[i("item-img-list",{model:{value:e.images,callback:function(t){e.images=t},expression:"images"}})],1):e._e(),e.reason.remarkRequire||e.fixedRemark?i("item-textarea",{staticClass:"border-tb",attrs:{placeholder:"补充说明"},model:{value:e.remark,callback:function(t){e.remark=t},expression:"remark"}}):e._e()],1),i("app-button-group",[i("app-button",{on:{click:e.submit}},[e._v("提交")])],1)],2):e._e()],1)}),[],!1,null,"e24c0d3a",null).exports,o=!1;o||(o=new(a.default.extend(r))({el:document.createElement("div")}),document.body.appendChild(o.$el));t.a=o},"5a71":function(e,t,i){"use strict";var a=i("29be").a,s=i("17cc"),n=Object(s.a)(a,(function(){var e=this,t=e.$createElement;return(e._self._c||t)("item",{class:e.required,attrs:{label:e.title,text:e.value&&e.value.id?e.value.name:"view"===e.mode?"无":"",mode:e.mode,editabled:e.editabled,placeholder:e.required?e.placeholder||"请选择":"选填","form-check":e.formCheck},on:{click:e.openSelect}})}),[],!1,null,null,null);t.a=n.exports},"5c19":function(e,t,i){(e.exports=i("690e")(!1)).push([e.i,".zjapp .content-not-empty[data-v-43042f0d] .layout-content{display:auto;overflow:auto;padding-bottom:100px}.zjapp .check-guide-detail-hd[data-v-43042f0d]{margin-left:30px;padding:25px 30px 5px 0}.zjapp .check-guide-detail-title[data-v-43042f0d]{margin:0;line-height:20px;font-size:18px;color:#111;font-weight:700;word-break:break-all}.zjapp .check-guide-detail-info[data-v-43042f0d]{line-height:20px;font-size:14px;color:#8c8c8c}.zjapp .check-guide-detail-content[data-v-43042f0d]{padding:30px;line-height:30px;color:#333;font-size:16px}.zjapp .check-guide-detail-content p[data-v-43042f0d]{margin-bottom:30px;min-height:1em}.zjapp .check-guide-detail-content img[data-v-43042f0d]{max-width:100%}.zjapp .check-guide-detail-content .img-not-ready[data-v-43042f0d]{width:80px;height:auto}.zjapp .error[data-v-43042f0d]{max-width:50%}",""])},"5e1b":function(e,t,i){"use strict";var a=i("329b"),s=(i("6d57"),i("e10e"),i("6bf2")),n=i.n(s);var r={name:"DatepickerDialog",components:{},mixins:[i("e89f").a],props:{},data:function(){return{show:!1,isLoading:!0,today:"",currentYear:"",currentMonth:"",currentDate:"",yearsList:[],monthsList:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],weeksList:["日","一","二","三","四","五","六"],showYearSelect:!1,showMonthSelect:!1,dayList:[]}},methods:{openPopup:function(e){this.value=!0,this.show=!0,this.from=e.from,this.to=e.to,this.inputDate=n()(e.inputDate).isValid()?n()(n()(e.inputDate).format("YYYY-MM-DD")):n()(n()().format("YYYY-MM-DD")),this.callback=e.callback,this.today=n()(n()().format("YYYY-MM-DD")).valueOf(),this.from?this.fromDate=n()(n()(this.from).format("YYYY-MM-DD")).valueOf():this.fromDate=0,this.to?this.toDate=n()(n()(this.to).format("YYYY-MM-DD")).valueOf():this.toDate=1/0,this.selctedDateEpoch=n()(n()(this.inputDate).format("YYYY-MM-DD")).valueOf(),this.refreshDateList(this.inputDate),this.$emit("open")},closePopup:function(){this.value=!1,this.show=!1,this.$emit("close")},closeSelectList:function(){this.showYearSelect=!1,this.showMonthSelect=!1},prevMonth:function(){this.currentDate=n()(this.currentDate).subtract(1,"month"),this.currentMonth=this.monthsList[this.currentDate.month()],this.currentYear=this.currentDate.year(),this.refreshDateList(this.currentDate)},nextMonth:function(){this.currentDate=n()(this.currentDate).add(1,"month"),this.currentMonth=this.monthsList[this.currentDate.month()],this.currentYear=this.currentDate.year(),this.refreshDateList(this.currentDate)},selectYear:function(){this.showYearSelect=!this.showYearSelect,this.showMonthSelect=!1},setYear:function(e){this.currentYear=e,this.yearChanged(e),this.showYearSelect=!1},selectMonth:function(){this.showYearSelect=!1,this.showMonthSelect=!this.showMonthSelect},setMonth:function(e){this.currentMonth=e,this.monthChanged(e),this.showMonthSelect=!1},dateSelected:function(e){e&&0!==Object.keys(e).length&&(this.selctedDateEpoch=e.epoch,this.callback(this.selctedDateEpoch),this.closePopup())},monthChanged:function(e){var t=this.monthsList.indexOf(e);this.currentDate.month(t),this.refreshDateList(this.currentDate)},yearChanged:function(e){this.currentDate.year(e),this.refreshDateList(this.currentDate)},refreshDateList:function(e){var t=[];this.isLoading=!0,e=n()(n()(e).format("YYYY-MM-DD")),this.currentDate=e,this.currentYear="",this.currentMonth="";var i,a,s=this.currentDate.daysInMonth();this.yearsList=function(e,t){var i=[],a=2015,s=2100;a=e?n()(e).year():a,s=t?n()(t).year():s;for(var r=a;r<=s;r++)i.push(r);return i}(),this.dayList=[];var r=n()(this.currentDate).startOf("month").day();this.firstDayEpoch=n()(this.currentDate).startOf("month").valueOf(),this.lastDayEpoch=n()(this.currentDate).endOf("month").startOf("day").valueOf();for(var o=1;o<=s;o++)a=(i=n()(this.currentDate).date(o)).valueOf()<this.fromDate||i.valueOf()>this.toDate,t.push({date:i.date(),month:i.month(),year:i.year(),day:i.day(),epoch:i.valueOf(),disabled:a}),this.dayList=t;for(var c=0;c<r;c++)this.dayList.unshift({});this.rows=[0,7,14,21,28,35],this.cols=[0,1,2,3,4,5,6],this.currentMonth=this.monthsList[e.month()],this.currentYear=this.currentDate.year(),this.numColumns=7,this.isLoading=!1}}},o=(i("80d8"),i("17cc")),c=Object(o.a)(r,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("transition",{attrs:{name:"slide-right"}},[e.show?i("page-content",{attrs:{mode:"dialog",title:"选择日期","on-close":e.closePopup},on:{click:function(t){e.closeSelectList()}}},[e.isLoading?e._e():i("div",{staticClass:"datepicker-hd"},[i("div",{class:{"datepicker-prev":!0,disabled:e.firstDayEpoch-864e5<e.fromDate},on:{click:e.prevMonth}},[i("icon",{attrs:{name:"arrow-left"}})],1),i("div",{staticClass:"datepicker-hd-center"},[i("div",{staticClass:"datepicker-year",on:{click:function(t){return t.stopPropagation(),e.selectYear(t)}}},[e._v("\n          "+e._s(e.currentYear)+"\n\n          "),i("transition",{attrs:{name:"spread"}},[e.showYearSelect?i("div",{staticClass:"select-list",on:{click:function(e){e.stopPropagation()}}},e._l(e.yearsList,(function(t,a){return i("div",{key:a,class:{"select-item":!0,"item-selected":e.currentYear===t},on:{click:function(i){e.setYear(t)}}},[e._v("\n                "+e._s(t)+"\n              ")])}))):e._e()])],1),i("div",{staticClass:"datepicker-month",on:{click:function(t){t.stopPropagation(),e.selectMonth()}}},[e._v("\n          "+e._s(e.currentMonth)+"\n          "),i("transition",{attrs:{name:"spread"}},[e.showMonthSelect?i("div",{staticClass:"select-list",on:{click:function(e){e.stopPropagation()}}},e._l(e.monthsList,(function(t,a){return i("div",{key:a,class:{"select-item":!0,"item-selected":e.currentMonth===t},on:{click:function(i){e.setMonth(t)}}},[e._v("\n                "+e._s(t)+"\n              ")])}))):e._e()])],1)]),i("div",{class:{"datepicker-next":!0,disabled:e.lastDayEpoch+864e5>e.toDate},on:{click:e.nextMonth}},[i("icon",{attrs:{name:"arrow-right"}})],1)]),e.isLoading?e._e():i("div",{staticClass:"calendar"},[i("div",{staticClass:"weeks-row"},e._l(e.weeksList,(function(t,a){return i("div",{key:a,staticClass:"weeks-cell"},[e._v("\n          "+e._s(t)+"\n        ")])}))),e._l(e.rows,(function(t,a){return i("div",{key:a,staticClass:"date-row"},e._l(e.cols,(function(a,s){return i("div",{key:s,staticClass:"date-cell",class:{"date-cell-selected":e.dayList[t+a]&&e.dayList[t+a].epoch===e.selctedDateEpoch,today:e.dayList[t+a]&&e.dayList[t+a].epoch===e.today,disabled:e.dayList[t+a]&&e.dayList[t+a].disabled},on:{click:function(i){e.dateSelected(e.dayList[t+a])}}},[e._v("\n          "+e._s(e.dayList[t+a]&&e.dayList[t+a].date)+"\n        ")])})))}))],2)]):e._e()],1)}),[],!1,null,"0a266c44",null).exports,l=!1;l||(l=new(a.default.extend(c))({el:document.createElement("div")}),document.body.appendChild(l.$el));t.a=l},6272:function(e,t,i){(e.exports=i("690e")(!1)).push([e.i,'.zjapp .number-input[data-v-74068386]{position:relative;display:inline-block;vertical-align:top;width:61px;height:30px;border:1px solid #e5e5e5;border-radius:3px;text-align:center;font-size:14px;color:#333}@media screen and (min-width:320px){.zjapp .number-input[data-v-74068386]{width:50px}}@media screen and (min-width:360px){.zjapp .number-input[data-v-74068386]{width:58px}}@media screen and (min-width:375px){.zjapp .number-input[data-v-74068386]{width:61px}}.zjapp .text[data-v-74068386]{position:relative;display:inline-block;vertical-align:top;width:100%;height:100%;line-height:28px;overflow:hidden}.zjapp .text.disabled[data-v-74068386]{background:#f5f5f5;color:#666}.zjapp .value[data-v-74068386]{position:absolute;top:50%;right:0;margin-top:-14px;min-width:100%;height:28px;color:inherit}.zjapp .placeholder[data-v-74068386],.zjapp .value[data-v-74068386]{line-height:28px;pointer-events:none}.zjapp .placeholder[data-v-74068386]{display:inline-block;vertical-align:top;width:100%;height:100%;color:#b2b2b2}.zjapp .icon-minus[data-v-74068386]{position:absolute;top:-9px;right:-9px;width:18px;height:18px;border-radius:9px;background-color:#ff4546}.zjapp .icon-minus[data-v-74068386]:before{content:"";position:absolute;left:4px;top:8px;width:10px;height:2px;background-color:#fff}.zjapp .icon-minus[data-v-74068386]:after{content:"";position:absolute;left:-5px;top:-5px;width:28px;height:28px;border-radius:9px}.zjapp .number-input-select-all .value-handle[data-v-74068386]{background-color:#cbdaf9}.zjapp .number-input.unqualified[data-v-74068386]{border:1px solid #ffe8e8;background-color:#fff3f3;color:#ff5050}.zjapp .number-input.qualified .text[data-v-74068386]{color:#333}.zjapp .number-input.number-input-focus[data-v-74068386]{border-color:#4275e8;box-shadow:0 0 8px 0 rgba(66,117,232,.37)}.zjapp .number-input.number-input-empty[data-v-74068386]{border-color:#ff3d3d;box-shadow:0 0 8px 0 rgba(255,59,48,.37)}',""])},6412:function(e,t,i){"use strict";(function(e){i("e697"),i("6d57"),i("06a2");var a=i("7b10"),s=i("7bac"),n=i("a7c3");t.a={name:"SetUsualItems",props:{module:{type:String,default:null},checkItems:{type:Array,default:function(){return[]}},sectionId:{type:String,default:""}},data:function(){return{}},computed:{moduleAtter:function(){return this.$store.state.global.moduleAttribute[this.module]||{}},isSetUsualItems:function(){return this.moduleAtter.setUsualItems},mmkvCode:function(){return n.a[this.moduleAtter.mmkv_item]+"_"+this.sectionId},mmkvTipsCode:function(){return n.a[this.moduleAtter.mmkv_item_tips]}},methods:{openPopup:function(){var e=this;Promise.all([this.mmkvItem(),this.mmkvItemTips()]).then((function(t){var i=JSON.parse(JSON.stringify(e.checkItems));i=null===t[0]?e.patch(i):e.mergeArray(i,t[0]),a.a.openPopup({checkItems:i,mmkvItemTips:null===t[1]||t[1],tipsCallback:e.tipsCloseCallback,saveCallback:e.saveCallback})}))},mmkvItem:function(){return s.a.getUserKey(this.mmkvCode)},mmkvItemTips:function(){return s.a.getUserKey(this.mmkvTipsCode)},saveCallback:function(e){return this.$emit("onSelect"),s.a.setUserKey(this.mmkvCode,e)},tipsCloseCallback:function(e){s.a.setUserKey(this.mmkvTipsCode,e)},patch:function(t){var i=this;return e.map(t,(function(t){if(t.isOpen=!1,t.status="fullSelected",t.checked=!0,!e.isEmpty(t.children)){var a=e.find(t.children,(function(e){return"desc"===e.type}));e.isEmpty(a)?t.children=i.patch(t.children):t.children=[]}return t}))},mergeArray:function(t,i){var a=this;return e.map(t,(function(t){var s=i[t.id];if(e.isEmpty(s)?(t.isOpen=!1,t.status=null,t.checked=!1):(t.isOpen=s.isOpen,t.status=s.status,t.checked=s.checked),!e.isEmpty(t.children)){var n=e.find(t.children,(function(e){return"desc"===e.type}));e.isEmpty(n)?t.children=a.mergeArray(t.children,i):t.children=[]}return t}))}}}}).call(this,i("391c"))},"662c":function(e,t,i){"use strict";i.r(t);var a=i("4b54").a,s=(i("9244"),i("17cc")),n=Object(s.a)(a,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("page-content",{attrs:{title:e.title,"show-go-root":""}},["templet-plan-v2"===e.moduleCode||e.id?e._e():i("check-guide",{attrs:{slot:"header-bar-right","item-id":e.processParams.checkItemId},slot:"header-bar-right"}),e.isLoading?e._e():i("scroller",{staticClass:"page-scroll"},[e.commonParms.status||e.hasDraft?i("div",{staticClass:"status-tag"},[i("div",{staticClass:"tag",class:e.bgClass[e.hasDraft?"草稿":e.commonParms.status]},[e._v("\n        "+e._s(e.hasDraft?"草稿":e.commonParms.status)+"\n      ")])]):e._e(),i("div",{staticClass:"mb10"},[e.processFieldShow&&e.commonParms.status?i("item",{attrs:{label:"项目",text:e.projName,mode:e.id?"view":"edit",editable:!1}}):e._e(),"templet-plan-v2"===e.moduleCode?i("item",{attrs:{label:"样板",text:e.templetParams.planName+"-"+e.templetParams.templetName,mode:e.id?"view":"edit",editable:!1}}):e._e(),e.processFieldShow?i("item",{staticClass:"check-text",class:{"chick-item":!e.commonParms.status},attrs:{label:"检查项",mode:e.id?"view":"edit",editable:!1}},[i("div",{staticClass:"item-text",class:{"align-r":!e.commonParms.status},attrs:{slot:"right"},slot:"right"},[e._v("\n          "+e._s(e.processParams.checkItem.full_name)+"\n          "),"process"===e.moduleCode&&e.commonParms.status&&"一般"!==e.processParams.emergency_degree?i("i",{staticClass:"font"},[e._v(e._s(e.emergencyDegree))]):e._e()])]):e._e(),e.processFieldShow&&!e.id&&90!==e.processParams.deliverType&&e.allowSelectPlace?i("place-select",{ref:"checkEditPlaceSelect",attrs:{title:"部位",options:e.processParams.roomData,selected:e.processParams.place,"selected-text":e.processParams.place&&e.processParams.place.full_name,"search-bar":!1,"has-batch":!1,"before-confirm":e.beforeConfirmPlace},on:{onSelect:e.selectPlace}},[i("div",{staticClass:"item-label",attrs:{slot:"title"},slot:"title"},[e._v("\n          部位\n          "),e.processParams.place_point.length>0?i("span",{staticClass:"icon-huxing-mark ml10",on:{click:function(t){t.stopPropagation(),e.showHuxingMark(null,null)}}},[e._v("\n            图\n          ")]):e._e()])]):e._e(),e.processFieldShow&&!e.id&&90===e.processParams.deliverType?i("item",{staticClass:"border-bottom"},[i("div",{staticClass:"item-label",attrs:{slot:"left"},slot:"left"},[e._v("\n          部位\n          "),e.allowSelectPlace?i("span",{staticClass:"icon-huxing-mark ml10",on:{click:e.markPoints}},[e._v("图")]):e._e()]),i("div",{staticClass:"item-text align-r",attrs:{slot:"right"},slot:"right"},[e._v("\n          "+e._s(e.processParams.place&&e.processParams.place.full_name||"")+"\n        ")])]):e._e(),e.processFieldShow&&e.processParams.place&&6===e.processParams.deliverType&&!e.id?i("item",{attrs:{label:"部位",mode:"edit",editable:!1}},[i("div",{staticClass:"item-text align-r",attrs:{slot:"right"},slot:"right"},[e._v("\n          "+e._s(e.processParams.place)+"\n\n        ")])]):e._e(),e.processFieldShow&&e.processParams.place&&e.id?i("item",{attrs:{label:"部位"}},[i("div",{staticClass:"item-text",attrs:{slot:"right"},slot:"right"},[e._v("\n          "+e._s(e.processParams.place)+"\n          "),e.processParams.place_point.length?i("span",{staticClass:"icon-huxing-mark ml10",on:{click:function(t){e.showHuxingMark()}}},[e._v("图")]):e._e()])]):e._e(),e.processFieldShow&&!e.id&&e.descriptionData&&e.descriptionData.length?i("single-select",{attrs:{title:"描述",options:e.descriptionData,"line-limit":"unlimited"},on:{onSelect:e.selectDesc},model:{value:e.processParams.description,callback:function(t){e.$set(e.processParams,"description",t)},expression:"processParams.description"}}):e._e(),e.processFieldShow&&e.id&&e.processParams.description.id?i("item",{attrs:{label:"描述"}},[i("div",{staticClass:"item-text",attrs:{slot:"right"},slot:"right"},[i("p",[e._v(e._s(e.processParams.description.name))])])]):e._e(),e.id?e._e():[i("item",{staticClass:"p15 van-hairline--bottom"},[i("item-img-list",{attrs:{maxlength:"templet-plan-v2"===e.moduleCode?3:15,"online-mode":!0},model:{value:e.commonParms.image_file,callback:function(t){e.$set(e.commonParms,"image_file",t)},expression:"commonParms.image_file"}})],1),i("item-textarea",{attrs:{placeholder:"补充说明"},model:{value:e.commonParms.remark,callback:function(t){e.$set(e.commonParms,"remark",t)},expression:"commonParms.remark"}})],e.id?[i("item",{attrs:{label:"问题照片"}},[i("div",{staticClass:"item-con",attrs:{slot:"right"},slot:"right"},[i("item-img-list",{attrs:{editabled:!1},model:{value:e.commonParms.image_file,callback:function(t){e.$set(e.commonParms,"image_file",t)},expression:"commonParms.image_file"}})],1)]),e.commonParms.remark?i("item",{attrs:{label:"补充说明",text:e.commonParms.remark,mode:"view"}}):e._e()]:e._e(),e.id?i("user-select",{attrs:{title:"提交人",editabled:!1,mode:"view"},model:{value:e.commonParms.regist,callback:function(t){e.$set(e.commonParms,"regist",t)},expression:"commonParms.regist"}}):e._e(),e.id?i("item",{attrs:{label:"提交时间",text:e._f("formatDate")(e.commonParms.regist_date),mode:"view"}}):e._e()],2),i("div",{staticClass:"mb10"},["process"!==e.moduleCode||e.id?e._e():i("item",{staticClass:"emergency-field",attrs:{label:"严重程度",mode:"edit"}},[i("div",{staticClass:"item-con",attrs:{slot:"right"},slot:"right"},[i("radio-box",{attrs:{options:e.emergencyOptions},model:{value:e.processParams.emergency_degree,callback:function(t){e.$set(e.processParams,"emergency_degree",t)},expression:"processParams.emergency_degree"}})],1)]),i("single-select",{attrs:{required:!0,"if-toggle":!0,title:"责任单位",mode:e.id?"view":"edit",options:e.contractorOptions,editabled:e.allowChangeContractor},on:{onSelect:e.changeContractor},model:{value:e.commonParms.contractor,callback:function(t){e.$set(e.commonParms,"contractor",t)},expression:"commonParms.contractor"}}),i("user-select",{attrs:{required:!0,title:"整改人",multi:!1,options:e.repairOptions,memory:!0,mode:e.id?"view":"edit",editabled:e.allowChangeRepair,"before-select":e.beforeChangeRepair},on:{onSelect:e.changeRepair},model:{value:e.commonParms.repair,callback:function(t){e.$set(e.commonParms,"repair",t)},expression:"commonParms.repair"}}),e.id&&e.commonParms.repair_date?i("item",{attrs:{label:"整改时间",text:e._f("formatDate")(e.commonParms.repair_date),mode:"view"}}):e._e(),e.id?e._e():i("item",{attrs:{label:"整改期限",mode:"edit"}},[i("template",{slot:"right"},[i("div",{staticClass:"item-con align-r"},[i("app-stepper",{staticClass:"date",attrs:{max:"999"},model:{value:e.commonParms.deadline,callback:function(t){e.$set(e.commonParms,"deadline",t)},expression:"commonParms.deadline"}})],1),i("div",{staticClass:"item-font ml5"},[e._v("天")])])],2),e.id&&e.allowChangeRepairDeadline?i("item",{attrs:{label:"整改期限",text:e._f("formatDate")(e.commonParms.repair_deadline,"YYYY-MM-DD"),editabled:e.allowChangeRepairDeadline},on:{click:e.selectDeadline}}):e._e(),e.id&&!e.allowChangeRepairDeadline?i("item",{staticClass:"repair-deadline",attrs:{label:"整改期限"}},[i("div",{staticClass:"item-text",attrs:{slot:"right"},slot:"right"},[e._v(e._s(e._f("formatDate")(e.commonParms.repair_deadline,"YYYY-MM-DD"))),e.commonParms.is_timeout?i("i",{staticClass:"font"},[e._v("超")]):e._e()])]):e._e(),e.allowRepair?e._e():[e.commonParms.repair_image_file.length?i("item",{attrs:{label:"整改照片"}},[i("div",{staticClass:"item-con",attrs:{slot:"right"},slot:"right"},[i("item-img-list",{attrs:{editabled:!1},model:{value:e.commonParms.repair_image_file,callback:function(t){e.$set(e.commonParms,"repair_image_file",t)},expression:"commonParms.repair_image_file"}})],1)]):e._e(),e.commonParms.repair_remark?i("item",{attrs:{label:"整改补充说明",text:e.commonParms.repair_remark}}):e._e()],e.allowRepair?[i("item",{attrs:{label:"整改照片"}},[i("div",{staticClass:"item-con",attrs:{slot:"right"},slot:"right"},[i("item-img-list",{attrs:{maxlength:15},model:{value:e.commonParms.repair_image_file,callback:function(t){e.$set(e.commonParms,"repair_image_file",t)},expression:"commonParms.repair_image_file"}})],1)]),i("item-textarea",{staticClass:"border-tb",attrs:{placeholder:"整改补充说明（选填）"},model:{value:e.commonParms.repair_remark,callback:function(t){e.$set(e.commonParms,"repair_remark",t)},expression:"commonParms.repair_remark"}})]:e._e()],2),i("div",{staticClass:"mb10"},[i("user-select",{attrs:{required:!0,title:"复验人",mode:e.id?"view":"edit",multi:!1,options:e.reinspectOptions,memory:!0,editabled:e.allowChangeReinspect,"before-select":e.beforeChangeReinspect},on:{onSelect:e.changeReinspect},model:{value:e.commonParms.reinspect,callback:function(t){e.$set(e.commonParms,"reinspect",t)},expression:"commonParms.reinspect"}}),e.allowReinspectPassAndReject&&!e.processFieldShow?[i("item",{attrs:{label:"复验照片"}},[i("div",{staticClass:"item-con",attrs:{slot:"right"},slot:"right"},[i("item-img-list",{attrs:{maxlength:15},model:{value:e.commonParms.reinspect_image_file,callback:function(t){e.$set(e.commonParms,"reinspect_image_file",t)},expression:"commonParms.reinspect_image_file"}})],1)]),i("item-textarea",{staticClass:"border-tb",attrs:{placeholder:"复验补充说明（选填）"},model:{value:e.commonParms.reinspect_remark,callback:function(t){e.$set(e.commonParms,"reinspect_remark",t)},expression:"commonParms.reinspect_remark"}})]:e._e(),"待复验"!==e.commonParms.status?[e.id&&e.commonParms.reinspect_date?i("item",{attrs:{label:"复验时间",text:e._f("formatDate")(e.commonParms.reinspect_date),mode:"view"}}):e._e(),e.commonParms.reinspect_image_file.length?i("item",{attrs:{label:"复验照片"}},[i("div",{staticClass:"item-con",attrs:{slot:"right"},slot:"right"},[i("item-img-list",{attrs:{editabled:!1},model:{value:e.commonParms.reinspect_image_file,callback:function(t){e.$set(e.commonParms,"reinspect_image_file",t)},expression:"commonParms.reinspect_image_file"}})],1)]):e._e(),e.commonParms.reinspect_remark&&!e.processFieldShow?i("item",{attrs:{label:"复验补充说明",text:e.commonParms.reinspect_remark}}):e._e()]:e._e(),e.commonParms.sent_back_remark?i("item",{attrs:{label:"退回原因"}},[i("div",{staticClass:"item-con",attrs:{slot:"right"},slot:"right"},[e.commonParms.sent_back_remark?i("div",{staticClass:"item-font"},[e._v("\n            "+e._s(e.commonParms.sent_back_remark)+"\n          ")]):e._e(),e.commonParms.sent_back_image_file.length?i("item-img-list",{attrs:{editabled:!1},model:{value:e.commonParms.sent_back_image_file,callback:function(t){e.$set(e.commonParms,"sent_back_image_file",t)},expression:"commonParms.sent_back_image_file"}}):e._e()],1)]):e._e()],2),i("div",{staticClass:"mb10"},[e.commonParms.close_date?i("item",{attrs:{label:"关闭时间",text:e._f("formatDate")(e.commonParms.close_date)}}):e._e(),e.commonParms.close_reason?i("item",{attrs:{label:"关闭原因",text:e.commonParms.close_reason}}):e._e(),i("user-select",{attrs:{title:"抄送人",mode:e.id?"view":"edit",multi:!0,options:e.ccOptions,editabled:e.allowChangeCc},on:{onSelect:e.changeCc},model:{value:e.commonParms.cc,callback:function(t){e.$set(e.commonParms,"cc",t)},expression:"commonParms.cc"}}),e.hasDraft?i("app-button-group",[i("app-button",{attrs:{type:"text",name:"删除此草稿"},on:{click:function(t){e.delProblem()}}})],1):e._e()],1),i("app-button-group",{attrs:{direction:"column"}},[e.allowRepair?i("app-button",{on:{click:e.repairSubmit}},[e._v("\n        完成整改\n      ")]):e._e(),e.allowClose?i("app-button",{attrs:{type:"warning",rimless:"",plain:""},on:{click:e.close}},[e._v("\n        非正常关闭\n      ")]):e._e()],1)],1),e.isLoading||e.id?e._e():i("app-button-group",{attrs:{"fixed-bottom":"",seamless:""}},[i("app-button",{staticStyle:{width:"50%"},attrs:{plain:""},on:{click:e.save}},[e._v("\n      暂存\n    ")]),i("app-button",{on:{click:e.addProblem}},[e._v("提交")])],1),!e.isLoading&&e.allowReinspectPassAndReject?i("app-button-group",{attrs:{"fixed-bottom":"",seamless:""}},[i("app-button",{staticStyle:{width:"50%"},attrs:{plain:""},on:{click:e.back}},[e._v("\n      退回\n    ")]),i("app-button",{on:{click:e.reinspect}},[e._v("通过")])],1):e._e(),i("loading-status",{attrs:{"is-loading":e.isLoading}})],1)}),[],!1,null,"871f52b2",null);t.default=n.exports},6948:function(e,t,i){"use strict";i("2b45"),i("163d");var a=i("329b"),s=i("8c3d").a,n=(i("b55a"),i("17cc")),r=Object(n.a)(s,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("transition",{attrs:{name:"slide-up"},on:{leave:e.startClose,afterLeave:e.onClose}},[e.show?i("div",{staticClass:"number-keyboard-con",class:{"ios-bezel-less":e.isIOSBezelLess},style:{"z-index":e.zIndex},on:{touchstart:e.keyTouchstart,touchend:e.keyTouchend}},["true-or-false"===e.type?[i("div",{staticClass:"keyboard-row"},[i("div",{staticClass:"row-span-3 keys-row"},[i("div",{staticClass:"keys col color-green",attrs:{direct:"setTure"}},[i("icon",{attrs:{name:"qualified"}}),e._v("\n            合格\n          ")],1),i("div",{staticClass:"keys col color-red",attrs:{direct:"setFalse"}},[i("icon",{attrs:{name:"unqualified"}}),e._v("\n            不合格\n          ")],1)]),i("div",{staticClass:"row-span-1"},[i("div",{staticClass:"keys-row"},[i("div",{staticClass:"keys keys-ok",attrs:{direct:"closeKeyboard"}},[i("icon",{attrs:{name:"keyboard-close"}})],1)]),i("div",{staticClass:"keys-row"},[i("div",{staticClass:"keys keys-delete",attrs:{direct:"delete"}},[i("icon",{attrs:{name:"keyboard-delete"}})],1)])])]),i("div",{staticClass:"keyboard-row"},[i("div",{staticClass:"keys keys-prev",class:{disabled:!e.hasPrev},attrs:{direct:"prev"}},[e._v("\n          上一项\n        ")]),i("div",{staticClass:"keys keys-next",class:{disabled:!e.hasNext},attrs:{direct:"next"}},[e._v("\n          下一项\n        ")])])]:[i("div",{staticClass:"keyboard-row"},[i("div",{staticClass:"keys",attrs:{direct:"1"}},[e._v("1")]),i("div",{staticClass:"keys",attrs:{direct:"2"}},[e._v("2")]),i("div",{staticClass:"keys",attrs:{direct:"3"}},[e._v("3")]),i("div",{staticClass:"keys keys-ok",attrs:{direct:"closeKeyboard"}},[i("icon",{attrs:{name:"keyboard-close"}})],1)]),i("div",{staticClass:"keyboard-row"},[i("div",{staticClass:"keys",attrs:{direct:"4"}},[e._v("4")]),i("div",{staticClass:"keys",attrs:{direct:"5"}},[e._v("5")]),i("div",{staticClass:"keys",attrs:{direct:"6"}},[e._v("6")]),i("div",{staticClass:"keys keys-delete",attrs:{direct:"delete"}},[i("icon",{attrs:{name:"keyboard-delete"}})],1)]),i("div",{staticClass:"keyboard-row"},[i("div",{staticClass:"keys",attrs:{direct:"7"}},[e._v("7")]),i("div",{staticClass:"keys",attrs:{direct:"8"}},[e._v("8")]),i("div",{staticClass:"keys",attrs:{direct:"9"}},[e._v("9")]),i("div",{staticClass:"keys keys-prev",class:{disabled:!e.hasPrev},attrs:{direct:"prev"}},[e._v("\n          上一项\n        ")])]),i("div",{staticClass:"keyboard-row"},[i("div",{staticClass:"keys",class:{disabled:e.isDisabledMinus},attrs:{direct:"-"}},[e._v("-")]),i("div",{staticClass:"keys",attrs:{direct:"0"}},[e._v("0")]),i("div",{staticClass:"keys",class:{disabled:e.isDisabledPoint},attrs:{direct:"."}},[e._v(".")]),i("div",{staticClass:"keys keys-next",class:{disabled:!e.hasNext},attrs:{direct:"next"}},[e._v("\n          下一项\n        ")])])]],2):e._e()])}),[],!1,null,"6337f428",null).exports,o=!1;o||(o=new(a.default.extend(r))({el:document.createElement("div")}),document.body.appendChild(o.$el));var c=o,l=i("6f9e"),d=i("4360"),u={name:"NumberInput",props:{value:{type:[String,Number]},type:{type:String,default:"all"},decimal:{type:Number,default:2},placeholder:{type:String,default:""},nextEvent:{type:Function},range:{type:Array,default:function(){return[]}},overflowAutoRecover:{type:Boolean,default:!1},required:{type:Boolean},emptyAutoRecover:{type:Boolean,default:!0},disabled:{type:Boolean,default:!1},isSetEmptyTip:{type:Boolean,default:!1}},data:function(){return{rawValue:"",isFocusing:!1,isSelectAll:!1,keyboardHeight:d.a.state.app.isIOSBezelLess?266:"true-or-false"===this.type?176:232}},computed:{min:function(){return isNaN(this.range[0])?-1/0:parseFloat(this.range[0])},max:function(){return isNaN(this.range[1])?1/0:parseFloat(this.range[1])}},created:function(){l.a.$on("numberInputBlur",this.setBlur),l.a.$on("numberKeyboardClose",this.setBlur)},beforeDestroy:function(){this.isFocusing&&c.closeKeyboard()},destroyed:function(){l.a.$off("numberInputBlur",this.setBlur),l.a.$off("numberKeyboardClose",this.setBlur)},methods:{hasVal:function(e){return null!=e&&""!==e},openKeyboard:function(){this.disabled||(this.isFocusing?this.isSelectAll=!1:(l.a.$emit("numberInputBlur"),this.setFocus(),c.openKeyboard({inputComponent:this})))},setFocus:function(){this.isFocusing=!0,"true-or-false"!==this.type&&(this.isSelectAll=!0),this.rawValue=this.value,c.$on("keyboardInput",this.input),c.$on("keyboardAssign",this.assign),c.$on("keyboardDelete",this.deleteValue),c.$on("keyboardClear",this.clear),this.$emit("focus")},setBlur:function(){if(this.isFocusing){var e=this.checkValue();this.isFocusing=!1,this.isSelectAll=!1,c.$off("keyboardInput",this.input),c.$off("keyboardAssign",this.assign),c.$off("keyboardDelete",this.deleteValue),c.$off("keyboardClear",this.clear),this.$emit("input",e),this.$emit("blur",e),this.$nextTick((function(){c.calcTab()}))}},input:function(e){var t=this.hasVal(this.value)?this.value.toString():"",i="";this.isSelectAll?(i=e,this.isSelectAll=!1):i=t+e,console.log("newValue =====",i),this.$emit("input",i),c.setKeysStatus(i,this.type)},assign:function(e){this.isSelectAll=!1,this.$emit("input",e),c.setKeysStatus(e,this.type)},deleteValue:function(){var e=this.hasVal(this.value)?this.value.toString():"",t="";this.hasVal(e)&&(t=this.isSelectAll?"":e.substr(0,e.length-1)),this.$emit("input",t),c.setKeysStatus(t,this.type)},clear:function(){this.$emit("input",""),c.setKeysStatus("",this.type)},checkValue:function(){var e=this.hasVal(this.value)?this.value.toString():"";"-"===e&&(e=""),"."===e.substr(-1)&&(e=e.substr(0,e.length-1));var t=e.indexOf(".");return t>0&&(e=parseFloat(e.substring(0,t+this.decimal+1))),e=parseFloat(e),isNaN(e)?this.required&&this.emptyAutoRecover?(e=this.rawValue,this.$emit("onEmpty")):e="":(e<this.min&&(e=this.overflowAutoRecover?this.rawValue:this.min,this.$emit("overflowRange")),e>this.max&&(e=this.overflowAutoRecover?this.rawValue:this.max,this.$emit("overflowRange"))),e}}},p=(i("6abe"),Object(n.a)(u,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"number-input component-number-input",class:{"number-input-focus":e.isFocusing,"number-input-empty":e.isSetEmptyTip&&!e.value&&!e.isFocusing,"number-input-select-all":e.isSelectAll,qualified:"true-or-false"===e.type&&1===e.value,unqualified:"true-or-false"===e.type&&0===e.value}},[i("div",{staticClass:"text",class:{disabled:e.disabled},on:{click:function(t){return t.stopPropagation(),e.openKeyboard(t)}}},[e.hasVal(e.value)?i("span",{staticClass:"value"},[i("span",{staticClass:"value-handle"},[e._v(e._s("true-or-false"===e.type?1===e.value?"合格":"不合格":e.value))])]):i("span",{staticClass:"placeholder"},[e._v("\n      "+e._s(e.placeholder)+"\n    ")])]),e._t("extend")],2)}),[],!1,null,"74068386",null));t.a=p.exports},"6abe":function(e,t,i){"use strict";i("bebe")},7434:function(e,t,i){var a=i("0cb6");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);(0,i("85cb").default)("f6a1180a",a,!0,{sourceMap:!1,shadowMode:!1})},"75b9":function(e,t,i){var a=i("e5a0");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);(0,i("85cb").default)("417e698a",a,!0,{sourceMap:!1,shadowMode:!1})},"75ca":function(e,t,i){"use strict";var a=i("329b"),s=i("3480").a,n=(i("d6fa"),i("17cc")),r=Object(n.a)(s,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("transition",{attrs:{name:"slide-right"}},[e.show?i("page-content",{attrs:{mode:"dialog",title:(e.multiple?"":"选择")+"退回原因","on-close":e.closePopup}},[e.multiple?e._e():i("div",[i("div",{staticClass:"list"},e._l(e.reasonList,(function(t,a){return i("item",{key:a,attrs:{mode:"edit","icon-right":t.id===e.reason.id?"qualified":"","icon-right-color":"color-theme"},on:{click:function(i){e.selectItem(t)}}},[i("div",{staticClass:"item-text"},[e._v("\n            "+e._s(t.text)+"\n          ")])])}))),i("item-textarea",{staticClass:"mt10",attrs:{placeholder:e.placeholder},model:{value:e.remark,callback:function(t){e.remark=t},expression:"remark"}}),i("item",{staticClass:"p15"},[i("item-img-list",{attrs:{maxlength:15,"allow-select-album":e.allowSelectAlbum,"allow-buildin-album":e.allowBuildinAlbum},model:{value:e.images,callback:function(t){e.images=t},expression:"images"}})],1),i("app-button-group",[i("app-button",{on:{click:e.submit}},[e._v("提交")])],1)],1),e.multiple?i("div",[i("div",{staticClass:"list"},e._l(e.reasonList,(function(t,a){return i("item",{key:a,attrs:{mode:"edit","icon-back":e.isBack,"icon-left":t.checked?"qualified":""},on:{click:function(i){e.selectItem(t)}}},[i("div",{staticClass:"item-text"},[e._v("\n            "+e._s(t.text)+"\n          ")])])}))),i("div",{staticClass:"list mt10"},[i("item",{staticClass:"p15"},[i("item-img-list",{attrs:{maxlength:15,"allow-select-album":e.allowSelectAlbum,"allow-buildin-album":e.allowBuildinAlbum},model:{value:e.images,callback:function(t){e.images=t},expression:"images"}})],1),i("item-textarea",{staticClass:"mt10",attrs:{placeholder:e.placeholder},model:{value:e.remark,callback:function(t){e.remark=t},expression:"remark"}})],1),i("app-button-group",[i("app-button",{on:{click:e.submit}},[e._v("确认退回")])],1)],1):e._e()]):e._e()],1)}),[],!1,null,"29e0b631",null).exports,o=!1;o||(o=new(a.default.extend(r))({el:document.createElement("div")}),document.body.appendChild(o.$el));t.a=o},"7ab6":function(e,t,i){"use strict";var a=i("d1f2").a,s=i("17cc"),n=Object(s.a)(a,(function(){var e=this,t=e.$createElement;return(e._self._c||t)("item",{attrs:{label:e.title,text:e.hasSelected?e.selectedText:"",mode:e.mode,editabled:e.editabled,"item-calss":e.selectClass,"form-check":e.formCheck},on:{click:e.onClick}})}),[],!1,null,null,null);t.a=n.exports},"7b10":function(e,t,i){"use strict";var a=i("329b"),s=i("b5c6").a,n=(i("53a4"),i("17cc")),r=Object(n.a)(s,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("transition",{attrs:{name:"slide-right"}},[e.show?i("page-content",{attrs:{"show-go-back":!1,mode:"dialog",title:"设置可见的检查项","on-close":e.closePopup}},[i("div",{staticClass:"set-usual-items-header",attrs:{slot:"header-bar-left"},on:{click:e.closePopup},slot:"header-bar-left"},[e._v("取消")]),i("div",{staticClass:"set-usual-items-header",attrs:{slot:"header-bar-right"},on:{click:e.save},slot:"header-bar-right"},[e._v("保存")]),e.isLoading?e._e():i("div",{staticClass:"page-scroll"},[e.mmkvItemTips?i("div",{staticClass:"set-view-tip"},[e._v("\n        若不显示该检查项，请取消勾选\n        "),i("icon",{attrs:{name:"nav-close"},on:{click:function(t){e.closeTip()}}})],1):e._e(),i("tree",{attrs:{data:e.checkItems,"is-checkbox":!0},on:{onSelect:e.onSelect}}),i("loading-status",{attrs:{"is-empty":!e.checkItems.length,"empty-text":"没有检查项"}})],1),i("loading-status",{attrs:{"is-loading":e.isLoading}})],1):e._e()],1)}),[],!1,null,"5cfe259f",null).exports,o=!1;o||(o=new(a.default.extend(r))({el:document.createElement("div")}),document.body.appendChild(o.$el));t.a=o},"7fc0":function(e,t,i){"use strict";i.d(t,"g",(function(){return r})),i.d(t,"d",(function(){return o})),i.d(t,"e",(function(){return c})),i.d(t,"f",(function(){return l})),i.d(t,"k",(function(){return d})),i.d(t,"a",(function(){return u})),i.d(t,"c",(function(){return p})),i.d(t,"i",(function(){return h})),i.d(t,"h",(function(){return m})),i.d(t,"j",(function(){return f})),i.d(t,"l",(function(){return g})),i.d(t,"b",(function(){return b}));var a=i("5e8d"),s=i("162a"),n=i("bcc78");function r(e){return Object(a.a)().then((function(){var t=n.a.problemList.url;return s.a.request(t,e)}))}function o(e,t){return Object(a.a)().then((function(){return s.a.request(e,t)}))}function c(e,t){return Object(a.a)().then((function(){return s.a.request(e,t)}))}function l(e){return Object(a.a)().then((function(){var t=n.a.problemInfo.url;return s.a.request(t,e)}))}function d(e){return Object(a.a)().then((function(){var t=n.a.problemCreate.url;return s.a.post(t,null,e)}))}function u(e){return Object(a.a)().then((function(){var t=n.a.problemChangeCc.url;return s.a.post(t,null,e)}))}function p(e){return Object(a.a)().then((function(){var t=n.a.problemClose.url;return s.a.post(t,null,e)}))}function h(e){return Object(a.a)().then((function(){var t=n.a.problemRepair.url;return s.a.post(t,null,e)}))}function m(e){return Object(a.a)().then((function(){var t=n.a.problemReinspect.url;return s.a.post(t,null,e)}))}function f(e){return Object(a.a)().then((function(){var t=n.a.problemSendBack.url;return s.a.post(t,null,e)}))}function g(e){return Object(a.a)().then((function(){var t=n.a.problemUpdateInfo.url;return s.a.post(t,null,e)}))}function b(e){return Object(a.a)().then((function(){var t=n.a.problemChangeUser.url;return s.a.post(t,null,e)}))}},"80d8":function(e,t,i){"use strict";i("e60b")},"81f2":function(e,t,i){(e.exports=i("690e")(!1)).push([e.i,'.zjapp .main[data-v-2cac8864]{position:fixed;width:100%;bottom:0}.zjapp .arrow[data-v-2cac8864]{position:absolute;top:-7px;right:18px;width:0;height:0;border-bottom:7px solid #fff;border-right:7px solid transparent;border-left:7px solid transparent}.zjapp .content[data-v-2cac8864]{position:absolute;top:0;left:0;width:100%;height:100%;background-color:rgba(0,0,0,.4);overflow:hidden}.zjapp .box[data-v-2cac8864]{display:flex;flex-direction:column;background-color:#fff;overflow:auto}.zjapp .box-single[data-v-2cac8864]{display:flex;flex-direction:column;flex:1}.zjapp .detail-hd[data-v-2cac8864]{display:flex;padding:6px 15px}.zjapp .detail-arrow-right[data-v-2cac8864]{width:13px;height:34px;overflow:hidden}.zjapp .detail-arrow-right[data-v-2cac8864]:before{display:block;content:"";width:0;height:0;margin-top:12px;border:5px solid transparent;border-left:5px solid #c8c8c8}.zjapp .detail-arrow-down[data-v-2cac8864]{width:13px;height:34px;overflow:hidden}.zjapp .detail-arrow-down[data-v-2cac8864]:before{display:block;content:"";width:0;height:0;margin-top:15px;border:5px solid transparent;border-top:5px solid #c8c8c8}.zjapp .detail-title[data-v-2cac8864]{flex:1;line-height:34px;color:#111;font-size:16px}.zjapp .detail-bd[data-v-2cac8864]{padding:8px 15px 8px 35px;background-color:#fafafa}.zjapp .text-line[data-v-2cac8864]{font-size:14px;color:#666;line-height:30px;margin-bottom:30px}.zjapp .detail-hd-single[data-v-2cac8864]{padding:6px 0;margin:0 15px}.zjapp .detail-bd-single[data-v-2cac8864]{display:flex;flex-direction:column;flex:1;padding:8px 15px;background-color:#fff}',""])},"84e5":function(e,t,i){"use strict";i("b155")},"8c3d":function(e,t,i){"use strict";(function(e){i("ed63"),i("163d"),i("2b45"),i("e204"),i("cc57");var a,s,n=i("07d2"),r=i("cf09"),o=i("6f9e"),c=i("4360"),l=[],d=[0,1,2,3,4,5,6,7,8,9,".","-"];function u(e){return null!=e&&""!==e}t.a={name:"NumberKeyboard",components:{Item:n.default},data:function(){return{show:!1,isClosing:!1,zIndex:0,willOpenParams:null,inputComponent:"",type:"",hasPrev:!1,hasNext:!1,isDisabledMinus:!1,isDisabledPoint:!1}},computed:{isIOSBezelLess:function(){return c.a.state.app.isIOSBezelLess}},watch:{isClosing:function(e){var t=this;this.$nextTick((function(){!e&&t.willOpenParams&&t.openKeyboard(t.willOpenParams)}))}},created:function(){o.a.$on("routerBeforeEach",this.closeKeyboard),o.a.$on("pageContentClick",this.closeKeyboard)},destroyed:function(){o.a.$off("routerBeforeEach",this.closeKeyboard),o.a.$off("pageContentClick",this.closeKeyboard)},methods:{openKeyboard:function(e){this.isClosing?this.willOpenParams=e:(this.willOpenParams=null,this.show=!0,this.inputComponent=e.inputComponent,this.zIndex=r.a?++r.a.zIndex:1,c.a.commit("global/SET_IS_NUMBER_INPUT_OPEN",!0),c.a.commit("global/SET_NUMBER_KEYBOARD_HEIGHT",c.a.state.app.isIOSBezelLess?266:"true-or-false"===this.inputComponent.type?176:232),this.calcTab(),this.type=this.inputComponent.type,this.setKeysStatus(this.inputComponent.value,this.inputComponent.type),o.a.$emit("numberKeyboardOpen",this.inputComponent))},closeKeyboard:function(){this.show=!1,o.a.$emit("numberKeyboardClose")},startClose:function(){this.isClosing=!0},onClose:function(){this.isClosing=!1,c.a.commit("global/SET_IS_NUMBER_INPUT_OPEN",!1),o.a.$emit("afterNumberKeyboardClose")},input:function(e){"-"===e&&this.isDisabledMinus||"."===e&&this.isDisabledPoint||this.$emit("keyboardInput",e)},delete:function(e){var t=this;this.$emit("keyboardDelete"),a=setTimeout((function(){t.$emit("keyboardClear")}),500)},calcTab:function(){var t=function e(t){return t&&t.$parent?"Scroller"===t.$parent.$options.name?t.$parent:e(t.$parent):null}(this.inputComponent),i=t&&t.$el.querySelectorAll(".component-number-input");if(l=[],i&&e.each(i,(function(e){l.push(e.__vue__)})),e.isEmpty(l))this.hasPrev=!1,this.hasNext=!1;else{var a=e.findIndex(l,this.inputComponent);this.hasPrev=a>0,this.hasNext=a<l.length-1}this.inputComponent&&this.inputComponent.nextEvent&&(this.hasNext=!0)},prev:function(){var t=e.findIndex(l,this.inputComponent),i=l[t-1];i&&(o.a.$emit("numberInputBlur"),i.setFocus(),this.openKeyboard({inputComponent:i}))},next:function(){var t=e.findIndex(l,this.inputComponent),i=l[t+1];i?(o.a.$emit("numberInputBlur"),i.setFocus(),this.openKeyboard({inputComponent:i})):this.inputComponent&&this.inputComponent.nextEvent&&this.inputComponent.nextEvent()},setTure:function(){this.$emit("keyboardAssign",1)},setFalse:function(){this.$emit("keyboardAssign",0)},setKeysStatus:function(e,t){e=u(e)?e.toString():"",u(e)||t.indexOf("positive")>=0?this.isDisabledMinus=!0:this.isDisabledMinus=!1,!/\d/.test(e)||e.indexOf(".")>=0||t.indexOf("int")>=0?this.isDisabledPoint=!0:this.isDisabledPoint=!1},setKeyActiving:function(e,t){e&&e.classList.contains("keys")&&!e.classList.contains("disabled")&&(t?e.classList.add("activing"):e.classList.remove("activing"))},keyTouchstart:function(e){var t=e&&e.target;if(t){+new Date,s=t,this.setKeyActiving(t,!0);var i=t.getAttribute("direct");"closeKeyboard"!==i&&this.clickHandler(i)}},keyTouchend:function(e){var t=e&&e.target;if(t){this.setKeyActiving(t,!1),this.setKeyActiving(s,!1);var i=t.getAttribute("direct");"delete"===i?clearTimeout(a):"closeKeyboard"===i&&this.clickHandler(i)}},clickHandler:function(e){e&&(isNaN(e)||(e=Number(e)),"function"==typeof this[e]?this[e]():d.includes(e)&&this.input(e))}}}}).call(this,i("391c"))},9120:function(e,t,i){var a=i("2ddb");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);(0,i("85cb").default)("cb55f532",a,!0,{sourceMap:!1,shadowMode:!1})},"91c1":function(e,t,i){"use strict";(function(e){i("5ab2"),i("6d57"),i("e10e"),i("9a33");var a=i("28f8"),s=i("e68e"),n=i("6f9e"),r=i("bcc7"),o=i("e89f");function c(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,a)}return i}function l(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?c(Object(i),!0).forEach((function(t){Object(a.a)(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):c(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}t.a={name:"CheckGuideDetailDrop",components:{ItemImgList:s.a},mixins:[o.a],data:function(){return{show:!1,showList:!1,isLoading:!1,isOpening:!1,isClosing:!1,contentTop:64,listHeight:510,module:"",itemIds:[],data:[],target:""}},watch:{show:function(e){var t=this;e&&this.$nextTick((function(){t.showList=!0}))}},created:function(){n.a.$on("routerBeforeEach",this.closePopup),n.a.$on("pageContentClick",this.onClickOther)},destroyed:function(){n.a.$off("routerBeforeEach",this.closePopup),n.a.$off("pageContentClick",this.onClickOther)},methods:{openPopup:function(t){this.show=!0,this.$emit("open"),this.module=t.module,this.itemIds=t.itemIds,this.options=t.options;var i=document.querySelector(".layout-main .layout-header");if(this.contentTop=i.offsetHeight,t.el){var a=t.el.getBoundingClientRect();this.contentTop=a.bottom}this.target=t.el,this.listHeight=e.minBy([window.innerHeight-this.contentTop-50,510]),this.getData()},closePopup:function(){var e=this;if(!this.isOpening)return this.showList=!1,this.$emit("close"),new Promise((function(t){e.$on("afterClosePopup",t)}))},afterClose:function(){this.show=!1,this.isClosing=!1,this.$emit("afterClosePopup")},onClickOther:function(e){e&&e.target&&e.target!==this.target&&this.show&&this.closePopup()},getData:function(){var t=this;return this.options&&this.options.length?(this.data=e.map(this.options,(function(e){return l(l({},e),{},{isOpen:!1})})),Promise.resolve()):r.a.getMeasureCheckItem(this.itemIds).then((function(i){t.data=e.map(i,(function(t){var i=t.content?t.content.trim():"",a=i?i.split("\n"):[],s=t.content_image?JSON.parse(t.content_image):[],n=e.filter(a,(function(e){return!/<img([\s\S]*)>/gm.test(e)}));return e.each(s,(function(e){e.url=e.url.split("@")[0]})),{id:t.id,name:t.full_name,textArr:n,contentImage:s,isOpen:!1}}))})).catch((function(e){console.error(e)}))},toggleItem:function(e){this.data.length>1&&this.$set(e,"isOpen",!e.isOpen)}}}}).call(this,i("391c"))},"91cb":function(e,t,i){"use strict";i("c82d")},9244:function(e,t,i){"use strict";i("e433")},9446:function(e,t,i){var a=i("2dd6");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);(0,i("85cb").default)("2192cd00",a,!0,{sourceMap:!1,shadowMode:!1})},9788:function(e,t,i){"use strict";i("9446")},"992a":function(e,t,i){"use strict";(function(e){var a=i("07d2"),s=i("2464");t.a={name:"MultiSearchSelect",components:{Item:a.default},props:{title:{type:String,default:""},mode:{type:String,default:"edit"},projectId:{type:String,default:""},selectClass:{type:[String,Object],default:""},searchBar:{type:Boolean,default:!0},hasBatch:{type:Boolean,default:!0},options:{type:Array,default:function(){return[]}},selected:{type:Object,default:function(){return{}}},selectedText:{type:String},getOptionsPromise:{type:Function,default:function(){}},beforeConfirm:{type:Function,default:function(){}},floorIsId:{type:Boolean,default:!0},placeholder:{type:String,default:"请选择"},formCheck:{type:Boolean,default:!1}},data:function(){return{}},computed:{hasSelected:function(){return!e.isEmpty(this.selected)}},methods:{open:function(){var e=this;s.a.openPopup({title:"选择"+this.title,getOptionsPromise:this.getOptionsPromise,selected:this.selected,options:this.options,projectId:this.projectId,searchBar:this.searchBar,hasBatch:this.hasBatch,beforeConfirm:this.beforeConfirm,floorIsId:this.floorIsId,callback:function(t){e.$emit("onSelect",t)}})},close:function(){s.a.closePopup()}}}}).call(this,i("391c"))},"9ab7":function(e,t,i){var a=i("542f");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);(0,i("85cb").default)("8c69df94",a,!0,{sourceMap:!1,shadowMode:!1})},"9b25":function(e,t,i){"use strict";i("b09a")},"9b8b":function(e,t,i){(e.exports=i("690e")(!1)).push([e.i,"[data-v-153f7b00] .layout-content{display:flex;flex-direction:column;overflow:hidden;background:#fff}.zjapp .page-scroll[data-v-153f7b00]{flex:1;overflow:auto;padding-bottom:100px}.zjapp .bread-crumb[data-v-153f7b00]{line-height:30px;color:#999}.zjapp .bread-crumb .level-item i[data-v-153f7b00]{font-size:12px;margin:0 10px}.zjapp .bread-crumb .level-item:last-child>i[data-v-153f7b00]{display:none}.zjapp .bread-crumb .active[data-v-153f7b00]{color:#4275e8}.zjapp .checked[data-v-153f7b00]{color:#4275e8;line-height:30px}.zjapp .empty-msg[data-v-153f7b00]{display:flex;align-items:center;justify-content:center;color:#c8c8c8;margin-top:30px}.zjapp .empty-msg .line[data-v-153f7b00]{width:48px;margin:0 8px;border-top:1px solid #e4e4e4}.zjapp .search-item[data-v-153f7b00]{color:#333;padding:7px 0}[data-v-153f7b00] .icon-qualified{color:#4275e8}",""])},"9d1f":function(e,t,i){"use strict";var a=i("6412").a,s=(i("c854"),i("17cc")),n=Object(s.a)(a,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.isSetUsualItems?i("div",{staticClass:"set-items-buttons",on:{click:function(t){e.openPopup()}}},[i("icon",{staticClass:"icon icon-set-view"})],1):e._e()}),[],!1,null,"afc9fec8",null);t.a=n.exports},"9dea":function(e,t,i){"use strict";i("fda1")},a065:function(e,t,i){"use strict";(function(e){i("cc57"),i("9dd9");var a=i("f369"),s=i("e89f"),n=i("bcc7"),r=i("a57f"),o=i("07d2"),c=i("774b"),l=i("9eea"),d=i("9d1f"),u=i("7bac"),p=i("a7c3"),h=i("6144"),m=i("4360");t.a={name:"CheckitemSelectDialog",components:{CheckGuide:a.a,Tree:r.a,Item:o.default,Scroller:c.default,appSearchBar:l.default,SetUsualItems:d.a},mixins:[s.a],store:m.a,props:{},data:function(){return{timer:null,show:!1,isLoading:!0,isSearching:!1,treeListOri:[],treeList:[],searchKeyword:"",inputFocus:!1,historyLocalstorageKey:"checkitem-select-search-history",searchHistory:[],typeSet:{check:31,"check-safety":36,"check-quality":37,"measure-v3":41,process:32,"fly-inspect":101},guideModule:"check",module:null,sectionId:"",setUsualTreeList:[]}},computed:{checkGuideModule:function(){return this.module&&["check","check-safety","check-quality"].indexOf(this.module)>0?this.module:"check"},moduleAttribute:function(){return this.$store.state.global.moduleAttribute}},watch:{searchKeyword:function(e){var t=this;this.$nextTick((function(){t.treeList=e?t.fitlerByKeyword(t.deepClone(t.treeListOri),e):t.deepClone(t.treeListOri)}))}},mounted:function(){this.searchHistory=h.a.getObject(this.historyLocalstorageKey)||[]},methods:{openPopup:function(e){var t=this;this.value=!0,this.show=!0,this.module=e.module,this.guideModule=this.checkGuideModule,this.sectionId=e.sectionId,this.hasDesc=e.hasDesc,this.selected=e.selected,this.selectedDesc=e.selectedDesc,this.checkitemType=this.getCheckitemTypeByModule(e.module),this.getTreeList().then((function(){t.timer=window.setTimeout((function(){var e=document.querySelector(".color-theme.icon.icon-qualified");e&&e.scrollIntoViewIfNeeded()}),400)})),this.$emit("open")},closePopup:function(){this.value=!1,this.show=!1,this.setSearchMode(!1),this.$refs["app-search-bar-checkitem-select"]&&this.$refs["app-search-bar-checkitem-select"].cancelSearch(),window.clearTimeout(this.timer),this.$emit("close")},getCheckitemTypeByModule:function(e){return this.typeSet[e]?this.typeSet[e]:($log.error("module 参数错误"),"")},getTreeList:function(){var e=this;return this.isLoading=!0,console.time("all_time"),n.a.getTypeCheckItem(this.sectionId,this.checkitemType,this.hasDesc).then((function(t){return u.a.getUserKey(e.mmkvCode()).then((function(i){i=null===i?t:e.mergeArray(e.deepClone(t),i),e.treeList=i,n.a.setOpen(i,e.selected),console.timeEnd("all_time"),e.isLoading=!1,e.treeListOri=e.deepClone(i),e.setUsualTreeList=e.deepClone(t)}))}))},mmkvCode:function(){var e=this.moduleAttribute[this.module]||{};return p.a[e.mmkv_item]+"_"+this.sectionId},mergeArray:function(t,i){var a=this;return e.filter(t,(function(t){var s=i[t.id];return e.isEmpty(t.children)||(t.children=a.mergeArray(t.children,i)),!e.isEmpty(s)||"desc"===t.type}))},fitlerByKeyword:function(t,i){var a=this,s=[];return e.each(t,(function(t){if(new RegExp(i,"gm").test(t.name))t.isOpen=!0,s.push(t);else if(!e.isEmpty(t.children)){var n=a.fitlerByKeyword(t.children,i);e.isEmpty(n)||(t.isOpen=!0,t.children=n,s.push(t))}})),s},onSelect:function(t){if(this.$refs["app-search-bar-checkitem-select"]&&this.$refs["app-search-bar-checkitem-select"].saveHistory(),"desc"===t.type){var i=n.a.getCheckitemFromTree(e.clone(this.treeListOri),101===this.checkitemType?t.item_id:t.class_id);this.$emit("onSelect",t,i)}else this.$emit("onSelect",t);this.closePopup()},setSearchMode:function(e){this.isSearching=e},searchClear:function(){this.searchKeyword="",this.treeList=this.deepClone(this.treeListOri)},selectHistory:function(e){this.searchKeyword=e.val,this.$refs["app-search-bar-checkitem-select"].setValue(e.val)},hasHistory:function(t){return e.some(this.searchHistory,(function(e){return e.val===t}))},saveHistory:function(){this.searchKeyword&&!this.hasHistory(this.searchKeyword)&&(this.searchHistory.unshift({val:this.searchKeyword}),h.a.saveObject(this.historyLocalstorageKey,this.searchHistory))},deleteHistory:function(e){var t=this.searchHistory.indexOf(e);this.searchHistory.splice(t,1),h.a.saveObject(this.historyLocalstorageKey,this.searchHistory)},deleteHistoryAll:function(){this.searchHistory=[],h.a.saveObject(this.historyLocalstorageKey,[])},deepClone:function(e){return JSON.parse(JSON.stringify(e))}}}}).call(this,i("391c"))},a093:function(e,t,i){"use strict";(function(e){i("5ab2"),i("6d57"),i("e10e"),i("f548");var a=i("28f8"),s=(i("9dd9"),i("cc57"),i("e204"),i("9eea")),n=i("3156b"),r=i("774b"),o=i("e89f"),c=i("6f9e");function l(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,a)}return i}function d(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?l(Object(i),!0).forEach((function(t){Object(a.a)(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):l(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}t.a={name:"AppSingleSelect",components:{appSearchBar:s.default,item:n.a,Scroller:r.default},mixins:[o.a],props:{},data:function(){return{activeTab:[],storageKey:encodeURI(this.title||"singleSelectMark"),storageVal:[],keyword:"",searchStatus:!1,checkedItem:{},show:!1,searchData:[],options:[],optionsLimit:20,pagingOptions:!1,searchBar:!0,category:[],ifToggle:!1,editorAddData:!1,lineLimit:1}},computed:{optionsShow:function(){return this.options&&this.options.length?this.grouping?this.getGroupData():this.options.slice(0,this.optionsLimit):[]}},watch:{keyword:function(e){var t=this;this.$nextTick((function(){t.filterList(e)}))}},methods:{openPopup:function(t){if(console.log(t),this.value=!0,this.show=!0,this.category=[],c.a.$on("closeDialog",this.closePopup),this.title=t.title,this.selected=t.selected,this.checkedItem=t.selected,this.options=t.options,this.onSelect=t.onSelect,this.searchBar=t.searchBar,this.grouping=t.grouping,this.rightBtn=t.rightBtn,this.rightBtnEvent=t.rightBtnEvent,this.ifToggle=t.ifToggle,this.lineLimit=t.lineLimit,this.editorAddData=t.editorAddData,t.grouping&&t.autoOpen){var i=e.uniqBy(e.map(this.options,t.grouping));this.activeTab=e.map(i,(function(e,t){return t}))}this.storageKey=encodeURI(this.title||"singleSelectMark"),this.$emit("open")},closePopup:function(){this.value=!1,this.show=!1,this.$emit("close")},closeEvent:function(){c.a.$off("closeDialog",this.closePopup),this.value=!1,this.show=!1,this.keyword="",this.searchStatus=!1,this.$refs["app-search-bar"]&&this.$refs["app-search-bar"].cancelSearch()},customAddSupplier:function(e){return this.options.findIndex((function(t){return t.name===e}))},selectItem:function(e){var t=this;this.ifToggle&&this.checkedItem.id===e.id?this.checkedItem={}:this.checkedItem=e,this.onSelect(this.checkedItem),this.$refs["app-search-bar"]&&this.$refs["app-search-bar"].saveHistory(),window.setTimeout((function(){t.closeEvent()}),300)},onSearchTypeChange:function(e){this.searchStatus=e},filterList:function(e){var t,i,a=this,s=new RegExp("("+e+")","gmi");if(this.category=[],this.keyword=e,this.searchData=[],!e)return!1;this.options.map((function(e){return s.test(e.name)&&(i=d(d({},e),{},{rename:e.name.replace(s,"<label>$1</label>")}),a.grouping?-1===(t=a.category.indexOf(i[a.grouping]))?(a.category.push(i[a.grouping]),a.searchData.push({name:i[a.grouping],children:[i]})):a.searchData[t].children.push(i):a.searchData.push(i)),e}))},pageOptions:function(){this.optionsLimit=this.optionsLimit+20,this.pagingOptions=!1},getGroupData:function(){var e,t=this,i=[];return this.category=[],this.options.map((function(a){return-1===(e=t.category.indexOf(a[t.grouping]))?(t.category.push(a[t.grouping]),i.push({name:a[t.grouping],children:[a]})):i[e].children.push(a),a})),i}}}}).call(this,i("391c"))},a300:function(e,t,i){"use strict";(function(e){i("5ab2"),i("6d57"),i("e10e");var a=i("28f8"),s=i("e89f"),n=i("e2a7"),r=i("4360"),o=i("e223");function c(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,a)}return i}t.a={name:"DrawingDialog",store:r.a,components:{Drawing:o.a},mixins:[s.a],data:function(){return{show:!1,mode:"",url:"",points:[],folder:"",maxMarks:1/0,onmark:function(){}}},methods:{openPopup:function(e){return this.mode=e.mode,this.url=e.url,this.points=e.points,this.folder=e.folder,this.maxMarks=isNaN(e.maxMarks)?1/0:e.maxMarks,this.onmark=e.onmark,this.show=!0,this.$emit("open"),this},closePopup:function(){this.show=!1,this.$emit("close")},undo:function(){this.points.pop()},sure:function(){this.points.length?(this.closePopup(),this.onmark&&this.onmark(this.points)):n.a.alert("请先在户型图标记位置")},pointLight:function(t){this.points=e.map(this.points,(function(e,i){var s=function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?c(Object(i),!0).forEach((function(t){Object(a.a)(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):c(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}({},e);return t===i?s.color="#4275e8":s.found?s.color="#14ff56":s.color="#ff4546",s}))},onclick:function(e){var t=this;if("view"===this.mode){if(e.clickPoint&&"points"===e.clickPoint.tag){var i=e.clickPoint.index;this.pointLight(i)}}else if("mark-val-group"===this.mode){if(this.points.length>=maxMarks)return void n.a.alert("爆点个数不能大于实测点数");this.points.push({x:e.x,y:e.y})}else if("multiple-remark"===this.mode)this.points.push({x:e.x,y:e.y});else{var a={x:e.x,y:e.y};this.points=[a],setTimeout((function(){t.closePopup(),t.onmark&&t.onmark(a)}),200)}}}}}).call(this,i("391c"))},a57f:function(e,t,i){"use strict";var a=i("c2e0").a,s=(i("4a69"),i("17cc")),n=Object(s.a)(a,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",e._l(e.list,(function(t,a){return i("div",{key:a,staticClass:"list-tree"},[i("item",{class:{"checkBox-right-padding":e.isCheckbox},attrs:{border:"bottom"},on:{click:function(i){e.itemClick(t)}}},[e._l(e.blanks,(function(e,t){return i("div",{key:t,staticClass:"tree-blank"})})),i("div",{class:{"tree-icon":!0,"icon-dropdown":t.children&&t.children.length&&e.openSet[t.id],"icon-dropright":t.children&&t.children.length&&!e.openSet[t.id]}}),i("div",{class:{"item-text":!0,"fw-b":0===e.level},domProps:{innerHTML:e._s(e.keywordFilter(t.name))}}),t.children&&t.children.length||!e.isSelected(t)?e._e():i("icon",{staticClass:"color-theme",attrs:{name:"qualified"}})],2),e.isCheckbox?i("div",{staticClass:"tree-checkbox"},[i("checkbox",{attrs:{status:t.status,value:t.checked,"semi-selection":!0,type:"square"},on:{change:function(i){e.checkboxChange(arguments,t)}}})],1):e._e(),t.children&&t.children.length&&e.openSet[t.id]?[i("tree",{attrs:{data:t.children,level:e.level+1,keyword:e.keyword,selected:e.selected,"is-checkbox":e.isCheckbox},on:{onSelect:e.onSelect}})]:e._e()],2)})))}),[],!1,null,"792f710a",null);t.a=n.exports},a5bf:function(e,t,i){var a=i("e304");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);(0,i("85cb").default)("2efc26b7",a,!0,{sourceMap:!1,shadowMode:!1})},a5c6:function(e,t,i){"use strict";var a=i("329b"),s=i("a093").a,n=(i("f3d7"),i("17cc")),r=Object(n.a)(s,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("transition",{attrs:{name:"slide-right"}},[e.show?i("page-content",{attrs:{title:e.title,mode:"dialog","on-close":e.closeEvent}},[e.rightBtn&&!e.editorAddData||e.rightBtn&&e.editorAddData&&(!e.selected.name||e.customAddSupplier(e.selected.name)>-1)?i("div",{staticClass:"header-btn",attrs:{slot:"header-bar-right"},on:{click:function(t){e.rightBtnEvent(e.category)}},slot:"header-bar-right"},[e._v("\n      "+e._s(e.rightBtn)+"\n    ")]):e._e(),i("scroller",{attrs:{"has-next":!e.searchStatus&&!e.grouping&&e.optionsLimit<e.options.length,"end-text":"","is-empty":0===e.optionsShow.length},on:{loadNext:e.pageOptions}},[e.searchBar?i("app-search-bar",{ref:"app-search-bar",attrs:{placeholder:"搜索","history-key":e.storageKey},on:{changeSearchStatus:e.onSearchTypeChange},model:{value:e.keyword,callback:function(t){e.keyword=t},expression:"keyword"}}):e._e(),e.searchStatus?[e.keyword?[e.grouping?i("van-collapse",{model:{value:e.activeTab,callback:function(t){e.activeTab=t},expression:"activeTab"}},e._l(e.searchData,(function(t,a){return i("van-collapse-item",{key:a,attrs:{title:t.name,name:a}},e._l(t.children,(function(t,a){return i("item",{key:a,attrs:{checked:e.checkedItem.id===t.id,item:t,"line-limit":e.lineLimit,"render-field":"rename"},on:{click:e.selectItem}})})))}))):e._e(),e.grouping&&!e.searchData.length?i("loading-status",{attrs:{"is-empty":!0,"empty-text":"没有内容","show-style":"search"}}):e._e(),e.grouping?e._e():[e._l(e.searchData,(function(t,a){return i("item",{key:a,attrs:{checked:e.checkedItem.id===t.id,item:t,"line-limit":e.lineLimit,"render-field":"rename"},on:{click:e.selectItem}})})),e.searchData.length?e._e():i("loading-status",{attrs:{"is-empty":!0,"empty-text":"没有内容","show-style":"search"}})]]:e._e()]:["-1"===e.selected.id&&e.customAddSupplier(e.selected.name)<0&&e.editorAddData?i("div",{staticClass:"supplier-editor",on:{click:e.closePopup}},[i("span",{staticClass:"title"},[e._v(e._s(e.selected.name))]),i("span",{staticClass:"icon"},[i("i",{staticClass:"iconfont icon-edit margin-r",on:{click:e.rightBtnEvent}}),i("i",{staticClass:"iconfont icon-qualified"})])]):e._e(),e.grouping?i("van-collapse",{model:{value:e.activeTab,callback:function(t){e.activeTab=t},expression:"activeTab"}},e._l(e.optionsShow,(function(t,a){return i("van-collapse-item",{key:a,attrs:{title:t.name,name:a}},e._l(t.children,(function(t,a){return i("item",{key:a,attrs:{checked:e.checkedItem.id===t.id,item:t,"line-limit":e.lineLimit},on:{click:e.selectItem}})})))}))):e._l(e.optionsShow,(function(t,a){return i("item",{key:a,attrs:{checked:e.checkedItem.id===t.id,item:t,"line-limit":e.lineLimit},on:{click:e.selectItem}})})),e.optionsShow.length?e._e():i("loading-status",{attrs:{"is-empty":!0,"empty-text":"暂无数据","show-style":"search"}})]],2)],1):e._e()],1)}),[],!1,null,"e465319c",null).exports,o=!1;o||(o=new(a.default.extend(r))({el:document.createElement("div")}),document.body.appendChild(o.$el));t.a=o},b09a:function(e,t,i){var a=i("2939");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);(0,i("85cb").default)("65170d73",a,!0,{sourceMap:!1,shadowMode:!1})},b155:function(e,t,i){var a=i("2bac");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);(0,i("85cb").default)("6af9ceb8",a,!0,{sourceMap:!1,shadowMode:!1})},b55a:function(e,t,i){"use strict";i("c001")},b5c6:function(e,t,i){"use strict";(function(e){i("5ab2"),i("6d57"),i("e10e"),i("cc57");var a=i("28f8"),s=i("e89f"),n=i("a57f"),r=i("07d2");function o(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,a)}return i}function c(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?o(Object(i),!0).forEach((function(t){Object(a.a)(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):o(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}t.a={name:"SetUsualItemsDialog",components:{Tree:n.a,Item:r.default},mixins:[s.a],data:function(){return{show:!1,checkItems:[],isLoading:!1,mmkvItemTips:!0}},methods:{openPopup:function(e){this.checkItems=this.deepClone(e.checkItems),this.mmkvItemTips=e.mmkvItemTips,this.tipsCallback=e.tipsCallback,this.saveCallback=e.saveCallback,this.show=!0,this.value=!0,this.$emit("open")},closePopup:function(){this.show=!1,this.value=!1,this.$emit("close")},closeTip:function(){this.mmkvItemTips=!1,this.tipsCallback(!1)},onSelect:function(e,t){var i=this.deepClone(this.checkItems);i=this.dataMap(i,c(c({},t),{},{items:e}),0),this.checkItems=i},dataMap:function(t,i,a){var s=this;return t.map((function(t){if(t.id===i.items[a].id)if(t.checked=i.checked,t.children&&t.children.length&&a<i.items.length-1?t.children=s.dataMap(t.children,i,a+1):t.children=s.checkChildItems(t.children,i.checked),i.items[i.items.length-1].id===t.id)t.status=i.status,t.checked=i.checked;else{var n=s.currentStatus(t.children,i);t.status=n,t.checked=!e.isEmpty(n)}return t}))},checkChildItems:function(){var t=this,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],a=arguments.length>1?arguments[1]:void 0;return e.map(i,(function(e){return e.status=a?"fullSelected":null,e.checked=a,e.children&&e.children.length&&(e.children=t.checkChildItems(e.children,a)),e}))},currentStatus:function(t,i){return e.isEmpty(t)?i.status:e.filter(t,(function(t){return e.isEmpty(t.status)})).length===t.length?null:e.filter(t,(function(e){return"fullSelected"===e.status})).length===t.length?"fullSelected":"partSelected"},filterUsualItems:function(t,i){var a=this;return e.each(t,(function(t){e.isEmpty(i[t])&&t.checked&&(i[t.id]={id:t.id,status:t.status,checked:t.checked,isOpen:t.isOpen,parent_id:t.parent_id,name:t.name}),!e.isEmpty(t.children)&&t.checked&&Object.assign(i,a.filterUsualItems(t.children,i))})),i},save:function(){var e=this,t=this.filterUsualItems(this.checkItems,{});this.saveCallback(t).then((function(){e.closePopup()}))},deepClone:function(e){return JSON.parse(JSON.stringify(e))}}}}).call(this,i("391c"))},b6da:function(e,t,i){"use strict";var a=i("329b"),s=i("a300").a,n=i("17cc"),r=Object(n.a)(s,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("transition",{attrs:{name:"slide-right"}},[e.show?i("page-content",{attrs:{mode:"dialog",title:"户型图","on-close":e.closePopup}},[i("drawing",{staticStyle:{flex:"1"},attrs:{url:e.url,points:e.points,folder:e.folder},on:{onclick:e.onclick}}),"multiple-remark"===e.mode?i("app-button-group",{attrs:{"fixed-bottom":"",seamless:""}},[i("app-button",{staticStyle:{width:"50%"},attrs:{type:e.points.length?"warning":"normal",plain:""},on:{click:e.undo}},[e._v("\n        撤销\n      ")]),i("app-button",{on:{click:e.sure}},[e._v(" 确定 ")])],1):e._e()],1):e._e()],1)}),[],!1,null,null,null).exports,o=!1;o||(o=new(a.default.extend(r))({el:document.createElement("div")}),document.body.appendChild(o.$el));t.a=o},bebe:function(e,t,i){var a=i("6272");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);(0,i("85cb").default)("53478790",a,!0,{sourceMap:!1,shadowMode:!1})},c001:function(e,t,i){var a=i("f53a");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);(0,i("85cb").default)("bd5eb062",a,!0,{sourceMap:!1,shadowMode:!1})},c070:function(e,t,i){var a=i("574c");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);(0,i("85cb").default)("35590dcb",a,!0,{sourceMap:!1,shadowMode:!1})},c2e0:function(e,t,i){"use strict";(function(e){i("9dd9"),i("f548");var a=i("4c09"),s=(i("e697"),i("6d57"),i("163d"),i("07d2")),n=i("242a");t.a={name:"Tree",components:{Item:s.default,Checkbox:n.a},props:{data:{type:Array,default:function(){return[]}},keyword:{type:String,default:""},level:{type:Number,default:0},selected:{type:Array,default:function(){return[]}},isCheckbox:{type:Boolean,default:!1}},data:function(){return{blanks:new Array(this.level),openSet:{}}},computed:{list:function(){return e.clone(this.data)}},watch:{data:{handler:function(e){var t=this;this.openSet={},(e||[]).forEach((function(e){t.$set(t.openSet,e.id,!!e.isOpen)}))},immediate:!0}},methods:{itemClick:function(e){e.children&&e.children.length?(e.isOpen=!e.isOpen,this.openSet[e.id]=!this.openSet[e.id]):this.isCheckbox||this.$emit("onSelect",e)},onSelect:function(t,i){if(this.isCheckbox){var s,n=t[0],r=e.find(this.list,(function(e){var t=n.parent_id||n.item_id;if(e.id===t)return e}));this.$emit("onSelect",(s=[r]).concat.apply(s,Object(a.a)(t)),i)}else this.$emit("onSelect",t)},keywordFilter:function(e){return this.keyword?e.replace(new RegExp(this.keyword,"gm"),'<span class="color-blue">'+this.keyword+"</span>"):e},isSelected:function(t){return e.isArray(this.selected)?e.some(this.selected,{id:t.id}):this.selected&&this.selected.id===t.id},checkboxChange:function(e,t){var i=e[0],a=e[1];this.$emit("onSelect",[t],{checked:i,status:a})}}}}).call(this,i("391c"))},c40a:function(e,t,i){"use strict";(function(e){i("cc57"),i("6d57"),i("6f84"),i("163d");var a=i("a32d"),s=i.n(a),n=i("e900"),r=i("3122"),o=i("4ad6"),c=i("3bd5"),l=i("1b7e");function d(e){var t=e.changedTouches.length,i=e.touches.length;return 1===t||2===t||2===i}function u(e){return 1===e.touches.length}t.a={name:"Drawing",props:{url:{type:String},points:{type:Array,default:function(){return[]}},regions:{type:Array,default:function(){return[]}},pointColor:{type:String,default:"#ff4546"},pointRadius:{type:Number,default:7},scaleMax:{type:Number,default:4},clickDelay:{type:Number,default:500},folder:{type:String,default:"house-image"},onlineMode:{type:Boolean,default:!1},contentScroll:{type:Boolean,default:!0}},data:function(){return{isDownloading:!1,error:"",canvas:null,ctx:null,img:null,src:"",width:0,height:0,x:0,y:0,scale:1,defaultScale:1,pixelRatio:1,markPosition:null,markPositionImageData:[],markCoordinates:[],pinchRatio:0,scaleBetween:[],isPinch:!1,clickPoints:[],touchStart:{x:0,y:0,cx:0,cy:0,time:0}}},watch:{url:function(){this.getImage()},points:function(e){this.ctx&&this.draw()},regions:function(e){this.ctx&&this.draw()}},mounted:function(){this.getImage()},destroyed:function(){this.canvas&&(this.canvas.width=0,this.canvas.height=0)},methods:{getImage:function(){var t=this;if(this.isDownloading=!0,this.url){var i=c.a.getUser().user_id,a=s.a.replaceAll(this.url,"\\?x-oss-process=image\\/resize,","@"),n=s.a.strRightBack(a,"/");if(!n)return this.error="户型图地址错误",void(this.isDownloading=!1);this.error="";var d=[o.a.appImagePath()+i+"/"+this.folder+"/"+n,o.a.appImagePath()+i+"/house-image/"+n,o.a.appImagePath()+i+"/drawing/"+n,o.a.appImagePath()+i+"/location-image/"+n,o.a.appImagePath()+i+"/images/"+n,o.a.appDataPath()+i+"/"+this.folder+"/"+n,o.a.appDataPath()+i+"/house-image/"+n,o.a.appDataPath()+i+"/drawing/"+n,o.a.appDataPath()+i+"/location-image/"+n,o.a.appDataPath()+i+"/images/"+n],u=Promise.resolve();return"dev"===APP_ENV||this.onlineMode?u=u.then((function(){return t.url})):e.each(d,(function(e){u=u.then((function(t){return t||o.a.isFileExists(e).then((function(t){if(t)return r.a._fixPath(e)}))}))})),u.then((function(e){if(!e)return l.a.getHasNetwork().then((function(e){return e?r.a.download(t.url,!0,t.folder).then((function(e){t.src=e})):Promise.reject("当前无网络")}));t.src=e})).then((function(){t.src?(t.img=new Image,t.img.onload=function(){t.img.complete?(t.isDownloading=!1,t.$nextTick(t.init)):(t.error="加载图片失败",t.isDownloading=!1)},t.img.onerror=function(){t.error="加载图片失败",t.isDownloading=!1},t.img.src=t.src):(t.error="下载户型图失败",t.isDownloading=!1)})).catch((function(i){t.error=e.isString(i)?i:"下载户型图失败",t.isDownloading=!1}))}this.error="户型图地址错误",this.isDownloading=!1},init:function(){if(this.$refs["drawing-canvas"]){var e=this.$refs.content;this.canvas=this.$refs["drawing-canvas"],this.ctx=this.canvas.getContext("2d"),this.width=e.offsetWidth,this.height=e.offsetHeight,this.pixelRatio=this.getPixelRatio(this.ctx),this.canvas.style.height=this.height+"px",this.canvas.style.width=this.width+"px",this.canvas.width=this.width*this.pixelRatio,this.canvas.height=this.height*this.pixelRatio,!this.ctx.extended&&Object(n.a)(this.ctx),this.bindTouchEvent(),this.calc(),this.draw()}},getPixelRatio:function(e){var t=e.backingStorePixelRatio||CanvasRenderingContext2D.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1;return(window.devicePixelRatio||1)/t},calc:function(e){var t=this.width/this.img.width,i=this.img.height*t,a=this.height||i;i>this.height&&(t*=a/i),this.scale=t*this.pixelRatio,this.defaultScale=this.scale,this.scaleBetween=[this.scale,this.scale*this.scaleMax]},winToCanvas:function(e,t){var i=this.canvas.getBoundingClientRect();return{x:e-i.left*(this.canvas.width/(i.width*this.pixelRatio)),y:t-i.top*(this.canvas.height/(i.height*this.pixelRatio))}},isBoundary:function(e){switch(e){case"t":if(0===this.y)return!0;break;case"r":if(this.x<=this.canvas.width-this.img.width*this.scale)return!0;break;case"b":if(this.y<=this.img.height*this.scaleBetween[0]-this.img.height*this.scale)return!0;break;case"l":if(0===this.x)return!0}return!1},bindTouchEvent:function(){this.canvas.addEventListener("touchstart",this.onTouchstart),this.canvas.addEventListener("touchmove",this.onTouchmove),this.canvas.addEventListener("touchend",this.touchMoveAndEndHandler)},unbindTouchEvent:function(){this.canvas.removeEventListener("touchstart",this.onTouchstart),this.canvas.removeEventListener("touchmove",this.onTouchmove),this.canvas.removeEventListener("touchend",this.touchMoveAndEndHandler)},onTouchstart:function(e){if(this.isPinch=!1,u(e)){var t=e.touches[0],i=this.winToCanvas(t.clientX,t.clientY);this.touchStart={x:i.x,y:i.y,cx:t.clientX,cy:t.clientY,time:Date.now()}}else if(d(e)){var a,s=e.touches[0],n=e.touches[1],r=this.winToCanvas(s.clientX,s.clientY),o=this.winToCanvas(n.clientX,n.clientY);a=Math.sqrt(Math.pow(o.x-r.x,2)+Math.pow(o.y-r.y,2)),this.pinchRatio=this.scale/a}},onTouchmove:function(e){if(!1===this.contentScroll&&(e.preventDefault(),e.stopPropagation()),u(e))this.touchStart.cy>e.pageY&&this.isBoundary("b")||this.touchStart.cy<e.pageY&&this.isBoundary("t")||this.touchStart.cx>e.pageX&&this.isBoundary("r")||this.touchStart.cx<e.pageX&&this.isBoundary("l")||e.stopPropagation(),this.touchMoveAndEndHandler(e);else if(d(e)){e.stopPropagation();var t,i,a,s,n,r=e.touches[0],o=e.touches[1],c=this.winToCanvas(r.clientX,r.clientY),l=this.winToCanvas(o.clientX,o.clientY);i=Math.sqrt(Math.pow(l.x-c.x,2)+Math.pow(l.y-c.y,2)),this.isPinch=!0,(t=this.pinchRatio*i)>this.scaleBetween[0]&&t<this.scaleBetween[1]&&(s={x:((a={x:(c.x+l.x)/2*this.pixelRatio,y:(c.y+l.y)/2*this.pixelRatio}).x-this.x)/(this.img.width*this.scale),y:(a.y-this.y)/(this.img.height*this.scale)},a.newX=this.x+this.img.width*t*s.x,a.newY=this.y+this.img.height*t*s.y,n={x:a.newX-a.x,y:a.newY-a.y},t<this.scale&&this.setRange(this.x-n.x,this.y-n.y,t),t>this.scale&&(this.x=this.x-n.x,this.y=this.y-n.y),t!==this.scale&&(this.scale=t,this.draw()))}},touchMoveAndEndHandler:function(e){var t,i,a=e.type,s={touchmove:e.touches[0],touchend:e.changedTouches[0]}[a],n=this.winToCanvas(s.clientX,s.clientY);t=(n.x-this.touchStart.x)*this.pixelRatio,i=(n.y-this.touchStart.y)*this.pixelRatio,"touchend"===a&&Date.now()-this.touchStart.time<this.clickDelay&&Math.abs(s.clientX-this.touchStart.cx)<6&&Math.abs(s.clientY-this.touchStart.cy)<6?this.clickHandler(e):"touchmove"!==a||this.isPinch||(this.touchStart.x=n.x,this.touchStart.y=n.y,this.setRange(this.x+t,this.y+i,this.scale),this.draw())},isCanClick:function(e){for(var t=!1,i=0;i<this.markPosition.length;i++)if(parseFloat(e.x)>parseFloat(this.markPosition[i].x)&&parseFloat(e.x)<parseFloat(this.markPosition[i].x)+parseFloat(this.markPosition[i].w)&&parseFloat(e.y)>parseFloat(this.markPosition[i].y)&&parseFloat(e.y)<parseFloat(this.markPosition[i].y)+parseFloat(this.markPosition[i].h)){t=!0;break}return t},clickHandler:function(e){var t=e.changedTouches[0];if(this.mark){var i=this.winToCanvas(t.clientX,t.clientY),a={x:(i.x-this.x/this.pixelRatio)/(this.img.width*this.scale/this.pixelRatio),y:(i.y-this.y/this.pixelRatio)/(this.img.height*this.scale/this.pixelRatio)};if(i={x:a.x*this.img.width,y:a.y*this.img.height},this.isCanClick(i)){this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(i.x*this.scale/this.pixelRatio+this.x/this.pixelRatio,i.y*this.scale/this.pixelRatio+this.y/this.pixelRatio,this.scale===this.defaultScale?this.pointRadius:this.pointRadius*(1+(this.scale-this.defaultScale)/this.pixelRatio),0,2*Math.PI,!1),this.ctx.fill(),this.ctx.restore();var s={x:i.x,y:i.y};this.markCoordinates.push(s),this.points.push(s)}return!1}this.redraw(e,this.winToCanvas(t.clientX,t.clientY))},setRange:function(e,t,i){var a=this.img.width*i,s=this.img.height*i,n=this.canvas.width,r=this.canvas.height,o=this.img.height*this.scaleBetween[0];e=a<n?(n-a)/2:(e=e+a<n?n-a:e)>0?0:e,t=s<r?(r-s)/2:(t=t+s<o?o-s:t)>0?0:t,this.x=e,this.y=t},draw:function(){this.setRange(this.x,this.y,this.scale),this.drawImage(),this.drawPoints(),this.drawRegions()},redraw:function(e,t){this.clickPoints=[],this.drawImage(),this.drawPoints(t),this.drawRegions(t),this.clickCallback(e,this.clickPoints)},clickCallback:function(e,t){var i;t.some((function(e,t){return"points"===e.tag?(i=e,!0):(i=e,!1)}));var a=e.changedTouches[0],s=this.winToCanvas(a.clientX,a.clientY),n=(s.x-this.x/this.pixelRatio)/(this.img.width*this.scale/this.pixelRatio),r=(s.y-this.y/this.pixelRatio)/(this.img.height*this.scale/this.pixelRatio);(s={x:parseFloat((n*this.img.width).toFixed(2)),y:parseFloat((r*this.img.height).toFixed(2))}).y>=0&&s.x>=0&&s.y<=this.img.height&&s.x<=this.img.width&&this.$emit("onclick",{type:i?"point":"",points:this.points,point:i,clickPoint:i,x:s.x,y:s.y,scale:this.scale/this.pixelRatio})},drawImage:function(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.ctx.drawImage(this.img,0,0,this.img.width,this.img.height,this.x,this.y,this.img.width*this.scale,this.img.height*this.scale)},drawPoints:function(e){var t=this;this.points.forEach((function(i,a){t.drawPoint(i.x*t.scale/t.pixelRatio+t.x/t.pixelRatio,i.y*t.scale/t.pixelRatio+t.y/t.pixelRatio,t.pointRadius,a,e,i.color)}))},drawPoint:function(e,t,i,a,s,n){this.ctx.save(),this.ctx.beginPath(),this.ctx.shadowBlur=i/2,this.ctx.shadowColor="black",this.ctx.fillStyle=n||this.pointColor,this.ctx.arc(e,t,i,0,2*Math.PI,!1),this.ctx.fill(),this.ctx.shadowBlur=0,this.ctx.shadowColor="transparent",this.ctx.restore(),i*=2,this.ctx.save(),this.ctx.beginPath(),this.ctx.strokeStyle="transparent",this.ctx.fillStyle="transparent",this.ctx.rect(e-i,t-i,2*i,2*i),this.ctx.stroke(),this.ctx.restore(),s&&this.ctx.isPointInPath(s.x*this.pixelRatio,s.y*this.pixelRatio)&&this.clickPoints.push({tag:"points",pos:s,index:a})},drawRegions:function(e){var t=this;this.regions&&this.regions.length&&this.regions.forEach((function(i,a){var s,n,r,o;t.ctx.beginPath(),i.area.forEach((function(e,i){var a=e[0]*t.scale/t.pixelRatio+t.x/t.pixelRatio,c=e[1]*t.scale/t.pixelRatio+t.y/t.pixelRatio;i?t.ctx.lineTo(a,c):t.ctx.moveTo(a,c),s=void 0===s?a:s<a?s:a,n=void 0===n?a:n>a?n:a,r=void 0===r?c:r<c?r:c,o=void 0===o?c:o>c?o:c})),t.ctx.closePath(),t.ctx.fillStyle="rgba(255, 144, 0, 0.4)",t.ctx.fill(),t.ctx.lineWidth=3,t.ctx.strokeStyle="#feda8e",t.ctx.stroke(),t.ctx.lineWidth=2,t.ctx.strokeStyle="rgba(0, 0, 0, 0.8)",t.ctx.stroke(),e&&t.ctx.isPointInPath(e.x*t.pixelRatio,e.y*t.pixelRatio)&&t.clickPoints.push({tag:"region",pos:e,index:a,regionData:i}),t.ctx.font='18px bold -apple-system, "Helvetica Neue", Roboto, "Segoe UI", sans-serif',t.ctx.textAlign="center",t.ctx.lineWidth=4,t.ctx.strokeStyle="#ffffff",t.ctx.strokeText(i.name,(n+s)/2,(o+r)/2+10),t.ctx.fillStyle="#111111",t.ctx.fillText(i.name,(n+s)/2,(o+r)/2+10)}))}}}}).call(this,i("391c"))},c82d:function(e,t,i){var a=i("0c52");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);(0,i("85cb").default)("26e0fa2e",a,!0,{sourceMap:!1,shadowMode:!1})},c854:function(e,t,i){"use strict";i("11ed")},cf0d:function(e,t,i){(e.exports=i("690e")(!1)).push([e.i,'.zjapp .layout-main[data-v-0a266c44] .layout-content{overflow:auto}.zjapp .datepicker-hd[data-v-0a266c44]{display:flex;text-align:center;padding:5px 5px 15px 5px}.zjapp .datepicker-hd-center[data-v-0a266c44]{flex:1;display:flex;padding:10px 5px}.zjapp .datepicker-month[data-v-0a266c44],.zjapp .datepicker-year[data-v-0a266c44]{position:relative;flex:1;border:none;border-bottom:1px solid #4374ea;padding:0;line-height:26px;font-size:14px;text-align:center}.zjapp .datepicker-month[data-v-0a266c44]{margin-left:10px}.zjapp .datepicker-month[data-v-0a266c44]:after,.zjapp .datepicker-year[data-v-0a266c44]:after{position:absolute;top:50%;right:5px;margin-top:-3px;width:0;height:0;border-top:5px solid;border-right:5px solid transparent;border-left:5px solid transparent;content:"";pointer-events:none;color:#4374ea}.zjapp .datepicker-next[data-v-0a266c44],.zjapp .datepicker-prev[data-v-0a266c44]{width:10%;padding:10px 5px;font-size:24px;color:#4374ea}.zjapp .select-list[data-v-0a266c44]{position:absolute;top:27px;left:0;width:100%;max-height:380px;overflow:auto;background-color:#fff;box-shadow:0 0 5px #333}.zjapp .select-item[data-v-0a266c44]{padding:5px;height:38px;line-height:28px}.zjapp .item-selected[data-v-0a266c44]{background-color:#4374ea;color:#fff}.zjapp .weeks-row[data-v-0a266c44]{padding:5px;display:flex}.zjapp .weeks-cell[data-v-0a266c44]{flex:1;line-height:20px;text-align:center;font-size:14px;font-weight:700}.zjapp .date-row[data-v-0a266c44]{padding:0 5px;display:flex}.zjapp .date-cell[data-v-0a266c44]{flex:1;height:50px;line-height:50px;text-align:center;font-size:14px}.zjapp .date-cell-selected[data-v-0a266c44]{background-color:#4374ea;color:#fff;font-weight:700}.zjapp .date-cell.today[data-v-0a266c44]{border:1px solid #4374ea}.zjapp .disabled[data-v-0a266c44]{pointer-events:none;color:#aaa}',""])},d0fb:function(e,t,i){"use strict";(function(e){var a=i("fd50"),s=i("bcc7"),n=i("515e"),r=i("e89f"),o=i("07d2"),c=i("7bac"),l=i("a7c3"),d=i("4360");t.a={name:"CheckGuideList",components:{Item:o.default},mixins:[r.a],store:d.a,props:{data:{type:String,default:""}},data:function(){return{show:!1,isLoading:!0,listData:[],module:"",itemId:"",batchId:"",sectionId:"",options:""}},computed:{moduleAttribute:function(){return this.$store.state.global.moduleAttribute}},mounted:function(){this.data=[]},methods:{openPopup:function(t){var i,s=this;for(var n in this.value=!0,this.show=!0,this.module=t.module,this.itemId=t.itemId,this.batchId=t.batchId,this.sectionId=t.sectionId,this.options=t.options,this.$emit("open"),t)this[n]=t[n];this.checkType={check:31,"check-safety":36,"check-quality":37,"measure-v3":41,process:32,"fly-inspect":101}[this.module];var r=!1;e.isEmpty(this.itemId)?!e.isEmpty(this.checkType)&&e.isEmpty(this.sectionId)?i=this.initByType():e.isEmpty(this.batchId)?e.isEmpty(this.options)?e.isEmpty(this.sectionId)?i=a.a.when():(r=!0,i=this.initByBidsection()):i=this.initByOptions():i=this.initByBatch():i=this.initById(),this.isLoading=!0,i.then((function(t){var i=s.moduleAttribute[s.module]||{};!e.isEmpty(i)&&i.setUsualItems&&r?c.a.getUserKey(s.mmkvCode()).then((function(e){e=null===e?t:s.mergeArray(s.deepClone(t),e),s.listData=e||[],s.isLoading=!1})):(s.listData=t||[],s.isLoading=!1)}))},mmkvCode:function(){var e=this.moduleAttribute[this.module]||{};return l.a[e.mmkv_item]+"_"+this.sectionId},mergeArray:function(t,i){var a=this;return e.filter(t,(function(t){var s=i[t.id];return e.isEmpty(t.subitem)||(t.subitem=a.mergeArray(t.subitem,i)),!e.isEmpty(s)||"desc"===t.type}))},closePopup:function(){this.value=!1,this.show=!1,this.$emit("close")},clickItem:function(e){e.subitem&&e.subitem.length?this.$set(e,"isOpen",!e.isOpen):"special-inspect"===this.module?n.a.openPopup({itemId:e.id,module:this.module}):n.a.openPopup({itemId:e.item_id,module:this.module})},initById:function(){var e=this;if("special-inspect"!==this.module)return s.a.getCheckItem(this.itemId,this.checkType).then((function(t){return t?e.sectionId?s.a.getBidSectionCheckItemListByCode(e.sectionId,t.code):s.a.getCheckItemTreeByCode(t.code):a.a.when()}))},initByType:function(){return s.a.getCheckItemGuidelineList(this.checkType)},initByBatch:function(){return a.a.when()},initByBidsection:function(){return s.a.getBidSectionCheckItemTreeByType(this.sectionId,this.checkType)},initByOptions:function(){return a.a.resolve(this.options)},deepClone:function(e){return JSON.parse(JSON.stringify(e))}}}}).call(this,i("391c"))},d1f2:function(e,t,i){"use strict";(function(e){var a=i("4c2b"),s=i("07d2");t.a={name:"CheckitemSelect",components:{Item:s.default},props:{title:{type:String,default:""},mode:{type:String,default:"edit"},selectClass:{type:[String,Object],default:""},options:{type:Array,default:function(){return[]}},selected:{type:Object,default:function(){return{}}},selectedDesc:{type:Object,default:function(){return{}}},selectedText:{type:String,default:"edit"},module:{type:String,default:""},sectionId:{type:String,default:""},hasDesc:{type:Boolean,default:!1},editabled:{type:Boolean,default:!0},formCheck:{type:Boolean,default:!1}},data:function(){return{}},computed:{hasSelected:function(){return!e.isEmpty(this.selected)}},created:function(){var e=this;a.a.$off("onSelect").$on("onSelect",(function(t,i){e.$emit("onSelect",t,i)}))},methods:{onClick:function(){this.open()},open:function(){a.a.openPopup({module:this.module,sectionId:this.sectionId,hasDesc:this.hasDesc,selected:this.selected,selectedDesc:this.selectedDesc})}}}}).call(this,i("391c"))},d2d4:function(e,t,i){"use strict";i("2a54")},d4f8:function(e,t,i){(e.exports=i("690e")(!1)).push([e.i,".zjapp .page-scroll[data-v-871f52b2]{flex:1;overflow:auto;position:relative}.zjapp .item.chick-item[data-v-871f52b2]{background-color:#ebf1ff;background-size:100% 0}.zjapp .status-tag[data-v-871f52b2]{position:absolute;right:0;top:0;width:50px;height:50px;overflow:hidden;z-index:10}.zjapp .status-tag>.tag[data-v-871f52b2]{position:absolute;right:-32px;bottom:22px;height:20px;line-height:20px;width:100px;color:#fff;font-size:12px;transform:rotate(45deg);text-align:center;border-width:1px;border-style:solid}.zjapp .repair-deadline i.font[data-v-871f52b2]{display:inline-block;font-style:normal;width:16px;height:16px;text-align:center;line-height:16px;background-color:#964bfe;color:#fff;font-size:12px;border-radius:2px;margin:0 8px}.zjapp .check-text[data-v-871f52b2]{display:flex;align-items:center}.zjapp .check-text i.font[data-v-871f52b2]{display:inline-block;font-style:normal;height:16px;text-align:center;line-height:16px;background-color:#ff3b30;vertical-align:text-top;color:#fff;font-size:12px;border-radius:2px;margin:0 8px;padding:0 2px}",""])},d6fa:function(e,t,i){"use strict";i("9ab7")},d77c:function(e,t,i){(e.exports=i("690e")(!1)).push([e.i,".zjapp .layout-main[data-v-e24c0d3a] .layout-content{overflow:auto}[data-v-e24c0d3a] .item .icon{color:#4275e8}",""])},da1c:function(e,t,i){"use strict";i("163d");var a=i("65a8"),s={name:"ProblemHeader",props:{status:{type:String,default:""},statusText:{type:String,default:""},level:{type:String,default:""},isTimeout:{type:Boolean,default:!1},sentBackTimes:{type:[Number,String],default:0}},data:function(){return{edOptions:{}}},created:function(){var e=this;a.a.getOptions("紧急程度").then((function(t){e.edOptions=t}))}},n=(i("1f63"),i("17cc")),r=Object(n.a)(s,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",e._g({staticClass:"problem-detail-header border-bottom"},e.$listeners),[i("div",{staticClass:"status",class:{"待整改":"status-red","不合格":"status-red","已退回":"status-red","待复验":"status-orange","已放水待验收":"status-orange","检查中":"status-orange","待验收":"status-orange","已通过":"status-green","已整改":"status-green","已提交":"status-green","合格":"status-green","检查完毕":"status-green","已验收":"status-green","已关闭":"status-black","进度正常":"status-green","进度滞后":"status-red","验收中":"status-orange","已抽验":"status-green"}[e.status]},[e._v(e._s(e.statusText||e.status))]),"紧急"===e.level||"特急"===e.level?i("span",{staticClass:"urgent"},[e._v(e._s(e.edOptions[e.level]))]):e._e(),e.isTimeout?i("span",{staticClass:"timeout"},[e._v("超时")]):e._e(),e.sentBackTimes>0?i("span",{staticClass:"return"},[e._v("退回"+e._s(e.sentBackTimes)+"次")]):e._e(),e._t("operat")],2)}),[],!1,null,"0901aadd",null);t.a=r.exports},dc98:function(e,t,i){"use strict";i("0732")},e223:function(e,t,i){"use strict";var a=i("c40a").a,s=(i("0aac"),i("17cc")),n=Object(s.a)(a,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",e._g({ref:"content",staticClass:"drawing-con"},e.$listeners),[e.isDownloading?[i("p",[i("svg",{staticClass:"svg-loading",attrs:{viewBox:"0 0 80 80"}},[i("circle",{attrs:{cx:"40",cy:"40",r:"36"}})])]),i("p",{staticClass:"loading-text"},[e._v("正在下载...")])]:[e.error?e._e():i("canvas",{ref:"drawing-canvas"}),e.error?i("p",{staticClass:"error-text"},[e._v(e._s(e.error))]):e._e()]],2)}),[],!1,null,"fba5990a",null);t.a=n.exports},e304:function(e,t,i){(e.exports=i("690e")(!1)).push([e.i,".zjapp .layout-main[data-v-5cfe259f] .layout-content{display:flex;flex-direction:column}.zjapp .page-scroll[data-v-5cfe259f]{flex:1;overflow:auto;scroll-behavior:smooth;transform:translateZ(0)}.zjapp .ui-loading-status[data-v-5cfe259f]{flex:auto;height:calc(100vh - 148px)}.zjapp .set-usual-items-header[data-v-5cfe259f]{font-size:18px;padding:0 12px}.zjapp .set-view-tip[data-v-5cfe259f]{position:reslative;top:0;width:100%;height:30px;line-height:30px;background-color:#ffdfae;font-size:14px;color:#ff8a36;z-index:1000;padding-left:15px}.zjapp .set-view-tip i[data-v-5cfe259f]{position:absolute;right:8px;top:0;padding:7px}",""])},e433:function(e,t,i){var a=i("d4f8");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);(0,i("85cb").default)("07a126c3",a,!0,{sourceMap:!1,shadowMode:!1})},e5a0:function(e,t,i){(e.exports=i("690e")(!1)).push([e.i,'.zjapp .checkbox[data-v-afcfdff2]{font-size:14px;line-height:20px}.zjapp .icon[data-v-afcfdff2]{vertical-align:top;margin-top:1px;margin-right:7px}.zjapp .semiCheckbox[data-v-afcfdff2]{font-family:Chinese Quote,-apple-system,BlinkMacSystemFont,Segoe UI,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Helvetica Neue,Helvetica,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol;font-size:14px;font-variant:tabular-nums;line-height:1.5;color:rgba(0,0,0,.65);box-sizing:border-box;margin:0;padding:0;list-style:none;white-space:nowrap;cursor:pointer;outline:none;display:inline-block;line-height:1;position:relative;vertical-align:middle}.zjapp .semiCheckbox-inner[data-v-afcfdff2]{position:relative;top:0;left:0;display:block;width:18px;height:18px;border:1px solid #d9d9d9;border-radius:2px;background-color:#fff;transition:all .3s}.zjapp .semiCheckbox-indeterminate .semiCheckbox-inner[data-v-afcfdff2]:after{content:" ";transform:translate(-50%,-50%) scale(1);border:0;left:50%;top:50%;width:8px;height:8px;background-color:#4275e8;opacity:1}.zjapp .semiCheckbox-inner[data-v-afcfdff2]:after{transform:rotate(45deg) scale(0);position:absolute;left:5.57142857px;top:2.14285714px;display:table;width:5.71428571px;height:9.14285714px;border:2px solid #fff;border-top:0;border-left:0;content:" ";transition:all .1s cubic-bezier(.71,-.46,.88,.6),opacity .1s;opacity:0}.zjapp .semiCheckbox-checked .semiCheckbox-inner[data-v-afcfdff2]{background-color:#4275e8;border-color:#4275e8}.zjapp .semiCheckbox-checked .semiCheckbox-inner[data-v-afcfdff2]:after{transform:rotate(45deg) scale(1);position:absolute;display:table;border:2px solid #fff;border-top:0;border-left:0;content:" ";transition:opacity .2s cubic-bezier(.12,.4,.29,1.46) .1s;opacity:1}',""])},e60b:function(e,t,i){var a=i("cf0d");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);(0,i("85cb").default)("1be2b028",a,!0,{sourceMap:!1,shadowMode:!1})},e900:function(e,t,i){"use strict";i.d(t,"a",(function(){return a})),i.d(t,"b",(function(){return s}));i("f548");function a(e){var t,i,a,s=(i=(t=e).backingStorePixelRatio||CanvasRenderingContext2D.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1,(window.devicePixelRatio||1)/i);1!==s&&(!function(e,t){for(var i in e)e.hasOwnProperty(i)&&t(e[i],i)}({fillRect:"all",clearRect:"all",strokeRect:"all",moveTo:"all",lineTo:"all",arc:[0,1,2],arcTo:"all",bezierCurveTo:"all",isPointinPath:"all",isPointinStroke:"all",quadraticCurveTo:"all",rect:"all",translate:"all",createRadialGradient:"all",createLinearGradient:"all"},(function(t,i){var a;e[i]=(a=e[i],function(){var e,i,n=Array.prototype.slice.call(arguments);if("all"===t)n=n.map((function(e){return e*s}));else if(Array.isArray(t))for(e=0,i=t.length;e<i;e++)n[t[e]]*=s;return a.apply(this,n)})})),e.stroke=(a=e.stroke,function(){this.lineWidth*=s,a.apply(this,arguments),this.lineWidth/=s}),e.fillText=function(e){return function(){var t=Array.prototype.slice.call(arguments);t[1]*=s,t[2]*=s,this.font=this.font.replace(/(\d+)(px|em|rem|pt)/g,(function(e,t,i){return t*s+i})),e.apply(this,t),this.font=this.font.replace(/(\d+)(px|em|rem|pt)/g,(function(e,t,i){return t/s+i}))}}(e.fillText),e.strokeText=function(e){return function(){var t=Array.prototype.slice.call(arguments);t[1]*=s,t[2]*=s,this.font=this.font.replace(/(\d+)(px|em|rem|pt)/g,(function(e,t,i){return t*s+i})),e.apply(this,t),this.font=this.font.replace(/(\d+)(px|em|rem|pt)/g,(function(e,t,i){return t/s+i}))}}(e.strokeText),e.extended=!0)}var s=function(e){var t,i;(t=e).getContext=(i=t.getContext,function(e){var t,s,n=i.call(this,e);return"2d"===e&&(t=n.backingStorePixelRatio||CanvasRenderingContext2D.webkitBackingStorePixelRatio||n.mozBackingStorePixelRatio||n.msBackingStorePixelRatio||n.oBackingStorePixelRatio||n.backingStorePixelRatio||1,(s=(window.devicePixelRatio||1)/t)>1&&(this.style.height=this.height+"px",this.style.width=this.width+"px",this.width*=s,this.height*=s)),a(n),n})}},eb41:function(e,t,i){(e.exports=i("690e")(!1)).push([e.i,".zjapp .set-items-buttons[data-v-afc9fec8]{width:44px;height:44px;display:flex;align-items:center;justify-content:center}.zjapp .set-items-buttons i[data-v-afc9fec8]{font-size:22px}",""])},ebf1:function(e,t,i){"use strict";(function(e){t.a={name:"RadioBox",props:{options:{type:[Array,Object],default:function(){return[]}},value:{type:String,default:""},align:{type:String,default:"r"},customClass:{type:String,default:""}},data:function(){return{}},computed:{optionsType:function(){return e.isArray(this.options)?"array":e.isObject(this.options)?"object":""}},methods:{onSelect:function(e){var t;"array"===this.optionsType?t=this.options[e]:"object"===this.optionsType&&(t=e),this.$emit("input",t),this.$emit("onSelect",t)}}}}).call(this,i("391c"))},f1e4:function(e,t,i){"use strict";(function(e){i("5ab2"),i("e10e");var a=i("28f8"),s=(i("9e76"),i("6d57"),i("9a33"),i("f548"),i("cc57"),i("4ad6")),n=i("e89f"),r=i("bcc7"),o=i("3122"),c=i("6e1b"),l=i("c130"),d=i("0636");function u(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,a)}return i}function p(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?u(Object(i),!0).forEach((function(t){Object(a.a)(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):u(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}t.a={name:"CheckGuideDetail",components:{},mixins:[n.a],data:function(){return{show:!1,isLoading:!0,isImageDownloading:!1,title:"",content:[],module:"",itemId:""}},methods:{openPopup:function(t){var i=this;for(var a in this.value=!0,this.show=!0,this.module=t.module,this.itemId=t.itemId,this.$emit("open"),t)this[a]=t[a];this.checkType={check:31,"check-safety":36,"check-quality":37,"measure-v3":41,process:32,"fly-inspect":101}[this.module],this.isLoading=!0,("special-inspect"===this.module?c.a.getSpecialInspectCheckItemDetail(this.itemId):"templet-plan"===this.module?l.a.getTempletDetail(this.itemId):"material"===this.module?d.a.getMaterialDetail(this.itemId):r.a.getCheckItem(this.itemId,this.checkType)).then((function(t){console.log("checkitemData",t),i.checkitemData=t,i.title=t.full_name||t.name,"special-inspect"!==i.module&&"inspect"!==i.module&&"fly-inspect"!==i.module&&"material"!==i.module||(t.content=t.guideline||t.content);var a=t.content?t.content.trim():"";if(a=(a=(a=(a=(a=a.replace(/<\/p><p>/gm,"\n")).replace(/<p>/gm,"")).replace(/<\/p>/gm,"")).replace(/<br>/gm,"")).replace(/<br \/>/gm,""),/(<img[^\>]*>)/gm.test(a)){var s=a.split(/(<img[^\>]*>)/gm);(s=s.filter((function(e){return!!e}))).forEach((function(e,t){e&&!/^\s*\n/.test(e)&&t&&!/\n\s*$/.test(s[t-1])&&(s[t]="\n"+e)})),a=s.join("")}var n=a?a.split("\n"):[];i.content=e.map(n,(function(e,t){var i;if(/<img([\s\S]*)>/gm.test(e)){var a=e.split(/\ssrc="([^"]*)"/gm)[1],s=a?a.match(/[\w|-]{36}/gm)[0]:(new Date).getTime()+"-"+t;i={isImg:!0,src:"",url:a,status:"pending",id:s,ready:!0}}else i={isImg:!1,val:e};return i})),i.downloadImage(),i.isLoading=!1})).catch((function(e){$log.log(e)}))},closePopup:function(){this.value=!1,this.show=!1,this.$emit("close")},getThumbnail:function(e){return"pending"===e.status?o.a.IMAGE_LOADING:"rejected"===e.status?o.a.IMAGE_RELOAD:"dev"===APP_ENV?e.url:"fulfilled"===e.status?e.src:($log.log("检查指引-显示图片：",e),o.a.IMAGE_PLACEHOLD)},imgError:function(e,t){$log.error("检查指引-加载图片出现错误：",e);var i=p({},e);i.status="rejected",this.$set(this.content,t,i)},downloadImage:function(t){var i=this;t=t?[t]:this.imageList(),e.each(t,(function(t){var a=p({},t),s=e.map(i.content,(function(e){return e.id})).indexOf(t.id);o.a.isNeedDownload(t.url).then((function(e){e?o.a.download(t.url).then((function(e){a.status="fulfilled",a.src=o.a.fixUrl(e),i.$set(i.content,s,a)})).catch((function(e){$log.error("检查指引-下载图片：",e)})):(a.status="fulfilled",a.src=o.a.fixUrl(o.a.getPathFromUrl(t.url)),i.$set(i.content,s,a))}))}))},imageList:function(){return e.filter(this.content,(function(e){return e.isImg}))},imgClick:function(t){var i=this;if("pending"===t.status)return!1;if("rejected"===t.status)return this.downloadImage(t),$log.log("检查指引-点击重新加载-重新下载图片：",t),!1;var a=this.imageList(),n=e.map(a,(function(e){return e.id})).indexOf(t.id);a=e.map(a,(function(e){return i.getThumbnail(e)})),s.a.openImageBrowser(a,n)}}}}).call(this,i("391c"))},f369:function(e,t,i){"use strict";var a=i("fd50"),s=i("bcc7"),n=i("329b"),r=i("d0fb").a,o=(i("9b25"),i("17cc")),c=Object(o.a)(r,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("transition",{attrs:{name:"slide-right"}},[e.show?i("page-content",{attrs:{mode:"dialog",title:"检查指引","on-close":e.closePopup}},[!e.isLoading&&e.listData.length?i("div",{staticClass:"page-scroll"},e._l(e.listData,(function(t,a){return i("div",{key:a},[i("item",{attrs:{border:"bottom","icon-right":t.subitem&&t.subitem.length?t.isOpen?"arrow-up":"arrow-down":"arrow-right"},on:{click:function(i){e.clickItem(t)}}},[i("div",{staticClass:"item-text fw-b color-blue one-line"},[e._v(e._s(t.item_name))])]),t.isOpen?e._l(t.subitem,(function(t,a){return i("div",{key:a,staticClass:"sublist"},[i("item",{staticClass:"pl0",attrs:{border:"bottom","icon-right":t.subitem&&t.subitem.length?t.isOpen?"arrow-up":"arrow-down":"arrow-right"},on:{click:function(i){e.clickItem(t)}}},[i("div",{staticClass:"item-text checkitem-list-name"},[e._v(e._s(t.item_name))])]),t.isOpen?e._l(t.subitem,(function(t,a){return i("div",{key:a,staticClass:"sublist"},[i("item",{staticClass:"pl0",attrs:{border:"bottom","icon-right":t.subitem&&t.subitem.length?t.isOpen?"arrow-up":"arrow-down":"arrow-right"},on:{click:function(i){e.clickItem(t)}}},[i("div",{staticClass:"item-text checkitem-list-name"},[e._v(e._s(t.item_name))])]),t.isOpen?e._l(t.subitem,(function(t,a){return i("div",{key:a,staticClass:"sublist"},[i("item",{staticClass:"pl0",attrs:{border:"bottom","icon-right":t.subitem&&t.subitem.length?t.isOpen?"arrow-up":"arrow-down":"arrow-right"},on:{click:function(i){e.clickItem(t)}}},[i("div",{staticClass:"item-text checkitem-list-name"},[e._v(e._s(t.item_name))])])],1)})):e._e()],2)})):e._e()],2)})):e._e()],2)}))):e._e(),i("loading-status",{attrs:{"is-loading":e.isLoading,"is-empty":!e.listData.length,"empty-text":"没有检查项"}})],1):e._e()],1)}),[],!1,null,"74102c05",null).exports,l=!1;l||(l=new(n.default.extend(c))({el:document.createElement("div")}),document.body.appendChild(l.$el));var d=l,u=i("515e"),p=i("91c1").a,h=(i("dc98"),Object(o.a)(p,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.show?i("div",{staticClass:"main",style:{top:e.contentTop+"px"}},[i("i",{staticClass:"arrow"}),i("div",{staticClass:"content",on:{click:function(t){return t.target!==t.currentTarget?null:e.closePopup(t)}}},[i("transition",{attrs:{name:"slide-down"},on:{enter:function(t){e.isOpening=!0},"after-enter":function(t){e.isOpening=!1},leave:function(t){e.isClosing=!0},"after-leave":e.afterClose}},[e.showList?i("div",{staticClass:"box",style:{height:e.listHeight+"px"}},e._l(e.data,(function(t,a){return i("div",{key:a,class:{"border-bottom":e.data.length>1,"box-single":1===e.data.length}},[i("div",{staticClass:"detail-hd",class:{"border-bottom":e.data.length<=1,"detail-hd-single":e.data.length<=1},on:{click:function(i){e.toggleItem(t)}}},[e.data.length>1?i("i",{class:{"detail-arrow-right":!t.isOpen,"detail-arrow-down":t.isOpen}}):e._e(),i("div",{staticClass:"detail-title"},[e._v(e._s(t.name))])]),e.data.length<=1||t.isOpen?i("div",{staticClass:"detail-bd",class:{"detail-bd-single":e.data.length<=1}},[e._l(t.textArr,(function(t,a){return i("p",{key:a,staticClass:"text-line"},[e._v("\n              "+e._s(t)+"\n            ")])})),i("item-img-list",{attrs:{editabled:!1},model:{value:t.contentImage,callback:function(i){e.$set(t,"contentImage",i)},expression:"item.contentImage"}}),i("loading-status",{attrs:{"is-empty":!t.textArr.length&&!t.contentImage.length,"empty-text":"PC端未设置检查指引"}})],2):e._e()])}))):e._e()])],1)]):e._e()}),[],!1,null,"2cac8864",null).exports),m=!1;m||(m=new(n.default.extend(h))({el:document.createElement("div")}),document.body.appendChild(m.$el));var f=m,g={name:"CheckGuide",components:{},props:{module:{type:String,default:""},mode:{type:String,default:"page"},itemId:{type:String,default:""},itemIds:{type:Array,default:function(){return[]}},batchId:{type:String,default:""},sectionId:{type:String,default:""},options:{type:Array,default:function(){return[]}},optionsPromise:{type:Function,default:function(){}},beforeOpen:{type:Function,default:function(){}}},data:function(){return{isLoading:!1}},methods:{openCheckGuide:function(){var e=this,t=this.beforeOpen&&this.beforeOpen();t instanceof Promise||(t=Promise.resolve(t)),t.then((function(t){!1!==t&&("drop"===e.mode?f.openPopup({itemIds:e.itemIds,el:e.$refs["check-guide-btn"],options:e.options}):("templet-plan"===e.module?a.a.when(!1):e.itemId&&e.sectionId?s.a.hasChildSectionCheckItem(e.itemId,e.sectionId):e.itemId?s.a.hasChildCheckItem(e.itemId):a.a.when(!0)).then((function(t){t?d.openPopup({module:e.module,itemId:e.itemId,batchId:e.batchId,sectionId:e.sectionId,options:e.options}):u.a.openPopup({itemId:e.itemId,module:e.module})})))}))}}},b=Object(o.a)(g,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{ref:"check-guide-btn",staticClass:"header-btn",on:{click:function(t){e.openCheckGuide()}}},[i("icon",{attrs:{name:"nav-info"}})],1)}),[],!1,null,null,null);t.a=b.exports},f3d7:function(e,t,i){"use strict";i("9120")},f53a:function(e,t,i){(e.exports=i("690e")(!1)).push([e.i,".zjapp .number-keyboard-con[data-v-6337f428]{position:absolute;left:0;bottom:0;width:100%;padding:4px 0;background-color:#fafafa;box-shadow:0 -4px 8px 0 rgba(0,0,0,.08);-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.zjapp .ios-bezel-less[data-v-6337f428]{padding-bottom:34px}.zjapp .keyboard-row[data-v-6337f428],.zjapp .keys-row[data-v-6337f428]{display:flex}.zjapp .row-span-1[data-v-6337f428]{flex:1}.zjapp .row-span-2[data-v-6337f428]{flex:2}.zjapp .row-span-3[data-v-6337f428]{flex:3}.zjapp .keys[data-v-6337f428]{flex:1;height:48px;line-height:48px;text-align:center;font-size:18px;margin:4px;border:1px solid rgba(5,5,5,.07);border-radius:8px;background-color:#fff;padding:0}.zjapp .keys-next[data-v-6337f428],.zjapp .keys-prev[data-v-6337f428]{font-size:14px;color:#4275e8}.zjapp .keys-ok[data-v-6337f428]{font-size:14px;color:#999}.zjapp .keys-delete[data-v-6337f428]{color:#999}.zjapp .icon[data-v-6337f428]{pointer-events:none}.zjapp .icon-keyboard-close[data-v-6337f428]{font-size:20px;color:#999}.zjapp .icon-keyboard-delete[data-v-6337f428]{vertical-align:top;margin-top:13px;font-size:14px;color:#333}.zjapp .activing[data-v-6337f428]{background-color:#ececec}.zjapp .disabled[data-v-6337f428]{color:#999}.zjapp .col[data-v-6337f428]{display:flex;flex-direction:column;justify-content:center;align-items:center;height:104px;line-height:36px}",""])},fda1:function(e,t,i){var a=i("19a7");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);(0,i("85cb").default)("cb2469e8",a,!0,{sourceMap:!1,shadowMode:!1})},fe13:function(e,t,i){"use strict";var a=i("992a").a,s=i("17cc"),n=Object(s.a)(a,(function(){var e=this,t=e.$createElement;return(e._self._c||t)("item",{attrs:{label:e.title,text:e.hasSelected?e.selectedText:"",mode:e.mode,editabled:!0,placeholder:e.placeholder,"form-check":e.formCheck},on:{click:e.open}},[e.$slots.title?e._t("title",null,{slot:"left"}):e._e()],2)}),[],!1,null,null,null);t.a=n.exports},fe9e:function(e,t,i){"use strict";i("3cd8")}}]);