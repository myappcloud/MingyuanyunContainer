(window.webpackJsonp_module_entry_zjapp_=window.webpackJsonp_module_entry_zjapp_||[]).push([["chunk-5b5ae2c2","chunk-2709989a","chunk-2d2263f6"],{"0118":function(e,t,i){(e.exports=i("690e")(!1)).push([e.i,".zjapp .check-guide-detail-box[data-v-399de7d9]{display:flex;flex-direction:column;width:100%;flex:1;overflow:auto;background-color:#f2f2f2}.zjapp .check-guide-detail-hd[data-v-399de7d9]{margin-left:30px;padding:25px 30px 5px 0}.zjapp .check-guide-detail-title[data-v-399de7d9]{margin:0;line-height:20px;font-size:18px;color:#111;font-weight:700;word-break:break-all}.zjapp .check-guide-detail-info[data-v-399de7d9]{line-height:20px;font-size:14px;color:#8c8c8c}.zjapp .check-guide-detail-content[data-v-399de7d9]{padding:30px;line-height:30px;color:#333;font-size:16px}.zjapp .check-guide-detail-content p[data-v-399de7d9]{margin-bottom:30px;min-height:1em}.zjapp .check-guide-detail-content img[data-v-399de7d9]{max-width:100%}.zjapp .check-guide-detail-content .img-not-ready[data-v-399de7d9]{width:80px;height:auto}.zjapp .error[data-v-399de7d9]{max-width:50%}",""])},"013c":function(e,t,i){(e.exports=i("690e")(!1)).push([e.i,".zjapp .f-blue[data-v-342fc3b4]{color:#4275e8!important}.zjapp .f-gray[data-v-342fc3b4]{color:#666}",""])},"017a":function(e,t,i){(e.exports=i("690e")(!1)).push([e.i,".zjapp .item[data-v-1a7b90ef]{align-items:center}.zjapp .icon[data-v-1a7b90ef]{color:#4275e8}.zjapp .item>[class*=icon-checkbox][data-v-1a7b90ef]{margin-right:10px}.zjapp .item-disabled>[class*=icon-checkbox][data-v-1a7b90ef]{color:#b2b2b2;background-color:#b2b2b2}",""])},"051c":function(e,t,i){"use strict";(function(e){i("5ab2"),i("6d57"),i("e10e");var a=i("28f8"),n=i("bf9f"),r=i("e89f"),o=i("e2a7"),s=i("4360"),c=i("e223");function l(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,a)}return i}t.a={store:s.a,components:{PopupHasHeader:n.a,Drawing:c.a},mixins:[r.a],data:function(){return{show:!1,height:"70%",mode:"",url:"",points:[],folder:"",maxMarks:1/0,onmark:function(){}}},methods:{openPopup:function(e){return this.mode=e.mode,this.url=e.url,this.points=e.points,this.folder=e.folder,this.maxMarks=isNaN(e.maxMarks)?1/0:e.maxMarks,this.onmark=e.onmark,this.show=!0,this.$emit("open"),this},closePopup:function(){this.show=!1,this.$emit("close")},undo:function(){this.points.pop()},sure:function(){this.points.length?(this.closePopup(),this.onmark&&this.onmark(this.points)):o.a.alert("请先在户型图标记位置")},pointLight:function(t){this.points=e.map(this.points,(function(e,i){var n=function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?l(Object(i),!0).forEach((function(t){Object(a.a)(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):l(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}({},e);return t===i?n.color="#4275e8":n.found?n.color="#14ff56":n.color="#ff4546",n}))},onclick:function(e){var t=this;if("view"===this.mode){if(e.clickPoint&&"points"===e.clickPoint.tag){var i=e.clickPoint.index;this.pointLight(i)}}else if("mark-val-group"===this.mode){if(this.points.length>=maxMarks)return void o.a.alert("爆点个数不能大于实测点数");this.points.push({x:e.x,y:e.y})}else if("multiple-remark"===this.mode)this.points.push({x:e.x,y:e.y});else{var a={x:e.x,y:e.y};this.points=[a],setTimeout((function(){t.closePopup(),t.onmark&&t.onmark(a)}),200)}}}}}).call(this,i("391c"))},"052b":function(e,t,i){var a=i("013c");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);(0,i("85cb").default)("3072aa28",a,!0,{sourceMap:!1,shadowMode:!1})},"09d66":function(e,t,i){"use strict";i("2cdb")},"0aac":function(e,t,i){"use strict";i("2814")},"0bfc":function(e,t,i){"use strict";i("3d1d")},"0c52":function(e,t,i){(e.exports=i("690e")(!1)).push([e.i,".zjapp .app-stepper[data-v-03df57b7]{display:inline-block;width:110px;height:34px;margin:-2px 0;white-space:nowrap;font-size:0;line-height:0;vertical-align:top}.zjapp .app-stepper .number-input[data-v-03df57b7]{width:51px;height:34px;border:1px solid #dcdcdc;border-radius:0;font-size:14px;text-align:center;background-color:#fff;color:#111;box-sizing:border-box}.zjapp .app-stepper .number-input-focus[data-v-03df57b7]{border-color:#4275e8}.zjapp .btn-add[data-v-03df57b7],.zjapp .btn-minus[data-v-03df57b7]{display:inline-block;width:28px;height:34px;line-height:34px;padding:0;border:1px solid #dcdcdc;color:#666;text-align:center;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;box-sizing:border-box;background-color:#fff}.zjapp .btn-minus[data-v-03df57b7]{border-right:none;border-radius:4px 0 0 4px}.zjapp .btn-add[data-v-03df57b7]{border-left:none;border-radius:0 4px 4px 0}.zjapp .icon-add[data-v-03df57b7],.zjapp .icon-minus[data-v-03df57b7]{font-size:11px;vertical-align:top;display:inline-block;margin-top:10.5px}.zjapp .disabled[data-v-03df57b7]{color:#c8c8c8}.zjapp .activing[data-v-03df57b7]{color:#4275e8}",""])},"0cfe":function(e,t,i){"use strict";var a=i("89b5").a,n=(i("bd9b"),i("17cc")),r=Object(n.a)(a,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.isLoading?e._e():i("div",{staticClass:"page-scroll"},[e.mmkvItemTips?i("div",{staticClass:"set-view-tip"},[e._v("\n    若不显示该检查项，请取消勾选\n    "),i("icon",{attrs:{name:"nav-close"},on:{click:function(t){e.closeTip()}}})],1):e._e(),i("tree",{attrs:{data:e.checkItems,"is-checkbox":!0},on:{onSelect:e.onSelect}}),i("loading-status",{attrs:{"is-empty":!e.checkItems.length,"empty-text":"没有检查项"}})],1)}),[],!1,null,"268d3c8b",null);t.a=r.exports},"0f7b":function(e,t,i){"use strict";i("f548"),i("163d");var a,n,r={name:"AppStepper",components:{NumberInput:i("6948").a},props:{value:{type:[String,Number],default:""},max:{type:[String,Number],default:200},range:{type:Array}},data:function(){return{addActiving:!1,minusActiving:!1}},computed:{rangeMin:function(){return this.range&&this.range[0]||0},rangeMax:function(){return this.range&&this.range[1]?this.range[1]:this.max},allowAdd:function(){return""!==this.value&&this.value<this.rangeMax},allowMinus:function(){return""!==this.value&&this.value>this.rangeMin}},methods:{onChange:function(e){e&&(e=String(e).replace(/\D/g,"")),parseInt(e,10)>parseInt(this.max,10)&&(e=this.max),this.$emit("input",Number(e)),this.$emit("change",Number(e))},add:function(){if(this.allowAdd){var e=parseInt(this.value,10)+1;this.isInRange(e)&&(this.$emit("input",e),this.$emit("change",e)),this.setActiving("add")}},minus:function(){if(this.allowMinus){var e=parseInt(this.value,10)-1;this.isInRange(e)&&(this.$emit("input",e),this.$emit("change",e)),this.setActiving("minus")}},isInRange:function(e){return e>=this.rangeMin&&e<=this.rangeMax},setActiving:function(e){var t=this;e&&("minus"===e?(this.minusActiving=!0,clearTimeout(n),n=setTimeout((function(){t.minusActiving=!1}),300)):(this.addActiving=!0,clearTimeout(a),a=setTimeout((function(){t.addActiving=!1}),300)))}}},o=(i("91cb"),i("17cc")),s=Object(o.a)(r,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"app-stepper"},[i("button",{staticClass:"btn-minus",class:{disabled:!e.allowMinus,activing:e.minusActiving},on:{click:e.minus}},[i("icon",{attrs:{name:"minus"}})],1),i("number-input",{attrs:{value:e.value,type:"int",range:e.range},on:{input:e.onChange}}),i("button",{staticClass:"btn-add",class:{disabled:!e.allowAdd,activing:e.addActiving},on:{click:e.add}},[i("icon",{attrs:{name:"add"}})],1)],1)}),[],!1,null,"03df57b7",null);t.a=s.exports},"0fef":function(e,t,i){(e.exports=i("690e")(!1)).push([e.i,".zjapp .virtual-list-wrapper[data-v-6215c9e4]{width:100%;overflow:auto;position:relative}.zjapp .virtual-list-wrapper .list-phantom[data-v-6215c9e4]{position:absolute;top:0;left:0;right:0;z-index:-1}.zjapp .virtual-list-wrapper .list-content[data-v-6215c9e4]{position:absolute;top:0;left:0;right:0}.zjapp .virtual-list-wrapper .list-content .list-item[data-v-6215c9e4]{display:flex;align-items:center;box-sizing:border-box}",""])},1059:function(e,t,i){"use strict";var a=i("ebf1").a,n=(i("9dea"),i("17cc")),r=Object(n.a)(a,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"redio-box-group",class:"align-"+e.align+" "+e.customClass},e._l(e.options,(function(t,a){return i("span",{key:a,staticClass:"radio-box",class:{selected:"array"===e.optionsType?e.value===t:"object"===e.optionsType&&e.value===a},on:{click:function(t){e.onSelect(a)}}},[e._v("\n    "+e._s(t)+"\n  ")])})))}),[],!1,null,"b0a30924",null);t.a=r.exports},"105d":function(e,t,i){var a=i("99f0");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);(0,i("85cb").default)("e4faa610",a,!0,{sourceMap:!1,shadowMode:!1})},"14b8":function(e,t,i){(e.exports=i("690e")(!1)).push([e.i,"[data-v-268d3c8b] .list-tree .item-text{font-size:14px;padding-right:24px}[data-v-268d3c8b] .list-tree .item{padding:5px 15px}[data-v-268d3c8b] .list-tree .tree-checkbox{padding:11px 16px}.zjapp .layout-main[data-v-268d3c8b] .layout-content{display:flex;flex-direction:column}.zjapp .page-scroll[data-v-268d3c8b]{display:flex;flex-direction:column;flex:1;overflow:auto;scroll-behavior:smooth;transform:translateZ(0)}.zjapp .ui-loading-status[data-v-268d3c8b]{flex:auto;height:calc(100vh - 148px)}.zjapp .set-usual-items-header[data-v-268d3c8b]{font-size:18px;padding:0 12px}.zjapp .set-view-tip[data-v-268d3c8b]{position:reslative;top:0;width:100%;height:30px;line-height:30px;background-color:#ffdfae;font-size:14px;color:#ff8a36;z-index:1000;padding-left:15px}.zjapp .set-view-tip i[data-v-268d3c8b]{position:absolute;right:8px;top:0;padding:7px}",""])},"17be":function(e,t,i){"use strict";var a=i("4c09"),n=i("fbe7").a,r=(i("506f"),i("2982"),i("17cc")),o=Object(r.a)(n,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"app-voice-record"},[i("div",{staticClass:"record-btn",on:{click:e.startVoice}},[i("icon",{staticClass:"record-icon",attrs:{name:"mic"}}),e._v("点击录入语音\n  ")],1),i("van-popup",{staticClass:"app-voice-record-dialog",attrs:{"get-container":"body",round:"",closeable:"",position:"bottom"},on:{close:e.close},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[i("div",{staticClass:"voice-record-dialog"},[i("p",[e._v("正在录音...")]),i("div",{staticClass:"record-animation"},[e.show?i("app-voice-animation",{attrs:{volume:e.volume}}):e._e()],1),i("div",{staticClass:"record-btn",on:{click:e.btnClose}},[i("icon",{staticClass:"record-icon",attrs:{name:"mic"}}),e._v("完成语音录入\n      ")],1)])])],1)}),[],!1,null,"1ed5298e",null).exports,s=i("6807"),c=i("4ad6"),l={name:"AppVoice",components:{AppVoiceRecord:o,AppVoicePlay:s.a},props:{value:{type:Array,default:function(){return[]}}},data:function(){return{isExistVoice:!1}},computed:{UsingVoiceInput:function(){return Boolean(this.$store.state.global.allGrayRelease.UsingVoiceInput)}},created:function(){this.isExistVoice=c.a.isExistVoice()},methods:{recordSuccess:function(e){var t,i=(t=[]).concat.apply(t,Object(a.a)(this.value).concat([e]));this.$emit("change",i)},delteVoice:function(e){var t=this.value.filter((function(t){return t.id!==e}));this.$emit("change",t)}}},u=(i("bc35"),Object(r.a)(l,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"app-voice"},[!e.value.length&&e.UsingVoiceInput&&e.isExistVoice?i("app-voice-record",{on:{change:e.recordSuccess}}):e._e(),e.value.length?i("div",{staticClass:"voice-play"},[i("app-voice-play",{attrs:{value:e.value,"is-delete":!0},on:{"delte-voice":e.delteVoice}})],1):e._e()],1)}),[],!1,null,"b02a2dfc",null));t.a=u.exports},"19a7":function(e,t,i){(e.exports=i("690e")(!1)).push([e.i,".zjapp .redio-box-group[data-v-b0a30924]{font-size:0;margin-top:-10px}.zjapp .redio-box-group.align-l[data-v-b0a30924]{text-align:left}.zjapp .redio-box-group.align-r[data-v-b0a30924]{text-align:right}.zjapp .radio-box[data-v-b0a30924]{display:inline-block;height:34px;line-height:32px;min-width:60px;padding:0 5px;margin:10px 0 0 10px;border:1px solid #d9d9d9;background:#fff;color:#666;vertical-align:top;font-size:14px;text-align:center;border-radius:3px}.zjapp .radio-box[data-v-b0a30924]:first-child{margin-left:0}.zjapp .radio-box.selected[data-v-b0a30924]{border-color:#4275e8;color:#4275e8}",""])},"1a09":function(e,t,i){"use strict";i("4e60")},"1d0a":function(e,t,i){(e.exports=i("690e")(!1)).push([e.i,".zjapp .weiget-box[data-v-5920a10e]{display:flex;flex:1;flex-direction:column;overflow:hidden}[data-v-5920a10e] .app-search-bar .border-bottom{background-image:none}",""])},"1d8e":function(e,t,i){(e.exports=i("690e")(!1)).push([e.i,".zjapp .checkitem-box[data-v-422b1b31]{width:100%;flex:1;display:flex;flex-direction:column}.zjapp .flex-box[data-v-422b1b31]{flex:1;display:flex;align-self:center;justify-content:center}.zjapp .tab-box[data-v-422b1b31]{overflow:auto;padding-bottom:50px}.zjapp .van-tabs[data-v-422b1b31] {width:100%;flex:1}.zjapp .van-tabs[data-v-422b1b31] .van-tabs__nav{padding-left:15px;padding-right:0}.zjapp .van-tabs[data-v-422b1b31] .van-tabs__nav .van-tab{flex:0 0 90px!important}.zjapp .van-tabs[data-v-422b1b31] .van-tabs__nav .van-tab:first-child{flex:0 0 auto!important;max-width:85px;margin:0 10px 0 0;padding-left:0}.zjapp .van-tabs[data-v-422b1b31] .van-tabs__wrap{height:46px;padding-top:4px;padding-right:16px}.zjapp .van-tabs[data-v-422b1b31] .van-hairline--top-bottom:after{border-top-width:0}.zjapp .van-tabs[data-v-422b1b31] .van-cell{flex-shrink:0;font-size:14px;padding:8px 16px}.zjapp .van-tabs[data-v-422b1b31] .van-cell .icon-qualified{color:#4275e8}.zjapp .van-tabs[data-v-422b1b31] .van-cell__title{white-space:nowrap!important;overflow:hidden!important;text-overflow:ellipsis!important}",""])},"1da2":function(e,t,i){var a=i("3643");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);(0,i("85cb").default)("7d0a49d9",a,!0,{sourceMap:!1,shadowMode:!1})},"1f8b":function(e,t,i){"use strict";i("7fa9")},"21c00":function(e,t,i){var a=i("d042");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);(0,i("85cb").default)("1343ee03",a,!0,{sourceMap:!1,shadowMode:!1})},2258:function(e,t,i){(e.exports=i("690e")(!1)).push([e.i,".zjapp .body-box[data-v-8dab4862]{display:flex;flex-direction:column;width:100%;flex:1}",""])},"23b12b":function(e,t,i){"use strict";i.r(t);var a=i("6097").a,n=(i("5422"),i("17cc")),r=Object(n.a)(a,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("page-content",{attrs:{title:"登记问题","show-go-root":!0}},[e.problemData.checkItem&&e.problemData.checkItem.id?i("div",{staticClass:"header-btn",attrs:{slot:"header-bar-right"},on:{click:e.onShowCheckGuideDetail},slot:"header-bar-right"},[i("icon",{attrs:{name:"nav-info"}})],1):e._e(),e.isLoading?e._e():i("div",{staticClass:"page-scroll"},[i("item",{staticClass:"p15"},[i("item-img-list",{ref:"check-edit-item-img",attrs:{"allow-multi-select":!0,maxlength:15,"track-text":"现场检查"},on:{callback:e.saveProblem},model:{value:e.problemData.image_file,callback:function(t){e.$set(e.problemData,"image_file",t)},expression:"problemData.image_file"}})],1),i("div",{staticClass:"mt10"},[e.allowSelectPlace?i("item",{attrs:{label:"部位",text:e.problemData.place&&e.problemData.place.full_name||"",mode:"edit",editabled:"",placeholder:e.placeIsRequired?"请选择":"选填","form-check":!!e.placeIsRequired&&e.formCheck},on:{click:function(t){e.onShowSelectPositon()}}},[i("div",{staticClass:"item-label",attrs:{slot:"left"},slot:"left"},[e._v("\n          部位"),e.problemData.place_point.length>0?i("span",{staticClass:"icon-huxing-mark ml10",on:{click:function(t){t.stopPropagation(),e.onShowHuxingMark(null,null)}}},[e._v("\n            图\n          ")]):e._e()])]):e._e(),i("item",{attrs:{label:"检查项",text:e.problemData.checkItem&&e.problemData.checkItem.full_name,mode:"edit",editabled:"",placeholder:"请选择","form-check":e.formCheck},on:{click:e.showSelectCheckItem}}),e.descriptionOptions&&e.descriptionOptions.length?i("single-select",{attrs:{title:"描述",options:e.descriptionOptions,"if-toggle":!0,"line-limit":"unlimited"},on:{onSelect:e.selectDesc},model:{value:e.problemData.description,callback:function(t){e.$set(e.problemData,"description",t)},expression:"problemData.description"}}):e._e(),i("item-textarea",{attrs:{placeholder:"补充说明"},on:{change:e.saveProblem},model:{value:e.problemData.remark,callback:function(t){e.$set(e.problemData,"remark",t)},expression:"problemData.remark"}}),i("app-voice",{on:{change:e.voiceChange},model:{value:e.problemData.voice_file,callback:function(t){e.$set(e.problemData,"voice_file",t)},expression:"problemData.voice_file"}}),i("item",{attrs:{label:"严重程度",mode:"edit"}},[i("div",{staticClass:"item-con",attrs:{slot:"right"},slot:"right"},[i("radio-box",{attrs:{options:e.edOptions},on:{onSelect:e.saveProblem},model:{value:e.problemData.level,callback:function(t){e.$set(e.problemData,"level",t)},expression:"problemData.level"}})],1)]),i("item",{attrs:{label:"整改期限",mode:"edit"}},[i("template",{slot:"right"},[i("div",{staticClass:"item-con align-r"},[i("app-stepper",{staticClass:"date",attrs:{max:"999"},model:{value:e.problemData.deadline,callback:function(t){e.$set(e.problemData,"deadline",t)},expression:"problemData.deadline"}})],1),i("div",{staticClass:"item-font ml5"},[e._v("天")])])],2),i("item-textarea",{attrs:{placeholder:"整改要求"},on:{change:e.saveProblem},model:{value:e.problemData.repair_requirements,callback:function(t){e.$set(e.problemData,"repair_requirements",t)},expression:"problemData.repair_requirements"}}),i("user-select",{attrs:{title:"整改人",multi:!1,options:e.repairOptions,memory:!0,"before-open":e.isCheckItemSelected,"form-check":e.formCheck},on:{onSelect:e.selectRepair},model:{value:e.problemData.repair_set,callback:function(t){e.$set(e.problemData,"repair_set",t)},expression:"problemData.repair_set"}}),i("single-select",{attrs:{"if-toggle":!0,title:"责任单位",options:e.contractorOptions,"before-open":e.isCheckItemSelected},on:{onSelect:e.selectContractor},model:{value:e.problemData.contractor,callback:function(t){e.$set(e.problemData,"contractor",t)},expression:"problemData.contractor"}}),i("user-select",{attrs:{title:"复验人",multi:!0,options:e.reinspectOptions,memory:!0,max:4,"max-tip":"最多4个复验人","before-open":e.isCheckItemSelected,"form-check":e.formCheck},on:{onSelect:e.selectReinspect},model:{value:e.problemData.reinspect_set,callback:function(t){e.$set(e.problemData,"reinspect_set",t)},expression:"problemData.reinspect_set"}}),i("user-select",{attrs:{memory:!0,title:"抄送人",multi:!0,options:e.ccOptions,"before-open":e.isCheckItemSelected},on:{onSelect:e.selectCc},model:{value:e.problemData.cc_set,callback:function(t){e.$set(e.problemData,"cc_set",t)},expression:"problemData.cc_set"}})],1),e.problemData.id?i("app-button-group",[i("app-button",{directives:[{name:"track",rawName:"v-track",value:"现场检查-编辑草稿问题-删除",expression:"'现场检查-编辑草稿问题-删除'"}],attrs:{type:"text"},on:{click:e.delProblem}},[e._v("\n        删除此草稿\n      ")])],1):e._e()],1),e.isLoading?e._e():i("app-button-group",{attrs:{"fixed-bottom":"",seamless:""}},[i("app-button",{directives:[{name:"track",rawName:"v-track",value:"现场检查-编辑草稿问题-暂存",expression:"'现场检查-编辑草稿问题-暂存'"}],staticStyle:{width:"50%"},attrs:{plain:""},on:{click:e.saveProblemAndBack}},[e._v("\n      暂存\n    ")]),i("app-button",{on:{click:e.submit}},[e._v(" 提交 ")])],1),i("place-select",{ref:"place-select",attrs:{selected:e.problemData.place,"project-id":e.problemData.proj_id,"section-id":e.problemData.bidsection_id},on:{onChange:e.setPostion}}),i("checkitem-select",{ref:"checkitem-select",attrs:{selected:e.problemData.checkItem,module:"check","section-id":e.problemData.bidsection_id,"selected-desc":e.problemData.description},on:{onSelect:e.onCheckitemSelect}}),i("guide-detail",{ref:"guide-detail",attrs:{id:e.problemData.checkItem&&e.problemData.checkItem.id,module:"check"}}),i("drawing",{ref:"drawing"},[e.isBackPositon?i("span",{staticClass:"drawing-back",attrs:{slot:"header-left"},slot:"header-left"},[i("icon",{attrs:{name:"nav-back"}}),e._v("部位\n    ")],1):e._e()]),i("van-action-sheet",{staticClass:"popup-customize",attrs:{actions:e.photoActions,"cancel-text":"取消","close-on-click-action":""},on:{select:e.handlePhoto,cancel:e.onPopupPhotoSelectCancel},model:{value:e.popupPhotoVisible,callback:function(t){e.popupPhotoVisible=t},expression:"popupPhotoVisible"}}),i("loading-status",{attrs:{"is-loading":e.isLoading,"is-empty":e.$route.params.id&&!e.problemData.id,"empty-text":"这里暂无数据"}})],1)}),[],!1,null,"5325be47",null);t.default=r.exports},"242a":function(e,t,i){"use strict";var a={name:"Checkbox",props:{semiSelection:{type:Boolean,default:!1},status:{type:String,default:null},value:{type:Boolean,default:!1},text:{type:String,default:""},type:{type:String,default:"circular"}},data:function(){return{}},computed:{iconName:function(){var e="";return"circular"===this.type?e=this.value?"checkbox-checked":"checkbox":"square"===this.type&&(e=this.value?"checkbox-square-checked":"checkbox-square"),e}},methods:{semiClickHandle:function(e){if(e.stopPropagation(),this.semiSelection){var t="partSelected"===this.status||!this.value,i="partSelected"===this.status||t?"fullSelected":null;this.$emit("input",t,i),this.$emit("change",t,i)}else this.$emit("input",!this.value),this.$emit("change",!this.value)}}},n=(i("53e4"),i("17cc")),r=Object(n.a)(a,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{class:{checkbox:!e.semiSelection,semiCheckbox:e.semiSelection,"semiCheckbox-indeterminate":"partSelected"===e.status,"semiCheckbox-checked":"fullSelected"===e.status},on:{click:function(t){e.semiClickHandle(t)}}},[e.semiSelection?i("span",{staticClass:"semiCheckbox-inner"}):e._e(),e.semiSelection?e._e():i("icon",{attrs:{name:e.iconName}}),e._v(e._s(e.text)+"\n")],1)}),[],!1,null,"afcfdff2",null);t.a=r.exports},2572:function(e,t,i){"use strict";i("e56d")},2814:function(e,t,i){var a=i("5033");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);(0,i("85cb").default)("9db19832",a,!0,{sourceMap:!1,shadowMode:!1})},"286a":function(e,t,i){"use strict";(function(e){i.d(t,"a",(function(){return h}));i("5ab2"),i("e10e");var a=i("4c09"),n=(i("cc57"),i("6d57"),i("28f8")),r=(i("6a61"),i("2e91")),o=i("0e4d"),s=i("94ef"),c=i("4184"),l=i("a7c3"),u=i("eb9d");function p(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,a)}return i}function d(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?p(Object(i),!0).forEach((function(t){Object(n.a)(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):p(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var h=function(){function t(e){Object(o.a)(this,t),this.sectionId=e.sectionId,this.moduleType=e.moduleType,this.moduleName=u.b[e.moduleType],this.moduleCode=u.c[e.moduleType]}var i,n,p,h,f;return Object(s.a)(t,[{key:"getModule",value:function(){return{moduleType:this.moduleType,moduleCode:this.moduleCode,moudleName:this.moudleName}}},{key:"getSectionId",value:function(){return this.sectionId}},{key:"getVisibleConfig",value:(f=Object(r.a)(regeneratorRuntime.mark((function e(){var t,i,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.time("获取可见性配置"),t=u.d[this.moduleType]||{},i=l.a[t.mmkv_item]+"_"+this.sectionId,e.next=6,mmkv.getUserKey(i);case 6:return a=e.sent,console.timeEnd("获取可见性配置"),e.abrupt("return",a);case 11:return e.prev=11,e.t0=e.catch(0),console.log("获取可见性，报错",e.t0),mmkv.setUserKey(key,null),e.abrupt("return",null);case 16:case"end":return e.stop()}}),e,this,[[0,11]])}))),function(){return f.apply(this,arguments)})},{key:"filterVisibleData",value:function(t,i){return i?e.isEmpty(i)?[]:t=t.filter((function(e){return!!i[e.id]})):t}},{key:"getRootItemId",value:(h=Object(r.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",c.a.getRootItemId(this.moduleCode).then((function(t){var i=null;return e.isEmpty(t)||(i=t.id),i})));case 1:case"end":return t.stop()}}),t,this)}))),function(){return h.apply(this,arguments)})},{key:"getItemById",value:function(e){return c.a.getItemById(e)}},{key:"getItemByIds",value:function(e){return e=Array.isArray(e)?e:[e],c.a.getItemByIds(e)}},{key:"getSectionIsExistItemById",value:(p=Object(r.a)(regeneratorRuntime.mark((function t(i){var a,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,c.a.getSectionItemById(i,this.sectionId,this.moduleName);case 2:return a=t.sent,n=!0,e.isEmpty(a)&&(n=!1),t.abrupt("return",n);case 6:case"end":return t.stop()}}),t,this)}))),function(e){return p.apply(this,arguments)})},{key:"getSectionItemsByParentId",value:(n=Object(r.a)(regeneratorRuntime.mark((function t(i){var a;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.time("根据pid获取数据"),t.next=3,c.a.getSectionItemsByParentId(i,this.sectionId,this.moduleName,this.moduleCode);case 3:return a=t.sent,console.log("查询检查项数据",{desc:"getSectionItemsByParentId",data:a.length}),e.isEmpty(a)||(a=a.map((function(e){return d(d({},e),{},{type:u.a,checked:!1})}))),console.timeEnd("根据pid获取数据"),t.abrupt("return",a);case 8:case"end":return t.stop()}}),t,this)}))),function(e){return n.apply(this,arguments)})},{key:"setItemsIsEnd",value:(i=Object(r.a)(regeneratorRuntime.mark((function e(t){var i,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.a.getSectionItemsParentId(this.sectionId,this.moduleName);case 2:return i=e.sent,console.log("获取所有pid",{desc:"getSectionItemsParentId",data:i.length}),a={},i.forEach((function(e){a[e.parent_id]=!0})),e.abrupt("return",t.map((function(e){var t=!0;return a[e.id]&&(t=!1),d(d({},e),{},{isEnd:t})})));case 7:case"end":return e.stop()}}),e,this)}))),function(e){return i.apply(this,arguments)})},{key:"searchSectionItemsByName",value:function(e){return c.a.getSectionItemByName({name:e.name,pageSize:e.pageSize,page:e.page,sectionId:this.sectionId,type:this.moduleName,code:this.moduleCode})}},{key:"listToTree",value:function(t){if(e.isEmpty(t))return[];console.time("转为树形结构");var i=e.filter(t,(function(i){return""===i.parent_id||null===i.parent_id||void 0===i.parent_id||!e.some(t,{id:i.parent_id})})),n=e.map(i,(function(i){return i.isOpen=!0,i.children=[].concat(Object(a.a)(i.children||[]),Object(a.a)(function t(i,n){var r=[],o=e.filter(n,{parent_id:i.id});return e.each(o,(function(i){e.some(n,{parent_id:i.id})&&(i.isOpen=!0,i.children=[].concat(Object(a.a)(i.children||[]),Object(a.a)(t(i,n)))),r.push(i)})),r}(i,t))),i}));return console.timeEnd("转为树形结构"),n}}]),t}()}).call(this,i("391c"))},"28f6":function(e,t,i){var a=i("1d8e");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);(0,i("85cb").default)("18bc4400",a,!0,{sourceMap:!1,shadowMode:!1})},2982:function(e,t,i){"use strict";i("9e5c")},"2a32":function(e,t,i){"use strict";(function(e){i("5ab2"),i("e10e"),i("6d57"),i("cc57");var a,n,r,o,s,c,l=i("28f8"),u=(i("e697"),i("6a61"),i("2e91")),p=i("eb9d"),d=i("6f2b");i("a7c3");function h(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,a)}return i}function f(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?h(Object(i),!0).forEach((function(t){Object(l.a)(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):h(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}t.a={components:{VirtualList:d.a},props:{data:{type:Object},selected:{type:Object},selectedDesc:{type:Object}},data:function(){return{loading:!1,isNeedInit:!0,activeTab:"",tabList:[],isFlag:!1}},computed:{isIOS:function(){return this.$store.state.app.isIOS},length:function(){return this.tabList.length},maxScrollHeight:function(){return.7*$rootScope.viewSize.height-144}},methods:{init:(c=Object(u.a)(regeneratorRuntime.mark((function t(){var i=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.loading=!0,this.isNeedInit=!0,this.activeTab="",this.isFlag=!1,!e.isEmpty(this.selected)&&this.selected.id){t.next=9;break}return t.next=7,this.setInitData();case 7:t.next=11;break;case 9:return t.next=11,this.setDefaultData();case 11:this.loading=!1,this.$nextTick((function(){i.activeTab=i.length-1,i.$nextTick((function(){i.domIntoView(i.tabList.length-1)}))}));case 13:case"end":return t.stop()}}),t,this)}))),function(){return c.apply(this,arguments)}),setInitData:(s=Object(u.a)(regeneratorRuntime.mark((function t(){var i,a;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("初始化数据"),t.next=3,this.data.getRootItemId();case 3:if(i=t.sent,console.log("获取检查项id",i),e.isEmpty(i)){t.next=14;break}return t.next=8,this.getTabData(i);case 8:a=t.sent,console.log("获取一级检查项数据"),this.tabList=[],e.isEmpty(a)||this.addTab("请选择",a),t.next=15;break;case 14:this.tabList=[];case 15:case"end":return t.stop()}}),t,this)}))),function(){return s.apply(this,arguments)}),setDefaultData:(o=Object(u.a)(regeneratorRuntime.mark((function t(){var i,a,n,r,o,s,c=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,i=null,t.next=4,this.data.getSectionIsExistItemById(this.selected.id);case 4:if(t.sent){t.next=8;break}return console.log("检查项移除（可能标段不勾选），重置"),t.abrupt("return",this.setInitData());case 8:return t.next=10,this.data.getItemVisible(this.selected.id);case 10:if(t.sent){t.next=14;break}return console.log("检查项不可见，重置"),t.abrupt("return",this.setInitData());case 14:if(e.isEmpty(this.selectedDesc)||!this.selectedDesc.id){t.next=27;break}return i=this.selected.id,t.next=18,this.data.getDescItems(this.selected.id);case 18:if(a=t.sent,!e.isEmpty(a)){t.next=21;break}return t.abrupt("return",this.setInitData());case 21:(n=a.find((function(e){return e.id===c.selectedDesc.id}))).checked=!0,this.tabList=[],this.setTab(n,a),t.next=35;break;case 27:return i=this.selected.parent_id,t.next=30,this.getTabData(this.selected.parent_id);case 30:r=t.sent,(o=r.find((function(e){return e.id===c.selected.id}))).checked=!0,this.tabList=[],this.setTab(o,r);case 35:if(!i){t.next=46;break}return t.next=38,this.data.getItemById(i);case 38:if((s=t.sent)&&s.parent_id){t.next=42;break}return i=null,t.abrupt("continue",35);case 42:i=s.parent_id,this.setTab(s,[],"prev"),t.next=35;break;case 46:t.next=52;break;case 48:return t.prev=48,t.t0=t.catch(0),console.error("初始化失败",t.t0),t.abrupt("return",this.setInitData());case 52:case"end":return t.stop()}}),t,this,[[0,48]])}))),function(){return o.apply(this,arguments)}),domIntoView:function(e){var t=this.$refs.tabs||[];if(console.log("加载的dom元素",t),t[e]){var i=t[e].$el.querySelector(".actived");console.log("选中的dom",i),i&&(i.scrollIntoViewIfNeeded?i.scrollIntoViewIfNeeded():i.scrollIntoView())}},addTab:function(e,t,i){"prev"===i?this.tabList.unshift({name:e,children:t}):this.tabList.push({name:e,children:t})},clearTab:function(e){this.tabList.splice(e+1)},updateTab:function(e,t){this.$set(this.tabList,t,f(f({},this.tabList[t]),e))},setTab:function(e,t,i){this.addTab(e.name,t,i),"prev"===i?this.updateTab(e,0):this.updateTab(e,this.length-1)},changeTab:(r=Object(u.a)(regeneratorRuntime.mark((function t(i){var a,n,r=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.activeTab=i,a=this.tabList[i],!e.isEmpty(a.children)){t.next=10;break}return t.next=5,this.getTabData(a.parent_id);case 5:(n=t.sent).find((function(e){return e.id===a.id})).checked=!0,this.updateTab({children:n},i),this.$nextTick((function(){r.domIntoView(i)}));case 10:case"end":return t.stop()}}),t,this)}))),function(e){return r.apply(this,arguments)}),getTabData:(n=Object(u.a)(regeneratorRuntime.mark((function e(t){var i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.data.getItemsData(t);case 2:return i=e.sent,console.log("获取到检查项数据"),e.abrupt("return",i);case 5:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)}),onSelectPositionItem:(a=Object(u.a)(regeneratorRuntime.mark((function t(i,a,n){var r,o,s,c=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.isEmpty(i)&&!this.isFlag){t.next=2;break}return t.abrupt("return");case 2:if(this.isFlag=!0,a.forEach((function(e){return e.checked=!1})),i.checked=!0,this.updateTab(i,n),this.clearTab(n),i.type!==p.e){t.next=12;break}return this.isFlag=!1,r=this.tabList[n-1],o={id:r.id,full_name:r.full_name,name:r.name,code:r.code,parentId:r.parent_id,parent_id:r.parent_id},t.abrupt("return",this.$emit("change",{checkItem:o,questionItem:i,questionItems:a}));case 12:return t.next=14,this.getTabData(i.id);case 14:if(s=t.sent,this.isFlag=!1,!e.isEmpty(s)){t.next=18;break}return t.abrupt("return",this.$emit("change",{checkItem:i}));case 18:this.addTab("请选择",s),this.$nextTick((function(){c.changeTab(n+1)}));case 20:case"end":return t.stop()}}),t,this)}))),function(e,t,i){return a.apply(this,arguments)}),clearData:function(){console.log("清空检查项数据"),this.tabList=[]}}}}).call(this,i("391c"))},"2c76":function(e,t,i){"use strict";i("c070")},"2cdb":function(e,t,i){var a=i("9990");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);(0,i("85cb").default)("693aef86",a,!0,{sourceMap:!1,shadowMode:!1})},"2dd6":function(e,t,i){(e.exports=i("690e")(!1)).push([e.i,".zjapp .single-item[data-v-6920dde7]{min-height:44px}.zjapp .single-item>div[data-v-6920dde7]{display:flex}.zjapp .single-item>div>span[data-v-6920dde7]{flex:1;overflow:hidden;text-overflow:ellipsis;display:-webkit-box;-webkit-box-orient:vertical}.zjapp .single-item>div>span[data-v-6920dde7] label{color:#4174e9}.zjapp .single-item i[data-v-6920dde7]{line-height:24px;font-size:24px;color:#4275e8}.zjapp .single-item .disabled-item[data-v-6920dde7]{color:#aaa}",""])},3064:function(e,t,i){(e.exports=i("690e")(!1)).push([e.i,".zjapp .app-voice-animation[data-v-b9ac6dc2]{width:100%;display:flex;flex-direction:row;justify-content:space-between;align-items:center;height:100%;padding:0 80px}.zjapp .app-voice-animation>li[data-v-b9ac6dc2]{float:left;display:block;width:1%;height:30%;border-radius:.4vh;background:#4275e8;border-radius:2px;transition:height .2s ease-in}",""])},"3156b":function(e,t,i){"use strict";i("163d");var a={name:"SingleSelectItem",props:{item:{type:Object,default:function(){return{id:"",name:""}}},checked:{type:Boolean,default:!1},renderField:{type:String,default:"name"},lineLimit:{type:[Number,String],default:1}},methods:{selectItem:function(e){e.disabled||this.$emit("click",e)}}},n=(i("9788"),i("17cc")),r=Object(n.a)(a,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("van-cell",{staticClass:"single-item",attrs:{clickable:!0},on:{click:function(t){e.selectItem(e.item)}}},[i("span",{class:{"disabled-item":e.item.disabled},style:{"-webkit-line-clamp":"unlimited"===e.lineLimit?"initial":e.lineLimit},domProps:{innerHTML:e._s(e.item[e.renderField])}}),e.checked?i("van-icon",{attrs:{name:"success"}}):e._e()],1)}),[],!1,null,"6920dde7",null);t.a=r.exports},"34b6":function(e,t,i){"use strict";var a=i("d23f").a,n=(i("c6cf"),i("17cc")),r=Object(n.a)(a,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("popup-has-header",{attrs:{height:"93%",title:e.title},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[e.multi?i("template",{slot:"header_left"},[i("span",{staticClass:"f-gray",on:{click:e.closeEvent}},[e._v("取消")])]):e._e(),i("template",{slot:"header_right"},[e.multi?i("div",{staticClass:"f-blue",attrs:{slot:"header-bar-right"},on:{click:e.onConfirm},slot:"header-bar-right"},[e._v("\n        确定("+e._s(e.selected.length)+")\n      ")]):e._e()]),i("template",{slot:"body_main"},[i("div",{staticClass:"body-box"},[i("app-search-bar",{ref:"app-search-bar",attrs:{placeholder:"搜索","history-key":e.storageKey},on:{changeSearchStatus:e.onSearchTypeChange},model:{value:e.keyword,callback:function(t){e.keyword=t},expression:"keyword"}}),!e.searchStatus||e.searchStatus&&e.keyword?[e.multi&&e.selected.length?i("div",{ref:"select-box",staticClass:"selected"},[i("label",{staticClass:"selected-label"},[e._v("已选：")]),i("div",{staticClass:"select_result"},e._l(e.selected,(function(t){return i("span",{key:t.id,staticClass:"selected-item",class:{"selected-item-disabled":t.disabled}},[e._v("\n                "+e._s(t.name)+"\n                "),i("icon",{staticClass:"selected-remove",attrs:{name:"unqualified"},on:{click:function(i){e.onSelectUser(t)}}})],1)})))]):e._e(),!e.searchStatus||e.searchStatus&&e.keyword?i("van-tabs",{model:{value:e.active,callback:function(t){e.active=t},expression:"active"}},e._l(e.roleGroup,(function(t){return i("van-tab",{key:t.id,attrs:{title:t.name}},[i("div",{staticClass:"tab-box",style:"height: "+e.maxScrollHeight+"px;"},[e.canSelectAllRole&&t.children&&t.children.length?i("item",{key:-1,attrs:{text:"全选",border:"bottom"}},[i("icon",{attrs:{slot:"icon-right",name:e.allRoleSelected?"checkbox-checked":"checkbox"},on:{click:function(t){return t.stopPropagation(),e.selectAllRole(t)}},slot:"icon-right"})],1):e._e(),31===t.id&&e.contractorGroup&&e.contractorGroup.length?[e._l(e.contractorGroup,(function(t){return[i("item",{key:t.id,attrs:{text:t.name,border:"bottom"},on:{click:function(i){e.toggleGroup(t)}}},[i("icon",{staticClass:"triangle",class:{"triangle-down":e.openSet[t.id]},attrs:{slot:"icon-left",name:"triangle-right"},slot:"icon-left"}),e.multi?i("icon",{attrs:{slot:"icon-right",name:e.groupSelectedSet[t.id]?"checkbox-checked":"checkbox"},on:{click:function(i){i.stopPropagation(),e.selectedAll(t)}},slot:"icon-right"}):e._e()],1),e.openSet[t.id]?e._l(t.children,(function(a){return i("user-item",{key:t.id+a.id,staticClass:"item-data",attrs:{"head-portrait":e.getImageThumbnail(a.head_portrait),name:a.name,post:a.post,keyword:e.keyword,multi:e.multi,selected:e.selectedSet[a.id],disabled:e.disabledSet[a.id]},on:{click:function(t){e.onSelectUser(a)}}})})):e._e()]}))]:e._l(t.children,(function(t){return i("user-item",{key:t.id,staticClass:"item-data",attrs:{"head-portrait":e.getImageThumbnail(t.head_portrait),name:(t.role_name||"")+t.name,post:t.post,keyword:e.keyword,multi:e.multi,selected:e.selectedSet[t.id],disabled:e.disabledSet[t.id]},on:{click:function(i){e.onSelectUser(t)}}})})),i("loading-status",{attrs:{"is-empty":!t.children.length,"empty-text":Boolean(e.keyword)&&t.id?"没有查询到结果":"暂无数据",type:Boolean(e.keyword)?"search":"common"}})],2)])}))):e._e()]:e._e()],2)])],2)],1)}),[],!1,null,"3ce9ba4e",null);t.a=r.exports},3518:function(e,t,i){var a=i("5454");(e.exports=i("690e")(!1)).push([e.i,".zjapp .item-user-unit[data-v-43750b3d]{position:relative;display:inline-block;vertical-align:top;font-size:0}.zjapp .item-user-unit.bg[data-v-43750b3d]{background:#f4f4f4;border-radius:4px;padding-left:6px;margin:0 5px 5px}.zjapp .item-user-name[data-v-43750b3d]{font-size:16px;display:inline-block;vertical-align:middle}.zjapp .icon-im-btn[data-v-43750b3d]{position:relative;z-index:5;display:inline-block;vertical-align:middle;width:34px;height:22px;background:url("+a(i("f77a"))+") no-repeat 6px;background-size:16px 10px}.zjapp .popup-user-im[data-v-43750b3d]{position:absolute;z-index:5;bottom:30px;left:50%;margin-left:-65px;padding:0 5px;width:130px;height:60px;background-color:rgba(0,0,0,.8);border-radius:5px}.zjapp .popup-user-im-item[data-v-43750b3d]{float:left;width:60px;height:60px;text-align:center;color:#fff;padding-top:10px}.zjapp .popup-user-im-item.disabled[data-v-43750b3d]{color:#666}.zjapp .popup-user-im-arrow[data-v-43750b3d]{position:absolute;bottom:-5px;left:50%;margin-left:-5px;border:5px solid transparent;border-bottom:none;border-top-color:rgba(0,0,0,.8)}.zjapp .popup-user-im-icon[data-v-43750b3d]{display:block;font-size:21px}.zjapp .popup-user-im-text[data-v-43750b3d]{font-size:12px;line-height:16px;margin-top:4px}.zjapp .popup-user-posi-bottom[data-v-43750b3d]{bottom:auto;top:30px}.zjapp .popup-user-posi-bottom .popup-user-im-arrow[data-v-43750b3d]{top:-5px;bottom:auto;border-top:none;border-bottom:5px solid rgba(0,0,0,.8)}",""])},3643:function(e,t,i){(e.exports=i("690e")(!1)).push([e.i,".zjapp .page-scroll[data-v-5325be47]{flex:1;overflow:auto;padding-bottom:100px;transform:translateZ(0)}.zjapp .drawing-back[data-v-5325be47]{display:flex;align-items:center}.zjapp .drawing-back .icon-nav-back[data-v-5325be47]{font-size:22px}",""])},37478:function(e,t,i){"use strict";var a=i("d866").a,n=i("17cc"),r=Object(n.a)(a,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("item",{class:e.required,attrs:{label:e.title,text:e.value&&e.value.id?e.value.name:"view"===e.mode?"无":"",mode:e.mode,editabled:e.editabled,placeholder:e.required?e.placeholder||"请选择":"选填","form-check":e.formCheck,border:e.border},on:{click:e.openSelect}}),i("popup-single-select",{ref:"popup-single-select"})],1)}),[],!1,null,null,null);t.a=r.exports},"3bff":function(e,t,i){(e.exports=i("690e")(!1)).push([e.i,".zjapp .app-voice-record-dialog{border-radius:10px 10px 0 0!important}.zjapp .voice-record-dialog{width:100%;height:250px;display:flex;align-items:center;justify-content:center;flex-direction:column}.zjapp .voice-record-dialog p{font-size:14px;color:#333;font-weight:700}.zjapp .voice-record-dialog .record-animation{width:100%;height:80px;line-height:80px}.zjapp .voice-record-dialog .record-btn{width:180px;height:39px;line-height:39px;box-sizing:content-box;background:linear-gradient(270deg,#4275e8,#2c5cf7);border-radius:4px;text-align:center;font-size:14px;color:#fff}",""])},"3c64":function(e,t,i){"use strict";i("163d");var a={name:"ItemTextarea",components:{},props:{value:{type:String,default:""},placeholder:{type:String,default:""},maxlength:{type:Number,default:200},borderBottom:{type:Boolean,default:!0}},data:function(){return{textareaHeight:40,isLock:!1,blurTime:null}},computed:{lastLength:function(){var e=this.value&&this.value.length||0,t=this.maxlength-e;return t>0?t:0}},mounted:function(){var e=this;this.$nextTick((function(){e.textareaHeight=e.$refs.rule&&e.$refs.rule.offsetHeight||40}))},methods:{onfocus:function(){var e=(new Date).getTime();this.blurTime&&e-this.blurTime<300&&window.cordova&&window.cordova.plugins&&window.cordova.plugins.Keyboard&&(this.$refs.input.blur(),window.cordova.plugins.Keyboard.close()),this.blurTime=null,this.$emit("focus")},onblur:function(){this.blurTime=(new Date).getTime(),this.$emit("blur")},setStatus:function(e){console.log(e),this.isLock=e},oninput:function(e){var t=this;setTimeout((function(){if(!t.isLock){var i=e.target.value;i.length>t.maxlength&&(i=i.substring(0,t.maxlength),t.$refs.input.value=i),t.$refs.rule.innerText=i,t.textareaHeight=t.$refs.rule&&t.$refs.rule.offsetHeight+20,t.$emit("input",i),t.$emit("change",i)}}),0)}}},n=(i("2c76"),i("17cc")),r=Object(n.a)(a,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"item-textarea",class:{"border-bottom":e.borderBottom}},[i("div",{staticClass:"item-textarea-content"},[i("textarea",{ref:"input",style:{height:e.textareaHeight+"px"},attrs:{placeholder:e.placeholder},domProps:{value:e.value},on:{focus:e.onfocus,blur:e.onblur,compositionstart:function(t){e.setStatus(!0)},compositionend:function(t){e.setStatus(!1)},input:e.oninput}}),i("div",{ref:"rule",staticClass:"rule"},[e._v("\n      "+e._s(e.value)+"\n    ")]),e.maxlength!==1/0?i("p",{staticClass:"counter"},[e._v("\n      "+e._s(e.lastLength)+"\n    ")]):e._e()])])}),[],!1,null,null,null);t.a=r.exports},"3d1d":function(e,t,i){var a=i("0fef");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);(0,i("85cb").default)("04625f49",a,!0,{sourceMap:!1,shadowMode:!1})},"3ea4":function(e,t,i){(e.exports=i("690e")(!1)).push([e.i,'.zjapp .tree-icon[data-v-792f710a]{position:relative;width:20px;height:30px;line-height:34px;color:#c8c8c8;font-size:26px}.zjapp .color-theme[data-v-792f710a]{position:relative;top:6px}.zjapp .icon-dropdown[data-v-792f710a]:before,.zjapp .icon-dropright[data-v-792f710a]:before{content:"";position:absolute;width:0;height:0;border:6px solid #c8c8c8}.zjapp .icon-dropdown[data-v-792f710a]:before{top:12px;left:0;border-left-color:transparent}.zjapp .icon-dropdown[data-v-792f710a]:before,.zjapp .icon-dropright[data-v-792f710a]:before{border-right-color:transparent;border-bottom-color:transparent}.zjapp .icon-dropright[data-v-792f710a]:before{top:8.5px;left:4px;border-top-color:transparent}.zjapp .list-tree[data-v-792f710a]{position:relative}.zjapp .tree-checkbox[data-v-792f710a]{position:absolute;right:0;top:0;padding:14px 16px}.zjapp .checkBox-right-padding[data-v-792f710a]{padding-right:50px}',""])},4184:function(e,t,i){"use strict";i("cc57");t.a={getRootItemId:function(e){return localDB.queryOne("SELECT pc.id \n                 FROM problem_class pc  where  type = ? and IFNULL(parent_id,'')=''",[e])},getSectionItems:function(e,t){return localDB.query("SELECT a.item_id, a.bidsection_id as sec_id, a.item_id, a.parent_id, a.repair, a.reinspect, a.cc, a.contractor_id\n                 FROM section_checkitem a where a.bidsection_id = ? and a.item_type = ?",[e,t])},getItems:function(e){return localDB.query("select a.id, a.code, a.name, a.full_name,a.process_mode, a.parent_id, length(ifnull(a.content,'')) as content_length,             '' as repair, '' as reinspect, '' as cc, '' as contractor_id, a.measurement_points            from problem_class a where a.type = ?  order by a.code, a.name",[e])},getItemById:function(e){return localDB.queryOne("select * from problem_class where id = ?",[e])},getItemByIds:function(e){e='"'.concat(e.join('", "'),'"');var t="select * from problem_class where id in (".concat(e,")");return localDB.query(t)},getSectionItemsByParentId:function(e,t,i,a){return localDB.query("\n        SELECT \n          pc.id,pc.parent_id,pc.name,pc.full_name\n        FROM problem_class pc\n        WHERE pc.type = ?\n        AND pc.id in (select item_id from section_checkitem bc where bc.parent_id = ? AND bc.item_type = ? AND bc.bidsection_id = ?)\n        AND length(pc.name)<>0\n        ORDER BY pc.code",[a,e,i,t])},getSectionItemsParentId:function(e,t){return localDB.query("SELECT DISTINCT parent_id FROM section_checkitem c WHERE c.bidsection_id = ? and c.item_type = ?",[e,t])},getSectionItemById:function(e,t,i){return localDB.queryOne("SELECT item_id as id\n                 FROM section_checkitem  where bidsection_id = ? and item_type = ? and item_id = ?",[t,i,e])},getSectionItemByName:function(e){e.page=e.page||1,e.pageSize=e.pageSize||1e3;var t="\n      SELECT pc.id,pc.parent_id,pc.name,pc.full_name FROM problem_class pc\n        INNER JOIN section_checkitem bc ON pc.id = bc.item_id \n        AND bc.bidsection_id = ?\n        AND bc.item_type = ?\n        WHERE pc.type = ?\n        AND pc.full_name LIKE '%".concat(e.name,"%'\n        ORDER BY pc.code\n        LIMIT ").concat((e.page-1)*e.pageSize,", ").concat(e.pageSize,"\n    ");return localDB.query(t,[e.sectionId,e.type,e.code])}}},4460:function(e,t,i){(e.exports=i("690e")(!1)).push([e.i,".zjapp .item-text[data-v-74990eb9]{padding:2px 0;margin-bottom:-4px}.zjapp .item-text .bg[data-v-74990eb9]{display:inline-block;background:#f4f4f4;border-radius:4px;padding:3px 6px;margin-bottom:4px}.zjapp .item-text .bg+.bg[data-v-74990eb9]{margin-left:4px}",""])},4717:function(e,t,i){"use strict";i("f2fd")},"4a69":function(e,t,i){"use strict";i("571f")},"4c07":function(e,t,i){"use strict";i("6f84"),i("163d");var a={name:"AppVoiceAnimation",components:{},props:{volume:{type:Number,default:30}},data:function(){return{list:[],timer:null,seekTime:null}},created:function(){this.interval()},destroyed:function(){clearInterval(this.timer)},methods:{interval:function(){var e=this;this.timer=setInterval((function(){e.randomHeight()}),200)},claerInter:function(){clearInterval(this.timer)},randomHeight:function(){var e=this,t=this.list;0===t.length&&(t=new Array(40).fill({}));var i=t.length/2;this.list=t.map((function(t,a){if(t&&t.index&&t.index>3&&t.height)return t.index=0,t;var n=Math.abs(a-i);n=Math.abs(i-n);var r=e.volume;r>50&&(r=50),r<20&&(r=20);var o=.05*r+1,s=Math.round(Math.random()*n)*o;return{height:"".concat(s,"%"),index:t.index?t.index+1:Math.round(Math.random())}}))}}},n=(i("5e21"),i("17cc")),r=Object(n.a)(a,(function(){var e=this.$createElement,t=this._self._c||e;return t("ul",{staticClass:"app-voice-animation",attrs:{id:"preloader"}},this._l(this.list,(function(e,i){return t("li",{key:i,style:{height:e.height}})})))}),[],!1,null,"b9ac6dc2",null);t.a=r.exports},"4d0e":function(e,t,i){"use strict";i.d(t,"b",(function(){return a.a})),i.d(t,"a",(function(){return p}));var a=i("6d34"),n=(i("2b45"),i("fc58"),i("6a61"),i("2e91")),r=i("0e4d"),o=i("94ef"),s=i("76ff"),c=i("4b67"),l=i("d703");function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,a=Object(l.a)(e);if(t){var n=Object(l.a)(this).constructor;i=Reflect.construct(a,arguments,n)}else i=a.apply(this,arguments);return Object(c.a)(this,i)}}var p=function(e){Object(s.a)(a,e);var t,i=u(a);function a(){return Object(r.a)(this,a),i.apply(this,arguments)}return Object(o.a)(a,[{key:"getItemsData",value:(t=Object(n.a)(regeneratorRuntime.mark((function e(t){var i,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getSectionItemsByParentId(t);case 2:return i=e.sent,e.next=5,this.getVisibleConfig();case 5:return a=e.sent,i=this.filterVisibleData(i,a),e.abrupt("return",i);case 8:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"getCheckGuideDetail",value:function(e){return this.getItemById(e)}}]),a}(i("286a").a)},"4e60":function(e,t,i){var a=i("3518");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);(0,i("85cb").default)("6d528d9e",a,!0,{sourceMap:!1,shadowMode:!1})},5033:function(e,t,i){var a=i("5454");(e.exports=i("690e")(!1)).push([e.i,".zjapp .drawing-con[data-v-fba5990a]{display:flex;flex-direction:column;align-items:center;justify-content:center;height:100%;font-size:0;line-height:0}.zjapp .drawing-con canvas[data-v-fba5990a]{display:block;height:100%;width:100%;background:url("+a(i("eb66"))+") #fff;background-size:4px 4px}.zjapp .loading-text[data-v-fba5990a]{margin-top:15px;color:#aaa}.zjapp .error-text[data-v-fba5990a],.zjapp .loading-text[data-v-fba5990a]{padding:0 15px;line-height:20px;text-align:center;font-size:16px}.zjapp .error-text[data-v-fba5990a]{color:#ff3d3d}",""])},"506f":function(e,t,i){"use strict";i("6dd9")},"528f":function(e,t,i){"use strict";var a=i("8e75").a,n=(i("f4c1"),i("17cc")),r=Object(n.a)(a,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("item",{attrs:{label:e.title,mode:e.mode,editabled:e.editabled,border:e.border},on:{click:e.openSelect}},[!e.multi&&e.title?i("div",{class:{"item-label":!0,"color-gray2":"view"===e.mode},attrs:{slot:"left"},slot:"left"},[e._v("\n      "+e._s(e.title)+"\n      "),""!==e.isRead?i("span",{staticClass:"item-status-read",class:{"color-red":!e.isRead,"color-gray2":e.isRead}},[e._v("\n        "+e._s(e.isRead?"已读":"未读")+"\n      ")]):e._e()]):e._e(),e.multi?e._e():i("div",{class:{"item-text":!0,"align-r":"edit"===e.mode,"color-gray1":"edit"===e.mode&&e.selected&&e.selected.id,"item-placeholder":"edit"===e.mode&&!(e.selected&&e.selected.id),"border-editabled":"view"===e.mode&&e.editabled},attrs:{slot:"right"},slot:"right"},[i("div",{staticClass:"item-display-flex"},[e.selected&&e.selected.id?i("div",{staticClass:"item-flex"},["edit"===e.mode?i("span",{staticClass:"bg"},[e._v(e._s(e.selected.name))]):i("check-user-contact",{attrs:{list:[e.selected]}})],1):e._e(),e.note&&e.selected&&e.selected.id?i("div",{staticClass:"item-note color-gray"},[e._v("\n          "+e._s(e.note)+"\n        ")]):e._e()]),e.selected&&e.selected.id?e._e():i("span",{class:{"item-placeholder":e.editabled&&!e.formCheck,"item-text-error":e.formCheck}},[e._v("\n        "+e._s("edit"===e.mode?e.required?"请选择":"选填":e.emptyText)+"\n      ")]),e.date&&!e.editabled?i("div",{staticClass:"color-light mt10"},[i("span",[e._v(e._s(e.date))]),e.modifyDate?i("span",{staticClass:"ml10"},[e._v("提交")]):e._e(),e.status?i("span",{staticClass:"ml10",class:e.statusClass},[e._v("\n          "+e._s(e.status)+"\n        ")]):e._e()]):e._e(),e.modifyDate&&!e.editabled?i("div",{staticClass:"color-light mt10"},[i("span",[e._v(e._s(e.modifyDate))]),i("span",{staticClass:"ml10"},[e._v("最后修改")])]):e._e()]),e.multi?i("div",{class:{"item-text":!0,"align-r":"edit"===e.mode,"color-gray1":"edit"===e.mode&&e.selected&&e.selected.length,"item-placeholder":"edit"===e.mode&&!(e.selected&&e.selected.length),"border-editabled":"view"===e.mode&&e.editabled},attrs:{slot:"right"},slot:"right"},[e.selected&&e.selected.length?["edit"===e.mode?e._l(e.selected,(function(t,a){return i("span",{key:a,staticClass:"bg"},[e._v("\n            "+e._s(t.name)+"\n          ")])})):i("check-user-contact",{attrs:{list:e.selected}})]:i("span",{class:{"item-placeholder":e.editabled&&!e.formCheck,"item-text-error":e.formCheck}},[e._v("\n        "+e._s(e.editabled?e.required?"请选择":"选填":e.emptyText)+"\n      ")])],2):e._e()]),i("popup-user-select",{ref:"popup-user-select"})],1)}),[],!1,null,"74990eb9",null);t.a=r.exports},5378:function(e,t,i){var a=i("14b8");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);(0,i("85cb").default)("300f861b",a,!0,{sourceMap:!1,shadowMode:!1})},"53e4":function(e,t,i){"use strict";i("75b9")},5422:function(e,t,i){"use strict";i("1da2")},"571f":function(e,t,i){var a=i("3ea4");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);(0,i("85cb").default)("0f7a5f2a",a,!0,{sourceMap:!1,shadowMode:!1})},"574c":function(e,t,i){(e.exports=i("690e")(!1)).push([e.i,".zjapp .item-textarea{background-color:#fff;padding:5px 15px}.zjapp .item-textarea-content{position:relative}.zjapp .item-textarea .rule,.zjapp .item-textarea textarea{width:100%;min-height:40px;line-height:20px;font-size:16px;padding:0;border:none}.zjapp .item-textarea .rule{position:absolute;top:0;left:0;visibility:hidden;word-break:break-all}.zjapp .item-textarea .counter{text-align:right;margin:0 0 -5px 0;height:15px;line-height:15px;color:#b2b2b2;font-size:12px}",""])},"574d":function(e,t,i){var a=i("9005");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);(0,i("85cb").default)("f99b0a12",a,!0,{sourceMap:!1,shadowMode:!1})},"5c87":function(e,t,i){var a=i("1d0a");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);(0,i("85cb").default)("4a8be0e4",a,!0,{sourceMap:!1,shadowMode:!1})},"5e21":function(e,t,i){"use strict";i("a45c")},6097:function(e,t,i){"use strict";(function(e){i("cc57"),i("163d"),i("6a61");var a,n,r,o=i("2e91"),s=i("07d2"),c=i("e68e"),l=i("8153"),u=i("a454"),p=i("b9a9"),d=i("b07b"),h=i("3c64"),f=i("1059"),m=i("528f"),b=i("37478"),g=i("0f7b"),v=i("17be"),x=i("fd50"),y=i("e2a7"),k=i("6144"),_=i("bc69"),w=i("3516"),S=i("5b5e"),j=i("3bd5"),I=i("59f8"),O=i("06f6"),P=i("242b"),D=i("112f"),C=i("37d5"),T=i("5ff0"),z=i("bcc7"),E=i("48f4"),R=i("a500"),$=i("c058");t.a={name:"CheckEdit",components:{AppStepper:g.a,Item:s.default,ItemImgList:c.a,PlaceSelect:l.a,GuideDetail:p.a,CheckitemSelect:d.a,ItemTextarea:h.a,SingleSelect:b.a,RadioBox:f.a,UserSelect:m.a,Drawing:u.a,AppVoice:v.a},data:function(){return{isLoading:!0,popupPhotoVisible:!1,photoActions:[],isSaving:!1,problemId:"",problemData:{},allowSelectPlace:!1,placeIsRequired:!1,descriptionOptions:[],contractorOptions:[],showContractorDialog:!1,formCheck:!1,isBackPositon:!1,handlePhotoCallback:null,handlePositionCallback:null}},computed:{edOptions:function(){return this.$store.state.global.problemLevelOptions}},watch:{isLoading:function(e){var t=this;this.$nextTick(Object(o.a)(regeneratorRuntime.mark((function i(){var a,n,r,o,s;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:e||t.problemId||!t.$refs["check-edit-item-img"]||(a=t.$store.state.global.allowSelectPictureFromAlbums.check,n=t.$store.state.global.allowSelectPictureFromBuildinAlbums.check,r=function(){a||n?(t.photoActions=[{name:"拍照",type:"photo"},{name:"拍视频",type:"video"}],a&&t.photoActions.push({name:"手机相册",type:"select"}),n&&t.photoActions.push({name:"APP相册",type:"appphoto"}),t.openPopupPhoto(o)):(t.handlePhoto({type:"photo"}),t.handlePhotoCallback=o)},o=function(){t.$nextTick((function(){t.allowSelectPlace?t.onShowSelectPositon(s):s()}))},s=function(){t.$nextTick((function(){t.showSelectCheckItem()}))},r());case 1:case"end":return i.stop()}}),i)}))))}},activated:function(){this.descriptionOptions=[],this.isSaving=!1,this.formCheck=!1;var e=this.problemId=this.$route.params.id;this.loadProblemData(e)},methods:{openPopupPhoto:function(e){this.handlePhotoCallback=e,this.popupPhotoVisible=!0},onPopupPhotoSelectCancel:function(){this.popupPhotoVisible=!1},onPopupPhotoSelectClosed:function(){},handlePhoto:(r=Object(o.a)(regeneratorRuntime.mark((function e(t){var i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=!1,e.t0=t.type,e.next="photo"===e.t0?4:"video"===e.t0?8:"select"===e.t0?12:"appphoto"===e.t0?16:20;break;case 4:return e.next=6,this.$refs["check-edit-item-img"].throttleAddImage();case 6:return i=e.sent,e.abrupt("break",20);case 8:return e.next=10,this.$refs["check-edit-item-img"].throttleAddVideo();case 10:return i=e.sent,e.abrupt("break",20);case 12:return e.next=14,this.$refs["check-edit-item-img"].throttleSelectImage();case 14:return i=e.sent,e.abrupt("break",20);case 16:return e.next=18,this.$refs["check-edit-item-img"].throttleAppImage();case 18:return i=e.sent,e.abrupt("break",20);case 20:this.onPopupPhotoSelectCancel(),console.log(this.handlePhotoCallback),i&&"function"==typeof this.handlePhotoCallback&&this.handlePhotoCallback();case 23:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)}),onShowSelectPositon:function(e){this.handlePositionCallback=e,this.$refs["place-select"].openPopup()},onShowCheckGuideDetail:function(){this.$refs["guide-detail"].openPopup()},showSelectCheckItem:function(){this.$refs["checkitem-select"].openPopup()},setPostion:function(t){var i=this;console.log("获取选择部位",t);var a={building_id:t.building.id,unit_id:t.unit.id,room_id:t.room.id,floor:t.floor.id,process_mode:"self"===t.building.type?90:null,full_name:t.full_name};this.getDiagram(a).then((function(t){if(!e.isEmpty(t))return i.onShowHuxingMark(t,a,!0).then((function(){i.problemData.drawing_file=[t],i.setPlace(a),i.$refs["place-select"].closePopup(),"function"==typeof i.handlePositionCallback&&i.handlePositionCallback()}));i.problemData.place_point=[],i.problemData.drawing_file=[],i.setPlace(a),i.$refs["place-select"].closePopup(),"function"==typeof i.handlePositionCallback&&i.handlePositionCallback()}))},loadProblemData:function(t){var i=this,a=j.a.getUser(),n=k.a.getObject(_.a.HOME_PAGE_DEFAULT_PROJECT,k.a.level.user)||{};this.isLoading=!0,(t?S.a.getCheckProblemInfo(t).then((function(e){i.allowSubmit="待提交"===e.status&&a.user_id===e.created_by,i.problemData={id:e.id,status:e.status,proj_id:e.proj_id,place:{building_id:e.building_id,unit_id:e.unit,floor:e.floor,room_id:e.room_id,full_name:e.place},bidsection_id:e.bidsection_id,batch_id:e.batch_id,batch_type:e.batch_type,created_by:e.created_by,checkItem:{id:e.item_id,name:e.item_name,full_name:e.item_full_name,parentId:e.item_parent_id,parent_id:e.item_parent_id},description:{id:e.desc_id,name:e.desc},image_file:JSON.parse(e.image_file||"[]"),remark:e.remark,repair_requirements:e.repair_requirements,level:e.emergency_degree||"一般",deadline:void 0===e.deadline||null===e.deadline?7:Number(e.deadline),contractor:{id:e.contractor_id,name:e.contractor_name},cc_set:e.cc_set_array||[],reinspect_set:e.reinspect_set,building_id:e.building_id,unit:e.unit,floor:e.floor,room_id:e.room_id,place_point:JSON.parse(e.problem_values||"[]"),drawing_file:JSON.parse(e.drawing_file||"[]"),repair_set:e.repair_set,process_mode:e.process_mode,voice_file:JSON.parse(e.voice_file||"[]")}})):w.a.getDefaultBatch("安全文明",n.id).then((function(e){var t=k.a.getObject(e.bidsection_id+"-check-edit-place",k.a.level.user)||{};i.allowSubmit=!0,i.problemData={status:"待提交",proj_id:n.id,place:t,bidsection_id:e.bidsection_id,batch_id:e.id,batch_type:e.batch_type,checkItem:{},description:{},image_file:[],remark:"",repair_requirements:"",level:"一般",deadline:void 0===e.repair_deadline||null===e.repair_deadline?7:e.repair_deadline,repair_set:{},contractor:{},cc_set:[],reinspect_set:[],building_id:t.building_id,unit:t.unit_id,floor:t.floor,room_id:t.room_id,place_point:[],created_by:a.user_id,process_mode:t.process_mode,voice_file:[]}}))).then((function(){e.isEmpty(i.problemData.drawing_file)&&i.getDiagram(i.problemData.place).then((function(t){e.isEmpty(t)||(i.problemData.drawing_file=[t])}))})).then((function(){})).then((function(){if("dev"===APP_ENV){var e=i.problemData.image_file;e[0]&&!e[0].url&&e[0].temp&&E.default.uploadImage(i.problemData.id,"checkquality_problem").then((function(e){i.problemData.image_file=e[0].image_file}))}})).then((function(){return w.a.hasBuildingOrLocation(i.problemData.bidsection_id).then((function(e){i.allowSelectPlace=e.length>0})).then((function(){return I.a.isPlaceNeeded("check").then((function(e){i.placeIsRequired=e&&i.allowSelectPlace}))}))})).then((function(){if(i.problemData.checkItem&&i.problemData.checkItem.id)return z.a.getBidSectionCheckItemInfo(i.problemData.proj_id,i.problemData.bidsection_id,i.problemData.checkItem.id,"安全文明").then((function(e){i.problemData.defaultCcList=e&&e.cc?e.cc:[]})).then((function(){if(i.problemData.building_id)return z.a.getBuildingCheckItemInfo(i.problemData.proj_id,i.problemData.building_id,i.problemData.unit,"安全文明",i.problemData.checkItem.id).then((function(t){t&&!e.isEmpty(t.cc)&&(i.problemData.defaultCcList=t.cc)}))}))})).then((function(){if(i.problemData.checkItem&&i.problemData.checkItem.id)return D.a.getCheckItemDescList(i.problemData.checkItem.id).then((function(e){e&&e.length?i.descriptionOptions=e:i.descriptionOptions=[]}))})).then((function(){return C.default.getProjectUsers(i.problemData.proj_id,[31,32,33]).then((function(t){i.repairOptions=e.clone(t),i.ccOptions=e.clone(t),i.reinspectOptions=e.clone(t)}))})).then((function(){return i.loadContractor()})).catch((function(e){$log.log(e)})).finally((function(){i.isLoading=!1}))},setPlace:function(e){var t=this;e.full_name&&(this.problemData.building_id=e.building_id,this.problemData.process_mode=e.process_mode||null,this.problemData.place=e,this.problemData.room_id=e.room_id,this.problemData.floor=e.floor,this.problemData.unit=e.unit_id),k.a.saveObject(this.problemData.bidsection_id+"-check-edit-place",e,k.a.level.user),this.loadCheckitemDefaultSetting().then((function(){t.saveProblem()}))},onShowHuxingMark:function(t,i){var a=this,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.isBackPositon=n;var r=x.a.defer(),o=t;t=t||this.problemData.drawing_file[0],i=i||{room_id:this.problemData.room_id,building_id:this.problemData.building_id,unit_id:this.problemData.unit,floor:this.problemData.floor};var s=90===this.problemData.process_mode?this.problemData.building_id===i.building_id&&this.problemData.unit===i.unit_id:this.problemData.room_id===i.room_id&&this.problemData.floor===i.floor;return this.$refs.drawing.openPopup({mode:"multiple-remark",url:t.url,points:s?this.problemData.place_point:[],onmark:function(t){e.isArray(t)?a.problemData.place_point=t:a.problemData.place_point=[t],o||a.saveProblem(),r.resolve()}}),r.promise},getDiagram:function(e){return 90===e.process_mode?z.a.getSelfPlaceDrawingFile(e.unit_id||e.building_id):e.room_id?O.default.getRoomTypeDiagram(e.room_id):e.unit_id&&e.floor?P.a.getDiagram(e.building_id,e.unit_id,e.floor,1):e.floor?P.a.getDiagram(e.building_id,"",e.floor,2):x.a.when()},loadCheckitemDefaultSetting:function(){var t=this;return x.a.when().then((function(){if(!e.isEmpty(t.problemData.checkItem)&&t.problemData.checkItem.id)return z.a.getBidSectionCheckItemInfo(t.problemData.proj_id,t.problemData.bidsection_id,t.problemData.checkItem.id,"安全文明").then((function(i){if(i.repair.length>0&&(t.problemData.repair_set=i.repair[0]),i.reinspect.length&&(t.problemData.reinspect_set=i.reinspect),t.problemData.defaultCcList=i.cc,t.problemData.contractor={id:i.contractor_id,name:i.contractor_name}||{},e.isEmpty(t.problemData.reinspect_set))return C.default.getAllProjectUsers(t.problemData.proj_id).then((function(i){var a=j.a.getUser();e.some(i,(function(e){return e.user_id===a.user_id}))&&(t.problemData.reinspect_set=[{id:a.user_id,name:a.user_name}])}))}))})).then((function(){if(t.problemData.building_id&&!e.isEmpty(t.problemData.checkItem)&&t.problemData.checkItem.id)return z.a.getBuildingCheckItemInfo(t.problemData.proj_id,t.problemData.building_id,t.problemData.unit,"安全文明",t.problemData.checkItem.id).then((function(i){if(i)return i.repair.length>0&&(t.problemData.repair_set=i.repair[0]),i.reinspect.length&&(t.problemData.reinspect_set=i.reinspect),e.isEmpty(i.cc)||(t.problemData.defaultCcList=i.cc),i.contractor_id&&i.contractor_name&&(t.problemData.contractor={id:i.contractor_id,name:i.contractor_name}),e.isEmpty(t.problemData.reinspect_set)?C.default.getAllProjectUsers(t.problemData.proj_id).then((function(i){var a=j.a.getUser();e.some(i,(function(e){return e.user_id===a.user_id}))&&(t.problemData.reinspect_set=[{id:a.user_id,name:a.user_name}])})):void 0}))})).then((function(){return t.loadContractor(!0)})).catch((function(e){y.a.alert(e)}))},loadContractor:function(t){var i=this,a=this.problemData.repair_set&&this.problemData.repair_set.id||"";return T.a.getContractorListByUser(a,this.problemData.bidsection_id).then((function(a){i.contractorOptions=a.list,!e.isEmpty(a.list)&&t&&a.isGroupList&&(i.problemData.contractor=a.list[0])}))},onCheckitemSelect:(n=Object(o.a)(regeneratorRuntime.mark((function t(i){var a,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i.questionItem?(this.problemData.checkItem=i.checkItem,this.problemData.description=i.questionItem,this.descriptionOptions=i.questionItems):(this.problemData.checkItem=i.checkItem,this.problemData.description={},this.descriptionOptions=[]),this.$refs["checkitem-select"].closePopup(),!e.isEmpty(this.problemData.cc_set)){t.next=8;break}return t.next=5,w.a.getBatchCCs(this.problemData.batch_id);case 5:a=t.sent,n=e.isEmpty(a)?[]:e.map(a,(function(e){return{id:e.user_id,name:e.user_name,mobile:e.user_mobile}})),this.problemData.cc_set=n;case 8:return t.next=10,this.loadCheckitemDefaultSetting().catch((function(e){return $log.error("现场检查",{desc:"获取检查项默认设置失败",errmsg:e})}));case 10:this.saveProblem();case 11:case"end":return t.stop()}}),t,this)}))),function(e){return n.apply(this,arguments)}),isCheckItemSelected:function(){if(!this.problemData.checkItem||!this.problemData.checkItem.id)return y.a.alert("请先选择检查项"),!1},selectDesc:function(e){this.problemData.description=e},setLevel:function(e){R.a.addTrack("现场检查-编辑草稿问题-切换紧急程度","",""),this.problemData.level=e,this.saveProblem()},selectRepair:function(e){var t=this;return this.loadContractor(!0).then((function(){return t.saveProblem()}))},openSelectContractor:function(){!1!==this.isCheckItemSelected()&&(this.showContractorDialog=!0)},selectContractor:function(){this.showContractorDialog=!1,this.saveProblem()},selectReinspect:function(){this.saveProblem()},selectCc:function(){this.saveProblem()},delProblem:function(){var e=this;this.allowSubmit&&y.a.popBox({title:"确定删除吗？",cancelText:"取消",okText:"删除"}).then((function(t){if(t)return S.a.delete(e.problemData.id).then((function(){e.$router.go(-1)})).catch((function(e){y.a.alert(e)}))}))},voiceChange:function(e){this.$set(this.problemData,"voice_file",e),this.saveProblem()},saveProblem:function(){var t=this;return this.isSaving?x.a.when():(this.isSaving=!0,S.a.save(e.clone(this.problemData)).then((function(e){t.problemData.id=e,t.isSaving=!1})).catch((function(e){$log.error(e),t.isSaving=!1})))},saveProblemAndBack:function(){var e=this;return this.saveProblem().then((function(){y.a.alert("保存成功"),setTimeout((function(){e.$router.go(-1)}),500)}))},submit:(a=Object(o.a)(regeneratorRuntime.mark((function t(){var i=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.formCheck=!0,t.next=3,S.a.getPhotoRequired(this.problemData.proj_id,"TYPE_SECURE_REGISTERED");case 3:if(!t.sent||!e.isEmpty(this.problemData.image_file)){t.next=7;break}return y.a.alert("请拍摄问题照片"),t.abrupt("return");case 7:if(!e.isEmpty(this.problemData.place)&&!e.isEmpty(this.problemData.place.full_name)||!this.placeIsRequired){t.next=10;break}return y.a.alert("请选择部位"),t.abrupt("return",!1);case 10:if(this.problemData.checkItem.full_name){t.next=13;break}return y.a.alert("请选择检查项"),t.abrupt("return",!1);case 13:if(this.problemData.repair_set&&this.problemData.repair_set.id){t.next=16;break}return y.a.alert("请选择整改人"),t.abrupt("return",!1);case 16:if(!e.isEmpty(this.problemData.reinspect_set)){t.next=19;break}return y.a.alert("请选择复验人"),t.abrupt("return",!1);case 19:if(e.isEmpty(this.problemData.drawing_file)||!e.isEmpty(this.problemData.place_point)){t.next=22;break}return y.a.notify("尚未标记户型图","去标记").then((function(){return i.onShowHuxingMark(null,{room_id:i.problemData.room_id,building_id:i.problemData.building_id,unit_id:i.problemData.unit,floor:i.problemData.floor,full_name:i.problemData.place.full_name})})),t.abrupt("return",!1);case 22:return this.formCheck=!1,y.a.loading("正在提交..."),$log.log("提交问题"),t.abrupt("return",S.a.submit(e.clone(this.problemData),"check").then((function(){y.a.hideLoading(),y.a.alert("提交成功"),k.a.saveString("check-index-tab-index","1"),i.$router.go(-1)})).then((function(){return $.a.addLog({relation_id:i.problemData.id,business_type:"check",event:"登记问题",diff:{remark:i.problemData.remark,desc:e.isEmpty(i.problemData.description)?"":i.problemData.description.name},images:i.problemData.image_file})})).catch((function(e){$log.log(e),y.a.alert(e)})).finally((function(){y.a.hideLoading()})));case 26:case"end":return t.stop()}}),t,this)}))),function(){return a.apply(this,arguments)})},beforeRouteLeave:function(e,t,i){this.$refs["place-select"].clearData(),this.$refs["checkitem-select"].clearData(),this.$refs["checkitem-select"].closePopup(),this.$refs["place-select"].closePopup(),this.popupPhotoVisible=!1,i()}}}).call(this,i("391c"))},6807:function(e,t,i){"use strict";var a=i("c65d").a,n=(i("6d82"),i("17cc")),r=Object(n.a)(a,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.isEmpty?e._e():i("div",{staticClass:"app-voice-play"},[i("div",{staticClass:"play-main"},[i("div",{staticClass:"play-btn"},["start"===e.isPlay?i("div",{staticClass:"play-btn_style play-btn_start",on:{click:e.startPlay}},[i("i",{staticClass:"start-icon"})]):e._e(),"middle"===e.isPlay?i("div",{staticClass:"play-btn_style play-btn_middle",on:{click:e.pausePlay}},[i("i"),i("i")]):e._e(),"loading"===e.isPlay?i("div",{staticClass:"play-btn_style play-btn_loadding",on:{click:e.loadingPlay}},[i("van-loading",{staticClass:"loading-icon",attrs:{type:"spinner",color:"#ffffff",size:"16"}})],1):e._e()]),i("div",{staticClass:"play-progress"},[i("i",{staticClass:"play-progress_spot"}),i("i",{staticClass:"play-progress_solidLine"}),i("div",{staticClass:"play-progress_layer"},[i("van-slider",{staticClass:"play-progress_slider",class:{"disabled-animation":e.startDrap},attrs:{"active-color":"#4275e8","inactive-color":"#F6F6F6",disabled:e.disabled},on:{input:e.dragInput,"drag-start":e.dragStart,"drag-end":e.dragEnd},model:{value:e.progress,callback:function(t){e.progress=t},expression:"progress"}},[i("template",{slot:"button"},[i("div",{staticClass:"play-progress_btn"},[e._v(e._s(e.seekText)),i("span",[e._v("/")]),e._v(e._s(e.duration))])])],2)],1),i("i",{staticClass:"play-progress_dotted"})]),e.isDelete?i("div",{staticClass:"play-delete"},[i("icon",{staticClass:"delete-icon",attrs:{name:"delete"},on:{click:e.deleteVoive}})],1):e._e()]),e.isText?i("div",{staticClass:"play-text"},[i("div",[e._v(e._s(e.text))])]):e._e()])}),[],!1,null,"d51aec2c",null);t.a=r.exports},"6b55":function(e,t,i){(e.exports=i("690e")(!1)).push([e.i,".zjapp .f-gray[data-v-1027cd2f]{color:#666}.zjapp .checkpoint-back[data-v-1027cd2f]{display:flex;align-items:center}.zjapp .checkpoint-back .icon-nav-back[data-v-1027cd2f]{font-size:22px}",""])},"6be0":function(e,t,i){var a=i("4460");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);(0,i("85cb").default)("9260fce2",a,!0,{sourceMap:!1,shadowMode:!1})},"6d34":function(e,t,i){"use strict";(function(e){i.d(t,"a",(function(){return g}));i("5ab2"),i("e10e"),i("2b45"),i("fc58"),i("cc57"),i("6d57");var a=i("4c09"),n=i("28f8"),r=(i("6a61"),i("2e91")),o=i("0e4d"),s=i("94ef"),c=i("76ff"),l=i("4b67"),u=i("d703"),p=i("286a"),d=i("a8a6"),h=i("eb9d");function f(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,a)}return i}function m(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?f(Object(i),!0).forEach((function(t){Object(n.a)(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):f(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,a=Object(u.a)(e);if(t){var n=Object(u.a)(this).constructor;i=Reflect.construct(a,arguments,n)}else i=a.apply(this,arguments);return Object(l.a)(this,i)}}var g=function(t){Object(c.a)(v,t);var i,n,l,u,p,f,g=b(v);function v(){return Object(o.a)(this,v),g.apply(this,arguments)}return Object(s.a)(v,[{key:"getItemsData",value:(f=Object(r.a)(regeneratorRuntime.mark((function t(i){var a,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i){t.next=3;break}return $log.log("检查项",{desc:"获取检查项错误：未定义检查项parentId"}),t.abrupt("return",Promise.resolve([]));case 3:return console.time("检查项获取数据"),t.next=6,this.getSectionItemsByParentId(i);case 6:return a=t.sent,t.next=9,this.getVisibleConfig();case 9:if(n=t.sent,a=this.filterVisibleData(a,n),n=null,!e.isEmpty(a)){t.next=16;break}return t.next=15,this.getDescItems(i);case 15:a=t.sent;case 16:return console.timeEnd("检查项获取数据"),t.abrupt("return",a);case 18:case"end":return t.stop()}}),t,this)}))),function(e){return f.apply(this,arguments)})},{key:"getDescItems",value:(p=Object(r.a)(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.time("获取问题描述"),t=Array.isArray(t)?t:[t],e.abrupt("return",d.a.getAllDescByCheckIds(t).then((function(e){return e=e.map((function(e){return m(m({},e),{},{type:h.e,parent_id:e.class_id,checked:!1})})),console.timeEnd("获取问题描述"),e})));case 3:case"end":return e.stop()}}),e)}))),function(e){return p.apply(this,arguments)})},{key:"getSearchItemsData",value:(u=Object(r.a)(regeneratorRuntime.mark((function t(i){var n,r,o,s,c,l,u,p,d,h,f;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getVisibleConfig();case 2:n=t.sent,r=!1,o=0,s=[];case 6:return o++,console.time("根据名称搜索"),t.next=10,this.searchSectionItemsByName({name:i,page:o});case 10:c=t.sent,console.timeEnd("根据名称搜索"),s.push.apply(s,Object(a.a)(this.filterVisibleData(c,n))),$log.log("检查项搜索",{desc:"搜索结果",count:c.length}),$log.log("检查项搜索",{desc:"搜索结果可见性过滤",count:s.length}),r=c.length>999&&s.length<1e3;case 16:if(r){t.next=6;break}case 17:return n=null,l=s.map((function(e){return e.id})),t.next=21,this.getDescItems(l);case 21:return u=t.sent,console.log("descDataResult",u),console.time("根据名称搜索问题描述"),t.next=26,this.getSearchItemsDataByDesc(i);case 26:return p=t.sent,console.timeEnd("根据名称搜索问题描述"),d=e.uniqBy([].concat(s,Object(a.a)(p)),"id"),console.log("合并后的数据",d),h=this.listToTree([].concat(Object(a.a)(d),Object(a.a)(u))),console.log("获取树形数据",h),t.next=34,this.getParentData(h.map((function(e){return e.parent_id})));case 34:return f=t.sent,e.isEmpty(f)||(h=this.listToTree([].concat(Object(a.a)(f),Object(a.a)(h)))),t.abrupt("return",h);case 37:case"end":return t.stop()}}),t,this)}))),function(e){return u.apply(this,arguments)})},{key:"getSearchItemsDataByDesc",value:(l=Object(r.a)(regeneratorRuntime.mark((function e(t){var i,a,n,r,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.a.getDescByName(t,this.sectionId,this.moduleName,this.moduleCode);case 2:return i=e.sent,$log.log("检查项搜索",{desc:"搜索问题描述结果",count:i.length}),e.next=6,this.getVisibleConfig();case 6:return a=e.sent,n=this.filterVisibleData(i,a),a=null,$log.log("检查项搜索",{desc:"搜索问题描述结果与可见性过滤",count:n.length}),r={},o=[],n.forEach((function(e){var t={id:e.desc_id,name:e.desc_name,parent_id:e.id,type:h.e};if(r[e.id])r[e.id].push(t);else{var i=[t],a={name:e.name,id:e.id,parent_id:e.parent_id,full_name:e.full_name,children:i};o.push(a),r[e.id]=i}})),r=null,e.abrupt("return",o);case 15:case"end":return e.stop()}}),e,this)}))),function(e){return l.apply(this,arguments)})},{key:"getItemVisible",value:(n=Object(r.a)(regeneratorRuntime.mark((function t(i){var a,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getVisibleConfig();case 2:return a=t.sent,n=this.filterVisibleData([{id:i}],a),a=null,t.abrupt("return",!e.isEmpty(n));case 6:case"end":return t.stop()}}),t,this)}))),function(e){return n.apply(this,arguments)})},{key:"getParentData",value:(i=Object(r.a)(regeneratorRuntime.mark((function t(i){var n,r,o,s,c;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.isEmpty(i)){t.next=2;break}return t.abrupt("return",[]);case 2:return console.time("获取所有父级元素"),t.next=5,this.getRootItemId();case 5:n=t.sent,r=[],i=i.filter((function(e){return e!==n}));case 8:if(e.isEmpty(i)){t.next=16;break}return t.next=11,this.getItemByIds(i);case 11:s=t.sent,(o=r).push.apply(o,Object(a.a)(s)),i=s.map((function(e){return e.parent_id})).filter((function(e){return e!==n})),t.next=8;break;case 16:return console.timeEnd("获取所有父级元素"),c={},r=r.reduce((function(e,t){return c[t.id]||(c[t.id]=!0,e.push(t)),e}),[]),t.abrupt("return",r);case 20:case"end":return t.stop()}}),t,this)}))),function(e){return i.apply(this,arguments)})}]),v}(p.a)}).call(this,i("391c"))},"6d4c":function(e,t,i){"use strict";i("21c00")},"6d82":function(e,t,i){"use strict";i("b26b")},"6dae":function(e,t,i){"use strict";i("b17c")},"6dd9":function(e,t,i){var a=i("88d9");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);(0,i("85cb").default)("b68e05de",a,!0,{sourceMap:!1,shadowMode:!1})},"6f2b":function(e,t,i){"use strict";i("163d");var a={name:"VirtualList",props:{maxWrapperHeight:{type:Number,default:400},itemHeight:{type:Number,default:40},itemHeightCalc:{type:Function},listData:{type:Array,default:function(){return[]}},nodeKey:{type:String,default:"id"}},data:function(){return{currentStartIndex:0,visibleListData:[]}},computed:{wrapperStyle:function(){return{height:this.wrapperHeight+"px"}},phantomStyle:function(){return{height:this.listHeight+"px"}},wrapperHeight:function(){var e=this.listData.length*this.itemHeight;return this.maxWrapperHeight>e?e:this.maxWrapperHeight},listHeight:function(){return this.listData.length*this.itemHeight},listItemStyle:function(){return{height:this.itemHeight+"px"}}},watch:{listData:{handler:function(){var e=this;console.log("updateListData",this.$el),this.$nextTick((function(){e.handleScroll()}))},immediate:!0}},methods:{updateVisibleListData:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=Math.ceil(this.wrapperHeight/this.itemHeight),a=Math.floor(t/this.itemHeight),n=a+i+2;this.visibleListData=this.listData.slice(a,n),this.$nextTick((function(){e.$refs["list-content"].style.webkitTransform="translateY(".concat(a*e.itemHeight,"px)"),e.$refs["list-content"].style.msTransform="translateY(".concat(a*e.itemHeight,"px)")}))},handleScroll:function(){var e=this.$el.scrollTop;this.updateVisibleListData(e)}}},n=(i("0bfc"),i("17cc")),r=Object(n.a)(a,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"virtual-list-wrapper",style:e.wrapperStyle,on:{scroll:e.handleScroll}},[i("div",{staticClass:"list-phantom",style:e.phantomStyle}),i("div",{ref:"list-content",staticClass:"list-content"},e._l(e.visibleListData,(function(t,a){return i("div",{key:t[e.nodeKey]||a,staticClass:"list-item",style:e.listItemStyle},[e._t("content",null,{record:t})],2)})))])}),[],!1,null,"6215c9e4",null);t.a=r.exports},7583:function(e,t,i){"use strict";i("c351")},"75b9":function(e,t,i){var a=i("e5a0");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);(0,i("85cb").default)("417e698a",a,!0,{sourceMap:!1,shadowMode:!1})},"7ac8":function(e,t,i){"use strict";i("afdd")},"7fa9":function(e,t,i){var a=i("2258");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);(0,i("85cb").default)("38301f76",a,!0,{sourceMap:!1,shadowMode:!1})},8153:function(e,t,i){"use strict";var a=i("ae7d").a,n=(i("9b7b"),i("17cc")),r=Object(n.a)(a,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("popup-has-header",{attrs:{title:"选择部位"},on:{closed:e.onClosed},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[i("span",{staticClass:"f-gray",attrs:{slot:"header_left"},on:{click:e.closePopup},slot:"header_left"},[e._v("取消")]),i("span",{staticClass:"f-gray",class:{"f-blue":e.computedIsCanFinish},attrs:{slot:"header_right"},on:{click:e.submit},slot:"header_right"},[e._v("确定")]),i("widget",e._b({ref:"place-widget",attrs:{slot:"body_main","position-data":e.positionData,selected:e.selected},slot:"body_main"},"widget",e.$attrs,!1))],1)}),[],!1,null,"342fc3b4",null);t.a=r.exports},"82db":function(e,t,i){"use strict";i("5c87")},"88d9":function(e,t,i){(e.exports=i("690e")(!1)).push([e.i,".zjapp .app-voice-record[data-v-1ed5298e]{height:46px;border-bottom:1px solid #dcdcdc;background:#f2f2f2;padding:8px 15px}.zjapp .app-voice-record .record-btn[data-v-1ed5298e]{width:100%;height:30px;line-height:30px;box-sizing:content-box;border:1px solid #4275e8;border-radius:4px;text-align:center;font-size:14px;color:#4275e8}",""])},"89b5":function(e,t,i){"use strict";(function(e){i("5ab2"),i("e10e"),i("cc57"),i("6d57");var a=i("28f8"),n=i("a57f"),r=i("07d2");i("e2a7");function o(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,a)}return i}function s(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?o(Object(i),!0).forEach((function(t){Object(a.a)(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):o(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}t.a={name:"SetUsualItemsDialog",components:{Tree:n.a,Item:r.default},data:function(){return{show:!1,checkItems:[],isLoading:!1,mmkvItemTips:!0}},methods:{openPopup:function(e){$log.log("现场检查-可见性"),this.checkItems=this.deepClone(e.checkItems),this.mmkvItemTips=e.mmkvItemTips,this.tipsCallback=e.tipsCallback,this.saveCallback=e.saveCallback,this.show=!0,this.value=!0,this.$emit("open")},closeTip:function(){this.mmkvItemTips=!1,this.tipsCallback(!1)},onSelect:function(e,t){var i=this.deepClone(this.checkItems);i=this.dataMap(i,s(s({},t),{},{items:e}),0),this.checkItems=i},dataMap:function(t,i,a){var n=this;return t.map((function(t){if(t.id===i.items[a].id)if(t.checked=i.checked,t.children&&t.children.length&&a<i.items.length-1?t.children=n.dataMap(t.children,i,a+1):t.children=n.checkChildItems(t.children,i.checked),i.items[i.items.length-1].id===t.id)t.status=i.status,t.checked=i.checked;else{var r=n.currentStatus(t.children,i);t.status=r,t.checked=!e.isEmpty(r)}return t}))},checkChildItems:function(){var t=this,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],a=arguments.length>1?arguments[1]:void 0;return e.map(i,(function(e){return e.status=a?"fullSelected":null,e.checked=a,e.children&&e.children.length&&(e.children=t.checkChildItems(e.children,a)),e}))},currentStatus:function(t,i){return e.isEmpty(t)?i.status:e.filter(t,(function(t){return e.isEmpty(t.status)})).length===t.length?null:e.filter(t,(function(e){return"fullSelected"===e.status})).length===t.length?"fullSelected":"partSelected"},filterUsualItems:function(t,i){var a=this;t.forEach((function(t){t.checked&&!i[t.id]&&(i[t.id]={id:t.id,status:t.status,checked:t.checked,isOpen:t.isOpen,parent_id:t.parent_id,name:t.name}),e.isEmpty(t.children)||a.filterUsualItems(t.children,i)}))},save:function(){console.log("检查项数据",this.checkItems),console.time("filterUsualItems");var e={};this.filterUsualItems(this.checkItems,e),console.timeEnd("filterUsualItems"),console.log("可见性数据",e),this.saveCallback(e)},deepClone:function(e){return JSON.parse(JSON.stringify(e))},clearData:function(){console.log("清空可见性数据"),this.checkItems=[]}}}}).call(this,i("391c"))},"8d3e":function(e,t,i){"use strict";(function(e){i("5ab2"),i("e10e");var a,n=i("28f8"),r=(i("9e76"),i("6d57"),i("9a33"),i("f548"),i("cc57"),i("6a61"),i("2e91")),o=i("3122"),s=i("4ad6");function c(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,a)}return i}function l(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?c(Object(i),!0).forEach((function(t){Object(n.a)(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):c(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}t.a={props:{data:{type:Object,required:!0}},data:function(){return{isLoading:!0,isImageDownloading:!1,title:"",content:[]}},methods:{init:(a=Object(r.a)(regeneratorRuntime.mark((function e(t){var i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.isLoading=!0,e.next=3,this.data.getCheckGuideDetail(t);case 3:i=e.sent,this.title=i.name||i.full_name,this.content=this.dealContent(i.content),this.downloadImage(),this.isLoading=!1;case 8:case"end":return e.stop()}}),e,this)}))),function(e){return a.apply(this,arguments)}),dealContent:function(t){if(t=t?t.trim():"",e.isEmpty(t))return[];if(t=(t=(t=(t=(t=t.replace(/<\/p><p>/gm,"\n")).replace(/<p>/gm,"")).replace(/<\/p>/gm,"")).replace(/<br>/gm,"")).replace(/<br \/>/gm,""),/(<img[^\>]*>)/gm.test(t)){var i=t.split(/(<img[^\>]*>)/gm);(i=i.filter((function(e){return!!e}))).forEach((function(e,t){e&&!/^\s*\n/.test(e)&&t&&!/\n\s*$/.test(i[t-1])&&(i[t]="\n"+e)})),t=i.join("")}var a=t?t.split("\n"):[];return e.map(a,(function(e,t){var i;if(/<img([\s\S]*)>/gm.test(e)){var a=e.split(/\ssrc="([^"]*)"/gm)[1],n=a?a.match(/[\w|-]{36}/gm)[0]:(new Date).getTime()+"-"+t;i={isImg:!0,src:"",url:a,status:"pending",id:n,ready:!0}}else i={isImg:!1,val:e};return i}))},getThumbnail:function(e){return"pending"===e.status?o.a.IMAGE_LOADING:"rejected"===e.status?o.a.IMAGE_RELOAD:"dev"===APP_ENV?e.url:"fulfilled"===e.status?e.src:($log.log("检查指引-显示图片：",e),o.a.IMAGE_PLACEHOLD)},imgError:function(e,t){$log.error("检查指引-加载图片出现错误：",e);var i=l({},e);i.status="rejected",this.$set(this.content,t,i)},downloadImage:function(t){var i=this;t=t?[t]:this.imageList(),e.each(t,(function(t){var a=l({},t),n=e.map(i.content,(function(e){return e.id})).indexOf(t.id);o.a.isNeedDownload(t.url).then((function(e){e?o.a.download(t.url).then((function(e){a.status="fulfilled",a.src=o.a.fixUrl(e),i.$set(i.content,n,a)})).catch((function(e){$log.error("检查指引-下载图片：",e)})):(a.status="fulfilled",a.src=o.a.fixUrl(o.a.getPathFromUrl(t.url)),i.$set(i.content,n,a))}))}))},imageList:function(){return e.filter(this.content,(function(e){return e.isImg}))},imgClick:function(t){var i=this;if("pending"===t.status)return!1;if("rejected"===t.status)return this.downloadImage(t),$log.log("检查指引-点击重新加载-重新下载图片：",t),!1;var a=this.imageList(),n=e.map(a,(function(e){return e.id})).indexOf(t.id);a=e.map(a,(function(e){return i.getThumbnail(e)})),s.a.openImageBrowser(a,n)}}}}).call(this,i("391c"))},"8e75":function(e,t,i){"use strict";(function(e){i("2b45"),i("e697"),i("cc57"),i("163d");var a=i("07d2"),n=i("6144"),r=i("9864"),o=i("e2a7"),s=i("a18c"),c=i("34b6");t.a={name:"UserSelect",components:{Item:a.default,CheckUserContact:r.a,PopupUserSelect:c.a},props:{title:{type:String},value:{type:[Object,Array]},options:{type:Array,default:function(){return[]}},multi:{type:Boolean,default:!1},date:{type:String,default:""},modifyDate:{type:String,default:""},isRead:{type:[String,Boolean],default:""},note:{type:String,default:""},status:{type:String,default:""},statusClass:{type:[Object,String]},max:{type:Number,default:1/0},maxTip:{type:String,default:""},border:{type:String,default:""},mode:{type:String,default:"edit"},editabled:{type:Boolean,default:!0},memory:{type:Boolean,default:!1},autoSelect:{type:Boolean,default:!1},required:{type:Boolean,default:!0},emptyText:{type:String,default:"空"},beforeOpen:{type:Function,default:function(){}},beforeSelect:{type:Function,default:function(){}},beforeConfirm:{type:Function,default:function(){}},formCheck:{type:Boolean,default:!1},linkedData:{type:Object,default:function(){return{}}}},data:function(){return{isOpen:!1,memoryKey:(this.$route?this.$route.name:s.a.history.current.name)+encodeURI(this.title||"选人组件")}},computed:{selected:function(){return this.multi?e.isArray(this.value)?this.value:e.isEmpty(this.value)?[]:[this.value]:e.isArray(this.value)?this.value[0]||{}:e.isEmpty(this.value)?{}:this.value}},watch:{options:function(){this.setSelected()}},mounted:function(){this.setSelected()},methods:{openSelect:function(){var t=this;if(this.editabled){var i=this.beforeOpen(this.linkedData);i&&i.then&&e.isFunction(i.then)?i.then((function(e){!1!==e&&t.openPopup()})).catch((function(e){$log.error(e),o.a.alert(e||"发生了错误")})):!1!==i&&this.openPopup()}},openPopup:function(){var t=this;this.$refs["popup-user-select"].openPopup({title:"选择"+(this.title||""),selected:this.selected,options:this.options,multi:this.multi,max:this.max,maxTip:this.maxTip,beforeSelect:this.beforeSelect,beforeConfirm:this.beforeConfirm,onSelect:function(i){var a=e.cloneDeep(t.selected);t.multi?(t.$emit("input",i,a),t.$emit("onSelect",i,a)):(t.$emit("input",i[0],a),t.$emit("onSelect",i[0],a)),t.memory&&n.a.saveObject(t.memoryKey,t.multi?i:i[0],n.a.level.user)}})},closeSelect:function(){this.isOpen=!1},getSame:function(t,i){var a=[];return e.each(t,(function(t){t&&t.id&&e.find(i,(function(e){return e.id.toString().toUpperCase()===t.id.toString().toUpperCase()}))&&a.push(t)})),a},setSelected:function(){var t,i=n.a.getObject(this.memoryKey,n.a.level.user);!1===this.editabled||e.isEmpty(this.options)||(this.multi?e.isEmpty(this.selected)?i&&i.length&&this.memory?(t=this.getSame(i,this.options)).length&&(this.$emit("input",t),this.autoSelect&&this.$emit("defaultSelect",t)):this.selectDefault&&(t=this.getSame(this.selectDefault,this.options)).length&&(this.$emit("input",t),this.autoSelect&&this.$emit("defaultSelect",t)):(t=this.getSame(this.selected,this.options)).length?this.autoSelect&&this.$emit("defaultSelect",this.selected):this.autoSelect&&this.$emit("defaultSelect",[]):!e.isEmpty(this.selected)&&this.selected.id?this.autoSelect&&this.$emit("defaultSelect",this.selected):this.memory&&!e.isEmpty(i)&&(e.isArray(i)&&(i=i[0]),e.some(this.options,{id:i.id})&&(this.$emit("input",i),this.autoSelect&&this.$emit("defaultSelect",i))))}}}}).call(this,i("391c"))},9005:function(e,t,i){(e.exports=i("690e")(!1)).push([e.i,".zjapp .f-gray[data-v-5eb2fae0]{color:#666}.zjapp .f-blue[data-v-5eb2fae0]{color:#4275e8}",""])},9132:function(e,t,i){(e.exports=i("690e")(!1)).push([e.i,".zjapp .app-voice .app-voice-import_btn[data-v-b02a2dfc]{width:100%;height:36px;text-align:center;color:#fff}.zjapp .app-voice .voice-play[data-v-b02a2dfc]{padding:0 15px;border-bottom:1px solid #f6f6f6;background:#f2f2f2}",""])},"91cb":function(e,t,i){"use strict";i("c82d")},"936a":function(e,t,i){var a=i("e46b"),n=i("e7ad").isFinite;a(a.S,"Number",{isFinite:function(e){return"number"==typeof e&&n(e)}})},9446:function(e,t,i){var a=i("2dd6");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);(0,i("85cb").default)("2192cd00",a,!0,{sourceMap:!1,shadowMode:!1})},9788:function(e,t,i){"use strict";i("9446")},9808:function(e,t,i){(e.exports=i("690e")(!1)).push([e.i,".zjapp .flex-box[data-v-5ccdfc17]{flex:1;display:flex;align-self:center;justify-content:center}.zjapp .place-select-box[data-v-5ccdfc17]{width:100%;flex:1;height:100%;display:flex;flex-direction:row}.zjapp .place-select-list[data-v-5ccdfc17]{max-width:50%;flex:1;padding:0 5px 0 10px;height:100%;flex-shrink:0;overflow-y:auto}.zjapp .place-select-list__item[data-v-5ccdfc17]{padding:10px 2px}.zjapp .place-select-list__item span[data-v-5ccdfc17]{display:block;padding-bottom:4px}.zjapp .place-select-list__item.actived span[data-v-5ccdfc17]{color:#4275e8;border:none;background-image:linear-gradient(0deg,#4275e8,#4275e8 50%,transparent 0);background-size:100% 1px;background-repeat:no-repeat;background-position:bottom}",""])},9864:function(e,t,i){"use strict";var a=i("cdce").a,n=(i("1a09"),i("17cc")),r=Object(n.a)(a,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"root"},[e.list.length?e._e():i("div",{staticClass:"item-user-unit"},[i("span",{staticClass:"item-user-name"},[e._v("\n      无\n    ")])]),e._l(e.list,(function(t,a){return i("div",{key:a,staticClass:"item-user-unit bg"},[i("span",{staticClass:"item-user-name"},[e._v("\n      "+e._s(t&&t.name?t.name:"")+"\n    ")]),i("div",{staticClass:"icon-im-btn",on:{click:function(i){if(i.stopPropagation(),i.target!==i.currentTarget)return null;e.openImPopup(t,i)}}},[e.popupOpenItemId===t.id?i("div",{staticClass:"popup-user-im",class:{"popup-user-posi-bottom":e.popupUserPosiBottom},style:{left:e.popupL}},[i("div",{directives:[{name:"track",rawName:"v-track",value:"公共-发起聊天",expression:"'公共-发起聊天'"}],staticClass:"popup-user-im-item",class:{disabled:e.isImDisabled(t)},on:{click:function(i){e.openIm(t)}}},[i("icon",{staticClass:"popup-user-im-icon",attrs:{name:"liaotian"}}),i("p",{staticClass:"popup-user-im-text"},[e._v("聊天")])],1),t.mobile&&e.userInfo.user_id!==t.id?i("a",{directives:[{name:"track",rawName:"v-track",value:"公共-打电话",expression:"'公共-打电话'"}],staticClass:"popup-user-im-item",attrs:{href:"tel:"+t.mobile}},[i("icon",{staticClass:"popup-user-im-icon",attrs:{name:"dianhua"}}),i("p",{staticClass:"popup-user-im-text"},[e._v("电话")])],1):i("div",{staticClass:"popup-user-im-item disabled"},[i("icon",{staticClass:"popup-user-im-icon",attrs:{name:"dianhua"}}),i("p",{staticClass:"popup-user-im-text"},[e._v("电话")])],1),i("div",{staticClass:"popup-user-im-arrow",style:{left:e.arrowL}})]):e._e()])])}))],2)}),[],!1,null,"43750b3d",null);t.a=r.exports},9990:function(e,t,i){(e.exports=i("690e")(!1)).push([e.i,".zjapp .f-gray[data-v-1fb4f59e]{color:#666}",""])},"99f0":function(e,t,i){(e.exports=i("690e")(!1)).push([e.i,".zjapp .popup-customize-use-header[data-v-5fef0434]{display:flex;flex-direction:column;font-size:14px}[data-v-5fef0434] .popup-customize-use-header.van-popup--bottom.van-popup--round{border-radius:10px 10px 0 0}.zjapp .popup-customize-use-header .popup-header[data-v-5fef0434]{display:flex;align-items:center;justify-content:space-between;padding:0 15px;height:46px;border:none;background-image:linear-gradient(0deg,#ececec,#ececec 50%,transparent 0);background-size:100% 1px;background-repeat:no-repeat;background-position:bottom}.zjapp .popup-customize-use-header .popup-header .popup-header__left[data-v-5fef0434]{width:80px;flex-shrink:0}.zjapp .popup-customize-use-header .popup-header .popup-header__title[data-v-5fef0434]{flex:1;text-align:center;font-size:18px}.zjapp .popup-customize-use-header .popup-header .popup-header__right[data-v-5fef0434]{width:80px;flex-shrink:0;font-weight:800;text-align:right}.zjapp .popup-customize-use-header .popup-body[data-v-5fef0434]{display:flex;position:relative;height:calc(100% - 46px);overflow:hidden}.zjapp .f-blue[data-v-5fef0434]{color:#4275e8}.zjapp .f-gray[data-v-5fef0434]{color:#666}",""])},"9b7b":function(e,t,i){"use strict";i("052b")},"9dea":function(e,t,i){"use strict";i("fda1")},"9e5c":function(e,t,i){var a=i("3bff");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);(0,i("85cb").default)("70dae20c",a,!0,{sourceMap:!1,shadowMode:!1})},a207:function(e,t,i){var a=i("c081");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);(0,i("85cb").default)("4bbf528c",a,!0,{sourceMap:!1,shadowMode:!1})},a336:function(e,t,i){"use strict";(function(e){i("309f"),i("0b53"),i("06a2"),i("ec25"),i("2b45");var a,n,r,o,s=i("4c09"),c=(i("cc57"),i("e697"),i("6d57"),i("6a61"),i("2e91"));i("e204"),i("e2a7"),i("07d2");function l(e,t){var i;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(i=function(e,t){if(!e)return;if("string"==typeof e)return u(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return Array.from(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return u(e,t)}(e))||t&&e&&"number"==typeof e.length){i&&(e=i);var a=0,n=function(){};return{s:n,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,o=!0,s=!1;return{s:function(){i=e[Symbol.iterator]()},n:function(){var e=i.next();return o=e.done,e},e:function(e){s=!0,r=e},f:function(){try{o||null==i.return||i.return()}finally{if(s)throw r}}}}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,a=new Array(t);i<t;i++)a[i]=e[i];return a}t.a={props:{positionData:{type:Object},isSelfPlace:{type:Boolean,default:!0},items:{type:Array,default:function(){return["building","unit","floor","room"]}},selected:{type:Object,default:function(){return{}}}},data:function(){return{activeTab:"",tabList:[],isNeedInit:!0,loading:!1}},computed:{computedNextType:function(){var e=this,t=this.items.findIndex((function(t){return t===e.activeTab}));return this.items[t+1]}},mounted:function(){var e=this,t=this.$refs["place-select-box"];t&&new IntersectionObserver((function(t){t[0].isIntersecting&&e.domIntoView()})).observe(t)},methods:{init:(o=Object(c.a)(regeneratorRuntime.mark((function t(){var i,a,n,r,o,s,c=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.tabList=[],this.loading=!0,this.isNeedInit=!0,this.activeTab="",t.next=6,this.setTypeData(this.items[0]);case 6:if(i=t.sent,e.isEmpty(this.selected)||!i){t.next=38;break}a="",t.prev=9,n=l(this.items),t.prev=11,o=regeneratorRuntime.mark((function e(){var t,n,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=r.value,i){e.next=3;break}return e.abrupt("return","break");case 3:if(n=c.getDefaultId(t),o=i.find((function(e){return e.id===n}))){e.next=7;break}return e.abrupt("return","continue");case 7:return a=t,e.next=10,c.onSelectPositionItem(o,i);case 10:i=e.sent;case 11:case"end":return e.stop()}}),e)})),n.s();case 14:if((r=n.n()).done){t.next=23;break}return t.delegateYield(o(),"t0",16);case 16:if("break"!==(s=t.t0)){t.next=19;break}return t.abrupt("break",23);case 19:if("continue"!==s){t.next=21;break}return t.abrupt("continue",21);case 21:t.next=14;break;case 23:t.next=28;break;case 25:t.prev=25,t.t1=t.catch(11),n.e(t.t1);case 28:return t.prev=28,n.f(),t.finish(28);case 31:t.next=36;break;case 33:t.prev=33,t.t2=t.catch(9),console.error(t.t2);case 36:this.activeTab=a,console.log("selectType",a);case 38:this.loading=!1,this.$nextTick((function(){c.domIntoView()}));case 40:case"end":return t.stop()}}),t,this,[[9,33],[11,25,28,31]])}))),function(){return o.apply(this,arguments)}),domIntoView:function(){(this.$refs["place-select-list"]||[]).forEach((function(e){var t=e.querySelector(".actived");t&&(t.scrollIntoViewIfNeeded?t.scrollIntoViewIfNeeded():t.scrollIntoView())}))},setDeaultPositon:function(){},getDefaultId:function(e){if(!this.selected)return"";this.selected[e];switch(e){case"building":return this.selected.building_id||"";case"unit":return this.selected.unit_id||"";case"floor":return this.selected.floor||"";case"room":return this.selected.room_id||""}},getOptions:(r=Object(c.a)(regeneratorRuntime.mark((function e(t){var i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=t,e.next="building"===e.t0?3:"unit"===e.t0?8:"floor"===e.t0?13:"room"===e.t0?18:"self"===e.t0?23:28;break;case 3:return e.next=5,this.positionData.getBuildings();case 5:return i=e.sent,console.log("获取楼栋数据",i),e.abrupt("break",28);case 8:return e.next=10,this.positionData.getUnits();case 10:return i=e.sent,console.log("获取单元数据",i),e.abrupt("break",28);case 13:return e.next=15,this.positionData.getFloors();case 15:return i=e.sent,console.log("获取楼层数据",i),e.abrupt("break",28);case 18:return e.next=20,this.positionData.getRooms();case 20:return i=e.sent,console.log("获取房间数据",i),e.abrupt("break",28);case 23:return e.next=25,this.positionData.getSelfPosition();case 25:return i=e.sent,console.log("获取自定义部位数据",i),e.abrupt("break",28);case 28:return Array.isArray(i)?(i=i.filter((function(e){return!!e.name}))).forEach((function(e){e.type=t,e.checked=!1})):(i=[],console.error("获取数据失败")),e.abrupt("return",i);case 30:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)}),setTypeData:(n=Object(c.a)(regeneratorRuntime.mark((function t(i){var a,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i){t.next=4;break}this.end(),t.next=23;break;case 4:return t.next=6,this.getOptions(i);case 6:if(a=t.sent,"building"!==i||!this.isSelfPlace){t.next=12;break}return t.next=10,this.getOptions("self");case 10:n=t.sent,a=[].concat(Object(s.a)(a),Object(s.a)(n));case 12:if(!e.isEmpty(a)||"unit"!==i){t.next=17;break}return i="floor",t.next=16,this.getOptions(i);case 16:a=t.sent;case 17:if(!e.isEmpty(a)){t.next=21;break}this.end(),t.next=23;break;case 21:return this.setTab(i,a),t.abrupt("return",a);case 23:case"end":return t.stop()}}),t,this)}))),function(e){return n.apply(this,arguments)}),updatePositonParam:function(e,t){switch(t||this.activeTab){case"building":this.positionData.setBuilding(e.id,e.name,e.type);break;case"unit":this.positionData.setUnit(e.id,e.name);break;case"floor":this.positionData.setFloor(e.id,e.name);break;case"room":this.positionData.setRoom(e.id,e.name)}},setTab:function(t,i){var a=this;this.isNeedInit&&(this.tabList=[],this.isNeedInit=!1),e.isEmpty(i)||(console.log("加载"+t+"数据"),this.tabList.push({children:i,name:"请选择",type:t}),console.log("tabList",this.tabList),this.$nextTick((function(){a.activeTab=t})))},clearTab:function(e){var t=this.tabList.findIndex((function(t){return t.type===e}));this.tabList.splice(t+1)},checkPosition:function(e){"self"===e&&(e="building"),this.activeTab=e},onSelectPositionItem:(a=Object(c.a)(regeneratorRuntime.mark((function t(i,a){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.isEmpty(i)){t.next=2;break}return t.abrupt("return");case 2:if(this.checkPosition(i.type),a.forEach((function(e){return e.checked=!1})),i.checked=!0,this.updateTabName(i.name),this.clearTab(this.activeTab),this.updatePositonParam(i),"self"!==i.type){t.next=13;break}return this.setTab("unit",i.units.map((function(e){return e.type="unit",e}))),t.abrupt("return",i.units);case 13:return t.abrupt("return",this.setTypeData(this.computedNextType));case 14:case"end":return t.stop()}}),t,this)}))),function(e,t){return a.apply(this,arguments)}),updateTabName:function(e){var t=this;this.tabList.find((function(e){return e.type===t.activeTab})).name=e},end:function(){}}}}).call(this,i("391c"))},a454:function(e,t,i){"use strict";var a=i("051c").a,n=(i("6dae"),i("17cc")),r=Object(n.a)(a,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("popup-has-header",{attrs:{title:"标记户型图"},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[i("span",{staticClass:"f-gray",attrs:{slot:"header_left"},on:{click:e.closePopup},slot:"header_left"},[e._t("header-left",[e._v(" 取消 ")])],2),i("span",{staticClass:"f-blue",attrs:{slot:"header_right"},on:{click:e.sure},slot:"header_right"},[e._v("确定")]),i("div",{staticClass:"drawing-box",attrs:{slot:"body_main"},slot:"body_main"},[i("drawing",{staticStyle:{flex:"1"},attrs:{url:e.url,points:e.points,folder:e.folder},on:{onclick:e.onclick}}),"multiple-remark"===e.mode?i("app-button-group",{attrs:{"fixed-bottom":"",seamless:""}},[i("app-button",{staticStyle:{width:"50%"},attrs:{type:e.points.length?"warning":"normal",plain:""},on:{click:e.undo}},[e._v("\n        撤销\n      ")])],1):e._e()],1)])}),[],!1,null,"7ccf1962",null);t.a=r.exports},a45c:function(e,t,i){var a=i("3064");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);(0,i("85cb").default)("474374a4",a,!0,{sourceMap:!1,shadowMode:!1})},a4e3:function(e,t,i){var a=i("9132");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);(0,i("85cb").default)("12867cfa",a,!0,{sourceMap:!1,shadowMode:!1})},a57f:function(e,t,i){"use strict";var a=i("c2e0").a,n=(i("4a69"),i("17cc")),r=Object(n.a)(a,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",e._l(e.list,(function(t,a){return i("div",{key:a,staticClass:"list-tree"},[i("item",{class:{"checkBox-right-padding":e.isCheckbox},attrs:{border:"bottom"},on:{click:function(i){e.itemClick(t)}}},[e._l(e.blanks,(function(e,t){return i("div",{key:t,staticClass:"tree-blank"})})),i("div",{class:{"tree-icon":!0,"icon-dropdown":t.children&&t.children.length&&e.openSet[t.id],"icon-dropright":t.children&&t.children.length&&!e.openSet[t.id]}}),i("div",{class:{"item-text":!0,"fw-b":0===e.level},domProps:{innerHTML:e._s(e.keywordFilter(t.name))}}),t.children&&t.children.length||!e.isSelected(t)?e._e():i("icon",{staticClass:"color-theme",attrs:{name:"qualified"}})],2),e.isCheckbox?i("div",{staticClass:"tree-checkbox"},[i("checkbox",{attrs:{status:t.status,value:t.checked,"semi-selection":!0,type:"square"},on:{change:function(i){e.checkboxChange(arguments,t)}}})],1):e._e(),t.children&&t.children.length&&e.openSet[t.id]?[i("tree",{attrs:{data:t.children,level:e.level+1,keyword:e.keyword,selected:e.selected,"is-checkbox":e.isCheckbox},on:{onSelect:e.onSelect}})]:e._e()],2)})))}),[],!1,null,"792f710a",null);t.a=r.exports},a589:function(e,t,i){"use strict";i("6a61");var a,n=i("2e91"),r=i("bf9f"),o=i("f203"),s=i("b9a9"),c=i("4d0e"),l={components:{PopupHasHeader:r.a,CheckItemSelect:o.a,PopupGuideDetail:s.a},props:{sectionId:{type:String,default:""},module:{type:String,default:""},itemId:{type:String,default:""}},data:function(){return{show:!1,showDetail:!0,checkGuideData:{},select:{}}},methods:{openPopup:function(){var e=this;this.show=!0,this.checkGuideData=new c.a({moduleType:this.module,sectionId:this.sectionId}),this.$nextTick((function(){e.$refs["guide-list"].init()}))},closePopup:function(){this.show=!1},onSelect:(a=Object(n.a)(regeneratorRuntime.mark((function e(t){var i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=t.checkItem,this.select=i,this.$refs["guide-detail"].openPopup();case 3:case"end":return e.stop()}}),e,this)}))),function(e){return a.apply(this,arguments)})}},u=(i("7ac8"),i("17cc")),p=Object(u.a)(l,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("popup-has-header",{attrs:{title:"选择检查指引"},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[i("span",{staticClass:"f-gray",attrs:{slot:"header_left"},on:{click:e.closePopup},slot:"header_left"},[e._t("header-left")],2),e.$slots["header-right"]?i("span",{attrs:{slot:"header_right"},slot:"header_right"},[e._t("header-right")],2):e._e(),i("template",{slot:"body_main"},[i("check-item-select",{ref:"guide-list",attrs:{data:e.checkGuideData},on:{change:e.onSelect}})],1)],2),i("popup-guide-detail",{ref:"guide-detail",attrs:{id:e.select.id,module:e.module}},[i("div",{staticClass:"checkpoint-back",attrs:{slot:"header-left"},slot:"header-left"},[i("icon",{attrs:{name:"nav-back"}}),e._v("检查指引")],1),i("div",{attrs:{slot:"header-right"},slot:"header-right"})])],1)}),[],!1,null,"1027cd2f",null);t.a=p.exports},ae7d:function(e,t,i){"use strict";(function(e){var a=i("bf9f"),n=i("cf4d"),r=i("d8a5"),o=i("e2a7");t.a={components:{PopupHasHeader:a.a,Widget:n.a},props:{projectId:{type:String,default:""},sectionId:{type:String,default:""},selected:{type:Object,default:function(){return{}}},useOnlineDataSource:{type:Boolean,default:!1}},data:function(){return{activeTab:"",show:!1,loading:!1,positionData:{},isFresh:!0}},computed:{computedIsCanFinish:function(){var t=e.get(this.positionData,"getPosition");return Boolean(t&&t.call(this.positionData).building.id)}},watch:{show:function(e){e||this.$emit("close")}},methods:{closePopup:function(e){this.show=!1},openPopup:function(){var e=this;this.show=!0,this.loading=!0,this.isFresh&&(this.positionData=this.useOnlineDataSource?new r.b({section:{id:this.sectionId},project:{id:this.projectId}}):new r.a({section:{id:this.sectionId},project:{id:this.projectId}}),this.isFresh=!1,this.$nextTick((function(){e.$refs["place-widget"].init()})))},onClosed:function(){this.positionData.getPosition().full_name!==this.selected.full_name&&this.$refs["place-widget"].init()},submit:function(){if(!this.computedIsCanFinish)return o.a.alert("请先选择一个部位");console.log("选择已完成"),this.$emit("onChange",this.positionData.getPosition())},clearData:function(){this.positionData={},this.isFresh=!0}}}}).call(this,i("391c"))},afdd:function(e,t,i){var a=i("6b55");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);(0,i("85cb").default)("dc7bf252",a,!0,{sourceMap:!1,shadowMode:!1})},b07b:function(e,t,i){"use strict";i("6a61");var a,n,r=i("2e91"),o=i("bf9f"),s=i("9eea"),c=i("e6fb").a,l=(i("dfa5"),i("17cc")),u=Object(l.a)(c,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("popup-has-header",{attrs:{title:"设置可见的检查项"},on:{closed:e.onClosed},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[i("span",{staticClass:"f-gray",attrs:{slot:"header_left"},on:{click:e.closePopup},slot:"header_left"},[e._t("header-left")],2),e.isLoading?e._e():i("span",{staticClass:"f-blue",attrs:{slot:"header_right"},on:{click:e.onSave},slot:"header_right"},[e._v(" 保存 ")]),i("template",{slot:"body_main"},[e.isLoading?e._e():i("set-usual-item",{ref:"set-usual-item"}),i("loading-status",{attrs:{"is-loading":e.isLoading}})],1)],2)}),[],!1,null,"5eb2fae0",null).exports,p=i("a589"),d=i("f203"),h=i("4d0e"),f=i("eb9d"),m=i("a57f"),b={components:{CheckItemSelect:d.a,PopupHasHeader:o.a,CheckGuide:p.a,appSearchBar:s.default,SetUsualItems:u,Tree:m.a},props:{sectionId:{type:String,default:""},selected:{type:Object,default:function(){return{}}},module:{type:String,default:"check"}},data:function(){return{currentKey:"",timer:null,show:!1,isFresh:!0,isTreeLoading:!1,height:"70%",checkitemData:{},searchKeyword:"",isSearching:!1,treeList:[]}},computed:{moduleAttribute:function(){return this.$store.state.global.moduleAttribute},isIOS:function(){return this.$store.state.app.isIOS},isIOSBezelLess:function(){return this.$store.state.app.isIOSBezelLess},isSuperApp:function(){return!0===window.__YL_SUPER_APP__}},watch:{show:function(e){e?this.setKeyBoardStatus():(this.$emit("close"),this.clearKeyBoardStatus())}},methods:{openCheckGuide:function(){this.$refs["popup-check-guide"].openPopup()},openSetUsualItems:function(){this.$refs["popup-set-usual-items"].openPopup()},closePopup:function(e){this.show=!1},openPopup:function(){var e=this;this.show=!0,console.log("标段id",this.sectionId),this.checkitemData=new h.b({moduleType:this.module,sectionId:this.sectionId}),this.isFresh=!1,this.$nextTick((function(){e.$refs["checkitem-widget"].init()}))},onClosed:function(){var e=this;this.setSearchMode(!1),this.$refs["app-search-bar-checkitem-select"]&&this.$refs["app-search-bar-checkitem-select"].cancelSearch(),this.$nextTick((function(){e.treeList=[],e.$refs["checkitem-widget"]&&e.$refs["checkitem-widget"].clearData()}))},onSubmit:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};console.log("选择结束"),this.$emit("onSelect",e)},onSelect:(n=Object(r.a)(regeneratorRuntime.mark((function e(t){var i,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.$refs["app-search-bar-checkitem-select"]&&this.$refs["app-search-bar-checkitem-select"].saveHistory(),t.type!==f.e){e.next=11;break}return e.next=4,this.checkitemData.getItemById(t.parent_id);case 4:return i=e.sent,e.next=7,this.checkitemData.getDescItems(t.parent_id);case 7:a=e.sent,this.$emit("onSelect",{checkItem:i,questionItem:t,questionItems:a}),e.next=12;break;case 11:this.$emit("onSelect",{checkItem:t});case 12:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)}),clearData:function(){this.checkitemData={},this.isFresh=!0},setSearchMode:function(e){if(e){var t=0;this.isIOS&&(t=22),this.isIOSBezelLess&&(t=44),this.height="calc(100% - ".concat(t,"px)")}else this.height="70%";this.isSearching=e},updateItemData:function(){this.$refs["checkitem-widget"].init()},setKeyBoardStatus:function(){console.log("触发"),this.isSuperApp&&this.isIOS&&window.__YL__.setMoveUpWebview(!0)},clearKeyBoardStatus:function(){console.log("触发取消"),this.isSuperApp&&this.isIOS&&window.__YL__.setMoveUpWebview(!1)},getTreeList:(a=Object(r.a)(regeneratorRuntime.mark((function e(t){var i=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.currentKey=t,this.isTreeLoading=!0,clearTimeout(this.timer),t){e.next=6;break}return this.treeList=[],e.abrupt("return");case 6:this.timer=setTimeout(Object(r.a)(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.checkitemData.getSearchItemsData(t);case 2:a=e.sent,console.log("获取树形数据",a),i.currentKey===t&&(i.treeList=a,i.isTreeLoading=!1);case 5:case"end":return e.stop()}}),e)}))),300);case 7:case"end":return e.stop()}}),e,this)}))),function(e){return a.apply(this,arguments)})}},g=(i("6d4c"),Object(l.a)(b,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("popup-has-header",{attrs:{height:e.height,title:"选择检查项"},on:{closed:e.onClosed},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[i("template",{slot:"body_main"},[i("div",{staticClass:"body-box"},[i("div",{staticClass:"body-top-bar",class:{full:e.isSearching&&!e.searchKeyword}},[i("app-search-bar",{ref:"app-search-bar-checkitem-select",staticClass:"bg-white",attrs:{"history-key":"checkitem-select-search-history-key"},on:{input:e.getTreeList,changeSearchStatus:e.setSearchMode},model:{value:e.searchKeyword,callback:function(t){e.searchKeyword=t},expression:"searchKeyword"}}),e.isSearching?e._e():i("div",{staticClass:"header-btn",on:{click:e.openSetUsualItems}},[i("icon",{attrs:{name:"set-view"}})],1),e.isSearching?e._e():i("div",{staticClass:"header-btn",on:{click:e.openCheckGuide}},[i("icon",{attrs:{name:"nav-info"}})],1)],1),i("check-item-select",e._b({directives:[{name:"show",rawName:"v-show",value:!e.isSearching,expression:"!isSearching"}],ref:"checkitem-widget",attrs:{data:e.checkitemData,selected:e.selected},on:{change:e.onSubmit}},"check-item-select",e.$attrs,!1)),e.searchKeyword?i("div",{staticClass:"tree-box"},[e.isTreeLoading?e._e():i("tree",{attrs:{data:e.treeList,keyword:e.searchKeyword},on:{onSelect:e.onSelect}}),i("loading-status",{attrs:{"is-loading":e.isTreeLoading,"is-empty":!e.treeList.length}},[e.isSearching?i("template",{slot:"empty-text"},[e._v("\n              未搜索到包含"),i("span",{staticClass:"color-blue"},[e._v(e._s(e.searchKeyword))]),e._v("的结果\n            ")]):e._e()],2)],1):e._e()],1)])],2),i("check-guide",{ref:"popup-check-guide",attrs:{module:e.module,"section-id":e.sectionId}},[i("div",{staticClass:"checkpoint-back",attrs:{slot:"header-left"},slot:"header-left"},[i("icon",{attrs:{name:"nav-back"}}),e._v("检查项")],1),i("div",{attrs:{slot:"header-right"},slot:"header-right"})]),i("set-usual-items",{ref:"popup-set-usual-items",attrs:{module:e.module,"section-id":e.sectionId},on:{onSelect:e.updateItemData}},[i("div",{staticClass:"checkpoint-back",attrs:{slot:"header-left"},slot:"header-left"},[i("icon",{attrs:{name:"nav-back"}}),e._v("检查项")],1)])],1)}),[],!1,null,"8ba95de4",null));t.a=g.exports},b17c:function(e,t,i){var a=i("ff6c");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);(0,i("85cb").default)("58d45079",a,!0,{sourceMap:!1,shadowMode:!1})},b26b:function(e,t,i){var a=i("ef5e");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);(0,i("85cb").default)("4373af40",a,!0,{sourceMap:!1,shadowMode:!1})},b280:function(e,t,i){"use strict";var a=i("bf9f"),n=i("6f9e"),r=i("eba8").a,o=(i("82db"),i("17cc")),s=Object(o.a)(r,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"weiget-box"},[e.searchBar?i("app-search-bar",{ref:"app-search-bar",attrs:{placeholder:"搜索","history-key":e.storageKey},on:{changeSearchStatus:e.onSearchTypeChange},model:{value:e.keyword,callback:function(t){e.keyword=t},expression:"keyword"}}):e._e(),i("scroller",{attrs:{"has-next":!e.searchStatus&&!e.grouping&&e.optionsLimit<e.options.length,"end-text":"","is-empty":0===e.optionsShow.length},on:{loadNext:e.pageOptions}},[e.searchStatus?[e.keyword?[e.grouping?i("van-collapse",{model:{value:e.activeTab,callback:function(t){e.activeTab=t},expression:"activeTab"}},e._l(e.searchData,(function(t,a){return i("van-collapse-item",{key:a,attrs:{title:t.name,name:a}},e._l(t.children,(function(t,a){return i("item",{key:a,attrs:{checked:e.checkedItem.id===t.id,item:t,"line-limit":e.lineLimit,"render-field":"rename"},on:{click:e.selectItem}})})))}))):e._e(),e.grouping&&!e.searchData.length?i("loading-status",{attrs:{"is-empty":!0,"empty-text":"没有内容","show-style":"search"}}):e._e(),e.grouping?e._e():[e._l(e.searchData,(function(t,a){return i("item",{key:a,attrs:{checked:e.checkedItem.id===t.id,item:t,"line-limit":e.lineLimit,"render-field":"rename"},on:{click:e.selectItem}})})),e.searchData.length?e._e():i("loading-status",{attrs:{"is-empty":!0,"empty-text":"没有内容","show-style":"search"}})]]:e._e()]:[e.grouping?i("van-collapse",{model:{value:e.activeTab,callback:function(t){e.activeTab=t},expression:"activeTab"}},e._l(e.optionsShow,(function(t,a){return i("van-collapse-item",{key:a,attrs:{title:t.name,name:a}},e._l(t.children,(function(t,a){return i("item",{key:a,attrs:{checked:e.checkedItem.id===t.id,item:t,"line-limit":e.lineLimit},on:{click:e.selectItem}})})))}))):e._l(e.optionsShow,(function(t,a){return i("item",{key:a,attrs:{checked:e.checkedItem.id===t.id,item:t,"line-limit":e.lineLimit},on:{click:e.selectItem}})})),e.optionsShow.length?e._e():i("loading-status",{attrs:{"is-empty":!0,"empty-text":"暂无数据","show-style":"search"}})]],2)],1)}),[],!1,null,"5920a10e",null).exports,c={components:{PopupHasHeader:a.a,Widget:s},data:function(){return{show:!1,title:""}},methods:{openPopup:function(e){var t=this;n.a.$on("closeDialog",this.closePopup),this.show=!0,this.title=e.title,this.$nextTick((function(){t.$refs["single-select"].init(e)}))},closePopup:function(){n.a.$off("closeDialog",this.closePopup),this.show=!1},clearStatus:function(){this.$refs["single-select"].closePopup()}}},l=(i("1f8b"),Object(o.a)(c,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("popup-has-header",{attrs:{height:"93%",title:e.title},on:{closed:e.clearStatus},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[i("template",{slot:"body_main"},[i("div",{staticClass:"body-box"},[i("widget",{ref:"single-select",on:{close:e.closePopup}})],1)])],2)],1)}),[],!1,null,"8dab4862",null));t.a=l.exports},b747:function(e,t,i){"use strict";i("f548"),i("9dd9"),i("cc57");var a={name:"UserSelectItem",components:{Item:i("07d2").default},props:{name:{type:String},post:{type:String},headPortrait:{type:String,default:""},multi:{type:Boolean,default:!1},selected:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},keyword:{type:String,default:""}},data:function(){return{}},computed:{showName:function(){var e="";if(""===this.keyword)e=this.name;else{var t=new RegExp("("+this.keyword+")","gmi");e=this.name.replace(t,'<span color="color-theme">$1</span>')}return e}}},n=(i("7583"),i("17cc")),r=Object(n.a)(a,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("item",e._g({class:{"item-disabled":e.disabled},attrs:{border:"bottom"}},e.$listeners),[e.headPortrait?i("img",{staticClass:"item-headimg",attrs:{src:e.headPortrait}}):e._e(),i("div",{staticClass:"item-text",class:{"color-theme":!e.multi&&e.selected}},[i("span",{domProps:{innerHTML:e._s(e.showName)}}),e.post?i("span",[e._v("("+e._s(e.post)+")")]):e._e()]),e.multi?i("icon",{attrs:{name:e.selected?"checkbox-checked":"checkbox"}}):i("icon",{attrs:{name:e.selected?"qualified":""}})],1)}),[],!1,null,"1a7b90ef",null);t.a=r.exports},b9a9:function(e,t,i){"use strict";i("6a61");var a,n=i("2e91"),r=i("bf9f"),o=i("8d3e").a,s=(i("4717"),i("17cc")),c=Object(s.a)(o,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"check-guide-detail-box"},[e.isLoading?e._e():i("div",{staticClass:"check-guide-detail-hd border-bottom"},[i("h2",{staticClass:"check-guide-detail-title pb10"},[e._v(e._s(e.title))])]),!e.isLoading&&e.content.length?i("div",{staticClass:"check-guide-detail-content"},e._l(e.content,(function(t,a){return i("p",{key:a},[t.isImg&&t.src?i("img",{class:{"img-not-ready":!t.ready,error:"rejected"===t.status},attrs:{src:e.getThumbnail(t)},on:{error:function(i){e.imgError(t,a)},click:function(i){e.imgClick(t)}}}):e._e(),t.isImg?e._e():i("span",[e._v("\n        "+e._s(t.val)+"\n      ")])])}))):e._e(),i("loading-status",{attrs:{"is-empty":!e.content.length,"empty-text":"PC端未设置检查指引"}})],1)}),[],!1,null,"399de7d9",null).exports,l=i("4d0e"),u={components:{PopupHasHeader:r.a,GuideDetail:c},props:{id:{type:String,default:""},module:{type:String,default:""}},data:function(){return{show:!1,checkGuideData:{}}},methods:{openPopup:(a=Object(n.a)(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.show=!0,this.checkGuideData=new l.a({moduleType:this.module}),this.$nextTick((function(){t.$refs["guide-detail"].init(t.id)}));case 3:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)}),closePopup:function(){this.show=!1}}},p=(i("09d66"),Object(s.a)(u,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("popup-has-header",{attrs:{title:"检查指引详情"},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[i("span",{staticClass:"f-gray",attrs:{slot:"header_left"},on:{click:e.closePopup},slot:"header_left"},[e._t("header-left")],2),e.$slots["header-right"]?i("span",{attrs:{slot:"header_right"},slot:"header_right"},[e._t("header-right")],2):e._e(),i("template",{slot:"body_main"},[i("guide-detail",{ref:"guide-detail",attrs:{data:e.checkGuideData}})],1)],2)}),[],!1,null,"1fb4f59e",null));t.a=p.exports},bc35:function(e,t,i){"use strict";i("a4e3")},bd9b:function(e,t,i){"use strict";i("5378")},bf9f:function(e,t,i){"use strict";var a={props:{title:{type:String,default:""},value:{type:Boolean,default:!1},height:{type:String,default:"70%"}},data:function(){return{show:this.value}},watch:{value:function(e){e!==this.show&&(this.show=e)},show:function(e){e!==this.value&&this.$emit("input",e)}},methods:{closePopup:function(){this.show=!1}}},n=(i("f4c9"),i("17cc")),r=Object(n.a)(a,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("van-popup",e._g({staticClass:"popup-customize-use-header",style:{height:e.height},attrs:{position:"bottom",round:"","get-container":"#app","safe-area-inset-bottom":"","close-on-popstate":""},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},e.$listeners),[i("div",{staticClass:"popup-header"},[i("div",{staticClass:"popup-header__left"},[e._t("header_left")],2),i("div",{staticClass:"popup-header__title"},[e._v(e._s(e.title))]),i("div",{staticClass:"popup-header__right"},[e._t("header_right",[i("icon",{staticClass:"f-gray",attrs:{name:"nav-close"},on:{click:e.closePopup}})])],2)]),i("div",{staticClass:"popup-body"},[e._t("body_main")],2)])],1)}),[],!1,null,"5fef0434",null);t.a=r.exports},c070:function(e,t,i){var a=i("574c");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);(0,i("85cb").default)("35590dcb",a,!0,{sourceMap:!1,shadowMode:!1})},c081:function(e,t,i){(e.exports=i("690e")(!1)).push([e.i,".zjapp .f-blue[data-v-3ce9ba4e]{color:#4275e8!important}.zjapp .f-gray[data-v-3ce9ba4e]{color:#666}[data-v-3ce9ba4e] .app-search-bar .border-bottom{background-image:none}[data-v-3ce9ba4e] .van-tabs__nav{padding-left:8%;padding-right:8%}[data-v-3ce9ba4e] .van-tabs__wrap:after{border-width:0;border-bottom-width:1px}.zjapp .triangle[data-v-3ce9ba4e]{font-size:14px;margin-right:8px;color:#c8c8c8;transform:rotate(0deg)}.zjapp .triangle.translate[data-v-3ce9ba4e]{color:transparent}.zjapp .triangle-down[data-v-3ce9ba4e]{transform:rotate(90deg)}.zjapp .tab-box[data-v-3ce9ba4e]{overflow:auto;padding-bottom:50px}.zjapp .selected[data-v-3ce9ba4e]{position:relative;flex-shrink:0;z-index:3;padding:5px 15px 10px 60px;line-height:24px;background-color:#fff;scroll-behavior:smooth;border:none;background-image:linear-gradient(0deg,#dcdcdc,#dcdcdc 50%,transparent 0);background-size:100% 1px;background-repeat:no-repeat;background-position:bottom}.zjapp .selected-label[data-v-3ce9ba4e]{position:absolute;top:10px;left:15px;line-height:24px;font-size:16px;color:#999}.zjapp .selected-item[data-v-3ce9ba4e]{position:relative;display:inline-block;min-height:24px;line-height:20px;padding:2px 20px 2px 5px;margin:5px 5px 0 0;font-size:14px;color:#666;background-color:#f4f4f4;border-radius:4px}.zjapp .select_result[data-v-3ce9ba4e]{max-height:90px;overflow-y:auto}.zjapp .selected-remove[data-v-3ce9ba4e]{position:absolute;top:0;right:0;width:20px;height:24px;line-height:24px;text-align:center;font-size:8px;color:#ccc}.zjapp .selected-item-disabled[data-v-3ce9ba4e]{padding:2px 5px}.zjapp .selected-item-disabled .selected-remove[data-v-3ce9ba4e]{display:none}.zjapp .scroll-wrap[data-v-3ce9ba4e]{flex:1;background:#fff;height:100%;overflow:auto;transform:translateZ(0)}.zjapp .fixed[data-v-3ce9ba4e]{position:absolute;top:0;left:0;right:0;background-color:#fff;z-index:4}.zjapp .part-title[data-v-3ce9ba4e]{padding:9px 15px 5px 15px;line-height:18px;font-size:12px;color:#999;background-color:#f4f4f4}.zjapp .item[data-v-3ce9ba4e]{align-items:center}.zjapp .item>[class*=icon-checkbox][data-v-3ce9ba4e]{margin-right:10px}.zjapp .body-box[data-v-3ce9ba4e]{display:flex;flex-direction:column;width:100%;flex:1}",""])},c2e0:function(e,t,i){"use strict";(function(e){i("9dd9"),i("f548");var a=i("4c09"),n=(i("e697"),i("6d57"),i("163d"),i("07d2")),r=i("242a");t.a={name:"Tree",components:{Item:n.default,Checkbox:r.a},props:{data:{type:Array,default:function(){return[]}},keyword:{type:String,default:""},level:{type:Number,default:0},selected:{type:Array,default:function(){return[]}},isCheckbox:{type:Boolean,default:!1}},data:function(){return{blanks:new Array(this.level),openSet:{}}},computed:{list:function(){return e.clone(this.data)}},watch:{data:{handler:function(e){var t=this;this.openSet={},(e||[]).forEach((function(e){t.$set(t.openSet,e.id,!!e.isOpen)}))},immediate:!0}},methods:{itemClick:function(e){e.children&&e.children.length?(e.isOpen=!e.isOpen,this.openSet[e.id]=!this.openSet[e.id]):this.isCheckbox||this.$emit("onSelect",e)},onSelect:function(t,i){if(this.isCheckbox){var n,r=t[0],o=e.find(this.list,(function(e){var t=r.parent_id||r.item_id;if(e.id===t)return e}));this.$emit("onSelect",(n=[o]).concat.apply(n,Object(a.a)(t)),i)}else this.$emit("onSelect",t)},keywordFilter:function(e){return this.keyword?e.replace(new RegExp(this.keyword,"gm"),'<span class="color-blue">'+this.keyword+"</span>"):e},isSelected:function(t){return e.isArray(this.selected)?e.some(this.selected,{id:t.id}):this.selected&&this.selected.id===t.id},checkboxChange:function(e,t){var i=e[0],a=e[1];this.$emit("onSelect",[t],{checked:i,status:a})}}}}).call(this,i("391c"))},c351:function(e,t,i){var a=i("017a");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);(0,i("85cb").default)("73ddfab9",a,!0,{sourceMap:!1,shadowMode:!1})},c40a:function(e,t,i){"use strict";(function(e){i("cc57"),i("6d57"),i("6f84"),i("163d");var a=i("a32d"),n=i.n(a),r=i("e900"),o=i("3122"),s=i("4ad6"),c=i("3bd5"),l=i("1b7e");function u(e){var t=e.changedTouches.length,i=e.touches.length;return 1===t||2===t||2===i}function p(e){return 1===e.touches.length}t.a={name:"Drawing",props:{url:{type:String},points:{type:Array,default:function(){return[]}},regions:{type:Array,default:function(){return[]}},pointColor:{type:String,default:"#ff4546"},pointRadius:{type:Number,default:7},scaleMax:{type:Number,default:4},clickDelay:{type:Number,default:500},folder:{type:String,default:"house-image"},onlineMode:{type:Boolean,default:!1},contentScroll:{type:Boolean,default:!0}},data:function(){return{isDownloading:!1,error:"",canvas:null,ctx:null,img:null,src:"",width:0,height:0,x:0,y:0,scale:1,defaultScale:1,pixelRatio:1,markPosition:null,markPositionImageData:[],markCoordinates:[],pinchRatio:0,scaleBetween:[],isPinch:!1,clickPoints:[],touchStart:{x:0,y:0,cx:0,cy:0,time:0}}},watch:{url:function(){this.getImage()},points:function(e){this.ctx&&this.draw()},regions:function(e){this.ctx&&this.draw()}},mounted:function(){this.getImage()},destroyed:function(){this.canvas&&(this.canvas.width=0,this.canvas.height=0)},methods:{getImage:function(){var t=this;if(this.isDownloading=!0,this.url){var i=c.a.getUser().user_id,a=n.a.replaceAll(this.url,"\\?x-oss-process=image\\/resize,","@"),r=n.a.strRightBack(a,"/");if(!r)return this.error="户型图地址错误",void(this.isDownloading=!1);this.error="";var u=[s.a.appImagePath()+i+"/"+this.folder+"/"+r,s.a.appImagePath()+i+"/house-image/"+r,s.a.appImagePath()+i+"/drawing/"+r,s.a.appImagePath()+i+"/location-image/"+r,s.a.appImagePath()+i+"/images/"+r,s.a.appDataPath()+i+"/"+this.folder+"/"+r,s.a.appDataPath()+i+"/house-image/"+r,s.a.appDataPath()+i+"/drawing/"+r,s.a.appDataPath()+i+"/location-image/"+r,s.a.appDataPath()+i+"/images/"+r],p=Promise.resolve();return"dev"===APP_ENV||this.onlineMode?p=p.then((function(){return t.url})):e.each(u,(function(e){p=p.then((function(t){return t||s.a.isFileExists(e).then((function(t){if(t)return o.a._fixPath(e)}))}))})),p.then((function(e){if(!e)return l.a.getHasNetwork().then((function(e){return e?o.a.download(t.url,!0,t.folder).then((function(e){t.src=e})):Promise.reject("当前无网络")}));t.src=e})).then((function(){t.src?(t.img=new Image,t.img.onload=function(){t.img.complete?(t.isDownloading=!1,t.$nextTick(t.init)):(t.error="加载图片失败",t.isDownloading=!1)},t.img.onerror=function(){t.error="加载图片失败",t.isDownloading=!1},t.img.src=t.src):(t.error="下载户型图失败",t.isDownloading=!1)})).catch((function(i){t.error=e.isString(i)?i:"下载户型图失败",t.isDownloading=!1}))}this.error="户型图地址错误",this.isDownloading=!1},init:function(){if(this.$refs["drawing-canvas"]){var e=this.$refs.content;this.canvas=this.$refs["drawing-canvas"],this.ctx=this.canvas.getContext("2d"),this.width=e.offsetWidth,this.height=e.offsetHeight,this.pixelRatio=this.getPixelRatio(this.ctx),this.canvas.style.height=this.height+"px",this.canvas.style.width=this.width+"px",this.canvas.width=this.width*this.pixelRatio,this.canvas.height=this.height*this.pixelRatio,!this.ctx.extended&&Object(r.a)(this.ctx),this.bindTouchEvent(),this.calc(),this.draw()}},getPixelRatio:function(e){var t=e.backingStorePixelRatio||CanvasRenderingContext2D.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1;return(window.devicePixelRatio||1)/t},calc:function(e){var t=this.width/this.img.width,i=this.img.height*t,a=this.height||i;i>this.height&&(t*=a/i),this.scale=t*this.pixelRatio,this.defaultScale=this.scale,this.scaleBetween=[this.scale,this.scale*this.scaleMax]},winToCanvas:function(e,t){var i=this.canvas.getBoundingClientRect();return{x:e-i.left*(this.canvas.width/(i.width*this.pixelRatio)),y:t-i.top*(this.canvas.height/(i.height*this.pixelRatio))}},isBoundary:function(e){switch(e){case"t":if(0===this.y)return!0;break;case"r":if(this.x<=this.canvas.width-this.img.width*this.scale)return!0;break;case"b":if(this.y<=this.img.height*this.scaleBetween[0]-this.img.height*this.scale)return!0;break;case"l":if(0===this.x)return!0}return!1},bindTouchEvent:function(){this.canvas.addEventListener("touchstart",this.onTouchstart),this.canvas.addEventListener("touchmove",this.onTouchmove),this.canvas.addEventListener("touchend",this.touchMoveAndEndHandler)},unbindTouchEvent:function(){this.canvas.removeEventListener("touchstart",this.onTouchstart),this.canvas.removeEventListener("touchmove",this.onTouchmove),this.canvas.removeEventListener("touchend",this.touchMoveAndEndHandler)},onTouchstart:function(e){if(this.isPinch=!1,p(e)){var t=e.touches[0],i=this.winToCanvas(t.clientX,t.clientY);this.touchStart={x:i.x,y:i.y,cx:t.clientX,cy:t.clientY,time:Date.now()}}else if(u(e)){var a,n=e.touches[0],r=e.touches[1],o=this.winToCanvas(n.clientX,n.clientY),s=this.winToCanvas(r.clientX,r.clientY);a=Math.sqrt(Math.pow(s.x-o.x,2)+Math.pow(s.y-o.y,2)),this.pinchRatio=this.scale/a}},onTouchmove:function(e){if(!1===this.contentScroll&&(e.preventDefault(),e.stopPropagation()),p(e))this.touchStart.cy>e.pageY&&this.isBoundary("b")||this.touchStart.cy<e.pageY&&this.isBoundary("t")||this.touchStart.cx>e.pageX&&this.isBoundary("r")||this.touchStart.cx<e.pageX&&this.isBoundary("l")||e.stopPropagation(),this.touchMoveAndEndHandler(e);else if(u(e)){e.stopPropagation();var t,i,a,n,r,o=e.touches[0],s=e.touches[1],c=this.winToCanvas(o.clientX,o.clientY),l=this.winToCanvas(s.clientX,s.clientY);i=Math.sqrt(Math.pow(l.x-c.x,2)+Math.pow(l.y-c.y,2)),this.isPinch=!0,(t=this.pinchRatio*i)>this.scaleBetween[0]&&t<this.scaleBetween[1]&&(n={x:((a={x:(c.x+l.x)/2*this.pixelRatio,y:(c.y+l.y)/2*this.pixelRatio}).x-this.x)/(this.img.width*this.scale),y:(a.y-this.y)/(this.img.height*this.scale)},a.newX=this.x+this.img.width*t*n.x,a.newY=this.y+this.img.height*t*n.y,r={x:a.newX-a.x,y:a.newY-a.y},t<this.scale&&this.setRange(this.x-r.x,this.y-r.y,t),t>this.scale&&(this.x=this.x-r.x,this.y=this.y-r.y),t!==this.scale&&(this.scale=t,this.draw()))}},touchMoveAndEndHandler:function(e){var t,i,a=e.type,n={touchmove:e.touches[0],touchend:e.changedTouches[0]}[a],r=this.winToCanvas(n.clientX,n.clientY);t=(r.x-this.touchStart.x)*this.pixelRatio,i=(r.y-this.touchStart.y)*this.pixelRatio,"touchend"===a&&Date.now()-this.touchStart.time<this.clickDelay&&Math.abs(n.clientX-this.touchStart.cx)<6&&Math.abs(n.clientY-this.touchStart.cy)<6?this.clickHandler(e):"touchmove"!==a||this.isPinch||(this.touchStart.x=r.x,this.touchStart.y=r.y,this.setRange(this.x+t,this.y+i,this.scale),this.draw())},isCanClick:function(e){for(var t=!1,i=0;i<this.markPosition.length;i++)if(parseFloat(e.x)>parseFloat(this.markPosition[i].x)&&parseFloat(e.x)<parseFloat(this.markPosition[i].x)+parseFloat(this.markPosition[i].w)&&parseFloat(e.y)>parseFloat(this.markPosition[i].y)&&parseFloat(e.y)<parseFloat(this.markPosition[i].y)+parseFloat(this.markPosition[i].h)){t=!0;break}return t},clickHandler:function(e){var t=e.changedTouches[0];if(this.mark){var i=this.winToCanvas(t.clientX,t.clientY),a={x:(i.x-this.x/this.pixelRatio)/(this.img.width*this.scale/this.pixelRatio),y:(i.y-this.y/this.pixelRatio)/(this.img.height*this.scale/this.pixelRatio)};if(i={x:a.x*this.img.width,y:a.y*this.img.height},this.isCanClick(i)){this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(i.x*this.scale/this.pixelRatio+this.x/this.pixelRatio,i.y*this.scale/this.pixelRatio+this.y/this.pixelRatio,this.scale===this.defaultScale?this.pointRadius:this.pointRadius*(1+(this.scale-this.defaultScale)/this.pixelRatio),0,2*Math.PI,!1),this.ctx.fill(),this.ctx.restore();var n={x:i.x,y:i.y};this.markCoordinates.push(n),this.points.push(n)}return!1}this.redraw(e,this.winToCanvas(t.clientX,t.clientY))},setRange:function(e,t,i){var a=this.img.width*i,n=this.img.height*i,r=this.canvas.width,o=this.canvas.height,s=this.img.height*this.scaleBetween[0];e=a<r?(r-a)/2:(e=e+a<r?r-a:e)>0?0:e,t=n<o?(o-n)/2:(t=t+n<s?s-n:t)>0?0:t,this.x=e,this.y=t},draw:function(){this.setRange(this.x,this.y,this.scale),this.drawImage(),this.drawPoints(),this.drawRegions()},redraw:function(e,t){this.clickPoints=[],this.drawImage(),this.drawPoints(t),this.drawRegions(t),this.clickCallback(e,this.clickPoints)},clickCallback:function(e,t){var i;t.some((function(e,t){return"points"===e.tag?(i=e,!0):(i=e,!1)}));var a=e.changedTouches[0],n=this.winToCanvas(a.clientX,a.clientY),r=(n.x-this.x/this.pixelRatio)/(this.img.width*this.scale/this.pixelRatio),o=(n.y-this.y/this.pixelRatio)/(this.img.height*this.scale/this.pixelRatio);(n={x:parseFloat((r*this.img.width).toFixed(2)),y:parseFloat((o*this.img.height).toFixed(2))}).y>=0&&n.x>=0&&n.y<=this.img.height&&n.x<=this.img.width&&this.$emit("onclick",{type:i?"point":"",points:this.points,point:i,clickPoint:i,x:n.x,y:n.y,scale:this.scale/this.pixelRatio})},drawImage:function(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.ctx.drawImage(this.img,0,0,this.img.width,this.img.height,this.x,this.y,this.img.width*this.scale,this.img.height*this.scale)},drawPoints:function(e){var t=this;this.points.forEach((function(i,a){t.drawPoint(i.x*t.scale/t.pixelRatio+t.x/t.pixelRatio,i.y*t.scale/t.pixelRatio+t.y/t.pixelRatio,t.pointRadius,a,e,i.color)}))},drawPoint:function(e,t,i,a,n,r){this.ctx.save(),this.ctx.beginPath(),this.ctx.shadowBlur=i/2,this.ctx.shadowColor="black",this.ctx.fillStyle=r||this.pointColor,this.ctx.arc(e,t,i,0,2*Math.PI,!1),this.ctx.fill(),this.ctx.shadowBlur=0,this.ctx.shadowColor="transparent",this.ctx.restore(),i*=2,this.ctx.save(),this.ctx.beginPath(),this.ctx.strokeStyle="transparent",this.ctx.fillStyle="transparent",this.ctx.rect(e-i,t-i,2*i,2*i),this.ctx.stroke(),this.ctx.restore(),n&&this.ctx.isPointInPath(n.x*this.pixelRatio,n.y*this.pixelRatio)&&this.clickPoints.push({tag:"points",pos:n,index:a})},drawRegions:function(e){var t=this;this.regions&&this.regions.length&&this.regions.forEach((function(i,a){var n,r,o,s;t.ctx.beginPath(),i.area.forEach((function(e,i){var a=e[0]*t.scale/t.pixelRatio+t.x/t.pixelRatio,c=e[1]*t.scale/t.pixelRatio+t.y/t.pixelRatio;i?t.ctx.lineTo(a,c):t.ctx.moveTo(a,c),n=void 0===n?a:n<a?n:a,r=void 0===r?a:r>a?r:a,o=void 0===o?c:o<c?o:c,s=void 0===s?c:s>c?s:c})),t.ctx.closePath(),t.ctx.fillStyle="rgba(255, 144, 0, 0.4)",t.ctx.fill(),t.ctx.lineWidth=3,t.ctx.strokeStyle="#feda8e",t.ctx.stroke(),t.ctx.lineWidth=2,t.ctx.strokeStyle="rgba(0, 0, 0, 0.8)",t.ctx.stroke(),e&&t.ctx.isPointInPath(e.x*t.pixelRatio,e.y*t.pixelRatio)&&t.clickPoints.push({tag:"region",pos:e,index:a,regionData:i}),t.ctx.font='18px bold -apple-system, "Helvetica Neue", Roboto, "Segoe UI", sans-serif',t.ctx.textAlign="center",t.ctx.lineWidth=4,t.ctx.strokeStyle="#ffffff",t.ctx.strokeText(i.name,(r+n)/2,(s+o)/2+10),t.ctx.fillStyle="#111111",t.ctx.fillText(i.name,(r+n)/2,(s+o)/2+10)}))}}}}).call(this,i("391c"))},c65d:function(t,i,a){"use strict";(function(t){a("6a61");var n,r,o=a("2e91"),s=a("1b7e"),c=a("e2a7"),l=a("4ad6"),u=a("3122"),p="00:00",d="00:00";i.a={name:"AppVoiceRecord",components:{},props:{value:{type:Array,default:function(){return[]}},isText:{type:Boolean,default:!1},isDelete:{type:Boolean,default:!1}},data:function(){return{sound:null,isPlay:"start",seekTime:null,progress:0,seekText:p,duration:d,initDuratin:0,disabled:!0,startDrap:!1,src:[],text:""}},computed:{isEmpty:function(){return t.isEmpty(this.value)}},watch:{value:function(e){var i=this;this.$nextTick((function(){t.isEmpty(e)||i.init()}))}},created:function(){this.init()},deactivated:function(){this.closeHowler()},methods:{init:(r=Object(o.a)(regeneratorRuntime.mark((function e(){var i,a,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=this.value[0],!t.isEmpty(i)){e.next=3;break}return e.abrupt("return");case 3:a=Math.ceil(i.duration),n=null,i.voiceUrl?n=i.voiceUrl:i.voiceTemp&&(n=u.a.fixUrl(i.voiceTemp)),this.text=i.text,this.sound=null,this.src=n,this.duration=this.formatTime(a),this.initDuratin=a,this.disabled=!0,this.startDrap=!1,$log.log("语音初始化：",this.value);case 14:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)}),player:function(){$log.log("语音加载中-路径：",this.src);var e=new Audio;e.src=this.src,this.isPlay="loading",e.removeEventListener("canplaythrough",this.load),e.addEventListener("canplaythrough",this.load,!1),e.removeEventListener("error",this.error),e.addEventListener("error",this.error,!1),e.removeEventListener("playing",this.playing),e.addEventListener("playing",this.playing,!1),e.removeEventListener("pause",this.pause),e.addEventListener("pause",this.pause,!1),e.removeEventListener("ended",this.ended),e.addEventListener("ended",this.ended,!1),this.sound=e},load:function(){var e=this.sound.duration;e=Math.ceil(e),this.isPlay="middle",this.duration=this.formatTime(e),this.initDuratin=e,this.disabled=!1,$log.log("语音播放-加载完成",{"实际总时长":this.sound.duration,"显示时长":e})},error:function(t){var i=this;s.a.getHasNetwork().then((function(t){var a="播放失败";t||(a="当前无网络"),i.sound=null,i.isPlay="start",c.a.alert(a),$log.error("语音播放-加载异常",{"获取路径":e.currentTarget.src,"audio失败原因":e.currentTarget.error,"网络原因":!t})}))},playing:function(){$log.log("语音播放-开始时"),this.isPlay="middle",this.openInterval()},pause:function(){$log.log("语音播放-关闭时"),this.isPlay="start"},ended:function(){var e=this;$log.log("语音播放-播放完毕时"),cancelAnimationFrame(this.seekTime);var t=setTimeout((function(){e.isPlay="start",e.progress=0,e.seekText=p,clearTimeout(t)}),60)},unload:function(){this.sound&&this.sound.pause(),this.sound=null},startPlay:(n=Object(o.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.sound){e.next=4;break}return e.next=3,this.init();case 3:this.player();case 4:this.sound.play(),0===this.sound.currentTime&&(this.seekText=p,this.progress=0);case 6:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)}),pausePlay:function(){this.sound.pause(),this.isPlay="start"},loadingPlay:function(){this.unload(),this.sound=null,this.isPlay="start"},deleteVoive:function(){var e=this;c.a.confirm({message:"确定删除语音？",okText:"删除"},(function(){e.closeHowler();var t=e.value[0];t.voiceTemp&&l.a.deleteFile(t.voiceTemp),e.$emit("delte-voice",t.id)}))},closeHowler:function(){this.unload(),cancelAnimationFrame(this.seekTime)},dragStart:function(){this.startDrap=!0,cancelAnimationFrame(this.seekTime)},dragInput:function(e){var t=e/100,i=this.initDuratin*t;this.seekText=this.formatTime(Math.floor(i))},dragEnd:function(){this.startDrap=!1;var e=this.progress/100,t=this.initDuratin*e;this.sound&&(this.sound.paused?this.sound.play():this.openInterval(),this.sound.currentTime=t)},openInterval:function(){this.seekTime=requestAnimationFrame(this.step.bind(this))},step:function(){var e=this.sound,t=Math.ceil(e.currentTime||0),i=Math.ceil(e.duration);this.progress=Math.round(t/i*100),this.seekText=this.formatTime(t),e.paused||this.openInterval()},formatTime:function(e){var t=Math.floor(e/60)||0,i=Math.round(e-60*t)||0;return(t=t>=10?t:"0"+t)+":"+(i=i>=10?i:"0"+i)}}}}).call(this,a("391c"))},c6cf:function(e,t,i){"use strict";i("a207")},c82d:function(e,t,i){var a=i("0c52");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);(0,i("85cb").default)("26e0fa2e",a,!0,{sourceMap:!1,shadowMode:!1})},cc1f:function(e,t,i){"use strict";i("28f6")},cdce:function(e,t,i){"use strict";(function(e){i("cc57");var a=i("4360"),n=i("3bd5"),r=i("1601"),o=i("e2a7"),s=i("6f9e");t.a={name:"CheckUserContact",props:{list:{type:Array,default:function(){return[]}}},data:function(){return{popupOpenItemId:"",popupL:"50%",arrowL:"50%",popupUserPosiBottom:!1}},computed:{allowIM:function(){return window&&window.$rootScope&&window.$rootScope.allowIM},userInfo:function(){return n.a.getUser()}},created:function(){s.a.$on("pageContentClick",this.closeImPopup)},destroyed:function(){s.a.$off("pageContentClick",this.closeImPopup)},methods:{hasIm:function(e){return!!parseInt(e.is_im_user)},openImPopup:function(e,t){if($log.log("打开聊天窗口",e),s.a.$emit("pageContentClick"),this.popupOpenItemId=e.id,t&&t.target){var i=t.target.getBoundingClientRect(),n=window.innerWidth,r=a.a.state.app.isIOS?a.a.state.app.isIOSBezelLess?88:64:44;i.top<r+68?this.popupUserPosiBottom=!0:this.popupUserPosiBottom=!1,n-i.right<50?(this.popupL=16-(50-(n-i.right))+"px",this.arrowL=50-(n-i.right)+65+"px"):(this.popupL="50%",this.arrowL="50%")}},closeImPopup:function(){this.popupOpenItemId=""},openIm:function(t){var i=this.isImDisabled(t),a=this.allowIM&&!i;if(console.log(i,a,this.allowIM),a)if(e.has(t,"headimg_url")){var n=this.userInfo.tenant_code+"_"+t.id;r.a.openIm(n,t.name,t.headimg_url).catch((function(e){o.a.alert(e)}))}else r.a.openUserChat(t.id).catch((function(e){o.a.alert(e)}));else o.a.alert("聊天功能优化中暂不可用")},isImDisabled:function(e){return 1!==parseInt(e.is_im_user)||e.id===this.userInfo.user_id}}}}).call(this,i("391c"))},cf4d:function(e,t,i){"use strict";var a=i("a336").a,n=(i("2572"),i("17cc")),r=Object(n.a)(a,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{ref:"place-select-box",staticClass:"place-select-box"},[e.loading?i("div",{staticClass:"flex-box"},[i("van-loading",{attrs:{color:"#1989fa",size:"60px"}})],1):e._l(e.tabList,(function(t,a){return i("div",{key:t.type,ref:"place-select-list",refInFor:!0,staticClass:"place-select-list"},e._l(t.children,(function(n){return i("div",{key:n.id,staticClass:"place-select-list__item",class:{actived:n.checked},on:{click:function(i){e.onSelectPositionItem(n,t.children,a)}}},[i("span",{},[e._v(e._s(n.name))])])})))}))],2)}),[],!1,null,"5ccdfc17",null);t.a=r.exports},d042:function(e,t,i){(e.exports=i("690e")(!1)).push([e.i,"[data-v-8ba95de4] .list-tree .item-text{font-size:14px}[data-v-8ba95de4] .list-tree .item{padding:5px 15px}.zjapp .full[data-v-8ba95de4]{flex:1}.zjapp .body-top-bar[data-v-8ba95de4]{display:flex;padding:4px;border:none;background-image:linear-gradient(0deg,#ececec,#ececec 50%,transparent 0);background-size:100% 1px;background-repeat:no-repeat;background-position:bottom}.zjapp .body-top-bar[data-v-8ba95de4] .app-search-bar{flex:1}.zjapp .body-top-bar[data-v-8ba95de4] .app-search-bar .app-search-input-wrap.border-bottom{background-image:none}.zjapp .checkpoint-back[data-v-8ba95de4]{display:flex;align-items:center}.zjapp .checkpoint-back .icon-nav-back[data-v-8ba95de4]{font-size:22px}.zjapp .body-box[data-v-8ba95de4]{width:100%;flex:1;display:flex;flex-direction:column}.zjapp .tree-box[data-v-8ba95de4]{flex:1;overflow:auto}",""])},d23f:function(e,t,i){"use strict";(function(e){i("5ab2"),i("e10e"),i("e204"),i("6d57"),i("ed63"),i("8cf2"),i("e697");var a=i("28f8"),n=(i("cc57"),i("9dd9"),i("163d"),i("936a"),i("e2a7")),r=i("9eea"),o=i("774b"),s=i("07d2"),c=i("b747"),l=i("6144"),u=i("a18c"),p=i("4360"),d=i("bf9f"),h=i("3122");function f(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,a)}return i}function m(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?f(Object(i),!0).forEach((function(t){Object(a.a)(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):f(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var b={31:"施工单位",32:"监理单位",33:"建设单位"};t.a={name:"AppUserSelect",components:{appSearchBar:r.default,Scroller:o.default,Item:s.default,UserItem:c.a,PopupHasHeader:d.a},data:function(){return{getImageThumbnail:h.a.getImageThumbnail.bind(h.a),storageKey:encodeURI(this.title||"userSelectMark"),show:!1,searchStatus:!1,keyword:"",options:[],selected:[],disabled:[],max:1/0,maxTip:"",title:"",multi:!1,lastSelected:[],openSet:{},active:0,maxScrollHeight:0}},computed:{allRoleSelected:function(){var e=this,t=(this.roleGroup[this.active]||{}).children;return(void 0===t?[]:t).map((function(t){return e.disabledSet[t.id]?null:t.id})).filter(Boolean).every((function(t){return e.selectedSet[t]}))},canSelectAllRole:function(){return this.multi&&!Number.isFinite(this.max)},selectedSet:function(){var t={};return e.isArray(this.selected)?e.each(this.selected,(function(e){t[e.id]=!0})):this.selected&&this.selected.id&&(t[this.selected.id]=!0),t},disabledSet:function(){var t={};return e.each(this.disabled||[],(function(e){t[e.id]=!0})),t},roleGroup:function(){var t,i=this,a=[{id:31,name:"施工单位",children:[]},{id:32,name:"监理单位",children:[]},{id:33,name:"建设单位",children:[]}];t=this.keyword?e.filter(this.options,(function(e){return new RegExp("("+i.keyword.trim()+")","gmi").test(e.name)})):this.options,e.each(a,(function(i){i.children=e.filter(t,(function(e){return e.role===i.id}))}));var n=this.lastSelected.map((function(e){return m(m({},e),{},{role_name:"".concat(b[e.role],"-")})}));return console.log(n),a.push({name:"最近选择",children:n||[]}),a},contractorGroup:function(){var t=this,i=[];if(p.a.state.global.allowGroupUserByConstructor){var a,n={id:"other",name:"其他",children:[]};a=this.keyword?e.filter(this.options,(function(e){return new RegExp("("+t.keyword+")","gmi").test(e.name)})):this.options,e.each(a,(function(t){31===t.role&&(t.contractors&&t.contractors.length?e.each(t.contractors,(function(a){var n=e.find(i,(function(e){return e.id===a.id}));n||(n=m(m({},a),{},{children:[]}),i.push(n)),n.children.push(m({},t))})):n.children.push(m({},t)))})),e.isEmpty(n.children)||i.push(n)}return i},groupSelectedSet:function(){var t=this,i={};return e.each(this.roleGroup,(function(a){var n=e.some(a.children,(function(e){return!t.selectedSet[e.id]}));i[a.id]=!n})),e.each(this.contractorGroup,(function(a){var n=e.some(a.children,(function(e){return!t.selectedSet[e.id]}));i[a.id]=!n})),i}},watch:{keyword:function(e){this.setSearchOpenSet()},selected:function(){var e=this;this.$nextTick((function(){var t=e.$refs["select-box"],i=0;t&&(i=t.offsetHeight||0),$log.log("user-select选人组件",{desc:"选取结果高度",data:i}),e.maxScrollHeight=Math.floor(.93*$rootScope.viewSize.height-144-i)}))}},methods:{openPopup:function(t){this.active=0,t.selected=t.selected||[];var i=e.isArray(t.selected)?t.selected:[t.selected],a=e.filter(t.options,(function(t){return e.some(i,{id:t.id})||t.checked}));t.disabled=t.disabled||[];var n=e.isArray(t.disabled)?t.disabled:[t.disabled],r=e.filter(t.options,(function(t){return e.some(n,{id:t.id})||t.disabled}));this.show=!0,this.title=t.title,this.selected=a,this.disabled=r,this.options=t.options,this.multi=t.multi,this.onSelect=t.onSelect,this.beforeSelect=t.beforeSelect,this.beforeConfirm=t.beforeConfirm,this.max=t.max||1/0,this.maxTip=t.maxTip||"";var o=this.getLastSelected(),s=e.filter(t.options,(function(t){return e.includes(o,t.id)}));s=e.sortBy(s,(function(t){return e.indexOf(o,t.id)})),this.lastSelected=s,this.storageKey=encodeURI(this.title||"userSelectMark"),this.setDefaultOpen(),this.$refs["app-search-bar"]&&this.$refs["app-search-bar"].cancelSearch(),this.$emit("open")},setDefaultOpen:function(){var t=this;this.openSet={};var i=e.uniqBy(e.map(this.selected,"role"));e.each(i,(function(e){t.$set(t.openSet,e,!0)}));var a=[];e.each(this.selected,(function(e){e&&e.contractors&&e.contractors.length&&(a=a.concat(e.contractors))})),a=e.uniqBy(a,"id"),e.each(a,(function(e){t.$set(t.openSet,e.id,!0)}))},setSearchOpenSet:function(){var t=this;this.keyword?(e.each(this.roleGroup,(function(e){t.$set(t.openSet,e.id,!0)})),e.each(this.contractorGroup,(function(e){t.$set(t.openSet,e.id,!0)}))):this.setDefaultOpen()},toggleGroup:function(e){this.$set(this.openSet,e.id,!this.openSet[e.id])},getLastSetKey:function(){var e=u.a.history.current,t=e?e.name:"";return"".concat(p.a.state.global.currentProject.id,"-").concat(t,"-").concat(encodeURI(this.title))},saveLastSelected:function(t){if(t&&(e.isArray(t)||(t=[t]),!(t.length>11))){var i=this.getLastSelected();e.each(t,(function(e){i.unshift(e.id)})),(i=e.uniqBy(i)).length>11&&(i=i.splice(0,11));var a=this.getLastSetKey(),n=l.a.getUserObject("user-select-last-selected")||{};n[a]=i,l.a.saveUserObject("user-select-last-selected",n)}},getLastSelected:function(){var e=this.getLastSetKey();return(l.a.getUserObject("user-select-last-selected")||{})[e]||[]},closePopup:function(){this.show=!1,this.$emit("close")},onSure:function(){this.saveLastSelected(this.selected),this.onSelect(this.selected),this.closeEvent()},onConfirm:function(){var e=this,t=this.multi?this.beforeSelect(this.selected):null,i=this.beforeConfirm(this.selected);t instanceof Promise||(t=Promise.resolve(t)),i instanceof Promise||(i=Promise.resolve(i)),t.then((function(t){!1!==t&&i.then((function(t){!1!==t&&window.setTimeout((function(){e.onSure()}),300)}))}))},closeEvent:function(){this.closePopup(),this.$refs["app-search-bar"]&&this.$refs["app-search-bar"].cancelSearch(),this.onSearchTypeChange(!1)},onSearchTypeChange:function(e){this.searchStatus=e,e||(this.keyword="")},selectAllRole:function(){var e=this,t=this.roleGroup[this.active]||{},i=t.children||[],a=this.allRoleSelected;$log.log("user-select选人组件",{desc:"全选=>单位id-单位名称-选择之前的状态",data:{id:t.id,name:t.name,allSelected:a}});var n=i.filter((function(t){return!e.disabledSet[t.id]}));a?n.forEach((function(t){var i=e.selected.findIndex((function(e){return e.id===t.id}));~i&&e.selected.splice(i,1)})):n.forEach((function(t){~e.selected.findIndex((function(e){return e.id===t.id}))||e.selected.push(t)})),this.recordSearch()},selectedAll:function(t){var i=this;if(t&&t.children&&t.children.length){var a="";if(a=!this.groupSelectedSet[t.id]){var r=e.filter(t.children,(function(e){return!i.selectedSet[e.id]&&!i.disabledSet[e.id]})).length;if(this.selected.length+r>this.max)return void n.a.alert(this.maxTip||"最多选择".concat(this.max,"个"))}e.each(t.children,(function(t){if(!i.disabledSet[t.id]){var n=e.findIndex(i.selected,{id:t.id});n<0?a&&i.selected.unshift(t):a||i.selected.splice(n,1)}}))}},onSelectUser:function(t){var i=this;$log.log("user-select选人组件",{desc:"单选",data:t});var a=this.multi?null:this.beforeSelect(t);a instanceof Promise||(a=Promise.resolve(a)),a.then((function(a){if(!1===a)return!1;if(!i.disabledSet[t.id]){if(i.multi){var r=e.findIndex(i.selected,{id:t.id});if(r<0){if(i.selected.length>=i.max)return void n.a.alert(i.maxTip||"最多选择".concat(i.max,"个"));i.selected.unshift(t)}else i.selected.splice(r,1)}else i.selected=[t],window.setTimeout((function(){i.onSure()}),300);i.recordSearch()}}))},recordSearch:function(){this.$refs["app-search-bar"].saveHistory()}}}}).call(this,i("391c"))},d866:function(e,t,i){"use strict";(function(e){i("5ab2"),i("6d57"),i("e10e");var a=i("28f8"),n=(i("cc57"),i("163d"),i("07d2")),r=i("b280"),o=i("6144");function s(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,a)}return i}function c(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?s(Object(i),!0).forEach((function(t){Object(a.a)(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):s(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}t.a={name:"SingleSelect",components:{Item:n.default,PopupSingleSelect:r.a},props:{title:{type:String,default:""},border:{type:String,default:""},pageTitle:{type:String,default:""},placeholder:{type:String,default:""},value:{type:Object,default:function(){return{}}},options:{type:Array,default:function(){return[]}},optionsDisabled:{type:Array,default:function(){return[]}},required:{type:Boolean,default:!0},mode:{type:String,default:"edit"},editabled:{type:Boolean,default:!0},memory:{type:Boolean,default:!1},autoSelect:{type:Boolean,default:!1},beforeOpen:{type:Function,default:function(){}},searchBar:{type:Boolean,default:!0},grouping:{type:String,default:""},autoOpen:{type:Boolean,default:!1},rightBtn:{type:String,default:""},rightBtnEvent:{type:Function,default:function(){return 0}},ifToggle:{type:Boolean,default:!1},formCheck:{type:Boolean,default:!1},editorAddData:{type:Boolean,default:!1},lineLimit:{type:[Number,String],default:1}},data:function(){return{memoryKey:this.$route.name+encodeURI(this.title)}},watch:{options:function(){this.setSelected()}},mounted:function(){this.setSelected()},methods:{openSelect:function(){var t=this;if(this.editabled){var i=this.beforeOpen();i&&i.then&&e.isFunction(i.then)?i.then((function(e){!1!==e&&t.openPopup()})):!1!==i&&this.openPopup()}},openPopup:function(){var t=this;if(this.optionsDisabled&&this.optionsDisabled.length){var i={};e.each(this.optionsDisabled,(function(e){e.id&&(i[e.id]=e)})),e.each(this.options,(function(e,a){i[e.id]?t.options[a].disabled=!0:t.options[a].disabled=!1}))}this.$refs["popup-single-select"].openPopup({title:this.pageTitle||"选择"+this.title,selected:this.value,options:this.options,required:this.required,searchBar:this.searchBar,grouping:this.grouping,autoOpen:this.autoOpen,rightBtn:this.rightBtn,ifToggle:this.ifToggle,lineLimit:this.lineLimit,editorAddData:this.editorAddData,onSelect:function(i){var a=e.cloneDeep(t.value);i=e.isArray(i)?e.map(i,(function(e){return c({},e)})):c({},i),t.$emit("input",i,a),t.$emit("onSelect",i,a)},rightBtnEvent:function(i){var a=e.cloneDeep(t.value);t.$emit("rightBtnEvent",i,a)}})},closePopup:function(){this.$refs["popup-single-select"].closePopup()},onSelect:function(e){o.a.saveObject(this.memoryKey,e,o.a.level.user),this.$emit("input",e[0]),this.$emit("onSelect",e[0])},setSelected:function(){var t=o.a.getObject(this.memoryKey,o.a.level.user);!1===this.editabled||e.isEmpty(this.options)||(e.isEmpty(this.value)?this.memory&&!e.isEmpty(t)&&e.some(this.options,{id:t.id})&&(this.$emit("input",t),this.autoSelect&&this.$emit("onSelect",t)):this.autoSelect&&this.$emit("onSelect",this.value))}}}}).call(this,i("391c"))},d8a5:function(e,t,i){"use strict";i.d(t,"a",(function(){return x})),i.d(t,"b",(function(){return D}));i("5ab2"),i("6d57"),i("e10e");var a=i("4c09"),n=(i("e697"),i("28f8")),r=(i("6a61"),i("2e91")),o=(i("cc57"),i("0e4d")),s=i("94ef"),c=i("fc9f"),l=function(e){var t="select * from section\n      where proj_id = '".concat(e,"'\n      order by name");return c.a.query(t)},u=function(e){var t="select b.*, sb.section_id from building b\n      join section_building sb on b.id = sb.building_id\n      where b.proj_id = '".concat(e,"'\n      order by b.sort, b.code");return c.a.query(t)},p=function(e){var t="select b.* from section_building sb\n      INNER join building b on sb.building_id = b.id\n      where sb.section_id = '".concat(e,"'\n      order by b.sort, b.code");return c.a.query(t)},d=function(e){var t="select * from build_unit\n      where building_id = '".concat(e,"'\n      order by sort");return c.a.query(t)},h=function(e){var t="select * from building_floor\n      where building_id = '".concat(e,"'\n      order by sort");return c.a.query(t)},f=function(e,t,i){var a=t?" and unit = '".concat(t,"' "):"",n="select * from room where\n      building_id = '".concat(e,"' and floor = '").concat(i,"' ").concat(a,"\n      order by sort");return c.a.query(n)},m=i("7cb8"),b=i("bcc7");function g(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,a)}return i}function v(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?g(Object(i),!0).forEach((function(t){Object(n.a)(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):g(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var x=function(){function e(t){Object(o.a)(this,e),this._section=t.section||{id:"",name:""},this._proj=t.project||{id:"",name:""},this._building=t.building||{id:"",name:""},this._unit=t.unit||{id:"",name:"",type:"building"},this._floor=t.floor||{id:"",name:""},this._room=t.room||{id:"",name:""}}var t,i,n,c;return Object(s.a)(e,[{key:"getPosition",value:function(){return{section:this._section,project:this._proj,building:this._building,unit:this._unit,floor:this._floor,room:this._room,full_name:this._building.name+this._unit.name+this._floor.name+this._room.name}}},{key:"getSections",value:function(){return this._proj.id?l(this._proj.id):(console.error("根据项目获取标段错误：未定义项目id"),Promise.resolve(null))}},{key:"getBuildings",value:function(){return this._section.id?this.getBuildingsBySection():this.getBuildingsByProject()}},{key:"getBuildingsByProject",value:function(){return this._proj.id?u(this._proj.id):(console.error("根据项目获取楼栋错误：未定义项目id"),Promise.resolve(null))}},{key:"getBuildingsBySection",value:function(){return this._section.id?p(this._section.id).catch((function(e){return console.error("获取楼栋失败",e),null})):(console.error("根据标段获取楼栋错误：未定义标段id"),Promise.resolve(null))}},{key:"getUnits",value:(c=Object(r.a)(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._building.id){e.next=3;break}return console.error("获取单元错误：未定义楼栋id"),e.abrupt("return",Promise.resolve(null));case 3:return e.next=5,d(this._building.id);case 5:return t=(t=e.sent).filter((function(e){return!!e.name})),e.abrupt("return",(t||[]).map((function(e){return v(v({},e),{},{id:e.name,name:Object(m.a)(e.name,"单元")})})));case 8:case"end":return e.stop()}}),e,this)}))),function(){return c.apply(this,arguments)})},{key:"getFloors",value:(n=Object(r.a)(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._building.id){e.next=3;break}return console.error("获取楼层错误：未定义楼栋id"),e.abrupt("return",Promise.resolve(null));case 3:return e.next=5,h(this._building.id);case 5:return t=e.sent,e.abrupt("return",(t||[]).map((function(e){return v(v({},e),{},{id:e.floor,name:Object(m.a)(e.floor,"层")})})));case 7:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"getRooms",value:(i=Object(r.a)(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._building.id&&this._floor.id){e.next=3;break}return console.error("获取房间列表错误：未定义楼栋id, 或未获取楼层id"),e.abrupt("return",Promise.resolve(null));case 3:return e.next=5,f(this._building.id,this._unit.id,this._floor.id);case 5:return t=e.sent,e.abrupt("return",(t||[]).map((function(e){return v(v({},e),{},{name:e.room_no})})));case 7:case"end":return e.stop()}}),e,this)}))),function(){return i.apply(this,arguments)})},{key:"getSelfPosition",value:(t=Object(r.a)(regeneratorRuntime.mark((function e(){var t,i,n=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._proj.id){e.next=3;break}return console.error("获取自定义部位错误：未定义项目id"),e.abrupt("return",Promise.resolve(null));case 3:return e.next=5,b.a.getSelfDefinitionPlace(this._proj.id);case 5:if(t=e.sent,!this._section.id){e.next=11;break}return i=(t||[]).find((function(e){return e.id===n._section.id})),e.abrupt("return",i&&i.buildings);case 11:return e.abrupt("return",t.reduce((function(e,t){return e.push.apply(e,Object(a.a)(t.buildings||[])),e}),[]));case 12:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"setProj",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";this._proj={id:e,name:t}}},{key:"setSection",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";this._section={id:e,name:t}}},{key:"setBuilding",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"building";this._building={id:e,name:t,type:i},this.clearUnit()}},{key:"setUnit",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";this._unit={id:e,name:t},this.clearFloor()}},{key:"setFloor",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";this._floor={id:e,name:t},this.clearRoom()}},{key:"setRoom",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";this._room={id:e,name:t}}},{key:"clearBuilding",value:function(){this._building={id:"",name:"",type:"building"},this.clearUnit()}},{key:"clearUnit",value:function(){this._unit={id:"",name:""},this.clearFloor()}},{key:"clearFloor",value:function(){this._floor={id:"",name:""},this.clearRoom()}},{key:"clearRoom",value:function(){this._room={id:"",name:""}}},{key:"checkProjId",value:function(){}},{key:"checkSectionId",value:function(){}},{key:"checkBuildingId",value:function(){}},{key:"checkFloorId",value:function(){}},{key:"checkRoomId",value:function(){}},{key:"checkPosition",value:function(){}}]),e}(),y=(i("2b45"),i("fc58"),i("76ff")),k=i("4b67"),_=i("d703"),w=i("5e8d"),S=i("da71"),j=i("162a");function I(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,a)}return i}function O(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?I(Object(i),!0).forEach((function(t){Object(n.a)(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):I(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function P(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,a=Object(_.a)(e);if(t){var n=Object(_.a)(this).constructor;i=Reflect.construct(a,arguments,n)}else i=a.apply(this,arguments);return Object(k.a)(this,i)}}var D=function(e){Object(y.a)(a,e);var t,i=P(a);function a(){return Object(o.a)(this,a),i.apply(this,arguments)}return Object(s.a)(a,[{key:"getBuildingsByProject",value:function(){return this._proj.id?(e={proj_id:this._proj.id},Object(w.a)().then((function(){var t=S.a.buildingsByProject.url;return j.a.request(t,e)}))).then((function(e){return e.map((function(e,t){return{id:e.building_id,name:e.full_name,sort:t}}))})):(console.error("根据项目获取楼栋错误：未定义项目id"),Promise.resolve(null));var e}},{key:"getUnits",value:function(){return this._building.id?(e={building_id:this._building.id},Object(w.a)().then((function(){var t=S.a.units.url;return j.a.request(t,e)}))).then((function(e){return((e=e.filter((function(e){return!!e.unit})))||[]).map((function(e){return O(O({},e),{},{id:e.unit,name:Object(m.a)(e.unit_name,"单元")})}))})):(console.error("获取单元错误：未定义楼栋id"),Promise.resolve(null));var e}},{key:"getFloors",value:function(){return this._building.id?(e={building_id:this._building.id},Object(w.a)().then((function(){var t=S.a.floors.url;return j.a.request(t,e)}))).then((function(e){return(e||[]).map((function(e){return{id:e.floor,name:Object(m.a)(e.floor_name,"层")}}))})):(console.error("获取楼层错误：未定义楼栋id"),Promise.resolve(null));var e}},{key:"getRooms",value:function(){return this._building.id&&this._floor.id?(e={building_id:this._building.id,unit:this._unit.id,floor:this._floor.id},Object(w.a)().then((function(){var t=S.a.rooms.url;return j.a.request(t,e)}))).then((function(e){return(e||[]).map((function(e){return{id:e.room_id,name:e.room_name}}))})):(console.error("获取房间列表错误：未定义楼栋id, 或未获取楼层id"),Promise.resolve(null));var e}},{key:"getSelfPosition",value:(t=Object(r.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._proj.id){e.next=3;break}return console.error("获取自定义部位错误：未定义项目id"),e.abrupt("return",Promise.resolve(null));case 3:return e.abrupt("return",[]);case 4:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})}]),a}(x)},dfa5:function(e,t,i){"use strict";i("574d")},e223:function(e,t,i){"use strict";var a=i("c40a").a,n=(i("0aac"),i("17cc")),r=Object(n.a)(a,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",e._g({ref:"content",staticClass:"drawing-con"},e.$listeners),[e.isDownloading?[i("p",[i("svg",{staticClass:"svg-loading",attrs:{viewBox:"0 0 80 80"}},[i("circle",{attrs:{cx:"40",cy:"40",r:"36"}})])]),i("p",{staticClass:"loading-text"},[e._v("正在下载...")])]:[e.error?e._e():i("canvas",{ref:"drawing-canvas"}),e.error?i("p",{staticClass:"error-text"},[e._v(e._s(e.error))]):e._e()]],2)}),[],!1,null,"fba5990a",null);t.a=r.exports},e56d:function(e,t,i){var a=i("9808");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);(0,i("85cb").default)("19a9969d",a,!0,{sourceMap:!1,shadowMode:!1})},e5a0:function(e,t,i){(e.exports=i("690e")(!1)).push([e.i,'.zjapp .checkbox[data-v-afcfdff2]{font-size:14px;line-height:20px}.zjapp .icon[data-v-afcfdff2]{vertical-align:top;margin-top:1px;margin-right:7px}.zjapp .semiCheckbox[data-v-afcfdff2]{font-family:Chinese Quote,-apple-system,BlinkMacSystemFont,Segoe UI,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Helvetica Neue,Helvetica,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol;font-size:14px;font-variant:tabular-nums;line-height:1.5;color:rgba(0,0,0,.65);box-sizing:border-box;margin:0;padding:0;list-style:none;white-space:nowrap;cursor:pointer;outline:none;display:inline-block;line-height:1;position:relative;vertical-align:middle}.zjapp .semiCheckbox-inner[data-v-afcfdff2]{position:relative;top:0;left:0;display:block;width:18px;height:18px;border:1px solid #d9d9d9;border-radius:2px;background-color:#fff;transition:all .3s}.zjapp .semiCheckbox-indeterminate .semiCheckbox-inner[data-v-afcfdff2]:after{content:" ";transform:translate(-50%,-50%) scale(1);border:0;left:50%;top:50%;width:8px;height:8px;background-color:#4275e8;opacity:1}.zjapp .semiCheckbox-inner[data-v-afcfdff2]:after{transform:rotate(45deg) scale(0);position:absolute;left:5.57142857px;top:2.14285714px;display:table;width:5.71428571px;height:9.14285714px;border:2px solid #fff;border-top:0;border-left:0;content:" ";transition:all .1s cubic-bezier(.71,-.46,.88,.6),opacity .1s;opacity:0}.zjapp .semiCheckbox-checked .semiCheckbox-inner[data-v-afcfdff2]{background-color:#4275e8;border-color:#4275e8}.zjapp .semiCheckbox-checked .semiCheckbox-inner[data-v-afcfdff2]:after{transform:rotate(45deg) scale(1);position:absolute;display:table;border:2px solid #fff;border-top:0;border-left:0;content:" ";transition:opacity .2s cubic-bezier(.12,.4,.29,1.46) .1s;opacity:1}',""])},e6fb:function(e,t,i){"use strict";(function(e){i("e697"),i("6d57"),i("06a2"),i("6a61");var a,n=i("2e91"),r=i("bf9f"),o=i("bcc7"),s=i("0cfe"),c=i("eb9d");t.a={components:{PopupHasHeader:r.a,SetUsualItem:s.a},props:{sectionId:{type:String,default:""},module:{type:String,default:""}},data:function(){return{show:!1,isLoading:!1}},computed:{moduleAtter:function(){return this.$store.state.global.moduleAttribute[this.module]||{}},isSetUsualItems:function(){return this.moduleAtter.setUsualItems},mmkvCode:function(){return mmkvKeys[this.moduleAtter.mmkv_item]+"_"+this.sectionId},mmkvTipsCode:function(){return mmkvKeys[this.moduleAtter.mmkv_item_tips]}},methods:{openPopup:(a=Object(n.a)(regeneratorRuntime.mark((function e(){var t,i,a=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("打开页面"),this.show=!0,this.isLoading=!0,e.next=5,Promise.all([this.mmkvItem(),this.mmkvItemTips()]);case 5:return t=e.sent,e.next=8,o.a.getTypeCheckItem(this.sectionId,c.c[this.module],!1);case 8:if(i=e.sent,console.log("获取所有检查项",i),!((i=null===t[0]?this.patch(i):this.mergeArray(i,t[0])).length>300)){e.next=14;break}return e.next=14,new Promise((function(e){setTimeout((function(){e()}),300)}));case 14:this.isLoading=!1,this.$nextTick((function(){a.$refs["set-usual-item"].openPopup({checkItems:i,mmkvItemTips:null===t[1]||t[1],tipsCallback:a.tipsCloseCallback,saveCallback:a.saveCallback})}));case 16:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)}),onClosed:function(){this.$refs["set-usual-item"]&&this.$refs["set-usual-item"].clearData()},closePopup:function(){this.show=!1},mmkvItem:function(){return mmkv.getUserKey(this.mmkvCode)},mmkvItemTips:function(){return mmkv.getUserKey(this.mmkvTipsCode)},saveCallback:function(e){return this.$emit("onSelect"),mmkv.setUserKey(this.mmkvCode,e)},tipsCloseCallback:function(e){mmkv.setUserKey(this.mmkvTipsCode,e)},patch:function(t){var i=this;return e.map(t,(function(t){if(t.isOpen=!1,t.status="fullSelected",t.checked=!0,!e.isEmpty(t.children)){var a=e.find(t.children,(function(e){return"desc"===e.type}));e.isEmpty(a)?t.children=i.patch(t.children):t.children=[]}return t}))},mergeArray:function(t,i){var a=this;return e.map(t,(function(t){var n=i[t.id];if(e.isEmpty(n)?(t.isOpen=!1,t.status=null,t.checked=!1):(t.isOpen=n.isOpen,t.status=n.status,t.checked=n.checked),!e.isEmpty(t.children)){var r=e.find(t.children,(function(e){return"desc"===e.type}));e.isEmpty(r)?t.children=a.mergeArray(t.children,i):t.children=[]}return t}))},onSave:function(){this.$refs["set-usual-item"].save(),this.closePopup()}}}}).call(this,i("391c"))},e89f:function(e,t,i){"use strict";var a=i("04f3"),n=i("cf09"),r=i("4360"),o=0;t.a={name:"PopupMixin",data:function(){return{backButtonEvent:null}},watch:{show:function(e){var t=this;if(e){if(this.$nextTick((function(){t.$el&&t.$el.style&&(t.$el.style.zIndex=++n.a.zIndex,o++,r.a.commit("app/SET_HAS_POPUP",!!o))})),!this.backButtonEvent){var i=this.close||this.closePopup;this.backButtonEvent=Object(a.a)(i)}}else--o<0&&(o=0),r.a.commit("app/SET_HAS_POPUP",!!o),this.backButtonEvent&&(Object(a.c)(this.backButtonEvent),this.backButtonEvent=null)}},methods:{}}},e900:function(e,t,i){"use strict";i.d(t,"a",(function(){return a})),i.d(t,"b",(function(){return n}));i("f548");function a(e){var t,i,a,n=(i=(t=e).backingStorePixelRatio||CanvasRenderingContext2D.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1,(window.devicePixelRatio||1)/i);1!==n&&(!function(e,t){for(var i in e)e.hasOwnProperty(i)&&t(e[i],i)}({fillRect:"all",clearRect:"all",strokeRect:"all",moveTo:"all",lineTo:"all",arc:[0,1,2],arcTo:"all",bezierCurveTo:"all",isPointinPath:"all",isPointinStroke:"all",quadraticCurveTo:"all",rect:"all",translate:"all",createRadialGradient:"all",createLinearGradient:"all"},(function(t,i){var a;e[i]=(a=e[i],function(){var e,i,r=Array.prototype.slice.call(arguments);if("all"===t)r=r.map((function(e){return e*n}));else if(Array.isArray(t))for(e=0,i=t.length;e<i;e++)r[t[e]]*=n;return a.apply(this,r)})})),e.stroke=(a=e.stroke,function(){this.lineWidth*=n,a.apply(this,arguments),this.lineWidth/=n}),e.fillText=function(e){return function(){var t=Array.prototype.slice.call(arguments);t[1]*=n,t[2]*=n,this.font=this.font.replace(/(\d+)(px|em|rem|pt)/g,(function(e,t,i){return t*n+i})),e.apply(this,t),this.font=this.font.replace(/(\d+)(px|em|rem|pt)/g,(function(e,t,i){return t/n+i}))}}(e.fillText),e.strokeText=function(e){return function(){var t=Array.prototype.slice.call(arguments);t[1]*=n,t[2]*=n,this.font=this.font.replace(/(\d+)(px|em|rem|pt)/g,(function(e,t,i){return t*n+i})),e.apply(this,t),this.font=this.font.replace(/(\d+)(px|em|rem|pt)/g,(function(e,t,i){return t/n+i}))}}(e.strokeText),e.extended=!0)}var n=function(e){var t,i;(t=e).getContext=(i=t.getContext,function(e){var t,n,r=i.call(this,e);return"2d"===e&&(t=r.backingStorePixelRatio||CanvasRenderingContext2D.webkitBackingStorePixelRatio||r.mozBackingStorePixelRatio||r.msBackingStorePixelRatio||r.oBackingStorePixelRatio||r.backingStorePixelRatio||1,(n=(window.devicePixelRatio||1)/t)>1&&(this.style.height=this.height+"px",this.style.width=this.width+"px",this.width*=n,this.height*=n)),a(r),r})}},eb9d:function(e,t,i){"use strict";i.d(t,"a",(function(){return c})),i.d(t,"e",(function(){return l})),i.d(t,"c",(function(){return u})),i.d(t,"b",(function(){return p})),i.d(t,"d",(function(){return d}));var a,n,r,o=i("28f8"),s=i("8d95"),c="checkpoint",l="question_detail",u=(a={},Object(o.a)(a,s.a.CHECK,31),Object(o.a)(a,s.a.CHECK_SAFETY,36),Object(o.a)(a,s.a.CHECK_QUALITY,37),Object(o.a)(a,s.a.FLY_INSPECT,101),a),p=(n={},Object(o.a)(n,s.a.CHECK,"安全文明"),Object(o.a)(n,s.a.CHECK_SAFETY,"安全检查"),Object(o.a)(n,s.a.CHECK_QUALITY,"质量检查"),Object(o.a)(n,s.a.FLY_INSPECT,"飞检"),n),d=(r={},Object(o.a)(r,s.a.CHECK,{mmkv_item:"CHECK_USUAL_ITEMS",mmkv_item_tips:"CHECK_USUAL_ITEMS_TIPS",setUsualItems:!0}),Object(o.a)(r,s.a.CHECK_SAFETY,{mmkv_item:"CHECK_SAFETY_USUAL_ITEMS",mmkv_item_tips:"CHECK_SAFETY_USUAL_ITEMS_TIPS",setUsualItems:!0}),Object(o.a)(r,s.a.CHECK_QUALITY,{mmkv_item:"CHECK_QUALITY_USUAL_ITEMS",mmkv_item_tips:"CHECK_QUALITY_USUAL_ITEMS_TIPS",setUsualItems:!0}),Object(o.a)(r,s.a.FLY_INSPECT,{mmkv_item:"FLY_INSPECT_USUAL_ITEMS",mmkv_item_tips:"FLY_INSPECT_USUAL_ITEMS_TIPS",setUsualItems:!0}),r)},eba8:function(e,t,i){"use strict";(function(e){i("5ab2"),i("6d57"),i("e10e"),i("f548");var a=i("28f8"),n=(i("9dd9"),i("cc57"),i("e204"),i("9eea")),r=i("3156b"),o=i("774b"),s=i("6f9e");function c(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,a)}return i}function l(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?c(Object(i),!0).forEach((function(t){Object(a.a)(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):c(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}t.a={name:"AppSingleSelect",components:{appSearchBar:n.default,item:r.a,Scroller:o.default},props:{},data:function(){return{activeTab:[],storageKey:encodeURI(this.title||"singleSelectMark"),storageVal:[],keyword:"",searchStatus:!1,checkedItem:{},show:!1,searchData:[],options:[],optionsLimit:20,pagingOptions:!1,searchBar:!0,category:[],ifToggle:!1,editorAddData:!1,lineLimit:1,title:"",grouping:""}},computed:{optionsShow:function(){return this.options&&this.options.length?this.grouping?this.getGroupData():this.options.slice(0,this.optionsLimit):[]}},watch:{keyword:function(e){var t=this;this.$nextTick((function(){t.filterList(e)}))}},methods:{init:function(t){if(s.a.$on("closeDialog",this.closePopup),this.category=[],this.title=t.title,this.selected=t.selected,this.checkedItem=t.selected,this.options=t.options,this.onSelect=t.onSelect,this.searchBar=t.searchBar,this.grouping=t.grouping,this.ifToggle=t.ifToggle,this.lineLimit=t.lineLimit,this.editorAddData=t.editorAddData,t.grouping&&t.autoOpen){var i=e.uniqBy(e.map(this.options,t.grouping));this.activeTab=e.map(i,(function(e,t){return t}))}this.storageKey=encodeURI(this.title||"singleSelectMark")},closePopup:function(){s.a.$off("closeDialog",this.closePopup),this.keyword="",this.searchStatus=!1,this.$refs["app-search-bar"]&&this.$refs["app-search-bar"].cancelSearch(),this.$emit("close")},customAddSupplier:function(e){return this.options.findIndex((function(t){return t.name===e}))},selectItem:function(e){var t=this;this.ifToggle&&this.checkedItem.id===e.id?this.checkedItem={}:this.checkedItem=e,this.onSelect(this.checkedItem),this.$refs["app-search-bar"]&&this.$refs["app-search-bar"].saveHistory(),window.setTimeout((function(){t.closePopup()}),300)},onSearchTypeChange:function(e){this.searchStatus=e},filterList:function(e){var t,i,a=this,n=new RegExp("("+e+")","gmi");if(this.category=[],this.keyword=e,this.searchData=[],!e)return!1;this.options.map((function(e){return n.test(e.name)&&(i=l(l({},e),{},{rename:e.name.replace(n,"<label>$1</label>")}),a.grouping?-1===(t=a.category.indexOf(i[a.grouping]))?(a.category.push(i[a.grouping]),a.searchData.push({name:i[a.grouping],children:[i]})):a.searchData[t].children.push(i):a.searchData.push(i)),e}))},pageOptions:function(){this.optionsLimit=this.optionsLimit+20,this.pagingOptions=!1},getGroupData:function(){var e,t=this,i=[];return this.category=[],this.options.map((function(a){return-1===(e=t.category.indexOf(a[t.grouping]))?(t.category.push(a[t.grouping]),i.push({name:a[t.grouping],children:[a]})):i[e].children.push(a),a})),i}}}}).call(this,i("391c"))},ebf1:function(e,t,i){"use strict";(function(e){t.a={name:"RadioBox",props:{options:{type:[Array,Object],default:function(){return[]}},value:{type:String,default:""},align:{type:String,default:"r"},customClass:{type:String,default:""}},data:function(){return{}},computed:{optionsType:function(){return e.isArray(this.options)?"array":e.isObject(this.options)?"object":""}},methods:{onSelect:function(e){var t;"array"===this.optionsType?t=this.options[e]:"object"===this.optionsType&&(t=e),this.$emit("input",t),this.$emit("onSelect",t)}}}}).call(this,i("391c"))},ef5e:function(e,t,i){(e.exports=i("690e")(!1)).push([e.i,".zjapp .app-voice-play .play-main[data-v-d51aec2c]{min-height:46px;padding:8px 0;width:100%;height:100%;display:flex;align-items:center}.zjapp .app-voice-play .play-btn_style[data-v-d51aec2c]{width:30px;height:30px;border-radius:30px;display:flex;align-items:center;color:#fff;background:#4275e8;margin-right:10px}.zjapp .app-voice-play .start-icon[data-v-d51aec2c]{width:0;height:0;border-top:6px solid transparent;border-left:10px solid #fff;border-bottom:6px solid transparent;margin-left:11.5px}.zjapp .app-voice-play .play-btn_middle i[data-v-d51aec2c]{width:2px;height:12px;display:inline-block;background:#f2f2f2}.zjapp .app-voice-play .play-btn_middle i[data-v-d51aec2c]:first-child{margin-right:5px;margin-left:10px}.zjapp .app-voice-play .play-btn_loadding .loading-icon[data-v-d51aec2c]{margin-left:7px}.zjapp .app-voice-play .play-progress[data-v-d51aec2c]{flex:1;height:100%;display:flex;align-items:center;justify-content:center;position:relative}.zjapp .app-voice-play .play-progress_dotted[data-v-d51aec2c],.zjapp .app-voice-play .play-progress_solidLine[data-v-d51aec2c]{height:2px;display:inline-block;top:50%}.zjapp .app-voice-play .play-progress_solidLine[data-v-d51aec2c]{width:40px;background:#4275e8}.zjapp .app-voice-play .play-progress_dotted[data-v-d51aec2c]{width:40px;background:#f6f6f6}.zjapp .app-voice-play .play-progress_spot[data-v-d51aec2c]{width:4px;height:4px;border-radius:4px;position:absolute;left:0;top:50%;transform:translateY(-50%);background:#4275e8}.zjapp .app-voice-play .play-progress_layer[data-v-d51aec2c]{height:100%;flex:1}.zjapp .app-voice-play .play-progress_slider[data-v-d51aec2c] .play-progress_btn{width:80px;height:14px;line-height:14px;border-radius:14px;color:#fff;background:#4275e8;text-align:center;font-size:12px}.zjapp .app-voice-play .play-progress_slider.disabled-animation[data-v-d51aec2c] .van-slider__bar{transition:initial!important}.zjapp .app-voice-play .play-progress_slider.van-slider--disabled[data-v-d51aec2c]{opacity:1}.zjapp .app-voice-play .play-delete[data-v-d51aec2c]{margin-left:10px;color:#999}.zjapp .app-voice-play .play-text[data-v-d51aec2c]{margin:10px 0;color:#333;background:#f6f6f6;padding:10px;font-size:14px}",""])},f203:function(e,t,i){"use strict";var a=i("2a32").a,n=(i("cc1f"),i("17cc")),r=Object(n.a)(a,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return!e.loading&&e.tabList.length?i("van-tabs",{on:{change:e.changeTab},model:{value:e.activeTab,callback:function(t){e.activeTab=t},expression:"activeTab"}},e._l(e.tabList,(function(t,a){return i("van-tab",{key:a,ref:"tabs",refInFor:!0,attrs:{title:t.name,name:a}},[i("div",{staticClass:"tab-box",style:"height: "+e.maxScrollHeight+"px;"},e._l(t.children,(function(n){return i("van-cell",{key:n.id,class:{actived:n.checked},attrs:{title:n.name},on:{click:function(i){e.onSelectPositionItem(n,t.children,a)}}},[n.checked?i("template",{slot:"right-icon"},[i("icon",{attrs:{name:"qualified"}})],1):e._e()],2)})))])}))):i("loading-status",{attrs:{"is-loading":e.loading,"is-empty":!e.tabList.length,"empty-text":"没有检查项"}})}),[],!1,null,"422b1b31",null);t.a=r.exports},f2fd:function(e,t,i){var a=i("0118");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);(0,i("85cb").default)("25679413",a,!0,{sourceMap:!1,shadowMode:!1})},f4c1:function(e,t,i){"use strict";i("6be0")},f4c9:function(e,t,i){"use strict";i("105d")},f77a:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAeCAYAAABqpJ3BAAAAAXNSR0IArs4c6QAAAnlJREFUWAntmD1PFEEYx2dmbxUhd0eABAQsjAap0AIagYYYayWUxMaCaIJQGg1kQ0VNAdkY/QA0JH4AQyEdDRdB74xGQ4CYUABnJMfezsM8JHvKMs8ei4GdGDe57O3zMvP7z8vO7HBW5QIAPjmX65Oc93JgrcDY5Sop5+JW9ZY4Z5sCYGnqSdd7zhWNunhUbdPul2zRLz5mTNyKirtoHwD7lEnVvXk+cmNXUJVjy5sIj7yqJzqRDRktSoBsHuwHJgYof/J23rS4/GOH7AEc88lDRhMgIykAJ2x0evJeZCQFJPW2idMsyEgKiFNQkrH/BSTZ+li3tgdcF+ykwU5b/4mV2Jn5nPHs/acM2PXTFpJk3DEBL9y1q8LzRkHwxrhQtiXEw4G27o5r6Q7MLawXCwvvNpY9X0pdWXHjdWWgrbISO26u0y/740zwDBUcZR+6197TdbP+TiolbPw1N9S0NGQvidWvexu6vLjxujLQdjQHJuY+9B5IeKZ2eFeowGr2oOX/jNPZAr/Op7MF8dRdOK9W2iXIRzxiX0Qlm2AXjKd+qRXN+1sYHPPhMnS2IEbn09mCeOpuLb6d3b//YOyjD+XbaqN65o+VwvefWzjms3V2puyDt/ZtbxUnsVR7Xl3lceN1ZaCt8hZy3HyT55dGla2FCjbRXhGAcI67WXtQ3h7BDwYTYXVMxwRgwPw8WCvbuWHVOXd1CabZTggIAF/O5tzgv8l37V7IZOAw278rQI2tUlitac/ISPYAqEMk04DDPMhICsATsHCCac/ISArA4zvGZN406N88Mo+MpAA8e0xb6ddmipB5ZENGch0IlJpyuIsT9mjMhw53DwElT/W1PxsJFAAAAABJRU5ErkJggg=="},fbe7:function(e,t,i){"use strict";(function(e){i("6a61");var a,n=i("2e91"),r=i("4ad6"),o=i("3bd5"),s=i("162a"),c=i("4c07"),l=i("e2a7");t.a={name:"AppVoiceRecord",components:{AppVoiceAnimation:c.a},props:{},data:function(){return{sound:null,show:!1,userId:o.a.getUser().user_id,data:{},volume:30,entryCompleted:!0}},computed:{},mounted:function(){},methods:{startVoice:(a=Object(n.a)(regeneratorRuntime.mark((function t(){var i,a,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,this.entryCompleted=!0,i={start:this.start,middle:this.volumeChange},t.next=5,r.a.startVoice(i);case 5:if(a=t.sent,!e.isEmpty(a)&&a.voiceTemp){t.next=8;break}return t.abrupt("return");case 8:if(a.user_id=this.userId,"dev"!==APP_ENV){t.next=18;break}return t.next=12,s.a.uploadFile(a.voiceTemp);case 12:n=t.sent,console.log(n,"voiceUrl"),a.voiceUrl=n,delete a.voiceTemp,t.next=18;break;case 18:$log.log("VOICE-语音保存成功",a),this.data=a,this.btnClose(),this.returnParams(),t.next=29;break;case 24:t.prev=24,t.t0=t.catch(0),null!==t.t0&&l.a.alert("录入语音失败"),this.btnClose(),$log.error("语音录入组件-录入失败-error：",t.t0);case 29:case"end":return t.stop()}}),t,this,[[0,24]])}))),function(){return a.apply(this,arguments)}),start:function(){this.show=!0},volumeChange:function(e){var t=e.data.volume;"volume-change"===e.status&&"number"==typeof t&&(this.volume=t)},returnParams:function(){this.$emit("change",this.data)},close:function(){console.log("关闭语音录入啦"),r.a.closeVoice(this.entryCompleted)},btnClose:function(){this.entryCompleted=!1,this.show=!1}}}}).call(this,i("391c"))},fda1:function(e,t,i){var a=i("19a7");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);(0,i("85cb").default)("cb2469e8",a,!0,{sourceMap:!1,shadowMode:!1})},ff6c:function(e,t,i){(e.exports=i("690e")(!1)).push([e.i,".zjapp .f-gray[data-v-7ccf1962]{color:#666}.zjapp .drawing-box[data-v-7ccf1962]{flex:1;display:flex;flex-direction:column}.zjapp .f-blue[data-v-7ccf1962]{color:#4275e8!important}",""])}}]);