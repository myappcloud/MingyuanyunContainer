(window.webpackJsonp_module_entry_zjapp_=window.webpackJsonp_module_entry_zjapp_||[]).push([["chunk-2e6f9062","chunk-739f37c8"],{"3f3c":function(t,e,n){(t.exports=n("690e")(!1)).push([t.i,".zjapp .main-box[data-v-27589a16]{height:100%;position:relative;overflow:hidden}.zjapp .main-box.flex[data-v-27589a16]{display:flex;justify-content:center;align-items:center}.zjapp .bg-img[data-v-27589a16]{position:absolute;height:100%;width:100%}.zjapp .monitor-icon[data-v-27589a16]{display:flex;align-items:center;justify-content:center;width:40px;height:40px;background-color:#1f93ff;color:#fff;border-radius:4px}.zjapp .bottom-select-box[data-v-27589a16]{height:100%;display:flex;align-items:center;padding:15px}.zjapp .bottom-select-box .text[data-v-27589a16]{padding:0 10px;flex:1;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;font-size:16px}.zjapp .bottom-select-box .icon-arrow-right[data-v-27589a16]{color:#969799}.zjapp .bottom-select-box .icon-shipinjiankong[data-v-27589a16]{font-size:24px}.zjapp .monitor-items[data-v-27589a16]{position:absolute;display:flex;margin-left:-8px;margin-top:-35px;height:27px;border-radius:14px;background:rgba(0,0,0,.5);color:#fff}.zjapp .monitor-items .monitor-position-icon[data-v-27589a16]{width:32px;height:33px;margin-left:-10px}.zjapp .monitor-items .monitor-name[data-v-27589a16]{width:75px;height:27px;padding-left:4px;padding-right:8px;box-sizing:border-box;text-overflow:ellipsis;overflow:hidden;white-space:nowrap;line-height:27px;font-size:12px;color:#fff}.zjapp .monitor-items.posi-revert[data-v-27589a16]{flex-direction:row-reverse;margin-left:-83px}.zjapp .monitor-items.posi-revert .monitor-name[data-v-27589a16]{padding-left:8px;padding-right:4px}",""])},"4d00":function(t,e){t.exports="data:image/png;base64,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"},"6dfe":function(t,e,n){"use strict";n("6a61");var r,i=n("2e91"),o=n("f24e"),a=n("e2a7"),l=n("fe6f"),s={props:{editData:{type:Object,default:function(){return{points:[],url:""}}},isLandscape:{type:Boolean,default:!1}},data:function(){return{loading:!1,iserror:!1,style:{width:"",height:"",left:"",top:"",imgWidth:"",imgHeight:""},pageWidth:0}},watch:{editData:{handler:function(t){var e=this;this.loading=!0,this.iserror=!1,this.loadImg(t.url).then((function(t){e.loading=!1,e.showCenterImage(t)})).catch((function(t){a.a.alert(t.errMsg||t),e.iserror=!0,e.loading=!1}))},immediate:!0,deep:!0}},beforeRouteLeave:function(t,e,n){MUtils.setDeviceOrientation("portrait")},created:function(){this.init()},methods:{loadImg:function(t){if(!t)return Promise.resolve();var e=new Image;return e.src=t,new Promise((function(n,r){e.onload=function(){console.log("视频图片加载成功！",t),n(e)},e.onerror=function(){console.log("视频图片加载失败！",t),r({errMsg:"获取平面图失败，请退出重试"})}}))},showCenterImage:function(t){var e,n,r,i,o,a,l=this.$refs.MainBox;l.offsetWidth/l.offsetHeight>t.width/t.height?(i="100%",r="auto",e=l.offsetHeight*t.width/t.height,n=l.offsetHeight,o=(l.offsetWidth-e)/2,a="0"):(i="auto",r="100%",e=l.offsetWidth,n=l.offsetWidth*t.height/t.width,o="0",a=(l.offsetHeight-n)/2),this.style={top:a+"px",left:o+"px",width:e+"px",height:n+"px",imgWidth:r,imgHeight:i}},showVideo:(r=Object(i.a)(regeneratorRuntime.mark((function t(e){var n,r=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=null,"hik"===e.video_type){t.next=6;break}return t.next=4,o.a.getVideoDetail(e.url);case 4:n=t.sent,e.data=n.data;case 6:t.t0=e.video_type,t.next="gld"===t.t0?9:"ys"===t.t0?12:"url"===t.t0?14:"hik"===t.t0?16:17;break;case 9:return this.isLandscape&&Object(l.b)()&&MUtils.setDeviceOrientation(""),o.a.playGld(e).then((function(t){r.isLandscape&&Object(l.b)()&&MUtils.setDeviceOrientation("landscape")})),t.abrupt("break",17);case 12:return o.a.playYsy(e).then((function(t){r.isLandscape&&Object(l.b)()&&MUtils.setDeviceOrientation("landscape")})),t.abrupt("break",17);case 14:return o.a.playUrl({url:e.data,title:e.title,id:e.id,type:e.video_type}),t.abrupt("break",17);case 16:o.a.playHik(e);case 17:case"end":return t.stop()}}),t,this)}))),function(t){return r.apply(this,arguments)}),init:function(){this.pageWidth=window.screen.width}}},c=(n("f6e1"),n("17cc")),u=Object(c.a)(s,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{ref:"MainBox",staticClass:"main-box",class:{flex:t.loading||t.iserror}},[t.loading?r("van-loading",{attrs:{size:"24px",vertical:""}},[t._v("加载中...")]):t.iserror?r("span",[t._v("图片加载失败")]):t._e(),r("div",{directives:[{name:"zj-scale",rawName:"v-zj-scale"},{name:"zj-move",rawName:"v-zj-move"},{name:"show",rawName:"v-show",value:!t.loading&&!t.iserror,expression:"!loading && !iserror"}],ref:"ImgBox",staticClass:"bg-img",style:{width:t.style.width,height:t.style.height,left:t.style.left,top:t.style.top}},[t._l(t.editData.points,(function(e,i){return r("div",{key:i,staticClass:"points"},[r("div",{staticClass:"monitor-items",class:{"posi-revert":(100-e.x)/100*t.pageWidth<95},style:"left:"+e.x+"%;top:"+e.y+"%;",attrs:{title:e.title||"暂未绑定监控"},on:{click:function(n){t.showVideo(e)}}},[r("img",{staticClass:"monitor-position-icon",attrs:{src:n("4d00"),alt:e.title}}),r("div",{staticClass:"monitor-name"},[t._v("\n          "+t._s(e.title)+"\n        ")])])])})),r("img",{ref:"Img",style:{width:t.style.imgWidth,height:t.style.imgHeight},attrs:{src:t.editData.url,alt:""}})],2)],1)}),[],!1,null,"27589a16",null);e.a=u.exports},"774b":function(t,e,n){"use strict";n.r(e);var r=n("d18d").a,i=(n("b225"),n("17cc")),o=Object(i.a)(r,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{ref:"scroll-warp",staticClass:"scroll-warp",class:{"scroll-warp-pulling":t.pulling,"scroll-warp-complete":!t.hasNext&&!t.isEmpty,"scroll-warp-empty":t.isEmpty},style:{"padding-bottom":t.numberKeyboardCoverHeight+"px"},on:{scroll:t.onScroll,touchstart:t.onTouchstart,touchmove:t.onTouchmove,touchend:t.onTouchend}},[t.allowPullDown?n("div",{staticClass:"pull-refresh-warp",style:{height:t.pullDist+"px"}},[n("div",{staticClass:"pull-refresh"},[n("div",{staticClass:"animation-refresher",class:{refreshing:t.refreshing}}),t.updateTime?n("p",{staticClass:"pull-refresh-date"},[t._v("最后成功同步："+t._s(t.updateTime))]):t._e()])]):t._e(),t._t("default"),t.loading?n("div",{staticClass:"page-loading"},[n("svg",{staticClass:"svg-loading",attrs:{viewBox:"0 0 80 80"}},[n("circle",{attrs:{cx:"40",cy:"40",r:"36"}})])]):t._e(),t.hasNext||t.isEmpty?t._e():[t.$slots.end?t._t("end"):t._e(),!t.$slots.end&&t.endText?n("div",{staticClass:"end-text"},[t._v("\n      "+t._s(t.endText)+"\n    ")]):t._e()]],2)}),[],!1,null,"2b1a346c",null);e.default=o.exports},"9d55":function(t,e,n){(t.exports=n("690e")(!1)).push([t.i,'.zjapp .scroll-warp[data-v-2b1a346c]{flex:1;overflow:auto;-webkit-overflow-scrolling:touch}.zjapp .scroll-warp-pulling[data-v-2b1a346c]{overflow:hidden}.zjapp .scroll-warp-complete[data-v-2b1a346c]:after{content:"";display:block;height:100px}.zjapp .scroll-warp-empty[data-v-2b1a346c]{display:flex;flex-direction:column}.zjapp .pull-refresh-warp[data-v-2b1a346c]{position:relative;height:0;overflow:hidden}.zjapp .pull-refresh[data-v-2b1a346c]{position:absolute;left:0;bottom:0;height:70px;width:100%;padding:6px;text-align:center}.zjapp .pull-refresh-date[data-v-2b1a346c]{margin-top:4px;height:16px;line-height:16px;font-size:12px;color:#bcbcbc}.zjapp .page-loading[data-v-2b1a346c]{padding:10px;text-align:center}.zjapp .end-text[data-v-2b1a346c]{color:#c8c8c8;background:#f4f4f4;position:relative;line-height:76px;height:76px;text-align:center}.zjapp .end-text[data-v-2b1a346c]:after,.zjapp .end-text[data-v-2b1a346c]:before{content:"";position:absolute;width:48px;height:1px;background:#e4e4e4;top:50%;margin-top:-1px}.zjapp .end-text[data-v-2b1a346c]:after{left:50%;transform:translateX(-92px)}.zjapp .end-text[data-v-2b1a346c]:before{right:50%;transform:translateX(90px)}.zjapp .end-slot[data-v-2b1a346c]{padding:30px;line-height:18px;text-align:center;color:#c8c8c8}',""])},b225:function(t,e,n){"use strict";n("ef48")},cba0:function(t,e,n){"use strict";n.d(e,"d",(function(){return l})),n.d(e,"e",(function(){return s})),n.d(e,"f",(function(){return c})),n.d(e,"g",(function(){return u})),n.d(e,"b",(function(){return p})),n.d(e,"c",(function(){return d})),n.d(e,"a",(function(){return f}));var r=n("5e8d"),i=n("162a"),o=n("bcc78"),a=n("da71");function l(t){return Object(r.a)().then((function(){var e=o.a.monitorPointsData.url;return i.a.request(e,t)}))}function s(t){return Object(r.a)().then((function(){var e=a.a.commonProxy.url;return i.a.post(e,{},t)}))}function c(t){return Object(r.a)().then((function(){var e=o.a.monitorList.url;return i.a.request(e,t)}))}function u(t){return Object(r.a)().then((function(){var e=o.a.monitorUpdateCoverUrl.url;return i.a.post(e,{},t)}))}function p(t){return Object(r.a)().then((function(){var e=o.a.monitorControl.url;return i.a.post(e,{},t)}))}function d(t){return Object(r.a)().then((function(){var e=o.a.getDeviceOperationPermissions.url;return i.a.request(e,{device_id:t})}))}function f(t){return Object(r.a)().then((function(){var e=o.a.deleteDeviceOperationPermissions.url;return i.a.post(e,{},{device_id:t})}))}},d18d:function(t,e,n){"use strict";(function(t){n("2b45");var r,i=n("4360"),o=n("48f4"),a=n("162a"),l=n("e2a7"),s=n("a500"),c=n("6f9e"),u={};e.a={name:"Scroller",props:{buildingId:{type:String,default:""},hasNext:{type:Boolean,default:!1},isEmpty:{type:Boolean,default:!1},isSync:{type:Boolean,default:!0},endText:{type:String,default:""},memoryScrollTop:{type:Boolean,default:!0},keepScrollTop:{type:Boolean},hasPullDown:{type:Boolean,default:!0},onPullDown:{type:Function}},data:function(){return{pullDist:0,refreshing:!1,pulling:!1,loading:!1,scrollTop:0,isCurrKeyboard:!1,gapBottom:0}},computed:{allowPullDown:function(){return this.hasPullDown&&(!!this.$listeners.pullDown||!!this.onPullDown)},updateTime:function(){return i.a.state.global.businessDownloadTime},numberKeyboardCoverHeight:function(){return i.a.state.global.isNumberInputOpen?i.a.state.global.numberKeyboardHeight-this.gapBottom:0}},mounted:function(){var t=this;c.a.$on("numberKeyboardOpen",this.onNumberKeyboardOpen),this.$nextTick((function(){var e=t.$refs["scroll-warp"]&&t.$refs["scroll-warp"].getBoundingClientRect&&t.$refs["scroll-warp"].getBoundingClientRect();e&&(t.gapBottom=document.documentElement.clientHeight-e.bottom),t.$el&&t.$el.addEventListener("focus",(function(e){var n=e&&e.target,r=n&&n.tagName&&n.tagName.toLowerCase();if("input"===r||"textarea"===r){window.addEventListener("resize",(function e(){var r=n.getBoundingClientRect(),i=t.$el.getBoundingClientRect(),o=r.bottom-i.bottom;o>0&&t.scrollBy(o),window.removeEventListener("resize",e,!1)}),!1)}}),!0)}))},destroyed:function(){c.a.$off("numberKeyboardOpen",this.onNumberKeyboardOpen)},activated:function(){var t=this.keepScrollTop||this.$router.isBack&&this.memoryScrollTop;this.scrollTop&&t&&(this.$refs["scroll-warp"].scrollTop=this.scrollTop)},deactivated:function(){this.memoryScrollTop&&(this.scrollTop=this.$refs["scroll-warp"].scrollTop)},methods:{onScroll:function(t){var e=this,n=this.$refs["scroll-warp"].scrollTop,r=this.$refs["scroll-warp"].scrollHeight;if(n+this.$refs["scroll-warp"].clientHeight>=r-5&&!this.loading&&this.hasNext){this.loading=!0;var i=this.$listeners.loadNext();i&&i.then&&"function"==typeof i.then?i.then((function(){e.loading=!1})):this.loading=!1}this.$emit("scroll",t)},getTouchDiretion:function(t){if(!(u&&t&&t.touches&&t.touches[0]))return"";var e=t.touches[0].clientX,n=t.touches[0].clientY;return Math.abs(n-u.y)>Math.abs(e-u.x)&&Math.abs(n-u.y)>=3?n>u.y?"down":"up":""},onTouchstart:function(t){this.allowPullDown&&t.touches&&1===t.touches.length&&(u={x:t.touches[0].clientX,y:t.touches[0].clientY,scrollTop:this.$refs["scroll-warp"].scrollTop,pullDist:this.pullDist})},onTouchmove:function(t){if(this.allowPullDown&&t.touches&&1===t.touches.length){var e=this.$refs["scroll-warp"].scrollTop,n=t.touches[0].clientY,r=n-u.y,i=this.getTouchDiretion(t);"down"===i?!this.refreshing&&e<=0?(this.pulling=!0,this.pullDist=(r-u.scrollTop)/2,t.preventDefault()):this.pulling=!1:"up"===i?this.pullDist>0&&(this.pullDist=u.pullDist-(u.y-n),t.preventDefault()):this.pullDist=u.pullDist}},onTouchend:function(){var t=this;this.allowPullDown&&(u={},this.pulling=!1,this.pullDist>=70&&this.isSync?this.refreshing?this.makePullTo(70):this.makePullTo(70).then((function(){if(t.refreshing=!0,t.onPullDown){var e=t.onPullDown();e&&e.then&&"function"==typeof e?e.finally((function(){t.refreshing=!1,t.makePullTo(0)})):(t.refreshing=!1,t.makePullTo(0))}else t.dataSync().then((function(){t.refreshing=!1,t.makePullTo(0),t.$emit("pullDown")})).catch((function(){t.refreshing=!1,t.makePullTo(0),t.$emit("pullDown")}))})):(this.refreshing=!1,this.makePullTo(0)))},makePullTo:function(t){var e=this,n=this.pullDist,r=t,i=r-n,o=n;return n===r?Promise.resolve():new Promise((function(t){!function a(){window.requestAnimationFrame((function(){o+=i/6,e.pullDist=o,n<r&&o<r||n>r&&o>r?a():(e.pullDist=r,e.refreshing=!1,t())}))}()}))},dataSync:function(){var t,e=o.default.getCurrentModuleCode(),n=o.default.getCurrentRoute(),r=n.meta&&n.meta.isTodo;if(o.default.isModuleNeedBuilding(e)&&!r){if(!this.buildingId)return new Promise((function(t){setTimeout((function(){t()}),500)}));t=this.buildingId}return s.a.addTrack("公共-手动下拉刷新","",""),a.a.beginManualUpdate(),o.default.checkSync(t).then((function(t){return a.a.endManualUpdate(),t})).catch((function(t){$log.error("下拉刷新错误",t),t&&"Error: Network Error"===t.toString()?l.a.alert("当前网络无法同步数据"):l.a.alert(t),a.a.endManualUpdate()}))},getScrollHeight:function(){return this.$refs["scroll-warp"].offsetHeight},getScrollTop:function(){return this.$refs["scroll-warp"].scrollTop},setScrollTop:function(t){this.$refs["scroll-warp"].scrollTop=t},scrollBy:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:200,i=this.getScrollTop(),o=i+t,a=Math.round(n/16.7),l=t/a,s=i,c=r=+new Date;return i===o?Promise.resolve():new Promise((function(t){!function n(){window.requestAnimationFrame((function(){c===r&&(s+=l,e.$refs["scroll-warp"].scrollTop=s,i<o&&s<o||i>o&&s>o?n():(e.$refs["scroll-warp"].scrollTop=o,t()))}))}()}))},scrollTo:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:200,n=this.getScrollTop(),r=t-n;return this.scrollBy(r,e)},scrollToEle:function(t){var e=t.keyboardHeight||232,n=(t=t.$el?t.$el:t).getBoundingClientRect(),r=this.$refs["scroll-warp"].getBoundingClientRect();if(n&&r){var o=document.documentElement.clientHeight-(i.a.state.global.isNumberInputOpen?e:0),a=r.bottom<o?r.bottom:o,l=r.top-n.top,s=n.bottom-a;l>0?this.scrollBy(-l-10):s>0&&this.scrollBy(s+10)}},isCurrent:function(e,n){var r=this;e.length&&t.each(e,(function(t){t._uid===n?r.isCurrKeyboard=!0:r.isCurrent(t.$children,n)}))},onNumberKeyboardOpen:function(t){this.isCurrKeyboard=!1,this.isCurrent(this.$children,t._uid),this.isCurrKeyboard&&this.scrollToEle(t)}}}}).call(this,n("391c"))},ef48:function(t,e,n){var r=n("9d55");"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);(0,n("85cb").default)("a1a65c0c",r,!0,{sourceMap:!1,shadowMode:!1})},f24e:function(t,e,n){"use strict";(function(t){n("5ab2"),n("e10e"),n("6a61");var r=n("2e91"),i=(n("6d57"),n("28f8")),o=(n("9a33"),n("e3ee")),a=n("cba0"),l=n("4ad6"),s=n("e2a7"),c=n("162a"),u=n("24de"),p=n("a18c");function d(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function f(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?d(Object(n),!0).forEach((function(e){Object(i.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var h={200:"操作成功",10001:"参数错误",10002:"accessToken异常或过期",10004:"用户不存在",10005:"appKey异常",10017:"appKey不存在",20002:"设备不存在",20007:"设备不在线",20014:"deviceSerial不合法",20018:"该用户不拥有该设备",20032:"该用户下通道不存在",60020:"不支持该命令",60060:"地址未绑定",49999:"数据异常"},g={0:"未使用或直播已关闭",1:"使用中",2:"已过期",3:"直播已暂停"},m={0:"正常",1:"设备不在线",2:"设备开启视频加密",3:"设备删除",4:"失效",5:"未绑定",6:"账户下流量已超出"};var b=function(){var t=[];function e(e){var n=null,r={looping:!0},i=function(){n&&clearInterval(n),Object(a.a)(e),r.looping=!1};return t.push({loopStatus:r,close:i}),{open:function(){l.a.checkAllowMonitorControl()?n=setInterval((function(){Object(a.c)(e).then((function(t){return l.a.changeMonitorControlDisabledStatus(t)}))}),5e3):(n&&clearInterval(n),n=null)},close:i}}function n(){t.filter((function(t){return t.loopStatus.looping})).forEach((function(t){return t.close()}))}function i(){return(i=Object(r.a)(regeneratorRuntime.mark((function t(r){var i,o,u,p,d,b;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l.a.allowVideoMonitor();case 2:if(t.sent){t.next=5;break}return t.abrupt("return",s.a.alert("不支持萤石云播放插件"));case 5:if(r.data){t.next=7;break}return t.abrupt("return",s.a.alert("萤石云获取参数失败，请重试"));case 7:if(delete(i=f(f({},r),r.data)).data,"200"===i.ret){t.next=13;break}return o=h[i.ret]||i.desc||"数据错误",s.a.alert(o),t.abrupt("return");case 13:if(1===i.status){t.next=17;break}return u=g[i.status]||i.desc||"数据错误",s.a.alert(u),t.abrupt("return");case 17:if(0===i.exception){t.next=21;break}return p=m[i.exception]||i.desc||"数据错误",s.a.alert(p),t.abrupt("return");case 21:return d={appkey:i.appKey,accessToken:i.accessToken,deviceSerial:i.deviceSerial,cameraNo:i.channelNo},b=l.a.appImagePath()+"monitor/"+i.deviceSerial+".jpg",d.path=b,n(),t.next=27,Object(a.c)(r.id);case 27:return d.enablePtz=t.sent,t.abrupt("return",l.a.openVideoMonitor(d,e(r.id)).then((function(t){t=t||b,c.a.uploadFile(t).then((function(t){console.log("url",t),r.cover_url=t,x(r)}))})));case 29:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return{clearInterval:n,play:function(t){return i.apply(this,arguments)}}}(),v=b.play,w=b.clearInterval;function y(){return(y=Object(r.a)(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("rtsp"!==e.protocol){t.next=9;break}return t.next=3,l.a.allowRtspPlayer();case 3:if(t.sent){t.next=6;break}return t.abrupt("return",s.a.alert("不支rtsp播放插件"));case 6:l.a.playRtspUrl(e.data),t.next=10;break;case 9:p.a.push({name:"VideoMonitorPlay",params:{url:e.url,title:e.title,id:e.id,type:e.video_type}});case 10:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function x(e){if(t.get(e,"id")&&t.get(e,"cover_url")){var n={id:e.id,cover_url:e.cover_url};Object(a.g)(n)}else console.error("上传视频封面参数不完整")}e.a={getPointData:function(t){return Object(a.d)({proj_id:t}).then((function(t){if(t){var e=t.point_info||[];return{url:t.house_type_img,points:e.map((function(t){var e=t.location&&t.location.split(",")||[],n=Object(o.a)(e,2),r=n[0],i=n[1];return f(f({},t),{},{x:r,y:i})}))}}}))},uploadVideoImage:x,getVideoDetail:function(e){return t.isEmpty(e)?s.a.alert("获取视频地址失败"):Object(a.e)({url:e}).then((function(t){return t&&-1!==t.code?t:(t&&t.message&&s.a.alert(t.message),null)})).catch((function(t){return console.log("获取萤石云数据失败",t),Promise.reject(null)}))},playHik:function(t){return y.apply(this,arguments)},playUrl:function(t){p.a.push({name:"VideoMonitorPlay",params:{url:t.url,title:t.title,id:t.id,type:t.video_type}})},playGld:function(t){return u.a.checkHasNetwork().then((function(){return l.a.openUrl(t.data)}))},playYsy:v,clearYsyInterval:w}}).call(this,n("391c"))},f6e1:function(t,e,n){"use strict";n("f779")},f779:function(t,e,n){var r=n("3f3c");"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);(0,n("85cb").default)("28c02830",r,!0,{sourceMap:!1,shadowMode:!1})}}]);