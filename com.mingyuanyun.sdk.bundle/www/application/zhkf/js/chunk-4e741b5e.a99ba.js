(window["webpackJsonp_module_entry_zhkf_"]=window["webpackJsonp_module_entry_zhkf_"]||[]).push([["chunk-4e741b5e"],{"0356":function(t,e,i){var n=i("42ce");"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var a=i("85cb").default;a("06ca991e",n,!0,{})},"0a66":function(t,e,i){"use strict";i.r(e);i("5ab2"),i("e10e");var n=i("28f8"),a=(i("6d57"),i("e44b"),i("06a2"),i("7b53")),l=i("c3e6"),s=i("cb7e"),r=i("a14a"),o=i.n(r);function c(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function f(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?c(Object(i),!0).forEach((function(e){Object(n["a"])(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):c(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}var d=[{id:"",name:"",label:"检查项分类",type:"check_item_id",options:[]},{id:"",name:"",label:"检查项",type:"check_item_detail_id",options:[]},{id:"",name:"",label:"问题状态",type:"status",options:[]}],h={components:{AppFilter:a["a"],appLoading:l["a"]},inject:["setTitle"],data:function(){return{loading:!1,imgs:{"待整改":i("511c"),"整改中":i("f8b0"),"正常关闭":i("20f2"),"待确认":i("83d9"),"待指派":i("a0ef"),"待复验":i("e5f3"),"非正常关闭":i("263e"),"已作废":i("77d7")},filterList:[],white_paper_clause_id:"",page:1,pageSize:10,total:0,loadMore:!1,finished:!0,noMoreMsg:"",currConditions:{check_item_id:"",check_item_detail_id:"",status:""},listData:[]}},activated:function(){this.setTitle("相关缺陷问题"),this.init()},methods:{init:function(){var t=this;this.loading=!0,this.listData=[],this.currConditions={check_item_id:"",check_item_detail_id:"",status:""},this.white_paper_clause_id=this.$route.query.white_paper_clause_id;var e={white_paper_clause_id:this.white_paper_clause_id};return this.filterList=o.a.cloneDeep(d),console.log(this.filterList,"===filterlist"),Promise.all([Object(s["z"])(e),Object(s["B"])(e)]).then((function(e){console.log(e,"===res===");var i=[],n=[];e[0].forEach((function(t){i.push({id:t.check_item_id,name:t.check_item_name,count:0})})),t.filterList[0].options=i,t.setAllFilter(t.filterList[0].options),e[1].forEach((function(t,e){n.push({id:t.status,name:t.status,count:0})})),t.filterList[2].options=n,t.setAllFilter(t.filterList[2].options)})).then((function(){t.getData({white_paper_clause_id:t.white_paper_clause_id,page:t.page,pageSize:t.pageSize})}))},getData:function(t){var e=this,i=f({white_paper_clause_id:this.white_paper_clause_id,page:t||this.page},this.currConditions);return Object(s["A"])(i).then((function(i){console.log(i,"====list==="),e.listData=t?e.listData.concat(i.items):i.items,e.total=i.total,e.page=i.page||1,e.loading=!1,e.loadMore=!1,e.checkFinish()}))},checkFinish:function(){this.finished=Math.ceil((this.total-this.page*this.pageSize)/this.pageSize)<1,console.log(this.finished,"=====finish====")},onLoad:function(){return this.getData(this.page+1)},setAllFilter:function(t){var e=0;o.a.each(t,(function(t){e+=t.count})),t.unshift({id:"",name:"全部",count:e})},chooseFilterItem:function(t,e){var i=this;this.loading=!0,this.currConditions[e.type]=e.id,console.log(this.currConditions,"====currconditions"),this.page=1,console.log(e,"=======-=-=-=-"),"check_item_id"==e.type&&(this.filterList[1]={id:"",name:"",label:"检查项",type:"check_item_detail_id",options:[]},this.currConditions.check_item_detail_id="",e.id&&Object(s["y"])({white_paper_clause_id:this.white_paper_clause_id,check_item_id:e.id}).then((function(t){t.forEach((function(t,e){i.filterList[1].options.push({id:t.check_item_detail_id,name:t.check_item_detail_name,count:0})})),i.setAllFilter(i.filterList[1].options)}))),this.getData()}}},p=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app-view x-col"},[n("app-filter",{attrs:{"filter-list":t.filterList},on:{chooseItem:t.chooseFilterItem}}),t._v(" "),n("section",{staticClass:"common-wrapper content"},[t.loading?n("app-loading"):t._e(),t._v(" "),t.loading?t._e():n("van-list",{attrs:{finished:t.finished,"finished-text":t.noMoreMsg},on:{load:t.onLoad},model:{value:t.loadMore,callback:function(e){t.loadMore=e},expression:"loadMore"}},[t.loading?t._e():n("div",{staticClass:"list-wrapper"},t._l(t.listData,(function(e){return n("div",{key:e.id,staticClass:"list-item"},[n("div",{staticClass:"top van-hairline--bottom"},[n("img",{staticClass:"icon-clock",attrs:{src:i("8a58"),alt:""}}),t._v(" "),n("div",{staticClass:"date"},[t._v("\n              登记时间："+t._s(e.register_time)+"\n            ")]),t._v(" "),n("img",{staticClass:"status",attrs:{src:t.imgs[e.status],alt:""}})]),t._v(" "),n("div",{staticClass:"main"},[n("div",{staticClass:"desc"},[n("span",{staticClass:"label"},[t._v("问题描述")]),t._v(t._s(e.subject))]),t._v(" "),n("div",{staticClass:"desc"},[n("span",{staticClass:"label"},[t._v("检查项分类")]),t._v(t._s(e.check_item_name))]),t._v(" "),n("div",{staticClass:"desc"},[n("span",{staticClass:"label"},[t._v("检查项")]),t._v(t._s(e.check_item_detail_name))])])])})),0)])],1)],1)},u=[],m=i("d082");function _(t){i("5a49")}var v=!1,x=_,b="data-v-23c1115c",g=null,k=Object(m["a"])(h,p,u,v,x,b,g);e["default"]=k.exports},"42ce":function(t,e,i){var n=i("5454");e=t.exports=i("690e")(!1),e.push([t.i,"\n[data-v-93221e7e] .van-icon {\n  font-size: 15px;\n}\n.zhkf .filter[data-v-93221e7e] {\n  background: #fff;\n  -ms-flex-negative: 0;\n      flex-shrink: 0;\n}\n.zhkf .clearfix[data-v-93221e7e]:before,\n.zhkf .clearfix[data-v-93221e7e]:after {\n  content: ' ';\n  display: table;\n}\n.zhkf .clearfix[data-v-93221e7e]:after {\n  clear: both;\n}\n.zhkf .filter-header[data-v-93221e7e] {\n  height: 45px;\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-orient: horizontal;\n  -webkit-box-direction: normal;\n      -ms-flex-direction: row;\n          flex-direction: row;\n  -ms-flex-wrap: nowrap;\n      flex-wrap: nowrap;\n  -webkit-box-flex: 0;\n      -ms-flex: 0 0 auto;\n          flex: 0 0 auto;\n}\n.zhkf .filter-header .filter-item[data-v-93221e7e] {\n    -webkit-box-flex: 1;\n        -ms-flex: 1 1 auto;\n            flex: 1 1 auto;\n    text-align: center;\n    padding: 10px 0;\n    width: 20%;\n    line-height: 22px;\n    color: #606060;\n}\n.zhkf .filter-header .filter-item .filter-desc[data-v-93221e7e] {\n      height: 100%;\n      display: -webkit-box;\n      display: -ms-flexbox;\n      display: flex;\n      -webkit-box-align: center;\n          -ms-flex-align: center;\n              align-items: center;\n      -webkit-box-pack: center;\n          -ms-flex-pack: center;\n              justify-content: center;\n      font-size: 14px;\n      padding: 0 6px;\n}\n.zhkf .filter-header .filter-item .filter-desc .filter-title[data-v-93221e7e] {\n        overflow: hidden;\n        white-space: nowrap;\n        text-overflow: ellipsis;\n        margin-right: 2px;\n}\n.zhkf .filter-header .filter-item[data-v-93221e7e] .filter-desc .van-icon {\n      -ms-flex-negative: 0;\n          flex-shrink: 0;\n}\n.zhkf .filter-header .filter-item:first-child .filter-desc[data-v-93221e7e] {\n      border-left: 0;\n}\n.zhkf .filter-header .filter-item__active[data-v-93221e7e] {\n    color: #0085ff;\n}\n.zhkf .filter-header .filter-item__active[data-v-93221e7e] .filter-desc .van-icon {\n      color: #0085ff !important;\n}\n.zhkf .filter-header .filter-item__disabled[data-v-93221e7e] {\n    color: #a0a0a0;\n}\n.zhkf .filter-header .filter-item__disabled[data-v-93221e7e] .filter-desc .van-icon {\n      color: #a0a0a0 !important;\n}\n.zhkf .filter-content[data-v-93221e7e] {\n  width: 100%;\n  position: absolute;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background-color: rgba(0, 0, 0, 0.2);\n  z-index: 8;\n}\n.zhkf .filter-content .filter-list[data-v-93221e7e] {\n    background: #fff;\n    max-height: 320px;\n    overflow: scroll;\n}\n.zhkf .filter-content .filter-list .filter-cell[data-v-93221e7e] {\n      height: 40px;\n      line-height: 40px;\n      padding: 0 15px;\n      padding-left: 38px;\n      font-size: 14px;\n      color: #606060;\n      display: -webkit-box;\n      display: -ms-flexbox;\n      display: flex;\n      -webkit-box-align: center;\n          -ms-flex-align: center;\n              align-items: center;\n}\n.zhkf .filter-content .filter-list .filter-cell[data-v-93221e7e]::before {\n        content: '';\n        display: inline-block;\n        height: 10px;\n        width: 13px;\n        background-size: contain;\n        position: relative;\n        right: 15px;\n}\n.zhkf .filter-content .filter-list .filter-cell .pull-left[data-v-93221e7e] {\n        -webkit-box-flex: 1;\n            -ms-flex: 1;\n                flex: 1;\n        text-overflow: ellipsis;\n        white-space: nowrap;\n        overflow: hidden;\n}\n.zhkf .filter-content .filter-list .filter-cell[data-v-93221e7e]:last-child {\n        border-bottom: 0;\n}\n.zhkf .filter-content .filter-list .filter-cell__active[data-v-93221e7e] {\n      color: #0085ff;\n}\n.zhkf .filter-content .filter-list .filter-cell__active[data-v-93221e7e]::before {\n        background-image: url("+n(i("5b29"))+");\n}\n",""])},"5a49":function(t,e,i){var n=i("85cb4");"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var a=i("85cb").default;a("0b89ecb8",n,!0,{})},"5b29":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABoAAAAUCAYAAACTQC2+AAAAAXNSR0IArs4c6QAAAcZJREFUSA21lT8sBEEYxd93XESlEOV1Qq0/WpFoNP6UGho6/xVccbfb0JFoXaJDhMaf8uprlToVhQaR8Hmze5O9nd0NOWuK2/nezL5f3uw3OeC/RlV9VHXX2nfbSW5P1QI8HEKxGHhWFdiWXckNYIyOtIhn1AmZcXwr+SXa11484ZSACQcCCN7zSeRrH75wySSjMYhQESxhUw7/DqrpAM2vaTniQD5Zz2NL6kb/29HtaQnvuKXPsDFrGx9MMssk51brPFFNh5jijkYla9Z6vqKAKUJu2vXOEnk6Qsg1jcyxRUPwQsgkNqQRieEsAtnLxZ53N8VqX8v88FcE9cV0sOe6MY41aTp6UBaC3xCyw/lO+21OvODrBCE3CYjgkZCxLIjxKbSMDcSOdJinM4RcENJrN7aeDyiijHW5d/RYGSaKSUERh3m6QMgJIUVn6z2TlLEqD46eKMOui47O3VBh5jdCfHeBdRM9/CYr8pSylpCi9s6GJV6i0EBX0F0vaYtpWgQyq7+BCZuhn/dkUV7TDLO0OOgnmOAMg5jDtHxkGWbpyWYI71El5YVjQqY7gRivZCJLaD9GwQE2sQwR/ov9xzCwmnp5WH8DfPODPR1n4cwAAAAASUVORK5CYII="},"7b53":function(t,e,i){"use strict";i("cc57");var n={props:{filterList:{type:Array,default:function(){return[]}},keys:{type:Object,default:function(){return{count:"count",label:"name",id:"id"}}},showCount:{type:Boolean,default:!1}},data:function(){return{top:0,showFilterContent:!1,currFilter:{},currIndex:""}},activated:function(){this.currFilter={},this.showFilterContent=!1},mounted:function(){this.initPosition()},updated:function(){this.initPosition()},methods:{initPosition:function(){var t=this.$refs.filterHeader;this.top=t.offsetTop+t.offsetHeight},changeFilter:function(t){this.currFilter=this.filterList[t];var e=this.filterList[t-1]||{};return t>0&&(e.name||e.label)&&this.currFilter.options.length<2?this.$toast("请先选择".concat(this.filterList[t-1].label)):t===this.currIndex?(this.maskClickHandler(),this.currIndex="",!1):(this.currIndex=t,this.showFilterContent=!0,void this.$emit("changeFilter",t))},maskClickHandler:function(){this.showFilterContent=!1,this.currFilter={},this.currIndex=""},chooseItem:function(t,e){this.currFilter.name=this.currFilter.options[t].name,this.currFilter.id!=this.currFilter.options[t].id&&(this.currFilter.id=this.currFilter.options[t].id,console.log(this.currFilter),this.currFilter={},this.$emit("chooseItem",t,e))}}},a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"filter"},[i("ul",{ref:"filterHeader",staticClass:"filter-header van-hairline--bottom"},t._l(t.filterList,(function(e,n){return i("li",{key:n,staticClass:"filter-item",class:{"filter-item__active":t.currFilter.type===e.type||e.id,"filter-item__disabled":"checkItem"==e.type&&e.options.length<2},on:{click:function(e){return t.changeFilter(n)}}},[i("div",{staticClass:"filter-desc van-hairline--left"},[i("span",{staticClass:"filter-title"},[t._v(t._s(e.id?e.name:e.label))]),t._v(" "),i("van-icon",{directives:[{name:"show",rawName:"v-show",value:t.currIndex===n&&t.showFilterContent,expression:"currIndex === index && showFilterContent"}],staticClass:"icon",attrs:{name:"arrow-up",color:"#0085FF"}}),t._v(" "),i("van-icon",{directives:[{name:"show",rawName:"v-show",value:t.currIndex!=n||!t.showFilterContent,expression:"currIndex != index || !showFilterContent"}],staticClass:"icon",attrs:{name:"arrow-down",color:"#D4D4D9"}})],1)])})),0),t._v(" "),t.showFilterContent?i("div",{staticClass:"filter-content",style:{top:t.top+"px"},on:{click:t.maskClickHandler}},[i("ul",{staticClass:"filter-list"},t._l(t.currFilter.options,(function(e,n){return e.disabled?t._e():i("li",{key:n,staticClass:"filter-cell van-hairline--bottom",class:{"filter-cell__active":t.currFilter.id===e.id},on:{click:function(e){return t.chooseItem(n,t.currFilter)}}},[i("span",{staticClass:"pull-left"},[t._v(t._s(e[t.keys.label]))]),t._v(" "),t.showCount?i("span",{staticClass:"pull-right"},[t._v(t._s(e[t.keys.count]))]):t._e()])})),0)]):t._e()])},l=[],s=i("d082");function r(t){i("0356")}var o=!1,c=r,f="data-v-93221e7e",d=null,h=Object(s["a"])(n,a,l,o,c,f,d);e["a"]=h.exports},"85cb4":function(t,e,i){e=t.exports=i("690e")(!1),e.push([t.i,"\n.zhkf .content[data-v-23c1115c] {\n  overflow-y: scroll;\n}\n.zhkf .list-item[data-v-23c1115c] {\n  background: #fff;\n  margin-top: 10px;\n  font-size: 14px;\n  line-height: 26px;\n  color: #606060;\n}\n.zhkf .list-item .main[data-v-23c1115c] {\n    padding: 15px;\n}\n.zhkf .list-item .main .desc[data-v-23c1115c] {\n      display: -webkit-box;\n      display: -ms-flexbox;\n      display: flex;\n      color: #202020;\n      margin-bottom: 8px;\n      word-break: break-all;\n}\n.zhkf .list-item .main .desc[data-v-23c1115c]:last-child {\n        margin-bottom: 0;\n}\n.zhkf .list-item .main .desc .label[data-v-23c1115c] {\n        width: 90px;\n        -ms-flex-negative: 0;\n            flex-shrink: 0;\n        color: #a0a0a0;\n}\n.zhkf .list-item .top[data-v-23c1115c] {\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n    -webkit-box-align: center;\n        -ms-flex-align: center;\n            align-items: center;\n    padding: 7px 15px;\n    height: 40px;\n}\n.zhkf .list-item .top .icon-clock[data-v-23c1115c] {\n      width: 14px;\n      margin-right: 6px;\n}\n.zhkf .list-item .top .date[data-v-23c1115c] {\n      -webkit-box-flex: 1;\n          -ms-flex: 1;\n              flex: 1;\n      line-height: normal;\n      color: #a0a0a0;\n}\n.zhkf .list-item .title[data-v-23c1115c] {\n    font-size: 16px;\n    font-weight: 500;\n    color: #202020;\n    line-height: 28px;\n}\n.zhkf .list-item .status[data-v-23c1115c] {\n    height: 16px;\n}\n",""])}}]);