(window["webpackJsonp_module_entry_zhkf_"]=window["webpackJsonp_module_entry_zhkf_"]||[]).push([["chunk-3768e142"],{"0970":function(e,t,n){"use strict";n("6d57"),n("cc57");var a=n("1834"),i=function(){var e="select ci.id,ci.name,ci.parent_id,ci.sort,ci.ifEnd,cig.remark from check_item ci left join check_item_guide cig on ci.id=cig.item_id";return a["a"].query(e)},o=function(e){var t="select remark from check_item_guide where item_id = ?",n=[e];return a["a"].queryOne(t,n).then((function(e){return e&&e.remark}))},r=function(e){var t="select item.full_name,guide.remark as guide           from check_item_guide guide               inner join check_item item on guide.item_id=item.id           where guide.item_id=?";return a["a"].queryOne(t,[e])},c=function(){var e="select item.id,item.name,item.parent_id,guide.id is not null as has_guide       from check_item item           left join check_item_guide guide on item.id=guide.item_id              and ifnull(guide.remark,'') <> ''       order by sort";return a["a"].query(e)},d={getCheckItemWithGuide:i,getGuideByCheckItemId:o,getCheckItemList:c,getGuideAndItemByItemId:r},l=n("a14a"),s=n.n(l),m=function(){var e={};return{getItem:function(t,n){if(void 0===t||null===t)throw new TypeError("key参数为空");return n?e[t]:s.a.cloneDeep(e[t])},setItem:function(t,n){if(void 0===t||null===t)throw new TypeError("key参数为空");if(arguments.length<2)throw new TypeError("value参数未设置");e[t]=n},clear:function(){e={}}}},u=m(),p={IS_NEED_DOWNLOAD_BASE_DATA:"is_need_download_base_data",LAST_EXEC_TIME_DATA:"last_exec_time_data",LAST_GUIDE_SORT_MAP:"last_guide_sort_map"},h=function(){var e=function e(t,n){t.remark&&""!=t.remark&&(t.has_guide=!0),t.children=[];for(var a=0;a<n.length;a++)n[a].parent_id==t.id&&t.children.push(n[a]);if(t.children&&t.children.length>0)for(var i=0;i<t.children.length;i++)t.children[i]=e(t.children[i],n);return t};return{getCheckItemGuideByItemId:function(e){return d.getGuideByCheckItemId(e)},getCheckItemTree:function(){var t={id:""};return d.getCheckItemWithGuide().then((function(n){t=e(t,n);for(var a=0;a<t.children.length;a++)if("所有检查项"==t.children[a].name)return t.children[a].children;return t.children}))},getCheckItemTreeAndGuideSortMap:function(){return console.time("getData"),d.getCheckItemList().then((function(e){console.timeEnd("getData"),console.time("processData");var t={},n=[],a=0,i=[];function o(e,t){e.forEach((function(e){e.depth=t,e.tree?o(e.tree,t+1):e.has_guide&&(e.guide_sort=a,n[a]=e.id,a++)}))}return e.forEach((function(e){t[e.id]=e})),e.forEach((function(e){e.parent_id&&t[e.parent_id]?(t[e.parent_id].tree=t[e.parent_id].tree||[],t[e.parent_id].tree.push(e)):i.push(e)})),o(i,1),u.setItem(p.LAST_GUIDE_SORT_MAP,n),console.timeEnd("processData"),{tree:i,guideSortMap:n}}))},getGuideSortMapFromCatch:function(){return u.getItem(p.LAST_GUIDE_SORT_MAP,!0)},getGuideAndItemByItemId:d.getGuideAndItemByItemId}};t["a"]=h()},"0e11":function(e,t,n){var a=n("a63c");"string"===typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);var i=n("85cb").default;i("7e1d570f",a,!0,{})},"108b":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8CAYAAAA6/NlyAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyhpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMDY3IDc5LjE1Nzc0NywgMjAxNS8wMy8zMC0yMzo0MDo0MiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTUgKE1hY2ludG9zaCkiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6NzQ2Njc5NDNERjBBMTFFNzk5ODRGNjg2MjczRTk1QkYiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6NzQ2Njc5NDRERjBBMTFFNzk5ODRGNjg2MjczRTk1QkYiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo3ODZGMjNDMERGMDcxMUU3OTk4NEY2ODYyNzNFOTVCRiIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo3NDY2Nzk0MkRGMEExMUU3OTk4NEY2ODYyNzNFOTVCRiIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Pri76BcAAAUhSURBVHja7FtNbBtFFP5mvU7UJLLSBho3SI2SCkiNIAc4gMTPhQvcEAoI0VP5FaDeEELqBXGvqLiAOMIBJCo4cEQIFCSooAekNoQ0UYkDdkgaO5iUtMl6hzfetT0ez653E1t4nR3pZWd2Z3bmm+/Nm7fjF8Y5x0FKDGevBKsXjdSSPTMgQNalE8DDPjd9wMpX1sVMc+nKfMpNgJmS95JuYZkreVW0oE0Nu7IYGMs8hgReo/zDJCNdunbXCNK3sHEeublLVLZdkLY6QQk8+rrMllEDOjDcj9HJ9yl3jspTJANdbKwGadT30FhPI3V7Ejc2Z8FtVRNYFbC8Po2ajE6eozsvRW7XYaSJQyMMpfVZXQVDo8oGjmUeotwrEd5s30Y6c5+ksTUxlPXrsOus2Wj7FybekDSW+TPM8EgPuFSPaxhuulGdkdEe8CLTCj7oVJpJrEef4zqeBoZ1e3CvJJXhhjUctQ+FvTDeaMF6EGyTO2wcAGahU+kDk2LAMeAYcLST2YZzh4skebKD95KcCNBiiz7LZ93pFj77UAf66AjgbdzceQHrixcdw09bXPrki/TGt3wG/jMK+Vfxb7FYKQ8cPowjxz4gEA+0rY+OqbSF8zSQHyhXrgjnu8jPfUigvvdoUUapcIbAbtTaiLy455Tb0UcHAd+68U1tILKU8bUHu7+itJprqi/uiWft6KOjKs0MMVnVwzIueTNe70y49cvqOZP7rB19dJDh/kNPQj0aFZ5qAk94OHdTODI+0dRG3GOVQ8L999FRwOIYKJ15qj64wT6MTb1Dg7/f058dGPyIAI7X7oi8uOflx4fvI4BTffZKwgVuupLE8cxGiG3pGv3N0ZtOCgiBzB3HL27v04HUM3wfTsrOiXP03Uqfjtj734cZhJpOhLIbYRkK30dIo9XD/pfp//UYA44Bx4AjCTg2WjHgGHC8hmOG/9fUENQiR7xwl+ES/U1FHOTfKliRNzxm45Jv4FIURJyfaQLTDIVdRyx8GnnAFj6BJnbLUJh1YpsWFr6k649STE+0BPgOv81/pRwP1RhWZ8GGZe1ivXia8pcjqMo/IX/9Zdh22QUsg+ZqnFY9TOCfrW1s3/ocqZRFpbvFAU1XAxXReBbew+LymyhulqRTThl05YhHbqYe9yQqYppJjN9xJ5J9R13tZx7GnzU8T/Wfobc9GHIDWUBp511wToNl3KXCI2rWfb6zs4rsn0sVzXRAWsq1xrKpmO5qvF65YV1blo2l5TnKz8M/srYxqm9k+DJOjH1MuemAYLNYuf488mtrMivQhwnLz2xJygq7DUarug8zpTGUshzg5Rf40rgsNjYLMIxTmExfoNJdLcAuI1d8lsDmdWuvBWAdaFuZNMgMq7NoS1c/sF4s123memEDSfMZjN/2hXsYpxt6HvnNGazk/1AGa7cAiyaD2xhJ2zRhskozDWgmNQ4SKC5H5RquDeDIrf2FPgI9NnyBahxXhr6K9a0ZLOdWWqljAJa9BLJKQwOaawAGiYqv1qtqRn3GfydASfM5HB0SoNMS2KexmF3SGJkggKF1jZvbeAaIy7/5cA3zrcDK+7ut7PM2rmavIjExg5FDn1VqFW6eqtyrrzvLh90goP3yPl9LrVWoFWDd/x84Mn9N/FI4rRhFWY3LOg8JAf5jJUg9c78v0IBU86olNTS7gk72AnaP38P7/+5kyhanAoZm61Ota1uBdgqwTqVla8+ksurwhFmzXQfYa6vjGsPnZWU7kv4TYAAnHjy8VPrQ3QAAAABJRU5ErkJggg=="},"13cf":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8CAYAAAA6/NlyAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyhpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMDY3IDc5LjE1Nzc0NywgMjAxNS8wMy8zMC0yMzo0MDo0MiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6NzQ2Njc5NDhERjBBMTFFNzk5ODRGNjg2MjczRTk1QkYiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6NzQ2Njc5NDdERjBBMTFFNzk5ODRGNjg2MjczRTk1QkYiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTUgKE1hY2ludG9zaCkiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo3NDY2Nzk0M0RGMEExMUU3OTk4NEY2ODYyNzNFOTVCRiIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo3NDY2Nzk0NERGMEExMUU3OTk4NEY2ODYyNzNFOTVCRiIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Pq4SnRcAAAVgSURBVHja7FpNaCRFFK7q7szEmYQQJwZMQJOZxF1NNJnxoBEUchA9rAqLsntZxJ/sxd+TIorCXEQ8LN78AUG8aQS96yKKxqAhBMwkm82POzvJZCcZze9CZnq6fN07HWpqqnp6kpnQPfSDR/VPVb/66r16Ve914Xg8jiwII3cQsVtRqQAQO3QAyFHfKxwwdIkdrGlCldjivgwwZkCL2ClaJsw1y5agFQFQiSmxQ03aBKlxSq55s4AlloeHhx/z+/0XJUl6BO5DDnVaGULIz/l8/pOpqam/is80CtshaHl0dJQFKesDEQwGm6PR6CWfz/cRxvgUPAs42EsHoY8Dsiy/2N3drWSz2V9UVeVWlBjtykWtKwMDAx/CB55H7iIMlvjO0NDQeyIfJDGmrAOWBwcHHwKwLyGXEoB+NxaLPcDzOTwNy4FA4CJyN2GYiq9xVpgyDRugiw7K3Ygxfpy3p5B4HhoqdyL3051WGmbX4EYgLJrDvF1WIxHmAXbynrmmoCUHR0Q11y5qoPlqf41uYO3aAow8wB5gD7CrSDnuBzRNmwROw/77fuCIjSZ7EKv+aghXlEehaKmDjLoAvrm9vf1CIpGYvBWRSTLEoS83Nze/bdHxP1dWVsYymcy2viJ0dHTcHolEPoO2D1YhYwxkvHXiJp3L5S5BR36Hy4LOAEadnp7+olAo/CZooqbT6VcAbLbYRtvc3Pw3lUq9Uby3K+NzCxn1A7yzs/Oj2XFEJc+gkz/x6hNCEslkMmV23myzurqaBiBzVcggIOPyiZu0DITKs4d6HKpYyBKlWOUqZBALGfXTcEtLyxlOakXPNDwpCMjv7e/vD7PPe4Gg3ekqZTxx4oCbmppejUajZ82QMhgM+mOx2PvQoZhoIx8Khb4Mh8O9ZtByN1BnZ+enoi3tEWRUjibi8fhtRXNrAvbr5cjIyDW7H4C5uQK8Dho8Ddxuo4kKc3YG3cowDonM+ZgyDJqYmNBTyyrtA469DkMHenWuxm9YLEO1kuHttDzAHmAPsAfYA+xGwMTTsAfYVUR4gAknbGtY4JIgPt1tAJBbIpOmgRoRRaFQmHa9SgmZ5FhvCeDDNM3BwcE3bgcMSvuq0hzWARv5ptnZ2R/01KiLtXt5Zmbme8Q5pSdRYE0uqKqaT6VSYwB61oVg/8hmsxdyuZzGM2n9YBp7tNC43t3dvbm/vz/e1tamQsB+CgLwgMOx3gBFfby0tPQmKGuHmqKlyYR4PM6ewqPZeK4AhcPhPp/Pd4dgVA8HTL8GNnJWra2tr8uy/HCVGrqyt7f3AZQFGGSrJZKAIgxQ+Xw+vby8fBV8Tx6VpoFp0EapUDfsgUzNBAwjpy4sLMwi8f9j9lCMMXihUOjvvr6+r4u5Kztg/1lbW3s2mUxmeObIrKmENx05QEvWYTZXrFGl2XG7R4jZ814azKX/QEsXIpHIOIC+pxLYjY2NZwDsmsgckTivXfIzAJUfJ0Y0YMQBjanGdo4PY8rrm1PDEKj/ToEZcb6np+c7i0TcKtR7Cubf9UodFmhZxGU7R1PDmKrEdWLI+jiEWc+0jJJfI+vr6zdg/p/r6uoaB9B3MW3TW1tbTy8uLl5j21XY5pb99bCzTZYEjTRmbdYoZ8Cy+U6lSpPzJoOpXgctntfzywzYM3NzcwtUG963reSypoysBkuxGQ+TCtql62GByWmgxatg3mfb29u/1V+CN34OwF7hdP4owYytespxP0CBZK9ZT2o4wPn5+QSU9zHeVavkXWtFSo2+Qyht00scCxhxlj6RSdaFlBp/j3A8PKEcGmYAaZW8qtMB8+Yxz9StvCxyG2AkWOrsbCTqTv8LMABvq7mhr3On7gAAAABJRU5ErkJggg=="},"306c":function(e,t,n){e.exports=n.p+"img/loading.f979383a.gif"},3662:function(e,t,n){"use strict";var a=n("4325"),i=function(){var e={getFeedbackById:function(e){return a["a"].getFeedbackById(e)},getMaterialById:function(e){return a["a"].getMaterialById(e)},replyFeedback:function(e,t,n){return a["a"].replyFeedback(e,t,n)}};return e};t["a"]=i()},4438:function(e,t,n){"use strict";var a=n("cb6b"),i=n("0e1c");t["a"]={getLocalBusinessToggle:function(){var e=a["a"].getObject(i["a"].BUSINESS_TOGGLE,a["a"].level.user);return e||{enable_opening_tab:0,enable_pass_when_add:0,enable_pass_when_to_repair:0,sign_when_receive_delivery:1,special_project_switch:0,take_photo_when_review:0,take_photo_when_regist:0,hide_owner_phone:0,enable_problem_reason:0}}}},"4e60":function(e,t,n){var a=n("5454");t=e.exports=n("690e")(!1),t.push([e.i,"\n.zhkf .app-contact[data-v-7f77722d] {\n  display: inline-block;\n}\n.zhkf .app-contact > .app-contact-name[data-v-7f77722d] {\n    display: inline-block;\n    vertical-align: middle;\n    margin-right: 8px;\n}\n.zhkf .app-contact > .app-contact-chat[data-v-7f77722d],\n  .zhkf .app-contact > .app-contact-phone[data-v-7f77722d] {\n    display: inline-block;\n    width: 40px;\n    height: 24px;\n    vertical-align: middle;\n}\n.zhkf .app-contact > .app-contact-chat[data-v-7f77722d] {\n    background: url("+a(n("108b"))+") no-repeat center;\n    background-size: 26px auto;\n    margin-top: 2px;\n}\n.zhkf .app-contact > .app-contact-chat.disabled[data-v-7f77722d] {\n      background-image: url("+a(n("13cf"))+");\n}\n.zhkf .app-contact > .app-contact-phone[data-v-7f77722d] {\n    background: url("+a(n("839a"))+") no-repeat center;\n    background-size: 27px auto;\n}\n.zhkf .app-contact > .app-contact-phone.disabled[data-v-7f77722d] {\n      background-image: url("+a(n("c96c"))+");\n}\n",""])},"5c1b":function(e,t,n){"use strict";n("f0e6");var a=n("bbed"),i=n("fa1b"),o=n("07a4"),r=n("fd50");function c(){var e=function(e){e&&e.fitment_standard&&("毛坯"===e.fitment_standard?e.is_for_rough=1:"精装"===e.fitment_standard&&(e.is_for_decorated=1),delete e.fitment_standard)},t=function(e,t,n,i,o){return a["a"].getCheckItemLeaf(e,t,i,o).then((function(e){if(_.isEmpty(e))return[];var t=[];return _.each(e,(function(e){t.push(e.id)})),a["a"].getCheckItemAll(t.join("','"),n,i,o)}))};return{getCheckItemList:function(e,n,i,c,d){var l="毛坯"==c,s=r["a"].when(),m=["全部"];return m.push(1==d?"公区":"房间"),m="('"+m.join("','")+"')",s=o["a"].state.app.global.isUseProjectItem?a["a"].getProjectCheckItemList(e,n,i,l,m):t(e,n,i,l,m),s.then((function(e){return e}))},hasProjectCheckitem:function(e){return a["a"].hasProjectCheckitem(e)},searchCheckItemWithProject:function(t,n,i,o){return e(i),o?a["a"].searchProjectCheckItem(o,t,n,i):a["a"].searchCheckItem(t,n,i)},searchCheckItem:function(t,n,i,o){return console.log("searchCheckItem: ",t,n,i),console.time("searchCheckItem"),e(i),a["a"].hasProjectCheckitem(o).then((function(e){return e?a["a"].searchProjectCheckItem(o,t,n,i):a["a"].searchCheckItem(t,n,i).finally((function(){console.timeEnd("searchCheckItem")}))}))},getHigherLevelTreeListByCheckItemId:function(t,n,i){return console.log("getHigherLevelTree: ",t,n,i),console.time("getHigherLevelTree"),e(i),a["a"].getHigherLevelTreeListByCheckItemId(t,n,i).finally((function(){console.timeEnd("getHigherLevelTree")}))},getCheckItemLevel:function(e,t){return a["a"].getCheckItemLevel(e,t)},getPositionItemByRoom:function(e,t,n){var i=r["a"].when(),c=["全部"];return c.push(1==n?"公区":"房间"),c="('"+c.join("','")+"')",i=o["a"].state.app.global.isUseProjectItem?a["a"].getProjectPositionItemByRoom(e,t,c):a["a"].getPositionItemByRoom(e,c),i.then((function(e){return e}))},setIsUseProjectItemOfBatchUnit:function(e){return a["a"].getProjectItemOfBatchUnit(e).then((function(e){var t=!1;e&&(t=!0),o["a"].commit("app/APP",{isUseProjectItem:t})}))},getBatchCheckItem:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return i["a"].getCheckItemList(e,t,n,o["a"].state.app.global.isUseProjectItem).then((function(e){return console.log("BatchCheckItem",e),r["a"].resolve(e)}))}}}t["a"]=c()},6538:function(e,t,n){"use strict";n.r(t);n("5ab2"),n("6d57"),n("e44b"),n("e10e"),n("f548");var a=n("28f8"),i=n("be25"),o=n("f2de"),r=n("8ae6"),c=n("c2c1"),d=n("0523"),l=n("964e"),s=n("3662"),m=n("7508"),u=n("db5f"),p=n("c6e3"),h=n("1b3a");function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){Object(a["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var g={components:{AppContact:i["a"]},data:function(){return{hasRoomTypeDiagram:!1,roomTitle:"",batchTypeMap:{"专项检查":"special_checkitem","验房":"simulate","开放":"opening","在线开放":"online_opening","交付":"delivery","在线交付":"online_delivery"},feedback:{},feedback_images:{},delayDays:"",fromType:"",isGoingProblemPositionPage:!1,materialInfo:{}}},computed:b({},Object(o["e"])({currentBatchType:function(e){return e.app.global.currentBatchType},currentMenuType:function(e){return e.app.global.currentMenuType},enableProblemReason:function(e){return e.app.global.enableProblemReason},contentHeight:function(e){return e.app.global.contentHeight},footerHeight:function(e){return e.app.global.footerHeight}})),activated:function(){this.isGoingProblemPositionPage=!1},created:function(){var e=this,t=this.$route.query.type,a=h["a"].currFeedback,i=a.batch_room_id,o=void 0===i?"":i,c=a.material_id,l=a.code,m=a.position_name,u=a.item_name,p=a.feedback_content;return this.fromType=t,console.log(this.fromType,"===================="),d["a"].getRoomTitle(o).then((function(t){return e.roomTitle=t,e.feedback={code:l,positionName:m,item_name:u,feedback_content:p,status:"待回复"},s["a"].getMaterialById(c).then((function(t){return e.materialInfo=t,console.log("素材详情=================",t),{feedback_images:[t]}})).then((function(t){var a=function(e){for(var t,a=0;a<e.length;a++)t=e[a].material_localpath||e[a].material_thumbnail_localpath,t?(e[a]._srcPath=r["f"](t),e[a].needDownload=!1):(e[a]._srcPath=n("b34b"),e[a].needDownload=!0);return e};e.feedback_images=a(t.feedback_images)}))}))},methods:{dispatch:function(){var e=this,t=h["a"].currFeedback,n=t.position_name,a=t.batch_room_id,i=t.batch_unit_id,o=t.item_name,c=t.id;return p["a"].getRoomParams(a).then((function(t){var d={problemType:"feedbackRemainReply",title:"新增转派",building_id:t.building_id,batch_unit_id:i,batch_room_id:a,positionId:e.materialInfo.position_id,positionName:n,checkItemId:e.materialInfo.item_id,checkItemName:o,problemStamp:(new Date).getTime(),feedbackId:c};console.log(e.feedback_images,"======feedbackiamges");var l=e.feedback_images.map((function(e){var t=r["f"](e.material_localpath);return{localPath:e.material_localpath,fullPath:t,viewPath:r["g"](t)}}));u["a"].init(b(b({},d),{},{remark:e.feedback.feedback_content,imageList:l})),e.$router.push({path:"/checkroom/".concat(e.currentMenuType||e.currentBatchType,"-add-problem"),query:b({},d)})}))},reply:function(){var e=h["a"].currFeedback,t=e.id,n=e.batch_room_id;this.$router.push({path:"/checkroom/".concat(this.currentMenuType||this.currentBatchType,"-add-reply"),query:{ids:t,batch_room_id:n,from:"todo"}})},updateScopeImageLocalPath:function(e,t){return e.some((function(n,a){if(n.material_url===t.url)return e[a].img_localpath=t.path,e[a]._srcPath=r["f"](t.path),!0}))},showLargeImg:function(e,t){var a,i=this,o=this.$route.query,d=o.batch_room_id,s=void 0===d?"":d,u=o.question_id,p=o.batch_unit_id,h=void 0===p?"":p,f=[];if(console.log("imgs",e,t),e[t].needDownload){e[t].needDownload=!1,e[t]._srcPath=n("306c");var b=e[t].material_url,g=b.substring(b.lastIndexOf("/")+1).replace(/\?.*/,""),I=r["c"]({type:"feedback",folder:h+"/"+s});return console.log(e[t].material_url,I),void c["a"].downloadFile([{url:e[t].material_url,path:I.full_path+g}],!0).then((function(){return i.updateScopeImageLocalPath(e,{url:e[t].material_url,path:I.save_path+g})||console.error("updateScopeImageLocalPath: unexpected result"),l["a"].updateImageLocalPath(u,e[t].material_url,I.save_path+g).then((function(e){e.rowsAffected||console.error("ProblemService.updateImageLocalPath: unexpected rowsAffected value -> ",e.rowsAffected)}))}))}for(var k=0;k<e.length;k++)e[k].img_localpath?f.push(e[k]._srcPath):(f.push(e[k].material_url),a=!0);return a?(console.log("需要下载"),m["a"].checkIsWifi(!1).then((function(){return c["a"].openImageBrowser(f,t)})).then(null,null,(function(t){if(t&&t.path&&t.url)return i.updateScopeImageLocalPath(e,t)||console.error("updateScopeImageLocalPath: unexpected result"),l["a"].updateImageLocalPath(u,t.url,t.path).then((function(e){e.rowsAffected||console.error("ProblemService.updateImageLocalPath: unexpected rowsAffected value -> ",e.rowsAffected)}));console.error("openImageBrowser: downloaded path is invalid.",t)}))):c["a"].openImageBrowser(f,t)}}},I=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"feedback-detail"},[n("cus-nav-bar",{attrs:{title:"反馈详情","left-arrow":"",border:!1}}),e._v(" "),n("div",{staticClass:"head"},[n("div",{staticClass:"line",class:{oringe:"待回复"===e.feedback.status}}),e._v(" "),n("span",{staticClass:"status"},[e._v(e._s(e.feedback.status))])]),e._v(" "),n("div",{staticClass:"content",style:{height:e.contentHeight-e.footerHeight-40+"px"}},[n("div",{staticClass:"item-wrapper"},[[n("div",{staticClass:"item"},[n("div",{staticClass:"name"},[e._v("房间")]),e._v(" "),n("div",{staticClass:"value"},[e._v(e._s(e.roomTitle))])]),e._v(" "),e.feedback.code?n("div",{staticClass:"item"},[n("div",{staticClass:"name"},[e._v("编号")]),e._v(" "),n("div",{staticClass:"value"},[e._v(e._s(e.feedback.code))])]):e._e(),e._v(" "),n("div",{staticClass:"item"},[n("div",{staticClass:"name"},[e._v("部位")]),e._v(" "),n("div",{staticClass:"value",class:{"blue-color":e.hasRoomTypeDiagram}},[e._v("\n            "+e._s(e.feedback.positionName)+"\n            ")])]),e._v(" "),n("div",{staticClass:"item"},[n("div",{staticClass:"name"},[e._v("检查项")]),e._v(" "),n("div",{staticClass:"value"},[e._v(e._s(e.feedback.item_name))])]),e._v(" "),n("div",{staticClass:"item"},[n("div",{staticClass:"name"},[e._v("反馈描述")]),e._v(" "),n("div",{staticClass:"value"},[e._v(e._s(e.feedback.feedback_content))])])],e._v(" "),n("div",{staticClass:"item"},[n("div",{staticClass:"name"},[e._v("照片")]),e._v(" "),n("div",{staticClass:"value"},[e.feedback_images&&e.feedback_images.length>0?n("div",{staticClass:"imgs"},e._l(e.feedback_images,(function(t,a){return n("div",{key:a,staticClass:"img",on:{click:function(t){return e.showLargeImg(e.feedback_images,a)}}},[n("img",{attrs:{src:t._srcPath,alt:""}}),e._v(" "),t.needDownload&&t._srcPath.indexOf("img_blank.png")>0?n("a",{staticClass:"downloadTip"},[e._v("点击下载")]):e._e()])})),0):n("span",[e._v("无")])])])],2)]),e._v(" "),n("div",{staticClass:"footer"},[n("ul",{staticClass:"btn-wrapper"},[e.$checkRight("dispatch_feedback","online_opening")?n("li",{staticClass:"back",on:{click:e.dispatch}},[e._v("转派问题")]):e._e(),e._v(" "),e.$checkRight("reply_feedback","online_opening")?n("li",{staticClass:"pass",on:{click:e.reply}},[e._v("回复")]):e._e()])])],1)},k=[],v=n("d082");function y(e){n("0e11")}var _=!1,A=y,w="data-v-3353a881",P=null,R=Object(v["a"])(g,I,k,_,A,w,P);t["default"]=R.exports},"77a8":function(e,t,n){"use strict";n("6d57");function a(){var e={list:[]};return{model:e,init:function(){e.list=[{key:"status",value:"常用状态",name:"常用状态",displayName:"所有状态",list:[{name:"常用状态",value:"常用状态"},{name:"所有状态",value:""}]},{key:"position",value:"",name:"全部",displayName:"部位",list:[]},{key:"checkItem",value:"",name:"全部",displayName:"检查项",list:[]}]},update:function(t){e.list.forEach((function(e){t[e.key]&&(e.list=t[e.key])}))},getCondition:function(){var t={};return e.list.forEach((function(e){t[e.key]=e.value})),t},resetCheckItemValue:function(){e.list.forEach((function(e){"checkItem"===e.key&&(e.value="",e.name="全部")}))}}}t["a"]=a()},"839a":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8CAYAAAA6/NlyAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyhpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMDY3IDc5LjE1Nzc0NywgMjAxNS8wMy8zMC0yMzo0MDo0MiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTUgKE1hY2ludG9zaCkiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6Nzg2RjIzQkVERjA3MTFFNzk5ODRGNjg2MjczRTk1QkYiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6Nzg2RjIzQkZERjA3MTFFNzk5ODRGNjg2MjczRTk1QkYiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo3ODZGMjNCQ0RGMDcxMUU3OTk4NEY2ODYyNzNFOTVCRiIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo3ODZGMjNCRERGMDcxMUU3OTk4NEY2ODYyNzNFOTVCRiIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PkZbwwsAAAtqSURBVHja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"},"85cd":function(e,t,n){"use strict";var a=n("1834"),i=n("0938"),o="checkitem_remark_history",r={createCondition:function(e,t){if(_.isEmpty(e))return"";t=t?"crh.":"";var n=[];return _.each(e,(function(e,a){n.push(t+a+"="+e)})),n=n.join(" and "),n},insertHistory:function(e){e.id=i["a"].uuid(),e.used_time=e.used_time||1,e.last_used_time=e.last_used_time||i["a"].getNowDate();var t=[],n=[];return _.each(e,(function(e,a){t.push(a),n.push(e)})),a["a"].insert(o,t,n).then((function(){return e.id}))},updateHistory:function(e,t){return a["a"].update(o,e,t)},getOneHistory:function(e,t,n){var i="select * from "+o+" where item_id=? and desc_id=? and remark=?";return a["a"].queryOne(i,[e,t,n])},updateUserdTime:function(e,t){if(!t)return $q.error("次数不能为0");var n={last_used_time:i["a"].getNowDate(),used_time:t};return a["a"].update(o,n,{id:e})},getListByItemIdOrderDate:function(e,t){var n="select crh.id, crh.desc_id, crh.remark, cid.name as desc_name from checkitem_remark_history crh inner join check_item_desc cid on cid.id = crh.desc_id and cid.check_item_id = crh.item_id where crh.item_id = ?  order by crh.last_used_time desc limit "+t;return a["a"].query(n,[e])},getListByItemIdOrderUsedTime:function(e,t,n){var i=n.length?'and crh.id not in ("'+n.join('","')+'")':"",o="select crh.id, crh.desc_id, crh.remark, cid.name as desc_name from checkitem_remark_history crh inner join check_item_desc cid on cid.id = crh.desc_id and cid.check_item_id = crh.item_id where crh.item_id = ? "+i+" order by crh.used_time desc limit "+t;return a["a"].query(o,[e])},deleteItemById:function(e){var t="delete from checkitem_remark_history where id=?";return a["a"].query(t,[e])},searchByItems:function(e,t){var n="select crh.id,crh.remark as name,crh.item_id,ci.name as item_name,ci.full_name as item_full_name,crh.desc_id,cid.name as desc_name from checkitem_remark_history crh inner join check_item ci on ci.id = crh.item_id inner join check_item_desc cid on cid.id = crh.desc_id and cid.check_item_id = crh.item_id where crh.item_id in ("+t+') and (lower(crh.remark) like "%" || ? || "%" or upper(crh.remark) like "%" || ? || "%") order by crh.remark';return a["a"].query(n,[e,e])}},c=r,d={getList:function(e){if(!e)return $q.reject("itemId为空");var t=[];return c.getListByItemIdOrderDate(e,3).then((function(n){if(n){var a=[];return _.each(n,(function(e){a.push(e.id),t.push({id:e.id,name:e.desc_name+"："+e.remark,descId:e.desc_id,remark:e.remark,descName:e.desc_name})})),c.getListByItemIdOrderUsedTime(e,17,a).then((function(e){return e&&_.each(e,(function(e){t.push({id:e.id,name:e.desc_name+"："+e.remark,descId:e.desc_id,remark:e.remark,descName:e.desc_name})})),t}))}return $q.reject(t)}))},deleteItem:function(e){return c.deleteItemById(e)},upsertHistory:function(e,t,n){return c.getOneHistory(e,t,n).then((function(a){return a?c.updateUserdTime(a.id,a.used_time+1):c.insertHistory({item_id:e,desc_id:t,remark:n})}))},searchByItems:function(e,t){return c.searchByItems(e,t)}};t["a"]=d},"94b6":function(e,t,n){var a=n("4e60");"string"===typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);var i=n("85cb").default;i("f752cdd6",a,!0,{})},"98a4":function(e,t,n){"use strict";n("e697");var a=n("85cd"),i=n("fd50"),o=n("a593"),r={model:{},init:function(){r.model.historyList={},r.model.currItemId="",r.model.currList=[]},loadList:function(e,t){return e?(_.isEmpty(r.model)&&r.init(),t=t||!1,r.model.currItemId=e,_.isEmpty(r.model.historyList[e])||t?(console.log("=== itemId ===",e),a["a"].getList(e).then((function(t){console.log(t),r.model.historyList[e]=t,r.model.currList=t})).catch((function(){r.model.historyList[e]=[],r.model.currList=[]}))):(r.model.currList=r.model.historyList[e],i["a"].resolve())):i["a"].reject()},upsertHistory:function(e,t,n){return a["a"].upsertHistory(e,t,n).then((function(){r.loadList(e,!0)}))},delHistory:function(e){return a["a"].deleteItem(e).then((function(){var t=_.find(r.model.currList,{id:e});if(t){var n=r.model.currList.indexOf(t);n>-1&&r.model.currList.splice(n,1)}})).catch((function(e){console.error(e),o["default"].prototype.$toast("删除历史失败！")}))}};t["a"]=r},a63c:function(e,t,n){t=e.exports=n("690e")(!1),t.push([e.i,"\n.zhkf .feedback-detail[data-v-3353a881] {\n  height: 100%;\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-orient: vertical;\n  -webkit-box-direction: normal;\n      -ms-flex-direction: column;\n          flex-direction: column;\n}\n.zhkf .feedback-detail .tag[data-v-3353a881] {\n    margin-left: 10px;\n}\n.zhkf .feedback-detail .red[data-v-3353a881] {\n    background: #eb544d;\n}\n.zhkf .feedback-detail .blue[data-v-3353a881] {\n    background: #0099ff;\n}\n.zhkf .feedback-detail .purple[data-v-3353a881] {\n    background: #a13eff;\n}\n.zhkf .feedback-detail .grey[data-v-3353a881] {\n    background: #a0a0a0;\n}\n.zhkf .feedback-detail .black[data-v-3353a881] {\n    background: #000;\n}\n.zhkf .feedback-detail .green[data-v-3353a881] {\n    background: #00cb59;\n}\n.zhkf .feedback-detail .oringe[data-v-3353a881] {\n    background: -webkit-gradient(linear, left top, left bottom, from(#fdc186), to(#fd9458));\n    background: linear-gradient(to bottom, #fdc186, #fd9458);\n}\n.zhkf .feedback-detail .head[data-v-3353a881] {\n    height: 45px;\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n    -webkit-box-align: center;\n        -ms-flex-align: center;\n            align-items: center;\n    padding: 0 15px;\n    background: #f4f4f4;\n}\n.zhkf .feedback-detail .head .status[data-v-3353a881] {\n      -webkit-box-flex: 1;\n          -ms-flex: 1;\n              flex: 1;\n      font-size: 15px;\n      margin-left: 8px;\n}\n.zhkf .feedback-detail .head .line[data-v-3353a881] {\n      width: 3px;\n      height: 14px;\n      border-radius: 1.5px;\n}\n.zhkf .feedback-detail .content[data-v-3353a881] {\n    overflow: auto;\n    padding-bottom: 20px;\n}\n.zhkf .feedback-detail .content .item-wrapper[data-v-3353a881] {\n      padding: 4px 15px;\n      margin: 0 10px;\n      background: #fff;\n      border-radius: 6px;\n}\n.zhkf .feedback-detail .content .item[data-v-3353a881] {\n      display: -webkit-box;\n      display: -ms-flexbox;\n      display: flex;\n      font-size: 14px;\n      margin-top: 16px;\n      line-height: 20px;\n}\n.zhkf .feedback-detail .content .item .name[data-v-3353a881] {\n        color: #606060;\n        width: 90px;\n        -ms-flex-negative: 0;\n            flex-shrink: 0;\n}\n.zhkf .feedback-detail .content .item .name.mid[data-v-3353a881] {\n          -ms-flex-item-align: center;\n              align-self: center;\n}\n.zhkf .feedback-detail .content .item .name .builder[data-v-3353a881] {\n          text-align: center;\n          width: 60px;\n}\n.zhkf .feedback-detail .content .item .name .builder span[data-v-3353a881] {\n            display: block;\n            font-size: 12px;\n}\n.zhkf .feedback-detail .content .item .value[data-v-3353a881] {\n        color: #202020;\n        -webkit-box-flex: 1;\n            -ms-flex: 1;\n                flex: 1;\n        word-break: break-all;\n}\n.zhkf .feedback-detail .content .item .value.blue-color[data-v-3353a881] {\n          color: #0099ff;\n}\n.zhkf .feedback-detail .content .br[data-v-3353a881] {\n      height: 4px;\n      margin-top: 16px;\n}\n.zhkf .feedback-detail .content .imgs[data-v-3353a881] {\n      display: -webkit-box;\n      display: -ms-flexbox;\n      display: flex;\n}\n.zhkf .feedback-detail .content .imgs .img[data-v-3353a881] {\n        width: 60px;\n        height: 60px;\n        border-radius: 2px;\n        margin-right: 10px;\n        margin-bottom: 10px;\n        overflow: hidden;\n        position: relative;\n}\n.zhkf .feedback-detail .content .imgs .img img[data-v-3353a881] {\n          width: 100%;\n}\n.zhkf .feedback-detail .content .imgs .img .downloadTip[data-v-3353a881] {\n          position: absolute;\n          top: 50%;\n          left: 50%;\n          -webkit-transform: translate(-50%, -50%);\n                  transform: translate(-50%, -50%);\n          color: #606060;\n          width: 100%;\n          font-size: 12px;\n          text-align: center;\n}\n.zhkf .footer[data-v-3353a881] {\n  background: #fff;\n}\n.zhkf .footer .btn-wrapper[data-v-3353a881] {\n    width: 100%;\n    height: 100%;\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n    height: 45px;\n    border-top: 1px solid #ebebeb;\n}\n.zhkf .footer .btn-wrapper li[data-v-3353a881] {\n      -webkit-box-flex: 1;\n          -ms-flex: 1;\n              flex: 1;\n      text-align: center;\n      line-height: 45px;\n      font-size: 16px;\n}\n.zhkf .footer .btn-wrapper li.unusual[data-v-3353a881] {\n        border-right: 1px solid #ebebeb;\n}\n.zhkf .footer .btn-wrapper li.unusual[data-v-3353a881], .zhkf .footer .btn-wrapper li.back[data-v-3353a881] {\n        background: #fff;\n        color: #eb544d;\n}\n.zhkf .footer .btn-wrapper li.pass[data-v-3353a881] {\n        background: #0099ff;\n        color: #fff;\n}\n.zhkf .footer .btn-wrapper li[data-v-3353a881]:last-child {\n        background: #0099ff !important;\n        color: #fff !important;\n        border: none;\n}\n",""])},a9ec:function(e,t,n){"use strict";n("6d57");var a=n("a593"),i=n("3fa2"),o=n("d485"),r=n("9af1"),c=n("77a8");function d(){var e={},t={problemList:[],buttons:[]},n={},d="tab-icon1",l={"待派单":"tab-icon5","待整改":"tab-icon2","已整改":"tab-icon3","已通过":"tab-icon4","已作废":"tab-icon6","非正常关闭":"tab-icon7"},s=i["a"].room;return n.iniStatusStyle=function(){t.problemList.forEach((function(e){l[e.status]?e.status_style=l[e.status]:e.status_style=d}))},n.initFilter=function(){return o["a"].getPositionList(s.batchRoomId).then((function(e){t.filterList.position.list=e}))},n.getCondition=function(){var e={};_.each(t.filterList,(function(t,n){e[n]=t.value}))},n.getProblemPoints=function(){a["default"].prototype.$eventBus.$emit("app.roomdetail:updateProblemPoints",t.problemList)},e={model:t,init:function(){return o["a"].getProblemList(s.batchRoomId,0,1,!0).then((function(e){t.problemList=e,n.iniStatusStyle()})).then((function(){return console.log("fromType------",s.fromType),r["a"].getDefaultFilterList(t.problemList,s.batchRoomId,s.fromType).then((function(e){c["a"].update(e),console.log("filters---------",e),n.getProblemPoints()}))})).then((function(){if(!_.isEmpty(c["a"].model.list))return e.updateProblemList()}))},updateProblemList:function(e){var a=c["a"].getCondition();r["a"].hideProblemByFilter(t.problemList,c["a"].model.list,a,e),n.getProblemPoints()}},e}t["a"]=d()},b643:function(e,t,n){"use strict";var a=n("7ee1");t["a"]={getReasonConfig:function(){return a["a"].getList()},getProblemReason:function(e){return a["a"].getProblemReason(e)}}},bad1:function(e,t,n){"use strict";var a=n("97ba");t["a"]={getPositionList:function(e){return console.log("batchRoomId",e),a["a"].getPositionList(e).then((function(e){return e}))},getPositionByIds:function(e){return a["a"].getPositionByIds(e)},getPositionNameById:function(e){return a["a"].getPositionNameById(e)}}},be25:function(e,t,n){"use strict";n("cc57");var a=n("964e"),i={name:"AppContact",props:{id:String,showName:Boolean,showPhone:Boolean},data:function(){return{name:"",phone:"",scope:"",canUseChat:"",user:null}},watch:{id:function(e){e&&this.getInfo(e)}},created:function(){this.id&&this.getInfo(this.id)},methods:{getInfo:function(e){var t=this;a["a"].getUserInfo(e).then((function(e){e?(t.name=e.name,t.phone=e.mobile?"tel:"+e.mobile:"",t.canUseChat=!!e.chat_id,t.user={id:e.chat_id,name:e.name,avatar:e.avatar,type:"PRIVATE"}):t.user=null}))},openChat:function(){},clickShowName:function(){return!1!==this.showName},clickShowPhone:function(){return!1!==this.showPhone}}},o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"app-contact"},[e.name?n("div",{staticClass:"app-contact-name"},[e._v(e._s(e.name))]):e._e(),e._v(" "),e.phone?n("a",{staticClass:"app-contact-phone",class:{disabled:!e.phone},attrs:{"data-track":"拨打电话",href:e.phone}}):n("a",{staticClass:"app-contact-phone",class:{disabled:!e.phone},attrs:{"data-track":"拨打电话"}})])},r=[],c=n("d082");function d(e){n("94b6")}var l=!1,s=d,m="data-v-7f77722d",u=null,p=Object(c["a"])(i,o,r,l,s,m,u);t["a"]=p.exports},c96c:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8CAYAAAA6/NlyAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyhpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMDY3IDc5LjE1Nzc0NywgMjAxNS8wMy8zMC0yMzo0MDo0MiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6NzQ2Njc5NENERjBBMTFFNzk5ODRGNjg2MjczRTk1QkYiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6NzQ2Njc5NEJERjBBMTFFNzk5ODRGNjg2MjczRTk1QkYiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTUgKE1hY2ludG9zaCkiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo3ODZGMjNCRURGMDcxMUU3OTk4NEY2ODYyNzNFOTVCRiIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo3ODZGMjNCRkRGMDcxMUU3OTk4NEY2ODYyNzNFOTVCRiIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PoRiS84AAAxhSURBVHja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"},db5f:function(e,t,n){"use strict";n("5ab2"),n("e44b"),n("e10e"),n("f0e6");var a=n("28f8"),i=(n("5f54"),n("6d57"),n("fd50")),o=n("c2c1"),r=n("0938"),c=n("8ae6"),d=n("a14a"),l=n.n(d),s=n("07a4"),m=n("a593"),u=n("98a4"),p=n("3fa2"),h=n("a9ec"),f=n("db99"),b=n("bad1"),g=n("964e"),I=n("0970"),k=n("5c1b"),v=n("dd0a"),y=n("4438"),_=n("b643"),A=n("bbed");function w(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function P(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?w(Object(n),!0).forEach((function(t){Object(a["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var R=p["a"].room,N="",D="";function C(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];n.length>0?console.log("[model]/problem-model.js：",e,n):console.log("[model]/problem-model.js：",e)}function G(){if(!x.model.problem.contractorIds&&x.model.problem.checkItemId)return v["a"].getContractor(R.batchRoomId||x.model.problem.batchRoomId,x.model.problem.checkItemId,x.model.problem.descIds).then((function(e){var t=[],n=[];x.model.contractorDisabled=!1,l.a.isEmpty(e)||(l.a.each(e,(function(e){t.push(e.contractor_id),n.push(e.contractor_name)})),t.length>1&&(x.model.contractorDisabled=!0),t=t.join(";"),n=n.join("；"),x.model.problem.contractors=n,x.model.problem.contractorIds=t,x.model.problem.responsibilityUnitIds=t,x.model.problem.responsibilityUnits=n)}))}function j(){var e=x.model.problem.id?"editProblem":"addProblem";!x.model.selectes&&(x.model.selectes={position:{},checkItem:{},desc:{},contractor:{},responsibleCompany:{}}),x.model.positionDisabled||(x.model.selectes.position={path:"/checkroom/".concat(s["a"].state.app.global.currentMenuType||s["a"].state.app.global.currentBatchType,"-position-select"),query:{fromPage:e}}),x.model.problem.positionId?(x.model.selectes.checkItem={path:"/checkroom/".concat(s["a"].state.app.global.currentMenuType||s["a"].state.app.global.currentBatchType,"-checkitem-select/").concat((new Date).getTime()),query:{type:R.fromType,fitment_standard:R.fitmentStandard,fromPage:e,isSpecial:+R.isSpecial}},x.model.problem.checkItemId?(R.isSpecial||k["a"].getHigherLevelTreeListByCheckItemId(x.model.problem.checkItemId,x.model.problem.positionId,{fitment_standard:R.fitmentStandard}).then((function(t){x.model.selectes.checkItem.query=l.a.extend(x.model.selectes.checkItem.query,{history:JSON.stringify(t),level:0,fromPage:e})})),x.model.selectes.desc={path:"/checkroom/".concat(s["a"].state.app.global.currentMenuType||s["a"].state.app.global.currentBatchType,"-desc-select"),query:{fromPage:e,fitment_standard:R.fitmentStandard,level:0}},x.model.selectes.contractor={path:"/checkroom/".concat(s["a"].state.app.global.currentMenuType||s["a"].state.app.global.currentBatchType,"-contractor-select"),query:{fromPage:e}},x.model.selectes.responsibleCompany={path:"/checkroom/".concat(s["a"].state.app.global.currentMenuType||s["a"].state.app.global.currentBatchType,"-responsible-select"),query:{fromPage:e}}):x.model.selectes.checkItem.query=l.a.extend(x.model.selectes.checkItem.query,{batchId:R.batchId})):x.model.selectes.checkItem={}}function L(e){var t=e.coordinate?[JSON.parse(e.coordinate)]:[];return x.model.problem={projectId:e.projectId,problemStamp:e.problemStamp,positionId:e.positionId||"",diagramId:e.diagramId,positionName:"",checkItemId:e.checkItemId||"",checkItemName:e.checkItemName||"",topCheckItemId:e.checkItemId||"",checkItemGuide:!1,descIds:e.descIds||"",descNames:e.descNames||"",remark:e.remark||"",imageList:e.imageList||[],emergencyDegree:"一般",coordinates:t,contractors:"",contractorIds:"",responsibilityUnitIds:"",responsibilityUnits:"",isPassedWhenAdd:!1,isRemarkRequired:"",feedbackId:e.feedbackId,batchRoomId:e.batch_room_id},"roomDesignChange"!==e.problemType&&"feedbackRemainReply"!==e.problemType||(R={batchRoomId:e.batch_room_id,batchUnitId:e.batch_unit_id}),x.model.positionId=null,x.setProblem(),i["a"].resolve()}function z(e){return g["a"].getProblem(e.problemId).then((function(t){var n=i["a"].when();return R&&!l.a.isEmpty(R)||(R={fromType:e.type,batchRoomId:e.batch_room_id,batchUnitId:e.batch_unit_id,isSpecial:e.isSpecial,fitmentStandard:e.fitment_standard,batchId:t.batch_id}),n.then((function(){return t.problem_reason_ids=[],s["a"].state.app.global.enableProblemReason?_["a"].getProblemReason(e.problemId).then((function(e){return t.problem_reason_ids=e,i["a"].resolve(t)})):i["a"].resolve(t)}))})).then((function(t){x.model.problem={id:t.id,projectId:t.proj_id,positionId:t.position_id||"",positionName:t.position_name||"",diagramId:t.roomtype_diagram_id,checkItemId:t.item_id||"",checkItemName:t.item_name||"",topCheckItemId:t.top_item_id||"",checkItemGuide:!1,descIds:t.desc_id||"",descNames:t.desc||"",remark:t.remark,imageList:[],emergencyDegree:t.emergency_degree,coordinates:t.coordinates,contractors:t.contractor_name,contractorIds:t.contractor_id,responsibilityUnitIds:t.responsible_company_id,responsibilityUnits:t.responsible_company_name,isPassedWhenAdd:t.is_passed_when_add||!1,isRemarkRequired:t.isRemarkRequired,reasonIds:t.problem_reason_ids,batchRoomId:e.batch_room_id,batchUnitId:e.batch_unit_id},t.problem_images.forEach((function(e){var t=c["a"].getImageRealPath(e.img_localpath);x.model.problem.imageList.push({localPath:e.img_localpath,fullPath:t,viewPath:c["a"].getImageWebViewPath(t)})})),console.log("==== _self.model.problem  ====",x.model.problem),N=t.remark,D=t.is_passed_when_add,x.model.positionId=t.position_id}))}var x={initUpdate:!0,model:{isLoaded:!1,positionId:"",problem:{imageList:[]},ProblemReasons:[],remarkChangeStatus:1},setProblem:function(e){var t={};x.model.positionDisabled=!1,x.model.checkItemDisabled=!1,x.model.descDisabled=!1,x.model.contractorDisabled=!1,"roomDesignChange"===x.model.problemType?(!l.a.isEmpty(e)&&(t={checkItemId:e.itemId,topCheckItemId:e.itemId,checkItemName:e.itemName,descIds:e.descId,descNames:e.descName,emergencyDegree:e.emergency_degree,remark:e.remark}),x.model.checkItemDisabled=!0,x.model.descDisabled=!0):"feedbackRemainReply"===x.model.problemType?(x.model.positionDisabled=!0,x.model.checkItemDisabled=!0):"fitmentStyle"===x.model.problemType?(!l.a.isEmpty(e)&&(t={checkItemId:e.checkItemId,topCheckItemId:e.checkItemId,checkItemName:e.checkItemName,emergencyDegree:"前置配置"===e.configType?"紧急":"一般",positionId:e.positionId||""}),x.model.positionDisabled=!0,x.model.checkItemDisabled=!0):"checkList"===x.model.problemType&&(!l.a.isEmpty(e)&&(x.model.problem=l.a.extend(x.model.problem||{},e)),j(),G(),x.initUpdate=!1),x.model.problem=l.a.extend(x.model.problem||{},t)},showGuide:function(){return x.model.problem.checkItemId?I["a"].getCheckItemGuideByItemId(x.model.problem.checkItemId).then((function(e){x.model.guideText=e,x.model.showGuide=!!e})):(x.model.guideText="",x.model.showGuide=!1,i["a"].resolve())},init:function(e){x.model.isLoaded=!1,x.model.title=e.problemId?"编辑问题":"feedbackRemainReply"!==e.problemType?"登记问题":e.title,x.model.problemType=e.problemType||"default";var t,n=s["a"].state.app.global.currentBatchType||"simulate";return x.model.enablePassWhenAdd=1==y["a"].getLocalBusinessToggle().enable_pass_when_add&&(m["default"].prototype.$checkRight("reinspect_problem",n)||m["default"].prototype.$checkRight("pass_problem",n)),x.model.ProblemReasons=[],console.log("=====",x.model),t=e.problemId?z(e):L(e),t.then((function(){return x.showGuide().then((function(){if(x.model.problem.positionId)return b["a"].getPositionNameById(x.model.problem.positionId).then((function(e){x.model.problem.positionName=e}))})).then((function(){x.initUpdate&&j()})).then((function(){if(s["a"].state.app.global.enableProblemReason)return _["a"].getReasonConfig().then((function(t){console.log("=== reasons ===",t),e.problemId&&t.forEach((function(e){m["default"].prototype.$set(e,"selected",x.model.problem.reasonIds.indexOf(e.id)>-1)})),x.model.ProblemReasons=t}))})).then((function(){x.model.isLoaded=!0})).catch((function(e){console.error(e),m["default"].prototype.$toast("获取相关数据失败，请返回或稍后重试")}))}))},updateProblem:function(e,t){return t=t||!1,x.model.problem=Object.assign({},x.model.problem,e),x.showGuide().then((function(){return j(),e.remark&&x.model.remarkChangeStatus++,C("updateProblem - 更新问题的字段：","updateProblem=".concat(t),e),t?G():i["a"].resolve()}))},takePhoto:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=c["a"].getNewProblemImagePath({folder:R.batchUnitId+"/"+R.batchRoomId,imageId:Object(r["j"])()});return console.log("take photo",t),o["a"].takePhoto(t.full_path,P({withGraffiti:!0,text:g["a"].getWatermarkText()},e)).then((function(){x.model.problem.imageList.push({localPath:t.save_path,fullPath:t.full_path,viewPath:t.view_path?t.view_path:c["a"].getImageWebViewPath(t.full_path)})}))},addProblem:function(e){e=e||"";var t=[];l.a.each(x.model.problem.imageList,(function(e){t.push({img_localpath:e.localPath})}));var n={problem_images:t,batch_room_id:R.batchRoomId||x.model.problem.batchRoomId,position_id:x.model.problem.positionId,item_id:x.model.problem.checkItemId,top_item_id:R.isSpecial?"":x.model.problem.topCheckItemId,desc_id:x.model.problem.descIds,contractor_id:x.model.problem.contractorIds,responsible_company_id:x.model.problem.responsibilityUnitIds,roomtype_diagram_id:x.model.problem.diagramId,coordinate:x.model.problem.coordinates,emergency_degree:x.model.problem.emergencyDegree,remark:x.model.problem.remark,is_passed_when_add:x.model.problem.isPassedWhenAdd?1:0,problemType:x.model.problemType,feedbackId:x.model.problem.feedbackId},a=[];return x.model.ProblemReasons.forEach((function(e){e.selected&&a.push(e.id)})),g["a"].batchAddProblem(n,R.isSpecial,e,a).then((function(){return A["a"].updateCheckItemUseTimes(x.model.problem.checkItemId).catch((function(e){window.$log("添加问题 updateCheckItemUseTimes catch & 参数",{error:e,curr_param:{checkItemId:x.model.problem.checkItemId}}),console.log("添加问题 updateCheckItemUseTimes catch & 参数",{error:e,curr_param:{checkItemId:x.model.problem.checkItemId}})}))})).then((function(){return A["a"].updateItemDescUseTimes(x.model.problem.descIds).catch((function(e){window.$log("添加问题 updateItemDescUseTimes catch & 参数",{error:e,curr_param:{descIds:x.model.problem.descIds}}),console.log("添加问题 updateItemDescUseTimes catch & 参数",{error:e,curr_param:{descIds:x.model.problem.descIds}})}))})).then((function(){return h["a"].init().catch((function(e){window.$log("添加问题 刷新房间问题model catch",e),console.error("添加问题 刷新房间问题model catch",e)})),R.mode})).catch((function(e){window.$log("添加问题 刷新房间问题model这一步的外部 catch",e),console.error("添加问题 刷新房间问题model这一步的外部 catch",e)})).finally((function(){console.log("添加问题 finally88"),x.model.problem.remark&&x.model.problem.descIds.indexOf(";")<0&&u["a"].upsertHistory(x.model.problem.checkItemId,x.model.problem.descIds,x.model.problem.remark).catch((function(e){window.$log("添加问题 finally catch",e),console.log("添加问题 finally catch",e)}))}))},editProblem:function(){var e=[],t=[];return l.a.each(x.model.problem.imageList,(function(e){t.push({img_localpath:e.localPath})})),x.model.ProblemReasons.forEach((function(t){t.selected&&e.push(t.id)})),g["a"].processEditProblem({id:x.model.problem.id,problem_images:t,batch_room_id:R.batchRoomId,position_id:x.model.problem.positionId,item_id:x.model.problem.checkItemId,top_item_id:R.isSpecial?"":x.model.problem.topCheckItemId,desc_id:x.model.problem.descIds,contractor_id:x.model.problem.contractorIds,responsible_company_id:x.model.problem.responsibilityUnitIds,emergency_degree:x.model.problem.emergencyDegree,remark:x.model.problem.remark,roomtype_diagram_id:x.model.problem.diagramId,coordinate:x.model.problem.coordinates,is_passed_when_add:x.model.problem.isPassedWhenAdd?1:0,is_passed_when_add_old:D},R.isSpecial,e).then((function(){f["a"].updateProblem(x.model.problem.id),h["a"].init()})).catch((function(e){return i["a"].reject(e)})).finally((function(){x.model.problem.remark&&x.model.problem.descIds.indexOf(";")<0&&N!=x.model.problem.remark&&u["a"].upsertHistory(x.model.problem.checkItemId,x.model.problem.descIds,x.model.problem.remark)}))}};t["a"]=x},db99:function(e,t,n){"use strict";n("6d57"),n("e697");var a=n("fd50"),i=(n("cc57"),n("9a33"),n("a324")),o=n("760e"),r=function(){var e=20,t={},n={},r={};return t={batch_unit_id:"cp.batch_unit_id",status:"cp.status",floor:"br.floor",item:"ci.id",user:"u.id"},n.formatData=function(e,t){var n=[],a=[];return _.each(e,(function(e){var i={};e.desc_id=e.desc_id.split(";"),_.each(e.desc_id,(function(e){n.indexOf(e)<0&&n.push(e)})),-1==e.floor.indexOf("层")&&-1==e.floor.indexOf("楼")&&-1==e.floor.indexOf("公共区域")&&(e.floor=e.floor+"楼"),i.id=e.id,i.code=e.code,i.batchRoomId=e.batch_room_id,i.batchUnitId=e.batch_unit_id,i.registerUserName=e.regist_user_name,i.roomtypeDiagramId=e.roomtype_diagram_id,i.status=e.status,i.roomName=t+"-"+e.floor+"-"+e.room_no,i.dealTime=e.deal_time&&"00-00-00 00:00:00"!==e.deal_time?e.deal_time:"",i.emergence=e.emergency_degree&&e.emergency_degree.indexOf("急")>-1?e.emergency_degree:"",i.sendBackTimes=e.sent_back_time||0,i.positionName=e.position,i.itemName=e.item,i.contractor=e.contractor||"",i.desc=e.desc_id,a.push(i)})),o["a"].getDescByIds(n).then((function(e){return _.each(a,(function(t){_.each(t.desc,(function(n,a){var i=_.find(e,{id:n});t.desc[a]=i?i.name:"无描述"})),t.desc=t.desc.join("、")})),a}))},n.getFilter=function(e,t){var n={status:i["a"].getCountOfProblemStatus,floor:i["a"].getCountOfFloor,item:i["a"].getCountOfCheckItem,user:i["a"].getCountOfRegister};return n[e](t)},r.createCondition=function(e,n){if(_.isEmpty(e))return"";"batch_unit_id"==n&&(n="");var a=[];return _.each(e,(function(e,i){t[i]&&i!==n&&a.push(t[i]+'="'+e+'"')})),a.join(" and ")},r.initFilter=function(){var e=[{type:"status",title:"问题状态",name:"",value:"",options:[]},{type:"floor",title:"楼层",name:"",value:"",options:[]},{type:"item",title:"检查项",name:"",value:"",options:[]},{type:"user",title:"登记人",name:"",value:"",options:[]}];return e},r.getProblems=function(t,o,c){var d=r.createCondition(o);return i["a"].getAllProblemListByPage(d,t,e).then((function(e){return!e||_.isEmpty(e)?[]:n.formatData(e,c)})).catch((function(e){return a["a"].reject(e)}))},r.getFilterCount=function(e){e=e||{};var i,o="",c={},d=[];return _.each(t,(function(t,a){"batch_unit_id"!==a&&(o=r.createCondition(e,a),i=n.getFilter(a,o).then((function(e){return{type:a,res:e}})),d.push(i))})),a["a"].all(d).then((function(e){return _.each(e,(function(e){if(e){var t=[],n=0;_.each(e.res,(function(e){t.push({count:e.count,name:e.name||e.title,value:e.value}),n+=e.count})),t.unshift({value:"",name:"全部",count:n}),c[e.type]=t}})),c}))},r.getSelectedProblems=function(e){var t=r.createCondition(e);return i["a"].getSelectedProblems(t)},r.passProblems=function(e){var t=[];return e.forEach((function(e){t.push(i["a"].passProblem(e.id,e.batchRoomId))})),a["a"].all(t)},r.getListInfoById=function(e,t){return i["a"].getListInfoById(e).then((function(e){return n.formatData([e],t).then((function(e){return e.shift()}))})).catch((function(e){return a["a"].reject(e)}))},r},c=r(),d=n("9072"),l=n("a14a"),s=n.n(l),m=function(){var e={},t=20,n={};function i(){s.a.isEmpty(e.filter)&&(e.filter=c.initFilter());var n=o(),a=[],i="";return c.getFilterCount(n).then((function(n){s.a.each(e.filter,(function(t,o){if(i=e.filter[o].value||"",t&&n[t.type]){var r=s.a.find(n[t.type],{value:i});r&&a.push(r.count),e.filter[o].options=n[t.type]}}));var o=Math.min.apply(null,a);e.totalPage=Math.ceil(o/t)}))}function o(){var t={batch_unit_id:e.batchUnitId};return s.a.each(e.filter,(function(e){e.value&&(t[e.type]=e.value)})),t}function r(){var t=a["a"].defer();if(e.isAllSelected){var n=o();c.getSelectedProblems(n).then((function(e){t.resolve(e)})).catch((function(e){t.reject(e)}))}else t.reject();return t.promise}function l(t){e.isAllSelected?e.problemList=[]:s.a.each(t,(function(t){var n=s.a.find(e.problemList,{id:t.id});if(n){var a=-1;e.problemList&&(a=e.problemList.indexOf(n)),a>-1&&e.problemList.splice(a,1)}}))}return e.filter=c.initFilter(),e.currPage=0,e.totalPage=0,e.problemList=[],e.isAllSelected=!1,n={model:e,init:function(t,i){var o=a["a"].when();return e.currPage=0,e.problemList=[],e.batchUnitId=t,e.unitName=i,e.currConditon={},1==window.isNeedClearAllData&&(e.filter=c.initFilter(),window.isNeedClearAllData=!1),null==window.take_photo_when_review&&o.then((function(){return d["a"].getReviewPhotoSetting()})),o.then((function(){return n.load(0)}))},load:function(t){if(t&&t==e.currPage)return a["a"].resolve();var n=o();return i(),c.getProblems(t,n,e.unitName).then((function(t){return e.isAllSelected&&t.forEach((function(e){e.checked=!0})),a["a"].resolve(t)})).then((function(n){return e.problemList=t?e.problemList.concat(n):n,e.currPage=t,a["a"].resolve(!0)}))},passProblems:function(e){var t=a["a"].defer(),n=function(e){c.passProblems(e).then((function(){l(e),t.resolve()})).catch((function(e){t.reject(e)}))};return e?n(e):r().then(n),t.promise},updateProblem:function(t){var n=s.a.find(e.problemList,{id:t});return n?c.getListInfoById(t,e.unitName).then((function(t){if(!s.a.isEmpty(t)){if(""!=e.filter[0].value&&n.status!=t.status){var a=e.problemList.indexOf(n);a>-1&&e.problemList.splice(a,1)}else n=s.a.extend(n,t);i(),$rootScope.$$phase||$rootScope.$digest()}})):a["a"].resolve()}}};t["a"]=m()},fa1b:function(e,t,n){"use strict";var a=n("1834");t["a"]={getCheckItemList:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=[e],r="select bc.item_id, ci.full_name as item_full_name  from batch_checkitem bc  inner join check_item ci on ci.id = bc.item_id  where bc.batch_id = ? ";if(r+=t?" and ci.is_for_rough = 1 ":" and ci.is_for_decorated = 1 ",n){var c=i?"project_position_checkitem":"position_checkitem";r+=" and bc.item_id in                     (select item_id from "+c+" where position_id = ? )",o.push(n)}return r+=" order by ci.sort ",a["a"].query(r,o)}}}}]);