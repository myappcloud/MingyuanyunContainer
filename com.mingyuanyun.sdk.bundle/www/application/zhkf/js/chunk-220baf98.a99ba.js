(window["webpackJsonp_module_entry_zhkf_"]=window["webpackJsonp_module_entry_zhkf_"]||[]).push([["chunk-220baf98"],{"06e1":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAACg0lEQVRYR9WZPUwUQRTH//8Bc1pIw54fkcTCQgs7NVpi7d0h2d2EwspKDfZQWFFgjwEqKhNi9giCWEtpolZYSGFhghHZscFCLhz7zO555A64j113ddh25/3nlzd5H/OGSPAJoL7bQzd6FW5D5BqAy0I5D8HpSI74SeE3AOsgP1QDvDm7sPSOQBB3O8Yx0G7hQhBwlJR7AAfi2AKyIcLnSskzy1v52q1tV4Abw8P9ObU7AfI+gFy34i3WVSAyVwlOPBlYXPzRSasjoO+URgCZAmB1Eov5Xyuq0X5v6UU7u5aAMjjYq62+KUAexNw45nLOWnr7MVdXq0cZHgkorntKo+JB5E7M3ZItJ19byLn0vF8HBQ4BRp7L9738Z3B1ohDS37570JOHAH2nNJP9sbZyNGfz5eWHjX+bAP8ExHyyc0rHSlGNNAbOPmCUSnqqnzKI1rjkurLXe6WegvYBtV2YFrLJvXGVU1svMpNfWHlUK0oAwgohws8pJOG0GCukXAorTgS4ZRcnSYylpZ6Gjgienll4Nc6w8Gun8CV+bU0Do52GbFjllYvctIdu9jB4m/V2SfT3RN2idofGRILJJAJZ25BqnFt2sUzCznqzJPoEy9R2cU2Iq0kEsrah4CN9t+hDWrdSlrecKYd2S631CU3fKe60y3//FRCoHANA04/Y6CAB16idkicQJ9NISCheSzOmJ2rjS53xzYLx7daxaFhDSN8uTMPUlj8ENP7SFHmxNocx89pZz6VGX9xDSONHHxGkycOj+lEbPX5rrO3GDjAbIcMUdFLtTkhKI2CKzO2kNQJuBDV2iH6wnWt8hgiC4LoKnyEUzjU9QwTYDIB1pdT7v3mG+A2gi1T1vZPSFwAAAABJRU5ErkJggg=="},"0970":function(e,t,n){"use strict";n("6d57"),n("cc57");var i=n("1834"),o=function(){var e="select ci.id,ci.name,ci.parent_id,ci.sort,ci.ifEnd,cig.remark from check_item ci left join check_item_guide cig on ci.id=cig.item_id";return i["a"].query(e)},r=function(e){var t="select remark from check_item_guide where item_id = ?",n=[e];return i["a"].queryOne(t,n).then((function(e){return e&&e.remark}))},a=function(e){var t="select item.full_name,guide.remark as guide           from check_item_guide guide               inner join check_item item on guide.item_id=item.id           where guide.item_id=?";return i["a"].queryOne(t,[e])},s=function(){var e="select item.id,item.name,item.parent_id,guide.id is not null as has_guide       from check_item item           left join check_item_guide guide on item.id=guide.item_id              and ifnull(guide.remark,'') <> ''       order by sort";return i["a"].query(e)},c={getCheckItemWithGuide:o,getGuideByCheckItemId:r,getCheckItemList:s,getGuideAndItemByItemId:a},l=n("a14a"),h=n.n(l),m=function(){var e={};return{getItem:function(t,n){if(void 0===t||null===t)throw new TypeError("key参数为空");return n?e[t]:h.a.cloneDeep(e[t])},setItem:function(t,n){if(void 0===t||null===t)throw new TypeError("key参数为空");if(arguments.length<2)throw new TypeError("value参数未设置");e[t]=n},clear:function(){e={}}}},d=m(),u={IS_NEED_DOWNLOAD_BASE_DATA:"is_need_download_base_data",LAST_EXEC_TIME_DATA:"last_exec_time_data",LAST_GUIDE_SORT_MAP:"last_guide_sort_map"},f=function(){var e=function e(t,n){t.remark&&""!=t.remark&&(t.has_guide=!0),t.children=[];for(var i=0;i<n.length;i++)n[i].parent_id==t.id&&t.children.push(n[i]);if(t.children&&t.children.length>0)for(var o=0;o<t.children.length;o++)t.children[o]=e(t.children[o],n);return t};return{getCheckItemGuideByItemId:function(e){return c.getGuideByCheckItemId(e)},getCheckItemTree:function(){var t={id:""};return c.getCheckItemWithGuide().then((function(n){t=e(t,n);for(var i=0;i<t.children.length;i++)if("所有检查项"==t.children[i].name)return t.children[i].children;return t.children}))},getCheckItemTreeAndGuideSortMap:function(){return console.time("getData"),c.getCheckItemList().then((function(e){console.timeEnd("getData"),console.time("processData");var t={},n=[],i=0,o=[];function r(e,t){e.forEach((function(e){e.depth=t,e.tree?r(e.tree,t+1):e.has_guide&&(e.guide_sort=i,n[i]=e.id,i++)}))}return e.forEach((function(e){t[e.id]=e})),e.forEach((function(e){e.parent_id&&t[e.parent_id]?(t[e.parent_id].tree=t[e.parent_id].tree||[],t[e.parent_id].tree.push(e)):o.push(e)})),r(o,1),d.setItem(u.LAST_GUIDE_SORT_MAP,n),console.timeEnd("processData"),{tree:o,guideSortMap:n}}))},getGuideSortMapFromCatch:function(){return d.getItem(u.LAST_GUIDE_SORT_MAP,!0)},getGuideAndItemByItemId:c.getGuideAndItemByItemId}};t["a"]=f()},"0a1d":function(e,t,n){"use strict";n("6d57");var i=n("16ca"),o=n("fd50"),r=n("c6e3"),a=n("a324"),s=n("0523"),c=function(){var e=function(e,t){for(var n=0;n<e.length;n++){var i=e[n],o=!1,r=0,a=!0;if("已交付"!=i.delivery_status){for(var s=0;s<t.length;s++){var c=t[s];c.batch_room_id.toLowerCase()==i.id.toLowerCase()&&(o=!0,["待派单","待指派","待整改"].indexOf(c.status)>-1&&(i.room_status="待整改",a=!1),"已整改"===c.status&&(a=!1,r=1),"已通过"!==c.status&&(a=!1))}a||i.room_status?"待整改"===i.room_status&&(i.has_repaired=r):i.room_status="已整改","交付中"!=i.delivery_status||"暂不收楼"===i.delivery_situation||o&&!a?("待交付"!=i.delivery_status||o&&!a)&&("交付中"!=i.delivery_status||"暂不收楼"!=i.delivery_situation||o&&!a)||(i.room_status="待交付"):i.room_status="已交付"}else i.room_status="已交付"}return e},t=function(t){var n=[r["a"].getUnitFloors(t),r["a"].getUnitRooms(t),a["a"].getProblemListByBatchUnitId(t)];return o["a"].all(n).then((function(n){var i=n[0],o=n[1],r=n[2];return e(o,r),s["a"].buildRoomListData(t,i,o)}))};return{getRoomListByBatchUnit:t}},l=c(),h=function(){var e=function(e,t){for(var n=0;n<e.length;n++){for(var i=e[n],o=!1,r=0,a=!0,s=0;s<t.length;s++){var c=t[s];c.batch_room_id.toLowerCase()==i.id.toLowerCase()&&(o=!0,["待派单","待指派","待整改"].indexOf(c.status)>-1&&(i.room_status="待整改",a=!1),"已整改"===c.status&&(a=!1,r=1),"已通过"!==c.status&&(a=!1))}if(a||i.room_status?"待整改"===i.room_status&&(i.has_repaired=r):i.room_status="已整改",o?a&&("已接待"===i.opening_status?i.room_status="已接待":i.room_status="待接待"):"已接待"===i.opening_status?i.room_status="已接待":i.room_status="待接待",!i.room_status)throw new Error("room_status 赋值为空."+i.id)}return e},t=function(t){var n=[r["a"].getUnitFloors(t),r["a"].getUnitRooms(t),a["a"].getProblemListByBatchUnitId(t)];return o["a"].all(n).then((function(n){var i=n[0],o=n[1],r=n[2];return o=e(o,r),s["a"].buildRoomListData(t,i,o)}))};return{getRoomListByBatchUnit:t}},m=h(),d=function(){var e={simulate:[{name:"全部",key:"all",dot:"",less:0},{name:"待检查",key:"待检查",dot:"white",less:0},{name:"待整改",key:"待整改",dot:"red",less:0},{name:"已整改",key:"已整改",dot:"blue",less:0},{name:"已通过",key:"已通过",dot:"green",less:0}],delivery:[{name:"全部",key:"all",dot:"",less:0},{name:"待交付",key:"待交付",dot:"white",less:0},{name:"待整改",key:"待整改",dot:"red",less:0},{name:"已整改",key:"已整改",dot:"blue",less:0},{name:"已交付",key:"已交付",dot:"green",less:0}],online_delivery:[{name:"全部",key:"all",dot:"",less:0},{name:"待交付",key:"待交付",dot:"white",less:0},{name:"待整改",key:"待整改",dot:"red",less:0},{name:"已整改",key:"已整改",dot:"blue",less:0},{name:"已交付",key:"已交付",dot:"green",less:0}],opening:[{name:"全部",key:"all",dot:"",less:0},{name:"待接待",key:"待接待",dot:"white",less:0},{name:"待整改",key:"待整改",dot:"red",less:0},{name:"已整改",key:"已整改",dot:"blue",less:0},{name:"已接待",key:"已接待",dot:"green",less:0}]},t={simulate:i["a"],delivery:l,opening:m,online_delivery:l},n={tabs:[],items:{},lastView:{},status_sel:"全部",status_counter:0,display_rooms:[]};return{model:n,init:function(e,t){return this.model.batchType=e,this.model.unitId=t,this.model.tabs=this.getTabs(e),this.getRoomList(e,t)},updateRoomList:function(){var e=this.model,t=e.batchType,n=e.unitId;this.init(t,n)},getTabs:function(t){return e[t]},tabsInit:function(){var e=this.model.items.unit_list[0].status_counter;this.model.tabs.forEach((function(t){t.less=e[t.key]||0}))},getRoomList:function(e,n){var i=this;return"special_checkitem"===e&&(e="simulate"),t[e]&&t[e].getRoomListByBatchUnit?t[e].getRoomListByBatchUnit(n).then((function(e){i.model.items=e,i.iniRoomData(),i.tabsInit()})):Promise.resolve()},iniRoomData:function(){this.model.items["unit_sel"]=this.model.items.unit_list[0].unit,this.roomStatusClass(),this.model.status_sel=this.model.lastView&&this.model.lastView.status||"全部",this.filterRoomList(),this.model.status_counter=this.model.items.unit_list[0].status_counter},filterRoomList:function(){for(var e=this.model.items.unit_list[0].floor_list,t=[],n=0;n<e.length;n++){for(var i=e[n].room_list,o=[],r=!1,a=0;a<i.length;a++)"全部"!=this.model.status_sel&&i[a].room_status!=this.model.status_sel||(o.push(i[a]),r=!0);r&&t.push({floor:e[n].floor,room_list:o})}this.model.display_rooms=t,console.log(this.model.display_rooms,"------------楼栋数据------------")},roomStatusClass:function(){for(var e=n.items.unit_list,t=0;t<e.length;t++)for(var i=e[t].floor_list,o=0;o<i.length;o++){var r=i[o].room_list;i[o]["floor_show"]=!0;for(var a=0;a<r.length;a++){switch(r[a]["room_show"]=!0,r[a].room_status){case"待检查":r[a]["room_status_class"]="white";break;case"待整改":r[a]["room_status_class"]="red",r[a].has_repaired&&(r[a]["room_status_class"]+=" problem-repaired");break;case"已整改":r[a]["room_status_class"]="blue";break;case"已通过":case"已接待":case"已交付":r[a]["room_status_class"]="green";break;default:r[a]["room_status_class"]="white";break}r[a]["room_info"]=JSON.stringify({building_name:r[a].building_name,unit:r[a].unit,floor:r[a].floor,room_no:r[a].room_no})}}}}};t["a"]=d()},"16ca":function(e,t,n){"use strict";var i=n("fd50"),o=n("c6e3"),r=n("a324"),a=n("0523"),s=n("07a4"),c=n("af4c"),l=function(e,t){for(var n=0;n<t.length;n++){var i=t[n];if(i.batch_room_id.toLowerCase()==e.toLowerCase())return!1}return!0},h=function(e,t){for(var n=0;n<e.length;n++){var i=e[n];if(0!=i.has_problem||0!=i.is_checked)if(l(i.id,t))e[n].room_status="已通过";else{for(var o=!0,r=0,a=0;a<t.length;a++){var s=t[a];if(i.id.toLowerCase()==s.batch_room_id.toLowerCase()){var c=["待派单","待指派","待整改"];c.indexOf(s.status)>-1&&(i.room_status="待整改",o=!1),"已整改"===s.status&&(o=!1,r=1)}}o?i.room_status="已通过":i.room_status?"待整改"===i.room_status&&(i.has_repaired=r):i.room_status="已整改"}else e[n].room_status="待检查"}return e},m=function(e){var t=[o["a"].getUnitFloors(e),o["a"].getUnitRooms(e),r["a"].getProblemListByBatchUnitId(e)];return i["a"].all(t).then((function(t){var n=t[0],i=t[1],o=t[2];return h(i,o),a["a"].buildRoomListData(e,n,i)}))};t["a"]={getRoomListByBatchUnit:m,updateCheckStatus:function(e){return o["a"].getRoomCheckStatus(e).then((function(e){e=e||{};var t=!e["is_checked"]||!e["check_date"]||!e["check_engineer"];return o["a"].updateCheckStatus(e,t)})).then((function(){"todo"===s["a"].state.app.global.currentMenuType&&c["a"].updateRoomList(!0)}))}}},2213:function(e,t,n){var i=n("e398");"string"===typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);var o=n("85cb").default;o("7b019942",i,!0,{})},2985:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAADIklEQVRYR82ZTUhUURTHf3fKUqKkD0r7wEVQEUVCH7oSggiskMASF0EQlBW2DHQRDLQw2irZuAiKIFIXFVhIC4kKgmqlVBYuAnO0JkSMcpj0xvXN0+eb92beffMm3lsNc+/5nx/3cM85916Bny8qI5RzEDiMYD+SnUA5sDotNw3EEQwjeQ8MEOctUTGn605oGdyVW5ihGTgDbNWyhVHgPsV0cFZ882rrDbBDrqeI68A5YKVXcZd5SeAOKa7RLH7m0soN2CUbkbQDG3KJaY4niNDMefEwm507YFQuZzPtSC5qOtabLrjNGFeIir9Ohs6A3bKESXqA43refM/uYy2naRB/7AqZgGrlynn0H+FMpj7inLSvZCZgl+wseFjdFlqF+4K4ZB1eCmhsiAe+AxWEYYRG68ZZBDRSyacC7FZd7AQpdpkpaBEwJm8BS5ZXVznA+Z00ictKzwA0KsRIAEnYE+OaIrhZBXvXQewj3PuSYZakmO2q4hiAMdkGtHhSz3NS6QroPwZVGw2hWQm7u+HzVIbwDZpEq8Ao/F991FZtVDucKVDzBF6OZ8iNEqdCEJNVwBttb5oGbnADY3CkD+ako2C1AlShVSEu2OcG92ocap/Br5Sr61YF2AvUu03Ztgq+z0By1h9/HnBqC/cqwEFgj919RMDjo3CiAiZ+Q/1zeD2hB5kXnOFqSAH+cErONWXwom4RaDoFtU+9QwYAp5wnFOCMU/7bUQofGmCZpRh6hQwITgEmXQHV6NV9RkK1frkgA4RbAHQMsQnVUglth7xBBgy3EGLHTWJF8gJZADiFMCjokj1ITuXan9kghyaXli9Ty0Oey+42nWY8J2o3yJEpqLQdqfKGM9DnE7VWqXOCtC9DQHBKttpXs5ANMkC4dLOgOH20W06QAcIpqnS7pX76bFhVnlQpSCVz1ZXU9Wct/Ln2oXXc1rAaq+ir5VcVZ1OJUQJdWiYdMHOureVXf4f+0KQgQ33sNBc31Ad3BRn6qw8FGerLIzPUob5+syaG0F5gWiFDfQVsBQ3tJbq9FlifIeAAzD9DlNmeIdRdwTDwLp9niH+Lfm97gO/iCQAAAABJRU5ErkJggg=="},"2fa5":function(e,t,n){"use strict";n("163d");var i=n("a740"),o=n("0938"),r=n("c2c1"),a=n("8ae6"),s=n("265f"),c={name:"TakePhoto",model:{event:"change"},props:{imageList:{type:Array,default:function(){return[]}},batchUnitId:{type:String,default:o["a"].uuid()},batchRoomId:{type:String,default:o["a"].uuid()},folder:{type:String,default:""},disabled:{type:Boolean,default:!1},flag:{type:Boolean,default:!1},hasLog:{type:Boolean,default:!1},imgType:{type:String,default:"problem"},imgLimit:{type:Number,default:3}},data:function(){return{isCanSelectFromAlbum:!1}},created:function(){"on"==s["a"].getAlbumSetting()?this.isCanSelectFromAlbum=!0:this.isCanSelectFromAlbum=!1},methods:{getWatermarkText:function(){var e=Object(i["j"])().user_name,t=o["a"].getNowDate();return e+" "+t+" 拍摄"},showLargeImg:function(e){var t=this.imageList.map((function(e){return e.img_local_fullpath||e.localFullPath?e.img_local_fullpath?e.img_local_fullpath:e.localFullPath:e.fullPath}));r["a"].openImageBrowser(t,e)},removeImg:function(e){this.imageList.splice(e,1),this.$emit("reset",this.imageList)},takePhoto:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(!this.disabled)if(this.imageList.length>3)this.$toast("最多只能上传3张图片");else{var n={withGraffiti:!0,text:this.getWatermarkText()};t&&"fromAlbum"==t&&(n.fromAlbum="fromAlbum");var i={};this.folder&&this.folder.length?i.folder=this.folder:(i.folder=this.batchUnitId+"/"+this.batchRoomId,i.imageId=o["a"].uuid()),i.type=this.imgType;var s=a["a"].getNewProblemImagePath(i);if(this.folder&&this.folder.length){var c=o["a"].uuid()+".jpg";s.full_path+=c,s.save_path+=c}r["a"].takePhoto(s.full_path,n).then((function(){e.$emit("change",s)}),(function(e){e.notAllow}))}}}},l=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{attrs:{flag:e.flag}},[i("section",{staticClass:"photo"},[e._t("default"),e._v(" "),e._l(e.imageList,(function(t,o){return i("div",{key:o,staticClass:"img-wrapper"},[i("img",{attrs:{src:t.img_view_path||t.viewPath,alt:"problem-photo"},on:{click:function(t){return e.showLargeImg(o)}}}),e._v(" "),t.needDownload&&t._srcPath&&t._srcPath.includes("img_blank.png")?i("a",{staticClass:"downloadTip"},[e._v("点击下载")]):e._e(),e._v(" "),e.hasLog?e._e():i("img",{staticClass:"delete",attrs:{src:n("06e1"),alt:"delete"},on:{click:function(t){return e.removeImg(o)}}})])})),e._v(" "),i("img",{directives:[{name:"show",rawName:"v-show",value:!e.hasLog&&e.imageList&&e.imageList.length<e.imgLimit,expression:"!hasLog && imageList && imageList.length < imgLimit"}],attrs:{src:n("f4b5"),alt:"take-photo"},on:{click:e.takePhoto}}),e._v(" "),i("img",{directives:[{name:"show",rawName:"v-show",value:e.isCanSelectFromAlbum&&!e.hasLog&&e.imageList&&e.imageList.length<e.imgLimit,expression:"isCanSelectFromAlbum && !hasLog && imageList && imageList.length < imgLimit"}],attrs:{src:n("d807"),alt:"take-photo-fromAlbum"},on:{click:function(t){return e.takePhoto("fromAlbum")}}})],2)])},h=[],m=n("d082");function d(e){n("2213")}var u=!1,f=d,p="data-v-46bc9c5b",A=null,g=Object(m["a"])(c,l,h,u,f,p,A);t["a"]=g.exports},"315d":function(e,t,n){var i=n("5916");"string"===typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);var o=n("85cb").default;o("73e61b62",i,!0,{})},4438:function(e,t,n){"use strict";var i=n("cb6b"),o=n("0e1c");t["a"]={getLocalBusinessToggle:function(){var e=i["a"].getObject(o["a"].BUSINESS_TOGGLE,i["a"].level.user);return e||{enable_opening_tab:0,enable_pass_when_add:0,enable_pass_when_to_repair:0,sign_when_receive_delivery:1,special_project_switch:0,take_photo_when_review:0,take_photo_when_regist:0,hide_owner_phone:0,enable_problem_reason:0}}}},5916:function(e,t,n){var i=n("5454");t=e.exports=n("690e")(!1),t.push([e.i,"\n.zhkf .batch-add-problem[data-v-0c2b099c] {\n  height: 100%;\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-orient: vertical;\n  -webkit-box-direction: normal;\n      -ms-flex-direction: column;\n          flex-direction: column;\n}\n.zhkf .batch-add-problem .space-between[data-v-0c2b099c] {\n    -webkit-box-pack: justify;\n        -ms-flex-pack: justify;\n            justify-content: space-between;\n}\n.zhkf .batch-add-problem[data-v-0c2b099c] .van-cell .van-cell__title {\n    -ms-flex-negative: 0;\n        flex-shrink: 0;\n    padding-right: 20px;\n    white-space: nowrap;\n    -ms-flex-item-align: center;\n        align-self: center;\n}\n.zhkf .batch-add-problem[data-v-0c2b099c] .van-cell__title {\n    color: #000;\n    -webkit-box-flex: initial;\n        -ms-flex: initial;\n            flex: initial;\n}\n.zhkf .batch-add-problem[data-v-0c2b099c] .van-cell__value {\n    font-size: 14px;\n    color: #202020;\n    -webkit-box-flex: 1;\n        -ms-flex: 1;\n            flex: 1;\n    -ms-flex-item-align: center;\n        align-self: center;\n}\n.zhkf .batch-add-problem[data-v-0c2b099c] .van-cell__right-icon {\n    -ms-flex-item-align: center;\n        align-self: center;\n}\n.zhkf .batch-add-problem[data-v-0c2b099c] .gray {\n    color: #a0a0a0;\n}\n.zhkf .batch-add-problem[data-v-0c2b099c] .van-hairline--surround::after {\n    border-width: 2px;\n}\n.zhkf .batch-add-problem .van-tag[data-v-0c2b099c] {\n    height: auto;\n    font-size: 14px;\n    padding: 0.2em 0.5em;\n    line-height: normal;\n    border-radius: 0.2em;\n    display: inline-block;\n}\n.zhkf .batch-add-problem .scroll-container[data-v-0c2b099c] {\n    -webkit-box-flex: 1;\n        -ms-flex: 1;\n            flex: 1;\n    overflow: scroll;\n}\n.zhkf .batch-add-problem .cells[data-v-0c2b099c] {\n    margin-bottom: 8px;\n}\n.zhkf .batch-add-problem .photo[data-v-0c2b099c] {\n    padding: 15px;\n    background: #fff;\n}\n.zhkf .batch-add-problem .photo .img-wrapper[data-v-0c2b099c] {\n      display: inline-block;\n      position: relative;\n}\n.zhkf .batch-add-problem .photo img[data-v-0c2b099c] {\n      display: inline-block;\n      width: 60px;\n      height: 60px;\n      margin-right: 20px;\n}\n.zhkf .batch-add-problem .photo .delete[data-v-0c2b099c] {\n      position: absolute;\n      right: -10px;\n      top: -10px;\n      width: 20px;\n      height: 20px;\n}\n.zhkf .batch-add-problem .problem[data-v-0c2b099c] {\n    padding: 10px 15px;\n    background: #fff;\n}\n.zhkf .batch-add-problem .problem .problem-desc[data-v-0c2b099c] {\n      font-size: 15px;\n      margin-top: 4px;\n}\n.zhkf .batch-add-problem .problem .problem-content[data-v-0c2b099c] {\n      margin-left: 60px;\n}\n.zhkf .batch-add-problem .problem .problem-item[data-v-0c2b099c] {\n      display: inline-block;\n      margin-left: 10px;\n      margin-bottom: 10px;\n      min-width: 60px;\n      height: 30px;\n      line-height: 30px;\n      border: 1px solid #d2d2d7;\n      border-radius: 2px;\n      text-align: center;\n      padding: 0 4px;\n      font-size: 13px;\n      color: #a0a0a0;\n}\n.zhkf .batch-add-problem .icon-duoxuan-weixuanzhuangtai[data-v-0c2b099c] {\n    color: #bbb;\n    font-size: 20px;\n}\n.zhkf .batch-add-problem .icon-xuanzhong[data-v-0c2b099c] {\n    color: #0085ff;\n    font-size: 20px;\n}\n.zhkf .batch-add-problem .degree-item[data-v-0c2b099c] {\n    width: 60px;\n    height: 30px;\n    border-radius: 2px;\n    border: 1px solid #d2d2d7;\n    line-height: 30px;\n    text-align: center;\n    font-size: 13px;\n    margin-left: 10px;\n    float: right;\n}\n.zhkf .batch-add-problem .problem .problem-item__active[data-v-0c2b099c],\n  .zhkf .batch-add-problem .degree-item__active[data-v-0c2b099c] {\n    position: relative;\n    color: #0085ff;\n    border: 1px solid #0085ff;\n}\n.zhkf .batch-add-problem .problem .problem-item__active[data-v-0c2b099c]:after,\n    .zhkf .batch-add-problem .degree-item__active[data-v-0c2b099c]:after {\n      content: '';\n      position: absolute;\n      top: -1px;\n      right: -1px;\n      background: url("+i(n("9e55"))+") no-repeat;\n      background-size: contain;\n      width: 17px;\n      height: 17px;\n}\n.zhkf .batch-add-problem .btn[data-v-0c2b099c] {\n    height: 45px;\n    line-height: 45px;\n    color: #fff;\n    text-align: center;\n    font-size: 15px;\n    background: #0085ff;\n}\n",""])},"5c1b":function(e,t,n){"use strict";n("f0e6");var i=n("bbed"),o=n("fa1b"),r=n("07a4"),a=n("fd50");function s(){var e=function(e){e&&e.fitment_standard&&("毛坯"===e.fitment_standard?e.is_for_rough=1:"精装"===e.fitment_standard&&(e.is_for_decorated=1),delete e.fitment_standard)},t=function(e,t,n,o,r){return i["a"].getCheckItemLeaf(e,t,o,r).then((function(e){if(_.isEmpty(e))return[];var t=[];return _.each(e,(function(e){t.push(e.id)})),i["a"].getCheckItemAll(t.join("','"),n,o,r)}))};return{getCheckItemList:function(e,n,o,s,c){var l="毛坯"==s,h=a["a"].when(),m=["全部"];return m.push(1==c?"公区":"房间"),m="('"+m.join("','")+"')",h=r["a"].state.app.global.isUseProjectItem?i["a"].getProjectCheckItemList(e,n,o,l,m):t(e,n,o,l,m),h.then((function(e){return e}))},hasProjectCheckitem:function(e){return i["a"].hasProjectCheckitem(e)},searchCheckItemWithProject:function(t,n,o,r){return e(o),r?i["a"].searchProjectCheckItem(r,t,n,o):i["a"].searchCheckItem(t,n,o)},searchCheckItem:function(t,n,o,r){return console.log("searchCheckItem: ",t,n,o),console.time("searchCheckItem"),e(o),i["a"].hasProjectCheckitem(r).then((function(e){return e?i["a"].searchProjectCheckItem(r,t,n,o):i["a"].searchCheckItem(t,n,o).finally((function(){console.timeEnd("searchCheckItem")}))}))},getHigherLevelTreeListByCheckItemId:function(t,n,o){return console.log("getHigherLevelTree: ",t,n,o),console.time("getHigherLevelTree"),e(o),i["a"].getHigherLevelTreeListByCheckItemId(t,n,o).finally((function(){console.timeEnd("getHigherLevelTree")}))},getCheckItemLevel:function(e,t){return i["a"].getCheckItemLevel(e,t)},getPositionItemByRoom:function(e,t,n){var o=a["a"].when(),s=["全部"];return s.push(1==n?"公区":"房间"),s="('"+s.join("','")+"')",o=r["a"].state.app.global.isUseProjectItem?i["a"].getProjectPositionItemByRoom(e,t,s):i["a"].getPositionItemByRoom(e,s),o.then((function(e){return e}))},setIsUseProjectItemOfBatchUnit:function(e){return i["a"].getProjectItemOfBatchUnit(e).then((function(e){var t=!1;e&&(t=!0),r["a"].commit("app/APP",{isUseProjectItem:t})}))},getBatchCheckItem:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return o["a"].getCheckItemList(e,t,n,r["a"].state.app.global.isUseProjectItem).then((function(e){return console.log("BatchCheckItem",e),a["a"].resolve(e)}))}}}t["a"]=s()},"77a8":function(e,t,n){"use strict";n("6d57");function i(){var e={list:[]};return{model:e,init:function(){e.list=[{key:"status",value:"常用状态",name:"常用状态",displayName:"所有状态",list:[{name:"常用状态",value:"常用状态"},{name:"所有状态",value:""}]},{key:"position",value:"",name:"全部",displayName:"部位",list:[]},{key:"checkItem",value:"",name:"全部",displayName:"检查项",list:[]}]},update:function(t){e.list.forEach((function(e){t[e.key]&&(e.list=t[e.key])}))},getCondition:function(){var t={};return e.list.forEach((function(e){t[e.key]=e.value})),t},resetCheckItemValue:function(){e.list.forEach((function(e){"checkItem"===e.key&&(e.value="",e.name="全部")}))}}}t["a"]=i()},"85cd":function(e,t,n){"use strict";var i=n("1834"),o=n("0938"),r="checkitem_remark_history",a={createCondition:function(e,t){if(_.isEmpty(e))return"";t=t?"crh.":"";var n=[];return _.each(e,(function(e,i){n.push(t+i+"="+e)})),n=n.join(" and "),n},insertHistory:function(e){e.id=o["a"].uuid(),e.used_time=e.used_time||1,e.last_used_time=e.last_used_time||o["a"].getNowDate();var t=[],n=[];return _.each(e,(function(e,i){t.push(i),n.push(e)})),i["a"].insert(r,t,n).then((function(){return e.id}))},updateHistory:function(e,t){return i["a"].update(r,e,t)},getOneHistory:function(e,t,n){var o="select * from "+r+" where item_id=? and desc_id=? and remark=?";return i["a"].queryOne(o,[e,t,n])},updateUserdTime:function(e,t){if(!t)return $q.error("次数不能为0");var n={last_used_time:o["a"].getNowDate(),used_time:t};return i["a"].update(r,n,{id:e})},getListByItemIdOrderDate:function(e,t){var n="select crh.id, crh.desc_id, crh.remark, cid.name as desc_name from checkitem_remark_history crh inner join check_item_desc cid on cid.id = crh.desc_id and cid.check_item_id = crh.item_id where crh.item_id = ?  order by crh.last_used_time desc limit "+t;return i["a"].query(n,[e])},getListByItemIdOrderUsedTime:function(e,t,n){var o=n.length?'and crh.id not in ("'+n.join('","')+'")':"",r="select crh.id, crh.desc_id, crh.remark, cid.name as desc_name from checkitem_remark_history crh inner join check_item_desc cid on cid.id = crh.desc_id and cid.check_item_id = crh.item_id where crh.item_id = ? "+o+" order by crh.used_time desc limit "+t;return i["a"].query(r,[e])},deleteItemById:function(e){var t="delete from checkitem_remark_history where id=?";return i["a"].query(t,[e])},searchByItems:function(e,t){var n="select crh.id,crh.remark as name,crh.item_id,ci.name as item_name,ci.full_name as item_full_name,crh.desc_id,cid.name as desc_name from checkitem_remark_history crh inner join check_item ci on ci.id = crh.item_id inner join check_item_desc cid on cid.id = crh.desc_id and cid.check_item_id = crh.item_id where crh.item_id in ("+t+') and (lower(crh.remark) like "%" || ? || "%" or upper(crh.remark) like "%" || ? || "%") order by crh.remark';return i["a"].query(n,[e,e])}},s=a,c={getList:function(e){if(!e)return $q.reject("itemId为空");var t=[];return s.getListByItemIdOrderDate(e,3).then((function(n){if(n){var i=[];return _.each(n,(function(e){i.push(e.id),t.push({id:e.id,name:e.desc_name+"："+e.remark,descId:e.desc_id,remark:e.remark,descName:e.desc_name})})),s.getListByItemIdOrderUsedTime(e,17,i).then((function(e){return e&&_.each(e,(function(e){t.push({id:e.id,name:e.desc_name+"："+e.remark,descId:e.desc_id,remark:e.remark,descName:e.desc_name})})),t}))}return $q.reject(t)}))},deleteItem:function(e){return s.deleteItemById(e)},upsertHistory:function(e,t,n){return s.getOneHistory(e,t,n).then((function(i){return i?s.updateUserdTime(i.id,i.used_time+1):s.insertHistory({item_id:e,desc_id:t,remark:n})}))},searchByItems:function(e,t){return s.searchByItems(e,t)}};t["a"]=c},"882e":function(e,t,n){"use strict";n("cc57"),n("6d57");var i=n("fd50"),o=n("07a4"),r=n("bad1"),a=n("5c1b"),s=n("dd0a"),c=n("b643"),l=n("964e"),h=n("0938"),m=n("3fa2"),d=n("a593"),u=n("a14a"),f=n.n(u),p=n("bbed");function A(){var e={problem:{}},t=null,n="";function u(){if(t=null,e.positionItems={},e.cacheIntersectItems=[],e.diagramUrl="",e.allPositions=[],e.problemReasons=[],e.fitmentStandard=m["a"].room.fitmentStandard||"毛坯",e.points=[],e.checkItems=[],e.checkItemTree=null,e.checkItemMap=null,e.problem={},e.problem.batchRoomId="",e.problem.positions=[],e.problem.selectedItem=null,e.problem.selectedDesc=null,e.problem.problemImages=[],e.problem.remark="",e.problem.isPassedWhenAdd=0,e.problem.emergencyDegree="一般",e.problem.contractor=null,e.problem.responsibleCompany=null,e.problem.topItemId="",o["a"].state.app.global.enableProblemReason)return c["a"].getReasonConfig().then((function(t){e.problemReasons=e.problemReasons.concat(t)}))}function A(e,t){var n=[];return e.forEach((function(e){for(var i=t.length,o=0;o<i;o++)if(e.item_id===t[o].item_id){n.push(e);break}})),n}return{model:e,setRoomPosition:function(t){var i=d["default"].prototype.$toast.loading({duration:0,forbidClick:!0,loadingType:"spinner",message:"户型图加载中"});u(),e.roomTitle=t.roomTitle,e.diagramUrl=t.diagramUrl,e.allPositions=t.position,e.problem.batchUnitId=t.unitId,e.problem.batchRoomId=n=t.roomId,this.getPositionItem().then((function(){setTimeout((function(){i.clear(),console.log("关闭---------------")}),200)})).catch((function(e){return console.log(e)}))},getPositionItem:function(){return a["a"].getPositionItemByRoom(n,m["a"].room.projectId,m["a"].room.isVirtual).then((function(t){t.forEach((function(t){e.positionItems[t.position_id]||(e.positionItems[t.position_id]=[]),h["a"].getObjectFromArrayByProperty(e.positionItems[t.position_id],"item_id",t.item_id,!1)||e.positionItems[t.position_id].push({item_id:t.item_id,item_name:t.item_name,parent_item_id:t.parent_item_id,level:t.level})}))}))},checkPositionItem:function(t){if(!t)return null;e.problem.selectedItem=null;var n=e.positionItems[t];if(!n||!n.length)return!1;if(!e.cacheIntersectItems.length)return e.cacheIntersectItems.push(n),e.checkItems=n,e.checkItemTree=null,!0;var i=A(n,e.checkItems);return!(!i.length||!this.hasEndItem(i,t))&&(e.cacheIntersectItems.push(i),e.checkItems=i,e.checkItemTree=null,!0)},hasEndItem:function(t,n){for(var i=0;i<t.length;i++){for(var o=e.positionItems&&e.positionItems[n],r=o&&o.length,a=!0,s=0;s<r;s++)if(o[s].parent_item_id===t[i].item_id){a=!1;break}if(!0===a)return!0}return!1},getIntersectCheckItem:function(t,n,i){var o=[];if(t)for(var r=0;r<e.checkItems.length;r++)e.checkItems[r].parent_item_id===t&&o.push(e.checkItems[r]);else for(var a=0;a<e.checkItems.length;a++)1===e.checkItems[a].level&&o.push(e.checkItems[a]);return o.slice(n*i,(n+1)*i)},cancelPoint:function(){var t=e.cacheIntersectItems.length;t&&(e.cacheIntersectItems.pop(),e.checkItems=e.cacheIntersectItems[t-2]||[],e.problem.selectedItem=null,e.checkItemTree=null)},createRoomPosition:function(){var t={},n=[],i=e.allPositions,o=[];return e.points.forEach((function(e){var r=e.positionId,a={x:e.coordinate.x,y:e.coordinate.y,diagramId:e.diagramId},s=i.length,c=0;if(t[r])return t[r].points.push(a);for(;c<s;c++)if(r===i[c].id)return t[r]={positionId:r,positionName:"",points:[a]},o.push(r),n.push(t[r])})),e.problem.positions=n,this.setPositionName(o)},setPositionName:function(t){return t&&t.length?r["a"].getPositionByIds("'"+t.join("','")+"'").then((function(t){t&&t.length&&e.problem.positions.forEach((function(e){for(var n=t.length,i=0;i<n;i++)if(t[i].id===e.positionId){e.positionName=t[i].name;break}}))})):i["a"].resolve()},createCheckItemTree:function(){var t,n=[],i={};e.checkItems.forEach((function(e){var t,o=e.item_id,r=e.level>1?e.parent_item_id:"",a=f.a.assign({},e);return o in i?a=f.a.assign(i[o],a):i[o]=a,r?r in i?(t=i[r],void(t.children?t.children.push(a):t.children=[a])):(i[r]={item_id:r,children:[a]},i[r]):n.push(a)})),function e(n,i){n.forEach((function(t){t.item_full_name=i?i+"-"+t.item_name:t.item_name,t.children&&e(t.children,t.item_full_name)})),null!==t&&(t=1===n.length?n[0]:null)}(n),e.checkItemTree=n,e.checkItemMap=i,e.selectedItem=t},update:function(t){f.a.assign(e,t)},save:function(){t={points:e.points.slice(0),positions:e.problem.positions.slice(0),checkItems:e.checkItems.slice(0),cacheIntersectItems:e.cacheIntersectItems.slice(0)}},restore:function(){t&&(e.points=t.points,e.problem.positions=t.positions,e.checkItems=t.checkItems,e.cacheIntersectItems=t.cacheIntersectItems,t=null)},clearStore:function(){t=null},clear:function(){return u()},updateRemark:function(t){e.problem.remark=t},updateCheckItem:function(t){e.problem.selectedItem=t,e.problem.selectedDesc=null,e.problem.contractor=null,e.problem.responsibleCompany=null,e.problem.topItemId=function t(n){return n.parent_item_id&&n.level>1?t(e.checkItemMap[n.parent_item_id]):n.item_id}(t)},updateDesc:function(t){d["default"].prototype.$set(e.problem,"selectedDesc",t),e.problem.contractor=null,s["a"].getContractor(n,e.problem.selectedItem.item_id,e.problem.selectedDesc.map((function(e){return e.id})).join(";")).then((function(t){"length"in t||(t=[t]),e.problem.contractor=t,e.problem.responsibleCompany=t,d["default"].prototype.$eventBus.$emit("app.batchAddProblem:updateContractor")}))},submit:function(){var t=[],o=e.problem.problemImages.map((function(e){return{img_localpath:e.img_local_path}})),r=e.problem.selectedDesc.map((function(e){return e.id})).join(";"),a=e.problem.contractor.map((function(e){return e.contractor_id})).join(";"),s=e.problem.responsibleCompany.map((function(e){return e.contractor_id})).join(";"),c=0,h=[];e.problemReasons.forEach((function(e){e.selected&&h.push(e.id)}));for(var u=0;u<e.problem.positions.length;u++)for(var f=e.problem.positions[u],A=0;A<f.points.length;A++){var g=l["a"].batchAddProblem({problem_images:o,batch_room_id:n,position_id:f.positionId,item_id:e.problem.selectedItem.item_id,top_item_id:e.problem.topItemId,desc_id:r,contractor_id:a,responsible_company_id:s,roomtype_diagram_id:f.points[A].diagramId,coordinate:[{x:f.points[A].x,y:f.points[A].y}],emergency_degree:e.problem.emergencyDegree,remark:e.problem.remark,is_passed_when_add:e.problem.isPassedWhenAdd?1:0},!1,"",h);t.push(g),c++}return i["a"].all(t).then((function(){return p["a"].updateCheckItemUseTimes(e.problem.selectedItem.item_id,c)})).then((function(){return p["a"].updateItemDescUseTimes(r,c)})).then((function(){m["a"].room.hasProblem=!0,d["default"].prototype.$eventBus.$emit("app.roomdetail:statusChange")}))}}}t["a"]=A()},"98a4":function(e,t,n){"use strict";n("e697");var i=n("85cd"),o=n("fd50"),r=n("a593"),a={model:{},init:function(){a.model.historyList={},a.model.currItemId="",a.model.currList=[]},loadList:function(e,t){return e?(_.isEmpty(a.model)&&a.init(),t=t||!1,a.model.currItemId=e,_.isEmpty(a.model.historyList[e])||t?(console.log("=== itemId ===",e),i["a"].getList(e).then((function(t){console.log(t),a.model.historyList[e]=t,a.model.currList=t})).catch((function(){a.model.historyList[e]=[],a.model.currList=[]}))):(a.model.currList=a.model.historyList[e],o["a"].resolve())):o["a"].reject()},upsertHistory:function(e,t,n){return i["a"].upsertHistory(e,t,n).then((function(){a.loadList(e,!0)}))},delHistory:function(e){return i["a"].deleteItem(e).then((function(){var t=_.find(a.model.currList,{id:e});if(t){var n=a.model.currList.indexOf(t);n>-1&&a.model.currList.splice(n,1)}})).catch((function(e){console.error(e),r["default"].prototype.$toast("删除历史失败！")}))}};t["a"]=a},a9ec:function(e,t,n){"use strict";n("6d57");var i=n("a593"),o=n("3fa2"),r=n("d485"),a=n("9af1"),s=n("77a8");function c(){var e={},t={problemList:[],buttons:[]},n={},c="tab-icon1",l={"待派单":"tab-icon5","待整改":"tab-icon2","已整改":"tab-icon3","已通过":"tab-icon4","已作废":"tab-icon6","非正常关闭":"tab-icon7"},h=o["a"].room;return n.iniStatusStyle=function(){t.problemList.forEach((function(e){l[e.status]?e.status_style=l[e.status]:e.status_style=c}))},n.initFilter=function(){return r["a"].getPositionList(h.batchRoomId).then((function(e){t.filterList.position.list=e}))},n.getCondition=function(){var e={};_.each(t.filterList,(function(t,n){e[n]=t.value}))},n.getProblemPoints=function(){i["default"].prototype.$eventBus.$emit("app.roomdetail:updateProblemPoints",t.problemList)},e={model:t,init:function(){return r["a"].getProblemList(h.batchRoomId,0,1,!0).then((function(e){t.problemList=e,n.iniStatusStyle()})).then((function(){return console.log("fromType------",h.fromType),a["a"].getDefaultFilterList(t.problemList,h.batchRoomId,h.fromType).then((function(e){s["a"].update(e),console.log("filters---------",e),n.getProblemPoints()}))})).then((function(){if(!_.isEmpty(s["a"].model.list))return e.updateProblemList()}))},updateProblemList:function(e){var i=s["a"].getCondition();a["a"].hideProblemByFilter(t.problemList,s["a"].model.list,i,e),n.getProblemPoints()}},e}t["a"]=c()},b643:function(e,t,n){"use strict";var i=n("7ee1");t["a"]={getReasonConfig:function(){return i["a"].getList()},getProblemReason:function(e){return i["a"].getProblemReason(e)}}},bad1:function(e,t,n){"use strict";var i=n("97ba");t["a"]={getPositionList:function(e){return console.log("batchRoomId",e),i["a"].getPositionList(e).then((function(e){return e}))},getPositionByIds:function(e){return i["a"].getPositionByIds(e)},getPositionNameById:function(e){return i["a"].getPositionNameById(e)}}},d807:function(e,t){e.exports="data:image/png;base64,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"},df9e:function(e,t,n){"use strict";n.r(t);n("5ab2"),n("6d57"),n("e44b"),n("e10e"),n("f0e6"),n("f548");var i=n("28f8"),o=(n("cc57"),n("bdbb")),r=n("882e"),a=n("f2de"),s=n("8ae6"),c=n("4438"),l=n("98a4"),h=n("a9ec"),m=n("0970"),d=n("0a1d"),u=n("2fa5");function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){Object(i["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var A=!1,g=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];n.length>0?console.log("[views]/batch-add-problem.vue：",e,n):console.log("[views]/batch-add-problem.vue：",e)},b={name:"BatchAddProblem",components:{textBox:o["a"],TakePhoto:u["a"]},filters:{format:function(e){return e&&e[0].name?e.map((function(e){return e.name})).join("; "):"请选择问题描述（必填）"}},data:function(){return{title:"批量登记问题",flag:!0,disableAddProblem:!1,model:{problem:{}},fromType:"",selectCheckitemParams:{},positionName:"",selectedDescName:"",enablePassWhenAdd:!1,showCheckItemGuide:!1,checkItemGuideText:"",frog:!0,responsibleCompany:"",contractor:"",contractorDisabled:!1}},computed:p({},Object(a["e"])({currentBatchType:function(e){return e.app.global.currentBatchType},currentMenuType:function(e){return e.app.global.currentMenuType},enableProblemReason:function(e){return e.app.global.enableProblemReason}})),watch:{},created:function(){var e=this;this.$eventBus.$on("app.batchAddProblem:updateContractor",(function(){e.updateContractorAndResponsibleCompany(),g("eventBus(updateContractor)")}))},activated:function(){A=!1,this.initData()},destroyed:function(){this.$eventBus.$off("app.batchAddProblem:updateContractor")},methods:{initData:function(){var e=this;this.model=r["a"].model,this.frog=!this.frog,this.fromType="simulate",this.selectCheckitemParams={level:1,fromType:this.fromType,fromPage:"批量登记问题",fitment_standard:this.model.fitmentStandard},this.updateContractorAndResponsibleCompany(),this.enablePassWhenAdd=1==c["a"].getLocalBusinessToggle().enable_pass_when_add,this.positionName=this.model.problem.positions&&this.model.problem.positions.map((function(e){return e.positionName})).join("; "),console.log("恢复数据====",this.positionName),this.selectedDescName=this.model.problem.selectedDesc&&this.model.problem.selectedDesc.map((function(e){return e.name})).join("; "),console.log(this.selectedDescName),this.model.problem.selectedItem&&m["a"].getCheckItemGuideByItemId(this.model.problem.selectedItem.item_id).then((function(t){console.log("检查指引",t),e.checkItemGuideText=t,e.showCheckItemGuide=!!t})).catch((function(e){return console.log(e)}))},updateContractorAndResponsibleCompany:function(){this.contractor="",this.responsibleCompany="",this.contractorDisabled=!1,this.model&&this.model.problem&&(this.model.problem.contractor&&(this.contractor=this.model.problem.contractor.map((function(e){return e.contractor_name})).join("；"),this.contractorDisabled=this.model.problem.contractor.length>1),this.model.problem.responsibleCompany&&(this.responsibleCompany=this.model.problem.responsibleCompany.map((function(e){return e.contractor_name})).join("；")))},goBatchSelectPosition:function(){r["a"].save(),this.$router.replace({path:"/checkroom/".concat(this.currentMenuType||this.currentBatchType,"-batch-select-position"),query:{fromView:"addBatchProblem"}})},goSelectCheckitem:function(){console.log("选择检查项"),this.$router.push({path:"/checkroom/".concat(this.currentMenuType||this.currentBatchType,"-batch-select-checkitem/").concat((new Date).getTime())})},goSelectDesc:function(){if(!this.model.problem.selectedItem)return this.$toast("请先选择检查项");this.$router.push({path:"/checkroom/".concat(this.currentMenuType||this.currentBatchType,"-batch-select-desc"),query:{params:JSON.stringify(this.selectCheckitemParams),level:1}})},selectReason:function(e,t){this.$set(e,"selected",!e.selected)},switchIsPassedWhenAdd:function(){this.model.problem.isPassedWhenAdd=!this.model.problem.isPassedWhenAdd,this.frog=!this.frog,console.log(this.model.problem.isPassedWhenAdd)},updateProblemImages:function(e){var t=this.model.problem.problemImages;t.push({img_local_path:e.save_path,img_local_fullpath:e.full_path,img_view_path:e.view_path?e.view_path:s["a"].getImageWebViewPath(e.full_path)}),this.flag=!this.flag},resetProblemImages:function(e){this.model.problem.problemImages=e,this.flag=!this.flag},updateEmergencyDegree:function(e){console.log(e),this.$set(this.model.problem,"emergencyDegree",e),this.frog=!this.frog},openGuide:function(){this.$dialog.alert({title:this.model.problem.checkItemName||"检查项指引",message:this.checkItemGuideText,confirmButtonText:"我知道了"})},updateRemark:function(e){this.model.problem.remark=e},selectContractor:function(){return!(this.model.problem.selectedItem&&this.model.problem.selectedItem.length>1)&&(this.model.problem.selectedItem?void this.$router.push({path:"/checkroom/".concat(this.currentMenuType||this.currentBatchType,"-batch-select-contractor"),query:{actionType:"contractor"}}):this.$toast("请先选择检查项"))},selectResponsibleCompany:function(){if(!this.model.problem.selectedItem)return this.$toast("请先选择检查项");this.$router.push({path:"/checkroom/".concat(this.currentMenuType||this.currentBatchType,"-batch-select-responsible"),query:{actionType:"responsibleCompany"}})},addProblem:function(){var e=this;if(!A&&!this.disableAddProblem){var t="";if(this.model.problem.selectedItem?this.model.problem.selectedDesc&&this.model.problem.selectedDesc.length?1!==this.model.problem.isRemarkRequired||this.model.problem.remark.trim()||(t="请填写补充说明"):t="请先选择问题描述":t="请先选择检查项",t)return this.$toast(t),!1;A=!0,this.disableAddProblem=!0,this.model.problem.positions&&this.model.problem.positions.length>0?r["a"].submit().then((function(t){e.$toast("登记问题成功",1e3),h["a"].init(),"todo"!=e.currentMenuType&&d["a"].updateRoomList(),e.$router.go(-1)}),(function(t){console.log(t),e.$toast("保存问题失败"),window.$log("保存问题失败",t)})).finally((function(){e.model.problem.remark&&1===e.model.problem.selectedDesc.length&&l["a"].upsertHistory(e.model.problem.selectedItem.item_id,e.model.problem.selectedDesc[0].id,e.model.problem.remark),e.disableAddProblem=!1})).catch((function(e){console.log(e)})):(this.disableAddProblem=!1,A=!1)}},goBack:function(){var e=this;this.$dialog.confirm({message:"当前问题尚未提交，您确认要放弃吗？"}).then((function(){e.$router.go(-1)}))}}},v=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"batch-add-problem",class:{frog:e.frog}},[i("cus-nav-bar",{attrs:{title:e.title,"left-arrow":"",border:!1,"use-click-left":""},on:{"click-left":e.goBack}}),e._v(" "),i("div",{directives:[{name:"scroll",rawName:"v-scroll"}],staticClass:"scroll-container"},[i("van-cell-group",{staticClass:"cells"},[i("van-cell",{attrs:{title:"部位","is-link":"",value:e.positionName||"请选择部位（必填）","value-class":e.positionName?"flexAuto":"flexAuto gray","data-event":"用户点击","data-log":"部位"},on:{click:function(t){return e.goBatchSelectPosition()}}}),e._v(" "),i("van-cell",{attrs:{value:e.model.problem.selectedItem&&e.model.problem.selectedItem.item_full_name||"请选择检查项（必填）","value-class":e.model.problem.selectedItem&&e.model.problem.selectedItem.item_full_name?"flexAuto":"flexAuto gray","is-link":"","data-event":"用户点击","data-log":"检查项"},on:{click:e.goSelectCheckitem}},[i("template",{slot:"title"},[i("span",{staticClass:"custom-text"},[e._v("检查项")]),e._v(" "),i("van-tag",{directives:[{name:"show",rawName:"v-show",value:e.showCheckItemGuide,expression:"showCheckItemGuide"}],attrs:{plain:"",size:"large",type:"primary"},on:{click:function(t){return t.stopPropagation(),e.openGuide(t)}}},[e._v("检查指引")])],1)],2),e._v(" "),i("van-cell",{attrs:{title:"问题描述","is-link":"","data-event":"用户点击","data-log":"问题描述",value:e._f("format")(e.model.problem.selectedDesc),"value-class":e.model.problem.selectedDesc&&e.model.problem.selectedDesc[0].name?"flexAuto":"flexAuto gray"},on:{click:e.goSelectDesc}})],1),e._v(" "),i("text-box",{attrs:{remark:e.model.problem.remark,placeholder:"补充说明"},on:{input:e.updateRemark}}),e._v(" "),e.enableProblemReason?i("section",{staticClass:"problem van-hairline--top van-hairline--bottom"},[i("span",{staticClass:"problem-desc pull-left"},[e._v("问题原因")]),e._v(" "),i("ul",{staticClass:"problem-content"},e._l(e.model.problemReasons,(function(t,n){return i("li",{key:n,class:t.selected?"problem-item problem-item__active":"problem-item",attrs:{"data-event":"用户点击","data-log":"问题原因："+t.reason},on:{click:function(i){return e.selectReason(t,n)}}},[e._v("\n          "+e._s(t.reason)+"\n          ")])})),0)]):e._e(),e._v(" "),i("take-photo",{attrs:{flag:e.flag,disabled:e.disableAddProblem,"image-list":e.model.problem.problemImages,"batch-unit-id":e.model.problem.batchUnitId,"batch-room-id":e.model.problem.batchRoomId},on:{change:e.updateProblemImages,reset:e.resetProblemImages}}),e._v(" "),i("van-cell-group",{staticClass:"select-list"},[e.enablePassWhenAdd?i("van-cell",{staticClass:"space-between",attrs:{title:"现场整改通过","is-link":"","data-event":"用户点击","data-log":"现场整改通过"},on:{click:function(t){return e.switchIsPassedWhenAdd()}}},[i("template",{slot:"right-icon"},[e.model.problem.isPassedWhenAdd?i("img",{attrs:{src:n("2985"),alt:"selected",width:"20",height:"20"}}):i("img",{attrs:{src:n("f97d"),alt:"select",width:"20",height:"20"}})])],2):e._e(),e._v(" "),i("van-cell",{staticClass:"space-between",attrs:{title:"紧急程度","is-link":""}},[i("template",{slot:"right-icon"},[i("div",{staticClass:"degree-items"},[i("div",{staticClass:"degree-item",class:{"degree-item__active":"非常紧急"===e.model.problem.emergencyDegree},on:{click:function(t){return e.updateEmergencyDegree("非常紧急")}}},[e._v("非常紧急")]),e._v(" "),i("div",{staticClass:"degree-item",class:{"degree-item__active":"紧急"===e.model.problem.emergencyDegree},on:{click:function(t){return e.updateEmergencyDegree("紧急")}}},[e._v("紧急")]),e._v(" "),i("div",{staticClass:"degree-item",class:{"degree-item__active":"一般"===e.model.problem.emergencyDegree},on:{click:function(t){return e.updateEmergencyDegree("一般")}}},[e._v("一般")])])])],2),e._v(" "),i("van-cell",{attrs:{title:"承建商(整改单位)","is-link":!e.contractorDisabled,value:e.contractor||"请选择承建商","value-class":e.contractor?"":"gray","data-event":"用户点击","data-log":"承建商(整改单位)"},on:{click:function(t){!e.contractorDisabled&&e.selectContractor()}}}),e._v(" "),i("van-cell",{attrs:{title:"责任单位","is-link":!e.contractorDisabled,value:e.responsibleCompany||"请选择责任单位","value-class":e.responsibleCompany?"":"gray","data-event":"用户点击","data-log":"责任单位"},on:{click:function(t){!e.contractorDisabled&&e.selectResponsibleCompany()}}})],1)],1),e._v(" "),i("div",{staticClass:"btn",class:{disabled:e.disableAddProblem},on:{click:e.addProblem}},[e._v("提交")])],1)},k=[],_=n("d082");function y(e){n("315d")}var I=!1,w=y,C="data-v-0c2b099c",P=null,L=Object(_["a"])(b,v,k,I,w,C,P);t["default"]=L.exports},e398:function(e,t,n){t=e.exports=n("690e")(!1),t.push([e.i,"\n.zhkf .photo[data-v-46bc9c5b] {\n  padding: 15px;\n  background: #fff;\n  -ms-flex-wrap: wrap;\n      flex-wrap: wrap;\n}\n.zhkf .photo .img-wrapper[data-v-46bc9c5b] {\n    display: inline-block;\n    position: relative;\n    padding-bottom: 5px;\n}\n.zhkf .photo img[data-v-46bc9c5b] {\n    display: inline-block;\n    width: 60px;\n    height: 60px;\n    margin-right: 20px;\n}\n.zhkf .photo .delete[data-v-46bc9c5b] {\n    position: absolute;\n    right: -10px;\n    top: -10px;\n    width: 20px;\n    height: 20px;\n}\n.zhkf .photo .downloadTip[data-v-46bc9c5b] {\n    position: absolute;\n    top: 50%;\n    left: 50%;\n    -webkit-transform: translate(-50%, -50%);\n            transform: translate(-50%, -50%);\n    color: #606060;\n    width: 100%;\n    font-size: 12px;\n    text-align: center;\n}\n",""])},f4b5:function(e,t){e.exports="data:image/png;base64,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"},f97d:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAADa0lEQVRYR9WZO2hUQRSG/zN7MYRgkRhEURRMoYKNGtGsEkj2TlLYCGrwVVn4IoplLIQFCy1FxaiFlQ+MKWwsNnNvAqIbwVehoCkUFEXRmBQh+GB3jhy9G9Y1utnNRscptpmdM989Z85jzhDKGMlkUjU1Na3xPK+FmVcz81Iims/Ms0UcEY0x81siGiKiB5lMZmBwcPBeMpm0pW5HpSwIw3CBtbaTmXcR0cJS1jLzayK6pJQ6k0gk3kx17ZQAgyCYw8zHAOwGUBUJfwEgBeA2gKdE9GpkZGRM5urq6mYz8yIAywFsANAOYEm07guAi0R01Pf9j8VAiwIGQbCNmU8DqAeQBdATaSFdTHj+fBiGcdE+gA4AMQDDRNTp+/61P8n5LeDAwICXyWQEbF90rkw2mz3U3t7+rBSwwv+mUqllsVjsFDPraO6c53kHW1paMpPJnRQwnU5Xj4+PXwewkYg+ATjs+/6F6YAVrg2CYA+Ak8xcDeBmTU3N1ng8Lnv9NH4BjDR3Q+AAvGfmjW1tbfcrCZeT1dfX10hENwHMFUjP8zYVavIXQGNMd2TW97FYrLm1tXVoJuByMvv7+5dms9lbEeQ5rfX+/P1+Aowc4qqY1VrbPFOaK/xg0aRS6paYm4i25TvOBGAUSsQB6olob6XPXDEryJlk5vORdy/LhaAJQGPMWQD7icj4vt9WTOBMzAdB0Bd5d7fW+sD36CE/UYZ4DsCz1q6YbigpF15CkFLqCYCMUqpBMs53QGPMcQBdAK5qrXeUu0El1hljrgDYDuCE1voISeKPx+MvJbcqpdYnEomSMkQloCbJOHckd6fT6cWUSqXWKqXuAnihtW6o9IblyDPGyHFbYq1dR2EYdllrxcQTB7McoZVck3NYpdQRMsb0AtgMYKfWWuz/z4cxRvzgMhH1CuBjACsArNJaP/rndD+cdiWAhwCeUBAEH5hZgnP9VOqzv/EBUdKQcmxYNPhZitDR0dGqjo6Or38DoNgePT09s2pra6Ww/eI+4P9gYped5LE4yXVm3uJsmHE+UDuf6pwvFpwvt/6LgjXSorslvwA6f2mKIKUP4+a1M5fAnb64C6TzrQ+BdLp5lDO10+23/ILS2QZmAaS7LeCCS7WbTfTCO0T+M4S1thGAPEPMK3iGeAdgSCl1fzrPEN8Ajn19wtuO19cAAAAASUVORK5CYII="},fa1b:function(e,t,n){"use strict";var i=n("1834");t["a"]={getCheckItemList:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",o=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=[e],a="select bc.item_id, ci.full_name as item_full_name  from batch_checkitem bc  inner join check_item ci on ci.id = bc.item_id  where bc.batch_id = ? ";if(a+=t?" and ci.is_for_rough = 1 ":" and ci.is_for_decorated = 1 ",n){var s=o?"project_position_checkitem":"position_checkitem";a+=" and bc.item_id in                     (select item_id from "+s+" where position_id = ? )",r.push(n)}return a+=" order by ci.sort ",i["a"].query(a,r)}}}}]);