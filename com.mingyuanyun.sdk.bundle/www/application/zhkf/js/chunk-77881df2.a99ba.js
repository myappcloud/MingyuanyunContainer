(window["webpackJsonp_module_entry_zhkf_"]=window["webpackJsonp_module_entry_zhkf_"]||[]).push([["chunk-77881df2"],{"0523":function(e,t,o){"use strict";o("6d57");var r=o("c6e3"),n=o("fd50"),i=o("a654"),a=o("c2c1"),s=o("8ae6"),c=function(e){return r["a"].getRoomBaseInfo(e)},u=function(e){return r["a"].getRoomCustomer(e)},l=function(e,t,o){var r,n={batch_unit_id:e,unit_list:[]},i="0";(_.isEmpty(t)||1===t.length&&""===t[0])&&(r=!0,t=[i]);var a={unit:[""],floor_list:[],status_counter:{all:0}};n.unit_list.push(a);for(var s=0;s<t.length;s++){var c=t[s],u={floor:c,room_list:[]};a.floor_list.push(u);for(var l=0;l<o.length;l++){var d=o[l];!r&&d.floor!=c||d.batch_unit_id!=e||(d.floor=r?i:d.floor,u.room_list.push(d),a.status_counter["all"]+=1,d.room_status in a.status_counter?a.status_counter[d.room_status]+=1:a.status_counter[d.room_status]=1)}}return n},d=function(e){return r["a"].getRoomIsReviewed(e)},m=function(e){return r["a"].getRoomTypeDiagram(e).then((function(e){if(!e)return!1;var t=n["a"].when(!1);return e.forEach((function(e){t=t.then((function(t){return t?n["a"].resolve(!0):a["a"].checkFileIsExists(Object(s["e"])()+e.path)}))})),t}))},f=function(e){return r["a"].getDiagramById(e).then((function(e){if(e){if("dev"==window.ZHKF_GLOBAL_ENV.VUE_APP_ENV)return e.url;var t=Object(s["e"])()+e.path;return console.log(t,"========================"),a["a"].checkFileIsExists(t).then((function(e){return e?t:null}))}return null}))},h=function(e){try{return m(e).catch((function(){return!1})).then((function(e){return!!e}))}catch(t){return console.error(t),n["a"].when(!1)}},p=function(e){return i["a"].existsDesignChange(e)},g=function(e){return i["a"].getDesignChange(e)},v=function(e,t){return i["a"].addDesignChangeProblem(e,t)},y=function(e){return c(e).then((function(e){return e.building_name+(e.unit?e.unit+(e.unit.indexOf("单元")>-1?"":"单元"):"")+(-1==e.floor.indexOf("层")&&-1==e.floor.indexOf("楼")&&-1==e.floor.indexOf("公共区域")?e.floor+"楼":e.floor)+(-1!==e.room_no.indexOf("公共区域")?e.floor+"层 公共区域":e.room_no)}))};t["a"]={getRoomBaseInfo:c,getRoomCustomer:u,buildRoomListData:l,getRoomIsReviewed:d,getRoomTypeImageFileIsExists:m,getRoomTypeImageFileIsExistsIgnoreError:h,existsRoomDesignChange:p,getRoomDesignChange:g,addRoomDesignChangeProblem:v,getRoomTitle:y,getDiagramFullPathById:f,getBatchRoomList:function(e,t){return r["a"].getBatchRoomList(e,t)}}},2985:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAADIklEQVRYR82ZTUhUURTHf3fKUqKkD0r7wEVQEUVCH7oSggiskMASF0EQlBW2DHQRDLQw2irZuAiKIFIXFVhIC4kKgmqlVBYuAnO0JkSMcpj0xvXN0+eb92beffMm3lsNc+/5nx/3cM85916Bny8qI5RzEDiMYD+SnUA5sDotNw3EEQwjeQ8MEOctUTGn605oGdyVW5ihGTgDbNWyhVHgPsV0cFZ882rrDbBDrqeI68A5YKVXcZd5SeAOKa7RLH7m0soN2CUbkbQDG3KJaY4niNDMefEwm507YFQuZzPtSC5qOtabLrjNGFeIir9Ohs6A3bKESXqA43refM/uYy2naRB/7AqZgGrlynn0H+FMpj7inLSvZCZgl+wseFjdFlqF+4K4ZB1eCmhsiAe+AxWEYYRG68ZZBDRSyacC7FZd7AQpdpkpaBEwJm8BS5ZXVznA+Z00ictKzwA0KsRIAEnYE+OaIrhZBXvXQewj3PuSYZakmO2q4hiAMdkGtHhSz3NS6QroPwZVGw2hWQm7u+HzVIbwDZpEq8Ao/F991FZtVDucKVDzBF6OZ8iNEqdCEJNVwBttb5oGbnADY3CkD+ako2C1AlShVSEu2OcG92ocap/Br5Sr61YF2AvUu03Ztgq+z0By1h9/HnBqC/cqwEFgj919RMDjo3CiAiZ+Q/1zeD2hB5kXnOFqSAH+cErONWXwom4RaDoFtU+9QwYAp5wnFOCMU/7bUQofGmCZpRh6hQwITgEmXQHV6NV9RkK1frkgA4RbAHQMsQnVUglth7xBBgy3EGLHTWJF8gJZADiFMCjokj1ITuXan9kghyaXli9Ty0Oey+42nWY8J2o3yJEpqLQdqfKGM9DnE7VWqXOCtC9DQHBKttpXs5ANMkC4dLOgOH20W06QAcIpqnS7pX76bFhVnlQpSCVz1ZXU9Wct/Ln2oXXc1rAaq+ir5VcVZ1OJUQJdWiYdMHOureVXf4f+0KQgQ33sNBc31Ad3BRn6qw8FGerLIzPUob5+syaG0F5gWiFDfQVsBQ3tJbq9FlifIeAAzD9DlNmeIdRdwTDwLp9niH+Lfm97gO/iCQAAAABJRU5ErkJggg=="},"2d3d":function(e,t,o){"use strict";o("e697"),o("6d57"),o("cc57");var r=o("fd50"),n=o("cb6b"),i=o("0e1c"),a=o("653b"),s=o("0523");t["a"]=function(){var e=20,t={},o={getConditions:function(){return n["a"].set(i["a"].DELIVERY_PROCESS_CONDITION,{batch:t.filterList[0].id,status:t.filterList[2].id},n["a"].level.user),{batchId:t.filterList[0].id,name:t.currType,status:t.filterList[2].name,page:t.currPage,pageSize:e,checkroomType:t.checkroomType,batchType:t.batchType}},load:function(){var n=o.getConditions();return n.batchId?a["a"].getTodoDeliveryList(n,t.search.keyword||"").then((function(o){return t.total=o.total,t.list=t.currPage?t.list.concat(o.list):o.list,0===t.currPage&&(t.search.lastKeyword=""),t.total*e>t.list.length&&t.currPage++,o.list})).then((function(e){return"delivery_check_room"===t.currType?o.setUploadStatus(e):e})):r["a"].reject("无效批次")},changeNumberStatus:function(e,o,r){var n=[];return e.room_list.forEach((function(e){n.push(e.room_id)})),a["a"].changeNumberStatus({batch_id:t.filterList[0].id,signin_id:e.signin_id,room_ids:n.join(","),operate_type:r,name:t.currType}).then((function(){t.list.splice(o,1)}))},setUploadStatus:function(e){e=e||t.list;var o=[],r=[];return e.forEach((function(e){e.room_list.forEach((function(e){o.push(e.room_id)}))})),s["a"].getBatchRoomList(t.filterList[0].id,o).then((function(e){return e.forEach((function(e){t.list.forEach((function(t){var o=_.find(t.room_list,{room_id:e.room_id});o&&(o.batchRoomId=e.id,r.push(e.id))}))})),a["a"].getHasUploadRoomList(r).then((function(e){_.isEmpty(e)||t.list.forEach((function(t){t.room_list.forEach((function(o){e.indexOf(o.batchRoomId)>-1&&(t.hasUpload=!0)}))}))}))}))}};return{model:t,init:function(e){var o=this,s=e.type,c=e.batchType;t.currType=s,t.batchType=c,t.checkroomType="全部",t.currPage=0,t.total=0,t.filterList=[{id:"",name:"",label:"批次",type:"batch",options:[]},{id:"",name:"",label:"验房类型",type:"checkroomType",options:[],hidden:!("online_delivery_center"===c)},{id:"",name:"",label:"办理状态",type:"status",options:[]}],t.currStatus="",t.search={keyword:"",lastKeyword:""},t.list=[];var u=n["a"].getObject(i["a"].DELIVERY_PROCESS_CONDITION,n["a"].level.user)||{};return a["a"].getBatchList(c).then((function(e){return e=e||[],e.length&&(t.filterList[0].options=e,t.filterList[1].options=[{id:"all",name:"全部"},{id:"offline_delivery",name:"现场验房"},{id:"online_delivery_center",name:"在线验房"}],t.filterList[2].options=[{id:1,name:"待办理"},{id:2,name:"已办理"},{id:3,name:"已过号"}],t.filterList.forEach((function(e){var t=u[e.type]||"",o=_.find(e.options,{id:t})||{};e.id=o.id||e.options[0].id,e.name=o.name||e.options[0].name})),t.currStatus=t.filterList[2].name),r["a"].resolve(!0)})).then((function(){return o.load()}))},load:function(){return t.currPage=0,o.load()},loadMore:function(){return o.load()},cross:function(e,t){return o.changeNumberStatus(e,t,"过号")},resetRecovery:function(e,t){return o.changeNumberStatus(e,t,"恢复排号")},removeItem:function(e,o,r){if(!_.isEmpty(t)&&!_.isEmpty(t.list)&&"已办理"!==t.filterList[2].name&&t.currType===r){var n=_.find(t.list,{signin_id:e}),i=!0;if(n&&(n.room_list.forEach((function(e){e.room_id===o&&(e.status=1),i&=!!e.status})),i)){var a=_.indexOf(t.list,n);a>-1&&t.list.splice(a,1)}}}}}()},"447b":function(e,t,o){"use strict";o("ed63");var r=o("fd50"),n=o("dfb1"),i=o("07a4"),a={getDeliveryBatchUnitList:function(e){var t=i["a"].state.projectList.currentItem.id,o=["online_delivery","online_delivery_center"],r=o.includes(e)?"在线交付":"交付";return n["a"].getDeliveryBatchUnitList(t,r)},getDeliveryBatchRoomData:function(e){var t=[n["a"].getDeliveryBatchRoomCount(e),n["a"].getDeliveryBatchRoomList(e)];return r["a"].all(t).then((function(e){var t={count:e[0],list:e[1]};return t}))},getDeliveryBatchRoomList:function(e){return n["a"].getDeliveryBatchRoomList(e)}};t["a"]=a},6013:function(e,t,o){"use strict";var r=o("07a4"),n=o("dfb1"),i=o("81ad"),a=o("c6e3"),s=o("9430"),c=o("a14a"),u=o.n(c),l={getDeliveryNodeList:function(){return n["a"].getDeliveryNodeList(r["a"].state.projectList.currentItem.id)},getTodoDeliveryDetail:function(e){return n["a"].getTodoDeliveryDetail(e)},uploadDeliveryConfirmInfo:function(e,t,o){return i["a"].uploadFiles(e,"deliveryProcess",t.room_id).then((function(e){console.log(e),e=u.a.uniq(e);var r={child_process:[{id:o,status:1,imgs:e}],reason:"",remark:""};return r=u.a.extend(r,t),n["a"].uploadProcessData(r)}))},uploadProcessData:function(e){return n["a"].uploadProcessData(e)},getProcessOperateLog:function(e){return n["a"].getProcessOperateLog(e)},getDeliveryConfirmInfo:function(e,t,o){return n["a"].getDeliveryConfirmInfo(e,t,o)},getRoomData:function(e,t){return a["a"].getBatchRoom(e,t)},assistSignIn:function(e){return n["a"].assistSignIn(e)},hasUploadData:function(e){return s["a"].existsBatchRoomUploadData(e)}};t["a"]=l},8326:function(e,t,o){"use strict";var r=o("cb6b"),n=o("0e1c"),i=o("a14a"),a=o.n(i),s=function(){var e=n["a"].DELIVERY_CONFIG_STORAGE;return r["a"].set(e,{customer_phone:"",saved_customer_phone:"",electric_meter_degree:"",saved_electric_meter_degree:"",water_meter_degree:"",saved_water_meter_degree:"",gas_meter_degree:"",saved_gas_meter_degree:"",heating_pressure_degree:"",saved_heating_pressure_degree:"",keynum:0,saved_keynum:0,signature_image_localpath:"",saved_signature_image_localpath:"",review_signature_image_localpath:"",saved_review_signature_image_localpath:"",star:0,saved_star:0,reject_remak:"",delivery_degree_items:null,delivery_record_items:null}),{getDelivery:function(){return r["a"].getObject(e)},updateDelivery:function(t){var o=a.a.extend(r["a"].getObject(e),t);r["a"].set(e,o)}}};t["a"]=s()},a654:function(e,t,o){"use strict";var r=o("1834"),n=o("0938");t["a"]={existsDesignChange:function(e){var t="select 1 from room_design_change a inner join batch_room b on a.room_id = b.room_id where b.id = ?";return r["a"].queryOne(t,[e]).then((function(e){return!_.isEmpty(e)}))},getDesignChange:function(e){var t="select a.id, a.location, a.content, a.remark, a.sort from room_design_change a inner join batch_room b on a.room_id = b.room_id where b.id = ? order by a.sort";return r["a"].query(t,[e])},addDesignChangeProblem:function(e,t){if(e&&t){var o=n["a"].uuid();r["a"].insert("room_design_change_problem",["id","design_change_id","checkroom_problem_id"],[o,t,e])}}}},b6fa:function(e,t,o){"use strict";o("cc57"),o("6d57");var r=o("447b");t["a"]=function(){var e={display_rooms:[],tabs:[{name:"全部",key:"all_room_count",dot:""},{name:"待交付",key:"to_delivery_room_count",dot:"room-type1"},{name:"交付中",key:"",dot:"room-type2"},{name:"已交付",key:"deliveried_room_count",dot:"room-type4"}],filter:{current:{name:"全部",count:0},selectStatus:!1,options:[{name:"全部",count:0},{name:"扫码签到",count:0},{name:"交付资料审核",count:0},{name:"财务手续办理",count:0},{name:"物业手续办理",count:0},{name:"验房",count:0},{name:"领取礼品",count:0},{name:"暂不收楼",count:0}]},status_sel:"全部",count:{}},t={load:function(t,o){return r["a"].getDeliveryBatchRoomList({batch_unit_id:e.buildingId,status:t,name:o}).then((function(e){for(var t=[],o={"待交付":"room-type1","交付中":"room-type2","已交付":"room-type4"},r=0;r<e.length;r++){for(var n={floor:e[r].floor,room_list:[]},i=0;i<e[r].room_list.length;i++)n.room_list.push({room_no:e[r].room_list[i].room_no,room_status_class:o[e[r].room_list[i].status],id:e[r].room_list[i].room_id});t.push(n)}return t}))}};return{model:e,init:function(t){var o=this;return t&&(e.buildingId=t),e.status_sel="全部",e.filter.current={name:"全部",count:0},r["a"].getDeliveryBatchRoomData({batch_unit_id:e.buildingId,status:"全部"}).then((function(t){for(var r={count:t.count,list:[]},n={"待交付":"room-type1","交付中":"room-type2","已交付":"room-type4"},i=0;i<t.list.length;i++){for(var a={floor:t.list[i].floor,room_list:[]},s=0;s<t.list[i].room_list.length;s++)a.room_list.push({room_no:t.list[i].room_list[s].room_no,room_status_class:n[t.list[i].room_list[s].status],id:t.list[i].room_list[s].room_id});r.list.push(a)}return e.display_rooms=r.list,e.count=r.count,o.initFilter(),r}))},initFilter:function(){var t=e.count.deliveying_room_count.process_count;e.filter.options.forEach((function(o){"全部"==o.name?o.count=e.count.deliveying_room_count.count:o.count=t[o.name]})),e.filter.current.count=e.count.deliveying_room_count.count},updateList:function(){var t=this;this.load(e.status_sel).then((function(){t.initFilter()}))},load:function(o,r){return t.load(o,r).then((function(t){e.display_rooms=t}))}}}()},d599:function(e,t,o){"use strict";o.r(t);o("5ab2"),o("6d57"),o("e44b"),o("e10e"),o("f0e6"),o("cc57");var r,n,i,a=o("28f8"),s=o("bdbb"),c=o("8326"),u=o("db55"),l=o("6013"),d=o("2d3d"),m=o("b6fa"),f=o("f2de"),h=o("ba1a");function _(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,r)}return o}function p(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?_(Object(o),!0).forEach((function(t){Object(a["a"])(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):_(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}var g={components:{textBox:s["a"]},data:function(){return{reasons:[{name:"设计缺陷",selected:!1},{name:"工程质量瑕疵",selected:!1},{name:"与销售承诺不符",selected:!1},{name:"资料不齐",selected:!1},{name:"其他",selected:!1}],remark:""}},computed:p({},Object(f["e"])({deliveryConfig:function(e){return e.app.deliveryConfig}})),activated:function(){i=h["a"].getDecodeQuery(this.$route.query),r=u["a"].model.roomInfo,console.log("roomInfo",r),n=u["a"].model.currRoom},methods:{selectReason:function(e){e.selected=!e.selected},updateRemark:function(e){this.remark=e;var t={reject_remark:e};c["a"].updateDelivery(t)},refuseDelivery:function(){for(var e=this,t=[],o=this.reasons.length,a=0;a<o;a++)this.reasons[a].selected&&t.push(this.reasons[a].name);if(0===t.length)return this.$toast("请选择暂不收楼原因"),!1;if(1===t.length&&t.indexOf("其他")>-1&&!this.remark.trim())return this.$toast("选择其他时，需要输入补充说明"),!1;this.$toast.loading({duration:0,forbidClick:!0,loadingType:"spinner",message:"正在提交数据..."});var s={signin_id:r.signin_id,batch_id:r.batchId,room_id:n.room_id,process_id:i.nodeId,process_name:i.nodeName,child_process:[{id:i.childNodeId,status:0,imgs:[]}],reason:t.join(";"),remark:this.remark.trim()||""};return l["a"].uploadProcessData(s).then((function(){d["a"].removeItem(r.signin_id,n.room_id,"delivery_confirm"),e.$toast("操作成功",1e3),m["a"].updateList(),e.$router.go(-2)})).catch((function(t){console.error(t),e.$toast("操作失败")})).finally((function(){}))}}},v=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"delivery-process-refuse yf-comp-wrapper"},[r("cus-nav-bar",{attrs:{title:"选择"+e.deliveryConfig.reject_delivery.text+"原因","left-arrow":""}}),e._v(" "),r("div",{staticClass:"refuse-content"},[r("section",{staticClass:"reason-list"},e._l(e.reasons,(function(t,n){return r("van-cell",{key:n,class:{active:t.selected},attrs:{"is-link":"",title:t.name},on:{click:function(o){return e.selectReason(t)}}},[r("template",{slot:"right-icon"},[r("img",{directives:[{name:"show",rawName:"v-show",value:t.selected,expression:"item.selected"}],attrs:{src:o("2985"),alt:"selected",width:"20",height:"20"}}),e._v(" "),r("img",{directives:[{name:"show",rawName:"v-show",value:!t.selected,expression:"!item.selected"}],attrs:{src:o("f97d"),alt:"select",width:"20",height:"20"}})])],2)})),1),e._v(" "),r("text-box",{staticClass:"van-hairline--top",attrs:{remark:e.remark,placeholder:"补充说明"},on:{input:e.updateRemark}})],1),e._v(" "),r("div",{staticClass:"btn",on:{click:e.refuseDelivery}},[e._v(e._s(e.deliveryConfig.reject_delivery.text)+"，继续整改")])],1)},y=[],b=o("d082");function D(e){o("f3c5")}var I=!1,A=D,R="data-v-4d4c7de8",w=null,O=Object(b["a"])(g,v,y,I,A,R,w);t["default"]=O.exports},db55:function(e,t,o){"use strict";o("5ab2"),o("e10e");var r=o("28f8"),n=(o("e697"),o("6d57"),o("e44b"),o("cc57"),o("fd50")),i=o("07a4"),a=o("a18c"),s=o("6013"),c=o("0523"),u=o("ca33"),l=o("a593");function d(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,r)}return o}function m(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?d(Object(o),!0).forEach((function(t){Object(r["a"])(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):d(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}t["a"]=function(){var e={},t={},o={review_material:"delivery_review_material",handle_finance:"delivery_handle_finance",handle_property:"delivery_handle_property",check_room:"delivery_check_room",give_gift:"delivery_receive_gift",delivery_confirm:"delivery_confirm"};return t.getConditions=function(){return{batchId:e.roomInfo.batchId,roomId:e.roomInfo.room_list[e.currRoomIndex].room_id}},t.gotoNextRoom=function(){var o=e.roomInfo.room_list.length;return e.currRoomIndex<o-1?(e.currRoomIndex+=1,e.currRoom=e.roomInfo.room_list[e.currRoomIndex],t.load()):n["a"].resolve()},t.load=function(){var r=t.getConditions();return s["a"].getTodoDeliveryDetail(r).then((function(r){e.nodeList=[],e.baseInfo.delivery_qualification=r.delivery_qualification,e.baseInfo.appointment_process_list=r.appointment_process_list||[],e.baseInfo.checkroom_type=r.checkroom_type,e.baseInfo.delivery_unqualified_reason=r.delivery_unqualified_reason,e.baseInfo.hasTag=!1,e.baseInfo.room_name=e.roomInfo.room_list[e.currRoomIndex].room_name,e.baseInfo.customers=[],e.no="",_.each(r.customer_list,(function(t){e.baseInfo.customers.push({customerName:t.customer_name,customerPhone:t.customer_phone,canDialTelphonee:-1===t.customer_phone.indexOf("*"),hasTag:t.has_tag}),1==t.has_tag&&(e.baseInfo.hasTag=!0)})),r.no&&(e.no=r.no),r.signin_id&&(e.roomInfo.signin_id=r.signin_id);var n=i["a"].state.app.global.currentBatchType;_.each(e.sourseData,(function(t,i){var a={name:t.name,id:i,child_node:[],type:o[t.function_code],status:r.process[i]&&1==r.process[i].status?r.process[i].status:0,authRight:l["default"].prototype.$checkRight("view_room",n)&&l["default"].prototype.$checkRight(t.function_code,n)};_.each(t.child_process,(function(e,t){var o={name:e.name,type:e.type,remark:e.remark,id:t};r.process[i]&&1==r.process[i].status&&r.process[i].child_process[t]&&r.process[i].child_process[t].status?o["status"]=r.process[i].child_process[t].status:o["status"]=0,a.child_node.push(o)})),e.nodeList.push(a)}));for(var a=0;a<e.nodeList.length;a++){for(var s=!1,c=0;c<e.nodeList[a].child_node.length;c++)1==e.nodeList[a].child_node[c].status&&(s=!0);e.nodeList[a]["showStatus"]=s}return t.updateCheckroomNode().then((function(){return e.nodeList}))}))},t.updateCheckroomNode=function(){var t=n["a"].when();return e.currRoom.batchRoomId||(t=c["a"].getBatchRoomList(e.roomInfo.batchId,[e.currRoom.room_id]).then((function(t){return!_.isEmpty(t)&&(e.currRoom.batchRoomId=t[0].id,!0)}))),t.then((function(t){if(!1!==t)return s["a"].hasUploadData(e.currRoom.batchRoomId).then((function(t){if(_.isEmpty(t))return n["a"].resolve();var o=_.find(e.nodeList,{type:"delivery_check_room"});if(o){var r=!1;t.forEach((function(e){o.child_node.forEach((function(t){("问题"===e.type&&"登记问题"===t.name||"房间"===e.type&&"登记问题"!==t.name)&&(t.status=1),r=r||1==t.status}))})),o.showStatus=r,o.status=1,o.hasUpload=!0}}))}))},{model:e,initModel:function(t){e.roomInfo=t,e.currRoomIndex=0,e.currRoom=e.roomInfo.room_list[0],e.baseInfo={customers:[]};for(var o=e.roomInfo.room_list.length,r=0;r<o;r++)e.roomInfo.room_list[r].ans=r},init:function(){return s["a"].getDeliveryNodeList().then((function(o){return e.sourseData=o,_.each(e.sourseData,(function(e,t){_.each(e.child_process,(function(e,t){e.type=e.type.substr(0,e.type.length-1)}))})),t.load()}))},gotoNextRoom:function(){return t.gotoNextRoom()},gotoCheckRoom:function(){var t=i["a"].state.app.global.currentBatchType,o={deliveryprocess:{name:"正式交付",type:"交付",batch_type:"delivery",from:"deliveryprocess"},online_delivery_center:{name:"在线交房",type:"在线交付",batch_type:"online_delivery",from:"online_delivery_center"}},r=o[t]["batch_type"];return s["a"].getRoomData(e.roomInfo.batchId,e.currRoom.room_id).then((function(n){if(!_.isEmpty(n)){var s={batchRoomId:n.id,roomId:n.room_id,building_id:n.building_id,batch_unit_id:n.batch_unit_id,type:r,fitment_standard:n.fitment_standard,roomTitle:n.building_name+n.room_no,menuType:i["a"].state.app.global.currentMenuType,batch_id:e.roomInfo.batchId};return c["a"].getRoomTypeImageFileIsExists(n.id).then((function(e){e?(s.mode="0",s.isImageExists=!0):s.from=t,console.log("/checkroom/".concat(r,"-roomdetail")),a["a"].push({path:"/checkroom/".concat(r,"-roomdetail"),query:m(m({},s),{},{from:t})})}))}return i["a"].commit("app/APP",{currentBatchType:r}),a["a"].push({path:"/checkroom/".concat(r,"-batch-unit"),query:o[t]})}))},load:function(){return t.load()},uploadRoomData:function(t){return s["a"].getRoomData(e.roomInfo.batchId,e.currRoom.room_id).then((function(e){return u["a"].uploadData(e.batch_unit_id,e.id).then((function(){t.hasUpload=!1}))}))}}}()},dca4:function(e,t,o){t=e.exports=o("690e")(!1),t.push([e.i,"\n.zhkf .refuse-content[data-v-4d4c7de8] {\n  -webkit-box-flex: 1;\n      -ms-flex: 1;\n          flex: 1;\n}\n.zhkf .btn[data-v-4d4c7de8] {\n  height: 45px;\n  line-height: 45px;\n  color: #fff;\n  text-align: center;\n  background: #0099ff;\n  font-size: 15px;\n}\n",""])},f3c5:function(e,t,o){var r=o("dca4");"string"===typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);var n=o("85cb").default;n("f2adca76",r,!0,{})},f97d:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAADa0lEQVRYR9WZO2hUQRSG/zN7MYRgkRhEURRMoYKNGtGsEkj2TlLYCGrwVVn4IoplLIQFCy1FxaiFlQ+MKWwsNnNvAqIbwVehoCkUFEXRmBQh+GB3jhy9G9Y1utnNRscptpmdM989Z85jzhDKGMlkUjU1Na3xPK+FmVcz81Iims/Ms0UcEY0x81siGiKiB5lMZmBwcPBeMpm0pW5HpSwIw3CBtbaTmXcR0cJS1jLzayK6pJQ6k0gk3kx17ZQAgyCYw8zHAOwGUBUJfwEgBeA2gKdE9GpkZGRM5urq6mYz8yIAywFsANAOYEm07guAi0R01Pf9j8VAiwIGQbCNmU8DqAeQBdATaSFdTHj+fBiGcdE+gA4AMQDDRNTp+/61P8n5LeDAwICXyWQEbF90rkw2mz3U3t7+rBSwwv+mUqllsVjsFDPraO6c53kHW1paMpPJnRQwnU5Xj4+PXwewkYg+ATjs+/6F6YAVrg2CYA+Ak8xcDeBmTU3N1ng8Lnv9NH4BjDR3Q+AAvGfmjW1tbfcrCZeT1dfX10hENwHMFUjP8zYVavIXQGNMd2TW97FYrLm1tXVoJuByMvv7+5dms9lbEeQ5rfX+/P1+Aowc4qqY1VrbPFOaK/xg0aRS6paYm4i25TvOBGAUSsQB6olob6XPXDEryJlk5vORdy/LhaAJQGPMWQD7icj4vt9WTOBMzAdB0Bd5d7fW+sD36CE/UYZ4DsCz1q6YbigpF15CkFLqCYCMUqpBMs53QGPMcQBdAK5qrXeUu0El1hljrgDYDuCE1voISeKPx+MvJbcqpdYnEomSMkQloCbJOHckd6fT6cWUSqXWKqXuAnihtW6o9IblyDPGyHFbYq1dR2EYdllrxcQTB7McoZVck3NYpdQRMsb0AtgMYKfWWuz/z4cxRvzgMhH1CuBjACsArNJaP/rndD+cdiWAhwCeUBAEH5hZgnP9VOqzv/EBUdKQcmxYNPhZitDR0dGqjo6Or38DoNgePT09s2pra6Ww/eI+4P9gYped5LE4yXVm3uJsmHE+UDuf6pwvFpwvt/6LgjXSorslvwA6f2mKIKUP4+a1M5fAnb64C6TzrQ+BdLp5lDO10+23/ILS2QZmAaS7LeCCS7WbTfTCO0T+M4S1thGAPEPMK3iGeAdgSCl1fzrPEN8Ajn19wtuO19cAAAAASUVORK5CYII="}}]);