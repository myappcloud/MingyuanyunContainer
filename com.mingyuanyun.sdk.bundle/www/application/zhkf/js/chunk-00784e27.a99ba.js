(window["webpackJsonp_module_entry_zhkf_"]=window["webpackJsonp_module_entry_zhkf_"]||[]).push([["chunk-00784e27"],{"0970":function(e,t,i){"use strict";i("6d57"),i("cc57");var n=i("1834"),o=function(){var e="select ci.id,ci.name,ci.parent_id,ci.sort,ci.ifEnd,cig.remark from check_item ci left join check_item_guide cig on ci.id=cig.item_id";return n["a"].query(e)},r=function(e){var t="select remark from check_item_guide where item_id = ?",i=[e];return n["a"].queryOne(t,i).then((function(e){return e&&e.remark}))},a=function(e){var t="select item.full_name,guide.remark as guide           from check_item_guide guide               inner join check_item item on guide.item_id=item.id           where guide.item_id=?";return n["a"].queryOne(t,[e])},c=function(){var e="select item.id,item.name,item.parent_id,guide.id is not null as has_guide       from check_item item           left join check_item_guide guide on item.id=guide.item_id              and ifnull(guide.remark,'') <> ''       order by sort";return n["a"].query(e)},s={getCheckItemWithGuide:o,getGuideByCheckItemId:r,getCheckItemList:c,getGuideAndItemByItemId:a},d=i("a14a"),l=i.n(d),m=function(){var e={};return{getItem:function(t,i){if(void 0===t||null===t)throw new TypeError("key参数为空");return i?e[t]:l.a.cloneDeep(e[t])},setItem:function(t,i){if(void 0===t||null===t)throw new TypeError("key参数为空");if(arguments.length<2)throw new TypeError("value参数未设置");e[t]=i},clear:function(){e={}}}},u=m(),h={IS_NEED_DOWNLOAD_BASE_DATA:"is_need_download_base_data",LAST_EXEC_TIME_DATA:"last_exec_time_data",LAST_GUIDE_SORT_MAP:"last_guide_sort_map"},p=function(){var e=function e(t,i){t.remark&&""!=t.remark&&(t.has_guide=!0),t.children=[];for(var n=0;n<i.length;n++)i[n].parent_id==t.id&&t.children.push(i[n]);if(t.children&&t.children.length>0)for(var o=0;o<t.children.length;o++)t.children[o]=e(t.children[o],i);return t};return{getCheckItemGuideByItemId:function(e){return s.getGuideByCheckItemId(e)},getCheckItemTree:function(){var t={id:""};return s.getCheckItemWithGuide().then((function(i){t=e(t,i);for(var n=0;n<t.children.length;n++)if("所有检查项"==t.children[n].name)return t.children[n].children;return t.children}))},getCheckItemTreeAndGuideSortMap:function(){return console.time("getData"),s.getCheckItemList().then((function(e){console.timeEnd("getData"),console.time("processData");var t={},i=[],n=0,o=[];function r(e,t){e.forEach((function(e){e.depth=t,e.tree?r(e.tree,t+1):e.has_guide&&(e.guide_sort=n,i[n]=e.id,n++)}))}return e.forEach((function(e){t[e.id]=e})),e.forEach((function(e){e.parent_id&&t[e.parent_id]?(t[e.parent_id].tree=t[e.parent_id].tree||[],t[e.parent_id].tree.push(e)):o.push(e)})),r(o,1),u.setItem(h.LAST_GUIDE_SORT_MAP,i),console.timeEnd("processData"),{tree:o,guideSortMap:i}}))},getGuideSortMapFromCatch:function(){return u.getItem(h.LAST_GUIDE_SORT_MAP,!0)},getGuideAndItemByItemId:s.getGuideAndItemByItemId}};t["a"]=p()},"0a37":function(e,t,i){var n=i("1c4e");"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var o=i("85cb").default;o("76d9ba51",n,!0,{})},"1c4e":function(e,t,i){t=e.exports=i("690e")(!1),t.push([e.i,"\n.zhkf .tip[data-v-829243a6] {\n  width: 250px;\n  text-align: center;\n  position: absolute;\n  left: 50%;\n  top: 50%;\n  -webkit-transform: translate(-50%, -50%);\n          transform: translate(-50%, -50%);\n}\n.zhkf .tip img[data-v-829243a6] {\n    width: 200px;\n}\n.zhkf .tip p[data-v-829243a6] {\n    color: #a0a0a0;\n    line-height: 20px;\n    font-size: 14px;\n    margin: 0 auto;\n    text-align: center;\n    margin-top: 3px;\n}\n",""])},"26eb":function(e,t,i){e.exports=i.p+"img/search.37f508c9.png"},2865:function(e,t,i){var n=i("646e");"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var o=i("85cb").default;o("cbe0503e",n,!0,{})},2985:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAADIklEQVRYR82ZTUhUURTHf3fKUqKkD0r7wEVQEUVCH7oSggiskMASF0EQlBW2DHQRDLQw2irZuAiKIFIXFVhIC4kKgmqlVBYuAnO0JkSMcpj0xvXN0+eb92beffMm3lsNc+/5nx/3cM85916Bny8qI5RzEDiMYD+SnUA5sDotNw3EEQwjeQ8MEOctUTGn605oGdyVW5ihGTgDbNWyhVHgPsV0cFZ882rrDbBDrqeI68A5YKVXcZd5SeAOKa7RLH7m0soN2CUbkbQDG3KJaY4niNDMefEwm507YFQuZzPtSC5qOtabLrjNGFeIir9Ohs6A3bKESXqA43refM/uYy2naRB/7AqZgGrlynn0H+FMpj7inLSvZCZgl+wseFjdFlqF+4K4ZB1eCmhsiAe+AxWEYYRG68ZZBDRSyacC7FZd7AQpdpkpaBEwJm8BS5ZXVznA+Z00ictKzwA0KsRIAEnYE+OaIrhZBXvXQewj3PuSYZakmO2q4hiAMdkGtHhSz3NS6QroPwZVGw2hWQm7u+HzVIbwDZpEq8Ao/F991FZtVDucKVDzBF6OZ8iNEqdCEJNVwBttb5oGbnADY3CkD+ako2C1AlShVSEu2OcG92ocap/Br5Sr61YF2AvUu03Ztgq+z0By1h9/HnBqC/cqwEFgj919RMDjo3CiAiZ+Q/1zeD2hB5kXnOFqSAH+cErONWXwom4RaDoFtU+9QwYAp5wnFOCMU/7bUQofGmCZpRh6hQwITgEmXQHV6NV9RkK1frkgA4RbAHQMsQnVUglth7xBBgy3EGLHTWJF8gJZADiFMCjokj1ITuXan9kghyaXli9Ty0Oey+42nWY8J2o3yJEpqLQdqfKGM9DnE7VWqXOCtC9DQHBKttpXs5ANMkC4dLOgOH20W06QAcIpqnS7pX76bFhVnlQpSCVz1ZXU9Wct/Ln2oXXc1rAaq+ir5VcVZ1OJUQJdWiYdMHOureVXf4f+0KQgQ33sNBc31Ad3BRn6qw8FGerLIzPUob5+syaG0F5gWiFDfQVsBQ3tJbq9FlifIeAAzD9DlNmeIdRdwTDwLp9niH+Lfm97gO/iCQAAAABJRU5ErkJggg=="},"37cf":function(e,t,i){var n=i("874e");"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var o=i("85cb").default;o("b8a405c6",n,!0,{})},4438:function(e,t,i){"use strict";var n=i("cb6b"),o=i("0e1c");t["a"]={getLocalBusinessToggle:function(){var e=n["a"].getObject(o["a"].BUSINESS_TOGGLE,n["a"].level.user);return e||{enable_opening_tab:0,enable_pass_when_add:0,enable_pass_when_to_repair:0,sign_when_receive_delivery:1,special_project_switch:0,take_photo_when_review:0,take_photo_when_regist:0,hide_owner_phone:0,enable_problem_reason:0}}}},"5c1b":function(e,t,i){"use strict";i("f0e6");var n=i("bbed"),o=i("fa1b"),r=i("07a4"),a=i("fd50");function c(){var e=function(e){e&&e.fitment_standard&&("毛坯"===e.fitment_standard?e.is_for_rough=1:"精装"===e.fitment_standard&&(e.is_for_decorated=1),delete e.fitment_standard)},t=function(e,t,i,o,r){return n["a"].getCheckItemLeaf(e,t,o,r).then((function(e){if(_.isEmpty(e))return[];var t=[];return _.each(e,(function(e){t.push(e.id)})),n["a"].getCheckItemAll(t.join("','"),i,o,r)}))};return{getCheckItemList:function(e,i,o,c,s){var d="毛坯"==c,l=a["a"].when(),m=["全部"];return m.push(1==s?"公区":"房间"),m="('"+m.join("','")+"')",l=r["a"].state.app.global.isUseProjectItem?n["a"].getProjectCheckItemList(e,i,o,d,m):t(e,i,o,d,m),l.then((function(e){return e}))},hasProjectCheckitem:function(e){return n["a"].hasProjectCheckitem(e)},searchCheckItemWithProject:function(t,i,o,r){return e(o),r?n["a"].searchProjectCheckItem(r,t,i,o):n["a"].searchCheckItem(t,i,o)},searchCheckItem:function(t,i,o,r){return console.log("searchCheckItem: ",t,i,o),console.time("searchCheckItem"),e(o),n["a"].hasProjectCheckitem(r).then((function(e){return e?n["a"].searchProjectCheckItem(r,t,i,o):n["a"].searchCheckItem(t,i,o).finally((function(){console.timeEnd("searchCheckItem")}))}))},getHigherLevelTreeListByCheckItemId:function(t,i,o){return console.log("getHigherLevelTree: ",t,i,o),console.time("getHigherLevelTree"),e(o),n["a"].getHigherLevelTreeListByCheckItemId(t,i,o).finally((function(){console.timeEnd("getHigherLevelTree")}))},getCheckItemLevel:function(e,t){return n["a"].getCheckItemLevel(e,t)},getPositionItemByRoom:function(e,t,i){var o=a["a"].when(),c=["全部"];return c.push(1==i?"公区":"房间"),c="('"+c.join("','")+"')",o=r["a"].state.app.global.isUseProjectItem?n["a"].getProjectPositionItemByRoom(e,t,c):n["a"].getPositionItemByRoom(e,c),o.then((function(e){return e}))},setIsUseProjectItemOfBatchUnit:function(e){return n["a"].getProjectItemOfBatchUnit(e).then((function(e){var t=!1;e&&(t=!0),r["a"].commit("app/APP",{isUseProjectItem:t})}))},getBatchCheckItem:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return o["a"].getCheckItemList(e,t,i,r["a"].state.app.global.isUseProjectItem).then((function(e){return console.log("BatchCheckItem",e),a["a"].resolve(e)}))}}}t["a"]=c()},"5cf9":function(e,t,i){"use strict";var n={props:{isShow:{type:Boolean,default:!0},imgUrl:{type:String,required:!0},tipCont:{type:String,default:"系统繁忙请稍后重试"}}},o=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{directives:[{name:"show",rawName:"v-show",value:e.isShow,expression:"isShow"}],staticClass:"tip"},[i("img",{attrs:{src:e.imgUrl,alt:"tip"}}),e._v(" "),e.tipCont?i("p",{domProps:{innerHTML:e._s(e.tipCont)}}):e._e()])},r=[],a=i("d082");function c(e){i("0a37")}var s=!1,d=c,l="data-v-829243a6",m=null,u=Object(a["a"])(n,o,r,s,d,l,m);t["a"]=u.exports},"646e":function(e,t,i){t=e.exports=i("690e")(!1),t.push([e.i,"\n.zhkf .active[data-v-72554b36] {\n  color: #0085ff;\n}\n.zhkf .desc-select[data-v-72554b36] {\n  height: 100%;\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-orient: vertical;\n  -webkit-box-direction: normal;\n      -ms-flex-direction: column;\n          flex-direction: column;\n}\n.zhkf .desc-select[data-v-72554b36] .tip {\n    width: 240px;\n}\n.zhkf .desc-select[data-v-72554b36] .tip img {\n      width: 200px;\n}\n.zhkf .desc-select[data-v-72554b36] .tip p {\n      font-size: 14px;\n      line-height: 20px;\n}\n.zhkf .isBgWhite[data-v-72554b36] {\n  background: #fff;\n}\n.zhkf .icon-xuanzhong[data-v-72554b36] {\n  color: #0085ff;\n  font-size: 20px;\n}\n.zhkf .icon-duoxuan-weixuanzhuangtai[data-v-72554b36] {\n  color: #c7c8c7;\n  font-size: 20px;\n}\n.zhkf .icon-gou[data-v-72554b36] {\n  font-size: 15px;\n}\n.zhkf .desc-content[data-v-72554b36] {\n  -webkit-box-flex: 1;\n      -ms-flex: 1;\n          flex: 1;\n  overflow: scroll;\n}\n.zhkf .history-list[data-v-72554b36] {\n  margin-top: 10px;\n}\n.zhkf .history-list h2[data-v-72554b36] {\n    height: 36px;\n    line-height: 36px;\n    font-size: 14px;\n    color: #a0a0a0;\n    padding-left: 15px;\n    font-weight: 400;\n    background: #fff;\n    margin: 0;\n}\n.zhkf .history-list .van-cell[data-v-72554b36]:not(:last-child)::after {\n    left: 15px;\n}\n.zhkf .btn[data-v-72554b36] {\n  height: 45px;\n  line-height: 45px;\n  color: #fff;\n  text-align: center;\n  font-size: 15px;\n  background: #0085ff;\n}\n",""])},"77a8":function(e,t,i){"use strict";i("6d57");function n(){var e={list:[]};return{model:e,init:function(){e.list=[{key:"status",value:"常用状态",name:"常用状态",displayName:"所有状态",list:[{name:"常用状态",value:"常用状态"},{name:"所有状态",value:""}]},{key:"position",value:"",name:"全部",displayName:"部位",list:[]},{key:"checkItem",value:"",name:"全部",displayName:"检查项",list:[]}]},update:function(t){e.list.forEach((function(e){t[e.key]&&(e.list=t[e.key])}))},getCondition:function(){var t={};return e.list.forEach((function(e){t[e.key]=e.value})),t},resetCheckItemValue:function(){e.list.forEach((function(e){"checkItem"===e.key&&(e.value="",e.name="全部")}))}}}t["a"]=n()},"85cd":function(e,t,i){"use strict";var n=i("1834"),o=i("0938"),r="checkitem_remark_history",a={createCondition:function(e,t){if(_.isEmpty(e))return"";t=t?"crh.":"";var i=[];return _.each(e,(function(e,n){i.push(t+n+"="+e)})),i=i.join(" and "),i},insertHistory:function(e){e.id=o["a"].uuid(),e.used_time=e.used_time||1,e.last_used_time=e.last_used_time||o["a"].getNowDate();var t=[],i=[];return _.each(e,(function(e,n){t.push(n),i.push(e)})),n["a"].insert(r,t,i).then((function(){return e.id}))},updateHistory:function(e,t){return n["a"].update(r,e,t)},getOneHistory:function(e,t,i){var o="select * from "+r+" where item_id=? and desc_id=? and remark=?";return n["a"].queryOne(o,[e,t,i])},updateUserdTime:function(e,t){if(!t)return $q.error("次数不能为0");var i={last_used_time:o["a"].getNowDate(),used_time:t};return n["a"].update(r,i,{id:e})},getListByItemIdOrderDate:function(e,t){var i="select crh.id, crh.desc_id, crh.remark, cid.name as desc_name from checkitem_remark_history crh inner join check_item_desc cid on cid.id = crh.desc_id and cid.check_item_id = crh.item_id where crh.item_id = ?  order by crh.last_used_time desc limit "+t;return n["a"].query(i,[e])},getListByItemIdOrderUsedTime:function(e,t,i){var o=i.length?'and crh.id not in ("'+i.join('","')+'")':"",r="select crh.id, crh.desc_id, crh.remark, cid.name as desc_name from checkitem_remark_history crh inner join check_item_desc cid on cid.id = crh.desc_id and cid.check_item_id = crh.item_id where crh.item_id = ? "+o+" order by crh.used_time desc limit "+t;return n["a"].query(r,[e])},deleteItemById:function(e){var t="delete from checkitem_remark_history where id=?";return n["a"].query(t,[e])},searchByItems:function(e,t){var i="select crh.id,crh.remark as name,crh.item_id,ci.name as item_name,ci.full_name as item_full_name,crh.desc_id,cid.name as desc_name from checkitem_remark_history crh inner join check_item ci on ci.id = crh.item_id inner join check_item_desc cid on cid.id = crh.desc_id and cid.check_item_id = crh.item_id where crh.item_id in ("+t+') and (lower(crh.remark) like "%" || ? || "%" or upper(crh.remark) like "%" || ? || "%") order by crh.remark';return n["a"].query(i,[e,e])}},c=a,s={getList:function(e){if(!e)return $q.reject("itemId为空");var t=[];return c.getListByItemIdOrderDate(e,3).then((function(i){if(i){var n=[];return _.each(i,(function(e){n.push(e.id),t.push({id:e.id,name:e.desc_name+"："+e.remark,descId:e.desc_id,remark:e.remark,descName:e.desc_name})})),c.getListByItemIdOrderUsedTime(e,17,n).then((function(e){return e&&_.each(e,(function(e){t.push({id:e.id,name:e.desc_name+"："+e.remark,descId:e.desc_id,remark:e.remark,descName:e.desc_name})})),t}))}return $q.reject(t)}))},deleteItem:function(e){return c.deleteItemById(e)},upsertHistory:function(e,t,i){return c.getOneHistory(e,t,i).then((function(n){return n?c.updateUserdTime(n.id,n.used_time+1):c.insertHistory({item_id:e,desc_id:t,remark:i})}))},searchByItems:function(e,t){return c.searchByItems(e,t)}};t["a"]=s},"874e":function(e,t,i){t=e.exports=i("690e")(!1),t.push([e.i,"\n.zhkf .app-right-swipe-cell .right-btn {\n  display: inline-block;\n  width: 65px;\n  padding: 15px;\n  color: #fff;\n  text-align: center;\n  line-height: 24px;\n  background-color: #f44;\n}\n",""])},"8fee":function(e,t,i){"use strict";var n=i("760e"),o=i("a14a"),r=i.n(o);t["a"]={getCheckItemDescList:function(e,t,i){return n["a"].getCheckItemDescList(e,t,i).then((function(e){return e}))},getRoomCheckListDescList:function(e,t){return n["a"].getRoomCheckListDescList(e,t).then((function(e){if(!r.a.isEmpty(e))for(var t=0;t<e.length&&t<3;t++)e[t].isImportant=!0;return e}))},searchDesc:function(e,t){return n["a"].searchDesc(e,t)}}},"98a4":function(e,t,i){"use strict";i("e697");var n=i("85cd"),o=i("fd50"),r=i("a593"),a={model:{},init:function(){a.model.historyList={},a.model.currItemId="",a.model.currList=[]},loadList:function(e,t){return e?(_.isEmpty(a.model)&&a.init(),t=t||!1,a.model.currItemId=e,_.isEmpty(a.model.historyList[e])||t?(console.log("=== itemId ===",e),n["a"].getList(e).then((function(t){console.log(t),a.model.historyList[e]=t,a.model.currList=t})).catch((function(){a.model.historyList[e]=[],a.model.currList=[]}))):(a.model.currList=a.model.historyList[e],o["a"].resolve())):o["a"].reject()},upsertHistory:function(e,t,i){return n["a"].upsertHistory(e,t,i).then((function(){a.loadList(e,!0)}))},delHistory:function(e){return n["a"].deleteItem(e).then((function(){var t=_.find(a.model.currList,{id:e});if(t){var i=a.model.currList.indexOf(t);i>-1&&a.model.currList.splice(i,1)}})).catch((function(e){console.error(e),r["default"].prototype.$toast("删除历史失败！")}))}};t["a"]=a},a9ec:function(e,t,i){"use strict";i("6d57");var n=i("a593"),o=i("3fa2"),r=i("d485"),a=i("9af1"),c=i("77a8");function s(){var e={},t={problemList:[],buttons:[]},i={},s="tab-icon1",d={"待派单":"tab-icon5","待整改":"tab-icon2","已整改":"tab-icon3","已通过":"tab-icon4","已作废":"tab-icon6","非正常关闭":"tab-icon7"},l=o["a"].room;return i.iniStatusStyle=function(){t.problemList.forEach((function(e){d[e.status]?e.status_style=d[e.status]:e.status_style=s}))},i.initFilter=function(){return r["a"].getPositionList(l.batchRoomId).then((function(e){t.filterList.position.list=e}))},i.getCondition=function(){var e={};_.each(t.filterList,(function(t,i){e[i]=t.value}))},i.getProblemPoints=function(){n["default"].prototype.$eventBus.$emit("app.roomdetail:updateProblemPoints",t.problemList)},e={model:t,init:function(){return r["a"].getProblemList(l.batchRoomId,0,1,!0).then((function(e){t.problemList=e,i.iniStatusStyle()})).then((function(){return console.log("fromType------",l.fromType),a["a"].getDefaultFilterList(t.problemList,l.batchRoomId,l.fromType).then((function(e){c["a"].update(e),console.log("filters---------",e),i.getProblemPoints()}))})).then((function(){if(!_.isEmpty(c["a"].model.list))return e.updateProblemList()}))},updateProblemList:function(e){var n=c["a"].getCondition();a["a"].hideProblemByFilter(t.problemList,c["a"].model.list,n,e),i.getProblemPoints()}},e}t["a"]=s()},b643:function(e,t,i){"use strict";var n=i("7ee1");t["a"]={getReasonConfig:function(){return n["a"].getList()},getProblemReason:function(e){return n["a"].getProblemReason(e)}}},bad1:function(e,t,i){"use strict";var n=i("97ba");t["a"]={getPositionList:function(e){return console.log("batchRoomId",e),n["a"].getPositionList(e).then((function(e){return e}))},getPositionByIds:function(e){return n["a"].getPositionByIds(e)},getPositionNameById:function(e){return n["a"].getPositionNameById(e)}}},cb77:function(e,t,i){"use strict";var n={props:{title:{type:String,default:""},btnTxt:{type:String,default:""}},methods:{clickItem:function(e){switch(e){case"cell":this.$emit("cell-click");break;case"right":this.$emit("right-click");break}}}},o=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"app-right-swipe-cell"},[i("van-swipe-cell",{attrs:{"right-width":65},on:{click:e.clickItem}},[i("van-cell-group",[i("van-cell",{attrs:{title:e.title}})],1),e._v(" "),i("span",{staticClass:"right-btn",attrs:{slot:"right"},slot:"right"},[e._v("\n      "+e._s(e.btnTxt)+"\n    ")])],1)],1)},r=[],a=i("d082");function c(e){i("37cf")}var s=!1,d=c,l=null,m=null,u=Object(a["a"])(n,o,r,s,d,l,m);t["a"]=u.exports},db5f:function(e,t,i){"use strict";i("5ab2"),i("e44b"),i("e10e"),i("f0e6");var n=i("28f8"),o=(i("5f54"),i("6d57"),i("fd50")),r=i("c2c1"),a=i("0938"),c=i("8ae6"),s=i("a14a"),d=i.n(s),l=i("07a4"),m=i("a593"),u=i("98a4"),h=i("3fa2"),p=i("a9ec"),f=i("db99"),b=i("bad1"),g=i("964e"),_=i("0970"),I=i("5c1b"),k=i("dd0a"),y=i("4438"),v=i("b643"),w=i("bbed");function P(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function A(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?P(Object(i),!0).forEach((function(t){Object(n["a"])(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):P(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var C=h["a"].room,L="",D="";function x(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];i.length>0?console.log("[model]/problem-model.js：",e,i):console.log("[model]/problem-model.js：",e)}function E(){if(!R.model.problem.contractorIds&&R.model.problem.checkItemId)return k["a"].getContractor(C.batchRoomId||R.model.problem.batchRoomId,R.model.problem.checkItemId,R.model.problem.descIds).then((function(e){var t=[],i=[];R.model.contractorDisabled=!1,d.a.isEmpty(e)||(d.a.each(e,(function(e){t.push(e.contractor_id),i.push(e.contractor_name)})),t.length>1&&(R.model.contractorDisabled=!0),t=t.join(";"),i=i.join("；"),R.model.problem.contractors=i,R.model.problem.contractorIds=t,R.model.problem.responsibilityUnitIds=t,R.model.problem.responsibilityUnits=i)}))}function T(){var e=R.model.problem.id?"editProblem":"addProblem";!R.model.selectes&&(R.model.selectes={position:{},checkItem:{},desc:{},contractor:{},responsibleCompany:{}}),R.model.positionDisabled||(R.model.selectes.position={path:"/checkroom/".concat(l["a"].state.app.global.currentMenuType||l["a"].state.app.global.currentBatchType,"-position-select"),query:{fromPage:e}}),R.model.problem.positionId?(R.model.selectes.checkItem={path:"/checkroom/".concat(l["a"].state.app.global.currentMenuType||l["a"].state.app.global.currentBatchType,"-checkitem-select/").concat((new Date).getTime()),query:{type:C.fromType,fitment_standard:C.fitmentStandard,fromPage:e,isSpecial:+C.isSpecial}},R.model.problem.checkItemId?(C.isSpecial||I["a"].getHigherLevelTreeListByCheckItemId(R.model.problem.checkItemId,R.model.problem.positionId,{fitment_standard:C.fitmentStandard}).then((function(t){R.model.selectes.checkItem.query=d.a.extend(R.model.selectes.checkItem.query,{history:JSON.stringify(t),level:0,fromPage:e})})),R.model.selectes.desc={path:"/checkroom/".concat(l["a"].state.app.global.currentMenuType||l["a"].state.app.global.currentBatchType,"-desc-select"),query:{fromPage:e,fitment_standard:C.fitmentStandard,level:0}},R.model.selectes.contractor={path:"/checkroom/".concat(l["a"].state.app.global.currentMenuType||l["a"].state.app.global.currentBatchType,"-contractor-select"),query:{fromPage:e}},R.model.selectes.responsibleCompany={path:"/checkroom/".concat(l["a"].state.app.global.currentMenuType||l["a"].state.app.global.currentBatchType,"-responsible-select"),query:{fromPage:e}}):R.model.selectes.checkItem.query=d.a.extend(R.model.selectes.checkItem.query,{batchId:C.batchId})):R.model.selectes.checkItem={}}function B(e){var t=e.coordinate?[JSON.parse(e.coordinate)]:[];return R.model.problem={projectId:e.projectId,problemStamp:e.problemStamp,positionId:e.positionId||"",diagramId:e.diagramId,positionName:"",checkItemId:e.checkItemId||"",checkItemName:e.checkItemName||"",topCheckItemId:e.checkItemId||"",checkItemGuide:!1,descIds:e.descIds||"",descNames:e.descNames||"",remark:e.remark||"",imageList:e.imageList||[],emergencyDegree:"一般",coordinates:t,contractors:"",contractorIds:"",responsibilityUnitIds:"",responsibilityUnits:"",isPassedWhenAdd:!1,isRemarkRequired:"",feedbackId:e.feedbackId,batchRoomId:e.batch_room_id},"roomDesignChange"!==e.problemType&&"feedbackRemainReply"!==e.problemType||(C={batchRoomId:e.batch_room_id,batchUnitId:e.batch_unit_id}),R.model.positionId=null,R.setProblem(),o["a"].resolve()}function S(e){return g["a"].getProblem(e.problemId).then((function(t){var i=o["a"].when();return C&&!d.a.isEmpty(C)||(C={fromType:e.type,batchRoomId:e.batch_room_id,batchUnitId:e.batch_unit_id,isSpecial:e.isSpecial,fitmentStandard:e.fitment_standard,batchId:t.batch_id}),i.then((function(){return t.problem_reason_ids=[],l["a"].state.app.global.enableProblemReason?v["a"].getProblemReason(e.problemId).then((function(e){return t.problem_reason_ids=e,o["a"].resolve(t)})):o["a"].resolve(t)}))})).then((function(t){R.model.problem={id:t.id,projectId:t.proj_id,positionId:t.position_id||"",positionName:t.position_name||"",diagramId:t.roomtype_diagram_id,checkItemId:t.item_id||"",checkItemName:t.item_name||"",topCheckItemId:t.top_item_id||"",checkItemGuide:!1,descIds:t.desc_id||"",descNames:t.desc||"",remark:t.remark,imageList:[],emergencyDegree:t.emergency_degree,coordinates:t.coordinates,contractors:t.contractor_name,contractorIds:t.contractor_id,responsibilityUnitIds:t.responsible_company_id,responsibilityUnits:t.responsible_company_name,isPassedWhenAdd:t.is_passed_when_add||!1,isRemarkRequired:t.isRemarkRequired,reasonIds:t.problem_reason_ids,batchRoomId:e.batch_room_id,batchUnitId:e.batch_unit_id},t.problem_images.forEach((function(e){var t=c["a"].getImageRealPath(e.img_localpath);R.model.problem.imageList.push({localPath:e.img_localpath,fullPath:t,viewPath:c["a"].getImageWebViewPath(t)})})),console.log("==== _self.model.problem  ====",R.model.problem),L=t.remark,D=t.is_passed_when_add,R.model.positionId=t.position_id}))}var R={initUpdate:!0,model:{isLoaded:!1,positionId:"",problem:{imageList:[]},ProblemReasons:[],remarkChangeStatus:1},setProblem:function(e){var t={};R.model.positionDisabled=!1,R.model.checkItemDisabled=!1,R.model.descDisabled=!1,R.model.contractorDisabled=!1,"roomDesignChange"===R.model.problemType?(!d.a.isEmpty(e)&&(t={checkItemId:e.itemId,topCheckItemId:e.itemId,checkItemName:e.itemName,descIds:e.descId,descNames:e.descName,emergencyDegree:e.emergency_degree,remark:e.remark}),R.model.checkItemDisabled=!0,R.model.descDisabled=!0):"feedbackRemainReply"===R.model.problemType?(R.model.positionDisabled=!0,R.model.checkItemDisabled=!0):"fitmentStyle"===R.model.problemType?(!d.a.isEmpty(e)&&(t={checkItemId:e.checkItemId,topCheckItemId:e.checkItemId,checkItemName:e.checkItemName,emergencyDegree:"前置配置"===e.configType?"紧急":"一般",positionId:e.positionId||""}),R.model.positionDisabled=!0,R.model.checkItemDisabled=!0):"checkList"===R.model.problemType&&(!d.a.isEmpty(e)&&(R.model.problem=d.a.extend(R.model.problem||{},e)),T(),E(),R.initUpdate=!1),R.model.problem=d.a.extend(R.model.problem||{},t)},showGuide:function(){return R.model.problem.checkItemId?_["a"].getCheckItemGuideByItemId(R.model.problem.checkItemId).then((function(e){R.model.guideText=e,R.model.showGuide=!!e})):(R.model.guideText="",R.model.showGuide=!1,o["a"].resolve())},init:function(e){R.model.isLoaded=!1,R.model.title=e.problemId?"编辑问题":"feedbackRemainReply"!==e.problemType?"登记问题":e.title,R.model.problemType=e.problemType||"default";var t,i=l["a"].state.app.global.currentBatchType||"simulate";return R.model.enablePassWhenAdd=1==y["a"].getLocalBusinessToggle().enable_pass_when_add&&(m["default"].prototype.$checkRight("reinspect_problem",i)||m["default"].prototype.$checkRight("pass_problem",i)),R.model.ProblemReasons=[],console.log("=====",R.model),t=e.problemId?S(e):B(e),t.then((function(){return R.showGuide().then((function(){if(R.model.problem.positionId)return b["a"].getPositionNameById(R.model.problem.positionId).then((function(e){R.model.problem.positionName=e}))})).then((function(){R.initUpdate&&T()})).then((function(){if(l["a"].state.app.global.enableProblemReason)return v["a"].getReasonConfig().then((function(t){console.log("=== reasons ===",t),e.problemId&&t.forEach((function(e){m["default"].prototype.$set(e,"selected",R.model.problem.reasonIds.indexOf(e.id)>-1)})),R.model.ProblemReasons=t}))})).then((function(){R.model.isLoaded=!0})).catch((function(e){console.error(e),m["default"].prototype.$toast("获取相关数据失败，请返回或稍后重试")}))}))},updateProblem:function(e,t){return t=t||!1,R.model.problem=Object.assign({},R.model.problem,e),R.showGuide().then((function(){return T(),e.remark&&R.model.remarkChangeStatus++,x("updateProblem - 更新问题的字段：","updateProblem=".concat(t),e),t?E():o["a"].resolve()}))},takePhoto:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=c["a"].getNewProblemImagePath({folder:C.batchUnitId+"/"+C.batchRoomId,imageId:Object(a["j"])()});return console.log("take photo",t),r["a"].takePhoto(t.full_path,A({withGraffiti:!0,text:g["a"].getWatermarkText()},e)).then((function(){R.model.problem.imageList.push({localPath:t.save_path,fullPath:t.full_path,viewPath:t.view_path?t.view_path:c["a"].getImageWebViewPath(t.full_path)})}))},addProblem:function(e){e=e||"";var t=[];d.a.each(R.model.problem.imageList,(function(e){t.push({img_localpath:e.localPath})}));var i={problem_images:t,batch_room_id:C.batchRoomId||R.model.problem.batchRoomId,position_id:R.model.problem.positionId,item_id:R.model.problem.checkItemId,top_item_id:C.isSpecial?"":R.model.problem.topCheckItemId,desc_id:R.model.problem.descIds,contractor_id:R.model.problem.contractorIds,responsible_company_id:R.model.problem.responsibilityUnitIds,roomtype_diagram_id:R.model.problem.diagramId,coordinate:R.model.problem.coordinates,emergency_degree:R.model.problem.emergencyDegree,remark:R.model.problem.remark,is_passed_when_add:R.model.problem.isPassedWhenAdd?1:0,problemType:R.model.problemType,feedbackId:R.model.problem.feedbackId},n=[];return R.model.ProblemReasons.forEach((function(e){e.selected&&n.push(e.id)})),g["a"].batchAddProblem(i,C.isSpecial,e,n).then((function(){return w["a"].updateCheckItemUseTimes(R.model.problem.checkItemId).catch((function(e){window.$log("添加问题 updateCheckItemUseTimes catch & 参数",{error:e,curr_param:{checkItemId:R.model.problem.checkItemId}}),console.log("添加问题 updateCheckItemUseTimes catch & 参数",{error:e,curr_param:{checkItemId:R.model.problem.checkItemId}})}))})).then((function(){return w["a"].updateItemDescUseTimes(R.model.problem.descIds).catch((function(e){window.$log("添加问题 updateItemDescUseTimes catch & 参数",{error:e,curr_param:{descIds:R.model.problem.descIds}}),console.log("添加问题 updateItemDescUseTimes catch & 参数",{error:e,curr_param:{descIds:R.model.problem.descIds}})}))})).then((function(){return p["a"].init().catch((function(e){window.$log("添加问题 刷新房间问题model catch",e),console.error("添加问题 刷新房间问题model catch",e)})),C.mode})).catch((function(e){window.$log("添加问题 刷新房间问题model这一步的外部 catch",e),console.error("添加问题 刷新房间问题model这一步的外部 catch",e)})).finally((function(){console.log("添加问题 finally88"),R.model.problem.remark&&R.model.problem.descIds.indexOf(";")<0&&u["a"].upsertHistory(R.model.problem.checkItemId,R.model.problem.descIds,R.model.problem.remark).catch((function(e){window.$log("添加问题 finally catch",e),console.log("添加问题 finally catch",e)}))}))},editProblem:function(){var e=[],t=[];return d.a.each(R.model.problem.imageList,(function(e){t.push({img_localpath:e.localPath})})),R.model.ProblemReasons.forEach((function(t){t.selected&&e.push(t.id)})),g["a"].processEditProblem({id:R.model.problem.id,problem_images:t,batch_room_id:C.batchRoomId,position_id:R.model.problem.positionId,item_id:R.model.problem.checkItemId,top_item_id:C.isSpecial?"":R.model.problem.topCheckItemId,desc_id:R.model.problem.descIds,contractor_id:R.model.problem.contractorIds,responsible_company_id:R.model.problem.responsibilityUnitIds,emergency_degree:R.model.problem.emergencyDegree,remark:R.model.problem.remark,roomtype_diagram_id:R.model.problem.diagramId,coordinate:R.model.problem.coordinates,is_passed_when_add:R.model.problem.isPassedWhenAdd?1:0,is_passed_when_add_old:D},C.isSpecial,e).then((function(){f["a"].updateProblem(R.model.problem.id),p["a"].init()})).catch((function(e){return o["a"].reject(e)})).finally((function(){R.model.problem.remark&&R.model.problem.descIds.indexOf(";")<0&&L!=R.model.problem.remark&&u["a"].upsertHistory(R.model.problem.checkItemId,R.model.problem.descIds,R.model.problem.remark)}))}};t["a"]=R},db99:function(e,t,i){"use strict";i("6d57"),i("e697");var n=i("fd50"),o=(i("cc57"),i("9a33"),i("a324")),r=i("760e"),a=function(){var e=20,t={},i={},a={};return t={batch_unit_id:"cp.batch_unit_id",status:"cp.status",floor:"br.floor",item:"ci.id",user:"u.id"},i.formatData=function(e,t){var i=[],n=[];return _.each(e,(function(e){var o={};e.desc_id=e.desc_id.split(";"),_.each(e.desc_id,(function(e){i.indexOf(e)<0&&i.push(e)})),-1==e.floor.indexOf("层")&&-1==e.floor.indexOf("楼")&&-1==e.floor.indexOf("公共区域")&&(e.floor=e.floor+"楼"),o.id=e.id,o.code=e.code,o.batchRoomId=e.batch_room_id,o.batchUnitId=e.batch_unit_id,o.registerUserName=e.regist_user_name,o.roomtypeDiagramId=e.roomtype_diagram_id,o.status=e.status,o.roomName=t+"-"+e.floor+"-"+e.room_no,o.dealTime=e.deal_time&&"00-00-00 00:00:00"!==e.deal_time?e.deal_time:"",o.emergence=e.emergency_degree&&e.emergency_degree.indexOf("急")>-1?e.emergency_degree:"",o.sendBackTimes=e.sent_back_time||0,o.positionName=e.position,o.itemName=e.item,o.contractor=e.contractor||"",o.desc=e.desc_id,n.push(o)})),r["a"].getDescByIds(i).then((function(e){return _.each(n,(function(t){_.each(t.desc,(function(i,n){var o=_.find(e,{id:i});t.desc[n]=o?o.name:"无描述"})),t.desc=t.desc.join("、")})),n}))},i.getFilter=function(e,t){var i={status:o["a"].getCountOfProblemStatus,floor:o["a"].getCountOfFloor,item:o["a"].getCountOfCheckItem,user:o["a"].getCountOfRegister};return i[e](t)},a.createCondition=function(e,i){if(_.isEmpty(e))return"";"batch_unit_id"==i&&(i="");var n=[];return _.each(e,(function(e,o){t[o]&&o!==i&&n.push(t[o]+'="'+e+'"')})),n.join(" and ")},a.initFilter=function(){var e=[{type:"status",title:"问题状态",name:"",value:"",options:[]},{type:"floor",title:"楼层",name:"",value:"",options:[]},{type:"item",title:"检查项",name:"",value:"",options:[]},{type:"user",title:"登记人",name:"",value:"",options:[]}];return e},a.getProblems=function(t,r,c){var s=a.createCondition(r);return o["a"].getAllProblemListByPage(s,t,e).then((function(e){return!e||_.isEmpty(e)?[]:i.formatData(e,c)})).catch((function(e){return n["a"].reject(e)}))},a.getFilterCount=function(e){e=e||{};var o,r="",c={},s=[];return _.each(t,(function(t,n){"batch_unit_id"!==n&&(r=a.createCondition(e,n),o=i.getFilter(n,r).then((function(e){return{type:n,res:e}})),s.push(o))})),n["a"].all(s).then((function(e){return _.each(e,(function(e){if(e){var t=[],i=0;_.each(e.res,(function(e){t.push({count:e.count,name:e.name||e.title,value:e.value}),i+=e.count})),t.unshift({value:"",name:"全部",count:i}),c[e.type]=t}})),c}))},a.getSelectedProblems=function(e){var t=a.createCondition(e);return o["a"].getSelectedProblems(t)},a.passProblems=function(e){var t=[];return e.forEach((function(e){t.push(o["a"].passProblem(e.id,e.batchRoomId))})),n["a"].all(t)},a.getListInfoById=function(e,t){return o["a"].getListInfoById(e).then((function(e){return i.formatData([e],t).then((function(e){return e.shift()}))})).catch((function(e){return n["a"].reject(e)}))},a},c=a(),s=i("9072"),d=i("a14a"),l=i.n(d),m=function(){var e={},t=20,i={};function o(){l.a.isEmpty(e.filter)&&(e.filter=c.initFilter());var i=r(),n=[],o="";return c.getFilterCount(i).then((function(i){l.a.each(e.filter,(function(t,r){if(o=e.filter[r].value||"",t&&i[t.type]){var a=l.a.find(i[t.type],{value:o});a&&n.push(a.count),e.filter[r].options=i[t.type]}}));var r=Math.min.apply(null,n);e.totalPage=Math.ceil(r/t)}))}function r(){var t={batch_unit_id:e.batchUnitId};return l.a.each(e.filter,(function(e){e.value&&(t[e.type]=e.value)})),t}function a(){var t=n["a"].defer();if(e.isAllSelected){var i=r();c.getSelectedProblems(i).then((function(e){t.resolve(e)})).catch((function(e){t.reject(e)}))}else t.reject();return t.promise}function d(t){e.isAllSelected?e.problemList=[]:l.a.each(t,(function(t){var i=l.a.find(e.problemList,{id:t.id});if(i){var n=-1;e.problemList&&(n=e.problemList.indexOf(i)),n>-1&&e.problemList.splice(n,1)}}))}return e.filter=c.initFilter(),e.currPage=0,e.totalPage=0,e.problemList=[],e.isAllSelected=!1,i={model:e,init:function(t,o){var r=n["a"].when();return e.currPage=0,e.problemList=[],e.batchUnitId=t,e.unitName=o,e.currConditon={},1==window.isNeedClearAllData&&(e.filter=c.initFilter(),window.isNeedClearAllData=!1),null==window.take_photo_when_review&&r.then((function(){return s["a"].getReviewPhotoSetting()})),r.then((function(){return i.load(0)}))},load:function(t){if(t&&t==e.currPage)return n["a"].resolve();var i=r();return o(),c.getProblems(t,i,e.unitName).then((function(t){return e.isAllSelected&&t.forEach((function(e){e.checked=!0})),n["a"].resolve(t)})).then((function(i){return e.problemList=t?e.problemList.concat(i):i,e.currPage=t,n["a"].resolve(!0)}))},passProblems:function(e){var t=n["a"].defer(),i=function(e){c.passProblems(e).then((function(){d(e),t.resolve()})).catch((function(e){t.reject(e)}))};return e?i(e):a().then(i),t.promise},updateProblem:function(t){var i=l.a.find(e.problemList,{id:t});return i?c.getListInfoById(t,e.unitName).then((function(t){if(!l.a.isEmpty(t)){if(""!=e.filter[0].value&&i.status!=t.status){var n=e.problemList.indexOf(i);n>-1&&e.problemList.splice(n,1)}else i=l.a.extend(i,t);o(),$rootScope.$$phase||$rootScope.$digest()}})):n["a"].resolve()}}};t["a"]=m()},dc54:function(e,t,i){"use strict";i.r(t);i("cc57"),i("ed63"),i("8cf2"),i("6d57"),i("9a33");var n,o=i("8fee"),r=i("db5f"),a=i("98a4"),c=i("5cf9"),s=i("cb77"),d=i("a14a"),l=i.n(d),m=i("ba1a"),u=-1,h={name:"DescSelect",components:{tip:c["a"],rightSwipeCell:s["a"]},data:function(){return{rightText:"多选",descList:[],loading:!1,isMulti:!1,historyList:[]}},created:function(){this.init()},methods:{init:function(){var e=this;this.descList=[],this.historyList=[],this.loading=!0,u=-1*((this.$route.query.level||0)- -1),n=r["a"].model.problem;var t="";n.descIds?(t=n.descIds.split(";"),t&&t.length>1?(this.isMulti=!0,this.rightText="取消多选"):(this.isMulti=!1,this.rightText="多选")):(this.isMulti=!1,this.rightText="多选");var i=m["a"].getDecodeQuery(this.$route.query);o["a"].getCheckItemDescList(n.checkItemId,i.fitment_standard,!0).then((function(i){t&&t.length>0&&i.forEach((function(i){l.a.includes(t,i.id)?e.$set(i,"selected",!0):e.$set(i,"selected",!1)})),console.log("descList",i),e.loading=!1,e.descList=i})),a["a"].loadList(n.checkItemId).then((function(){e.historyList=a["a"].model.currList,console.log("historyList",e.historyList)}))},removeRemarkHistory:function(e){a["a"].delHistory(e)},selectHistory:function(e){console.log("item",e);var t=n.descIds!=e.descId,i={descIds:e.descId,descNames:e.descName,remark:e.remark};t&&(i=l.a.extend(i,{contractors:"",contractorIds:"",responsibilityUnitIds:"",responsibilityUnits:""})),r["a"].updateProblem(i,t),this.$router.go(u)},selectDesc:function(e){console.log(e),this.isMulti?this.$set(e,"selected",!e.selected):this.selectCallback(e.id,e.name,e.is_remark_required)},multiSelect:function(){var e=this;this.isMulti?(this.descList.forEach((function(t){e.$set(t,"selected",!1)})),this.isMulti=!1,this.rightText="多选"):(this.isMulti=!0,this.rightText="取消多选")},selectMultiDesc:function(){var e=[],t=[],i=0;if(this.descList.forEach((function(n){n.selected&&(e.push(n.id),t.push(n.name),i+=n.is_remark_required)})),!e.length)return this.$toast("请选择问题描述"),!1;i=i?1:0,this.selectCallback(e.join(";"),t.join("；"),i)},selectCallback:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=n.descIds!=e,a={descIds:e,descNames:t,isRemarkRequired:i};o&&(a=l.a.extend(a,{contractors:"",contractorIds:"",responsibilityUnitIds:"",responsibilityUnits:""})),r["a"].updateProblem(a,o),console.log(u,"------level---"),this.$router.go(u)}}},p=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"desc-select",class:{isBgWhite:!e.loading&&!e.descList.length}},[n("cus-nav-bar",{attrs:{title:"选择问题描述","left-arrow":"",border:!1,"right-text":e.rightText},on:{"click-right":e.multiSelect}}),e._v(" "),n("section",{staticClass:"desc-content"},[n("section",{staticClass:"desc-list"},e._l(e.descList,(function(t,o){return n("van-cell",{key:o,class:{active:t.selected},attrs:{"is-link":"",title:t.name},on:{click:function(i){return e.selectDesc(t)}}},[n("template",{slot:"right-icon"},[n("i",{directives:[{name:"show",rawName:"v-show",value:!e.isMulti&&t.selected,expression:"!isMulti && item.selected"}],staticClass:"iconfont icon-gou"}),e._v(" "),n("img",{directives:[{name:"show",rawName:"v-show",value:e.isMulti&&t.selected,expression:"isMulti && item.selected"}],attrs:{src:i("2985"),alt:"selected",width:"20",height:"20"}}),e._v(" "),n("img",{directives:[{name:"show",rawName:"v-show",value:e.isMulti&&!t.selected,expression:"isMulti && !item.selected"}],attrs:{src:i("f97d"),alt:"select",width:"20",height:"20"}})])],2)})),1),e._v(" "),!e.loading&&!e.isMulti&&e.historyList.length&&e.descList.length?n("section",{staticClass:"history-list"},[n("h2",{staticClass:"van-hairline--bottom"},[e._v("历史补充说明")]),e._v(" "),e._l(e.historyList,(function(t,i){return n("right-swipe-cell",{key:i,attrs:{title:t.name,"btn-txt":"删除"},on:{"cell-click":function(i){return e.selectHistory(t)},"right-click":function(i){return e.removeRemarkHistory(t.id)}}})}))],2):e._e()]),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:e.isMulti,expression:"isMulti"}],staticClass:"btn",on:{click:e.selectMultiDesc}},[e._v("确认")]),e._v(" "),n("tip",{attrs:{"is-show":!e.loading&&!e.descList.length,"img-url":i("26eb"),"tip-cont":"当前检查项尚未设置问题描述"}})],1)},f=[],b=i("d082");function g(e){i("2865")}var _=!1,I=g,k="data-v-72554b36",y=null,v=Object(b["a"])(h,p,f,_,I,k,y);t["default"]=v.exports},f97d:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAADa0lEQVRYR9WZO2hUQRSG/zN7MYRgkRhEURRMoYKNGtGsEkj2TlLYCGrwVVn4IoplLIQFCy1FxaiFlQ+MKWwsNnNvAqIbwVehoCkUFEXRmBQh+GB3jhy9G9Y1utnNRscptpmdM989Z85jzhDKGMlkUjU1Na3xPK+FmVcz81Iims/Ms0UcEY0x81siGiKiB5lMZmBwcPBeMpm0pW5HpSwIw3CBtbaTmXcR0cJS1jLzayK6pJQ6k0gk3kx17ZQAgyCYw8zHAOwGUBUJfwEgBeA2gKdE9GpkZGRM5urq6mYz8yIAywFsANAOYEm07guAi0R01Pf9j8VAiwIGQbCNmU8DqAeQBdATaSFdTHj+fBiGcdE+gA4AMQDDRNTp+/61P8n5LeDAwICXyWQEbF90rkw2mz3U3t7+rBSwwv+mUqllsVjsFDPraO6c53kHW1paMpPJnRQwnU5Xj4+PXwewkYg+ATjs+/6F6YAVrg2CYA+Ak8xcDeBmTU3N1ng8Lnv9NH4BjDR3Q+AAvGfmjW1tbfcrCZeT1dfX10hENwHMFUjP8zYVavIXQGNMd2TW97FYrLm1tXVoJuByMvv7+5dms9lbEeQ5rfX+/P1+Aowc4qqY1VrbPFOaK/xg0aRS6paYm4i25TvOBGAUSsQB6olob6XPXDEryJlk5vORdy/LhaAJQGPMWQD7icj4vt9WTOBMzAdB0Bd5d7fW+sD36CE/UYZ4DsCz1q6YbigpF15CkFLqCYCMUqpBMs53QGPMcQBdAK5qrXeUu0El1hljrgDYDuCE1voISeKPx+MvJbcqpdYnEomSMkQloCbJOHckd6fT6cWUSqXWKqXuAnihtW6o9IblyDPGyHFbYq1dR2EYdllrxcQTB7McoZVck3NYpdQRMsb0AtgMYKfWWuz/z4cxRvzgMhH1CuBjACsArNJaP/rndD+cdiWAhwCeUBAEH5hZgnP9VOqzv/EBUdKQcmxYNPhZitDR0dGqjo6Or38DoNgePT09s2pra6Ww/eI+4P9gYped5LE4yXVm3uJsmHE+UDuf6pwvFpwvt/6LgjXSorslvwA6f2mKIKUP4+a1M5fAnb64C6TzrQ+BdLp5lDO10+23/ILS2QZmAaS7LeCCS7WbTfTCO0T+M4S1thGAPEPMK3iGeAdgSCl1fzrPEN8Ajn19wtuO19cAAAAASUVORK5CYII="},fa1b:function(e,t,i){"use strict";var n=i("1834");t["a"]={getCheckItemList:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",o=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=[e],a="select bc.item_id, ci.full_name as item_full_name  from batch_checkitem bc  inner join check_item ci on ci.id = bc.item_id  where bc.batch_id = ? ";if(a+=t?" and ci.is_for_rough = 1 ":" and ci.is_for_decorated = 1 ",i){var c=o?"project_position_checkitem":"position_checkitem";a+=" and bc.item_id in                     (select item_id from "+c+" where position_id = ? )",r.push(i)}return a+=" order by ci.sort ",n["a"].query(a,r)}}}}]);