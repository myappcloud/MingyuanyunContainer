(window["webpackJsonp_module_entry_zhkf_"]=window["webpackJsonp_module_entry_zhkf_"]||[]).push([["chunk-72386f96"],{"0523":function(e,t,a){"use strict";a("6d57");var i=a("c6e3"),n=a("fd50"),o=a("a654"),r=a("c2c1"),s=a("8ae6"),c=function(e){return i["a"].getRoomBaseInfo(e)},l=function(e){return i["a"].getRoomCustomer(e)},d=function(e,t,a){var i,n={batch_unit_id:e,unit_list:[]},o="0";(_.isEmpty(t)||1===t.length&&""===t[0])&&(i=!0,t=[o]);var r={unit:[""],floor_list:[],status_counter:{all:0}};n.unit_list.push(r);for(var s=0;s<t.length;s++){var c=t[s],l={floor:c,room_list:[]};r.floor_list.push(l);for(var d=0;d<a.length;d++){var m=a[d];!i&&m.floor!=c||m.batch_unit_id!=e||(m.floor=i?o:m.floor,l.room_list.push(m),r.status_counter["all"]+=1,m.room_status in r.status_counter?r.status_counter[m.room_status]+=1:r.status_counter[m.room_status]=1)}}return n},m=function(e){return i["a"].getRoomIsReviewed(e)},p=function(e){return i["a"].getRoomTypeDiagram(e).then((function(e){if(!e)return!1;var t=n["a"].when(!1);return e.forEach((function(e){t=t.then((function(t){return t?n["a"].resolve(!0):r["a"].checkFileIsExists(Object(s["e"])()+e.path)}))})),t}))},u=function(e){return i["a"].getDiagramById(e).then((function(e){if(e){if("dev"==window.ZHKF_GLOBAL_ENV.VUE_APP_ENV)return e.url;var t=Object(s["e"])()+e.path;return console.log(t,"========================"),r["a"].checkFileIsExists(t).then((function(e){return e?t:null}))}return null}))},h=function(e){try{return p(e).catch((function(){return!1})).then((function(e){return!!e}))}catch(t){return console.error(t),n["a"].when(!1)}},b=function(e){return o["a"].existsDesignChange(e)},v=function(e){return o["a"].getDesignChange(e)},f=function(e,t){return o["a"].addDesignChangeProblem(e,t)},g=function(e){return c(e).then((function(e){return e.building_name+(e.unit?e.unit+(e.unit.indexOf("单元")>-1?"":"单元"):"")+(-1==e.floor.indexOf("层")&&-1==e.floor.indexOf("楼")&&-1==e.floor.indexOf("公共区域")?e.floor+"楼":e.floor)+(-1!==e.room_no.indexOf("公共区域")?e.floor+"层 公共区域":e.room_no)}))};t["a"]={getRoomBaseInfo:c,getRoomCustomer:l,buildRoomListData:d,getRoomIsReviewed:m,getRoomTypeImageFileIsExists:p,getRoomTypeImageFileIsExistsIgnoreError:h,existsRoomDesignChange:b,getRoomDesignChange:v,addRoomDesignChangeProblem:f,getRoomTitle:g,getDiagramFullPathById:u,getBatchRoomList:function(e,t){return i["a"].getBatchRoomList(e,t)}}},"108b":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8CAYAAAA6/NlyAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyhpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMDY3IDc5LjE1Nzc0NywgMjAxNS8wMy8zMC0yMzo0MDo0MiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTUgKE1hY2ludG9zaCkiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6NzQ2Njc5NDNERjBBMTFFNzk5ODRGNjg2MjczRTk1QkYiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6NzQ2Njc5NDRERjBBMTFFNzk5ODRGNjg2MjczRTk1QkYiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo3ODZGMjNDMERGMDcxMUU3OTk4NEY2ODYyNzNFOTVCRiIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo3NDY2Nzk0MkRGMEExMUU3OTk4NEY2ODYyNzNFOTVCRiIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Pri76BcAAAUhSURBVHja7FtNbBtFFP5mvU7UJLLSBho3SI2SCkiNIAc4gMTPhQvcEAoI0VP5FaDeEELqBXGvqLiAOMIBJCo4cEQIFCSooAekNoQ0UYkDdkgaO5iUtMl6hzfetT0ez653E1t4nR3pZWd2Z3bmm+/Nm7fjF8Y5x0FKDGevBKsXjdSSPTMgQNalE8DDPjd9wMpX1sVMc+nKfMpNgJmS95JuYZkreVW0oE0Nu7IYGMs8hgReo/zDJCNdunbXCNK3sHEeublLVLZdkLY6QQk8+rrMllEDOjDcj9HJ9yl3jspTJANdbKwGadT30FhPI3V7Ejc2Z8FtVRNYFbC8Po2ajE6eozsvRW7XYaSJQyMMpfVZXQVDo8oGjmUeotwrEd5s30Y6c5+ksTUxlPXrsOus2Wj7FybekDSW+TPM8EgPuFSPaxhuulGdkdEe8CLTCj7oVJpJrEef4zqeBoZ1e3CvJJXhhjUctQ+FvTDeaMF6EGyTO2wcAGahU+kDk2LAMeAYcLST2YZzh4skebKD95KcCNBiiz7LZ93pFj77UAf66AjgbdzceQHrixcdw09bXPrki/TGt3wG/jMK+Vfxb7FYKQ8cPowjxz4gEA+0rY+OqbSF8zSQHyhXrgjnu8jPfUigvvdoUUapcIbAbtTaiLy455Tb0UcHAd+68U1tILKU8bUHu7+itJprqi/uiWft6KOjKs0MMVnVwzIueTNe70y49cvqOZP7rB19dJDh/kNPQj0aFZ5qAk94OHdTODI+0dRG3GOVQ8L999FRwOIYKJ15qj64wT6MTb1Dg7/f058dGPyIAI7X7oi8uOflx4fvI4BTffZKwgVuupLE8cxGiG3pGv3N0ZtOCgiBzB3HL27v04HUM3wfTsrOiXP03Uqfjtj734cZhJpOhLIbYRkK30dIo9XD/pfp//UYA44Bx4AjCTg2WjHgGHC8hmOG/9fUENQiR7xwl+ES/U1FHOTfKliRNzxm45Jv4FIURJyfaQLTDIVdRyx8GnnAFj6BJnbLUJh1YpsWFr6k649STE+0BPgOv81/pRwP1RhWZ8GGZe1ivXia8pcjqMo/IX/9Zdh22QUsg+ZqnFY9TOCfrW1s3/ocqZRFpbvFAU1XAxXReBbew+LymyhulqRTThl05YhHbqYe9yQqYppJjN9xJ5J9R13tZx7GnzU8T/Wfobc9GHIDWUBp511wToNl3KXCI2rWfb6zs4rsn0sVzXRAWsq1xrKpmO5qvF65YV1blo2l5TnKz8M/srYxqm9k+DJOjH1MuemAYLNYuf488mtrMivQhwnLz2xJygq7DUarug8zpTGUshzg5Rf40rgsNjYLMIxTmExfoNJdLcAuI1d8lsDmdWuvBWAdaFuZNMgMq7NoS1c/sF4s123memEDSfMZjN/2hXsYpxt6HvnNGazk/1AGa7cAiyaD2xhJ2zRhskozDWgmNQ4SKC5H5RquDeDIrf2FPgI9NnyBahxXhr6K9a0ZLOdWWqljAJa9BLJKQwOaawAGiYqv1qtqRn3GfydASfM5HB0SoNMS2KexmF3SGJkggKF1jZvbeAaIy7/5cA3zrcDK+7ut7PM2rmavIjExg5FDn1VqFW6eqtyrrzvLh90goP3yPl9LrVWoFWDd/x84Mn9N/FI4rRhFWY3LOg8JAf5jJUg9c78v0IBU86olNTS7gk72AnaP38P7/+5kyhanAoZm61Ota1uBdgqwTqVla8+ksurwhFmzXQfYa6vjGsPnZWU7kv4TYAAnHjy8VPrQ3QAAAABJRU5ErkJggg=="},"13cf":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8CAYAAAA6/NlyAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyhpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMDY3IDc5LjE1Nzc0NywgMjAxNS8wMy8zMC0yMzo0MDo0MiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6NzQ2Njc5NDhERjBBMTFFNzk5ODRGNjg2MjczRTk1QkYiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6NzQ2Njc5NDdERjBBMTFFNzk5ODRGNjg2MjczRTk1QkYiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTUgKE1hY2ludG9zaCkiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo3NDY2Nzk0M0RGMEExMUU3OTk4NEY2ODYyNzNFOTVCRiIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo3NDY2Nzk0NERGMEExMUU3OTk4NEY2ODYyNzNFOTVCRiIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Pq4SnRcAAAVgSURBVHja7FpNaCRFFK7q7szEmYQQJwZMQJOZxF1NNJnxoBEUchA9rAqLsntZxJ/sxd+TIorCXEQ8LN78AUG8aQS96yKKxqAhBMwkm82POzvJZCcZze9CZnq6fN07HWpqqnp6kpnQPfSDR/VPVb/66r16Ve914Xg8jiwII3cQsVtRqQAQO3QAyFHfKxwwdIkdrGlCldjivgwwZkCL2ClaJsw1y5agFQFQiSmxQ03aBKlxSq55s4AlloeHhx/z+/0XJUl6BO5DDnVaGULIz/l8/pOpqam/is80CtshaHl0dJQFKesDEQwGm6PR6CWfz/cRxvgUPAs42EsHoY8Dsiy/2N3drWSz2V9UVeVWlBjtykWtKwMDAx/CB55H7iIMlvjO0NDQeyIfJDGmrAOWBwcHHwKwLyGXEoB+NxaLPcDzOTwNy4FA4CJyN2GYiq9xVpgyDRugiw7K3Ygxfpy3p5B4HhoqdyL3051WGmbX4EYgLJrDvF1WIxHmAXbynrmmoCUHR0Q11y5qoPlqf41uYO3aAow8wB5gD7CrSDnuBzRNmwROw/77fuCIjSZ7EKv+aghXlEehaKmDjLoAvrm9vf1CIpGYvBWRSTLEoS83Nze/bdHxP1dWVsYymcy2viJ0dHTcHolEPoO2D1YhYwxkvHXiJp3L5S5BR36Hy4LOAEadnp7+olAo/CZooqbT6VcAbLbYRtvc3Pw3lUq9Uby3K+NzCxn1A7yzs/Oj2XFEJc+gkz/x6hNCEslkMmV23myzurqaBiBzVcggIOPyiZu0DITKs4d6HKpYyBKlWOUqZBALGfXTcEtLyxlOakXPNDwpCMjv7e/vD7PPe4Gg3ekqZTxx4oCbmppejUajZ82QMhgM+mOx2PvQoZhoIx8Khb4Mh8O9ZtByN1BnZ+enoi3tEWRUjibi8fhtRXNrAvbr5cjIyDW7H4C5uQK8Dho8Ddxuo4kKc3YG3cowDonM+ZgyDJqYmNBTyyrtA469DkMHenWuxm9YLEO1kuHttDzAHmAPsAfYA+xGwMTTsAfYVUR4gAknbGtY4JIgPt1tAJBbIpOmgRoRRaFQmHa9SgmZ5FhvCeDDNM3BwcE3bgcMSvuq0hzWARv5ptnZ2R/01KiLtXt5Zmbme8Q5pSdRYE0uqKqaT6VSYwB61oVg/8hmsxdyuZzGM2n9YBp7tNC43t3dvbm/vz/e1tamQsB+CgLwgMOx3gBFfby0tPQmKGuHmqKlyYR4PM6ewqPZeK4AhcPhPp/Pd4dgVA8HTL8GNnJWra2tr8uy/HCVGrqyt7f3AZQFGGSrJZKAIgxQ+Xw+vby8fBV8Tx6VpoFp0EapUDfsgUzNBAwjpy4sLMwi8f9j9lCMMXihUOjvvr6+r4u5Kztg/1lbW3s2mUxmeObIrKmENx05QEvWYTZXrFGl2XG7R4jZ814azKX/QEsXIpHIOIC+pxLYjY2NZwDsmsgckTivXfIzAJUfJ0Y0YMQBjanGdo4PY8rrm1PDEKj/ToEZcb6np+c7i0TcKtR7Cubf9UodFmhZxGU7R1PDmKrEdWLI+jiEWc+0jJJfI+vr6zdg/p/r6uoaB9B3MW3TW1tbTy8uLl5j21XY5pb99bCzTZYEjTRmbdYoZ8Cy+U6lSpPzJoOpXgctntfzywzYM3NzcwtUG963reSypoysBkuxGQ+TCtql62GByWmgxatg3mfb29u/1V+CN34OwF7hdP4owYytespxP0CBZK9ZT2o4wPn5+QSU9zHeVavkXWtFSo2+Qyht00scCxhxlj6RSdaFlBp/j3A8PKEcGmYAaZW8qtMB8+Yxz9StvCxyG2AkWOrsbCTqTv8LMABvq7mhr3On7gAAAABJRU5ErkJggg=="},"28c8":function(e,t,a){"use strict";a("6d57");var i=a("1834"),n=a("0938");t["a"]={getRoomSatisfactionValueList:function(e,t){var a="                 select sd.id , sd.dimension as name , rsv.value                 from satisfaction_dimension sd                     left join room_satisfaction_value rsv                         on rsv.batch_room_id = ? and sd.id = rsv.dimension_id                 where sd.type = ?                 order by sd.sort , sd.dimension";return i["a"].query(a,[t,e])},saveRoomSatisfactionValue:function(e,t,a){var o,r=["batch_id","batch_room_id","batch_unit_id","dimension_id","id","source","value"];if(!t)throw new TypeError("saveRoomSatisfactionValue: batchRoomId为空");e.delete("room_satisfaction_value",{batch_room_id:t},(function(){a&&a.length&&a.forEach((function(a){a.id=Object(n["j"])(),a.batch_room_id=t,console.log("字段=====",a),o=i["a"].getColumnsValues(a,r),e.insert("room_satisfaction_value",r,o)}))}))}}},"306c":function(e,t,a){e.exports=a.p+"img/loading.f979383a.gif"},4438:function(e,t,a){"use strict";var i=a("cb6b"),n=a("0e1c");t["a"]={getLocalBusinessToggle:function(){var e=i["a"].getObject(n["a"].BUSINESS_TOGGLE,i["a"].level.user);return e||{enable_opening_tab:0,enable_pass_when_add:0,enable_pass_when_to_repair:0,sign_when_receive_delivery:1,special_project_switch:0,take_photo_when_review:0,take_photo_when_regist:0,hide_owner_phone:0,enable_problem_reason:0}}}},4618:function(e,t,a){"use strict";a("5ab2"),a("6d57"),a("e44b"),a("e10e");var i=a("28f8"),n=a("fd50"),o=a("8ae6"),r=a("0938"),s=a("c2c1"),c=a("964e");function l(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,i)}return a}function d(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?l(Object(a),!0).forEach((function(t){Object(i["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):l(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var m=function(){var e=null;return{setProblemData:function(t){e=t,e&&(e.reviewImages=[])},getProblemData:function(){return e},takePhoto:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=o["a"].getNewProblemImagePath({folder:e.batch_unit_id+"/"+e.batch_room_id,imageId:r["a"].uuid()}),i=s["a"].takePhoto(a.full_path,d({withGraffiti:!0,text:c["a"].getWatermarkText()},t));return i.then((function(){e.reviewImages.push({img_local_fullpath:a.full_path,img_localpath:a.save_path,img_view_path:a.view_path})}),(function(e){if(e.notAllow)return n["a"].reject("请开启对 相机/相册 的访问权限")}))}}};t["a"]=m()},"4e60":function(e,t,a){var i=a("5454");t=e.exports=a("690e")(!1),t.push([e.i,"\n.zhkf .app-contact[data-v-7f77722d] {\n  display: inline-block;\n}\n.zhkf .app-contact > .app-contact-name[data-v-7f77722d] {\n    display: inline-block;\n    vertical-align: middle;\n    margin-right: 8px;\n}\n.zhkf .app-contact > .app-contact-chat[data-v-7f77722d],\n  .zhkf .app-contact > .app-contact-phone[data-v-7f77722d] {\n    display: inline-block;\n    width: 40px;\n    height: 24px;\n    vertical-align: middle;\n}\n.zhkf .app-contact > .app-contact-chat[data-v-7f77722d] {\n    background: url("+i(a("108b"))+") no-repeat center;\n    background-size: 26px auto;\n    margin-top: 2px;\n}\n.zhkf .app-contact > .app-contact-chat.disabled[data-v-7f77722d] {\n      background-image: url("+i(a("13cf"))+");\n}\n.zhkf .app-contact > .app-contact-phone[data-v-7f77722d] {\n    background: url("+i(a("839a"))+") no-repeat center;\n    background-size: 27px auto;\n}\n.zhkf .app-contact > .app-contact-phone.disabled[data-v-7f77722d] {\n      background-image: url("+i(a("c96c"))+");\n}\n",""])},6075:function(e,t,a){"use strict";a.r(t);a("5ab2"),a("6d57"),a("e44b"),a("e10e"),a("f548");var i=a("28f8"),n=a("4438"),o=a("0523"),r=a("964e"),s=a("f2de"),c=a("0938"),l=a("8ae6"),d=a("c2c1"),m=a("9072"),p=a("7508"),u=a("be25"),h=a("4618"),_=a("92fb"),b=a("ba1a");function v(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,i)}return a}function f(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?v(Object(a),!0).forEach((function(t){Object(i["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):v(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var g="[views]/problem-detail：",y={components:{AppContact:u["a"]},data:function(){return{hasRoomTypeDiagram:!1,roomTitle:"",batchTypeMap:{"专项检查":"special_checkitem","验房":"simulate","开放":"opening","在线开放":"online_opening","交付":"delivery","在线交付":"online_delivery"},problem:{},problem_images:{},delayDays:"",fromType:"",enable_pass_when_to_repair:!1,isGoingProblemPositionPage:!1}},computed:f(f({},Object(s["e"])({currentBatchType:function(e){return e.app.global.currentBatchType},currentMenuType:function(e){return e.app.global.currentMenuType},enableProblemReason:function(e){return e.app.global.enableProblemReason},contentHeight:function(e){return e.app.global.contentHeight},footerHeight:function(e){return e.app.global.footerHeight}})),{},{isShowCloseBtn:function(){return this.$checkRight("close_problem",this.problem.batch_type_code)&&("delivery"==this.fromType||"online_delivery"==this.fromType||"opening"==this.fromType)&&"已通过"!=this.problem.status&&"已作废"!=this.problem.status&&"非正常关闭"!=this.problem.status},isShowBackBtn:function(){return(this.$checkRight("reinspect_problem",this.problem.batch_type_code)||this.$checkRight("send_back_problem",this.problem.batch_type_code))&&("已整改"==this.problem.status||"已通过"==this.problem.status)},isShowPassBtn:function(){return(this.$checkRight("reinspect_problem",this.problem.batch_type_code)||this.$checkRight("pass_problem",this.problem.batch_type_code))&&"已整改"==this.problem.status||(this.$checkRight("reinspect_problem",this.problem.batch_type_code)||this.$checkRight("pass_problem",this.problem.batch_type_code))&&this.enable_pass_when_to_repair&&"待整改"===this.problem.status},isShowNormalBatchBtnGroup:function(){return this.isShowCloseBtn||this.isShowBackBtn||this.isShowPassBtn},isShowTodoBarchBtnGroup:function(){return"todo-dispatch"===this.fromType||"todo-sendback"===this.fromType}}),activated:function(){this.isGoingProblemPositionPage=!1},created:function(){var e=this,t=this.$route.query,i=t.batch_room_id,s=void 0===i?"":i,c=t.question_id,d=t.type;this.enable_pass_when_to_repair=1==n["a"].getLocalBusinessToggle().enable_pass_when_to_repair,this.fromType=d,console.log(g,"created()","fromType=".concat(this.fromType),["question_id=".concat(c),"batch_room_id=".concat(s)]),o["a"].getRoomTitle(s).then((function(t){e.roomTitle=t})),r["a"].getProblem(c).then((function(t){return e.problem={code:t.code||"",batch_type_code:"验房"==t.batch_type&&t.batch_child_type?e.batchTypeMap[t.batch_child_type]:e.batchTypeMap[t.batch_type],positionName:t.position_name,item_name:t.item_name,desc_names:t.remark?t.desc+"；"+t.remark:t.desc,builder_names:t.contractor_name,responsible_company_names:t.responsible_company_name,emergency_degree:t.emergency_degree,status:t.status,regist_date:t.regist_date?t.regist_date.slice(0,16):"",sent_back_time:t.sent_back_time||0,sent_back_date:t.sent_back_date?t.sent_back_date.slice(0,16):"",sent_back_reason:t.sent_back_reason,invalid_date:t.invalid_date?t.invalid_date.slice(0,16):"",invalid_reason:t.invalid_reason||"",close_reason:t.close_reason||"",close_date:t.close_date?t.close_date.slice(0,16):"",is_passed_when_add_txt:t.is_passed_when_add?"是":"否",repair_deadline:t.repair_deadline?t.repair_deadline.slice(0,10):"",repair_date:t.repair_date?t.repair_date.slice(0,16):"",repair_remark:t.repair_remark||"",regist_user_id:t.regist_user_id||"",review_date:t.review_date?t.review_date.slice(0,16):"",reviewed_by:t.reviewed_by||"",repaired_by:t.repaired_by||"",assign_user_id:t.assign_user_id||"",projectContractorLeaderId:t.projectContractorLeaderId||"",reasons:t.reasons.join("；"),sent_back_log_infos:t.sent_back_log_info},console.log(g,"created() - getProblem 获取问题详情",e.problem),{sent_back_time:e.problem.sent_back_time,problem_images:t.problem_images}})).then((function(t){var i=function(e){for(var t,i={before:[],after:[],review:[],yf_send_back:[]},n=0;n<e.length;n++){t=e[n].img_localpath||e[n].img_thumbnail_localpath,t?(e[n]._srcPath=l["f"](t),e[n].needDownload=!1):(e[n]._srcPath=a("b34b"),e[n].needDownload=!0);var o=void 0;switch(e[n].type){case"rectify_after":o=i.after;break;case"review":o=i.review;break;case"yf_send_back":o=i.yf_send_back;break;default:o=i.before}o.push(e[n])}return i};e.problem_images=i(t.problem_images),e.calcDelayDays()})).then((function(){if(null==window.take_photo_when_review)return m["a"].getReviewPhotoSetting()})),r["a"].canDisplayProblemPositionPoint(c).then((function(t){console.log(g,"create() - canDisplayProblemPositionPoint 是否可显示部位",t),e.hasRoomTypeDiagram=t}))},methods:{goProblemPosition:function(){this.isGoingProblemPositionPage||(this.isGoingProblemPositionPage=!0,this.$router.push({path:"/checkroom/".concat(this.currentMenuType||this.currentBatchType,"-problem-position"),query:{problem_id:this.$route.query.question_id}}))},closeProblem:function(){this.$router.push({path:"/checkroom/".concat(this.currentMenuType||this.currentBatchType,"-problem-close"),query:f({},this.$route.query)})},passProblem:function(){var e=b["a"].getDecodeQuery(this.$route.query),t=e.title,a=e.batch_unit_id,i=void 0===a?"":a,n=e.question_id,o=e.batch_room_id;return h["a"].setProblemData({title:t,fromType:this.fromType,question_id:n,batch_unit_id:i,batch_room_id:o,problem_images:this.problem_images,showLargeImages:this.showLargeImg}),this.$router.push("/checkroom/".concat(this.currentMenuType||this.currentBatchType,"-problem-confirm"))},sendbackProblem:function(){var e=b["a"].getDecodeQuery(this.$route.query),t=e.title,a=e.batch_room_id,i=void 0===a?"":a,n=e.question_id,o=e.batch_unit_id,r=void 0===o?"":o,s=(this.currentBatchType||this.fromType)+"_view";this.$router.push({path:"/checkroom/".concat(this.currentMenuType||this.currentBatchType,"-problem-back"),query:{title:t,batch_unit_id:r,question_id:n,batch_room_id:i,sent_back_time:this.problem.sent_back_time,from:s}})},setContractor:function(e){_["a"].setData([{problemId:this.$route.query.question_id,batchUnitId:this.$route.query.batch_unit_id}],e,this.fromType),this.$router.push({path:"/checkroom/".concat(this.currentMenuType||this.currentBatchType,"-contractor-reselect")})},calcDelayDays:function(){var e,t=this.problem.repair_deadline;"待整改"===this.problem.status&&t?(e=-c["a"].getDayDiffSinceToday(t),e>0&&(this.delayDays=e)):this.delayDays=""},updateScopeImageLocalPath:function(e,t){return e.some((function(a,i){if(a.img_url===t.url)return e[i].img_localpath=t.path,e[i]._srcPath=l["f"](t.path),!0}))},showLargeImg:function(e,t){var i,n=this,o=this.$route.query,s=o.batch_room_id,c=void 0===s?"":s,m=o.question_id,u=o.batch_unit_id,h=void 0===u?"":u,_=[];if(console.log(g,"showLargeImg 查看大图",t,e),!e[t].needDownload){for(var b=0;b<e.length;b++)e[b].img_localpath?_.push(e[b]._srcPath):(_.push(e[b].img_url),i=!0);return i?(console.log(g,"需要下载"),p["a"].checkIsWifi(!1).then((function(){return d["a"].openImageBrowser(_,t)})).then(null,null,(function(t){if(t&&t.path&&t.url)return n.updateScopeImageLocalPath(e,t)||console.error("updateScopeImageLocalPath: unexpected result"),r["a"].updateImageLocalPath(m,t.url,t.path).then((function(e){e.rowsAffected||console.error("ProblemService.updateImageLocalPath: unexpected rowsAffected value -> ",e.rowsAffected)}));console.error("openImageBrowser: downloaded path is invalid.",t)}))):d["a"].openImageBrowser(_,t)}e[t].needDownload=!1,e[t]._srcPath=a("306c");var v=e[t].img_url,f=v.substring(v.lastIndexOf("/")+1).replace(/\?.*/,""),y=l["c"]({type:"problem",folder:h+"/"+c});console.log(g,e[t].img_url,y);var w={url:e[t].img_url,path:y.full_path+f};d["a"].downloadFile([w],!0).then((function(){return n.updateScopeImageLocalPath(e,{url:e[t].img_url,path:y.save_path+f})||console.error("updateScopeImageLocalPath: unexpected result"),r["a"].updateImageLocalPath(m,e[t].img_url,y.save_path+f).then((function(e){e.rowsAffected||console.error("ProblemService.updateImageLocalPath: unexpected rowsAffected value -> ",e.rowsAffected)}))}))}}},w=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"problem-detail"},[a("cus-nav-bar",{attrs:{title:"问题详情","left-arrow":"",border:!1}}),e._v(" "),a("div",{staticClass:"head"},[a("div",{staticClass:"line",class:{purple:"待派单"===e.problem.status,grey:"已作废"===e.problem.status,black:"非正常关闭"===e.problem.status,red:"待整改"===e.problem.status,blue:"已整改"===e.problem.status,green:"已通过"===e.problem.status}}),e._v(" "),a("span",{staticClass:"status"},[e._v(e._s(e.problem.status))]),e._v(" "),a("van-tag",{directives:[{name:"show",rawName:"v-show",value:"紧急"===e.problem.emergency_degree||"非常紧急"===e.problem.emergency_degree,expression:"problem.emergency_degree === '紧急' || problem.emergency_degree === '非常紧急'"}],staticClass:"tag",attrs:{color:"紧急"===e.problem.emergency_degree?"#ff8a00":"#eb544d"}},[e._v(e._s(e.problem.emergency_degree))]),e._v(" "),e.problem.sent_back_time>0?a("van-tag",{staticClass:"tag",attrs:{color:"#FFBE00"}},[e._v("退回"+e._s(e.problem.sent_back_time)+"次")]):e._e(),e._v(" "),e.delayDays?a("van-tag",{staticClass:"tag",attrs:{color:"#a13eff"}},[e._v("超时"+e._s(e.delayDays)+"天")]):e._e()],1),e._v(" "),a("div",{staticClass:"content"},[a("div",{staticClass:"item-container"},[a("div",{staticClass:"item"},[a("div",{staticClass:"name"},[e._v("房间")]),e._v(" "),a("div",{staticClass:"value"},[e._v(e._s(e.roomTitle))])]),e._v(" "),e.problem.code?a("div",{staticClass:"item"},[a("div",{staticClass:"name"},[e._v("编号")]),e._v(" "),a("div",{staticClass:"value"},[e._v(e._s(e.problem.code))])]):e._e(),e._v(" "),a("div",{staticClass:"item"},[a("div",{staticClass:"name"},[e._v("部位")]),e._v(" "),a("div",{staticClass:"value",class:{"blue-color":e.hasRoomTypeDiagram}},[e._v("\n          "+e._s(e.problem.positionName)+"\n          "),e.hasRoomTypeDiagram?a("i",{staticClass:"iconfont icon-dingwei",on:{click:function(t){return e.goProblemPosition()}}}):e._e()])]),e._v(" "),a("div",{staticClass:"item"},[a("div",{staticClass:"name"},[e._v("检查项")]),e._v(" "),a("div",{staticClass:"value"},[e._v(e._s(e.problem.item_name))])]),e._v(" "),a("div",{staticClass:"item"},[a("div",{staticClass:"name"},[e._v("问题描述")]),e._v(" "),a("div",{staticClass:"value"},[e._v(e._s(e.problem.desc_names))])]),e._v(" "),e.enableProblemReason?a("div",{staticClass:"item"},[a("div",{staticClass:"name"},[e._v("问题原因")]),e._v(" "),a("div",{staticClass:"value"},[e._v(e._s(e.problem.reasons))])]):e._e()]),e._v(" "),a("div",{staticClass:"item-container"},[a("div",{staticClass:"item"},[a("div",{staticClass:"name"},[e._v("整改前照片")]),e._v(" "),a("div",{staticClass:"value"},[e.problem_images.before&&e.problem_images.before.length>0?a("div",{staticClass:"imgs"},e._l(e.problem_images.before,(function(t,i){return a("div",{key:i,staticClass:"img",on:{click:function(t){return e.showLargeImg(e.problem_images.before,i)}}},[a("img",{attrs:{src:t._srcPath,alt:""}}),e._v(" "),t.needDownload&&t._srcPath.indexOf("img_blank.png")>0?a("a",{staticClass:"downloadTip"},[e._v("点击下载")]):e._e()])})),0):a("span",[e._v("无")])])]),e._v(" "),a("div",{staticClass:"item"},[a("div",{staticClass:"name"},[e._v("整改后照片")]),e._v(" "),a("div",{staticClass:"value"},[e.problem_images.after&&e.problem_images.after.length>0?a("div",{staticClass:"imgs"},e._l(e.problem_images.after,(function(t,i){return a("div",{key:i,staticClass:"img",on:{click:function(t){return e.showLargeImg(e.problem_images.after,i)}}},[a("img",{attrs:{src:t._srcPath,alt:""}}),e._v(" "),t.needDownload&&t._srcPath.indexOf("img_blank.png")>0?a("a",{staticClass:"downloadTip"},[e._v("点击下载")]):e._e()])})),0):a("span",[e._v("无")])])]),e._v(" "),a("div",{staticClass:"item"},[a("div",{staticClass:"name"},[e._v("复验时照片")]),e._v(" "),a("div",{staticClass:"value"},[e.problem_images.review&&e.problem_images.review.length>0?a("div",{staticClass:"imgs"},e._l(e.problem_images.review,(function(t,i){return a("div",{key:i,staticClass:"img",on:{click:function(t){return e.showLargeImg(e.problem_images.review,i)}}},[a("img",{attrs:{src:t._srcPath,alt:""}}),e._v(" "),t.needDownload&&t._srcPath.indexOf("img_blank.png")>0?a("a",{staticClass:"downloadTip"},[e._v("点击下载")]):e._e()])})),0):a("span",[e._v("无")])])]),e._v(" "),a("div",{staticClass:"item"},[a("div",{staticClass:"name"},[e._v("整改说明")]),e._v(" "),a("div",{staticClass:"value"},[e._v(e._s(e.problem.repair_remark))])])]),e._v(" "),a("div",{staticClass:"item-container"},[a("div",{staticClass:"item"},[e._m(0),e._v(" "),a("div",{staticClass:"value"},[e._v(e._s(e.problem.builder_names))])]),e._v(" "),a("div",{staticClass:"item",class:{"last-child":"是"!==e.problem.is_passed_when_add_txt}},[a("div",{staticClass:"name"},[e._v("责任单位")]),e._v(" "),a("div",{staticClass:"value"},[e._v(e._s(e.problem.responsible_company_names))])])]),e._v(" "),e._l(e.problem.sent_back_log_infos,(function(t,i){return a("div",{key:i,staticClass:"item-container"},[a("div",{staticClass:"item"},[a("div",{staticClass:"name"},[e._v("退回时间")]),e._v(" "),a("div",{staticClass:"value"},[e._v(e._s(t.operate_date.substring(0,16)))])]),e._v(" "),a("div",{staticClass:"item"},[a("div",{staticClass:"name"},[e._v("操作人")]),e._v(" "),a("div",{staticClass:"value"},[e._v("\n          "+e._s(t.operate_user_name)+"\n          "),t.contractor_name?a("span",[e._v("("+e._s(t.contractor_name)+")")]):e._e()])]),e._v(" "),e._m(1,!0),e._v(" "),a("div",{staticClass:"item"},[a("div",{staticClass:"name"},[e._v("退回原因")]),e._v(" "),a("div",{staticClass:"value"},[e._v("\n          "+e._s(t.operate_reason&&t.remark?t.operate_reason+";"+t.remark:(t.operate_reason||"")+(t.remark||""))+"\n        ")])])])})),e._v(" "),a("div",{staticClass:"item-container",class:{"big-left":!!e.problem.repair_deadline&&!!e.problem.projectContractorLeaderId}},["是"===e.problem.is_passed_when_add_txt?a("div",{staticClass:"item"},[a("div",{staticClass:"name"},[e._v("现场整改通过")]),e._v(" "),a("div",{staticClass:"value"},[e._v(e._s(e.problem.is_passed_when_add_txt))])]):e._e(),e._v(" "),a("div",{staticClass:"item"},[a("div",{staticClass:"name"},[e._v("登记时间")]),e._v(" "),a("div",{staticClass:"value"},[e._v(e._s(e.problem.regist_date))])]),e._v(" "),a("div",{staticClass:"item"},[a("div",{staticClass:"name mid"},[e._v("登记人")]),e._v(" "),a("div",{staticClass:"value"},[a("app-contact",{attrs:{id:e.problem.regist_user_id}})],1)]),e._v(" "),e.problem.repair_deadline?[e.problem.repair_deadline?a("div",{directives:[{name:"show",rawName:"v-show",value:-1==="待派单|已作废|非正常关闭".indexOf(e.problem.status),expression:"'待派单|已作废|非正常关闭'.indexOf(problem.status) === -1"}],staticClass:"item"},[a("div",{staticClass:"name"},[e._v("整改时限")]),e._v(" "),a("div",{staticClass:"value"},[e._v(e._s(e.problem.repair_deadline))])]):e._e(),e._v(" "),e.problem.repair_date?a("div",{staticClass:"item"},[a("div",{staticClass:"name"},[e._v("整改时间")]),e._v(" "),a("div",{staticClass:"value"},[e._v(e._s(e.problem.repair_date))])]):e._e(),e._v(" "),e.problem.projectContractorLeaderId?a("div",{staticClass:"item"},[a("div",{staticClass:"name mid"},[e._v("承建商项目经理")]),e._v(" "),a("div",{staticClass:"value"},[a("app-contact",{attrs:{id:e.problem.projectContractorLeaderId}})],1)]):e._e(),e._v(" "),e.problem.repaired_by||"已作废"===e.problem.status||"待整改"===e.problem.status?a("div",{staticClass:"item"},[a("div",{staticClass:"name mid"},[e._v("整改工程师")]),e._v(" "),a("div",{staticClass:"value"},["待整改"===e.problem.status||"已作废"===e.problem.status?a("app-contact",{attrs:{id:e.problem.assign_user_id}}):a("app-contact",{attrs:{id:e.problem.repaired_by}})],1)]):e._e()]:e._e(),e._v(" "),e.problem.review_date?a("div",{staticClass:"item"},[a("div",{staticClass:"name"},[e._v("复验时间")]),e._v(" "),a("div",{staticClass:"value"},[e._v(e._s(e.problem.review_date))])]):e._e(),e._v(" "),e.problem.reviewed_by?a("div",{staticClass:"item"},[a("div",{staticClass:"name mid"},[e._v("复验人")]),e._v(" "),a("div",{staticClass:"value"},[a("app-contact",{attrs:{id:e.problem.reviewed_by}})],1)]):e._e()],2),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.problem.sent_back_time>0,expression:"problem.sent_back_time > 0"}],staticClass:"item-container"},[a("div",{staticClass:"item"},[a("div",{staticClass:"name"},[e._v("退回时间")]),e._v(" "),a("div",{staticClass:"value"},[e._v(e._s(e.problem.sent_back_date))])]),e._v(" "),a("div",{staticClass:"item"},[a("div",{staticClass:"name"},[e._v("退回原因")]),e._v(" "),a("div",{staticClass:"value"},[e._v(e._s(e.problem.sent_back_reason))])]),e._v(" "),a("div",{staticClass:"item"},[a("div",{staticClass:"name"},[e._v("退回时照片")]),e._v(" "),a("div",{staticClass:"value"},[e.problem_images.yf_send_back&&e.problem_images.yf_send_back.length>0?a("div",{staticClass:"imgs"},e._l(e.problem_images.yf_send_back,(function(t,i){return a("div",{key:i,staticClass:"img",on:{click:function(t){return e.showLargeImg(e.problem_images.yf_send_back,i)}}},[a("img",{attrs:{src:t._srcPath,alt:""}}),e._v(" "),t.needDownload&&t._srcPath.indexOf("img_blank.png")>0?a("a",{staticClass:"downloadTip"},[e._v("点击下载")]):e._e()])})),0):a("span",[e._v("无")])])])]),e._v(" "),"已作废"==e.problem.status?a("div",{staticClass:"item-container"},[a("div",{staticClass:"item"},[a("div",{staticClass:"name"},[e._v("作废时间")]),e._v(" "),a("div",{staticClass:"value"},[e._v(e._s(e.problem.invalid_date))])]),e._v(" "),a("div",{staticClass:"item"},[a("div",{staticClass:"name"},[e._v("作废原因")]),e._v(" "),a("div",{staticClass:"value"},[e._v(e._s(e.problem.invalid_reason))])])]):e._e(),e._v(" "),"非正常关闭"==e.problem.status?a("div",{staticClass:"item-container"},[a("div",{staticClass:"item"},[a("div",{staticClass:"name"},[e._v("关闭时间")]),e._v(" "),a("div",{staticClass:"value"},[e._v(e._s(e.problem.close_date))])]),e._v(" "),a("div",{staticClass:"item"},[a("div",{staticClass:"name"},[e._v("关闭原因")]),e._v(" "),a("div",{staticClass:"value"},[e._v(e._s(e.problem.close_reason))])])]):e._e()],2),e._v(" "),e.isShowNormalBatchBtnGroup||e.isShowTodoBarchBtnGroup?a("div",{staticClass:"footer"},[e.isShowNormalBatchBtnGroup?a("ul",{staticClass:"btn-wrapper"},[e.isShowCloseBtn?a("li",{staticClass:"unusual",on:{click:function(t){return e.closeProblem()}}},[e._v("非正常关闭")]):e._e(),e._v(" "),e.isShowBackBtn?a("li",{staticClass:"back",on:{click:function(t){return e.sendbackProblem()}}},[e._v("退回")]):e._e(),e._v(" "),e.isShowPassBtn?a("li",{staticClass:"pass",on:{click:function(t){return e.passProblem()}}},[e._v("通过")]):e._e()]):e._e(),e._v(" "),e.isShowTodoBarchBtnGroup?a("ul",{staticClass:"btn-wrapper"},["todo-dispatch"===e.fromType?a("li",{staticClass:"back",on:{click:function(t){return e.setContractor("指派承建商")}}},[e._v("指派承建商")]):e._e(),e._v(" "),"todo-sendback"===e.fromType?a("li",{staticClass:"pass",on:{click:function(t){return e.setContractor("重新指派承建商")}}},[e._v("重新指派承建商")]):e._e()]):e._e()]):e._e()],1)},k=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"name"},[a("div",{staticClass:"builder"},[e._v("\n            承建商\n            "),a("span",[e._v("(整改单位)")])])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"item"},[a("div",{staticClass:"name"},[e._v("来源")]),e._v(" "),a("div",{staticClass:"value"},[e._v("承建商APP")])])}],A=a("d082");function C(e){a("9f69")}var I=!1,R=C,D="data-v-93092190",x=null,G=Object(A["a"])(y,w,k,I,R,D,x);t["default"]=G.exports},6768:function(e,t,a){t=e.exports=a("690e")(!1),t.push([e.i,"\n.zhkf .problem-detail[data-v-93092190] {\n  height: 100%;\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-orient: vertical;\n  -webkit-box-direction: normal;\n      -ms-flex-direction: column;\n          flex-direction: column;\n  background: #fff;\n}\n.zhkf .problem-detail .tag[data-v-93092190] {\n    margin-left: 10px;\n}\n.zhkf .problem-detail .red[data-v-93092190] {\n    background: #eb544d;\n}\n.zhkf .problem-detail .blue[data-v-93092190] {\n    background: #0099ff;\n}\n.zhkf .problem-detail .purple[data-v-93092190] {\n    background: #a13eff;\n}\n.zhkf .problem-detail .grey[data-v-93092190] {\n    background: #a0a0a0;\n}\n.zhkf .problem-detail .black[data-v-93092190] {\n    background: #000;\n}\n.zhkf .problem-detail .green[data-v-93092190] {\n    background: #00cb59;\n}\n.zhkf .problem-detail .head[data-v-93092190] {\n    height: 45px;\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n    -webkit-box-align: center;\n        -ms-flex-align: center;\n            align-items: center;\n    padding: 0 15px;\n    background: #f4f4f4;\n    -ms-flex-negative: 0;\n        flex-shrink: 0;\n}\n.zhkf .problem-detail .head .status[data-v-93092190] {\n      -webkit-box-flex: 1;\n          -ms-flex: 1;\n              flex: 1;\n      font-size: 15px;\n      margin-left: 8px;\n      color: #909090;\n}\n.zhkf .problem-detail .head .line[data-v-93092190] {\n      width: 3px;\n      height: 14px;\n      border-radius: 1.5px;\n}\n.zhkf .problem-detail .content[data-v-93092190] {\n    overflow: auto;\n    -webkit-box-flex: 1;\n        -ms-flex-positive: 1;\n            flex-grow: 1;\n    max-height: 100%;\n    padding-left: 10px;\n    padding-right: 10px;\n    padding-bottom: 10px;\n    background: #f4f4f4;\n}\n.zhkf .problem-detail .content .item-container[data-v-93092190] {\n      background: #ffffff;\n      border-radius: 6px;\n      padding: 20px 15px;\n}\n.zhkf .problem-detail .content .item-container[data-v-93092190]:not(:first-child) {\n        margin-top: 10px;\n}\n.zhkf .problem-detail .content .big-left .item .name[data-v-93092190] {\n      width: 120px;\n}\n.zhkf .problem-detail .content .item[data-v-93092190] {\n      display: -webkit-box;\n      display: -ms-flexbox;\n      display: flex;\n      font-size: 14px;\n      line-height: 20px;\n}\n.zhkf .problem-detail .content .item[data-v-93092190]:not(:first-child) {\n        margin-top: 16px;\n}\n.zhkf .problem-detail .content .item .name[data-v-93092190] {\n        color: #909090;\n        width: 90px;\n        -ms-flex-negative: 0;\n            flex-shrink: 0;\n}\n.zhkf .problem-detail .content .item .name.mid[data-v-93092190] {\n          -ms-flex-item-align: center;\n              align-self: center;\n}\n.zhkf .problem-detail .content .item .name .builder[data-v-93092190] {\n          text-align: center;\n          width: 60px;\n}\n.zhkf .problem-detail .content .item .name .builder span[data-v-93092190] {\n            display: block;\n            font-size: 12px;\n}\n.zhkf .problem-detail .content .item .value[data-v-93092190] {\n        color: #303030;\n        -webkit-box-flex: 1;\n            -ms-flex: 1;\n                flex: 1;\n        word-break: break-all;\n}\n.zhkf .problem-detail .content .item .value.blue-color[data-v-93092190] {\n          color: #0099ff;\n}\n.zhkf .problem-detail .content .br[data-v-93092190] {\n      height: 4px;\n      margin-top: 16px;\n}\n.zhkf .problem-detail .content .imgs[data-v-93092190] {\n      display: -webkit-box;\n      display: -ms-flexbox;\n      display: flex;\n}\n.zhkf .problem-detail .content .imgs .img[data-v-93092190] {\n        width: 60px;\n        height: 60px;\n        border-radius: 2px;\n        margin-right: 10px;\n        margin-bottom: 10px;\n        overflow: hidden;\n        position: relative;\n}\n.zhkf .problem-detail .content .imgs .img img[data-v-93092190] {\n          width: 100%;\n}\n.zhkf .problem-detail .content .imgs .img .downloadTip[data-v-93092190] {\n          position: absolute;\n          top: 50%;\n          left: 50%;\n          -webkit-transform: translate(-50%, -50%);\n                  transform: translate(-50%, -50%);\n          color: #606060;\n          width: 100%;\n          font-size: 12px;\n          text-align: center;\n}\n.zhkf .footer[data-v-93092190] {\n  -ms-flex-negative: 0;\n      flex-shrink: 0;\n  background: #fff;\n  height: 60px;\n  padding: 7px 12px;\n  border-top: 1px solid #ebebeb;\n}\n.zhkf .footer .btn-wrapper[data-v-93092190] {\n    width: 100%;\n    height: 100%;\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n    height: 45px;\n}\n.zhkf .footer .btn-wrapper li[data-v-93092190] {\n      -webkit-box-flex: 1;\n          -ms-flex: 1;\n              flex: 1;\n      text-align: center;\n      line-height: 45px;\n      font-size: 16px;\n      border-radius: 23px;\n}\n.zhkf .footer .btn-wrapper li.unusual[data-v-93092190], .zhkf .footer .btn-wrapper li.back[data-v-93092190] {\n        background: #fff;\n        color: #0099ff;\n        border: 1px solid #0099ff;\n}\n.zhkf .footer .btn-wrapper li.pass[data-v-93092190] {\n        background: #0099ff;\n        color: #fff;\n}\n.zhkf .footer .btn-wrapper li[data-v-93092190]:last-child {\n        background: #0099ff !important;\n        color: #fff !important;\n        border: none;\n}\n.zhkf .footer .btn-wrapper li[data-v-93092190]:not(:first-child) {\n        margin-left: 11px;\n}\n",""])},"760e":function(e,t,a){"use strict";var i=a("1834"),n=function(e,t,a){var n="毛坯"===t?" and is_for_rough = 1 ":" and is_for_decorated = 1 ",o="select id, name, is_remark_required, sort from check_item_desc where check_item_id = ? "+n+" order by sort";return a&&(o="select desc.id, desc.name, desc.is_remark_required, desc.sort  from check_item_desc desc where check_item_id = ?"+n+" order by desc.sort"),i["a"].query(o,[e])},o=function(e,t){var a="毛坯"===t?" and is_for_rough = 1 ":" and is_for_decorated = 1 ",n="select desc.id, desc.name, desc.is_remark_required, desc.sort from check_item_desc desc left join desc_room_average_problem_num desc_num  on desc.id=desc_num.desc_id where check_item_id = ? "+a+" order by desc_num.num desc, desc.sort";return i["a"].query(n,[e])},r=function(e){var t="select distinct id.id,id.name from check_item_desc id inner join checkroom_problem cp on cp.item_id = id.check_item_id where cp.batch_room_id = ?";return i["a"].query(t,[e])};t["a"]={getRoomCheckListDescList:o,getCheckItemDescList:n,getDescByBathRoomId:r,getDescByIds:function(e){_.isArray(e)&&(e=e.join("','"));var t="select id,name,is_remark_required from check_item_desc where id in ('"+e+"')";return i["a"].query(t)},searchDesc:function(e,t){var a="select id,name,check_item_id as item_id from check_item_desc where check_item_id in ("+t+') and (lower(name) like "%" || ? || "%" or upper(name) like "%" || ? || "%") order by name';return i["a"].query(a,[e,e])}}},"839a":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8CAYAAAA6/NlyAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyhpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMDY3IDc5LjE1Nzc0NywgMjAxNS8wMy8zMC0yMzo0MDo0MiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTUgKE1hY2ludG9zaCkiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6Nzg2RjIzQkVERjA3MTFFNzk5ODRGNjg2MjczRTk1QkYiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6Nzg2RjIzQkZERjA3MTFFNzk5ODRGNjg2MjczRTk1QkYiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo3ODZGMjNCQ0RGMDcxMUU3OTk4NEY2ODYyNzNFOTVCRiIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo3ODZGMjNCRERGMDcxMUU3OTk4NEY2ODYyNzNFOTVCRiIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PkZbwwsAAAtqSURBVHja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"},"92fb":function(e,t,a){"use strict";a("6d57");var i=a("dd0a"),n=(a("ed63"),a("8cf2"),a("fd50")),o=a("0e79"),r={},s=1e3,c=0;r.formatUploadData=function(e,t,a){var i={problemIdList:[],batchUnitIdList:[],contractorId:t,forbidContractorReturn:a};return _.each(e,(function(e){i.problemIdList.push(e.problemId),_.includes(i.batchUnitIdList,e.batchUnitId)||i.batchUnitIdList.push(e.batchUnitId)})),i},r.uploadData=function(e,t,a){var i=n["a"].when(),l=0;c=e.length;var d=[];while(l<c){var m=c-l>s?s:c-l,p=r.formatUploadData(e.slice(l,l+m),t,a);l+=m,d.push(p)}return _.each(d,(function(e){i=i.then((function(){return Object(o["a"])(e)}))})),i.then((function(e){return console.log("指派承建商 then",e),Promise.resolve()})).catch((function(e){return console.error("指派承建商 catch",e),Promise.reject()}))};var l=r;t["a"]=function(){var e={list:[],selectedId:-1,operateType:"指派承建商",operateReason:"指派",problemId:[],problemData:[],from:"",forbidContractorReturn:0},t={getList:function(t){var a=e.problemId.length>0?e.problemId[0]:"";return i["a"].getProjectContractorList(a,t).then((function(t){e.list=t}))},setSelectedConstructionId:function(t){e.selectedId!==t&&(e.selectedId=t)},setData:function(a,i,n){_.isArray(a)||(a=[a]),e.problemData=a;var o=[];a.forEach((function(e){o.push(e.problemId)})),e.problemId!==o&&(e.problemId=o,t.getList("")),e.operateType!==i&&(e.operateType=i,"指派承建商"===e.operateType?e.operateReason="指派":"重新指派承建商"===e.operateType?e.operateReason="重新指派":e.operateReason=null),e.from=n},changeConstruction:function(){if(-1!==e.selectedId){var t=e.problemId;return l.uploadData(e.problemData,e.selectedId,e.forbidContractorReturn).then((function(){return i["a"].changeConstruction(t,e.selectedId,e.operateType,e.operateReason)}))}}};return{model:e,init:function(e){return t.getList(e)},getList:function(e){return t.getList(e)},setSelectedConstructionId:function(e){return t.setSelectedConstructionId(e)},setData:function(e,a,i){return i=i||"",t.setData(e,a,i)},setForbidContractorReturn:function(t){e.forbidContractorReturn!==t&&(e.forbidContractorReturn=t)},changeConstruction:function(){return t.changeConstruction()}}}()},"94b6":function(e,t,a){var i=a("4e60");"string"===typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);var n=a("85cb").default;n("f752cdd6",i,!0,{})},"9f69":function(e,t,a){var i=a("6768");"string"===typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);var n=a("85cb").default;n("851e4154",i,!0,{})},a654:function(e,t,a){"use strict";var i=a("1834"),n=a("0938");t["a"]={existsDesignChange:function(e){var t="select 1 from room_design_change a inner join batch_room b on a.room_id = b.room_id where b.id = ?";return i["a"].queryOne(t,[e]).then((function(e){return!_.isEmpty(e)}))},getDesignChange:function(e){var t="select a.id, a.location, a.content, a.remark, a.sort from room_design_change a inner join batch_room b on a.room_id = b.room_id where b.id = ? order by a.sort";return i["a"].query(t,[e])},addDesignChangeProblem:function(e,t){if(e&&t){var a=n["a"].uuid();i["a"].insert("room_design_change_problem",["id","design_change_id","checkroom_problem_id"],[a,t,e])}}}},af93:function(e,t,a){"use strict";var i=a("1834");t["a"]={getRoomTypeDiagramList:function(e){var t="select rdp.id,rdp.coordinate,rdp.position_id,rdp.diagram_id from roomtype_diagram_partition rdp              inner join batch_room br on br.room_type_id = rdp.roomtype_id              inner join position p on p.id = rdp.position_id             where br.id = ?";return i["a"].query(t,[e])},hasRoomTypeDiagram:function(e){var t="select count(rdp.id) as count from roomtype_diagram_partition rdp              inner join batch_room br on br.room_type_id = rdp.roomtype_id              where br.id = ? and rdp.coordinate <> ''";return i["a"].queryOne(t,[e]).then((function(e){return e.count>0}))},isPositionInDiagram:function(e,t){return i["a"].exists("roomtype_diagram_partition",{diagram_id:e,position_id:t})},getHasPartitionByDiagramId:function(e){return i["a"].exists("roomtype_diagram_partition",{diagram_id:e})}}},be25:function(e,t,a){"use strict";a("cc57");var i=a("964e"),n={name:"AppContact",props:{id:String,showName:Boolean,showPhone:Boolean},data:function(){return{name:"",phone:"",scope:"",canUseChat:"",user:null}},watch:{id:function(e){e&&this.getInfo(e)}},created:function(){this.id&&this.getInfo(this.id)},methods:{getInfo:function(e){var t=this;i["a"].getUserInfo(e).then((function(e){e?(t.name=e.name,t.phone=e.mobile?"tel:"+e.mobile:"",t.canUseChat=!!e.chat_id,t.user={id:e.chat_id,name:e.name,avatar:e.avatar,type:"PRIVATE"}):t.user=null}))},openChat:function(){},clickShowName:function(){return!1!==this.showName},clickShowPhone:function(){return!1!==this.showPhone}}},o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-contact"},[e.name?a("div",{staticClass:"app-contact-name"},[e._v(e._s(e.name))]):e._e(),e._v(" "),e.phone?a("a",{staticClass:"app-contact-phone",class:{disabled:!e.phone},attrs:{"data-track":"拨打电话",href:e.phone}}):a("a",{staticClass:"app-contact-phone",class:{disabled:!e.phone},attrs:{"data-track":"拨打电话"}})])},r=[],s=a("d082");function c(e){a("94b6")}var l=!1,d=c,m="data-v-7f77722d",p=null,u=Object(s["a"])(n,o,r,l,d,m,p);t["a"]=u.exports},c96c:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8CAYAAAA6/NlyAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyhpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMDY3IDc5LjE1Nzc0NywgMjAxNS8wMy8zMC0yMzo0MDo0MiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6NzQ2Njc5NENERjBBMTFFNzk5ODRGNjg2MjczRTk1QkYiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6NzQ2Njc5NEJERjBBMTFFNzk5ODRGNjg2MjczRTk1QkYiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTUgKE1hY2ludG9zaCkiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo3ODZGMjNCRURGMDcxMUU3OTk4NEY2ODYyNzNFOTVCRiIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo3ODZGMjNCRkRGMDcxMUU3OTk4NEY2ODYyNzNFOTVCRiIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PoRiS84AAAxhSURBVHja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"},d42a:function(e,t,a){"use strict";a("6d57");var i=a("fd50"),n=a("1834"),o=a("0938"),r=a("9430"),s=a("c6e3"),c=a("28c8"),l=a("a405");t["a"]={saveDeliveryInfo:function(e,t){var a,d,m,p,u,h={"顺利收楼":"delivery","先收楼后处理":"process_after_delivery","暂不收楼":"delivery_after_process","先拒收后收楼":"reject_then_receive"},_=function(e,t,a){var i=[];return e&&e.length&&e.forEach((function(e){i.push({batch_unit_id:t,batch_id:a,dimension_id:e.id,value:e.value,source:"app"})})),i};return s["a"].getRoomParams(e).then((function(s){if(!s||!s.batch_id||!s.batch_unit_id)return console.error("saveDeliveryInfo：未找到对应房间信息。batchRoomId:"+e),i["a"].reject("未找到对应房间信息");var b=!1;return n["a"].transaction((function(i){p=_(t.satisfactionList,s.batch_unit_id,s.batch_id),delete t.satisfactionList,u=t.delivery_items,delete t.delivery_items,t.delivery_date=o["a"].getNowDate(),"暂不收楼"===t.delivery_situation&&(m={delivery_date:t.delivery_date,delivery_status:t.delivery_status,delivery_situation:t.delivery_situation});var n=m||t;n.assess_customer_status="待评价",i.update("batch_room",n,{id:e},(function(n){if(!n.rowsAffected)throw console.error("saveDeliveryInfo：未更新对应房间。batchRoomId:"+e),new Error("未更新对应房间");if(r["a"].existsRoomDeliveryData(i,e,"delivery_after_process",(function(){i.update("batch_room",{first_delivery_situation:t.delivery_situation,first_delivery_date:t.delivery_date},{id:e})}),(function(){i.update("batch_room",{first_delivery_situation:t.delivery_situation,first_delivery_date:t.delivery_date},{id:e,first_delivery_situation:""})})),d=h[t.delivery_situation],!d)throw console.error("saveDeliveryInfo：delivery_situation 枚举值无效"),new Error("delivery_situation 枚举值无效");r["a"].deleteRoomDeliveryData(i,e),l["a"].deleteRoomDeliveryRejection(i,e),a={type:"房间",operation:d,relation_id:e,batch_unit_id:s.batch_unit_id,batch_room_id:e,batch_id:s.batch_id},r["a"].insert(i,a),b=!0,"delivery_after_process"==d&&l["a"].insert(i,e,{batch_unit_id:s.batch_unit_id,reason:t.reason,remark:t.remark,created_by_name:t.created_by_name})})),c["a"].saveRoomSatisfactionValue(i,e,p),u&&u.length&&u.forEach((function(t){t.value&&i.update("batch_room_delivery_item",{value:t.value},{id:t.id,batch_room_id:e})}))})).then((function(){b&&window.uploadStatus("waitUpload")}))}))},saveReviewInfo:function(e,t){var a,c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return s["a"].getRoomParams(e).then((function(s){if(!s||!s.batch_id||!s.batch_unit_id)return console.error("saveReviewInfo：未找到对应房间信息。batchRoomId:"+e),i["a"].reject("未找到对应房间信息");var l=!1;return n["a"].transaction((function(i){if(t.delivery_status="已交付",t.review_date=o["a"].getNowDate(),i.update("batch_room",t,{id:e},(function(t){if(!t.rowsAffected)throw console.error("saveReviewInfo：未更新对应房间。batchRoomId:"+e),new Error("未更新对应房间");a={type:"房间",operation:"reviewed",relation_id:e,batch_unit_id:s.batch_unit_id,batch_room_id:e,batch_id:s.batch_id},r["a"].insert(i,a),l=!0})),c&&c.length){var d,m=["id","batch_room_id","batch_unit_id","type","img_localpath","sort"],p=1;i.delete("batch_room_images",{batch_room_id:e}),c.forEach((function(t){if(t.localPath){var c={};c.id=o["a"].uuid(),c.batch_room_id=e,c.batch_unit_id=s.batch_unit_id,c.type="review",c.img_localpath=t.localPath,c.sort=p,d=n["a"].getColumnsValues(c,m),i.insert("batch_room_images",m,d),p++,a={type:"房间",operation:"add_review_image",relation_id:e,batch_unit_id:s.batch_unit_id,batch_room_id:e,batch_id:s.batch_id},r["a"].insert(i,a),l=!0}}))}})).then((function(){l&&window.uploadStatus("waitUpload")}))}))},changeToProcessFromDelivered:function(e,t){var a=function(t){t.update("batch_room",{delivery_status:"交付中",delivery_situation:"先收楼后处理"},{id:e.batch_room_id,delivery_status:"已交付",delivery_situation:"顺利收楼"},(function(a){a.rowsAffected&&r["a"].changeToProcessFromDelivered(t,e)}))};if(!t)return n["a"].transaction((function(e){a(e)}));a(t)},saveReceiveInfo:function(e,t){var a,l,d="receive",m=function(e,t,a){var i=[];return e&&e.length&&e.forEach((function(e){i.push({batch_unit_id:t,batch_id:a,dimension_id:e.id,value:e.value,source:"app"})})),i};return s["a"].getRoomParams(e).then((function(s){if(!s||!s.batch_id||!s.batch_unit_id)return console.error("saveReceiveInfo：未找到对应房间信息。batchRoomId:"+e),i["a"].reject("未找到对应房间信息");var p=!1;return n["a"].transaction((function(i){l=m(t.satisfactionList,s.batch_unit_id,s.batch_id),delete t.satisfactionList,t.opening_status="已接待",t.opening_receive_date=o["a"].getNowDate(),i.update("batch_room",t,{id:e},(function(t){if(!t.rowsAffected)throw console.error("saveReceiveInfo：未更新对应房间。batchRoomId:"+e),new Error("未更新对应房间");a={type:"房间",operation:d,relation_id:e,batch_unit_id:s.batch_unit_id,batch_room_id:e,batch_id:s.batch_id},r["a"].insert(i,a),p=!0})),c["a"].saveRoomSatisfactionValue(i,e,l)})).then((function(){p&&window.uploadStatus("waitUpload")}))}))}}}}]);