(window["webpackJsonp_module_entry_zhkf_"]=window["webpackJsonp_module_entry_zhkf_"]||[]).push([["chunk-a9e96902"],{"0a37":function(e,t,i){var n=i("1c4e");"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var r=i("85cb").default;r("76d9ba51",n,!0,{})},"19b7":function(e,t,i){var n=i("cb92");"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var r=i("85cb").default;r("c67e7074",n,!0,{})},"1c4e":function(e,t,i){t=e.exports=i("690e")(!1),t.push([e.i,"\n.zhkf .tip[data-v-829243a6] {\n  width: 250px;\n  text-align: center;\n  position: absolute;\n  left: 50%;\n  top: 50%;\n  -webkit-transform: translate(-50%, -50%);\n          transform: translate(-50%, -50%);\n}\n.zhkf .tip img[data-v-829243a6] {\n    width: 200px;\n}\n.zhkf .tip p[data-v-829243a6] {\n    color: #a0a0a0;\n    line-height: 20px;\n    font-size: 14px;\n    margin: 0 auto;\n    text-align: center;\n    margin-top: 3px;\n}\n",""])},"26eb":function(e,t,i){e.exports=i.p+"img/search.37f508c9.png"},2985:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAADIklEQVRYR82ZTUhUURTHf3fKUqKkD0r7wEVQEUVCH7oSggiskMASF0EQlBW2DHQRDLQw2irZuAiKIFIXFVhIC4kKgmqlVBYuAnO0JkSMcpj0xvXN0+eb92beffMm3lsNc+/5nx/3cM85916Bny8qI5RzEDiMYD+SnUA5sDotNw3EEQwjeQ8MEOctUTGn605oGdyVW5ihGTgDbNWyhVHgPsV0cFZ882rrDbBDrqeI68A5YKVXcZd5SeAOKa7RLH7m0soN2CUbkbQDG3KJaY4niNDMefEwm507YFQuZzPtSC5qOtabLrjNGFeIir9Ohs6A3bKESXqA43refM/uYy2naRB/7AqZgGrlynn0H+FMpj7inLSvZCZgl+wseFjdFlqF+4K4ZB1eCmhsiAe+AxWEYYRG68ZZBDRSyacC7FZd7AQpdpkpaBEwJm8BS5ZXVznA+Z00ictKzwA0KsRIAEnYE+OaIrhZBXvXQewj3PuSYZakmO2q4hiAMdkGtHhSz3NS6QroPwZVGw2hWQm7u+HzVIbwDZpEq8Ao/F991FZtVDucKVDzBF6OZ8iNEqdCEJNVwBttb5oGbnADY3CkD+ako2C1AlShVSEu2OcG92ocap/Br5Sr61YF2AvUu03Ztgq+z0By1h9/HnBqC/cqwEFgj919RMDjo3CiAiZ+Q/1zeD2hB5kXnOFqSAH+cErONWXwom4RaDoFtU+9QwYAp5wnFOCMU/7bUQofGmCZpRh6hQwITgEmXQHV6NV9RkK1frkgA4RbAHQMsQnVUglth7xBBgy3EGLHTWJF8gJZADiFMCjokj1ITuXan9kghyaXli9Ty0Oey+42nWY8J2o3yJEpqLQdqfKGM9DnE7VWqXOCtC9DQHBKttpXs5ANMkC4dLOgOH20W06QAcIpqnS7pX76bFhVnlQpSCVz1ZXU9Wct/Ln2oXXc1rAaq+ir5VcVZ1OJUQJdWiYdMHOureVXf4f+0KQgQ33sNBc31Ad3BRn6qw8FGerLIzPUob5+syaG0F5gWiFDfQVsBQ3tJbq9FlifIeAAzD9DlNmeIdRdwTDwLp9niH+Lfm97gO/iCQAAAABJRU5ErkJggg=="},"37cf":function(e,t,i){var n=i("874e");"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var r=i("85cb").default;r("b8a405c6",n,!0,{})},"5c1b":function(e,t,i){"use strict";i("f0e6");var n=i("bbed"),r=i("fa1b"),o=i("07a4"),c=i("fd50");function s(){var e=function(e){e&&e.fitment_standard&&("毛坯"===e.fitment_standard?e.is_for_rough=1:"精装"===e.fitment_standard&&(e.is_for_decorated=1),delete e.fitment_standard)},t=function(e,t,i,r,o){return n["a"].getCheckItemLeaf(e,t,r,o).then((function(e){if(_.isEmpty(e))return[];var t=[];return _.each(e,(function(e){t.push(e.id)})),n["a"].getCheckItemAll(t.join("','"),i,r,o)}))};return{getCheckItemList:function(e,i,r,s,a){var l="毛坯"==s,m=c["a"].when(),d=["全部"];return d.push(1==a?"公区":"房间"),d="('"+d.join("','")+"')",m=o["a"].state.app.global.isUseProjectItem?n["a"].getProjectCheckItemList(e,i,r,l,d):t(e,i,r,l,d),m.then((function(e){return e}))},hasProjectCheckitem:function(e){return n["a"].hasProjectCheckitem(e)},searchCheckItemWithProject:function(t,i,r,o){return e(r),o?n["a"].searchProjectCheckItem(o,t,i,r):n["a"].searchCheckItem(t,i,r)},searchCheckItem:function(t,i,r,o){return console.log("searchCheckItem: ",t,i,r),console.time("searchCheckItem"),e(r),n["a"].hasProjectCheckitem(o).then((function(e){return e?n["a"].searchProjectCheckItem(o,t,i,r):n["a"].searchCheckItem(t,i,r).finally((function(){console.timeEnd("searchCheckItem")}))}))},getHigherLevelTreeListByCheckItemId:function(t,i,r){return console.log("getHigherLevelTree: ",t,i,r),console.time("getHigherLevelTree"),e(r),n["a"].getHigherLevelTreeListByCheckItemId(t,i,r).finally((function(){console.timeEnd("getHigherLevelTree")}))},getCheckItemLevel:function(e,t){return n["a"].getCheckItemLevel(e,t)},getPositionItemByRoom:function(e,t,i){var r=c["a"].when(),s=["全部"];return s.push(1==i?"公区":"房间"),s="('"+s.join("','")+"')",r=o["a"].state.app.global.isUseProjectItem?n["a"].getProjectPositionItemByRoom(e,t,s):n["a"].getPositionItemByRoom(e,s),r.then((function(e){return e}))},setIsUseProjectItemOfBatchUnit:function(e){return n["a"].getProjectItemOfBatchUnit(e).then((function(e){var t=!1;e&&(t=!0),o["a"].commit("app/APP",{isUseProjectItem:t})}))},getBatchCheckItem:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return r["a"].getCheckItemList(e,t,i,o["a"].state.app.global.isUseProjectItem).then((function(e){return console.log("BatchCheckItem",e),c["a"].resolve(e)}))}}}t["a"]=s()},"5cf9":function(e,t,i){"use strict";var n={props:{isShow:{type:Boolean,default:!0},imgUrl:{type:String,required:!0},tipCont:{type:String,default:"系统繁忙请稍后重试"}}},r=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{directives:[{name:"show",rawName:"v-show",value:e.isShow,expression:"isShow"}],staticClass:"tip"},[i("img",{attrs:{src:e.imgUrl,alt:"tip"}}),e._v(" "),e.tipCont?i("p",{domProps:{innerHTML:e._s(e.tipCont)}}):e._e()])},o=[],c=i("d082");function s(e){i("0a37")}var a=!1,l=s,m="data-v-829243a6",d=null,u=Object(c["a"])(n,r,o,a,l,m,d);t["a"]=u.exports},"5d476":function(e,t,i){"use strict";i.r(t);i("5ab2"),i("e44b"),i("e10e");var n=i("28f8"),r=(i("6d57"),i("8fee")),o=i("882e"),c=i("98a4"),s=i("5cf9"),a=i("cb77");function l(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function m(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?l(Object(i),!0).forEach((function(t){Object(n["a"])(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):l(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var d={name:"BatchDescSelect",components:{tip:s["a"],rightSwipeCell:a["a"]},data:function(){return{rightText:"多选",descList:[],loading:!1,isMulti:!1,historyList:[],model:{}}},created:function(){this.init()},methods:{init:function(){var e=this;this.model=o["a"].model,console.log("model",this.model);var t="",i=this.model.problem.selectedDesc;i&&i.length&&(i.length>1&&(this.isMulti=!0,this.rightText="取消多选"),t=i.map((function(e){return e.id})).join("|"),t=["|",t,"|"].join("")),r["a"].getCheckItemDescList(this.model.problem.selectedItem.item_id,this.model.fitmentStandard,!0).then((function(i){console.log("list",i);var n=i||[];t&&n.forEach((function(e){-1!==t.indexOf("|"+e.id+"|")&&(e.selected=!0)})),e.descList=n,console.log("descList",e.descList)})).catch((function(e){return console.log(e)})),console.log("获取历史记录",this.model.problem.checkItemId),c["a"].loadList(this.model.problem.selectedItem.item_id).then((function(){e.historyList=c["a"].model.currList,console.log("historyList----------",e.historyList)})).catch((function(e){return console.log(e)}))},removeRemarkHistory:function(e){c["a"].delHistory(e)},selectHistory:function(e){this.model.problem.remark=e.remark,console.log(this.model),o["a"].updateDesc(this.descList.filter((function(t){return t.id===e.descId}))),this.$router.go(-this.$route.query.level)},selectDesc:function(e,t){console.log(e),this.isMulti?this.$set(this.descList,t,m(m({},e),{},{selected:!e.selected})):this.selectCallback(e)},multiSelect:function(){this.isMulti?(this.descList.forEach((function(e){e.selected=!1})),this.isMulti=!1,this.rightText="多选"):(this.isMulti=!0,this.rightText="取消多选")},selectCallback:function(e){if(e)o["a"].updateDesc([e]),this.model.problem.isRemarkRequired=e.is_remark_required||0;else{var t=0;o["a"].updateDesc(this.descList.filter((function(e){return t+=e.is_remark_required,e.selected}))),this.model.problem.isRemarkRequired=t?1:0}this.$router.go(-this.$route.query.level)}}},u=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"batch-desc-select",class:{isBgWhite:!e.loading&&!e.descList.length}},[n("cus-nav-bar",{attrs:{title:"选择问题描述","left-arrow":"",border:!1,"right-text":e.rightText},on:{"click-right":e.multiSelect}}),e._v(" "),n("section",{staticClass:"desc-content"},[e.descList.length?n("section",{staticClass:"desc-list"},e._l(e.descList,(function(t,r){return n("van-cell",{key:r,class:{active:t.selected},attrs:{"is-link":"",title:t.name},on:{click:function(i){return e.selectDesc(t,r)}}},[n("template",{slot:"right-icon"},[n("i",{directives:[{name:"show",rawName:"v-show",value:!e.isMulti&&t.selected,expression:"!isMulti && item.selected"}],staticClass:"iconfont icon-gou"}),e._v(" "),n("img",{directives:[{name:"show",rawName:"v-show",value:e.isMulti&&t.selected,expression:"isMulti && item.selected"}],attrs:{src:i("2985"),alt:"selected",width:"20",height:"20"}}),e._v(" "),n("img",{directives:[{name:"show",rawName:"v-show",value:e.isMulti&&!t.selected,expression:"isMulti && !item.selected"}],attrs:{src:i("f97d"),alt:"select",width:"20",height:"20"}})])],2)})),1):e._e(),e._v(" "),!e.loading&&!e.isMulti&&e.historyList.length&&e.descList.length?n("section",{staticClass:"history-list"},[n("h2",{staticClass:"van-hairline--bottom"},[e._v("历史补充说明")]),e._v(" "),e._l(e.historyList,(function(t,i){return n("right-swipe-cell",{key:i,attrs:{title:t.name,"btn-txt":"删除"},on:{"cell-click":function(i){return e.selectHistory(t)},"right-click":function(i){return e.removeRemarkHistory(t.id)}}})}))],2):e._e()]),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:e.isMulti,expression:"isMulti"}],staticClass:"btn",on:{click:function(t){return e.selectCallback()}}},[e._v("\n    确认\n  ")]),e._v(" "),e.loading||e.descList.length?e._e():n("tip",{attrs:{"img-url":i("26eb"),"tip-cont":"当前检查项尚未设置问题描述"}})],1)},h=[],f=i("d082");function p(e){i("19b7")}var g=!1,b=p,_="data-v-25e00fd2",I=null,k=Object(f["a"])(d,u,h,g,b,_,I);t["default"]=k.exports},"85cd":function(e,t,i){"use strict";var n=i("1834"),r=i("0938"),o="checkitem_remark_history",c={createCondition:function(e,t){if(_.isEmpty(e))return"";t=t?"crh.":"";var i=[];return _.each(e,(function(e,n){i.push(t+n+"="+e)})),i=i.join(" and "),i},insertHistory:function(e){e.id=r["a"].uuid(),e.used_time=e.used_time||1,e.last_used_time=e.last_used_time||r["a"].getNowDate();var t=[],i=[];return _.each(e,(function(e,n){t.push(n),i.push(e)})),n["a"].insert(o,t,i).then((function(){return e.id}))},updateHistory:function(e,t){return n["a"].update(o,e,t)},getOneHistory:function(e,t,i){var r="select * from "+o+" where item_id=? and desc_id=? and remark=?";return n["a"].queryOne(r,[e,t,i])},updateUserdTime:function(e,t){if(!t)return $q.error("次数不能为0");var i={last_used_time:r["a"].getNowDate(),used_time:t};return n["a"].update(o,i,{id:e})},getListByItemIdOrderDate:function(e,t){var i="select crh.id, crh.desc_id, crh.remark, cid.name as desc_name from checkitem_remark_history crh inner join check_item_desc cid on cid.id = crh.desc_id and cid.check_item_id = crh.item_id where crh.item_id = ?  order by crh.last_used_time desc limit "+t;return n["a"].query(i,[e])},getListByItemIdOrderUsedTime:function(e,t,i){var r=i.length?'and crh.id not in ("'+i.join('","')+'")':"",o="select crh.id, crh.desc_id, crh.remark, cid.name as desc_name from checkitem_remark_history crh inner join check_item_desc cid on cid.id = crh.desc_id and cid.check_item_id = crh.item_id where crh.item_id = ? "+r+" order by crh.used_time desc limit "+t;return n["a"].query(o,[e])},deleteItemById:function(e){var t="delete from checkitem_remark_history where id=?";return n["a"].query(t,[e])},searchByItems:function(e,t){var i="select crh.id,crh.remark as name,crh.item_id,ci.name as item_name,ci.full_name as item_full_name,crh.desc_id,cid.name as desc_name from checkitem_remark_history crh inner join check_item ci on ci.id = crh.item_id inner join check_item_desc cid on cid.id = crh.desc_id and cid.check_item_id = crh.item_id where crh.item_id in ("+t+') and (lower(crh.remark) like "%" || ? || "%" or upper(crh.remark) like "%" || ? || "%") order by crh.remark';return n["a"].query(i,[e,e])}},s=c,a={getList:function(e){if(!e)return $q.reject("itemId为空");var t=[];return s.getListByItemIdOrderDate(e,3).then((function(i){if(i){var n=[];return _.each(i,(function(e){n.push(e.id),t.push({id:e.id,name:e.desc_name+"："+e.remark,descId:e.desc_id,remark:e.remark,descName:e.desc_name})})),s.getListByItemIdOrderUsedTime(e,17,n).then((function(e){return e&&_.each(e,(function(e){t.push({id:e.id,name:e.desc_name+"："+e.remark,descId:e.desc_id,remark:e.remark,descName:e.desc_name})})),t}))}return $q.reject(t)}))},deleteItem:function(e){return s.deleteItemById(e)},upsertHistory:function(e,t,i){return s.getOneHistory(e,t,i).then((function(n){return n?s.updateUserdTime(n.id,n.used_time+1):s.insertHistory({item_id:e,desc_id:t,remark:i})}))},searchByItems:function(e,t){return s.searchByItems(e,t)}};t["a"]=a},"874e":function(e,t,i){t=e.exports=i("690e")(!1),t.push([e.i,"\n.zhkf .app-right-swipe-cell .right-btn {\n  display: inline-block;\n  width: 65px;\n  padding: 15px;\n  color: #fff;\n  text-align: center;\n  line-height: 24px;\n  background-color: #f44;\n}\n",""])},"882e":function(e,t,i){"use strict";i("cc57"),i("6d57");var n=i("fd50"),r=i("07a4"),o=i("bad1"),c=i("5c1b"),s=i("dd0a"),a=i("b643"),l=i("964e"),m=i("0938"),d=i("3fa2"),u=i("a593"),h=i("a14a"),f=i.n(h),p=i("bbed");function g(){var e={problem:{}},t=null,i="";function h(){if(t=null,e.positionItems={},e.cacheIntersectItems=[],e.diagramUrl="",e.allPositions=[],e.problemReasons=[],e.fitmentStandard=d["a"].room.fitmentStandard||"毛坯",e.points=[],e.checkItems=[],e.checkItemTree=null,e.checkItemMap=null,e.problem={},e.problem.batchRoomId="",e.problem.positions=[],e.problem.selectedItem=null,e.problem.selectedDesc=null,e.problem.problemImages=[],e.problem.remark="",e.problem.isPassedWhenAdd=0,e.problem.emergencyDegree="一般",e.problem.contractor=null,e.problem.responsibleCompany=null,e.problem.topItemId="",r["a"].state.app.global.enableProblemReason)return a["a"].getReasonConfig().then((function(t){e.problemReasons=e.problemReasons.concat(t)}))}function g(e,t){var i=[];return e.forEach((function(e){for(var n=t.length,r=0;r<n;r++)if(e.item_id===t[r].item_id){i.push(e);break}})),i}return{model:e,setRoomPosition:function(t){var n=u["default"].prototype.$toast.loading({duration:0,forbidClick:!0,loadingType:"spinner",message:"户型图加载中"});h(),e.roomTitle=t.roomTitle,e.diagramUrl=t.diagramUrl,e.allPositions=t.position,e.problem.batchUnitId=t.unitId,e.problem.batchRoomId=i=t.roomId,this.getPositionItem().then((function(){setTimeout((function(){n.clear(),console.log("关闭---------------")}),200)})).catch((function(e){return console.log(e)}))},getPositionItem:function(){return c["a"].getPositionItemByRoom(i,d["a"].room.projectId,d["a"].room.isVirtual).then((function(t){t.forEach((function(t){e.positionItems[t.position_id]||(e.positionItems[t.position_id]=[]),m["a"].getObjectFromArrayByProperty(e.positionItems[t.position_id],"item_id",t.item_id,!1)||e.positionItems[t.position_id].push({item_id:t.item_id,item_name:t.item_name,parent_item_id:t.parent_item_id,level:t.level})}))}))},checkPositionItem:function(t){if(!t)return null;e.problem.selectedItem=null;var i=e.positionItems[t];if(!i||!i.length)return!1;if(!e.cacheIntersectItems.length)return e.cacheIntersectItems.push(i),e.checkItems=i,e.checkItemTree=null,!0;var n=g(i,e.checkItems);return!(!n.length||!this.hasEndItem(n,t))&&(e.cacheIntersectItems.push(n),e.checkItems=n,e.checkItemTree=null,!0)},hasEndItem:function(t,i){for(var n=0;n<t.length;n++){for(var r=e.positionItems&&e.positionItems[i],o=r&&r.length,c=!0,s=0;s<o;s++)if(r[s].parent_item_id===t[n].item_id){c=!1;break}if(!0===c)return!0}return!1},getIntersectCheckItem:function(t,i,n){var r=[];if(t)for(var o=0;o<e.checkItems.length;o++)e.checkItems[o].parent_item_id===t&&r.push(e.checkItems[o]);else for(var c=0;c<e.checkItems.length;c++)1===e.checkItems[c].level&&r.push(e.checkItems[c]);return r.slice(i*n,(i+1)*n)},cancelPoint:function(){var t=e.cacheIntersectItems.length;t&&(e.cacheIntersectItems.pop(),e.checkItems=e.cacheIntersectItems[t-2]||[],e.problem.selectedItem=null,e.checkItemTree=null)},createRoomPosition:function(){var t={},i=[],n=e.allPositions,r=[];return e.points.forEach((function(e){var o=e.positionId,c={x:e.coordinate.x,y:e.coordinate.y,diagramId:e.diagramId},s=n.length,a=0;if(t[o])return t[o].points.push(c);for(;a<s;a++)if(o===n[a].id)return t[o]={positionId:o,positionName:"",points:[c]},r.push(o),i.push(t[o])})),e.problem.positions=i,this.setPositionName(r)},setPositionName:function(t){return t&&t.length?o["a"].getPositionByIds("'"+t.join("','")+"'").then((function(t){t&&t.length&&e.problem.positions.forEach((function(e){for(var i=t.length,n=0;n<i;n++)if(t[n].id===e.positionId){e.positionName=t[n].name;break}}))})):n["a"].resolve()},createCheckItemTree:function(){var t,i=[],n={};e.checkItems.forEach((function(e){var t,r=e.item_id,o=e.level>1?e.parent_item_id:"",c=f.a.assign({},e);return r in n?c=f.a.assign(n[r],c):n[r]=c,o?o in n?(t=n[o],void(t.children?t.children.push(c):t.children=[c])):(n[o]={item_id:o,children:[c]},n[o]):i.push(c)})),function e(i,n){i.forEach((function(t){t.item_full_name=n?n+"-"+t.item_name:t.item_name,t.children&&e(t.children,t.item_full_name)})),null!==t&&(t=1===i.length?i[0]:null)}(i),e.checkItemTree=i,e.checkItemMap=n,e.selectedItem=t},update:function(t){f.a.assign(e,t)},save:function(){t={points:e.points.slice(0),positions:e.problem.positions.slice(0),checkItems:e.checkItems.slice(0),cacheIntersectItems:e.cacheIntersectItems.slice(0)}},restore:function(){t&&(e.points=t.points,e.problem.positions=t.positions,e.checkItems=t.checkItems,e.cacheIntersectItems=t.cacheIntersectItems,t=null)},clearStore:function(){t=null},clear:function(){return h()},updateRemark:function(t){e.problem.remark=t},updateCheckItem:function(t){e.problem.selectedItem=t,e.problem.selectedDesc=null,e.problem.contractor=null,e.problem.responsibleCompany=null,e.problem.topItemId=function t(i){return i.parent_item_id&&i.level>1?t(e.checkItemMap[i.parent_item_id]):i.item_id}(t)},updateDesc:function(t){u["default"].prototype.$set(e.problem,"selectedDesc",t),e.problem.contractor=null,s["a"].getContractor(i,e.problem.selectedItem.item_id,e.problem.selectedDesc.map((function(e){return e.id})).join(";")).then((function(t){"length"in t||(t=[t]),e.problem.contractor=t,e.problem.responsibleCompany=t,u["default"].prototype.$eventBus.$emit("app.batchAddProblem:updateContractor")}))},submit:function(){var t=[],r=e.problem.problemImages.map((function(e){return{img_localpath:e.img_local_path}})),o=e.problem.selectedDesc.map((function(e){return e.id})).join(";"),c=e.problem.contractor.map((function(e){return e.contractor_id})).join(";"),s=e.problem.responsibleCompany.map((function(e){return e.contractor_id})).join(";"),a=0,m=[];e.problemReasons.forEach((function(e){e.selected&&m.push(e.id)}));for(var h=0;h<e.problem.positions.length;h++)for(var f=e.problem.positions[h],g=0;g<f.points.length;g++){var b=l["a"].batchAddProblem({problem_images:r,batch_room_id:i,position_id:f.positionId,item_id:e.problem.selectedItem.item_id,top_item_id:e.problem.topItemId,desc_id:o,contractor_id:c,responsible_company_id:s,roomtype_diagram_id:f.points[g].diagramId,coordinate:[{x:f.points[g].x,y:f.points[g].y}],emergency_degree:e.problem.emergencyDegree,remark:e.problem.remark,is_passed_when_add:e.problem.isPassedWhenAdd?1:0},!1,"",m);t.push(b),a++}return n["a"].all(t).then((function(){return p["a"].updateCheckItemUseTimes(e.problem.selectedItem.item_id,a)})).then((function(){return p["a"].updateItemDescUseTimes(o,a)})).then((function(){d["a"].room.hasProblem=!0,u["default"].prototype.$eventBus.$emit("app.roomdetail:statusChange")}))}}}t["a"]=g()},"8fee":function(e,t,i){"use strict";var n=i("760e"),r=i("a14a"),o=i.n(r);t["a"]={getCheckItemDescList:function(e,t,i){return n["a"].getCheckItemDescList(e,t,i).then((function(e){return e}))},getRoomCheckListDescList:function(e,t){return n["a"].getRoomCheckListDescList(e,t).then((function(e){if(!o.a.isEmpty(e))for(var t=0;t<e.length&&t<3;t++)e[t].isImportant=!0;return e}))},searchDesc:function(e,t){return n["a"].searchDesc(e,t)}}},"98a4":function(e,t,i){"use strict";i("e697");var n=i("85cd"),r=i("fd50"),o=i("a593"),c={model:{},init:function(){c.model.historyList={},c.model.currItemId="",c.model.currList=[]},loadList:function(e,t){return e?(_.isEmpty(c.model)&&c.init(),t=t||!1,c.model.currItemId=e,_.isEmpty(c.model.historyList[e])||t?(console.log("=== itemId ===",e),n["a"].getList(e).then((function(t){console.log(t),c.model.historyList[e]=t,c.model.currList=t})).catch((function(){c.model.historyList[e]=[],c.model.currList=[]}))):(c.model.currList=c.model.historyList[e],r["a"].resolve())):r["a"].reject()},upsertHistory:function(e,t,i){return n["a"].upsertHistory(e,t,i).then((function(){c.loadList(e,!0)}))},delHistory:function(e){return n["a"].deleteItem(e).then((function(){var t=_.find(c.model.currList,{id:e});if(t){var i=c.model.currList.indexOf(t);i>-1&&c.model.currList.splice(i,1)}})).catch((function(e){console.error(e),o["default"].prototype.$toast("删除历史失败！")}))}};t["a"]=c},b643:function(e,t,i){"use strict";var n=i("7ee1");t["a"]={getReasonConfig:function(){return n["a"].getList()},getProblemReason:function(e){return n["a"].getProblemReason(e)}}},bad1:function(e,t,i){"use strict";var n=i("97ba");t["a"]={getPositionList:function(e){return console.log("batchRoomId",e),n["a"].getPositionList(e).then((function(e){return e}))},getPositionByIds:function(e){return n["a"].getPositionByIds(e)},getPositionNameById:function(e){return n["a"].getPositionNameById(e)}}},cb77:function(e,t,i){"use strict";var n={props:{title:{type:String,default:""},btnTxt:{type:String,default:""}},methods:{clickItem:function(e){switch(e){case"cell":this.$emit("cell-click");break;case"right":this.$emit("right-click");break}}}},r=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"app-right-swipe-cell"},[i("van-swipe-cell",{attrs:{"right-width":65},on:{click:e.clickItem}},[i("van-cell-group",[i("van-cell",{attrs:{title:e.title}})],1),e._v(" "),i("span",{staticClass:"right-btn",attrs:{slot:"right"},slot:"right"},[e._v("\n      "+e._s(e.btnTxt)+"\n    ")])],1)],1)},o=[],c=i("d082");function s(e){i("37cf")}var a=!1,l=s,m=null,d=null,u=Object(c["a"])(n,r,o,a,l,m,d);t["a"]=u.exports},cb92:function(e,t,i){t=e.exports=i("690e")(!1),t.push([e.i,"\n.zhkf .active[data-v-25e00fd2] {\n  color: #0085ff;\n}\n.zhkf .batch-desc-select[data-v-25e00fd2] {\n  height: 100%;\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-orient: vertical;\n  -webkit-box-direction: normal;\n      -ms-flex-direction: column;\n          flex-direction: column;\n}\n.zhkf .isBgWhite[data-v-25e00fd2] {\n  background: #fff;\n}\n.zhkf .icon-xuanzhong[data-v-25e00fd2] {\n  color: #0085ff;\n  font-size: 20px;\n}\n.zhkf .icon-duoxuan-weixuanzhuangtai[data-v-25e00fd2] {\n  color: #c7c8c7;\n  font-size: 20px;\n}\n.zhkf .icon-gou[data-v-25e00fd2] {\n  font-size: 15px;\n}\n.zhkf .desc-content[data-v-25e00fd2] {\n  -webkit-box-flex: 1;\n      -ms-flex: 1;\n          flex: 1;\n  overflow: scroll;\n}\n.zhkf .history-list[data-v-25e00fd2] {\n  margin-top: 10px;\n}\n.zhkf .history-list h2[data-v-25e00fd2] {\n    height: 36px;\n    line-height: 36px;\n    font-size: 14px;\n    color: #a0a0a0;\n    padding-left: 15px;\n    font-weight: 400;\n    background: #fff;\n    margin: 0;\n}\n.zhkf .history-list .van-cell[data-v-25e00fd2]:not(:last-child)::after {\n    left: 15px;\n}\n.zhkf .btn[data-v-25e00fd2] {\n  height: 45px;\n  line-height: 45px;\n  color: #fff;\n  text-align: center;\n  font-size: 15px;\n  background: #0085ff;\n}\n",""])},f97d:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAADa0lEQVRYR9WZO2hUQRSG/zN7MYRgkRhEURRMoYKNGtGsEkj2TlLYCGrwVVn4IoplLIQFCy1FxaiFlQ+MKWwsNnNvAqIbwVehoCkUFEXRmBQh+GB3jhy9G9Y1utnNRscptpmdM989Z85jzhDKGMlkUjU1Na3xPK+FmVcz81Iims/Ms0UcEY0x81siGiKiB5lMZmBwcPBeMpm0pW5HpSwIw3CBtbaTmXcR0cJS1jLzayK6pJQ6k0gk3kx17ZQAgyCYw8zHAOwGUBUJfwEgBeA2gKdE9GpkZGRM5urq6mYz8yIAywFsANAOYEm07guAi0R01Pf9j8VAiwIGQbCNmU8DqAeQBdATaSFdTHj+fBiGcdE+gA4AMQDDRNTp+/61P8n5LeDAwICXyWQEbF90rkw2mz3U3t7+rBSwwv+mUqllsVjsFDPraO6c53kHW1paMpPJnRQwnU5Xj4+PXwewkYg+ATjs+/6F6YAVrg2CYA+Ak8xcDeBmTU3N1ng8Lnv9NH4BjDR3Q+AAvGfmjW1tbfcrCZeT1dfX10hENwHMFUjP8zYVavIXQGNMd2TW97FYrLm1tXVoJuByMvv7+5dms9lbEeQ5rfX+/P1+Aowc4qqY1VrbPFOaK/xg0aRS6paYm4i25TvOBGAUSsQB6olob6XPXDEryJlk5vORdy/LhaAJQGPMWQD7icj4vt9WTOBMzAdB0Bd5d7fW+sD36CE/UYZ4DsCz1q6YbigpF15CkFLqCYCMUqpBMs53QGPMcQBdAK5qrXeUu0El1hljrgDYDuCE1voISeKPx+MvJbcqpdYnEomSMkQloCbJOHckd6fT6cWUSqXWKqXuAnihtW6o9IblyDPGyHFbYq1dR2EYdllrxcQTB7McoZVck3NYpdQRMsb0AtgMYKfWWuz/z4cxRvzgMhH1CuBjACsArNJaP/rndD+cdiWAhwCeUBAEH5hZgnP9VOqzv/EBUdKQcmxYNPhZitDR0dGqjo6Or38DoNgePT09s2pra6Ww/eI+4P9gYped5LE4yXVm3uJsmHE+UDuf6pwvFpwvt/6LgjXSorslvwA6f2mKIKUP4+a1M5fAnb64C6TzrQ+BdLp5lDO10+23/ILS2QZmAaS7LeCCS7WbTfTCO0T+M4S1thGAPEPMK3iGeAdgSCl1fzrPEN8Ajn19wtuO19cAAAAASUVORK5CYII="},fa1b:function(e,t,i){"use strict";var n=i("1834");t["a"]={getCheckItemList:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=[e],c="select bc.item_id, ci.full_name as item_full_name  from batch_checkitem bc  inner join check_item ci on ci.id = bc.item_id  where bc.batch_id = ? ";if(c+=t?" and ci.is_for_rough = 1 ":" and ci.is_for_decorated = 1 ",i){var s=r?"project_position_checkitem":"position_checkitem";c+=" and bc.item_id in                     (select item_id from "+s+" where position_id = ? )",o.push(i)}return c+=" order by ci.sort ",n["a"].query(c,o)}}}}]);