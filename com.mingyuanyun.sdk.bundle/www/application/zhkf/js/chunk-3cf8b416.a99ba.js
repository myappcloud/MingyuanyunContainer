(window["webpackJsonp_module_entry_zhkf_"]=window["webpackJsonp_module_entry_zhkf_"]||[]).push([["chunk-3cf8b416"],{"0081":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADQAAAAoCAYAAACxbNkLAAAC00lEQVRoQ9XYO1ATURTG8f9JjAyFQ+Foh5WPml4rcRjEhgaw1EIatVIwsVAKSCy0E8cWWtFCCwVLbCmlk44KCy0gw4w5zs1D8trsuZs12dw25z5+k72b80UYxLGsBaDIU3nefHwZKI9qijyrKPPVcy81owYH9FYz/GQNZa7pS2hADQbolQ5T5B3KzYAn6h8q+aCCjlDiI8q1kOtRRiUbtKLngC8oY8a7vpRc0EsdpcgWcMWIASGbTNCKXga2UC6YMIIi3Ccrq8kD5XUM5TPKeSPmD3CHnKy7+mSBCnqVEp9QRkwYOCbFHFn5UKtPDqigk5TYQBk2Yg5JMU1WNuvrkwHK6yzKOkrGhBF+AVPk5FvyWp+83qPEGyBlwsABGSZYkJ129f39hlZ0AeWFEeJu/D5pxlmU3aA5/QNVOuZFD8wPMozzWPY6zek9qLVjDjcJ30lzg0XZDyvuLajSMbvLPxt2sLrPdxhigkdyYJnTO5DrmI/YACYtB6vWbHOGKR7Kb+uc9qBlrSTBNonQunBDnb1jPpkmbHKWaebl0GfPVlAF86y6SEsi9Fm8XOvfMbu32XsucpsZOfbdrxHUiKmtFR0VpWOGNS5xlxlxPZr3OAG1x0RHuY5Z+QqMmk8lvCbLA0TUPKepsALqjPFHVTpmF8xcQLMNoUBOsrbi4CoxYuwo/465HMzIifuh7Xr4gtyGwXfKt2OuC2ZdS6oL+Dxy9Xu2ovw75oZgFi/Ifo/ao/w75pZgFj8oKirFESV8nv+2wez/gKKh7GdxwSzFLZ7Itn2SX2Wn1qfWLfitGFzdMZjFtUlwc2r7bbKdwxDMbAuFV3XutuNB7XGa62HBLPyotorw+NAdapdT5cgcGsxsxw2vCgdFf1F4BbPwo9oqbCB/1Dbp8tvM/d3U02EHWVERg1lcaj9QGKqLYNY/UDCqq2DWX1AzKoZg1n9QDSUMxRHM4gL9BfFYCTmWlrw8AAAAAElFTkSuQmCC"},"0523":function(e,t,n){"use strict";n("6d57");var i=n("c6e3"),r=n("fd50"),o=n("a654"),a=n("c2c1"),s=n("8ae6"),l=function(e){return i["a"].getRoomBaseInfo(e)},c=function(e){return i["a"].getRoomCustomer(e)},f=function(e,t,n){var i,r={batch_unit_id:e,unit_list:[]},o="0";(_.isEmpty(t)||1===t.length&&""===t[0])&&(i=!0,t=[o]);var a={unit:[""],floor_list:[],status_counter:{all:0}};r.unit_list.push(a);for(var s=0;s<t.length;s++){var l=t[s],c={floor:l,room_list:[]};a.floor_list.push(c);for(var f=0;f<n.length;f++){var d=n[f];!i&&d.floor!=l||d.batch_unit_id!=e||(d.floor=i?o:d.floor,c.room_list.push(d),a.status_counter["all"]+=1,d.room_status in a.status_counter?a.status_counter[d.room_status]+=1:a.status_counter[d.room_status]=1)}}return r},d=function(e){return i["a"].getRoomIsReviewed(e)},u=function(e){return i["a"].getRoomTypeDiagram(e).then((function(e){if(!e)return!1;var t=r["a"].when(!1);return e.forEach((function(e){t=t.then((function(t){return t?r["a"].resolve(!0):a["a"].checkFileIsExists(Object(s["e"])()+e.path)}))})),t}))},h=function(e){return i["a"].getDiagramById(e).then((function(e){if(e){if("dev"==window.ZHKF_GLOBAL_ENV.VUE_APP_ENV)return e.url;var t=Object(s["e"])()+e.path;return console.log(t,"========================"),a["a"].checkFileIsExists(t).then((function(e){return e?t:null}))}return null}))},p=function(e){try{return u(e).catch((function(){return!1})).then((function(e){return!!e}))}catch(t){return console.error(t),r["a"].when(!1)}},m=function(e){return o["a"].existsDesignChange(e)},b=function(e){return o["a"].getDesignChange(e)},g=function(e,t){return o["a"].addDesignChangeProblem(e,t)},v=function(e){return l(e).then((function(e){return e.building_name+(e.unit?e.unit+(e.unit.indexOf("单元")>-1?"":"单元"):"")+(-1==e.floor.indexOf("层")&&-1==e.floor.indexOf("楼")&&-1==e.floor.indexOf("公共区域")?e.floor+"楼":e.floor)+(-1!==e.room_no.indexOf("公共区域")?e.floor+"层 公共区域":e.room_no)}))};t["a"]={getRoomBaseInfo:l,getRoomCustomer:c,buildRoomListData:f,getRoomIsReviewed:d,getRoomTypeImageFileIsExists:u,getRoomTypeImageFileIsExistsIgnoreError:p,existsRoomDesignChange:m,getRoomDesignChange:b,addRoomDesignChangeProblem:g,getRoomTitle:v,getDiagramFullPathById:h,getBatchRoomList:function(e,t){return i["a"].getBatchRoomList(e,t)}}},"09ee":function(e,t,n){t=e.exports=n("690e")(!1),t.push([e.i,"\n.zhkf .flex[data-v-27ad56bf] {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-align: center;\n      -ms-flex-align: center;\n          align-items: center;\n}\n.zhkf .active[data-v-27ad56bf] {\n  color: #0099ff !important;\n}\n.zhkf .content[data-v-27ad56bf] {\n  -webkit-box-flex: 1;\n      -ms-flex: 1;\n          flex: 1;\n  overflow: auto;\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-orient: vertical;\n  -webkit-box-direction: normal;\n      -ms-flex-direction: column;\n          flex-direction: column;\n}\n.zhkf .content .process-search[data-v-27ad56bf] {\n    height: 50px;\n    background: #f4f4f4;\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n    -webkit-box-align: center;\n        -ms-flex-align: center;\n            align-items: center;\n    padding: 0 10px;\n}\n.zhkf .content .process-search .btn[data-v-27ad56bf] {\n      color: #bbb;\n      font-size: 16px;\n      margin-left: 15px;\n}\n.zhkf .content .process-search .search-icon[data-v-27ad56bf] {\n      color: #bbb;\n      margin: 0 10px;\n}\n.zhkf .content .process-search .ipt-wrapper[data-v-27ad56bf] {\n      -webkit-box-flex: 1;\n          -ms-flex: 1;\n              flex: 1;\n      display: -webkit-box;\n      display: -ms-flexbox;\n      display: flex;\n      -webkit-box-align: center;\n          -ms-flex-align: center;\n              align-items: center;\n      background: #fff;\n      border-radius: 15px;\n      overflow: hidden;\n}\n.zhkf .content .process-search .ipt-wrapper input[data-v-27ad56bf] {\n        height: 30px;\n        font-size: 14px;\n        outline: none;\n        border: none;\n        -webkit-box-flex: 1;\n            -ms-flex: 1;\n                flex: 1;\n}\n.zhkf .content .process-search .ipt-wrapper .icon-cha[data-v-27ad56bf] {\n        color: #bbb;\n        margin-right: 10px;\n}\n.zhkf .list-wrapper[data-v-27ad56bf] {\n  -webkit-box-flex: 1;\n      -ms-flex: 1;\n          flex: 1;\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-orient: vertical;\n  -webkit-box-direction: normal;\n      -ms-flex-direction: column;\n          flex-direction: column;\n  overflow: hidden;\n}\n.zhkf .list-wrapper .refresh-wrapper[data-v-27ad56bf] {\n    height: 100%;\n    -webkit-box-flex: 1;\n        -ms-flex: 1;\n            flex: 1;\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n    -webkit-box-orient: vertical;\n    -webkit-box-direction: normal;\n        -ms-flex-direction: column;\n            flex-direction: column;\n    overflow: scroll;\n}\n.zhkf .list-wrapper .refresh-wrapper[data-v-27ad56bf] .van-pull-refresh__track {\n      -webkit-box-flex: 1;\n          -ms-flex: 1;\n              flex: 1;\n      display: -webkit-box;\n      display: -ms-flexbox;\n      display: flex;\n      -webkit-box-orient: vertical;\n      -webkit-box-direction: normal;\n          -ms-flex-direction: column;\n              flex-direction: column;\n}\n.zhkf .list-wrapper .refresh-wrapper .lists[data-v-27ad56bf] {\n      -webkit-box-flex: 1;\n          -ms-flex: 1;\n              flex: 1;\n}\n.zhkf .list-wrapper .item[data-v-27ad56bf] {\n    padding: 0;\n    background-color: transparent;\n}\n.zhkf .list-wrapper .item[data-v-27ad56bf]:not(:last-child)::after {\n      border-width: 0;\n}\n.zhkf .list-wrapper .item[data-v-27ad56bf] .van-hairline--top-bottom::after {\n      border-width: 0;\n}\n.zhkf .list-wrapper .item-wrapper[data-v-27ad56bf] {\n    padding: 0 10px;\n    background-color: #f4f4f4;\n}\n.zhkf .list-wrapper .item-main[data-v-27ad56bf] {\n    padding: 15px;\n    border-radius: 6px;\n    margin-bottom: 10px;\n    background-color: #fff;\n}\n.zhkf .list-wrapper .item-main p[data-v-27ad56bf] {\n      color: #606060;\n      font-size: 14px;\n}\n.zhkf .list-wrapper .item-main p.name[data-v-27ad56bf] {\n        display: -webkit-box;\n        display: -ms-flexbox;\n        display: flex;\n        -webkit-box-align: center;\n            -ms-flex-align: center;\n                align-items: center;\n        margin: 6px 0;\n}\n.zhkf .list-wrapper .icon-smile[data-v-27ad56bf] {\n    display: inline-block;\n    width: 16px;\n    height: 16px;\n    margin-left: 10px;\n}\n.zhkf .list-wrapper .item-mode[data-v-27ad56bf] {\n    display: block;\n    text-align: center;\n    width: 54px;\n    height: 16px;\n    line-height: 16px;\n    font-size: 10px;\n    margin-right: 8px;\n    color: #fb7c48;\n    background: rgba(251, 124, 72, 0.2);\n    border-radius: 8px;\n}\n.zhkf .list-wrapper .item-mode.online[data-v-27ad56bf] {\n      color: #4680f5;\n      background: rgba(70, 128, 245, 0.2);\n}\n.zhkf .list-wrapper .fir-line .no[data-v-27ad56bf] {\n    -webkit-box-flex: 1;\n        -ms-flex: 1;\n            flex: 1;\n    color: #202020;\n    font-size: 16px;\n}\n.zhkf .list-wrapper .fir-line .time[data-v-27ad56bf] {\n    font-size: 12px;\n    color: #a0a0a0;\n}\n.zhkf .list-wrapper .fir-line .time.very-urgent[data-v-27ad56bf] {\n      color: #eb544d;\n}\n.zhkf .list-wrapper .fir-line .time.urgent[data-v-27ad56bf] {\n      color: #ff8100;\n}\n",""])},"1eef":function(e,t,n){t=e.exports=n("690e")(!1),t.push([e.i,"\n.zhkf .btn-name {\n  color: #fff;\n}\n.zhkf .line-up {\n  margin-bottom: -1px;\n}\n",""])},"27cc":function(e,t,n){e.exports=n.p+"img/label_opening.22395308.png"},"2d3d":function(e,t,n){"use strict";n("e697"),n("6d57"),n("cc57");var i=n("fd50"),r=n("cb6b"),o=n("0e1c"),a=n("653b"),s=n("0523");t["a"]=function(){var e=20,t={},n={getConditions:function(){return r["a"].set(o["a"].DELIVERY_PROCESS_CONDITION,{batch:t.filterList[0].id,status:t.filterList[2].id},r["a"].level.user),{batchId:t.filterList[0].id,name:t.currType,status:t.filterList[2].name,page:t.currPage,pageSize:e,checkroomType:t.checkroomType,batchType:t.batchType}},load:function(){var r=n.getConditions();return r.batchId?a["a"].getTodoDeliveryList(r,t.search.keyword||"").then((function(n){return t.total=n.total,t.list=t.currPage?t.list.concat(n.list):n.list,0===t.currPage&&(t.search.lastKeyword=""),t.total*e>t.list.length&&t.currPage++,n.list})).then((function(e){return"delivery_check_room"===t.currType?n.setUploadStatus(e):e})):i["a"].reject("无效批次")},changeNumberStatus:function(e,n,i){var r=[];return e.room_list.forEach((function(e){r.push(e.room_id)})),a["a"].changeNumberStatus({batch_id:t.filterList[0].id,signin_id:e.signin_id,room_ids:r.join(","),operate_type:i,name:t.currType}).then((function(){t.list.splice(n,1)}))},setUploadStatus:function(e){e=e||t.list;var n=[],i=[];return e.forEach((function(e){e.room_list.forEach((function(e){n.push(e.room_id)}))})),s["a"].getBatchRoomList(t.filterList[0].id,n).then((function(e){return e.forEach((function(e){t.list.forEach((function(t){var n=_.find(t.room_list,{room_id:e.room_id});n&&(n.batchRoomId=e.id,i.push(e.id))}))})),a["a"].getHasUploadRoomList(i).then((function(e){_.isEmpty(e)||t.list.forEach((function(t){t.room_list.forEach((function(n){e.indexOf(n.batchRoomId)>-1&&(t.hasUpload=!0)}))}))}))}))}};return{model:t,init:function(e){var n=this,s=e.type,l=e.batchType;t.currType=s,t.batchType=l,t.checkroomType="全部",t.currPage=0,t.total=0,t.filterList=[{id:"",name:"",label:"批次",type:"batch",options:[]},{id:"",name:"",label:"验房类型",type:"checkroomType",options:[],hidden:!("online_delivery_center"===l)},{id:"",name:"",label:"办理状态",type:"status",options:[]}],t.currStatus="",t.search={keyword:"",lastKeyword:""},t.list=[];var c=r["a"].getObject(o["a"].DELIVERY_PROCESS_CONDITION,r["a"].level.user)||{};return a["a"].getBatchList(l).then((function(e){return e=e||[],e.length&&(t.filterList[0].options=e,t.filterList[1].options=[{id:"all",name:"全部"},{id:"offline_delivery",name:"现场验房"},{id:"online_delivery_center",name:"在线验房"}],t.filterList[2].options=[{id:1,name:"待办理"},{id:2,name:"已办理"},{id:3,name:"已过号"}],t.filterList.forEach((function(e){var t=c[e.type]||"",n=_.find(e.options,{id:t})||{};e.id=n.id||e.options[0].id,e.name=n.name||e.options[0].name})),t.currStatus=t.filterList[2].name),i["a"].resolve(!0)})).then((function(){return n.load()}))},load:function(){return t.currPage=0,n.load()},loadMore:function(){return n.load()},cross:function(e,t){return n.changeNumberStatus(e,t,"过号")},resetRecovery:function(e,t){return n.changeNumberStatus(e,t,"恢复排号")},removeItem:function(e,n,i){if(!_.isEmpty(t)&&!_.isEmpty(t.list)&&"已办理"!==t.filterList[2].name&&t.currType===i){var r=_.find(t.list,{signin_id:e}),o=!0;if(r&&(r.room_list.forEach((function(e){e.room_id===n&&(e.status=1),o&=!!e.status})),o)){var a=_.indexOf(t.list,r);a>-1&&t.list.splice(a,1)}}}}}()},4778:function(e,t,n){"use strict";n("5ab2"),n("6d57"),n("e44b"),n("e10e"),n("cc57");var i=n("28f8"),r=n("f2de"),o=n("d9cd"),a=n("06c1");function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){Object(i["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var c={name:"PList",props:{isDisable:{type:Boolean,default:!1},errMsg:{type:String,defautl:""}},data:function(){return{showItem:!1}},computed:l({},Object(r["e"])({items:function(e){return e.projectList.items},currentItem:function(e){return e.projectList.currentItem},isIOSX:function(e){return e.app.global.isIOSX},isIOS:function(e){return e.app.global.isIOS}})),activated:function(){var e=this;this.init().then((function(t){t.name&&a["default"].checkDataUpdate("project").then((function(t){t&&e.init()}))}))},methods:l(l(l({},Object(r["b"])("projectList",["init","changeProject"])),Object(r["d"])("app",[o["a"]])),{},{toggleItems:function(){this.isDisable?this.$toast(this.errMsg):this.currentItem.name&&(this.showItem=!this.showItem,this.$emit("input",this.showItem))},select:function(e,t){var n=this;t.id!=this.currentItem.id&&this.changeProject(t).then((function(e){n[o["a"]]({deskTopUnitListRefreshTime:{}}),n.$toast("已经成功切换到【".concat(t.name,"】"),1e3),e&&n.init()}))},hide:function(){this.showItem=!1,this.$emit("input",this.showItem)}})},f=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"p-list"},[n("p",{staticClass:"title van-ellipsis",on:{click:function(t){return e.toggleItems()}}},[n("span",{staticClass:"title-name"},[e._v("\n      "+e._s(e.currentItem&&e.currentItem.name?e.currentItem.name:"无项目")+"\n    ")]),e._v(" "),e.currentItem&&e.currentItem.name?n("span",{staticClass:"icon",class:{up:e.showItem}},[n("i",{staticClass:"iconfont icon-fenxiangmuxiala",class:{up:e.showItem}})]):e._e()]),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:e.showItem,expression:"showItem"}],staticClass:"wrapper",class:{top20:e.isIOS,top30:e.isIOSX},on:{click:function(t){return e.hide()}}},[n("div",{staticClass:"list"},[n("ul",e._l(e.items,(function(t,i){return n("li",{key:t.id,staticClass:"list-item van-hairline--bottom",on:{click:function(n){return e.select(i,t)}}},[n("i",{staticClass:"upload iconfont",class:{"icon-shangchuan":!1}}),e._v(" "),n("span",{class:{active:t.id===e.currentItem.id}},[e._v(e._s(t.name))]),e._v(" "),n("i",{directives:[{name:"show",rawName:"v-show",value:t.id===e.currentItem.id,expression:"item.id === currentItem.id"}],staticClass:"iconfont icon-gou"})])})),0)])])])},d=[],u=n("d082");function h(e){n("8f12")}var p=!1,m=h,b="data-v-0a6b9a50",g=null,v=Object(u["a"])(c,f,d,p,m,b,g);t["a"]=v.exports},"485b":function(e,t,n){var i=n("1eef");"string"===typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);var r=n("85cb").default;r("326019e8",i,!0,{})},6013:function(e,t,n){"use strict";var i=n("07a4"),r=n("dfb1"),o=n("81ad"),a=n("c6e3"),s=n("9430"),l=n("a14a"),c=n.n(l),f={getDeliveryNodeList:function(){return r["a"].getDeliveryNodeList(i["a"].state.projectList.currentItem.id)},getTodoDeliveryDetail:function(e){return r["a"].getTodoDeliveryDetail(e)},uploadDeliveryConfirmInfo:function(e,t,n){return o["a"].uploadFiles(e,"deliveryProcess",t.room_id).then((function(e){console.log(e),e=c.a.uniq(e);var i={child_process:[{id:n,status:1,imgs:e}],reason:"",remark:""};return i=c.a.extend(i,t),r["a"].uploadProcessData(i)}))},uploadProcessData:function(e){return r["a"].uploadProcessData(e)},getProcessOperateLog:function(e){return r["a"].getProcessOperateLog(e)},getDeliveryConfirmInfo:function(e,t,n){return r["a"].getDeliveryConfirmInfo(e,t,n)},getRoomData:function(e,t){return a["a"].getBatchRoom(e,t)},assistSignIn:function(e){return r["a"].assistSignIn(e)},hasUploadData:function(e){return s["a"].existsBatchRoomUploadData(e)}};t["a"]=f},6286:function(e,t){e.exports="data:image/png;base64,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"},6824:function(e,t,n){e.exports=n.p+"img/label_special.0c131de7.png"},"6a56":function(e,t,n){e.exports=n.p+"img/label_simulate.e565b6f6.png"},"7fd9":function(e,t,n){"use strict";n.r(t);n("5ab2"),n("6d57"),n("e44b"),n("e10e"),n("c0c3"),n("f0e6"),n("cc57");var i=n("28f8"),r=n("97b4"),o=n("438a"),a=n("f2de"),s={name:"DeliveryProcessSwipeCell",props:{btnName:{type:String}},methods:{clickItem:function(e,t){switch(e){case"cell":this.$emit("cell-click");break;case"right":this.$emit("right-click");break}}}},l=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"line-up",class:{resume:"恢复排号"==e.btnName,cross:"过号"==e.btnName}},[n("van-swipe-cell",{attrs:{"right-width":e.btnName?60:0},on:{click:e.clickItem}},[n("van-cell-group",[e._t("content")],2),e._v(" "),n("span",{directives:[{name:"show",rawName:"v-show",value:e.btnName,expression:"btnName"}],staticClass:"btn-name",attrs:{slot:"right"},slot:"right"},[e._v("\n      "+e._s(e.btnName)+"\n    ")])],1)],1)},c=[],f=n("d082");function d(e){n("485b")}var u=!1,h=d,p=null,m=null,b=Object(f["a"])(s,l,c,u,h,p,m),g=b.exports,v=n("2d3d"),x=n("db55"),y=n("c42d"),w=n("4778");function k(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function _(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?k(Object(n),!0).forEach((function(t){Object(i["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):k(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var I={components:{AppFilter:r["a"],EmptyPage:o["a"],DeliveryProcessSwipeCell:g,PList:w["a"]},data:function(){return{hasNetwork:!0,noNetMsg:"当前网络异常，请稍后重试",value:"",keyword:"",refreshing:!1,loadingData:!1,hasMoreRoomData:!1,flag:!1,listLoading:!1,showItem:!1,authority:!0,model:{list:[]},type:"",filter:null,noRoomData:!1,btnNames:{"待办理":"过号","已过号":"恢复排号"},filterList:[]}},computed:_({},Object(a["e"])({currentBatchType:function(e){return e.app.global.currentBatchType},currentMenuType:function(e){return e.app.global.currentMenuType},currentItem:function(e){return e.projectList.currentItem},isFinishProjectBaseDataDownload:function(e){return e.app.global.isFinishProjectBaseDataDownload},isOnlineDelivery:function(){return"online_delivery_center"===this.currentBatchType}})),watch:{currentItem:function(e,t){if(this.$route.name.indexOf("DeliveryProcessNolist")>-1){var n=this.currentBatchType;if("online_delivery_center"===n)return void(this.authority=!0);this.isFinishProjectBaseDataDownload&&this.currentItem&&(this.authority=1==this.currentItem.enable_delivery_process)}},showItem:function(e){e&&this.$refs.filterElement.maskClickHandler()}},activated:function(){this.init()},methods:{init:function(){var e=this;if(!this.listLoading){this.listLoading=!0,this.filter=null;var t=this.$route.query.type,n=void 0===t?"delivery_check_room":t;this.type=n,this.model=v["a"].model,y["a"].getHasNetwork().then((function(t){e.hasNetwork=t}));var i=this.currentBatchType;v["a"].init({type:n,batchType:i}).finally((function(){e.listLoading=!1,e.updateStatus()}))}},clearInput:function(){var e=this;if(this.listLoading)return!1;this.model.search.keyword="",this.keyword="",this.model.search.lastKeyword&&this.search().then((function(){e.model.search.lastKeyword=""}))},updateStatus:function(){v["a"].model.currType=this.type,this.refreshing=!1,this.listLoading=!1,this.loadingData=!1,this.filterList=this.model.filterList,this.hasMoreRoomData=this.model.total>this.model.list.length,this.noRoomData=0===this.model.list.length},handleCellClick:function(e){e.batchId=this.model.filterList[0].id,x["a"].initModel(e),this.$router.push("/checkroom/".concat(this.currentMenuType||this.currentBatchType,"-room"))},handleRightClick:function(e,t){var n=this;return"待办理"===this.model.currStatus?v["a"].cross(e,t).then((function(){n.flag=!n.flag})).catch((function(e){console.error(e),n.$toast("过号操作失败，请稍后重试")})):"已过号"===this.model.currStatus?v["a"].resetRecovery(e,t).then((function(){n.flag=!n.flag})).catch((function(e){console.error(e),this.$toast("恢复排号失败，请稍后重试")})):void 0},chooseItem:function(e,t){var n=this;this.listLoading=!0,this.model.checkroomType=this.model.filterList[1].name,this.model.currStatus=this.model.filterList[2].name,v["a"].load().finally((function(){n.updateStatus(),n.goListTop()}))},goListTop:function(){this.$refs.scrollDOM&&(this.$refs.scrollDOM.scrollTop=0)},handleSearch:function(e){var t=this;this.search().then((function(){t.model.search.lastKeyword=t.model.search.keyword}))},search:function(){var e=this;return!this.listLoading&&(this.listLoading=!0,v["a"].load().finally((function(){e.updateStatus()})))},onRefresh:function(){var e=this;return!this.listLoading&&!this.loadingData&&(this.refreshing=!0,v["a"].load().finally((function(){e.updateStatus()})))},onLoad:function(){var e=this;return!(this.refreshing||!this.hasMoreRoomData)&&v["a"].loadMore().finally((function(){e.updateStatus()}))},updateKeyword:function(){this.model.search.keyword=this.keyword}}},D=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"no-list yf-comp-wrapper"},[i("cus-nav-bar",{attrs:{"left-arrow":""}},[i("div",{attrs:{slot:"title"},slot:"title"},[i("p-list",{model:{value:e.showItem,callback:function(t){e.showItem=t},expression:"showItem"}})],1)]),e._v(" "),i("empty-page",{attrs:{"show-empty":!e.hasNetwork,"empty-msg":e.noNetMsg,"empty-img-src":n("6233")}}),e._v(" "),i("empty-page",{attrs:{"show-empty":!e.authority&&e.hasNetwork&&!e.listLoading&&e.isFinishProjectBaseDataDownload,"empty-msg":"该项目没有启用在线交付，暂时无法使用","empty-img-src":n("6233")}}),e._v(" "),i("empty-page",{attrs:{"show-empty":e.listLoading||!e.isFinishProjectBaseDataDownload,"loading-page":!0,"empty-msg":"正在统计您的批次，请耐心等待"}}),e._v(" "),e.hasNetwork&&e.authority&&!e.listLoading&&e.isFinishProjectBaseDataDownload?i("div",{staticClass:"content"},[i("app-filter",{ref:"filterElement",attrs:{"filter-list":e.filterList},on:{chooseItem:e.chooseItem}}),e._v(" "),i("div",{staticClass:"process-search"},[i("div",{staticClass:"ipt-wrapper"},[i("i",{staticClass:"search-icon iconfont icon-chazhao",attrs:{slot:"left-icon"},slot:"left-icon"}),e._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:e.keyword,expression:"keyword"}],attrs:{type:"text",placeholder:"搜索排号/业主姓名"},domProps:{value:e.keyword},on:{input:[function(t){t.target.composing||(e.keyword=t.target.value)},e.updateKeyword],keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleSearch(t)}}}),e._v(" "),i("i",{directives:[{name:"show",rawName:"v-show",value:e.keyword,expression:"keyword"}],staticClass:"iconfont icon-cha",on:{click:function(t){return e.clearInput()}}})])]),e._v(" "),i("div",{staticClass:"list-wrapper"},[i("van-pull-refresh",{ref:"scrollDOM",staticClass:"refresh-wrapper",on:{refresh:e.onRefresh},model:{value:e.refreshing,callback:function(t){e.refreshing=t},expression:"refreshing"}},[i("empty-page",{attrs:{"show-empty":e.noRoomData,"empty-msg":"暂无数据","empty-img-src":n("5452")}}),e._v(" "),e.noRoomData?e._e():i("van-list",{staticClass:"lists",class:{flag:e.flag},attrs:{finished:!e.hasMoreRoomData,"finished-text":e.model.list.length>20?"没有更多了":""},on:{load:e.onLoad},model:{value:e.loadingData,callback:function(t){e.loadingData=t},expression:"loadingData"}},e._l(e.model.list,(function(t,r){return i("van-cell",{key:t.no,staticClass:"item"},[i("delivery-process-swipe-cell",{attrs:{"btn-name":e.btnNames[e.model.currStatus]},on:{"cell-click":function(n){return e.handleCellClick(t)},"right-click":function(n){return e.handleRightClick(t,r)}}},[i("div",{staticClass:"item-wrapper",attrs:{slot:"content"},slot:"content"},[i("div",{staticClass:"item-main"},[i("div",{staticClass:"fir-line flex"},[e.isOnlineDelivery?i("span",{class:["item-mode",{online:"在线验房"===t.checkroom_type}]},[e._v(e._s(t.checkroom_type))]):e._e(),e._v(" "),i("span",{staticClass:"no"},[e._v("排号： "+e._s(t.no))]),e._v(" "),"已过号"!=e.model.currStatus&&t.wait_minutes?i("span",{staticClass:"time",class:t.wait_minutes>=10?"very-urgent":t.wait_minutes>=5?"urgent":""},[e._v(e._s(t.wait_minutes)+"分钟")]):e._e(),e._v(" "),t.cross?i("span",{staticClass:"time"},[e._v("已过号")]):e._e()]),e._v(" "),i("p",{staticClass:"name"},[e._v("\n                    业主姓名："+e._s(t.customers)+"\n                    "),t.hasTag?i("img",{staticClass:"icon-smile",attrs:{src:n("6286")}}):e._e()]),e._v(" "),i("p",[e._v("房产："+e._s(t.roomName))]),e._v(" "),e.isOnlineDelivery?i("p",[e._v("收楼时段："+e._s(t.enroll_delivery_interval))]):e._e()])])])],1)})),1)],1)],1)],1):e._e()],1)},O=[];function z(e){n("8653b")}var C=!1,R=z,L="data-v-27ad56bf",P=null,A=Object(f["a"])(I,D,O,C,R,L,P);t["default"]=A.exports},"8653b":function(e,t,n){var i=n("09ee");"string"===typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);var r=n("85cb").default;r("0d0c013d",i,!0,{})},8704:function(e,t){e.exports=Object.is||function(e,t){return e===t?0!==e||1/e===1/t:e!=e&&t!=t}},"8f12":function(e,t,n){var i=n("d58f");"string"===typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);var r=n("85cb").default;r("28cdfc18",i,!0,{})},"97b4":function(e,t,n){"use strict";n("cc57");var i={filters:{format:function(e){return e.length>11?e.slice(0,11)+"...":e}},props:{filterList:{type:Array,default:function(){return[]}}},data:function(){return{top:0,showFilterContent:!1,currFilter:{},currIndex:"",labelSimulateUrl:n("6a56"),labelOpeningUrl:n("27cc"),labelSpecialUrl:n("6824"),labelDeliveryUrl:n("f093"),labelOnlineDeliveryUrl:n("e15e")}},mounted:function(){this.initPosition()},updated:function(){this.initPosition()},methods:{initPosition:function(){var e=this.$refs.filterHeader;this.top=e.offsetTop+e.offsetHeight},getLabelUrl:function(e){var t=e.child_type||e.type||"";switch(t){case"验房":return this.labelSimulateUrl;case"交付":return this.labelDeliveryUrl;case"开放":return this.labelOpeningUrl;case"在线交付":return this.labelOnlineDeliveryUrl;case"专项检查":return this.labelSpecialUrl}return""},changeFilter:function(e){if(e===this.currIndex)return this.maskClickHandler(),this.currIndex="",!1;this.currFilter=this.filterList[e],this.currIndex=e,this.showFilterContent=!0,this.$emit("changeFilter",e)},maskClickHandler:function(){this.showFilterContent=!1,this.currFilter={},this.currIndex=""},chooseItem:function(e,t){this.currFilter.name=this.currFilter.options[e].name,this.currFilter.id!=this.currFilter.options[e].id&&(this.currFilter.id=this.currFilter.options[e].id,console.log(this.currFilter),this.currFilter={},this.$emit("chooseItem",e,t))}}},r=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"filter"},[i("ul",{ref:"filterHeader",staticClass:"filter-header van-hairline--bottom"},e._l(e.filterList,(function(t,n){return i("li",{directives:[{name:"show",rawName:"v-show",value:!t.hidden,expression:"!filter.hidden"}],key:n,staticClass:"filter-item",class:{"filter-item__active":e.currFilter.type===t.type||t.id},on:{click:function(t){return e.changeFilter(n)}}},[i("div",{staticClass:"filter-desc van-hairline--left"},[i("span",{staticClass:"filter-title"},[e._v(e._s(t.id?t.name:t.label))]),e._v(" "),i("i",{staticClass:"iconfont",class:e.currIndex===n&&e.showFilterContent?"icon-hebingxingzhuang":"icon-hebingxingzhuang1"})])])})),0),e._v(" "),e.showFilterContent?i("div",{staticClass:"filter-content",style:{top:e.top+"px"},on:{click:e.maskClickHandler}},[i("ul",{staticClass:"filter-list"},e._l(e.currFilter.options,(function(t,r){return i("li",{key:r,staticClass:"filter-cell van-hairline--bottom",class:{"filter-cell__active":e.currFilter.id===t.id},on:{click:function(t){return e.chooseItem(r,e.currFilter)}}},[i("img",{staticClass:"icon-checked",attrs:{src:n("0081")}}),e._v(" "),e.getLabelUrl(t)?i("img",{staticClass:"label-img",attrs:{src:e.getLabelUrl(t)}}):e._e(),e._v(" "),i("span",{staticClass:"name-text"},[e._v(e._s(t.name))]),e._v(" "),i("span",{staticStyle:{"flex-grow":"1","min-width":"12px"}}),e._v(" "),i("span",[e._v(e._s(t.count))])])})),0)]):e._e()])},o=[],a=n("d082");function s(e){n("e596")}var l=!1,c=s,f="data-v-8decb152",d=null,u=Object(a["a"])(i,r,o,l,c,f,d);t["a"]=u.exports},a654:function(e,t,n){"use strict";var i=n("1834"),r=n("0938");t["a"]={existsDesignChange:function(e){var t="select 1 from room_design_change a inner join batch_room b on a.room_id = b.room_id where b.id = ?";return i["a"].queryOne(t,[e]).then((function(e){return!_.isEmpty(e)}))},getDesignChange:function(e){var t="select a.id, a.location, a.content, a.remark, a.sort from room_design_change a inner join batch_room b on a.room_id = b.room_id where b.id = ? order by a.sort";return i["a"].query(t,[e])},addDesignChangeProblem:function(e,t){if(e&&t){var n=r["a"].uuid();i["a"].insert("room_design_change_problem",["id","design_change_id","checkroom_problem_id"],[n,t,e])}}}},c0c3:function(e,t,n){"use strict";var i=n("69b3"),r=n("8704"),o=n("7108");n("0aed")("search",1,(function(e,t,n,a){return[function(n){var i=e(this),r=void 0==n?void 0:n[t];return void 0!==r?r.call(n,i):new RegExp(n)[t](String(i))},function(e){var t=a(n,e,this);if(t.done)return t.value;var s=i(e),l=String(this),c=s.lastIndex;r(c,0)||(s.lastIndex=0);var f=o(s,l);return r(s.lastIndex,c)||(s.lastIndex=c),null===f?-1:f.index}]}))},d58f:function(e,t,n){t=e.exports=n("690e")(!1),t.push([e.i,"\n.zhkf .p-list[data-v-0a6b9a50] {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-align: center;\n      -ms-flex-align: center;\n          align-items: center;\n  color: #606060;\n  font-size: 18px;\n  position: relative;\n}\n.zhkf .p-list .title[data-v-0a6b9a50] {\n    width: 100%;\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n    -webkit-box-align: center;\n        -ms-flex-align: center;\n            align-items: center;\n    -webkit-box-pack: center;\n        -ms-flex-pack: center;\n            justify-content: center;\n}\n.zhkf .p-list .title .title-name[data-v-0a6b9a50] {\n      overflow: hidden;\n      text-overflow: ellipsis;\n      white-space: nowrap;\n}\n.zhkf .p-list .icon[data-v-0a6b9a50] {\n    -ms-flex-negative: 0;\n        flex-shrink: 0;\n    width: 16px;\n    height: 16px;\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n    -webkit-box-align: center;\n        -ms-flex-align: center;\n            align-items: center;\n    -webkit-box-pack: center;\n        -ms-flex-pack: center;\n            justify-content: center;\n    margin-left: 8px;\n    -webkit-transition: -webkit-transform 0.3s ease;\n    transition: -webkit-transform 0.3s ease;\n    transition: transform 0.3s ease;\n    transition: transform 0.3s ease, -webkit-transform 0.3s ease;\n}\n.zhkf .p-list .icon.up[data-v-0a6b9a50] {\n      -webkit-transform: rotate(180deg);\n              transform: rotate(180deg);\n}\n.zhkf .p-list .wrapper[data-v-0a6b9a50] {\n    position: fixed;\n    top: 48px;\n    right: 0;\n    left: 0;\n    bottom: 0;\n    z-index: 10;\n    background: rgba(0, 0, 0, 0.3);\n}\n.zhkf .p-list .top10[data-v-0a6b9a50] {\n    margin-top: 10px;\n}\n.zhkf .p-list .top20[data-v-0a6b9a50] {\n    top: 68px;\n}\n.zhkf .p-list .top30[data-v-0a6b9a50] {\n    top: 78px;\n}\n.zhkf .p-list .list[data-v-0a6b9a50] {\n    width: 100%;\n    -webkit-box-sizing: border-box;\n            box-sizing: border-box;\n    max-height: 375px;\n    overflow-x: hidden;\n    overflow-y: scroll;\n    background: #fff;\n    font-size: 14px;\n    text-align: left;\n}\n.zhkf .p-list .list-item[data-v-0a6b9a50] {\n      height: 50px;\n      display: -webkit-box;\n      display: -ms-flexbox;\n      display: flex;\n      -webkit-box-orient: horizontal;\n      -webkit-box-direction: normal;\n          -ms-flex-direction: row;\n              flex-direction: row;\n      -webkit-box-align: center;\n          -ms-flex-align: center;\n              align-items: center;\n}\n.zhkf .p-list .list-item .upload[data-v-0a6b9a50] {\n        width: 16px;\n        height: 16px;\n        margin: 0 7px;\n        display: -webkit-box;\n        display: -ms-flexbox;\n        display: flex;\n        -webkit-box-align: center;\n            -ms-flex-align: center;\n                align-items: center;\n        -webkit-box-pack: center;\n            -ms-flex-pack: center;\n                justify-content: center;\n        color: #ff9323;\n}\n.zhkf .p-list .list-item span[data-v-0a6b9a50] {\n        color: #303030;\n        -webkit-box-flex: 1;\n            -ms-flex: 1;\n                flex: 1;\n}\n.zhkf .p-list .list-item span.active[data-v-0a6b9a50] {\n          color: #0099ff;\n}\n.zhkf .p-list .list-item .icon-gou[data-v-0a6b9a50] {\n        width: 21px;\n        font-size: 16px;\n        color: #0099ff;\n        margin-right: 16px;\n}\n",""])},db55:function(e,t,n){"use strict";n("5ab2"),n("e10e");var i=n("28f8"),r=(n("e697"),n("6d57"),n("e44b"),n("cc57"),n("fd50")),o=n("07a4"),a=n("a18c"),s=n("6013"),l=n("0523"),c=n("ca33"),f=n("a593");function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){Object(i["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}t["a"]=function(){var e={},t={},n={review_material:"delivery_review_material",handle_finance:"delivery_handle_finance",handle_property:"delivery_handle_property",check_room:"delivery_check_room",give_gift:"delivery_receive_gift",delivery_confirm:"delivery_confirm"};return t.getConditions=function(){return{batchId:e.roomInfo.batchId,roomId:e.roomInfo.room_list[e.currRoomIndex].room_id}},t.gotoNextRoom=function(){var n=e.roomInfo.room_list.length;return e.currRoomIndex<n-1?(e.currRoomIndex+=1,e.currRoom=e.roomInfo.room_list[e.currRoomIndex],t.load()):r["a"].resolve()},t.load=function(){var i=t.getConditions();return s["a"].getTodoDeliveryDetail(i).then((function(i){e.nodeList=[],e.baseInfo.delivery_qualification=i.delivery_qualification,e.baseInfo.appointment_process_list=i.appointment_process_list||[],e.baseInfo.checkroom_type=i.checkroom_type,e.baseInfo.delivery_unqualified_reason=i.delivery_unqualified_reason,e.baseInfo.hasTag=!1,e.baseInfo.room_name=e.roomInfo.room_list[e.currRoomIndex].room_name,e.baseInfo.customers=[],e.no="",_.each(i.customer_list,(function(t){e.baseInfo.customers.push({customerName:t.customer_name,customerPhone:t.customer_phone,canDialTelphonee:-1===t.customer_phone.indexOf("*"),hasTag:t.has_tag}),1==t.has_tag&&(e.baseInfo.hasTag=!0)})),i.no&&(e.no=i.no),i.signin_id&&(e.roomInfo.signin_id=i.signin_id);var r=o["a"].state.app.global.currentBatchType;_.each(e.sourseData,(function(t,o){var a={name:t.name,id:o,child_node:[],type:n[t.function_code],status:i.process[o]&&1==i.process[o].status?i.process[o].status:0,authRight:f["default"].prototype.$checkRight("view_room",r)&&f["default"].prototype.$checkRight(t.function_code,r)};_.each(t.child_process,(function(e,t){var n={name:e.name,type:e.type,remark:e.remark,id:t};i.process[o]&&1==i.process[o].status&&i.process[o].child_process[t]&&i.process[o].child_process[t].status?n["status"]=i.process[o].child_process[t].status:n["status"]=0,a.child_node.push(n)})),e.nodeList.push(a)}));for(var a=0;a<e.nodeList.length;a++){for(var s=!1,l=0;l<e.nodeList[a].child_node.length;l++)1==e.nodeList[a].child_node[l].status&&(s=!0);e.nodeList[a]["showStatus"]=s}return t.updateCheckroomNode().then((function(){return e.nodeList}))}))},t.updateCheckroomNode=function(){var t=r["a"].when();return e.currRoom.batchRoomId||(t=l["a"].getBatchRoomList(e.roomInfo.batchId,[e.currRoom.room_id]).then((function(t){return!_.isEmpty(t)&&(e.currRoom.batchRoomId=t[0].id,!0)}))),t.then((function(t){if(!1!==t)return s["a"].hasUploadData(e.currRoom.batchRoomId).then((function(t){if(_.isEmpty(t))return r["a"].resolve();var n=_.find(e.nodeList,{type:"delivery_check_room"});if(n){var i=!1;t.forEach((function(e){n.child_node.forEach((function(t){("问题"===e.type&&"登记问题"===t.name||"房间"===e.type&&"登记问题"!==t.name)&&(t.status=1),i=i||1==t.status}))})),n.showStatus=i,n.status=1,n.hasUpload=!0}}))}))},{model:e,initModel:function(t){e.roomInfo=t,e.currRoomIndex=0,e.currRoom=e.roomInfo.room_list[0],e.baseInfo={customers:[]};for(var n=e.roomInfo.room_list.length,i=0;i<n;i++)e.roomInfo.room_list[i].ans=i},init:function(){return s["a"].getDeliveryNodeList().then((function(n){return e.sourseData=n,_.each(e.sourseData,(function(e,t){_.each(e.child_process,(function(e,t){e.type=e.type.substr(0,e.type.length-1)}))})),t.load()}))},gotoNextRoom:function(){return t.gotoNextRoom()},gotoCheckRoom:function(){var t=o["a"].state.app.global.currentBatchType,n={deliveryprocess:{name:"正式交付",type:"交付",batch_type:"delivery",from:"deliveryprocess"},online_delivery_center:{name:"在线交房",type:"在线交付",batch_type:"online_delivery",from:"online_delivery_center"}},i=n[t]["batch_type"];return s["a"].getRoomData(e.roomInfo.batchId,e.currRoom.room_id).then((function(r){if(!_.isEmpty(r)){var s={batchRoomId:r.id,roomId:r.room_id,building_id:r.building_id,batch_unit_id:r.batch_unit_id,type:i,fitment_standard:r.fitment_standard,roomTitle:r.building_name+r.room_no,menuType:o["a"].state.app.global.currentMenuType,batch_id:e.roomInfo.batchId};return l["a"].getRoomTypeImageFileIsExists(r.id).then((function(e){e?(s.mode="0",s.isImageExists=!0):s.from=t,console.log("/checkroom/".concat(i,"-roomdetail")),a["a"].push({path:"/checkroom/".concat(i,"-roomdetail"),query:u(u({},s),{},{from:t})})}))}return o["a"].commit("app/APP",{currentBatchType:i}),a["a"].push({path:"/checkroom/".concat(i,"-batch-unit"),query:n[t]})}))},load:function(){return t.load()},uploadRoomData:function(t){return s["a"].getRoomData(e.roomInfo.batchId,e.currRoom.room_id).then((function(e){return c["a"].uploadData(e.batch_unit_id,e.id).then((function(){t.hasUpload=!1}))}))}}}()},e15e:function(e,t,n){e.exports=n.p+"img/label_online_delivery.0ae98a18.png"},e596:function(e,t,n){var i=n("e8b1");"string"===typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);var r=n("85cb").default;r("1ad1c9e7",i,!0,{})},e8b1:function(e,t,n){t=e.exports=n("690e")(!1),t.push([e.i,"\n.zhkf .filter[data-v-8decb152] {\n  background: #fff;\n  -ms-flex-negative: 0;\n      flex-shrink: 0;\n}\n.zhkf .label-img[data-v-8decb152] {\n  width: 54px;\n  margin-right: 10px;\n}\n.zhkf .name-text[data-v-8decb152] {\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n}\n.zhkf .filter-header[data-v-8decb152] {\n  height: 45px;\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-orient: horizontal;\n  -webkit-box-direction: normal;\n      -ms-flex-direction: row;\n          flex-direction: row;\n  -ms-flex-wrap: nowrap;\n      flex-wrap: nowrap;\n  -webkit-box-flex: 0;\n      -ms-flex: 0 0 auto;\n          flex: 0 0 auto;\n  -webkit-box-align: center;\n      -ms-flex-align: center;\n          align-items: center;\n}\n.zhkf .filter-header .filter-item[data-v-8decb152] {\n    -webkit-box-flex: 1;\n        -ms-flex: 1 1 auto;\n            flex: 1 1 auto;\n    text-align: center;\n    padding: 10px 0;\n    width: 20%;\n    line-height: 25px;\n    color: #606060;\n}\n.zhkf .filter-header .filter-item .filter-desc[data-v-8decb152] {\n      height: 100%;\n      font-size: 14px;\n      display: -webkit-box;\n      display: -ms-flexbox;\n      display: flex;\n      -webkit-box-pack: center;\n          -ms-flex-pack: center;\n              justify-content: center;\n      padding-left: 15px;\n      padding-right: 10px;\n}\n.zhkf .filter-header .filter-item .filter-desc .filter-title[data-v-8decb152] {\n        overflow: hidden;\n        white-space: nowrap;\n        text-overflow: ellipsis;\n}\n.zhkf .filter-header .filter-item .filter-desc .icon-hebingxingzhuang1[data-v-8decb152],\n      .zhkf .filter-header .filter-item .filter-desc .icon-hebingxingzhuang[data-v-8decb152] {\n        -ms-flex-negative: 0;\n            flex-shrink: 0;\n        font-size: 10px;\n        color: #d2d2d7;\n        vertical-align: middle;\n}\n.zhkf .filter-header .filter-item .filter-desc img[data-v-8decb152] {\n        width: 10px;\n        height: 10px;\n}\n.zhkf .filter-header .filter-item:first-child .filter-desc[data-v-8decb152] {\n      border-left: 0;\n}\n.zhkf .filter-header .filter-item__active[data-v-8decb152] {\n    color: #0085ff;\n}\n.zhkf .filter-header .filter-item__active .filter-desc .icon-hebingxingzhuang1[data-v-8decb152],\n    .zhkf .filter-header .filter-item__active .filter-desc .icon-hebingxingzhuang[data-v-8decb152] {\n      color: #0085ff;\n}\n.zhkf .filter-content[data-v-8decb152] {\n  width: 100%;\n  position: absolute;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background-color: rgba(0, 0, 0, 0.35);\n  z-index: 9990;\n}\n.zhkf .filter-content .filter-list[data-v-8decb152] {\n    background: #fff;\n    max-height: 320px;\n    overflow: scroll;\n}\n.zhkf .filter-content .filter-list .filter-cell[data-v-8decb152] {\n      display: -webkit-box;\n      display: -ms-flexbox;\n      display: flex;\n      height: 50px;\n      -webkit-box-align: center;\n          -ms-flex-align: center;\n              align-items: center;\n      padding-left: 38px;\n      padding-right: 15px;\n      font-size: 15px;\n      color: #303030;\n}\n.zhkf .filter-content .filter-list .filter-cell[data-v-8decb152]:last-child {\n        border-bottom: 0;\n}\n.zhkf .filter-content .filter-list .icon-checked[data-v-8decb152] {\n      display: none;\n}\n.zhkf .filter-content .filter-list .filter-cell__active[data-v-8decb152] {\n      position: relative;\n      color: #0085ff;\n}\n.zhkf .filter-content .filter-list .filter-cell__active .icon-checked[data-v-8decb152] {\n        display: inline-block;\n        position: absolute;\n        width: 13px;\n        left: 15px;\n}\n",""])},f093:function(e,t,n){e.exports=n.p+"img/label_delivery.5ed8949e.png"}}]);