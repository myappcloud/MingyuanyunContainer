(window["webpackJsonp_module_entry_zhkf_"]=window["webpackJsonp_module_entry_zhkf_"]||[]).push([["chunk-0fd89494"],{"0399d":function(e,t,a){"use strict";a.r(t);a("f548"),a("6a61");var n=a("2e91"),i=a("9ea6"),s=a("1961"),r=a("96c5");function c(e){return Object(s["a"])({url:"app-engineer-api/message/get-msg-list",data:e})}function o(e){return Object(s["d"])("app-engineer-api/message/click-msg-group",e)}var p=a("357d"),u=a("ba1a"),l={components:{appList:i["a"]},data:function(){return{msg_group_type_title:"",table_name:"",last_msg_id:""}},computed:{noticeParams:function(){return{msg_group_type_title:this.msg_group_type_title}}},activated:function(){var e=u["a"].getDecodeQuery(this.$route.query);this.msg_group_type_title=e.msg_group_type_title,this.msg_group_type_title&&this.refreshMsgStatus(this.msg_group_type_title)},methods:{refreshMsgStatus:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,o({msg_group_type_title:t});case 2:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),format:function(e){return e&&e.replace(/\n/g,"<br>")},fetchNoticeList:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return 1!==t.page&&(t.table_name=this.table_name,t.last_msg_id=this.last_msg_id),e.next=3,c(t);case 3:return a=e.sent,console.log(a),this.table_name=a.table_name,this.last_msg_id=a.last_msg_id,console.log("notie-res------------\x3e",a.items[0].content.substr(50)),e.abrupt("return",a);case 9:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),handleError:function(e){console.error(e)},handleClick:function(e){var t=e.target,a=Object(p["a"])("v_engineer_site");if("A"===t.tagName){var n=t.getAttribute("data-type")||"",i=JSON.parse(t.getAttribute("data-params")||"{}");switch(n){case"TaskList":this.$location.push({name:"daily-task",query:{from:"appengineerkit"}}),this.$event.$emit("refreshTaskList",i);break;case"TaskDetail":Object(r["open"])(Object(s["c"])("task/process/index",{id:i.id},"detail",a));break;case"TaskUpgradeList":this.$location.push({name:"upgrade-list"});break;case"TaskWarningList":this.$location.push({name:"warning-list"});break;case"TaskUpgradeDetail":this.$location.push({name:"upgrade-detail",query:{id:i.id}});break;case"MaintainAssignList":this.$location.push({name:"customer-maintain"});break;case"TaskWarningDetail":this.$location.push({name:"warn-detail",query:{id:i.id}});break;case"AnnouncementList":Object(r["open"])(Object(s["c"])("engineer/index/announcement",{},"",a));break;case"FeedbackList":Object(r["open"])(Object(s["c"])("engineer/index/feedback#feedbackList",{},"",a));break;case"TaskApproveDetail":Object(r["open"])(Object(s["c"])("task-approve/task-approve/index",{id:i.id},"approveDetail",a));break;case"":Object(r["open"])(Object(s["c"])(t.href));break;case"CheckTaskWarnList":this.$location.push({path:"risk-warn"});break;case"CheckTaskUpgradeList":this.$location.push({path:"risk-upgrade"});break;case"CheckTaskProblemDetail":this.$location.push({path:"repair-detail",query:{id:i.id}});break;case"ChildCheckTaskDetail":this.$location.push({path:"child-task-detail",query:{id:i.id}});break;case"MainCheckTaskDetail":this.$location.push({path:"repair-detail",query:{id:i.id}});break;case"CheckTaskBath":this.$location.push({path:"checklist",query:{id:i.id}});break;default:break}}}}},d=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-view x-col"},[a("header",{staticClass:"app-header x-lock"},[a("i",{staticClass:"app-nav-left app-nav-back",on:{click:function(t){return e.$router.go(-1)}}}),e._v(" "),a("span",{staticClass:"app-nav-title"},[e._v("通知")])]),e._v(" "),a("app-list",{staticClass:"x-flex",attrs:{fetch:e.fetchNoticeList,params:e.noticeParams,"empty-text":"没有任务消息",autoload:""},on:{error:e.handleError},scopedSlots:e._u([{key:"default",fn:function(t){return a("div",{staticClass:"notice-wrapper"},[a("div",{staticClass:"mesg-time"},[a("span",[e._v(e._s(t.msg_time))])]),e._v(" "),a("div",{staticClass:"notice mh15 mb20",domProps:{innerHTML:e._s(e.format(t.content))},on:{click:e.handleClick}})])}}])})],1)},h=[],g=a("d082");function k(e){a("e243")}var m=!1,f=k,b="data-v-c4064f88",_=null,v=Object(g["a"])(l,d,h,m,f,b,_);t["default"]=v.exports},c1b7:function(e,t,a){t=e.exports=a("690e")(!1),t.push([e.i,"/**\n *****************************************\n * Created by lifx\n * Created on 2018-05-07 14:22:18\n *****************************************\n */\n.zhkf .notice-wrapper[data-v-c4064f88] {\n  padding-top: 30px;\n}\n.zhkf .mesg-time[data-v-c4064f88] {\n  display: block;\n  margin-bottom: 10px;\n  text-align: center;\n}\n.zhkf .mesg-time span[data-v-c4064f88] {\n    padding: 2px 8px;\n    border-radius: 3px;\n    background: rgba(160, 160, 160, 0.5);\n    font-size: 12px;\n    color: #fff;\n}\n.zhkf .notice[data-v-c4064f88] {\n  padding: 15px;\n  font-size: 14px;\n  border-radius: 4px;\n  margin-bottom: 20px;\n  background: #ffffff;\n  line-height: 1.5;\n}\n",""])},e243:function(e,t,a){var n=a("c1b7");"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var i=a("85cb").default;i("4c20d3b5",n,!0,{})}}]);