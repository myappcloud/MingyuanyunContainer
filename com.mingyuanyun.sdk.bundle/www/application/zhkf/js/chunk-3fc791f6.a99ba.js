(window["webpackJsonp_module_entry_zhkf_"]=window["webpackJsonp_module_entry_zhkf_"]||[]).push([["chunk-3fc791f6"],{"0844":function(e,t,n){t=e.exports=n("690e")(!1),t.push([e.i,"\n.zhkf .batch-select-position[data-v-7ab4b0a6] {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-orient: vertical;\n  -webkit-box-direction: normal;\n      -ms-flex-direction: column;\n          flex-direction: column;\n  height: 100%;\n}\n.zhkf .batch-select-position .house-type[data-v-7ab4b0a6] {\n    -webkit-box-flex: 1;\n        -ms-flex: 1;\n            flex: 1;\n    position: relative;\n}\n.zhkf .batch-select-position .btns[data-v-7ab4b0a6] {\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n    -webkit-box-align: center;\n        -ms-flex-align: center;\n            align-items: center;\n    -webkit-box-pack: center;\n        -ms-flex-pack: center;\n            justify-content: center;\n    font-size: 16px;\n}\n.zhkf .batch-select-position .btns .btn[data-v-7ab4b0a6] {\n      -webkit-box-flex: 1;\n          -ms-flex: 1;\n              flex: 1;\n      padding: 12px 0;\n      text-align: center;\n}\n.zhkf .batch-select-position .btns .btn-cancel[data-v-7ab4b0a6] {\n      background: #fff;\n      color: #0085ff;\n}\n.zhkf .batch-select-position .btns .btn-confirm[data-v-7ab4b0a6] {\n      background: #0085ff;\n      color: #fff;\n}\n",""])},3956:function(e,t,n){var o=n("afd3");"string"===typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);var i=n("85cb").default;i("1b803e6a",o,!0,{})},4352:function(e,t,n){"use strict";n("cc57"),n("163d");var o=n("8366"),i=n.n(o),r=n("a593");r["default"].use(i.a);var a={name:"HouseType",props:{views:{type:Array,require:!0},currTab:{type:Number,require:!0},mark:{type:Boolean,default:!1}},data:function(){return{title:"",curr:1,total:0,options:{curr:0,onTap:this.onTap,onChange:this.onChange,mark:this.mark,views:this.views}}},watch:{views:{handler:function(e,t){this.renderHouseType(!0)},immediate:!1,deep:!0},currTab:{handler:function(e,t){this.currTab||this.renderHouseType()}}},mounted:function(){this.renderHouseType()},activated:function(){this.renderHouseType()},methods:{renderHouseType:function(e){var t=this.$refs["house-type-img"];e&&(this.options.views=this.views),paper.render(t,this.options)},onTap:function(e){var t,n,o,i=this.views[this.options.curr]||{};if("point"===e.type)for(t=i.problemList||[],o=0,n=t.length;o<n;o++)if(t[o].id===e.id){e.is_local=t[o].is_local||0;break}e.diagramId=i.id,this.$emit("onTap",e)},onChange:function(e){this.curr=e+1,this.options.curr=e,this.title=this.options.views[e].name,this.total=this.options.views&&this.options.views.length,this.$emit("onChange",e)}}},s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"house-type"},[n("div",{directives:[{name:"tap",rawName:"v-tap"}],ref:"house-type-img",staticClass:"house-type-img"}),e._v(" "),e.title&&e.total>1?n("span",{staticClass:"house-type-title"},[e._v(e._s(e.title))]):e._e(),e._v(" "),e.total&&e.total>1?n("span",{staticClass:"house-type-number"},[e._v(e._s(e.curr)+"/"+e._s(e.total))]):e._e()])},c=[],l=n("d082");function p(e){n("3956")}var u=!1,m=p,d="data-v-6d2fd172",h=null,f=Object(l["a"])(a,s,c,u,m,d,h);t["a"]=f.exports},"5c1b":function(e,t,n){"use strict";n("f0e6");var o=n("bbed"),i=n("fa1b"),r=n("07a4"),a=n("fd50");function s(){var e=function(e){e&&e.fitment_standard&&("毛坯"===e.fitment_standard?e.is_for_rough=1:"精装"===e.fitment_standard&&(e.is_for_decorated=1),delete e.fitment_standard)},t=function(e,t,n,i,r){return o["a"].getCheckItemLeaf(e,t,i,r).then((function(e){if(_.isEmpty(e))return[];var t=[];return _.each(e,(function(e){t.push(e.id)})),o["a"].getCheckItemAll(t.join("','"),n,i,r)}))};return{getCheckItemList:function(e,n,i,s,c){var l="毛坯"==s,p=a["a"].when(),u=["全部"];return u.push(1==c?"公区":"房间"),u="('"+u.join("','")+"')",p=r["a"].state.app.global.isUseProjectItem?o["a"].getProjectCheckItemList(e,n,i,l,u):t(e,n,i,l,u),p.then((function(e){return e}))},hasProjectCheckitem:function(e){return o["a"].hasProjectCheckitem(e)},searchCheckItemWithProject:function(t,n,i,r){return e(i),r?o["a"].searchProjectCheckItem(r,t,n,i):o["a"].searchCheckItem(t,n,i)},searchCheckItem:function(t,n,i,r){return console.log("searchCheckItem: ",t,n,i),console.time("searchCheckItem"),e(i),o["a"].hasProjectCheckitem(r).then((function(e){return e?o["a"].searchProjectCheckItem(r,t,n,i):o["a"].searchCheckItem(t,n,i).finally((function(){console.timeEnd("searchCheckItem")}))}))},getHigherLevelTreeListByCheckItemId:function(t,n,i){return console.log("getHigherLevelTree: ",t,n,i),console.time("getHigherLevelTree"),e(i),o["a"].getHigherLevelTreeListByCheckItemId(t,n,i).finally((function(){console.timeEnd("getHigherLevelTree")}))},getCheckItemLevel:function(e,t){return o["a"].getCheckItemLevel(e,t)},getPositionItemByRoom:function(e,t,n){var i=a["a"].when(),s=["全部"];return s.push(1==n?"公区":"房间"),s="('"+s.join("','")+"')",i=r["a"].state.app.global.isUseProjectItem?o["a"].getProjectPositionItemByRoom(e,t,s):o["a"].getPositionItemByRoom(e,s),i.then((function(e){return e}))},setIsUseProjectItemOfBatchUnit:function(e){return o["a"].getProjectItemOfBatchUnit(e).then((function(e){var t=!1;e&&(t=!0),r["a"].commit("app/APP",{isUseProjectItem:t})}))},getBatchCheckItem:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return i["a"].getCheckItemList(e,t,n,r["a"].state.app.global.isUseProjectItem).then((function(e){return console.log("BatchCheckItem",e),a["a"].resolve(e)}))}}}t["a"]=s()},"69ad":function(e,t,n){var o=n("0844");"string"===typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);var i=n("85cb").default;i("8ef8db8e",o,!0,{})},"6f72":function(e,t,n){"use strict";n.r(t);n("5ab2"),n("6d57"),n("e44b"),n("e10e"),n("f548"),n("cc57");var o=n("28f8"),i=n("4352"),r=n("882e"),a=n("86d9"),s=n("f2de");function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){Object(o["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={name:"BatchSelectPosition",components:{houseType:i["a"]},data:function(){return{options:[],curr:0,model:{},enabled:!1}},computed:l({},Object(s["e"])({currentBatchType:function(e){return e.app.global.currentBatchType},currentMenuType:function(e){return e.app.global.currentMenuType}})),created:function(){this.model=r["a"].model,this.enabled=this.model.points.length,this.fromView=this.$route.query.fromView||"problemList",this.options=this.updatePaperOptions(),console.log("options-------",this.options)},methods:{onTap:function(e){if("area"!==e.type)return!1;var t=r["a"].checkPositionItem(e.id);t?(this.model.points.push({positionId:e.id,diagramId:e.diagramId,coordinate:{x:e.x,y:e.y}}),this.enabled=!!this.model.points.length,this.options=this.updatePaperOptions()):this.$toast("选择的部位没有共有的检查项")},onChange:function(e){this.curr=e,console.log(e)},updatePaperOptions:function(){var e=this;return(a["a"].model.options||[]).map((function(t){return{id:t.id,name:t.name,path:t.path,positionList:t.positionList,problemList:(e.model.points||[]).filter((function(e){return e.diagramId===t.id}))}}))},onUndo:function(){this.enabled?(this.model.points.pop(),r["a"].cancelPoint(),this.enabled=!!this.model.points.length,this.options=this.updatePaperOptions()):this.$toast("没有可以撤销的问题位置")},onSubmit:function(){var e=this;if(!this.enabled)return this.$toast("请先标记问题位置"),!1;r["a"].clearStore(),r["a"].createRoomPosition().then((function(){console.log("前往添加问题页面"),e.$router.replace({path:"/checkroom/".concat(e.currentMenuType||e.currentBatchType,"-batch-add-problem")})})).catch((function(t){e.$toast(t)}))}}},u=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"batch-select-position"},[n("cus-nav-bar",{attrs:{title:e.model.roomTitle,"left-arrow":"",border:!1}}),e._v(" "),e.options.length?n("house-type",{staticClass:"house-type",attrs:{views:e.options,mark:!0},on:{onTap:e.onTap,onChange:e.onChange}}):e._e(),e._v(" "),n("div",{staticClass:"btns"},[n("div",{staticClass:"btn btn-cancel",on:{click:e.onUndo}},[e._v("\n      撤销\n    ")]),e._v(" "),n("div",{staticClass:"btn btn-confirm",on:{click:e.onSubmit}},[e._v("\n      确定\n    ")])])],1)},m=[],d=n("d082");function h(e){n("69ad")}var f=!1,b=h,g="data-v-7ab4b0a6",v=null,I=Object(d["a"])(p,u,m,f,b,g,v);t["default"]=I.exports},8366:function(e,t,n){(function(){var t={},n=!1;function o(){for(var e=navigator.userAgent,t=["Android","iPhone","Windows Phone","iPad","iPod"],n=!0,o=0;o<t.length;o++)if(e.indexOf(t[o])>0){n=!1;break}return n}function i(e){if(n?e.disabled:e.el.disabled)return!1;var t=e.tapObj;return e.time<300&&Math.abs(t.distanceX)<10&&Math.abs(t.distanceY)<10}function r(e,t){var n=e.touches[0],o=t.tapObj;o.pageX=n.pageX,o.pageY=n.pageY,o.clientX=n.clientX,o.clientY=n.clientY,t.time=+new Date}function a(e,t){var n=e.changedTouches[0],o=t.tapObj;t.time=+new Date-t.time,o.distanceX=o.pageX-n.pageX,o.distanceY=o.pageY-n.pageY,i(t)&&t.handler(e)}var s={isFn:!0,acceptStatement:!0,update:function(e){var t=this;if(t.tapObj={},"function"!==typeof e&&"a"!==t.el.tagName.toLocaleLowerCase())return console.error('The param of directive "v-tap" must be a function!');t.handler=function(n){if(n.tapObj=t.tapObj,t.el.href&&!t.modifiers.prevent)return window.location=t.el.href;var o=n.target.tagName.toLocaleLowerCase();if("input"===o||"textarea"===o)return n.target.focus();e.call(t,n)},o()?t.el.addEventListener("click",(function(e){if(t.el.href&&!t.modifiers.prevent)return window.location=t.el.href;t.handler.call(t,e)}),!1):(t.el.addEventListener("touchstart",(function(e){t.modifiers.stop&&e.stopPropagation(),t.modifiers.prevent&&e.preventDefault(),r(e,t)}),!1),t.el.addEventListener("touchend",(function(e){try{Object.defineProperty(e,"currentTarget",{value:t.el,writable:!0,enumerable:!0,configurable:!0})}catch(e){console.error(e.message),e.currentTarget=t.el}return e.preventDefault(),a(e,t)}),!1))}},c={bind:function(e,t){e.tapObj={},e.handler=function(n,o){var i=t.value;if(!i&&e.href&&!t.modifiers.prevent)return window.location=e.href;i.event=n;var r=i.event.target.tagName.toLocaleLowerCase();if(!o&&(i.tapObj=e.tapObj),"input"===r||"textarea"===r)return i.event.target.focus();i.methods.call(this,i)},o()?e.addEventListener("click",(function(n){t.modifiers.stop&&n.stopPropagation(),t.modifiers.prevent&&n.preventDefault(),e.handler(n,!0)}),!1):(e.addEventListener("touchstart",(function(n){t.modifiers.stop&&n.stopPropagation(),t.modifiers.prevent&&n.preventDefault(),r(n,e)}),!1),e.addEventListener("touchend",(function(t){try{Object.defineProperty(t,"currentTarget",{value:e,writable:!0,enumerable:!0,configurable:!0})}catch(t){console.error(t.message),t.currentTarget=e}return t.preventDefault(),a(t,e)}),!1))},componentUpdated:function(e,t){e.tapObj={},e.handler=function(n,o){var i=t.value;if(!i&&e.href&&!t.modifiers.prevent)return window.location=e.href;i.event=n,!o&&(i.tapObj=e.tapObj),i.methods.call(this,i)}},unbind:function(e){e.handler=function(){}}};t.install=function(e){e.version.substr(0,1)>1&&(n=!0),e.directive("tap",n?c:s)},t.version="3.0.3",e.exports=t})()},"86d9":function(e,t,n){"use strict";n("6d57");var o=n("fd50"),i=n("e073"),r=n("3fa2");function a(){var e=null,t={};function n(){var n=r["a"].room;return n.batchRoomId===e?o["a"].resolve():i["a"].getDiagramData(n.batchRoomId,!0).then((function(e){console.log("data",e),t.key=n.batchRoomId,t.options=e}))}function a(e){return t.options=i["a"].refreshDiagramData(t.options,e),t.options}function s(){var e=[],n={};return t.options&&t.options.length&&t.options.forEach((function(t){(t.positionList||[]).forEach((function(t){n[t.id]=!n[t.id]&&e.push(t)}))})),e}return{model:t,room:r["a"].room,init:n,updateProblemPoints:a,getButtonsByFromType:r["a"].getButtonsByFromType,getAllPosition:s}}t["a"]=a()},"882e":function(e,t,n){"use strict";n("cc57"),n("6d57");var o=n("fd50"),i=n("07a4"),r=n("bad1"),a=n("5c1b"),s=n("dd0a"),c=n("b643"),l=n("964e"),p=n("0938"),u=n("3fa2"),m=n("a593"),d=n("a14a"),h=n.n(d),f=n("bbed");function b(){var e={problem:{}},t=null,n="";function d(){if(t=null,e.positionItems={},e.cacheIntersectItems=[],e.diagramUrl="",e.allPositions=[],e.problemReasons=[],e.fitmentStandard=u["a"].room.fitmentStandard||"毛坯",e.points=[],e.checkItems=[],e.checkItemTree=null,e.checkItemMap=null,e.problem={},e.problem.batchRoomId="",e.problem.positions=[],e.problem.selectedItem=null,e.problem.selectedDesc=null,e.problem.problemImages=[],e.problem.remark="",e.problem.isPassedWhenAdd=0,e.problem.emergencyDegree="一般",e.problem.contractor=null,e.problem.responsibleCompany=null,e.problem.topItemId="",i["a"].state.app.global.enableProblemReason)return c["a"].getReasonConfig().then((function(t){e.problemReasons=e.problemReasons.concat(t)}))}function b(e,t){var n=[];return e.forEach((function(e){for(var o=t.length,i=0;i<o;i++)if(e.item_id===t[i].item_id){n.push(e);break}})),n}return{model:e,setRoomPosition:function(t){var o=m["default"].prototype.$toast.loading({duration:0,forbidClick:!0,loadingType:"spinner",message:"户型图加载中"});d(),e.roomTitle=t.roomTitle,e.diagramUrl=t.diagramUrl,e.allPositions=t.position,e.problem.batchUnitId=t.unitId,e.problem.batchRoomId=n=t.roomId,this.getPositionItem().then((function(){setTimeout((function(){o.clear(),console.log("关闭---------------")}),200)})).catch((function(e){return console.log(e)}))},getPositionItem:function(){return a["a"].getPositionItemByRoom(n,u["a"].room.projectId,u["a"].room.isVirtual).then((function(t){t.forEach((function(t){e.positionItems[t.position_id]||(e.positionItems[t.position_id]=[]),p["a"].getObjectFromArrayByProperty(e.positionItems[t.position_id],"item_id",t.item_id,!1)||e.positionItems[t.position_id].push({item_id:t.item_id,item_name:t.item_name,parent_item_id:t.parent_item_id,level:t.level})}))}))},checkPositionItem:function(t){if(!t)return null;e.problem.selectedItem=null;var n=e.positionItems[t];if(!n||!n.length)return!1;if(!e.cacheIntersectItems.length)return e.cacheIntersectItems.push(n),e.checkItems=n,e.checkItemTree=null,!0;var o=b(n,e.checkItems);return!(!o.length||!this.hasEndItem(o,t))&&(e.cacheIntersectItems.push(o),e.checkItems=o,e.checkItemTree=null,!0)},hasEndItem:function(t,n){for(var o=0;o<t.length;o++){for(var i=e.positionItems&&e.positionItems[n],r=i&&i.length,a=!0,s=0;s<r;s++)if(i[s].parent_item_id===t[o].item_id){a=!1;break}if(!0===a)return!0}return!1},getIntersectCheckItem:function(t,n,o){var i=[];if(t)for(var r=0;r<e.checkItems.length;r++)e.checkItems[r].parent_item_id===t&&i.push(e.checkItems[r]);else for(var a=0;a<e.checkItems.length;a++)1===e.checkItems[a].level&&i.push(e.checkItems[a]);return i.slice(n*o,(n+1)*o)},cancelPoint:function(){var t=e.cacheIntersectItems.length;t&&(e.cacheIntersectItems.pop(),e.checkItems=e.cacheIntersectItems[t-2]||[],e.problem.selectedItem=null,e.checkItemTree=null)},createRoomPosition:function(){var t={},n=[],o=e.allPositions,i=[];return e.points.forEach((function(e){var r=e.positionId,a={x:e.coordinate.x,y:e.coordinate.y,diagramId:e.diagramId},s=o.length,c=0;if(t[r])return t[r].points.push(a);for(;c<s;c++)if(r===o[c].id)return t[r]={positionId:r,positionName:"",points:[a]},i.push(r),n.push(t[r])})),e.problem.positions=n,this.setPositionName(i)},setPositionName:function(t){return t&&t.length?r["a"].getPositionByIds("'"+t.join("','")+"'").then((function(t){t&&t.length&&e.problem.positions.forEach((function(e){for(var n=t.length,o=0;o<n;o++)if(t[o].id===e.positionId){e.positionName=t[o].name;break}}))})):o["a"].resolve()},createCheckItemTree:function(){var t,n=[],o={};e.checkItems.forEach((function(e){var t,i=e.item_id,r=e.level>1?e.parent_item_id:"",a=h.a.assign({},e);return i in o?a=h.a.assign(o[i],a):o[i]=a,r?r in o?(t=o[r],void(t.children?t.children.push(a):t.children=[a])):(o[r]={item_id:r,children:[a]},o[r]):n.push(a)})),function e(n,o){n.forEach((function(t){t.item_full_name=o?o+"-"+t.item_name:t.item_name,t.children&&e(t.children,t.item_full_name)})),null!==t&&(t=1===n.length?n[0]:null)}(n),e.checkItemTree=n,e.checkItemMap=o,e.selectedItem=t},update:function(t){h.a.assign(e,t)},save:function(){t={points:e.points.slice(0),positions:e.problem.positions.slice(0),checkItems:e.checkItems.slice(0),cacheIntersectItems:e.cacheIntersectItems.slice(0)}},restore:function(){t&&(e.points=t.points,e.problem.positions=t.positions,e.checkItems=t.checkItems,e.cacheIntersectItems=t.cacheIntersectItems,t=null)},clearStore:function(){t=null},clear:function(){return d()},updateRemark:function(t){e.problem.remark=t},updateCheckItem:function(t){e.problem.selectedItem=t,e.problem.selectedDesc=null,e.problem.contractor=null,e.problem.responsibleCompany=null,e.problem.topItemId=function t(n){return n.parent_item_id&&n.level>1?t(e.checkItemMap[n.parent_item_id]):n.item_id}(t)},updateDesc:function(t){m["default"].prototype.$set(e.problem,"selectedDesc",t),e.problem.contractor=null,s["a"].getContractor(n,e.problem.selectedItem.item_id,e.problem.selectedDesc.map((function(e){return e.id})).join(";")).then((function(t){"length"in t||(t=[t]),e.problem.contractor=t,e.problem.responsibleCompany=t,m["default"].prototype.$eventBus.$emit("app.batchAddProblem:updateContractor")}))},submit:function(){var t=[],i=e.problem.problemImages.map((function(e){return{img_localpath:e.img_local_path}})),r=e.problem.selectedDesc.map((function(e){return e.id})).join(";"),a=e.problem.contractor.map((function(e){return e.contractor_id})).join(";"),s=e.problem.responsibleCompany.map((function(e){return e.contractor_id})).join(";"),c=0,p=[];e.problemReasons.forEach((function(e){e.selected&&p.push(e.id)}));for(var d=0;d<e.problem.positions.length;d++)for(var h=e.problem.positions[d],b=0;b<h.points.length;b++){var g=l["a"].batchAddProblem({problem_images:i,batch_room_id:n,position_id:h.positionId,item_id:e.problem.selectedItem.item_id,top_item_id:e.problem.topItemId,desc_id:r,contractor_id:a,responsible_company_id:s,roomtype_diagram_id:h.points[b].diagramId,coordinate:[{x:h.points[b].x,y:h.points[b].y}],emergency_degree:e.problem.emergencyDegree,remark:e.problem.remark,is_passed_when_add:e.problem.isPassedWhenAdd?1:0},!1,"",p);t.push(g),c++}return o["a"].all(t).then((function(){return f["a"].updateCheckItemUseTimes(e.problem.selectedItem.item_id,c)})).then((function(){return f["a"].updateItemDescUseTimes(r,c)})).then((function(){u["a"].room.hasProblem=!0,m["default"].prototype.$eventBus.$emit("app.roomdetail:statusChange")}))}}}t["a"]=b()},afd3:function(e,t,n){t=e.exports=n("690e")(!1),t.push([e.i,"\n.zhkf .house-type[data-v-6d2fd172] {\n  position: relative;\n  font-size: 15px;\n  overflow: hidden;\n}\n.zhkf .house-type .house-type-img[data-v-6d2fd172] {\n    position: absolute;\n    top: 0px;\n    left: 0px;\n    right: 0px;\n    bottom: 0px;\n    height: 100%;\n    width: 100%;\n}\n.zhkf .house-type .house-type-title[data-v-6d2fd172] {\n    position: absolute;\n    top: 10px;\n    left: 50%;\n    display: inline-block;\n    height: 20px;\n    padding: 0 15px;\n    border-radius: 3px;\n    color: #fff;\n    line-height: 20px;\n    background: rgba(0, 0, 0, 0.7);\n    -webkit-transform: translate(-50%, 0);\n            transform: translate(-50%, 0);\n    white-space: nowrap;\n    font-size: 12px;\n}\n.zhkf .house-type .house-type-number[data-v-6d2fd172] {\n    position: absolute;\n    top: 10px;\n    right: 20px;\n    display: inline-block;\n    height: 20px;\n    padding: 0 10px;\n    border-radius: 12px;\n    color: white;\n    line-height: 20px;\n    font-size: 12px;\n    background: rgba(0, 0, 0, 0.7);\n}\n",""])},b643:function(e,t,n){"use strict";var o=n("7ee1");t["a"]={getReasonConfig:function(){return o["a"].getList()},getProblemReason:function(e){return o["a"].getProblemReason(e)}}},bad1:function(e,t,n){"use strict";var o=n("97ba");t["a"]={getPositionList:function(e){return console.log("batchRoomId",e),o["a"].getPositionList(e).then((function(e){return e}))},getPositionByIds:function(e){return o["a"].getPositionByIds(e)},getPositionNameById:function(e){return o["a"].getPositionNameById(e)}}},e073:function(e,t,n){"use strict";n("cc57");var o=n("fd50"),i=n("af93"),r=n("a324"),a=n("8ae6"),s=n("c6e3"),c=function(e,t){if(e&&t){for(var n=e.map((function(e){return{id:e.id,name:e.name,path:e.path,positionList:e.positionList,problemList:[]}})),o=0;o<n.length;o++)if(n[o])for(var i=0;i<t.length;i++)t[i]&&n[o].id===t[i].roomtype_diagram_id&&t[i].isShow&&n[o].problemList.push(p(t[i]));return n}return e},l=function(e,t){var n=[s["a"].getRoomTypeDiagram(e),i["a"].getRoomTypeDiagramList(e)];return t&&n.push(r["a"].getProblemList(e,0,!0)),o["a"].all(n).then((function(e){console.log("resultSet",e);var t=e[0],n=e[1],o=e[2]||[];if(t)for(var i=0;i<t.length;i++){if(t[i]&&t[i].path&&(t[i].path="dev"==window.ZHKF_GLOBAL_ENV.VUE_APP_ENV?"img/huxing.jpg":a["a"].getImagePrefixPath()+t[i].path),t[i]&&n){t[i].positionList=[];for(var r=0;r<n.length;r++)n[r]&&t[i].id===n[r].diagram_id&&(n[r].coordinate=JSON.parse(n[r].coordinate),n[r].id=n[r].position_id,t[i].positionList.push(n[r]))}if(t[i]&&o){t[i].problemList=[];for(var s=0;s<o.length;s++)o[s]&&t[i].id===o[s].roomtype_diagram_id&&t[i].problemList.push(p(o[s]))}}return t}))},p=function(e){if(e.color)return e;var t=e;t.coordinate=e.coordinate?JSON.parse(e.coordinate):{};var n="";switch(e.status){case"待派单":n="#bb33ee";break;case"待整改":n="#ff4545";break;case"已整改":n="#0099ff";break;case"已通过":n="#0bc666";break;case"已作废":n="#888888";break;case"非正常关闭":n="#000000";break}return t.color=n,t};t["a"]={getDiagramData:l,refreshDiagramData:c}},fa1b:function(e,t,n){"use strict";var o=n("1834");t["a"]={getCheckItemList:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=[e],a="select bc.item_id, ci.full_name as item_full_name  from batch_checkitem bc  inner join check_item ci on ci.id = bc.item_id  where bc.batch_id = ? ";if(a+=t?" and ci.is_for_rough = 1 ":" and ci.is_for_decorated = 1 ",n){var s=i?"project_position_checkitem":"position_checkitem";a+=" and bc.item_id in                     (select item_id from "+s+" where position_id = ? )",r.push(n)}return a+=" order by ci.sort ",o["a"].query(a,r)}}}}]);