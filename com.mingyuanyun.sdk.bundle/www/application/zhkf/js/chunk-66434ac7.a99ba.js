(window["webpackJsonp_module_entry_zhkf_"]=window["webpackJsonp_module_entry_zhkf_"]||[]).push([["chunk-66434ac7"],{f2af:function(t,e,n){"use strict";n.r(e);n("5ab2"),n("6d57"),n("e44b"),n("e10e");var o=n("28f8"),a=n("f588"),i=n("edc1"),c=n("f2de"),s=n("269c"),r=n("438a"),l=n("af4c"),h=n("0a1d"),d=n("ba1a");function f(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function u(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?f(Object(n),!0).forEach((function(e){Object(o["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var p={name:"CheckList",components:{appButton:s["a"],EmptyPage:r["a"]},data:function(){return{activeIndex:0,model:a["a"].model,itemLoaded:!0,roomTitle:"",showPositionList:[]}},computed:u({},Object(c["e"])({contentHeight:function(t){return t.app.global.contentHeight},currentMenuType:function(t){return t.app.global.currentMenuType},currentBatchType:function(t){return t.app.global.currentBatchType},headerHeight:function(t){return t.app.global.headerHeight}})),activated:function(){this.init()},methods:{init:function(){var t=this,e=d["a"].getDecodeQuery(this.$route.query);return a["a"].init(e).then((function(e){t.roomTitle=a["a"].room.title,t.showPositionList=e,t.activeIndex=a["a"].model.curr_open_index||0}))},clickHandle:function(t){var e=this.showPositionList[t];console.log("xxxxxxxxxxxxxxxxxx",e),this.itemLoaded=!0},openDesc:function(t,e,n,o){var i=this.$route.query.batchRoomId,c={currPosition:t,currCheckItem:e,batchRoomId:i};a["a"].cachePositionInList(n,o,this.showPositionList),this.$router.push({path:"/checkroom/".concat(this.currentMenuType||this.currentBatchType,"-take-picture/").concat(e.item_id),query:u({},c)})},onChange:function(t){console.log(t)},finishTakePhoto:function(){var t=this,e=this.showPositionList.some((function(t){return t.has_dot}));if(e)return this.$toast("该房间存在审核不通过照片"),!1;this.$dialog.confirm({message:"选择拍摄完毕后，该房间将无法继续拍摄，您确认拍摄完毕了吗？",confirmButtonText:"确认",cancelButtonText:"取消"}).then((function(){var e=t.$route.query.batchRoomId;i["a"].saveShootRoomInfo(e).then((function(e){console.log("保存房间拍摄信息",e);var n=t.currentMenuType||t.currentBatchType;"todo"===n?l["a"].updateRoomList(!0):h["a"].updateRoomList(),t.$toast("提交成功",1e3),t.$router.go(-1)}),(function(e){t.$toast.clear(),t.$toast(e||"提交失败")}))}))}}},v=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"check-list-view"},[o("cus-nav-bar",{attrs:{title:t.roomTitle,"left-arrow":"",border:!1}}),t._v(" "),o("div",{directives:[{name:"scroll",rawName:"v-scroll"}],ref:"list",staticClass:"check-list",style:{height:t.contentHeight-t.headerHeight+"px"}},[o("empty-page",{attrs:{"show-empty":!t.showPositionList||!t.showPositionList.length,"empty-msg":"请先设置部位和检查项","empty-img-src":n("6cce")}}),t._v(" "),t.showPositionList&&t.showPositionList.length?o("van-collapse",{attrs:{accordion:""},on:{change:t.onChange},model:{value:t.activeIndex,callback:function(e){t.activeIndex=e},expression:"activeIndex"}},t._l(t.showPositionList,(function(e,n){return o("van-collapse-item",{key:n,attrs:{name:n},nativeOn:{click:function(e){return t.clickHandle(n)}}},[o("div",{attrs:{slot:"title"},slot:"title"},[t._v("\n          "+t._s(e.position_name)+"\n          "),o("span",[t._v("("+t._s(e.material_count?e.material_count:0)+")")]),t._v(" "),o("i",{directives:[{name:"show",rawName:"v-show",value:e.has_dot,expression:"item.has_dot"}],staticClass:"dot"})]),t._v(" "),t.itemLoaded?o("div",{staticClass:"item-list"},t._l(e.checkItem,(function(a,i){return o("van-cell",{key:i,class:{readed:a.done},attrs:{"is-link":""},on:{click:function(o){return t.openDesc(e,a,n,i)}}},[o("template",{slot:"title"},[o("span",{staticClass:"custom-text"},[t._v("\n                "+t._s(a.full_name)+"\n                "),o("span",[t._v("("+t._s(a.material_count?a.material_count:0)+")")]),t._v(" "),o("i",{directives:[{name:"show",rawName:"v-show",value:a.has_dot,expression:"childItem.has_dot"}],staticClass:"dot dot-checkitem"})])])],2)})),1):o("van-loading",{staticClass:"loading"})],1)})),1):t._e()],1),t._v(" "),t.$checkRight("shooting_finished","online_opening")?o("div",{staticClass:"btn"},[t.showPositionList&&t.showPositionList.length?o("app-button",{on:{click:function(e){return t.finishTakePhoto()}}},[t._v("拍摄完毕")]):t._e()],1):t._e()],1)},m=[],g=n("d082");function k(t){n("faf6")}var _=!1,b=k,x="data-v-35d1148f",w=null,y=Object(g["a"])(p,v,m,_,b,x,w);e["default"]=y.exports},faf6:function(t,e,n){var o=n("fd4a");"string"===typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);var a=n("85cb").default;a("75eba330",o,!0,{})},fd4a:function(t,e,n){e=t.exports=n("690e")(!1),e.push([t.i,"\n.zhkf .check-list[data-v-35d1148f] .van-collapse-item__content {\n  padding: 0;\n}\n.zhkf .check-list[data-v-35d1148f] .van-cell {\n  font-size: 14px;\n}\n.zhkf .check-list[data-v-35d1148f] .van-collapse-item__title {\n  font-weight: 500;\n}\n.zhkf .check-list[data-v-35d1148f] {\n  overflow: scroll;\n}\n.zhkf .check-list .van-collapse .van-collapse-item__content .van-cell[data-v-35d1148f] {\n    padding-left: 40px;\n}\n.zhkf .check-list .van-collapse .van-cell[data-v-35d1148f]:not(:last-child)::after {\n    left: 40px;\n}\n.zhkf .check-list .van-tag[data-v-35d1148f] {\n    position: absolute;\n    left: 5px;\n    top: 50%;\n    -webkit-transform: translateY(-50%);\n            transform: translateY(-50%);\n}\n.zhkf .check-list .loading[data-v-35d1148f] {\n    margin: 0 auto;\n}\n.zhkf .check-list .readed[data-v-35d1148f] {\n    color: #a0a0a0;\n}\n.zhkf .dot[data-v-35d1148f] {\n  position: absolute;\n  top: 50%;\n  right: 30px;\n  height: 6px;\n  line-height: 18px;\n  width: 6px;\n  text-align: center;\n  border-radius: 50%;\n  background: -webkit-gradient(linear, left top, right top, from(#fc8e83), to(#f7554c));\n  background: linear-gradient(90deg, #fc8e83 0%, #f7554c 100%);\n  -webkit-transform: translateY(-50%);\n          transform: translateY(-50%);\n}\n.zhkf .dot-checkitem[data-v-35d1148f] {\n  right: 40px;\n}\n.zhkf .btn[data-v-35d1148f] {\n  position: absolute;\n  width: 100%;\n  bottom: 0;\n  height: 60px;\n  padding-top: 7px;\n  background: #fff;\n}\n.zhkf .app-button[data-v-35d1148f] {\n  margin: 0 10px;\n}\n",""])}}]);