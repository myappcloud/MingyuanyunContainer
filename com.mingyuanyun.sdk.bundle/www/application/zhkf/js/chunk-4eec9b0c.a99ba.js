(window["webpackJsonp_module_entry_zhkf_"]=window["webpackJsonp_module_entry_zhkf_"]||[]).push([["chunk-4eec9b0c"],{"17a0":function(e,t,n){var o=n("fafe");"string"===typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);var s=n("85cb").default;s("054cf168",o,!0,{})},"886c":function(e,t,n){"use strict";n.r(t);n("5ab2"),n("6d57"),n("e44b"),n("e10e"),n("cc57");var o=n("28f8"),s=n("a740"),a=n("964e"),r=n("8326"),i=n("a6f0"),c=n("3fa2"),l=n("af4c"),d=n("ee1f"),f=n("f2de");function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach((function(t){Object(o["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var h={data:function(){return{currReasonIndex:null,reasons:[{name:"设计缺陷",selected:!1},{name:"工程质量瑕疵",selected:!1},{name:"与销售承诺不符",selected:!1},{name:"资料不齐",selected:!1},{name:"其他",selected:!1}],selectReasonType:"",otherReason:"",sendBackImages:[],pageSubmitStatus:!0,sendBackReasonText:"",less:200,showRefuseList:!1,refuseReasons:[]}},computed:u({},Object(f["e"])({currentBatchType:function(e){return e.app.global.currentBatchType},currentMenuType:function(e){return e.app.global.currentMenuType},deliveryConfig:function(e){return e.app.deliveryConfig}})),watch:{otherReason:function(e){e.length>200&&(this.otherReason=e.slice(0,200)),this.less=200-e.length;var t={};t.reject_remak=this.otherReason,r["a"].updateDelivery(t)}},created:function(){var e=this;this.batchRoomId=this.$route.query.batchRoomId,this.refuseReasons=this.reasons,i["a"].hasDeliveryRejectionList(this.batchRoomId).then((function(t){e.showRefuseList=t}))},methods:{goRecord:function(){this.$router.push({path:"/checkroom/".concat(this.currentMenuType||this.currentBatchType,"-refuse-list"),query:{batchRoomId:this.batchRoomId}})},selectReason:function(e){e.selected=!e.selected},batchBackProblem:function(){var e=this,t=d["a"].get();return t||(this.$comComps.toast.show("获取退回问题失败",2e3),window.$log("获取退回问题失败","delivery-refuse page BatchBackProblemModel.get() return null"),this.$router.go(-2)),this.$comComps.toast.show("问题处理中..."),a["a"].batchBackProblem(t.problemIds,t.batchRoomId).then((function(){})).catch((function(t){e.$comComps.toast.hide(),e.$comComps.toast.show(t,2e3)}))},refuseDelivery:function(){for(var e,t=this,n=[],o=this.refuseReasons.length,a=0;a<o;a++)e=this.refuseReasons[a],e.selected&&n.push(e.name);if(0===n.length)return this.$comComps.toast.show("请选择暂不收楼原因",2e3),!1;if(1===n.length&&"其他"===n[0]&&!this.otherReason.trim())return this.$comComps.toast.show("选择其他时，需要输入补充说明",2e3),!1;if(this.otherReason.length>200)return this.$comComps.toast.show("补充说明字数不能超过200字",2e3),!1;var r={delivery_status:"交付中",delivery_situation:"暂不收楼",reason:n.join(";"),remark:this.otherReason.trim()||"",created_by_name:s["j"]().user_name};console.log(r,"=====d===="),i["a"].saveDeliveryInfo(this.batchRoomId,r).then((function(){t.$comComps.toast.show("操作成功",1e3),"todo"===t.currentMenuType&&l["a"].updateRoomList(!0),c["a"].updateRoomInfo({assess_customer_status:"待评价",delivery_status:r.delivery_status}),t.$router.go(-1)}),(function(e){t.$comComps.toast.show(e||"操作失败",2e3)}))}}},p=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"problem-close"},[n("cus-nav-bar",{attrs:{title:"选择"+e.deliveryConfig.reject_delivery.text+"原因","left-arrow":""},on:{"click-right":function(t){return e.goRecord()}}},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.showRefuseList,expression:"showRefuseList"}],staticClass:"toggleBtn",attrs:{slot:"right"},slot:"right"},[e._v("办理记录")])]),e._v(" "),n("div",{staticClass:"content"},[n("ul",{staticClass:"reasons"},e._l(e.reasons,(function(t,o){return n("li",{key:o,staticClass:"notRepair",on:{click:function(n){return e.selectReason(t,o)}}},[n("span",[e._v(e._s(t.name))]),e._v(" "),n("van-checkbox",{model:{value:t.selected,callback:function(n){e.$set(t,"selected",n)},expression:"item.selected"}})],1)})),0),e._v(" "),n("div",{staticClass:"ipt"},[n("textarea",{directives:[{name:"model",rawName:"v-model",value:e.otherReason,expression:"otherReason"}],attrs:{id:"",name:"reason",cols:"30",rows:"5",placeholder:"补充说明"},domProps:{value:e.otherReason},on:{input:function(t){t.target.composing||(e.otherReason=t.target.value)}}}),e._v(" "),n("span",{staticClass:"less-words"},[e._v(e._s(e.less))])])]),e._v(" "),n("div",{staticClass:"footer"},[n("button",{on:{click:function(t){return e.refuseDelivery()}}},[e._v("确认")])])],1)},m=[],v=n("d082");function x(e){n("17a0")}var g=!1,k=x,w="data-v-606bbd95",y=null,R=Object(v["a"])(h,p,m,g,k,w,y);t["default"]=R.exports},ee1f:function(e,t,n){"use strict";var o=function(){var e=null;return{set:function(t){e=t},get:function(){return e}}};t["a"]=o()},fafe:function(e,t,n){t=e.exports=n("690e")(!1),t.push([e.i,"\n.zhkf .toggleBtn[data-v-606bbd95] {\n  color: #202020;\n  white-space: nowrap;\n}\n.zhkf .footer[data-v-606bbd95] {\n  padding: 20px 15px;\n}\n.zhkf .footer button[data-v-606bbd95] {\n    background: -webkit-gradient(linear, left top, right top, from(#1cb0fd), to(#0099ff));\n    background: linear-gradient(90deg, #1cb0fd 0%, #0099ff 100%);\n    -webkit-box-shadow: 0px 2px 4px 0px rgba(0, 153, 255, 0.27);\n            box-shadow: 0px 2px 4px 0px rgba(0, 153, 255, 0.27);\n    border-radius: 4px;\n    width: 100%;\n    height: 45px;\n    border: none;\n    outline: none;\n    font-size: 16px;\n    color: #fff;\n}\n.zhkf .icon-gou[data-v-606bbd95] {\n  color: #0099ff;\n}\n.zhkf .problem-back[data-v-606bbd95] {\n  height: 100%;\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-orient: vertical;\n  -webkit-box-direction: normal;\n      -ms-flex-direction: column;\n          flex-direction: column;\n}\n.zhkf .content[data-v-606bbd95] {\n  -webkit-box-flex: 1;\n      -ms-flex: 1;\n          flex: 1;\n  background: #fff;\n}\n.zhkf .content .reasons[data-v-606bbd95] {\n    border-bottom: 1px solid #ebebeb;\n    font-size: 15px;\n}\n.zhkf .content .reasons li[data-v-606bbd95] {\n      border-bottom: 1px solid #ebebeb;\n      display: -webkit-box;\n      display: -ms-flexbox;\n      display: flex;\n      -webkit-box-align: center;\n          -ms-flex-align: center;\n              align-items: center;\n      padding: 15px;\n}\n.zhkf .content .reasons li[data-v-606bbd95]:last-child {\n        border: none;\n}\n.zhkf .content .reasons li span[data-v-606bbd95] {\n        -webkit-box-flex: 1;\n            -ms-flex: 1;\n                flex: 1;\n}\n.zhkf .content .reasons li i[data-v-606bbd95] {\n        margin-right: 15px;\n}\n.zhkf .ipt[data-v-606bbd95] {\n  padding: 15px;\n  height: 110px;\n  position: relative;\n  font-size: 14px;\n}\n.zhkf .ipt .less-words[data-v-606bbd95] {\n    position: absolute;\n    right: 15px;\n    bottom: 10px;\n    color: #a0a0a0;\n    font-size: 14px;\n}\n.zhkf .ipt textarea[data-v-606bbd95] {\n    padding: 0;\n    border: none;\n    outline: none;\n    width: 100%;\n    resize: none;\n}\n.zhkf .item[data-v-606bbd95] {\n  padding: 0 15px;\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  font-size: 14px;\n  padding-top: 20px;\n}\n.zhkf .item .name[data-v-606bbd95] {\n    color: #606060;\n    width: 90px;\n}\n.zhkf .item .name .builder[data-v-606bbd95] {\n      text-align: center;\n      width: 60px;\n}\n.zhkf .item .name .builder span[data-v-606bbd95] {\n        display: block;\n        font-size: 12px;\n}\n.zhkf .item .value[data-v-606bbd95] {\n    color: #202020;\n    line-height: 20px;\n}\n.zhkf .item .value.blue-color[data-v-606bbd95] {\n      color: #0099ff;\n}\n.zhkf .item .value.photo[data-v-606bbd95] {\n      display: -webkit-box;\n      display: -ms-flexbox;\n      display: flex;\n}\n",""])}}]);