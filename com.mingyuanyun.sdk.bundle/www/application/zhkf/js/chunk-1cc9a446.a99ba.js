(window["webpackJsonp_module_entry_zhkf_"]=window["webpackJsonp_module_entry_zhkf_"]||[]).push([["chunk-1cc9a446"],{"0e23":function(e,t,n){"use strict";n.d(t,"b",(function(){return d}));n("6d57"),n("e44b"),n("6a61");var r=n("2e91"),a=n("d7b4"),i=n("fae6"),u="RiskLevel";function c(e){return a["a"].replaceParameter(e)}function s(e){return a["a"].removeParameter(e)}function o(e){return a["a"].getParameterList(e)}function l(e){return p.apply(this,arguments)}function p(){return p=Object(r["a"])(regeneratorRuntime.mark((function e(t){var n,r,a,u,o,l,p,d,f;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(void 0!==t&&0!==t.length){e.next=2;break}return e.abrupt("return",!1);case 2:e.t0=regeneratorRuntime.keys(t);case 3:if((e.t1=e.t0()).done){e.next=40;break}if(n=e.t1.value,"increment"!==n){e.next=24;break}if(r=t[n],console.log("incrementData",r),0!==r.length){e.next=10;break}return e.abrupt("continue",3);case 10:e.t2=regeneratorRuntime.keys(r);case 11:if((e.t3=e.t2()).done){e.next=22;break}if(a=e.t3.value,u=r[a],o=i["a"].getValue(u,"id",""),""!==o){e.next=17;break}return e.abrupt("continue",11);case 17:return l={id:o,code:i["a"].getValue(u,"code",""),title:i["a"].getValue(u,"title",""),sort:i["a"].getValue(u,"sort",""),value:i["a"].getValue(u,"value","")},e.next=20,c(l);case 20:e.next=11;break;case 22:e.next=38;break;case 24:if("delete"!==n){e.next=38;break}if(p=t[n],0!==p.length){e.next=28;break}return e.abrupt("continue",3);case 28:e.t4=regeneratorRuntime.keys(p);case 29:if((e.t5=e.t4()).done){e.next=38;break}if(d=e.t5.value,f=i["a"].getValue(p[d],"id",""),""!==f){e.next=34;break}return e.abrupt("continue",29);case 34:return e.next=36,s(f);case 36:e.next=29;break;case 38:e.next=3;break;case 40:case"end":return e.stop()}}),e)}))),p.apply(this,arguments)}function d(){return f.apply(this,arguments)}function f(){return f=Object(r["a"])(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t={items:[]},n={code:u},e.next=4,o(n);case 4:return t["items"]=e.sent,e.abrupt("return",t);case 6:case"end":return e.stop()}}),e)}))),f.apply(this,arguments)}t["a"]={operationParameter:l,getRiskLevelList:d}},"2aa3":function(e,t,n){"use strict";var r=n("6179"),a=n("5a88"),i="Set";e.exports=n("fea3")(i,(function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}}),{add:function(e){return r.def(a(this,i),e=0===e?0:e,e)}},r)},"2c15":function(e,t,n){"use strict";n.d(t,"c",(function(){return _})),n.d(t,"b",(function(){return x})),n.d(t,"d",(function(){return v}));n("6d57"),n("e44b"),n("6a61");var r=n("2e91"),a=(n("f548"),n("6178")),i=n("fae6"),u="kf_check_task_batch_scope";function c(e){var t=i["a"].getKeysAndValues(e),n=t.fields,r=t.values;return a["a"].replace(u,{fields:n,values:r})}function s(e){return a["a"].delete(u,{condition:{id:e}})}function o(e,t){return a["a"].select(u,{condition:e,suffix:t})}function l(e){return a["a"].select(u,{condition:e,fields:["product_ids"]})}var p={replaceTaskBatchScope:c,removeTaskBatchScope:s,getScopeBuildingList:o,getProductType:l,businessType:u},d=n("f893"),f=n("50f2"),b=n("d7b4"),h="off-line-check-task-api/download-data/check-task-batch-scope";function k(e){return p.replaceTaskBatchScope(e)}function m(e){return p.removeTaskBatchScope(e)}function g(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return p.getScopeBuildingList(e,t)}function _(e){return b["a"].getParameterList(e)}function x(e){var t={};return e&&(t.check_task_batch_id=e),p.getProductType(t)}function v(e){return y.apply(this,arguments)}function y(){return y=Object(r["a"])(regeneratorRuntime.mark((function e(t){var n,r,a,i,u,c=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=c.length>1&&void 0!==c[1]?c[1]:0,r=c.length>2&&void 0!==c[2]?c[2]:20,a=c.length>3&&void 0!==c[3]?c[3]:{},i={items:[]},t&&(a.check_task_batch_id=t),u="limit ".concat(r," offset ").concat(n*r),e.next=8,g(a,u);case 8:return i["items"]=e.sent,e.abrupt("return",i);case 10:case"end":return e.stop()}}),e)}))),y.apply(this,arguments)}function w(e){return j.apply(this,arguments)}function j(){return j=Object(r["a"])(regeneratorRuntime.mark((function e(t){var n,r,a,u,c,s,o,l,p;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(void 0!==t&&0!==t.length){e.next=2;break}return e.abrupt("return",!1);case 2:e.t0=regeneratorRuntime.keys(t);case 3:if((e.t1=e.t0()).done){e.next=39;break}if(n=e.t1.value,"increment"!==n){e.next=23;break}if(r=t[n],0!==r.length){e.next=9;break}return e.abrupt("continue",3);case 9:e.t2=regeneratorRuntime.keys(r);case 10:if((e.t3=e.t2()).done){e.next=21;break}if(a=e.t3.value,u=r[a],c=i["a"].getValue(u,"id",""),""!==c){e.next=16;break}return e.abrupt("continue",10);case 16:return s={id:c,check_task_batch_id:i["a"].getValue(u,"check_task_batch_id",""),proj_id:i["a"].getValue(u,"proj_id",""),sub_proj_id:i["a"].getValue(u,"sub_proj_id",""),building_id:i["a"].getValue(u,"building_id",""),building_full_name:i["a"].getValue(u,"building_full_name","")},e.next=19,k(s);case 19:e.next=10;break;case 21:e.next=37;break;case 23:if("delete"!==n){e.next=37;break}if(o=t[n],0!==o.length){e.next=27;break}return e.abrupt("continue",3);case 27:e.t4=regeneratorRuntime.keys(o);case 28:if((e.t5=e.t4()).done){e.next=37;break}if(l=e.t5.value,p=i["a"].getValue(o[l],"id",""),""!==p){e.next=33;break}return e.abrupt("continue",28);case 33:return e.next=35,m(p);case 35:e.next=28;break;case 37:e.next=3;break;case 39:case"end":return e.stop()}}),e)}))),j.apply(this,arguments)}function R(){return T.apply(this,arguments)}function T(){return T=Object(r["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(d["a"])(p.businessType,f["a"].checkTaskBatchScopeType,h,["id","check_task_batch_id","proj_id","sub_proj_id","building_id","building_full_name","product_ids"]);case 2:case"end":return e.stop()}}),e)}))),T.apply(this,arguments)}t["a"]={operationTaskBatchScope:w,getScopeBuildingListByBatch:v,paginationSaveNewData:R}},"334d":function(e,t,n){"use strict";n.d(t,"b",(function(){return m})),n.d(t,"c",(function(){return g}));n("6d57"),n("e44b"),n("5f54"),n("f548"),n("9a33"),n("6a61");var r=n("2e91"),a=n("6178"),i=n("fae6"),u="t_building_unit";function c(e){var t=i["a"].getKeysAndValues(e),n=t.fields,r=t.values;return a["a"].replace(u,{fields:n,values:r})}function s(e,t){var n=i["a"].getKeysAndValues(e),r=n.fields,c=n.values;return a["a"].update(u,{fields:r,values:c,condition:t})}function o(e){return a["a"].delete(u,{condition:{id:e}})}function l(e){return a["a"].select(u,{condition:e})}var p={replaceBuildingUnit:c,updateBuildingUnit:s,removeBuildingUnit:o,getUnitList:l},d=n("9ec8"),f=n("aa99");function b(e){return p.replaceBuildingUnit(e)}function h(e){return p.removeBuildingUnit(e)}function k(e){return p.getUnitList(e)}function m(e,t){return f["a"].getRoomListByBuilding(e,t)}function g(e,t){return _.apply(this,arguments)}function _(){return _=Object(r["a"])(regeneratorRuntime.mark((function e(t,n){var r,a,i,u,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r={items:[]},void 0!==t&&""!==t){e.next=3;break}return e.abrupt("return",r);case 3:return e.next=5,k({building_id:t,like:{product_ids:n}});case 5:if(a=e.sent,0!==a.length){e.next=8;break}return e.abrupt("return",r);case 8:return e.next=10,d["a"].getBuildingFloorListByBuilding(t);case 10:if(i=e.sent,0!==i.length){e.next=13;break}return e.abrupt("return",r);case 13:return e.next=15,f["a"].getRoomListByBuilding(t,n.join(",").replace(/empty/g,"").split(","));case 15:if(u=e.sent,0!==u.length){e.next=18;break}return e.abrupt("return",r);case 18:return c=[],a.map((function(e){var t=[];i.map((function(n){var r=[];u.map((function(t){t["unit"]===e["unit"]&&t["floor"]===n["floor"]&&r.push(Object.assign({},t))})),n["rooms"]=r,t.push(Object.assign({},n))})),e["floors"]=t,c.push(Object.assign({},e))})),r["items"]=c,e.abrupt("return",r);case 22:case"end":return e.stop()}}),e)}))),_.apply(this,arguments)}function x(e){return v.apply(this,arguments)}function v(){return v=Object(r["a"])(regeneratorRuntime.mark((function e(t){var n,r,a,u,c,s,o,l,p;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(void 0!==t&&0!==t.length){e.next=2;break}return e.abrupt("return",!1);case 2:e.t0=regeneratorRuntime.keys(t);case 3:if((e.t1=e.t0()).done){e.next=39;break}if(n=e.t1.value,"increment"!==n){e.next=23;break}if(r=t[n],0!==r.length){e.next=9;break}return e.abrupt("continue",3);case 9:e.t2=regeneratorRuntime.keys(r);case 10:if((e.t3=e.t2()).done){e.next=21;break}if(a=e.t3.value,u=r[a],c=i["a"].getValue(u,"id",""),""!==c){e.next=16;break}return e.abrupt("continue",10);case 16:return s={id:c,building_id:i["a"].getValue(u,"building_id",""),unit:i["a"].getValue(u,"unit",""),full_name:i["a"].getValue(u,"full_name",""),sort:i["a"].getValue(u,"sort","")},e.next=19,b(s);case 19:e.next=10;break;case 21:e.next=37;break;case 23:if("delete"!==n){e.next=37;break}if(o=t[n],0!==o.length){e.next=27;break}return e.abrupt("continue",3);case 27:e.t4=regeneratorRuntime.keys(o);case 28:if((e.t5=e.t4()).done){e.next=37;break}if(l=e.t5.value,p=i["a"].getValue(o[l],"id",""),""!==p){e.next=33;break}return e.abrupt("continue",28);case 33:return e.next=35,h(p);case 35:e.next=28;break;case 37:e.next=3;break;case 39:case"end":return e.stop()}}),e)}))),v.apply(this,arguments)}t["a"]={operationBuildingUnit:x,getUnitMapByBuilding:g}},"45bd":function(e,t,n){"use strict";n.d(t,"c",(function(){return a})),n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return u}));var r=n("3dd2"),a=function(e){return function(){if(!e){var t=window.cordova&&window.cordova.file;t&&(e=Object(r["c"])()?t.documentsDirectory:t.externalApplicationStorageDirectory)}return e||""}}(),i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return Object(r["c"])()?a()+"/default/com.hackemist.SDWebImageCache.default/"+e:a()+e},u=function(e){return function(t){return e.exec(t)||""}}(/[^/]+$/)},"47f1":function(e,t,n){"use strict";function r(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10;if(1===t)return{offset:0,limit:n};var r=a(e,n);t>=r&&(t=r);var i=(parseInt(t)-1)*n;return{offset:i,limit:n}}function a(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;return e<=t?1:e%t===0?parseInt(e/t):parseInt(e/t)+1}t["a"]={buildPageParameter:r,buildMaxPage:a}},"4be7":function(e,t,n){"use strict";n("6a61");var r=n("2e91"),a=(n("6d57"),n("e44b"),n("6178")),i=n("fae6"),u="kf_check_task_log";function c(e){var t=i["a"].getKeysAndValues(e),n=t.fields,r=t.values;return a["a"].insert(u,{fields:n,values:r})}function s(){return a["a"].delete(u,{})}function o(e,t){return a["a"].select(u,{condition:e,suffix:t})}var l={insertCheckTaskLog:c,cleanCheckTaskLog:s,businessType:u,getCheckTaskLogList:o},p=n("582f"),d=n("4c60");function f(e){return b.apply(this,arguments)}function b(){return b=Object(r["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(""===i["a"].getValue(t,"id","")&&(t["id"]=Object(p["a"])()),n=l.insertCheckTaskLog(t),!n){e.next=5;break}return e.next=5,Object(d["c"])(t["id"],l.businessType);case 5:return e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)}))),b.apply(this,arguments)}function h(e,t){return l.getCheckTaskLogList(e,t)}function k(e){if(0===e.length)return[];var t='id in ("'+e.join('","')+'")';return h(t,"")}t["a"]={insertCheckTaskLog:f,businessType:l.businessType,getCheckTaskLogListByIds:k}},"4c60":function(e,t,n){"use strict";n.d(t,"c",(function(){return _})),n.d(t,"b",(function(){return v}));n("6a61");var r=n("2e91"),a=(n("6d57"),n("e44b"),n("6178")),i=n("fae6"),u="kf_increment";function c(e){var t=i["a"].getKeysAndValues(e),n=t.fields,r=t.values;return a["a"].insert(u,{fields:n,values:r})}function s(){return a["a"].delete(u,{})}function o(e,t){return a["a"].select(u,{condition:e,suffix:t})}function l(e,t){return p.apply(this,arguments)}function p(){return p=Object(r["a"])(regeneratorRuntime.mark((function e(t,n){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,a["a"].select(u,{fields:["count(DISTINCT business_id) as count"],condition:t,suffix:n});case 2:if(r=e.sent,0!==r.length){e.next=5;break}return e.abrupt("return",0);case 5:return e.abrupt("return",r[0].count);case 6:case"end":return e.stop()}}),e)}))),p.apply(this,arguments)}function d(e,t){return a["a"].batchInsert(u,{fields:e,values:t})}var f={insertIncrement:c,batchInsertIncrement:d,cleanIncrement:s,getIncrementList:o,getIncrementCount:l},b=n("582f"),h=n("e49e"),k=n("c662"),m="increment",g="delete";function _(e,t){return x.apply(this,arguments)}function x(){return x=Object(r["a"])(regeneratorRuntime.mark((function e(t,n){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,w(t,n,m);case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)}))),x.apply(this,arguments)}function v(e,t){return y.apply(this,arguments)}function y(){return y=Object(r["a"])(regeneratorRuntime.mark((function e(t,n){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,w(t,n,g);case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)}))),y.apply(this,arguments)}function w(e,t,n){return j.apply(this,arguments)}function j(){return j=Object(r["a"])(regeneratorRuntime.mark((function e(t,n,r){var a,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a={id:Object(b["a"])(),business_type:n,business_id:t,operation:r},e.next=3,f.insertIncrement(a);case 3:return i=e.sent,e.abrupt("return",i);case 5:case"end":return e.stop()}}),e)}))),j.apply(this,arguments)}function R(e,t){return f.getIncrementList(e,t)}function T(e,t){return R({},"limit ".concat(e,", ").concat(t))}function O(){return R({},"")}function B(e,t){return I.apply(this,arguments)}function I(){return I=Object(r["a"])(regeneratorRuntime.mark((function e(t,n){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,f.getIncrementCount(t,n);case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)}))),I.apply(this,arguments)}function V(){return P.apply(this,arguments)}function P(){return P=Object(r["a"])(regeneratorRuntime.mark((function e(){var t,n,r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t={business_type:h["a"].businessType},e.next=3,B(t,"");case 3:return n=e.sent,r={business_type:k["a"].businessType},e.next=7,B(r);case 7:return a=e.sent,console.log(a),e.abrupt("return",(n||0)+(a||0));case 10:case"end":return e.stop()}}),e)}))),P.apply(this,arguments)}function C(){return f.cleanIncrement()}function D(e,t){return A.apply(this,arguments)}function A(){return A=Object(r["a"])(regeneratorRuntime.mark((function e(t,n){var r,a,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=[],a=["id","business_type","business_id","operation"],t.map((function(e){r.push([Object(b["a"])(),n,e,m])})),e.next=5,f.batchInsertIncrement(a,r);case 5:return i=e.sent,e.abrupt("return",i);case 7:case"end":return e.stop()}}),e)}))),A.apply(this,arguments)}t["a"]={insertIncrement:_,cleanIncrement:C,getAllIncrement:O,operationIncrement:m,operationDelete:g,getUploadDataCount:V,deleteIncrement:v,batchInsertIncrement:D,getCount:B,pageIncrement:T}},"50f2":function(e,t,n){"use strict";n("6a61");var r=n("2e91"),a=(n("f548"),n("6d57"),n("e44b"),n("6178")),i=n("fae6"),u="kf_time_stamp";function c(e){var t=i["a"].getKeysAndValues(e),n=t.fields,r=t.values;return a["a"].replace(u,{fields:n,values:r})}function s(e,t){var n=i["a"].getKeysAndValues(e),r=n.fields,c=n.values;return a["a"].update(u,{fields:r,values:c,condition:t})}function o(e,t){return a["a"].select(u,{condition:e,suffix:t})}var l={replaceTimeStamp:c,updateTimeStamp:s,getTimeStamp:o},p="basic",d="business",f="basic_room",b="basic_project",h="basic_building",k="basic_building_unit",m="basic_building_floor",g="check_node",_="check_task_batch",x="check_task_batch_scope",v="check_task_batch_item",y="check_task_batch_item_detail",w="check_task_batch_item_detail_person",j="check_task_problem",R="check_task_problem_scope",T="image";function O(e){return l.replaceTimeStamp(e)}function B(e,t){return I.apply(this,arguments)}function I(){return I=Object(r["a"])(regeneratorRuntime.mark((function e(t,n){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,l.getTimeStamp(t,n);case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)}))),I.apply(this,arguments)}function V(e){return P.apply(this,arguments)}function P(){return P=Object(r["a"])(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n="limit 1",e.next=3,B(t,n);case 3:if(r=e.sent,0!==r.length){e.next=6;break}return e.abrupt("return",[]);case 6:return e.abrupt("return",r[0]);case 7:case"end":return e.stop()}}),e)}))),P.apply(this,arguments)}function C(e){return D.apply(this,arguments)}function D(){return D=Object(r["a"])(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n='type in ("'+t.join('","')+'")',e.next=3,B(n,"");case 3:if(r=e.sent,0!==r.length){e.next=6;break}return e.abrupt("return",[]);case 6:return e.abrupt("return",r);case 7:case"end":return e.stop()}}),e)}))),D.apply(this,arguments)}function A(){return S.apply(this,arguments)}function S(){return S=Object(r["a"])(regeneratorRuntime.mark((function e(){var t,n,r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,B({},"");case 2:for(t=e.sent,n={},r=0;r<t.length;r++)a=t[r],n[a["type"]]=a["time_stamp"];return e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)}))),S.apply(this,arguments)}t["a"]={replaceTimeStamp:O,basicType:p,businessType:d,basicRoomType:f,basicProjectType:b,basicBuildingType:h,basicBuildingUtilType:k,basicBuildingFloorType:m,checkNodeType:g,checkTaskBatchType:_,checkTaskBatchScopeType:x,checkTaskBatchItemType:v,checkTaskBatchItemDetailType:y,checkTaskBatchItemDetailPersonType:w,checkTaskProblemType:j,checkTaskProblemScopeType:R,imageType:T,getOneTimeStamp:V,getMapTimeStampWithType:C,getTimeStampMap:A}},"5a88":function(e,t,n){var r=n("fb68");e.exports=function(e,t){if(!r(e)||e._t!==t)throw TypeError("Incompatible receiver, "+t+" required!");return e}},6179:function(e,t,n){"use strict";var r=n("064e").f,a=n("e005"),i=n("ef91"),u=n("4ce5"),c=n("a73b"),s=n("206c"),o=n("492d"),l=n("475d"),p=n("1157"),d=n("149f"),f=n("f71f").fastKey,b=n("5a88"),h=d?"_s":"size",k=function(e,t){var n,r=f(t);if("F"!==r)return e._i[r];for(n=e._f;n;n=n.n)if(n.k==t)return n};e.exports={getConstructor:function(e,t,n,o){var l=e((function(e,r){c(e,l,t,"_i"),e._t=t,e._i=a(null),e._f=void 0,e._l=void 0,e[h]=0,void 0!=r&&s(r,n,e[o],e)}));return i(l.prototype,{clear:function(){for(var e=b(this,t),n=e._i,r=e._f;r;r=r.n)r.r=!0,r.p&&(r.p=r.p.n=void 0),delete n[r.i];e._f=e._l=void 0,e[h]=0},delete:function(e){var n=b(this,t),r=k(n,e);if(r){var a=r.n,i=r.p;delete n._i[r.i],r.r=!0,i&&(i.n=a),a&&(a.p=i),n._f==r&&(n._f=a),n._l==r&&(n._l=i),n[h]--}return!!r},forEach:function(e){b(this,t);var n,r=u(e,arguments.length>1?arguments[1]:void 0,3);while(n=n?n.n:this._f){r(n.v,n.k,this);while(n&&n.r)n=n.p}},has:function(e){return!!k(b(this,t),e)}}),d&&r(l.prototype,"size",{get:function(){return b(this,t)[h]}}),l},def:function(e,t,n){var r,a,i=k(e,t);return i?i.v=n:(e._l=i={i:a=f(t,!0),k:t,v:n,p:r=e._l,n:void 0,r:!1},e._f||(e._f=i),r&&(r.n=i),e[h]++,"F"!==a&&(e._i[a]=i)),e},getEntry:k,setStrong:function(e,t,n){o(e,t,(function(e,n){this._t=b(e,t),this._k=n,this._l=void 0}),(function(){var e=this,t=e._k,n=e._l;while(n&&n.r)n=n.p;return e._t&&(e._l=n=n?n.n:e._t._f)?l(0,"keys"==t?n.k:"values"==t?n.v:[n.k,n.v]):(e._t=void 0,l(1))}),n?"entries":"values",!n,!0),p(t)}}},6554:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));n("6d57");var r=n("b23b"),a=(n("6a61"),n("2e91")),i=n("85ad"),u=n("45bd"),c=n("c2c1"),s=n("6e0d");function o(e){return l.apply(this,arguments)}function l(){return l=Object(a["a"])(regeneratorRuntime.mark((function e(t){var n,a,i,c,o,l,d,f,b,h=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=h.length>1&&void 0!==h[1]?h[1]:{},!(window.MAliyunOSS&&t&&t.length)){e.next=14;break}return e.next=4,Object(s["a"])("kf");case 4:if(a=e.sent,!a){e.next=14;break}return i={endPoint:a.endPoint,federationAuthUrl:a.stsUrl,type:a.type,data:[]},c=n.folder,o=void 0===c?"images":c,l=n.onStart,d=n.onProgress,f=Object(r["a"])(n,["folder","onStart","onProgress"]),Array.isArray(t)||(t=[t]),t.forEach((function(e){i.data.push({bucket:a.bucketName,objectKey:[a.parentDir,o,Object(u["a"])(e)].join("/"),objectLocalPath:e})})),e.next=12,p(i,{start:l,progress:d,domain:a.customDomain,config:f});case 12:return b=e.sent,e.abrupt("return",b);case 14:case"end":return e.stop()}}),e)}))),l.apply(this,arguments)}function p(e,t){return new Promise((function(n,r){var a=[],u=function(){n(a.length<2?a[0]:a)},s=function(e,t){Object(i["b"])(t,e)||r(t)},o=function(e,n,r){t.progress&&t.progress(e,n,r),console.log(e,t,"上传图片-kf"),a.push({url:"".concat(t.domain,"/").concat(e.objectKey),path:e.objectLocalPath})},l=e.type;console.log(JSON.stringify(e),"上传参数"),delete e.type,c["a"].getUploadPlugin(l).putObjects(e,{start:t.start,finish:u,progress:o,error:s})}))}},8955:function(e,t,n){"use strict";n("6d57"),n("e44b"),n("9a33"),n("5f54"),n("6a61");var r=n("2e91"),a=(n("f548"),n("6178")),i=n("fae6"),u="kf_image";function c(e){var t=i["a"].getKeysAndValues(e),n=t.fields,r=t.values;return a["a"].replace(u,{fields:n,values:r})}function s(e){var t=i["a"].getKeysAndValues(e),n=t.fields,r=t.values;return a["a"].insert(u,{fields:n,values:r})}function o(e){return a["a"].delete(u,{condition:e})}function l(e){return a["a"].select(u,{condition:e})}function p(e,t){var n=i["a"].getKeysAndValues(e),r=n.fields,c=n.values;return a["a"].update(u,{fields:r,values:c,condition:t})}var d={replaceImage:c,insertImage:s,removeImage:o,getImageList:l,updateImage:p,businessType:u},f=n("45bd"),b=n("582f"),h=n("4c60"),k=n("6554"),m=n("f893"),g=n("50f2"),_="off-line-check-task-api/download-data/images";function x(e){return d.replaceImage(e)}function v(e){return y.apply(this,arguments)}function y(){return y=Object(r["a"])(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=Object.assign({},t),""===i["a"].getValue(n,"id","")&&(n["id"]=Object(b["a"])()),e.next=4,d.insertImage(n);case 4:if(r=e.sent,!r){e.next=8;break}return e.next=8,h["a"].insertIncrement(n["id"],d.businessType);case 8:return e.abrupt("return",r);case 9:case"end":return e.stop()}}),e)}))),y.apply(this,arguments)}function w(e){var t={id:e};return d.removeImage(t)}function j(e,t){return d.updateImage(e,t)}function R(e,t){return j({local_path:e},{id:t})}function T(e){return d.getImageList(e)}function O(e){if(0===e.length)return[];var t='id in ("'+e.join('","')+'")';return T(t)}function B(){return I.apply(this,arguments)}function I(){return I=Object(r["a"])(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t='local_path = ""',e.next=3,T(t);case 3:return n=e.sent,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)}))),I.apply(this,arguments)}function V(e,t,n){return P.apply(this,arguments)}function P(){return P=Object(r["a"])(regeneratorRuntime.mark((function e(t,n,r){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:a=[{url:t,path:n}],window.MDownloader.downloadFile(a,{finish:function(){r()},error:function(e,t){console.log(t)}});case 2:case"end":return e.stop()}}),e)}))),P.apply(this,arguments)}function C(e){return D.apply(this,arguments)}function D(){return D=Object(r["a"])(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(""!==t){e.next=2;break}return e.abrupt("return",!1);case 2:return e.next=4,Object(k["a"])(t);case 4:if(n=e.sent,0!==n.length){e.next=7;break}return e.abrupt("return",!1);case 7:return r=Array.isArray(n)?n[0]:n,e.abrupt("return",i["a"].getValue(r,"url",""));case 9:case"end":return e.stop()}}),e)}))),D.apply(this,arguments)}function A(e){return S.apply(this,arguments)}function S(){return S=Object(r["a"])(regeneratorRuntime.mark((function e(t){var n,a,u,c,s,o,l,p,d,b;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(void 0!==t&&0!==t.length){e.next=2;break}return e.abrupt("return",!1);case 2:e.t0=regeneratorRuntime.keys(t);case 3:if((e.t1=e.t0()).done){e.next=39;break}if(n=e.t1.value,"increment"!==n){e.next=23;break}if(a=t[n],0!==a.length){e.next=9;break}return e.abrupt("continue",3);case 9:e.t2=regeneratorRuntime.keys(a);case 10:if((e.t3=e.t2()).done){e.next=21;break}if(u=e.t3.value,c=a[u],s=i["a"].getValue(c,"id",""),""!==s){e.next=16;break}return e.abrupt("continue",10);case 16:return o={id:s,business_type:i["a"].getValue(c,"business_type",""),business_id:i["a"].getValue(c,"business_id",""),original_image_url:i["a"].getValue(c,"original_image_url",""),preview_image_url:i["a"].getValue(c,"preview_image_url","")},e.next=19,x(o);case 19:e.next=10;break;case 21:e.next=37;break;case 23:if("delete"!==n){e.next=37;break}if(l=t[n],0!==l.length){e.next=27;break}return e.abrupt("continue",3);case 27:e.t4=regeneratorRuntime.keys(l);case 28:if((e.t5=e.t4()).done){e.next=37;break}if(p=e.t5.value,d=i["a"].getValue(l[p],"id",""),""!==d){e.next=33;break}return e.abrupt("continue",28);case 33:return e.next=35,w(d);case 35:e.next=28;break;case 37:e.next=3;break;case 39:return e.next=41,B();case 41:if(b=e.sent,0!==b.length){e.next=44;break}return e.abrupt("return",!0);case 44:b.map(function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t){var n,a,u,c,s,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=i["a"].getValue(t,"original_image_url",""),""!==n){e.next=3;break}return e.abrupt("return",!1);case 3:return a=n.split("/"),u=a[a.length-1],c=u.split("?"),s=c[0],o=Object(f["b"])(s),e.next=10,V(n,o,Object(r["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,R(o,t["id"]);case 2:case"end":return e.stop()}}),e)}))));case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 45:case"end":return e.stop()}}),e)}))),S.apply(this,arguments)}function N(e){return L.apply(this,arguments)}function L(){return L=Object(r["a"])(regeneratorRuntime.mark((function e(t){var n,r,a,u,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=i["a"].getValue(t,"original_image_url",""),r=i["a"].getValue(t,"preview_image_url",""),a=i["a"].getValue(t,"local_path",""),""!==a&&""===n&&""===r){e.next=5;break}return e.abrupt("return",t);case 5:return e.next=7,C(a);case 7:if(u=e.sent,u){e.next=10;break}return e.abrupt("return",t);case 10:return c={original_image_url:u,preview_image_url:u},e.next=13,j(c,{id:t["id"]});case 13:return t["original_image_url"]=u,t["preview_image_url"]=u,e.abrupt("return",t);case 16:case"end":return e.stop()}}),e)}))),L.apply(this,arguments)}function M(e){return F.apply(this,arguments)}function F(){return F=Object(r["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n={business_type:"问题图片",business_id:t},e.abrupt("return",T(n));case 2:case"end":return e.stop()}}),e)}))),F.apply(this,arguments)}function K(e){return U.apply(this,arguments)}function U(){return U=Object(r["a"])(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n={business_type:"问题图片",business_id:t},e.next=3,d.removeImage(n);case 3:return r=e.sent,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)}))),U.apply(this,arguments)}function W(e){return E.apply(this,arguments)}function E(){return E=Object(r["a"])(regeneratorRuntime.mark((function e(t){var n,r,a,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n={business_type:"问题图片",business_id:t},e.next=3,T(n,"");case 3:if(r=e.sent,0!==r.length){e.next=6;break}return e.abrupt("return",!0);case 6:a=0;case 7:if(!(a<r.length)){e.next=14;break}return i=r[a]["id"],e.next=11,h["a"].deleteIncrement(i,d.businessType);case 11:a++,e.next=7;break;case 14:return e.abrupt("return",!0);case 15:case"end":return e.stop()}}),e)}))),E.apply(this,arguments)}function z(){return $.apply(this,arguments)}function $(){return $=Object(r["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(m["a"])(d.businessType,g["a"].imageType,_,["id","business_type","business_id","original_image_url","preview_image_url"]);case 2:return e.next=4,B();case 4:if(t=e.sent,0!==t.length){e.next=7;break}return e.abrupt("return",!0);case 7:t.map(function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t){var n,a,u,c,s,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=i["a"].getValue(t,"original_image_url",""),""!==n){e.next=3;break}return e.abrupt("return",!1);case 3:return a=n.split("/"),u=a[a.length-1],c=u.split("?"),s=c[0],o=Object(f["b"])(s),e.next=10,V(n,o,Object(r["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,R(o,t["id"]);case 2:case"end":return e.stop()}}),e)}))));case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 8:case"end":return e.stop()}}),e)}))),$.apply(this,arguments)}t["a"]={operationImage:A,insertImage:v,getImageListByIds:O,saveImageToOss:N,getImageListByProblemId:M,deleteImagesWithCheckTaskProblemId:K,saveDeleteImageIdToIncrementWithProblemId:W,paginationSaveNewData:z}},"8c39":function(e,t,n){"use strict";n.d(t,"b",(function(){return T})),n.d(t,"d",(function(){return V})),n.d(t,"c",(function(){return C}));var r=n("28f8"),a=(n("5f54"),n("ec25"),n("6d57"),n("e44b"),n("06a2"),n("2aa3"),n("6a61"),n("2e91")),i=(n("f548"),n("6178")),u=n("fae6"),c="kf_check_task_batch_item";function s(e){var t=u["a"].getKeysAndValues(e),n=t.fields,r=t.values;return i["a"].replace(c,{fields:n,values:r})}function o(e){return i["a"].delete(c,{condition:{id:e}})}function l(e,t){return i["a"].select(c,{condition:e,suffix:t})}function p(e,t,n){return i["a"].select(c,{fields:e,condition:t,suffix:n})}var d={replaceTaskBatchItem:s,removeTaskBatchItem:o,selectTaskBatchItems:l,selectTaskBatchItemWithFields:p,businessType:c},f=n("47f1"),b=n("e4b6"),h=n("e49e"),k=n("f893"),m=n("50f2"),g="待检查",_="检查中",x="已完成",v="off-line-check-task-api/download-data/check-task-batch-item";function y(e){return d.replaceTaskBatchItem(e)}function w(e){return d.removeTaskBatchItem(e)}function j(e,t){return d.selectTaskBatchItems(e,t)}function R(e){if(0===e.length)return[];var t='id in ("'+e.join('","')+'")';return j(t,"")}function T(e){return O.apply(this,arguments)}function O(){return O=Object(a["a"])(regeneratorRuntime.mark((function e(t){var n,r,a,i,c,s,o,l,p,k,m,v,y,w,j,R,T,O,B,I,V,P,C,D,A,S,N,L,M,F,K,U,W,E,z,$,J,q,H,Y,G,Q,X=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=X.length>1&&void 0!==X[1]?X[1]:"check_item_order_code",r=X.length>2?X[2]:void 0,a=X.length>3?X[3]:void 0,i=X.length>4&&void 0!==X[4]?X[4]:1,c=X.length>5&&void 0!==X[5]?X[5]:10,s=X.length>6&&void 0!==X[6]?X[6]:"",o={total:0,items:[]},n||(n="check_item_order_code"),l="order by ".concat(n),p={check_task_batch_id:t},s&&(p.like={check_item_full_name:s}),e.next=13,d.selectTaskBatchItemWithFields(["id"],p,l);case 13:return k=e.sent,m=[],k.map((function(e){m.push(e["id"])})),v='check_task_batch_item_id in ("'+m.join('","')+'")',s&&(v+=' OR (item_detail_name LIKE "%'.concat(s,'%" AND check_task_batch_id = "').concat(t,'")')),y="order by item_detail_sort, id",e.next=21,b["b"].selectTaskBatchItemDetails(v,y,[],r,a);case 21:if(w=e.sent,0!==w.length){e.next=24;break}return e.abrupt("return",o);case 24:return j=[],R=new Set,w.map((function(e){R.add(e["check_task_batch_item_id"]),j.push([e["id"]])})),T=Array.from(R),o["total"]=T.length,O=f["a"].buildPageParameter(T.length,i,c),B='id in ("'+T.join('","')+'")',I="order by ".concat(n," limit ").concat(O.offset,", ").concat(O.limit),e.next=34,d.selectTaskBatchItems(B,I);case 34:return V=e.sent,P=[],V.map((function(e){P.push(e["id"])})),C='check_task_batch_item_id in ("'+P.join('","')+'") AND id in ("'+j.join('","')+'")',e.next=40,b["b"].selectTaskBatchItemDetails(C,y,[],r,a);case 40:return D=e.sent,A=[],D.map((function(e){A.push(e["id"])})),e.next=45,h["a"].mapProblemCountByCheckBatchItemIds(m);case 45:return S=e.sent,e.next=48,h["a"].mapProblemCountByCheckBatchItemDetailIds(A);case 48:for(N=e.sent,L={},M={},F=0;F<D.length;F++)K=D[F],U=K["check_task_batch_item_id"],L[U]=L[U]||[],M[U]=M[U]||{},M[U]["detailCount"]=(M[U]["detailCount"]||0)+1,L[U]=L[U]||[],K["problemCount"]=u["a"].getValue(N,K["id"],0),L[U].push(Object.assign({},K)),K["status"]===b["b"].statusWaitCheck?M[U]["waitCheckCount"]=(M[U]["waitCheckCount"]||0)+1:M[U]["checkedCount"]=(M[U]["checkedCount"]||0)+1;W=[],E=0;case 54:if(!(E<V.length)){e.next=75;break}if(z=V[E],z){e.next=58;break}return e.abrupt("continue",72);case 58:if($=M[z.id]||{},J=u["a"].getValue($,"checkedCount",0),q=u["a"].getValue($,"waitCheckCount",0),H=u["a"].getValue($,"detailCount",0),Y="",G=S[z.id]||0,Y=0===J?g:J>0&&J<H?_:x,Q=L[z.id]||[],0!==Q.length){e.next=68;break}return e.abrupt("continue",72);case 68:z.details=Q,z.status=Y,z.statistics={waitCheckCount:q,checkedCount:J,problemCount:G},W.push(z);case 72:E++,e.next=54;break;case 75:return o["items"]=W,console.log("resultItem",W),e.abrupt("return",o);case 78:case"end":return e.stop()}}),e)}))),O.apply(this,arguments)}function B(e){return I.apply(this,arguments)}function I(){return I=Object(a["a"])(regeneratorRuntime.mark((function e(t){var n,r,a,i,c,s,o,l,p;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(void 0!==t&&0!==t.length){e.next=2;break}return e.abrupt("return",!1);case 2:e.t0=regeneratorRuntime.keys(t);case 3:if((e.t1=e.t0()).done){e.next=39;break}if(n=e.t1.value,"increment"!==n){e.next=23;break}if(r=t[n],0!==r.length){e.next=9;break}return e.abrupt("continue",3);case 9:e.t2=regeneratorRuntime.keys(r);case 10:if((e.t3=e.t2()).done){e.next=21;break}if(a=e.t3.value,i=r[a],c=u["a"].getValue(i,"id",""),""!==c){e.next=16;break}return e.abrupt("continue",10);case 16:return s={id:c,check_task_batch_id:u["a"].getValue(i,"check_task_batch_id",""),check_item_order_code:u["a"].getValue(i,"check_item_order_code",""),check_item_name:u["a"].getValue(i,"check_item_name",""),check_item_full_name:u["a"].getValue(i,"check_item_full_name","")},e.next=19,y(s);case 19:e.next=10;break;case 21:e.next=37;break;case 23:if("delete"!==n){e.next=37;break}if(o=t[n],0!==o.length){e.next=27;break}return e.abrupt("continue",3);case 27:e.t4=regeneratorRuntime.keys(o);case 28:if((e.t5=e.t4()).done){e.next=37;break}if(l=e.t5.value,p=u["a"].getValue(o[l],"id",""),""!==p){e.next=33;break}return e.abrupt("continue",28);case 33:return e.next=35,w(p);case 35:e.next=28;break;case 37:e.next=3;break;case 39:case"end":return e.stop()}}),e)}))),I.apply(this,arguments)}function V(e){return P.apply(this,arguments)}function P(){return P=Object(a["a"])(regeneratorRuntime.mark((function e(t){var n,a,i,u,c,s,o,l,p;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a="全部",n={},Object(r["a"])(n,a,0),Object(r["a"])(n,g,0),Object(r["a"])(n,x,0),i=n,u="",t&&(u="check_task_batch_id = '".concat(t,"'")),e.next=6,d.selectTaskBatchItems(u);case 6:if(c=e.sent,0!==c.length){e.next=9;break}return e.abrupt("return",i);case 9:return s=[],c.map((function(e){s.push(e["id"])})),o='check_task_batch_item_id in ("'+s.join('","')+'")',l="order by item_detail_sort, id",e.next=15,b["b"].selectTaskBatchItemDetails(o,l,[]);case 15:if(p=e.sent,0!==p.length){e.next=18;break}return e.abrupt("return",i);case 18:return p.map((function(e){i[a]=parseInt(i[a])+1,e.status===g?i[g]=parseInt(i[g])+1:i[x]=parseInt(i[x])+1})),e.abrupt("return",i);case 20:case"end":return e.stop()}}),e)}))),P.apply(this,arguments)}function C(e){return D.apply(this,arguments)}function D(){return D=Object(a["a"])(regeneratorRuntime.mark((function e(t){var n,a,i,u,c,s,o,l,p,f,h,k,m,g;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a="全部",i="通过",u="不通过",c="不适用",n={},Object(r["a"])(n,a,0),Object(r["a"])(n,i,0),Object(r["a"])(n,u,0),Object(r["a"])(n,c,0),s=n,o="",t&&(o="check_task_batch_id = '".concat(t,"'")),e.next=6,d.selectTaskBatchItems(o);case 6:if(l=e.sent,0!==l.length){e.next=9;break}return e.abrupt("return",s);case 9:return p=[],l.map((function(e){p.push(e["id"])})),f='check_task_batch_item_id in ("'+p.join('","')+'")',h="order by item_detail_sort, id",e.next=15,b["b"].selectTaskBatchItemDetails(f,h,[]);case 15:if(k=e.sent,0!==k.length){e.next=18;break}return e.abrupt("return",s);case 18:for(g in k.map((function(e){e.status===b["b"].statusPassed?s[i]=parseInt(s[i])+1:e.status===b["b"].statusNotPassed?s[u]=parseInt(s[u])+1:e.status===b["b"].statusNotApplicable&&(s[c]=parseInt(s[c])+1)})),m=0,s)m+=parseInt(s[g]);return s[a]=m,e.abrupt("return",s);case 23:case"end":return e.stop()}}),e)}))),D.apply(this,arguments)}function A(){return S.apply(this,arguments)}function S(){return S=Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(k["a"])(d.businessType,m["a"].checkTaskBatchItemType,v,["id","check_task_batch_id","check_item_order_code","check_item_name","check_item_full_name"]);case 2:case"end":return e.stop()}}),e)}))),S.apply(this,arguments)}window.getTaskBatchItemListByTaskBatchId=T;t["a"]={operationTaskBatchItem:B,getTaskBatchItemListByTaskBatchId:T,getTaskBatchItemListByIds:R,listCheckResult:C,listCheckStatus:V,paginationSaveNewData:A}},"96ce":function(e,t,n){"use strict";n.d(t,"a",(function(){return B}));n("6d57"),n("e44b"),n("e10e"),n("6a61");var r=n("2e91"),a=n("a740"),i=(n("f548"),n("6178")),u=n("fae6"),c="t_user";function s(e){var t=u["a"].getKeysAndValues(e),n=t.fields,r=t.values;return i["a"].replace(c,{fields:n,values:r})}function o(e,t){var n=u["a"].getKeysAndValues(e),r=n.fields,a=n.values;return i["a"].update(c,{fields:r,values:a})}function l(e){return i["a"].delete(c,{condition:{id:e}})}var p={replaceUser:s,updateUser:o,removeUser:l};function d(e){return p.replaceUser(e)}function f(e){return p.removeUser(e)}function b(e){return h.apply(this,arguments)}function h(){return h=Object(r["a"])(regeneratorRuntime.mark((function e(t){var n,r,a,i,c,s,o,l,p;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(void 0!==t&&0!==t.length){e.next=2;break}return e.abrupt("return",!1);case 2:e.t0=regeneratorRuntime.keys(t);case 3:if((e.t1=e.t0()).done){e.next=39;break}if(n=e.t1.value,"increment"!==n){e.next=23;break}if(r=t[n],0!==r.length){e.next=9;break}return e.abrupt("continue",3);case 9:e.t2=regeneratorRuntime.keys(r);case 10:if((e.t3=e.t2()).done){e.next=21;break}if(a=e.t3.value,i=r[a],c=u["a"].getValue(i,"id",""),""!==c){e.next=16;break}return e.abrupt("continue",10);case 16:return s={id:c,name:u["a"].getValue(i,"name",""),mobile:u["a"].getValue(i,"mobile","")},e.next=19,d(s);case 19:e.next=10;break;case 21:e.next=37;break;case 23:if("delete"!==n){e.next=37;break}if(o=t[n],0!==o.length){e.next=27;break}return e.abrupt("continue",3);case 27:e.t4=regeneratorRuntime.keys(o);case 28:if((e.t5=e.t4()).done){e.next=37;break}if(l=e.t5.value,p=u["a"].getValue(o[l],"id",""),""!==p){e.next=33;break}return e.abrupt("continue",28);case 33:return e.next=35,f(p);case 35:e.next=28;break;case 37:e.next=3;break;case 39:case"end":return e.stop()}}),e)}))),h.apply(this,arguments)}var k={operationUser:b},m=n("ac97"),g=n("0e23"),_=n("f273"),x=n("334d"),v=n("9ec8"),y=n("aa99"),w=n("50f2"),j=n("1961"),R=n("9c54"),T=n("c662"),O=n("f893");function B(){return I.apply(this,arguments)}function I(){return I=Object(r["a"])(regeneratorRuntime.mark((function e(){var t,n,r,i,u=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=u.length>0&&void 0!==u[0]?u[0]:w["a"].basicType,e.next=3,w["a"].getTimeStampMap();case 3:return n=e.sent,r={user_id:Object(a["j"])("userId")},i=Object.keys(n),0!==i.length&&(r["timestamp"]=n[t],r["check_task_timestamp"]=n[w["a"].businessType]),console.log(t,r),e.abrupt("return",r);case 9:case"end":return e.stop()}}),e)}))),I.apply(this,arguments)}function V(){return P.apply(this,arguments)}function P(){return P=Object(r["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,B();case 2:return t=e.sent,e.abrupt("return",Object(j["a"])({url:"off-line-check-task-api/download-data/base-data",method:"get",data:t}));case 4:case"end":return e.stop()}}),e)}))),P.apply(this,arguments)}function C(){return D.apply(this,arguments)}function D(){return D=Object(r["a"])(regeneratorRuntime.mark((function e(){var t,n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,V();case 3:if(t=e.sent,console.log("data",t),0!==t.length){e.next=7;break}throw new Error("接口返回空数据");case 7:e.t0=regeneratorRuntime.keys(t);case 8:if((e.t1=e.t0()).done){e.next=40;break}n=e.t1.value,r=t[n],e.t2=n,e.next="t_building"===e.t2?14:"t_project"===e.t2?17:"t_room"===e.t2?20:"t_user"===e.t2?23:"t_parameter_value"===e.t2?26:"t_building_unit"===e.t2?29:"t_building_floor"===e.t2?32:"timestamp"===e.t2?35:38;break;case 14:return e.next=16,_["a"].operationBuilding(r);case 16:return e.abrupt("break",38);case 17:return e.next=19,m["a"].operationProject(r);case 19:return e.abrupt("break",38);case 20:return e.next=22,y["a"].operationRoom(r);case 22:return e.abrupt("break",38);case 23:return e.next=25,k.operationUser(r);case 25:return e.abrupt("break",38);case 26:return e.next=28,g["a"].operationParameter(r);case 28:return e.abrupt("break",38);case 29:return e.next=31,x["a"].operationBuildingUnit(r);case 31:return e.abrupt("break",38);case 32:return e.next=34,v["a"].operationBuildingFloor(r);case 34:return e.abrupt("break",38);case 35:return e.next=37,w["a"].replaceTimeStamp({type:w["a"].basicType,time_stamp:r});case 37:return e.abrupt("break",38);case 38:e.next=8;break;case 40:e.next=45;break;case 42:e.prev=42,e.t3=e["catch"](0),Object(R["b"])(e.t3);case 45:case"end":return e.stop()}}),e,null,[[0,42]])}))),D.apply(this,arguments)}function A(){return S.apply(this,arguments)}function S(){return S=Object(r["a"])(regeneratorRuntime.mark((function e(){var t,n,r,i,u,c,s,o,l;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=[w["a"].basicProjectType,w["a"].basicBuildingType,w["a"].basicBuildingUtilType,w["a"].basicBuildingFloorType,w["a"].basicRoomType,w["a"].basicType,w["a"].businessType],e.next=3,w["a"].getMapTimeStampWithType(t);case 3:n=e.sent,r={},i=0;case 6:if(!(i<n.length)){e.next=34;break}u=n[i],e.t0=u["type"],e.next=e.t0===w["a"].basicProjectType?11:e.t0===w["a"].basicBuildingType?13:e.t0===w["a"].basicBuildingUtilType?15:e.t0===w["a"].basicBuildingFloorType?17:e.t0===w["a"].basicRoomType?19:e.t0===w["a"].basicType?21:e.t0===w["a"].businessType?23:31;break;case 11:return r["project"]=u["time_stamp"],e.abrupt("break",31);case 13:return r["building"]=u["time_stamp"],e.abrupt("break",31);case 15:return r["building-unit"]=u["time_stamp"],e.abrupt("break",31);case 17:return r["building-floor"]=u["time_stamp"],e.abrupt("break",31);case 19:return r["room"]=u["time_stamp"],e.abrupt("break",31);case 21:return r["basic-data"]=u["time_stamp"],e.abrupt("break",31);case 23:if(c=u["time_stamp"],!c){e.next=29;break}return e.next=27,T["a"].getAllCount();case 27:s=e.sent,0===s&&(c="");case 29:return r["check-task-data"]=c,e.abrupt("break",31);case 31:i++,e.next=6;break;case 34:return o={user_id:Object(a["j"])("userId")||Object(a["j"])("user_id"),timeStampList:n.length?r:"",check_task_timestamp:r["check-task-data"]||""},e.next=37,Object(j["a"])({url:"off-line-check-task-api/download-data/is-data-change",method:"get",params:o});case 37:return l=e.sent,e.abrupt("return",l["is_change"]);case 39:case"end":return e.stop()}}),e)}))),S.apply(this,arguments)}function N(){return L.apply(this,arguments)}function L(){return L=Object(r["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(O["a"])("t_project",w["a"].basicProjectType,"off-line-check-task-api/download-data/project-data",["id","name","parent_id","corp_name","corp_id","is_end","order_sort"]);case 2:case"end":return e.stop()}}),e)}))),L.apply(this,arguments)}function M(){return F.apply(this,arguments)}function F(){return F=Object(r["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(O["a"])("t_building",w["a"].basicBuildingType,"off-line-check-task-api/download-data/building-data",["id","name","full_name","proj_id","is_end","order_sort","product_ids"]);case 2:case"end":return e.stop()}}),e)}))),F.apply(this,arguments)}function K(){return U.apply(this,arguments)}function U(){return U=Object(r["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(O["a"])("t_building_unit",w["a"].basicBuildingUtilType,"off-line-check-task-api/download-data/building-unit-data",["id","building_id","unit","full_name","sort","product_ids"]);case 2:case"end":return e.stop()}}),e)}))),U.apply(this,arguments)}function W(){return E.apply(this,arguments)}function E(){return E=Object(r["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(O["a"])("t_building_floor",w["a"].basicBuildingFloorType,"off-line-check-task-api/download-data/building-floor-data",["building_id","floor"]);case 2:case"end":return e.stop()}}),e)}))),E.apply(this,arguments)}function z(){return $.apply(this,arguments)}function $(){return $=Object(r["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(O["a"])("t_room",w["a"].basicRoomType,"off-line-check-task-api/download-data/room-data",["id","building_id","proj_id","unit","floor","room_no","name","sort","product_guid","product_name"]);case 2:case"end":return e.stop()}}),e)}))),$.apply(this,arguments)}t["b"]={getNewBasicData:C,saveProject:N,saveBuilding:M,saveBuildingUnit:K,saveBuildingFloor:W,saveRoom:z,checkAllDataHasChange:A}},"9ec8":function(e,t,n){"use strict";n("6d57"),n("e44b"),n("6a61");var r=n("2e91"),a=(n("f548"),n("6178")),i=n("fae6"),u="t_building_floor";function c(e){var t=i["a"].getKeysAndValues(e),n=t.fields,r=t.values;return a["a"].replace(u,{fields:n,values:r})}function s(e,t){var n=i["a"].getKeysAndValues(e),r=n.fields,c=n.values;return a["a"].update(u,{fields:r,values:c,condition:t})}function o(e){return a["a"].select(u,{condition:e})}function l(e,t){return a["a"].delete(u,{condition:{building_id:e,floor:t}})}var p={replaceBuildingFloor:c,updateBuildingFloor:s,removeBuildingFloor:l,getBuildingFloorList:o};function d(e){return p.replaceBuildingFloor(e)}function f(e,t){return p.removeBuildingFloor(e,t)}function b(e){return p.getBuildingFloorList(e)}function h(e){var t={building_id:e};return b(t)}function k(e){return m.apply(this,arguments)}function m(){return m=Object(r["a"])(regeneratorRuntime.mark((function e(t){var n,r,a,u,c,s,o,l,p,b,h;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(void 0!==t&&0!==t.length){e.next=2;break}return e.abrupt("return",!1);case 2:e.t0=regeneratorRuntime.keys(t);case 3:if((e.t1=e.t0()).done){e.next=41;break}if(n=e.t1.value,"increment"!==n){e.next=24;break}if(r=t[n],0!==r.length){e.next=9;break}return e.abrupt("continue",3);case 9:e.t2=regeneratorRuntime.keys(r);case 10:if((e.t3=e.t2()).done){e.next=22;break}if(a=e.t3.value,u=r[a],c=i["a"].getValue(u,"building_id",""),s=i["a"].getValue(u,"floor",""),""!==c&&""!==s){e.next=17;break}return e.abrupt("continue",10);case 17:return o={building_id:c,floor:s},e.next=20,d(o);case 20:e.next=10;break;case 22:e.next=39;break;case 24:if("delete"!==n){e.next=39;break}if(l=t[n],0!==l.length){e.next=28;break}return e.abrupt("continue",3);case 28:e.t4=regeneratorRuntime.keys(l);case 29:if((e.t5=e.t4()).done){e.next=39;break}if(p=e.t5.value,b=i["a"].getValue(l[p],"building_id",""),h=i["a"].getValue(l[p],"floor",""),""!==b&&""!==h){e.next=35;break}return e.abrupt("continue",29);case 35:return e.next=37,f(b,h);case 37:e.next=29;break;case 39:e.next=3;break;case 41:case"end":return e.stop()}}),e)}))),m.apply(this,arguments)}t["a"]={operationBuildingFloor:k,getBuildingFloorListByBuilding:h}},a977:function(e,t,n){"use strict";n("6d57"),n("e44b"),n("6a61");var r=n("2e91"),a=(n("f548"),n("6178")),i=n("fae6"),u="kf_check_node";function c(e){var t=i["a"].getKeysAndValues(e),n=t.fields,r=t.values;return a["a"].replace(u,{fields:n,values:r})}function s(e){return a["a"].selectCount(u,{condition:e})}function o(e,t){return a["a"].select(u,{condition:e,suffix:t})}var l={replaceCheckNode:c,countCheckNode:s,listCheckNode:o,businessType:u},p=n("f893"),d=n("50f2"),f="off-line-check-task-api/download-data/check-node";function b(e){return l.replaceCheckNode(e)}function h(e){return l.countCheckNode(e)}function k(e,t){return l.listCheckNode(e,t)}function m(e){return g.apply(this,arguments)}function g(){return g=Object(r["a"])(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n={id:t},e.next=3,k(n);case 3:if(r=e.sent,0!==r.length){e.next=6;break}return e.abrupt("return",[]);case 6:return e.abrupt("return",r[0]);case 7:case"end":return e.stop()}}),e)}))),g.apply(this,arguments)}function _(e){return x.apply(this,arguments)}function x(){return x=Object(r["a"])(regeneratorRuntime.mark((function e(t){var n,r,a,u,c,s,o,l,p;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(void 0!==t&&0!==t.length){e.next=2;break}return e.abrupt("return",!1);case 2:e.t0=regeneratorRuntime.keys(t);case 3:if((e.t1=e.t0()).done){e.next=37;break}if(n=e.t1.value,"increment"!==n){e.next=21;break}if(r=t[n],0!==r.length){e.next=9;break}return e.abrupt("continue",3);case 9:e.t2=regeneratorRuntime.keys(r);case 10:if((e.t3=e.t2()).done){e.next=19;break}return a=e.t3.value,u=r[a],c=i["a"].getValue(u,"id",""),s={id:c,name:i["a"].getValue(u,"name",""),sort:i["a"].getValue(u,"sort",""),no_pass_rule:i["a"].getValue(u,"no_pass_rule",""),scoring_rule:i["a"].getValue(u,"scoring_rule",""),is_batch:i["a"].getValue(u,"is_batch","")},e.next=17,b(s);case 17:e.next=10;break;case 19:e.next=35;break;case 21:if("delete"!==n){e.next=35;break}if(o=t[n],0!==o.length){e.next=25;break}return e.abrupt("continue",3);case 25:e.t4=regeneratorRuntime.keys(o);case 26:if((e.t5=e.t4()).done){e.next=35;break}if(l=e.t5.value,p=i["a"].getValue(o[l],"id",""),""!==p){e.next=31;break}return e.abrupt("continue",26);case 31:return e.next=33,b(p);case 33:e.next=26;break;case 35:e.next=3;break;case 37:case"end":return e.stop()}}),e)}))),x.apply(this,arguments)}function v(){return y.apply(this,arguments)}function y(){return y=Object(r["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(p["a"])(l.businessType,d["a"].checkNodeType,f,["id","name","sort","no_pass_rule","scoring_rule","is_batch"]);case 2:case"end":return e.stop()}}),e)}))),y.apply(this,arguments)}window.paginationSaveNode=v;t["a"]={replaceCheckNode:b,countCheckNode:h,listCheckNode:k,getCheckNodeInfoById:m,operationCheckNode:_,paginationSaveNewData:v}},a997:function(e,t,n){"use strict";n.d(t,"c",(function(){return P})),n.d(t,"g",(function(){return D})),n.d(t,"f",(function(){return S})),n.d(t,"e",(function(){return W})),n.d(t,"d",(function(){return J})),n.d(t,"b",(function(){return G}));n("cc57"),n("ec25"),n("06a2"),n("2aa3"),n("6d57"),n("e44b"),n("f548");var r=n("28f8"),a=(n("6a61"),n("2e91")),i=n("6178"),u=n("fae6"),c="kf_check_task_batch";function s(e){var t=u["a"].getKeysAndValues(e),n=t.fields,r=t.values;return i["a"].replace(c,{fields:n,values:r})}function o(e,t){var n=u["a"].getKeysAndValues(e),r=n.fields,a=n.values;return i["a"].update(c,{fields:r,values:a,condition:t})}function l(e){return i["a"].delete(c,{condition:{id:e}})}function p(e){var t="id in ("+e.join(",")+")";return i["a"].select(c,{condition:t})}function d(e){return i["a"].selectCount(c,{condition:e})}function f(e,t){return i["a"].select(c,{condition:e,suffix:t})}function b(e,t,n){var r="limit ".concat(t,",").concat(n);return i["a"].select(c,{condition:e,suffix:r})}var h={replaceTaskBatch:s,updateTaskBatch:o,removeTaskBatch:l,findTaskBatchByIds:p,count:d,getTaskBatchPages:b,getTaskBatchList:f,businessType:c},k=n("e4b6"),m=n("ac97"),g=n("a977"),_=n("47f1"),x=n("f809"),v=n("f893"),y=n("50f2"),w="待检查",j="检查中",R="已检查",T="off-line-check-task-api/download-data/check-task-batch";function O(e){return h.replaceTaskBatch(e)}function B(e){return h.removeTaskBatch(e)}function I(e){return h.count(e)}function V(e,t){return h.getTaskBatchList(e,t)}function P(e){return C.apply(this,arguments)}function C(){return C=Object(a["a"])(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n="limit 1",e.next=3,V(t,n);case 3:if(r=e.sent,0!==r.length){e.next=6;break}return e.abrupt("return",[]);case 6:return e.abrupt("return",r[0]);case 7:case"end":return e.stop()}}),e)}))),C.apply(this,arguments)}function D(e,t,n,r,a){return A.apply(this,arguments)}function A(){return A=Object(a["a"])(regeneratorRuntime.mark((function e(t,n,r,a,i){var u,c,s,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(console.log("pageCheckNode",n),a=a||1,i=i||10,u="",t&&(u="proj_id = '".concat(t,"'")),n&&(u=""===u?"check_node_id = '".concat(n,"'"):u+" and check_node_id = '".concat(n,"'")),!r){e.next=25;break}c=[],e.t0=r,e.next=e.t0===w?11:e.t0===j?15:e.t0===R?19:23;break;case 11:return e.next=13,k["b"].listWaitCheckTaskBatchIdsByDetailPerson();case 13:return c=e.sent,e.abrupt("break",23);case 15:return e.next=17,k["b"].listCheckingTaskBatchIdsByDetailPerson();case 17:return c=e.sent,e.abrupt("break",23);case 19:return e.next=21,k["b"].listCheckedTaskBatchIdsByDetailPerson();case 21:return c=e.sent,e.abrupt("break",23);case 23:s='id in ("'+c.join('","')+'")',u=""===u?s:u+" and "+s;case 25:return""===u&&(u="1 = 1"),e.next=28,L(u,a,i);case 28:return o=e.sent,e.abrupt("return",o);case 30:case"end":return e.stop()}}),e)}))),A.apply(this,arguments)}function S(e,t){return N.apply(this,arguments)}function N(){return N=Object(a["a"])(regeneratorRuntime.mark((function e(t,n){var a,i,u,c,s,o,l;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:console.log("statusCheckNodeId",n),i=[w,j,R],a={},Object(r["a"])(a,w,0),Object(r["a"])(a,j,0),Object(r["a"])(a,R,0),u=a,c=0;case 4:if(!(c<i.length)){e.next=32;break}s=[],e.t0=i[c],e.next=e.t0===w?9:e.t0===j?13:e.t0===R?17:21;break;case 9:return e.next=11,k["b"].listWaitCheckTaskBatchIdsByDetailPerson();case 11:return s=e.sent,e.abrupt("break",21);case 13:return e.next=15,k["b"].listCheckingTaskBatchIdsByDetailPerson();case 15:return s=e.sent,e.abrupt("break",21);case 17:return e.next=19,k["b"].listCheckedTaskBatchIdsByDetailPerson();case 19:return s=e.sent,e.abrupt("break",21);case 21:return o="",t&&(o="proj_id = '".concat(t,"'")),n&&(o=""===o?"check_node_id = '".concat(n,"'"):o+" and check_node_id = '".concat(n,"'")),l='id in ("'+s.join('","')+'")',o=""===o?l:o+" and "+l,e.next=28,I(o);case 28:u[i[c]]=e.sent;case 29:c++,e.next=4;break;case 32:return e.abrupt("return",u);case 33:case"end":return e.stop()}}),e)}))),N.apply(this,arguments)}function L(e){return M.apply(this,arguments)}function M(){return M=Object(a["a"])(regeneratorRuntime.mark((function e(t){var n,r,a,i,u,c,s,o=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=o.length>1&&void 0!==o[1]?o[1]:1,r=o.length>2&&void 0!==o[2]?o[2]:10,a={total:0,items:[]},t){e.next=5;break}return e.abrupt("return",a);case 5:return e.next=7,I(t);case 7:if(a["total"]=e.sent,0!==a["total"]){e.next=10;break}return e.abrupt("return",a);case 10:return i=_["a"].buildPageParameter(a["total"],n,r),u=i.offset,c=i.limit,e.next=13,h.getTaskBatchPages(t,u,c);case 13:return s=e.sent,s.map((function(e){e["is_task_overtime"]=0;var t=Object(x["a"])(new Date(e["end_time"].replace(/-/g,"/")),"yyyy-MM-dd");if(e["complete_time"]){var n=Object(x["a"])(new Date(e["complete_time"].replace(/-/g,"/")),"yyyy-MM-dd");t<n&&(e["is_task_overtime"]=1)}else{var r=Object(x["a"])(new Date,"yyyy-MM-dd");t<r&&(e["is_task_overtime"]=1)}})),a["items"]=s,e.abrupt("return",a);case 17:case"end":return e.stop()}}),e)}))),M.apply(this,arguments)}function F(e){return K.apply(this,arguments)}function K(){return K=Object(a["a"])(regeneratorRuntime.mark((function e(t){var n,r,a,i,c,s,o,l,p;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(void 0!==t&&0!==t.length){e.next=2;break}return e.abrupt("return",!1);case 2:e.t0=regeneratorRuntime.keys(t);case 3:if((e.t1=e.t0()).done){e.next=39;break}if(n=e.t1.value,"increment"!==n){e.next=23;break}if(r=t[n],0!==r.length){e.next=9;break}return e.abrupt("continue",3);case 9:e.t2=regeneratorRuntime.keys(r);case 10:if((e.t3=e.t2()).done){e.next=21;break}if(a=e.t3.value,i=r[a],c=u["a"].getValue(i,"id",""),""!==c){e.next=16;break}return e.abrupt("continue",10);case 16:return s={id:c,corp_id:u["a"].getValue(i,"corp_id",""),proj_id:u["a"].getValue(i,"proj_id",""),check_node_id:u["a"].getValue(i,"check_node_id",""),name:u["a"].getValue(i,"name",""),full_name:u["a"].getValue(i,"full_name",""),users_name:u["a"].getValue(i,"users_name",""),begin_time:u["a"].getValue(i,"begin_time",""),end_time:u["a"].getValue(i,"end_time",""),status:u["a"].getValue(i,"status",""),complete_time:u["a"].getValue(i,"complete_time",""),begin_check_time:u["a"].getValue(i,"begin_check_time","")},e.next=19,O(s);case 19:e.next=10;break;case 21:e.next=37;break;case 23:if("delete"!==n){e.next=37;break}if(o=t[n],0!==o.length){e.next=27;break}return e.abrupt("continue",3);case 27:e.t4=regeneratorRuntime.keys(o);case 28:if((e.t5=e.t4()).done){e.next=37;break}if(l=e.t5.value,p=u["a"].getValue(o[l],"id",""),""!==p){e.next=33;break}return e.abrupt("continue",28);case 33:return e.next=35,B(p);case 35:e.next=28;break;case 37:e.next=3;break;case 39:case"end":return e.stop()}}),e)}))),K.apply(this,arguments)}function U(e){if(0===e.length)return[];var t='id in ("'+e.join('","')+'")';return V(t,"")}function W(e,t){return E.apply(this,arguments)}function E(){return E=Object(a["a"])(regeneratorRuntime.mark((function e(t,n){var r,a,i,u,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r="",t&&(r="check_node_id = '".concat(t,"'")),!n){e.next=21;break}a=[],e.t0=n,e.next=e.t0===w?7:e.t0===j?11:e.t0===R?15:19;break;case 7:return e.next=9,k["b"].listWaitCheckTaskBatchIdsByDetailPerson();case 9:return a=e.sent,e.abrupt("break",19);case 11:return e.next=13,k["b"].listCheckingTaskBatchIdsByDetailPerson();case 13:return a=e.sent,e.abrupt("break",19);case 15:return e.next=17,k["b"].listCheckedTaskBatchIdsByDetailPerson();case 17:return a=e.sent,e.abrupt("break",19);case 19:i='id in ("'+a.join('","')+'")',r=""===r?i:r+" and "+i;case 21:return""===r&&(r="1 = 1"),e.next=24,V(r);case 24:return u=e.sent,e.next=27,z(u);case 27:return c=e.sent,e.abrupt("return",c);case 29:case"end":return e.stop()}}),e)}))),E.apply(this,arguments)}function z(e){return $.apply(this,arguments)}function $(){return $=Object(a["a"])(regeneratorRuntime.mark((function e(t){var n,r,a,i,u;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(void 0!==t&&0!==t.length){e.next=2;break}return e.abrupt("return",[]);case 2:if(n=new Set,t.map((function(e){n.add(e.proj_id)})),0!==n.size){e.next=6;break}return e.abrupt("return",[]);case 6:return r=Array.from(n),a='id in ("'+r.join('","')+'")',e.next=10,m["a"].listProject(a);case 10:return i=e.sent,i.length>0&&(u={},t.map((function(e){u.hasOwnProperty(e.proj_id)?u[e.proj_id].push(e):u[e.proj_id]=[e]})),i.map((function(e){u.hasOwnProperty(e.id)?e.count=u[e.id].length:e.count=0,""!=e.corp_name&&(e.name="".concat(e.name,"(").concat(e.corp_name,")"))}))),e.abrupt("return",i);case 13:case"end":return e.stop()}}),e)}))),$.apply(this,arguments)}function J(e,t){return q.apply(this,arguments)}function q(){return q=Object(a["a"])(regeneratorRuntime.mark((function e(t,n){var r,a,i,u,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r="",t&&(r="proj_id = '".concat(t,"'")),!n){e.next=21;break}a=[],e.t0=n,e.next=e.t0===w?7:e.t0===j?11:e.t0===R?15:19;break;case 7:return e.next=9,k["b"].listWaitCheckTaskBatchIdsByDetailPerson();case 9:return a=e.sent,e.abrupt("break",19);case 11:return e.next=13,k["b"].listCheckingTaskBatchIdsByDetailPerson();case 13:return a=e.sent,e.abrupt("break",19);case 15:return e.next=17,k["b"].listCheckedTaskBatchIdsByDetailPerson();case 17:return a=e.sent,e.abrupt("break",19);case 19:i='id in ("'+a.join('","')+'")',r=""===r?i:r+" and "+i;case 21:return e.next=23,V(r);case 23:return u=e.sent,e.next=26,H(u);case 26:return c=e.sent,e.abrupt("return",c);case 28:case"end":return e.stop()}}),e)}))),q.apply(this,arguments)}function H(e){return Y.apply(this,arguments)}function Y(){return Y=Object(a["a"])(regeneratorRuntime.mark((function e(t){var n,r,a,i,u;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(void 0!==t&&0!==t.length){e.next=2;break}return e.abrupt("return",[]);case 2:if(n=new Set,t.map((function(e){n.add(e.check_node_id)})),0!==n.size){e.next=6;break}return e.abrupt("return",[]);case 6:return r=Array.from(n),a='id in ("'+r.join('","')+'")',e.next=10,g["a"].listCheckNode(a);case 10:return i=e.sent,i.length>0&&(u={},t.map((function(e){u.hasOwnProperty(e.check_node_id)?u[e.check_node_id].push(e):u[e.check_node_id]=[e]})),i.map((function(e){u.hasOwnProperty(e.id)?e.count=u[e.id].length:e.count=0}))),e.abrupt("return",i);case 13:case"end":return e.stop()}}),e)}))),Y.apply(this,arguments)}function G(e){return Q.apply(this,arguments)}function Q(){return Q=Object(a["a"])(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,P({id:t});case 2:if(n=e.sent,n&&0!==n.length){e.next=5;break}return e.abrupt("return",[]);case 5:return r=n["check_node_id"],e.abrupt("return",g["a"].getCheckNodeInfoById(r));case 7:case"end":return e.stop()}}),e)}))),Q.apply(this,arguments)}function X(){return Z.apply(this,arguments)}function Z(){return Z=Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(v["a"])(h.businessType,y["a"].checkTaskBatchType,T,["id","corp_id","proj_id","check_node_id","name","full_name","users_name","begin_time","end_time","status","complete_time","begin_check_time"]);case 2:case"end":return e.stop()}}),e)}))),Z.apply(this,arguments)}window.listCheckNodeByCondition=J;t["a"]={pageCheckBatchByCondition:D,statusWaitCheck:w,statusChecking:j,statusCompleted:R,operationTaskBatch:F,getOneTaskBatch:P,getTaskBatchListByIds:U,listCheckNodeByCondition:J,listStatus:S,listProjectByCondition:W,getCheckNodeInfoByCheckBatchId:G,paginationSaveNewData:X}},aa99:function(e,t,n){"use strict";n("6d57"),n("e44b"),n("6a61");var r=n("2e91"),a=(n("f548"),n("6178")),i=n("fae6"),u="t_room";function c(e){var t=i["a"].getKeysAndValues(e),n=t.fields,r=t.values;return a["a"].replace(u,{fields:n,values:r})}function s(e,t){var n=i["a"].getKeysAndValues(e),r=n.fields,c=n.values;return a["a"].update(u,{fields:r,values:c,condition:t})}function o(e){return a["a"].select(u,{condition:e})}function l(e){return a["a"].delete(u,{condition:{id:e}})}var p={replaceRoom:c,updateRoom:s,removeRoom:l,getRoomList:o};function d(e){return p.replaceRoom(e)}function f(e){return p.getRoomList(e)}function b(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n={building_id:e};return t.length&&(n.in={product_guid:t}),f(n)}function h(e){return p.removeRoom(e)}function k(e){return m.apply(this,arguments)}function m(){return m=Object(r["a"])(regeneratorRuntime.mark((function e(t){var n,r,a,u,c,s,o,l,p;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(void 0!==t&&0!==t.length){e.next=2;break}return e.abrupt("return",!1);case 2:e.t0=regeneratorRuntime.keys(t);case 3:if((e.t1=e.t0()).done){e.next=39;break}if(n=e.t1.value,"increment"!==n){e.next=23;break}if(r=t[n],0!==r.length){e.next=9;break}return e.abrupt("continue",3);case 9:e.t2=regeneratorRuntime.keys(r);case 10:if((e.t3=e.t2()).done){e.next=21;break}if(a=e.t3.value,u=r[a],c=i["a"].getValue(u,"id",""),""!==c){e.next=16;break}return e.abrupt("continue",10);case 16:return s={id:c,building_id:i["a"].getValue(u,"building_id",""),proj_id:i["a"].getValue(u,"proj_id",""),unit:i["a"].getValue(u,"unit",""),floor:i["a"].getValue(u,"floor",""),room_no:i["a"].getValue(u,"room_no",""),name:i["a"].getValue(u,"name",""),sort:i["a"].getValue(u,"sort","")},e.next=19,d(s);case 19:e.next=10;break;case 21:e.next=37;break;case 23:if("delete"!==n){e.next=37;break}if(o=t[n],0!==o.length){e.next=27;break}return e.abrupt("continue",3);case 27:e.t4=regeneratorRuntime.keys(o);case 28:if((e.t5=e.t4()).done){e.next=37;break}if(l=e.t5.value,p=i["a"].getValue(o[l],"id",""),""!==p){e.next=33;break}return e.abrupt("continue",28);case 33:return e.next=35,h(p);case 35:e.next=28;break;case 37:e.next=3;break;case 39:case"end":return e.stop()}}),e)}))),m.apply(this,arguments)}t["a"]={operationRoom:k,getRoomListByBuilding:b}},ac97:function(e,t,n){"use strict";n("6d57"),n("e44b"),n("6a61");var r=n("2e91"),a=(n("f548"),n("6178")),i=n("fae6"),u="t_project";function c(e){var t=i["a"].getKeysAndValues(e),n=t.fields,r=t.values;return a["a"].replace(u,{fields:n,values:r})}function s(e,t){var n=i["a"].getKeysAndValues(e),r=n.fields,c=n.values;return a["a"].update(u,{fields:r,values:c,condition:t})}function o(e){return a["a"].delete(u,{condition:{id:e}})}function l(e,t){return a["a"].select(u,{condition:e,suffix:t})}var p={replaceProject:c,updateProject:s,removeProject:o,listProject:l};function d(e){return p.replaceProject(e)}function f(e){return p.removeProject(e)}function b(e){return h.apply(this,arguments)}function h(){return h=Object(r["a"])(regeneratorRuntime.mark((function e(t){var n,r,a,u,c,s,o,l,p;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(void 0!==t&&0!==t.length){e.next=2;break}return e.abrupt("return",!1);case 2:e.t0=regeneratorRuntime.keys(t);case 3:if((e.t1=e.t0()).done){e.next=39;break}if(n=e.t1.value,"increment"!==n){e.next=23;break}if(r=t[n],0!==r.length){e.next=9;break}return e.abrupt("continue",3);case 9:e.t2=regeneratorRuntime.keys(r);case 10:if((e.t3=e.t2()).done){e.next=21;break}if(a=e.t3.value,u=r[a],c=i["a"].getValue(u,"id",""),""!==c){e.next=16;break}return e.abrupt("continue",10);case 16:return s={id:c,name:i["a"].getValue(u,"name",""),parent_id:i["a"].getValue(u,"parent_id",""),corp_id:i["a"].getValue(u,"corp_id",""),is_end:i["a"].getValue(u,"is_end",""),order_sort:i["a"].getValue(u,"order_sort","")},e.next=19,d(s);case 19:e.next=10;break;case 21:e.next=37;break;case 23:if("delete"!==n){e.next=37;break}if(o=t[n],0!==o.length){e.next=27;break}return e.abrupt("continue",3);case 27:e.t4=regeneratorRuntime.keys(o);case 28:if((e.t5=e.t4()).done){e.next=37;break}if(l=e.t5.value,p=i["a"].getValue(o[l],"id",""),""!==p){e.next=33;break}return e.abrupt("continue",28);case 33:return e.next=35,f(p);case 35:e.next=28;break;case 37:e.next=3;break;case 39:case"end":return e.stop()}}),e)}))),h.apply(this,arguments)}function k(e,t){return p.listProject(e,t)}t["a"]={operationProject:b,listProject:k}},c662:function(e,t,n){"use strict";n("5f54"),n("6d57"),n("e44b"),n("6a61");var r=n("2e91"),a=(n("f548"),n("6178")),i=n("fae6"),u="kf_check_task_batch_item_detail_person";function c(e){var t=i["a"].getKeysAndValues(e),n=t.fields,r=t.values;return a["a"].replace(u,{fields:n,values:r})}function s(e){return a["a"].delete(u,{condition:{id:e}})}function o(e,t){var n=i["a"].getKeysAndValues(e),r=n.fields,c=n.values;return a["a"].update(u,{fields:r,values:c,condition:t})}function l(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return a["a"].select(u,{condition:e,suffix:t,fields:n})}function p(){return a["a"].selectCount(u,{})}var d={replaceTaskBatchItemDetailPerson:c,removeTaskBatchItemDetailPerson:s,selectTaskBatchItemDetailPersons:l,updateTaskBatchItemDetailPerson:o,businessType:u,getAllCount:p},f=n("4c60"),b=n("a740"),h=n("f893"),k=n("50f2"),m="待检查",g="已通过",_="未通过",x="不适用",v="off-line-check-task-api/download-data/check-task-batch-item-detail-person";function y(e){return d.replaceTaskBatchItemDetailPerson(e)}function w(e){return d.removeTaskBatchItemDetailPerson(e)}function j(e,t){return d.updateTaskBatchItemDetailPerson(e,t)}function R(e){return T.apply(this,arguments)}function T(){return T=Object(r["a"])(regeneratorRuntime.mark((function e(t){var n,r,a,u,c,s,o,l,p;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(void 0!==t&&0!==t.length){e.next=2;break}return e.abrupt("return",!1);case 2:e.t0=regeneratorRuntime.keys(t);case 3:if((e.t1=e.t0()).done){e.next=52;break}if(n=e.t1.value,"increment"!==n){e.next=36;break}if(r=t[n],0!==r.length){e.next=9;break}return e.abrupt("continue",3);case 9:e.t2=regeneratorRuntime.keys(r);case 10:if((e.t3=e.t2()).done){e.next=34;break}if(a=e.t3.value,u=r[a],c=i["a"].getValue(u,"id",""),""!==c){e.next=16;break}return e.abrupt("continue",10);case 16:return e.t4=c,e.t5=i["a"].getValue(u,"check_task_batch_item_detail_id",""),e.t6=i["a"].getValue(u,"check_task_batch_id",""),e.t7=i["a"].getValue(u,"check_task_batch_item_id",""),e.t8=i["a"].getValue(u,"department_id",""),e.t9=i["a"].getValue(u,"user_id",""),e.t10=i["a"].getValue(u,"user_name",""),e.next=25,i["a"].getValue(u,"status","");case 25:return e.t11=e.sent,e.next=28,i["a"].getValue(u,"item_detail_score",0);case 28:return e.t12=e.sent,s={id:e.t4,check_task_batch_item_detail_id:e.t5,check_task_batch_id:e.t6,check_task_batch_item_id:e.t7,department_id:e.t8,user_id:e.t9,user_name:e.t10,status:e.t11,item_detail_score:e.t12},e.next=32,y(s);case 32:e.next=10;break;case 34:e.next=50;break;case 36:if("delete"!==n){e.next=50;break}if(o=t[n],0!==o.length){e.next=40;break}return e.abrupt("continue",3);case 40:e.t13=regeneratorRuntime.keys(o);case 41:if((e.t14=e.t13()).done){e.next=50;break}if(l=e.t14.value,p=i["a"].getValue(o[l],"id",""),""!==p){e.next=46;break}return e.abrupt("continue",41);case 46:return e.next=48,w(p);case 48:e.next=41;break;case 50:e.next=3;break;case 52:case"end":return e.stop()}}),e)}))),T.apply(this,arguments)}function O(e,t){return B.apply(this,arguments)}function B(){return B=Object(r["a"])(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",I(t,x,0,n));case 1:case"end":return e.stop()}}),e)}))),B.apply(this,arguments)}function I(e,t,n,r){return V.apply(this,arguments)}function V(){return V=Object(r["a"])(regeneratorRuntime.mark((function e(t,n,r,a){var i,u,c,s,o,l;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i=Object(b["j"])("userId"),e.next=3,S(t,i);case 3:if(!e.sent){e.next=25;break}return u={status:n},void 0!==r&&(u["item_detail_score"]=r),a&&(u["result_change_times"]=1),e.next=9,j(u,{check_task_batch_item_detail_id:t,user_id:i});case 9:if(c=e.sent,!1!==c){e.next=12;break}return e.abrupt("return",!1);case 12:return e.next=14,L({check_task_batch_item_detail_id:t,user_id:i});case 14:s=e.sent,console.log(s),o=0;case 17:if(!(o<s.length)){e.next=24;break}return l=s[o],e.next=21,f["a"].insertIncrement(l.id,d.businessType);case 21:o++,e.next=17;break;case 24:return e.abrupt("return",!0);case 25:return e.abrupt("return",!1);case 26:case"end":return e.stop()}}),e)}))),V.apply(this,arguments)}function P(e,t,n){return C.apply(this,arguments)}function C(){return C=Object(r["a"])(regeneratorRuntime.mark((function e(t,n,r){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",I(t,g,n,r));case 1:case"end":return e.stop()}}),e)}))),C.apply(this,arguments)}function D(e,t,n){return A.apply(this,arguments)}function A(){return A=Object(r["a"])(regeneratorRuntime.mark((function e(t,n,r){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",I(t,_,n,r));case 1:case"end":return e.stop()}}),e)}))),A.apply(this,arguments)}function S(e,t){return N.apply(this,arguments)}function N(){return N=Object(r["a"])(regeneratorRuntime.mark((function e(t,n){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(""!==t&&void 0!==t){e.next=2;break}return e.abrupt("return",!1);case 2:return console.log("detailId",t),e.next=5,L({check_task_batch_item_detail_id:t,user_id:n});case 5:if(r=e.sent,0!==r.length){e.next=8;break}return e.abrupt("return",!1);case 8:if(1!==r.result_change_times){e.next=10;break}return e.abrupt("return",!1);case 10:return e.abrupt("return",!0);case 11:case"end":return e.stop()}}),e)}))),N.apply(this,arguments)}function L(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return d.selectTaskBatchItemDetailPersons(e,t,n)}function M(e){if(0===e.length)return[];var t='id in ("'+e.join('","')+'")';return L(t,"")}function F(e,t,n,r){return K.apply(this,arguments)}function K(){return K=Object(r["a"])(regeneratorRuntime.mark((function e(t,n,r,a){var i,u,c,s,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t&&t.length){e.next=2;break}return e.abrupt("return",!1);case 2:return e.next=4,U(t,n,r,a);case 4:for(i=e.sent,u={},c=0;c<i.length;c++)s=i[c],o=s["check_task_batch_item_detail_id"],u[o]=Object.assign({},s);return e.abrupt("return",u);case 8:case"end":return e.stop()}}),e)}))),K.apply(this,arguments)}function U(e,t,n,r){return W.apply(this,arguments)}function W(){return W=Object(r["a"])(regeneratorRuntime.mark((function e(t,n,r,a){var i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i=" check_task_batch_item_detail_id in ('"+t.join("','")+"') AND user_id = "+"'".concat(n,"'"),r&&(i+=r===m?" AND status = '".concat(r,"'"):" AND status <> '".concat(m,"'")),a&&("通过"===a&&(a=g),"不通过"===a&&(a=_),i+=" AND status = '".concat(a,"'")),e.abrupt("return",L(i));case 4:case"end":return e.stop()}}),e)}))),W.apply(this,arguments)}function E(e){return z.apply(this,arguments)}function z(){return z=Object(r["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",q(t,x));case 1:case"end":return e.stop()}}),e)}))),z.apply(this,arguments)}function $(e){return J.apply(this,arguments)}function J(){return J=Object(r["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",q(t,g));case 1:case"end":return e.stop()}}),e)}))),J.apply(this,arguments)}function q(e,t){return H.apply(this,arguments)}function H(){return H=Object(r["a"])(regeneratorRuntime.mark((function e(t,n){var r,a,i,u,c,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t&&t.length){e.next=2;break}return e.abrupt("return",!1);case 2:return r={status:n},a=Object(b["j"])("userId"),i=" check_task_batch_item_detail_id in ('"+t.join("','")+"') AND status = "+"'".concat(m,"'")+" AND user_id = '".concat(a,"'"),e.next=7,j(r,i);case 7:return u=e.sent,e.next=10,U(t,a);case 10:if(c=e.sent,s=[],c.map((function(e){s.push(e.id)})),!u){e.next=16;break}return e.next=16,f["a"].batchInsertIncrement(s,d.businessType);case 16:return e.abrupt("return",u);case 17:case"end":return e.stop()}}),e)}))),H.apply(this,arguments)}function Y(){return G.apply(this,arguments)}function G(){return G=Object(r["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",d.getAllCount());case 1:case"end":return e.stop()}}),e)}))),G.apply(this,arguments)}function Q(){return X.apply(this,arguments)}function X(){return X=Object(r["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(h["a"])(d.businessType,k["a"].checkTaskBatchItemDetailPersonType,v,["id","check_task_batch_item_detail_id","check_task_batch_id","check_task_batch_item_id","department_id","user_id","user_name","status","item_detail_score","result_change_times"]);case 2:case"end":return e.stop()}}),e)}))),X.apply(this,arguments)}t["a"]={operationTaskBatchItemDetailPerson:R,mapTaskBatchDetailPersonByDetailIdsAndUserId:F,notApplicableByDetailId:O,adoptByDetailId:P,notThroughByDetailId:D,statusWaitCheck:m,statusPassed:g,statusNotPassed:_,statusNotApplicable:x,getTaskBatchItemDetailPersonListByIds:M,businessType:d.businessType,batchUpdateToNotApplicableByDetailIds:E,selectTaskBatchItemDetailPersons:L,batchUpdateToAdoptByDetailIds:$,getAllCount:Y,paginationSaveNewData:Q}},d7b4:function(e,t,n){"use strict";n("f548"),n("6d57"),n("e44b");var r=n("6178"),a=n("fae6"),i="t_parameter_value";function u(e){var t=a["a"].getKeysAndValues(e),n=t.fields,u=t.values;return r["a"].replace(i,{fields:n,values:u})}function c(e,t){var n=a["a"].getKeysAndValues(e),u=n.fields,c=n.values;return r["a"].update(i,{fields:u,values:c,condition:t})}function s(e){var t="order by sort ASC";return r["a"].select(i,{condition:e,suffix:t})}function o(e){return r["a"].delete(i,{condition:{id:e}})}t["a"]={replaceParameter:u,removeParameter:o,updateParameter:c,getParameterList:s}},e49e:function(e,t,n){"use strict";n.d(t,"b",(function(){return ie})),n.d(t,"c",(function(){return ce})),n.d(t,"d",(function(){return oe}));var r=n("4c09"),a=n("28f8"),i=(n("ec25"),n("6d57"),n("e44b"),n("06a2"),n("2aa3"),n("6a61"),n("2e91")),u=(n("f548"),n("6178")),c=n("fae6"),s="kf_check_task_problem";function o(e){var t=c["a"].getKeysAndValues(e),n=t.fields,r=t.values;return u["a"].replace(s,{fields:n,values:r})}function l(e){var t=c["a"].getKeysAndValues(e),n=t.fields,r=t.values;return u["a"].insert(s,{fields:n,values:r})}function p(e){return u["a"].delete(s,{condition:{id:e}})}function d(e,t){return u["a"].select(s,{condition:e,suffix:t})}function f(e){return u["a"].selectCount(s,{condition:e})}function b(e){return h.apply(this,arguments)}function h(){return h=Object(i["a"])(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n="limit 1",e.next=3,d(t,n);case 3:if(r=e.sent,0!==r.length){e.next=6;break}return e.abrupt("return",!1);case 6:return e.abrupt("return",r[0]);case 7:case"end":return e.stop()}}),e)}))),h.apply(this,arguments)}function k(e,t){return m.apply(this,arguments)}function m(){return m=Object(i["a"])(regeneratorRuntime.mark((function e(t,n){var r,a,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=c["a"].getKeysAndValues(t),a=r.fields,i=r.values,e.abrupt("return",u["a"].update(s,{fields:a,values:i,condition:n}));case 2:case"end":return e.stop()}}),e)}))),m.apply(this,arguments)}function g(e){return _.apply(this,arguments)}function _(){return _=Object(i["a"])(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n='check_task_batch_item_id in ("'+t.join('","')+'")',r="group by check_task_batch_item_id",e.abrupt("return",u["a"].select(s,{fields:["count(1) as count","check_task_batch_item_id"],condition:n,suffix:r}));case 3:case"end":return e.stop()}}),e)}))),_.apply(this,arguments)}function x(e){return v.apply(this,arguments)}function v(){return v=Object(i["a"])(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n='check_task_batch_item_detail_id in ("'+t.join('","')+'")',r="group by check_task_batch_item_detail_id",e.abrupt("return",u["a"].select(s,{fields:["count(1) as count","check_task_batch_item_detail_id"],condition:n,suffix:r}));case 3:case"end":return e.stop()}}),e)}))),v.apply(this,arguments)}var y={replaceCheckTaskProblem:o,insertCheckTaskProblem:l,removeCheckTaskProblem:p,businessType:s,getCheckTaskProblemList:d,getCheckTaskProblemCount:f,getCheckTaskProblemInfo:b,updateCheckTaskProblem:k,mapProblemCountByCheckBatchItemIds:g,mapProblemCountByCheckBatchItemDetailIds:x},w=n("a997"),j=n("582f"),R=n("a740"),T=n("f809"),O=n("4c60"),B=n("f89a"),I=n("47f1"),V=n("4be7"),P=n("8955"),C=n("e4b6"),D=n("8c39"),A=n("f273"),S=n("f893"),N=n("50f2"),L="待确认",M="已确认",F="已作废",K="待整改",U="整改中",W="已关闭",E="非正常关闭",z="已作废",$="off-line-check-task-api/download-data/check-task-problem";function J(e){return y.replaceCheckTaskProblem(e)}function q(e){return H.apply(this,arguments)}function H(){return H=Object(i["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return""===c["a"].getValue(t,"id","")&&(t["id"]=Object(j["a"])()),e.next=3,y.insertCheckTaskProblem(t);case 3:if(n=e.sent,!n){e.next=7;break}return e.next=7,Object(O["c"])(t["id"],y.businessType);case 7:return e.abrupt("return",n);case 8:case"end":return e.stop()}}),e)}))),H.apply(this,arguments)}function Y(e,t){return G.apply(this,arguments)}function G(){return G=Object(i["a"])(regeneratorRuntime.mark((function e(t,n){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,y.updateCheckTaskProblem(t,{id:n});case 2:if(r=e.sent,!r){e.next=6;break}return e.next=6,Object(O["c"])(n,y.businessType);case 6:return e.abrupt("return",r);case 7:case"end":return e.stop()}}),e)}))),G.apply(this,arguments)}function Q(e){return y.removeCheckTaskProblem(e)}function X(e,t){return y.getCheckTaskProblemList(e,t)}function Z(e){return y.getCheckTaskProblemCount(e)}function ee(e){var t='id in ("'+e.join('","')+'")';return X(t)}function te(e){return ne.apply(this,arguments)}function ne(){return ne=Object(i["a"])(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n={check_task_batch_item_id:t,confirm_status:L},e.next=3,Z(n);case 3:return r=e.sent,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)}))),ne.apply(this,arguments)}function re(e){return ae.apply(this,arguments)}function ae(){return ae=Object(i["a"])(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n={check_task_batch_item_detail_id:t,confirm_status:L},e.next=3,Z(n);case 3:return r=e.sent,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)}))),ae.apply(this,arguments)}function ie(e){return ue.apply(this,arguments)}function ue(){return ue=Object(i["a"])(regeneratorRuntime.mark((function e(t){var n,r,a,i,u,c,s,o,l,p,d,f,b=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=b.length>1&&void 0!==b[1]?b[1]:"",r=b.length>2&&void 0!==b[2]?b[2]:1,a=b.length>3&&void 0!==b[3]?b[3]:10,i={total:0,items:[]},console.log("problemCondition",t),u="1 = 1",!t.hasOwnProperty("status")){e.next=20;break}if(!t.status){e.next=20;break}c=t.status,e.t0=c,e.next=e.t0===L?12:e.t0===F||e.t0===z?14:e.t0===K||e.t0===U||e.t0===E?16:e.t0===W?18:20;break;case 12:return u+=" AND confirm_status = '".concat(t.status,"'"),e.abrupt("break",20);case 14:return u+=" AND (status = '".concat(t.status,"' OR confirm_status = '").concat(t.status,"')"),e.abrupt("break",20);case 16:return u+=" AND status = '".concat(c,"'"),e.abrupt("break",20);case 18:return u+=" AND status = '正常关闭'",e.abrupt("break",20);case 20:return t.hasOwnProperty("check_task_batch_id")&&t.check_task_batch_id&&(u+=" AND check_task_batch_id = '".concat(t.check_task_batch_id,"'")),t.hasOwnProperty("check_task_batch_item_id")&&t.check_task_batch_item_id&&(u+=" AND check_task_batch_item_id = '".concat(t.check_task_batch_item_id,"'")),t.hasOwnProperty("confirm_status")&&t.confirm_status&&(u+=" AND confirm_status = '".concat(t.confirm_status,"'")),t.hasOwnProperty("check_task_batch_item_detail_id")&&t.check_task_batch_item_detail_id&&(u+=" AND check_task_batch_item_detail_id = '".concat(t.check_task_batch_item_detail_id,"'")),e.next=26,Z(u);case 26:if(i["total"]=e.sent,0!==i["total"]){e.next=29;break}return e.abrupt("return",i);case 29:return s=I["a"].buildPageParameter(i["total"],r,a),o=s.offset,l=s.limit,p="",p+=n?"order by ".concat(n," "):"order by register_time desc ",p+="limit ".concat(o,", ").concat(l),e.next=35,X(u,p);case 35:if(i["items"]=e.sent,0!==i["items"].length){e.next=38;break}return e.abrupt("return",i);case 38:return d=[],i["items"].map((function(e){d.push(e["check_task_batch_item_id"])})),e.next=42,D["a"].getTaskBatchItemListByIds(d);case 42:return f=e.sent,i["items"].map((function(e,t){e["show_edit_button"]=0,e["confirm_status"]===L&&(e["show_edit_button"]=1),f.map((function(n){n["id"]===e["check_task_batch_item_id"]&&(i["items"][t]["check_task_batch_item_full_name"]=n["check_item_full_name"])}))})),e.abrupt("return",i);case 45:case"end":return e.stop()}}),e)}))),ue.apply(this,arguments)}function ce(e,t){return se.apply(this,arguments)}function se(){return se=Object(i["a"])(regeneratorRuntime.mark((function e(t,n){var r,a,i,u,c,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r="check_task_batch_id = '".concat(t,"'"),!n){e.next=13;break}e.t0=n,e.next=e.t0===L?5:e.t0===K||e.t0===U||e.t0===E?7:e.t0===W?9:e.t0===z||e.t0===F?11:13;break;case 5:return r+=" AND confirm_status = '".concat(n,"'"),e.abrupt("break",13);case 7:return r+=" AND status = '".concat(n,"'"),e.abrupt("break",13);case 9:return r+=" AND status = '正常关闭'",e.abrupt("break",13);case 11:return r+=" AND (status = '".concat(condition.status,"' OR confirm_status = '").concat(condition.status,"')"),e.abrupt("break",13);case 13:return e.next=15,X(r);case 15:return a=e.sent,i=new Set,u={},a.map((function(e){i.add(e["check_task_batch_item_id"]),u.hasOwnProperty(e["check_task_batch_item_id"])?u[e["check_task_batch_item_id"]]=parseInt(u[e["check_task_batch_item_id"]])+1:u[e["check_task_batch_item_id"]]=1})),c=Array.from(i),e.next=22,D["a"].getTaskBatchItemListByIds(c);case 22:if(s=e.sent,0!==s.length){e.next=25;break}return e.abrupt("return",[]);case 25:return s.map((function(e){u.hasOwnProperty(e.id)?e.count=u[e.id]:e.count=0})),e.abrupt("return",s);case 27:case"end":return e.stop()}}),e)}))),se.apply(this,arguments)}function oe(e,t){return le.apply(this,arguments)}function le(){return le=Object(i["a"])(regeneratorRuntime.mark((function e(t,n){var r,i,u,c,s,o,l,p;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:i="check_task_batch_id = '".concat(t,"'"),n&&(i+=" AND check_task_batch_item_id = '".concat(n,"'")),r={},Object(a["a"])(r,L,0),Object(a["a"])(r,K,0),Object(a["a"])(r,U,0),Object(a["a"])(r,W,0),Object(a["a"])(r,E,0),Object(a["a"])(r,z,0),u=r,c=[L,K,U,W,E,z],s=0;case 5:if(!(s<c.length)){e.next=27;break}o=c[s],l="",p=i,e.t0=o,e.next=e.t0===L?12:e.t0===K||e.t0===U||e.t0===E?14:e.t0===W?16:e.t0===z?18:20;break;case 12:return l+=" AND confirm_status = '".concat(o,"'"),e.abrupt("break",20);case 14:return l+=" AND status = '".concat(o,"'"),e.abrupt("break",20);case 16:return l+=" AND status = '正常关闭'",e.abrupt("break",20);case 18:return l+=" AND (status = '".concat(o,"' OR confirm_status = '").concat(o,"')"),e.abrupt("break",20);case 20:return p+=l,e.next=23,Z(p);case 23:u[o]=e.sent;case 24:s++,e.next=5;break;case 27:return console.log("listStatus",u),e.abrupt("return",u);case 29:case"end":return e.stop()}}),e)}))),le.apply(this,arguments)}function pe(e){return de.apply(this,arguments)}function de(){return de=Object(i["a"])(regeneratorRuntime.mark((function e(t){var n,r,a,i,u,s,o,l,p;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(void 0!==t&&0!==t.length){e.next=2;break}return e.abrupt("return",!1);case 2:e.t0=regeneratorRuntime.keys(t);case 3:if((e.t1=e.t0()).done){e.next=39;break}if(n=e.t1.value,"increment"!==n){e.next=23;break}if(r=t[n],0!==r.length){e.next=9;break}return e.abrupt("continue",3);case 9:e.t2=regeneratorRuntime.keys(r);case 10:if((e.t3=e.t2()).done){e.next=21;break}if(a=e.t3.value,i=r[a],u=c["a"].getValue(i,"id",""),""!==u){e.next=16;break}return e.abrupt("continue",10);case 16:return s={id:u,code:c["a"].getValue(i,"code",""),proj_id:c["a"].getValue(i,"proj_id",""),corp_id:c["a"].getValue(r,"corp_id"),check_task_batch_id:c["a"].getValue(i,"check_task_batch_id",""),check_task_batch_item_id:c["a"].getValue(i,"check_task_batch_item_id",""),check_task_batch_item_detail_id:c["a"].getValue(i,"check_task_batch_item_detail_id",""),master_problem_id:c["a"].getValue(i,"master_problem_id",""),is_child_problem:c["a"].getValue(i,"is_child_problem",""),subject:c["a"].getValue(i,"subject",""),scheme:c["a"].getValue(i,"scheme",""),risk_level:c["a"].getValue(i,"risk_level",""),risk_level_title:c["a"].getValue(i,"risk_level_title",""),risk_stage:c["a"].getValue(i,"risk_stage",""),risk_stage_title:c["a"].getValue(i,"risk_stage_title",""),risks_type:c["a"].getValue(i,"risks_type",""),expect_pay_fee:c["a"].getValue(i,"expect_pay_fee",""),pay_fee:c["a"].getValue(i,"pay_fee",""),confirm_status:c["a"].getValue(i,"confirm_status",""),status:c["a"].getValue(i,"status",""),register_id:c["a"].getValue(i,"register_id",""),register_name:c["a"].getValue(i,"register_name",""),register_time:c["a"].getValue(i,"register_time",""),leader_id:c["a"].getValue(i,"leader_id",""),leader_name:c["a"].getValue(i,"leader_name",""),handler_id:c["a"].getValue(i,"handler_id",""),handler_name:c["a"].getValue(i,"handler_name",""),reviewer_id:c["a"].getValue(i,"reviewer_id",""),reviewer_name:c["a"].getValue(i,"reviewer_name",""),problem_deadline:c["a"].getValue(i,"problem_deadline",""),assign_time:c["a"].getValue(i,"assign_time",""),close_time:c["a"].getValue(i,"close_time",""),expect_complete_time:c["a"].getValue(i,"expect_complete_time","")},e.next=19,J(s);case 19:e.next=10;break;case 21:e.next=37;break;case 23:if("delete"!==n){e.next=37;break}if(o=t[n],0!==o.length){e.next=27;break}return e.abrupt("continue",3);case 27:e.t4=regeneratorRuntime.keys(o);case 28:if((e.t5=e.t4()).done){e.next=37;break}if(l=e.t5.value,p=c["a"].getValue(o[l],"id",""),""!==p){e.next=33;break}return e.abrupt("continue",28);case 33:return e.next=35,Q(p);case 35:e.next=28;break;case 37:e.next=3;break;case 39:case"end":return e.stop()}}),e)}))),de.apply(this,arguments)}function fe(e,t,n){return be.apply(this,arguments)}function be(){return be=Object(i["a"])(regeneratorRuntime.mark((function e(t,n,r){var a,i,u,s,o,l;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!(t.length>0)){e.next=25;break}a=0;case 2:if(!(a<t.length)){e.next=25;break}if(i=t[a],u=c["a"].getValue(i,"building_id",""),""!==u){e.next=7;break}return e.abrupt("return",!1);case 7:if(s=c["a"].getValue(i,"rooms",[]),o={check_task_problem_id:n,proj_id:r,sub_proj_id:c["a"].getValue(i,"sub_proj_id",""),building_id:u},0!==s.length){e.next=14;break}return e.next=12,B["a"].insertCheckTaskProblemScope(o);case 12:e.next=22;break;case 14:l=0;case 15:if(!(l<s.length)){e.next=22;break}return o["room_id"]=s[l],e.next=19,B["a"].insertCheckTaskProblemScope(o);case 19:l++,e.next=15;break;case 22:a++,e.next=2;break;case 25:case"end":return e.stop()}}),e)}))),be.apply(this,arguments)}function he(e,t){return ke.apply(this,arguments)}function ke(){return ke=Object(i["a"])(regeneratorRuntime.mark((function e(t,n){var r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!(t.length>0)){e.next=9;break}r=0;case 2:if(!(r<t.length)){e.next=9;break}return a={local_path:t[r],business_type:"问题图片",business_id:n},e.next=6,P["a"].insertImage(a);case 6:r++,e.next=2;break;case 9:case"end":return e.stop()}}),e)}))),ke.apply(this,arguments)}function me(e){return ge.apply(this,arguments)}function ge(){return ge=Object(i["a"])(regeneratorRuntime.mark((function e(t){var n,r,a,i,u,s,o,l,p,d,f;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(0!==t.length){e.next=2;break}return e.abrupt("return",!1);case 2:if(n=c["a"].getValue(t,"check_task_batch_id",""),r={},!n){e.next=8;break}return e.next=7,w["a"].getOneTaskBatch({id:n});case 7:r=e.sent;case 8:return a=Object(R["j"])(),i=Object(j["a"])(),u=r["proj_id"]||"",s=r["corp_id"]||"",o=c["a"].getValue(t,"check_task_batch_item_detail_id",""),l={id:i,proj_id:u,corp_id:s,check_task_batch_id:n,check_task_batch_item_id:c["a"].getValue(t,"check_task_batch_item_id",""),check_task_batch_item_detail_id:o,is_child_problem:0,subject:c["a"].getValue(t,"subject",""),risk_level:c["a"].getValue(t,"risk_level",""),risk_level_title:c["a"].getValue(t,"risk_level_title",""),confirm_status:L,register_id:a.userId||a.user_id,register_name:a.userName||a.user_name,register_time:Object(T["a"])(new Date),expect_complete_time:c["a"].getValue(t,"expect_complete_time","")},e.next=16,q(l);case 16:if(p=e.sent,!p){e.next=22;break}return e.next=20,C["b"].notThrough(o);case 20:return e.next=22,V["a"].insertCheckTaskLog({check_task_batch_id:n,check_task_batch_item_detail_id:o,check_task_problem_id:i,operation_type:"登记问题",remark:"",operator_id:a.userId||a.user_id,operator_name:a.userName||a.user_name,operation_time:Object(T["a"])(new Date),operation_terminal:"app"});case 22:return d=c["a"].getValue(t,"scopes",[]),e.next=25,fe(d,i,u);case 25:return f=c["a"].getValue(t,"images",[]),e.next=28,he(f,i);case 28:return e.abrupt("return",p);case 29:case"end":return e.stop()}}),e)}))),ge.apply(this,arguments)}function _e(e){return xe.apply(this,arguments)}function xe(){return xe=Object(i["a"])(regeneratorRuntime.mark((function e(t){var n,r,a,i,u,s,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(0!==t.length){e.next=2;break}return e.abrupt("return",!1);case 2:if(n=c["a"].getValue(t,"id",""),""!==n){e.next=5;break}return e.abrupt("return",!1);case 5:return e.next=7,y.getCheckTaskProblemInfo({id:n});case 7:if(r=e.sent,r){e.next=10;break}return e.abrupt("return",!1);case 10:if(r["confirm_status"]===L){e.next=12;break}return e.abrupt("return",!1);case 12:return a={subject:c["a"].getValue(t,"subject",""),risk_level:c["a"].getValue(t,"risk_level",""),risk_level_title:c["a"].getValue(t,"risk_level_title",""),expect_complete_time:c["a"].getValue(t,"expect_complete_time","")},i=Object(R["j"])(),e.next=16,Y(a,n);case 16:if(u=e.sent,!u){e.next=20;break}return e.next=20,V["a"].insertCheckTaskLog({check_task_batch_id:r["check_task_batch_id"],check_task_batch_item_detail_id:r["check_task_batch_item_detail_id"],check_task_problem_id:n,operation_type:"修改问题",remark:"",operator_id:i.userId,operator_name:i.userName||i.user_name,operation_time:Object(T["a"])(new Date),operation_terminal:"app"});case 20:return e.next=22,B["a"].saveDeleteScopeIdToIncrementWithProblemId(n);case 22:return e.next=24,B["a"].deleteScopeWithCheckTaskProblemId(n);case 24:return s=c["a"].getValue(t,"scopes",[]),e.next=27,fe(s,n,r["proj_id"]);case 27:return e.next=29,P["a"].saveDeleteImageIdToIncrementWithProblemId(n);case 29:return e.next=31,P["a"].deleteImagesWithCheckTaskProblemId(n);case 31:return o=c["a"].getValue(t,"images",[]),e.next=34,he(o,n);case 34:return e.abrupt("return",u);case 35:case"end":return e.stop()}}),e)}))),xe.apply(this,arguments)}function ve(e){return ye.apply(this,arguments)}function ye(){return ye=Object(i["a"])(regeneratorRuntime.mark((function e(t){var n,r,a,i,u,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,y.updateCheckTaskProblem({confirm_status:z,status:z},{check_task_batch_item_detail_id:t});case 2:return n=e.sent,e.next=5,y.getCheckTaskProblemList({check_task_batch_item_detail_id:t});case 5:if(r=e.sent,!n){e.next=19;break}a=Object(R["j"])(),i=0;case 9:if(!(i<r.length)){e.next=19;break}return u=r[i],c=u.id,e.next=14,Object(O["c"])(c,y.businessType);case 14:return e.next=16,V["a"].insertCheckTaskLog({check_task_batch_id:u.check_task_batch_id,check_task_batch_item_detail_id:u.check_task_batch_item_detail_id,check_task_problem_id:c,operation_type:"作废问题",remark:"",operator_id:a.userId,operator_name:a.userName||a.user_name,operation_time:Object(T["a"])(new Date),operation_terminal:"app"});case 16:i++,e.next=9;break;case 19:return e.abrupt("return",n);case 20:case"end":return e.stop()}}),e)}))),ye.apply(this,arguments)}function we(e){return je.apply(this,arguments)}function je(){return je=Object(i["a"])(regeneratorRuntime.mark((function e(t){var n,a,i,u,c,s,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,y.getCheckTaskProblemInfo({id:t});case 2:if(n=e.sent,n){e.next=5;break}return e.abrupt("return",!1);case 5:return e.next=7,B["a"].getScopeListWithProductType(t);case 7:for(a=e.sent,i=[],u=0;u<a.length;u++)c=a[u],i.push(c["building_id"]);return i=Object(r["a"])(new Set(i)),e.next=13,A["a"].getBuildingListByIds(i);case 13:return s=e.sent,a.map((function(e){s.map((function(t){e["building_id"]===t["id"]&&(e["building_name"]=t["full_name"])}))})),n["scopes"]=a||[],e.next=18,P["a"].getImageListByProblemId(t);case 18:return o=e.sent,n["images"]=o||[],e.abrupt("return",n);case 21:case"end":return e.stop()}}),e)}))),je.apply(this,arguments)}function Re(e){return Te.apply(this,arguments)}function Te(){return Te=Object(i["a"])(regeneratorRuntime.mark((function e(t){var n,r,a,i,u;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,y.mapProblemCountByCheckBatchItemIds(t);case 2:for(n=e.sent,r={},a=0;a<n.length;a++)i=n[a],u=i.check_task_batch_item_id,r[u]=i.count;return e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)}))),Te.apply(this,arguments)}function Oe(e){return Be.apply(this,arguments)}function Be(){return Be=Object(i["a"])(regeneratorRuntime.mark((function e(t){var n,r,a,i,u;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,y.mapProblemCountByCheckBatchItemDetailIds(t);case 2:for(n=e.sent,r={},a=0;a<n.length;a++)i=n[a],u=i.check_task_batch_item_detail_id,r[u]=i.count;return e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)}))),Be.apply(this,arguments)}function Ie(e){return Ve.apply(this,arguments)}function Ve(){return Ve=Object(i["a"])(regeneratorRuntime.mark((function e(t){var n,r,a,i,u,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n='check_task_batch_item_detail_id in ("'+t.join('","')+'") AND confirm_status = "已确认"',e.next=3,X(n,"");case 3:for(r=e.sent,a={},i=0;i<r.length;i++)u=r[i],c=u.check_task_batch_item_detail_id,a.hasOwnProperty(c)?a[c].push(u):a[c]=[u];return e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)}))),Ve.apply(this,arguments)}function Pe(){return Ce.apply(this,arguments)}function Ce(){return Ce=Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(S["a"])(y.businessType,N["a"].checkTaskProblemType,$,["id","code","proj_id","corp_id","check_task_batch_id","check_task_batch_item_id","check_task_batch_item_detail_id","master_problem_id","is_child_problem","subject","scheme","risk_level","risk_level_title","risk_stage","risk_stage_title","risks_type","expect_pay_fee","pay_fee","confirm_status","status","register_id","register_name","register_time","leader_id","leader_name","handler_id","handler_name","reviewer_id","reviewer_name","problem_deadline","assign_time","close_time","expect_complete_time"]);case 2:case"end":return e.stop()}}),e)}))),Ce.apply(this,arguments)}t["a"]={operationTaskProblem:pe,confirmStatusWait:L,confirmStatusOK:M,confirmStatusVoid:F,statusWaitReform:K,statusReforming:U,statusClosed:W,statusNotNormalClose:E,statusHasVoid:z,registerProblem:me,getCheckTaskProblemListByIdList:ee,getCheckTaskProblemPages:ie,getProblemCountByCheckBatchItem:te,getProblemCountByCheckBatchItemDetailId:re,getProblemDetail:we,updateProblem:_e,businessType:y.businessType,mapProblemCountByCheckBatchItemIds:Re,mapProblemCountByCheckBatchItemDetailIds:Oe,mapConfirmedProblemByCheckBatchItemDetailIds:Ie,listCheckItemByProblem:ce,listStatus:oe,paginationSaveNewData:Pe,voidProblemByDetailId:ve}},e4b6:function(e,t,n){"use strict";n.d(t,"a",(function(){return D})),n.d(t,"c",(function(){return S}));n("e10e"),n("06a2"),n("2aa3"),n("6d57"),n("e44b"),n("6a61");var r=n("2e91"),a=(n("f548"),n("6178")),i=n("fae6");window.dbTools=a["a"];var u="kf_check_task_batch_item_detail";function c(e){var t=i["a"].getKeysAndValues(e),n=t.fields,r=t.values;return a["a"].replace(u,{fields:n,values:r})}function s(e){return a["a"].delete(u,{condition:{id:e}})}function o(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return a["a"].select(u,{condition:e,suffix:t,fields:n})}var l={replaceTaskBatchItemDetail:c,removeTaskBatchItemDetail:s,selectTaskBatchItemDetails:o,businessType:u},p=n("a740"),d=n("c662"),f=n("e49e"),b=n("f893"),h=n("50f2"),k="待检查",m="已通过",g="未通过",_="不适用",x="off-line-check-task-api/download-data/check-task-batch-item-detail",v=[],y=[],w=[],j=[];function R(e){return l.replaceTaskBatchItemDetail(e)}function T(e){return l.removeTaskBatchItemDetail(e)}function O(e){return B.apply(this,arguments)}function B(){return B=Object(r["a"])(regeneratorRuntime.mark((function e(t){var n,r,a,u,c,s,o,l,p;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(void 0!==t&&0!==t.length){e.next=2;break}return e.abrupt("return",!1);case 2:e.t0=regeneratorRuntime.keys(t);case 3:if((e.t1=e.t0()).done){e.next=51;break}if(n=e.t1.value,"increment"!==n){e.next=35;break}if(r=t[n],0!==r.length){e.next=9;break}return e.abrupt("continue",3);case 9:e.t2=regeneratorRuntime.keys(r);case 10:if((e.t3=e.t2()).done){e.next=33;break}if(a=e.t3.value,u=r[a],c=i["a"].getValue(u,"id",""),""!==c){e.next=16;break}return e.abrupt("continue",10);case 16:return e.t4=c,e.t5=i["a"].getValue(u,"check_task_batch_id",""),e.t6=i["a"].getValue(u,"check_task_batch_item_id",""),e.t7=i["a"].getValue(u,"item_detail_name",""),e.t8=i["a"].getValue(u,"item_detail_score",""),e.t9=i["a"].getValue(u,"item_detail_sort",""),e.next=24,i["a"].getValue(u,"status","");case 24:return e.t10=e.sent,e.next=27,i["a"].getValue(r,"check_status","");case 27:return e.t11=e.sent,s={id:e.t4,check_task_batch_id:e.t5,check_task_batch_item_id:e.t6,item_detail_name:e.t7,item_detail_score:e.t8,item_detail_sort:e.t9,status:e.t10,check_status:e.t11},e.next=31,R(s);case 31:e.next=10;break;case 33:e.next=49;break;case 35:if("delete"!==n){e.next=49;break}if(o=t[n],0!==o.length){e.next=39;break}return e.abrupt("continue",3);case 39:e.t12=regeneratorRuntime.keys(o);case 40:if((e.t13=e.t12()).done){e.next=49;break}if(l=e.t13.value,p=i["a"].getValue(o[l],"id",""),""!==p){e.next=45;break}return e.abrupt("continue",40);case 45:return e.next=47,T(p);case 47:e.next=40;break;case 49:e.next=3;break;case 51:case"end":return e.stop()}}),e)}))),B.apply(this,arguments)}function I(){return V.apply(this,arguments)}function V(){return V=Object(r["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return v={},y=[],w=[],j=[],e.next=6,Object(b["a"])(l.businessType,h["a"].checkTaskBatchItemDetailType,x,["id","check_task_batch_id","check_task_batch_item_id","item_detail_name","item_detail_score","item_detail_sort","status","check_status"]);case 6:case"end":return e.stop()}}),e)}))),V.apply(this,arguments)}function P(e,t){return C.apply(this,arguments)}function C(){return C=Object(r["a"])(regeneratorRuntime.mark((function e(t,n){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,d["a"].notApplicableByDetailId(t,n);case 2:if(r=e.sent,!r||!n){e.next=6;break}return e.next=6,f["a"].voidProblemByDetailId(t);case 6:return e.abrupt("return",r);case 7:case"end":return e.stop()}}),e)}))),C.apply(this,arguments)}function D(e,t,n){return A.apply(this,arguments)}function A(){return A=Object(r["a"])(regeneratorRuntime.mark((function e(t,n,r){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,d["a"].adoptByDetailId(t,n,r);case 2:if(a=e.sent,!a||!r){e.next=6;break}return e.next=6,f["a"].voidProblemByDetailId(t);case 6:return e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)}))),A.apply(this,arguments)}function S(e,t,n){return N.apply(this,arguments)}function N(){return N=Object(r["a"])(regeneratorRuntime.mark((function e(t,n,r){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,d["a"].notThroughByDetailId(t,n,r);case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)}))),N.apply(this,arguments)}function L(e){return M.apply(this,arguments)}function M(){return M=Object(r["a"])(regeneratorRuntime.mark((function e(t){var n,r,a,i,u,c,s,o,b,h,k=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=k.length>1&&void 0!==k[1]?k[1]:"",r=k.length>2&&void 0!==k[2]?k[2]:[],a=k.length>3?k[3]:void 0,i=k.length>4?k[4]:void 0,e.next=6,l.selectTaskBatchItemDetails(t,n,r);case 6:return u=e.sent,c=Object(p["j"])("userId"),s=[],u.map((function(e){s.push(e["id"])})),e.next=12,d["a"].mapTaskBatchDetailPersonByDetailIdsAndUserId(s,c,a,i);case 12:return o=e.sent,e.next=15,f["a"].mapConfirmedProblemByCheckBatchItemDetailIds(s);case 15:return b=e.sent,h=[],u.map((function(e){var t=e["id"],n=b[t]||[];o.hasOwnProperty(t)&&(e.status=o[t].status,e.result_change_times=o[t].result_change_times,e.canChangeResult=!0,e.changeErrorMessage="",e.showChangeResult="待检查"!==e.check_status,e.result_change_times>0?(e.canChangeResult=!1,e.changeErrorMessage="您已变更过一次检查结果，不允许再次操作"):n.length>0&&(e.canChangeResult=!1,e.changeErrorMessage="当前检查项的问题已确认，不允许变更检查结果"),h.push(e))})),e.abrupt("return",h);case 19:case"end":return e.stop()}}),e)}))),M.apply(this,arguments)}function F(e){if(0===e.length)return[];var t='id in ("'+e.join('","')+'")';return L(t,"")}function K(){return U.apply(this,arguments)}function U(){return U=Object(r["a"])(regeneratorRuntime.mark((function e(){var t,n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!(y.length>0)){e.next=2;break}return e.abrupt("return",y);case 2:return e.next=4,J();case 4:for(r in t=e.sent,n=function(e){var n=t[e],r=new Set;n.map((function(e){r.add(e.status)})),!r.has(d["a"].statusWaitCheck)||r.has(d["a"].statusPassed)||r.has(d["a"].statusNotApplicable)||r.has(d["a"].statusNotPassed)||y.push(e)},t)n(r);return e.abrupt("return",y);case 8:case"end":return e.stop()}}),e)}))),U.apply(this,arguments)}function W(){return E.apply(this,arguments)}function E(){return E=Object(r["a"])(regeneratorRuntime.mark((function e(){var t,n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!(w.length>0)){e.next=2;break}return e.abrupt("return",w);case 2:return e.next=4,J();case 4:for(r in t=e.sent,n=function(e){var n=t[e],r=new Set;n.map((function(e){r.add(e.status)})),r.has(d["a"].statusWaitCheck)&&(r.has(d["a"].statusPassed)||r.has(d["a"].statusNotApplicable)||r.has(d["a"].statusNotPassed))&&w.push(e)},t)n(r);return e.abrupt("return",w);case 8:case"end":return e.stop()}}),e)}))),E.apply(this,arguments)}function z(){return $.apply(this,arguments)}function $(){return $=Object(r["a"])(regeneratorRuntime.mark((function e(){var t,n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!(j.length>0)){e.next=2;break}return e.abrupt("return",j);case 2:return e.next=4,J();case 4:for(r in t=e.sent,n=function(e){var n=t[e],r=new Set;n.map((function(e){r.add(e.status)})),r.has(d["a"].statusWaitCheck)||j.push(e)},t)n(r);return e.abrupt("return",j);case 8:case"end":return e.stop()}}),e)}))),$.apply(this,arguments)}function J(){return q.apply(this,arguments)}function q(){return q=Object(r["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!(Object.keys(v).length>0)){e.next=2;break}return e.abrupt("return",v);case 2:return console.log("多次执行sql"),e.next=5,d["a"].selectTaskBatchItemDetailPersons("1 = 1","",["id","check_task_batch_id","status"]);case 5:if(t=e.sent,console.log("detailPersonList",t),0!==t.length){e.next=9;break}return e.abrupt("return",[]);case 9:return t.map((function(e){v.hasOwnProperty(e.check_task_batch_id)?v[e.check_task_batch_id].push(e):v[e.check_task_batch_id]=[e]})),e.abrupt("return",v);case 11:case"end":return e.stop()}}),e)}))),q.apply(this,arguments)}function H(e){return Y.apply(this,arguments)}function Y(){return Y=Object(r["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,d["a"].batchUpdateToNotApplicableByDetailIds(t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)}))),Y.apply(this,arguments)}function G(e){return Q.apply(this,arguments)}function Q(){return Q=Object(r["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,d["a"].batchUpdateToAdoptByDetailIds(t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)}))),Q.apply(this,arguments)}window.paginationSaveDetail=I;t["b"]={operationTaskBatchItemDetail:O,selectTaskBatchItemDetails:L,notApplicable:P,adopt:D,notThrough:S,statusWaitCheck:k,statusPassed:m,statusNotPassed:g,statusNotApplicable:_,getTaskBatchItemDetailListByIds:F,listWaitCheckTaskBatchIdsByDetailPerson:K,listCheckingTaskBatchIdsByDetailPerson:W,listCheckedTaskBatchIdsByDetailPerson:z,businessType:l.businessType,batchUpdateToNotApplicableByIds:H,batchUpdateToAdoptByIds:G,paginationSaveNewData:I}},f273:function(e,t,n){"use strict";n("6d57"),n("e44b"),n("6a61");var r=n("2e91"),a=(n("f548"),n("6178")),i=n("fae6"),u="t_building";function c(e){var t=i["a"].getKeysAndValues(e),n=t.fields,r=t.values;return a["a"].replace(u,{fields:n,values:r})}function s(e,t){var n=i["a"].getKeysAndValues(e),r=n.fields,c=n.values;return a["a"].update(u,{fields:r,values:c,condition:t})}function o(e){return a["a"].delete(u,{condition:{id:e}})}function l(e){return a["a"].select(u,{condition:e})}var p={replaceBuilding:c,updateBuilding:s,removeBuilding:o,getBuildingList:l};function d(e){return p.replaceBuilding(e)}function f(e){return p.removeBuilding(e)}function b(e){return p.getBuildingList(e)}function h(e){var t={item:[]},n={proj_id:e};return t["items"]=b(n),t}function k(e){return m.apply(this,arguments)}function m(){return m=Object(r["a"])(regeneratorRuntime.mark((function e(t){var n,r,a,u,c,s,o,l,p;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(void 0!==t&&0!==t.length){e.next=2;break}return e.abrupt("return",!1);case 2:e.t0=regeneratorRuntime.keys(t);case 3:if((e.t1=e.t0()).done){e.next=39;break}if(n=e.t1.value,"increment"!==n){e.next=23;break}if(r=t[n],0!==r.length){e.next=9;break}return e.abrupt("continue",3);case 9:e.t2=regeneratorRuntime.keys(r);case 10:if((e.t3=e.t2()).done){e.next=21;break}if(a=e.t3.value,u=r[a],c=i["a"].getValue(u,"id",""),""!==c){e.next=16;break}return e.abrupt("continue",10);case 16:return s={id:c,name:i["a"].getValue(u,"name",""),full_name:i["a"].getValue(u,"full_name",""),proj_id:i["a"].getValue(u,"proj_id",""),is_end:i["a"].getValue(u,"is_end",""),order_sort:i["a"].getValue(u,"order_sort","")},e.next=19,d(s);case 19:e.next=10;break;case 21:e.next=37;break;case 23:if("delete"!==n){e.next=37;break}if(o=t[n],0!==o.length){e.next=27;break}return e.abrupt("continue",3);case 27:e.t4=regeneratorRuntime.keys(o);case 28:if((e.t5=e.t4()).done){e.next=37;break}if(l=e.t5.value,p=i["a"].getValue(o[l],"id",""),""!==p){e.next=33;break}return e.abrupt("continue",28);case 33:return e.next=35,f(p);case 35:e.next=28;break;case 37:e.next=3;break;case 39:case"end":return e.stop()}}),e)}))),m.apply(this,arguments)}function g(e){return _.apply(this,arguments)}function _(){return _=Object(r["a"])(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n='id in ("'+t.join('","')+'")',e.next=3,b(n);case 3:return r=e.sent,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)}))),_.apply(this,arguments)}t["a"]={operationBuilding:k,getBuildingListByProject:h,getBuildingListByIds:g}},f809:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));n("9dd9"),n("f548");function r(e){return e<10?"0".concat(e):e}function a(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"yyyy-MM-dd hh:mm:ss",n={"M+":e.getMonth()+1,"d+":e.getDate(),"h+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds()};for(var a in/(y+)/i.test(t)&&(t=t.replace(RegExp.$1,(e.getFullYear()+"").substr(-RegExp.$1.length))),n)if(new RegExp("("+a+")").test(t)){var i=n[a]+"",u=RegExp.$1.length<i.length?i.length:RegExp.$1.length;i=r(i),t=t.replace(RegExp.$1,i.substr(-u))}return/(S+)/.test(t)&&(t=t.replace(RegExp.$1,(e.getMilliseconds()+"").substr(0,RegExp.$1.length))),t}},f893:function(e,t,n){"use strict";n.d(t,"a",(function(){return T}));n("e44b"),n("5f54"),n("6d57"),n("6a61");var r=n("2e91"),a=n("fae6"),i=n("47f1"),u=n("50f2"),c=n("9c54"),s=n("8a31"),o=n("6554"),l=n("6178"),p=n("3dd2"),d=n("a740"),f=n("45bd");function b(e,t){if(!window.MFileManager)throw new Error("MFileManager plugin is not defined");return new Promise((function(n){window.MFileManager.exists(e,(function(e){"function"===typeof t&&t(e),n(e)}))}))}function h(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;if(!window.MFileManager)throw new Error("MFileManager plugin is not defined");return new Promise((function(a,i){window.MFileManager.createFile(e,t,(function(){"function"===typeof n&&n(),a(e)}),(function(e){"function"===typeof r&&r(e),i(e)}))}))}function k(e,t,n){return m.apply(this,arguments)}function m(){return m=Object(r["a"])(regeneratorRuntime.mark((function e(t,n,r){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(window.MFileManager){e.next=2;break}throw new Error("MFileManager plugin is not defined");case 2:return e.next=4,b(t);case 4:if(a=e.sent,a){e.next=7;break}throw new Error(t+"------ file is not exists");case 7:return e.abrupt("return",new Promise((function(e,a){window.MFileManager.deleteFile(t,(function(){"function"===typeof n&&n(),e()}),(function(e){"function"===typeof r&&r(e),a(e)}))})));case 8:case"end":return e.stop()}}),e)}))),m.apply(this,arguments)}function g(e,t,n,r){if(!window.MFileManager)throw new Error("MFileManager plugin is not defined");return new Promise((function(a,i){window.MFileManager.zipFile(e,t,(function(){"function"===typeof n&&n(),a()}),(function(e){"function"===typeof r&&r(e),i(e)}))}))}function _(e,t){return x.apply(this,arguments)}function x(){return x=Object(r["a"])(regeneratorRuntime.mark((function e(t,n){var r,a,i,u,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=[],a=n.folder,e.next=4,Object(o["a"])(t,{folder:a});case 4:return i=e.sent,u=Array.isArray(i)?i[0]:i,c=u.url,r.push(c),console.log(r),e.abrupt("return",r);case 9:case"end":return e.stop()}}),e)}))),x.apply(this,arguments)}function v(){return y.apply(this,arguments)}function y(){return y=Object(r["a"])(regeneratorRuntime.mark((function e(){var t,n,r,a,i,u,s,o,m,x,v,y,w,j,R,T,O;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:for(v in e.prev=0,t=Object(l["b"])(c["c"]),n=Object(l["b"])(Object(l["c"])()),r=Object(p["b"])(),a=r.device_type,i=Object(d["j"])("tenant_code"),u=Object(d["j"])("userName"),s=Object(d["j"])("userId"),o=Object(f["c"])()+"".concat(i,"_").concat(u,"_").concat(a,"_").concat((new Date).getTime(),".zip"),m=Object(f["c"])()+"".concat(i,"_").concat(s,"_").concat((new Date).getTime(),".json"),x={},localStorage)localStorage.hasOwnProperty(v)&&(x[v]=localStorage.getItem(v));return x=JSON.stringify(x),e.next=15,h(m,x);case 15:y=[m,n,n+"-shm",n+"-wal",t,t+"-shm",t+"-wal"],w=[],j=0;case 18:if(!(j<y.length)){e.next=27;break}return R=y[j],e.next=22,b(R);case 22:T=e.sent,T&&w.push(R);case 24:j++,e.next=18;break;case 27:return O=[],e.next=30,g(o,w);case 30:return e.next=32,_([o],{folder:"feedbackDatabase"});case 32:return O=e.sent,e.next=35,k(o);case 35:return e.next=37,k(m);case 37:return e.abrupt("return",O);case 40:throw e.prev=40,e.t0=e["catch"](0),Object(c["b"])(e.t0),e.t0;case 44:case"end":return e.stop()}}),e,null,[[0,40]])}))),y.apply(this,arguments)}var w={exists:b,createFile:h,deleteFile:k,zipFile:g,uploadFiles:_,uploadDbFiles:v},j=n("96ce"),R=n("1961");function T(e,t,n,r){return O.apply(this,arguments)}function O(){return O=Object(r["a"])(regeneratorRuntime.mark((function e(t,n,r,s){var o,l,p,d,f,b,h,k,m;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(j["a"])(n);case 3:o=e.sent,l=5e3,p=1,d=1,o["pageSize"]=l,f=[],b="";case 11:if(!(d<=p)){e.next=32;break}return o["page"]=d,e.next=15,Object(R["a"])({url:r,method:"get",data:o});case 15:if(h=e.sent,k=a["a"].getValue(h,"total_count",0),b=a["a"].getValue(h,"timestamp",""),0!==parseInt(k)){e.next=20;break}return e.abrupt("break",32);case 20:return p=i["a"].buildMaxPage(k,l),e.next=23,B(h,d,f,t,s);case 23:if(m=e.sent,f=m["fileArray"],d%5!==0&&d!==p){e.next=29;break}return e.next=28,V(f,b,n);case 28:f=[];case 29:d++,e.next=11;break;case 32:if(!b){e.next=35;break}return e.next=35,u["a"].replaceTimeStamp({type:n,time_stamp:b});case 35:e.next=41;break;case 37:e.prev=37,e.t0=e["catch"](0),console.error(e.t0),Object(c["b"])(e.t0);case 41:case"end":return e.stop()}}),e,null,[[0,37]])}))),O.apply(this,arguments)}function B(e,t,n,r,a,i){return I.apply(this,arguments)}function I(){return I=Object(r["a"])(regeneratorRuntime.mark((function e(t,n,r,i,u,c){var o,l;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:console.info("data",t),e.prev=1,e.t0=regeneratorRuntime.keys(t);case 3:if((e.t1=e.t0()).done){e.next=9;break}return o=e.t1.value,l=t[o],e.delegateYield(regeneratorRuntime.mark((function e(){var t,p,d,f,b,h,k,m,g,_,x,v,y,j,R;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:e.t0=o,e.next=e.t0===i?3:"timestamp"===e.t0?34:36;break;case 3:t={result:[]},p={operation:"insert",table:i,onconflict:"replace",rows:[]},d={operation:"delete",table:i,condition:""},f=[],b=[],e.t1=regeneratorRuntime.keys(l);case 9:if((e.t2=e.t1()).done){e.next=26;break}if(h=e.t2.value,"increment"!==h){e.next=19;break}if(k=l[h],0!==k.length){e.next=15;break}return e.abrupt("continue",9);case 15:for(g in m=function(e){var t=k[e],n={};u.map((function(e){n[e]=a["a"].getValue(t,e,"")})),b.push(Object.assign({},n))},k)m(g);e.next=24;break;case 19:if("delete"!==h){e.next=24;break}if(_=l[h],0!==_.length){e.next=23;break}return e.abrupt("continue",9);case 23:for(x in _)v=_[x],y=a["a"].getValue(v,"id",""),f.push(y);case 24:e.next=9;break;case 26:return p["rows"]=b,f.length>0&&(d["condition"]="id in ('"+f.join("','")+"')",t["result"].push(d)),t["result"].push(p),j=(new Date).getTime(),R=Object(s["b"])()+"".concat(i,"Page").concat(n,"_").concat(j,".json"),e.next=33,w.createFile(R,JSON.stringify(t),(function(){r.push(R)}));case 33:return e.abrupt("break",36);case 34:return c=l,e.abrupt("break",36);case 36:case"end":return e.stop()}}),e)}))(),"t2",7);case 7:e.next=3;break;case 9:return e.abrupt("return",{fileArray:r,timeStamp:c});case 12:e.prev=12,e.t3=e["catch"](1),console.error(e.t3);case 15:case"end":return e.stop()}}),e,null,[[1,12]])}))),I.apply(this,arguments)}function V(e,t,n){var r=Object(l["b"])();return new Promise((function(t,n){window.MDownloader.downloadDataFromFiles(e,r,{error:function(e){console.log("obj",e),n(e)},finish:function(n,r){e.map((function(e){window.MFileManager.deleteFile(e)})),t(!0)}})}))}},f89a:function(e,t,n){"use strict";n("6d57"),n("e44b"),n("5f54"),n("6a61");var r=n("2e91"),a=(n("f548"),n("6178")),i=n("fae6"),u=n("1834"),c="kf_check_task_problem_scope";function s(e){var t=i["a"].getKeysAndValues(e),n=t.fields,r=t.values;return a["a"].replace(c,{fields:n,values:r})}function o(e){var t=i["a"].getKeysAndValues(e),n=t.fields,r=t.values;return a["a"].insert(c,{fields:n,values:r})}function l(e){return a["a"].delete(c,{condition:e})}function p(e,t){return a["a"].select(c,{condition:e,suffix:t})}function d(e){var t="select  ctps.id, ctps.check_task_problem_id, ctps.proj_id, ctps.sub_proj_id, ctps.building_id, ctps.room_id, tr.product_guid as product_guid from kf_check_task_problem_scope ctps  inner join t_room tr on ctps.room_id = tr.id  where ctps.check_task_problem_id = ?";return u["a"].query(t,[e])}var f={replaceCheckTaskProblemsScope:s,insertCheckTaskProblemScope:o,removeCheckTaskProblemScope:l,businessType:c,getCheckTaskProblemScopeList:p,getCheckTaskProblemScopeListWithProType:d},b=n("582f"),h=n("4c60"),k=n("f893"),m=n("50f2"),g="off-line-check-task-api/download-data/check-task-problem-scope";function _(e){return f.replaceCheckTaskProblemsScope(e)}function x(e){var t={id:e};return f.removeCheckTaskProblemScope(t)}function v(e){return y.apply(this,arguments)}function y(){return y=Object(r["a"])(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=Object.assign({},t),""===i["a"].getValue(n,"id","")&&(n["id"]=Object(b["a"])()),e.next=4,f.insertCheckTaskProblemScope(n);case 4:if(r=e.sent,!r){e.next=8;break}return e.next=8,Object(h["c"])(n["id"],f.businessType);case 8:return e.abrupt("return",r);case 9:case"end":return e.stop()}}),e)}))),y.apply(this,arguments)}function w(e,t){return f.getCheckTaskProblemScopeList(e,t)}function j(e){return f.getCheckTaskProblemScopeListWithProType(e)}function R(e){return T.apply(this,arguments)}function T(){return T=Object(r["a"])(regeneratorRuntime.mark((function e(t){var n,r,a,u,c,s,o,l,p;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(void 0!==t&&0!==t.length){e.next=2;break}return e.abrupt("return",!1);case 2:e.t0=regeneratorRuntime.keys(t);case 3:if((e.t1=e.t0()).done){e.next=39;break}if(n=e.t1.value,"increment"!==n){e.next=23;break}if(r=t[n],0!==r.length){e.next=9;break}return e.abrupt("continue",3);case 9:e.t2=regeneratorRuntime.keys(r);case 10:if((e.t3=e.t2()).done){e.next=21;break}if(a=e.t3.value,u=r[a],c=i["a"].getValue(u,"id",""),""!==c){e.next=16;break}return e.abrupt("continue",10);case 16:return s={id:c,check_task_problem_id:i["a"].getValue(u,"check_task_problem_id",""),proj_id:i["a"].getValue(u,"proj_id",""),sub_proj_id:i["a"].getValue(u,"sub_proj_id",""),building_id:i["a"].getValue(u,"building_id",""),room_id:i["a"].getValue(u,"room_id","")},e.next=19,_(s);case 19:e.next=10;break;case 21:e.next=37;break;case 23:if("delete"!==n){e.next=37;break}if(o=t[n],0!==o.length){e.next=27;break}return e.abrupt("continue",3);case 27:e.t4=regeneratorRuntime.keys(o);case 28:if((e.t5=e.t4()).done){e.next=37;break}if(l=e.t5.value,p=i["a"].getValue(o[l],"id",""),""!==p){e.next=33;break}return e.abrupt("continue",28);case 33:return e.next=35,x(p);case 35:e.next=28;break;case 37:e.next=3;break;case 39:case"end":return e.stop()}}),e)}))),T.apply(this,arguments)}function O(e){if(0===e.length)return[];var t='id in ("'+e.join('","')+'")';return w(t,"")}function B(e){return I.apply(this,arguments)}function I(){return I=Object(r["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n={check_task_problem_id:t},e.abrupt("return",w(n,""));case 2:case"end":return e.stop()}}),e)}))),I.apply(this,arguments)}function V(e){return P.apply(this,arguments)}function P(){return P=Object(r["a"])(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n={check_task_problem_id:t},e.next=3,f.removeCheckTaskProblemScope(n);case 3:return r=e.sent,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)}))),P.apply(this,arguments)}function C(e){return D.apply(this,arguments)}function D(){return D=Object(r["a"])(regeneratorRuntime.mark((function e(t){var n,r,a,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n={check_task_problem_id:t},e.next=3,w(n,"");case 3:if(r=e.sent,0!==r.length){e.next=6;break}return e.abrupt("return",!0);case 6:a=0;case 7:if(!(a<r.length)){e.next=14;break}return i=r[a]["id"],e.next=11,Object(h["b"])(i,f.businessType);case 11:a++,e.next=7;break;case 14:case"end":return e.stop()}}),e)}))),D.apply(this,arguments)}function A(){return S.apply(this,arguments)}function S(){return S=Object(r["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(k["a"])(f.businessType,m["a"].checkTaskProblemScopeType,g,["id","check_task_problem_id","proj_id","sub_proj_id","building_id","room_id"]);case 2:case"end":return e.stop()}}),e)}))),S.apply(this,arguments)}t["a"]={operationTaskProblemScope:R,insertCheckTaskProblemScope:v,businessType:f.businessType,getTaskProblemScopeListByIds:O,getTaskProblemScopeListByProblemId:B,deleteScopeWithCheckTaskProblemId:V,saveDeleteScopeIdToIncrementWithProblemId:C,paginationSaveNewData:A,getScopeListWithProductType:j}},fae6:function(e,t,n){"use strict";function r(e){var t=[],n=[];for(var r in e)t.push(r),n.push(e[r]);return{fields:t,values:n}}function a(e,t,n){return void 0===n&&(n=""),e[t]||n}t["a"]={getKeysAndValues:r,getValue:a}},fea3:function(e,t,n){"use strict";var r=n("e7ad"),a=n("e46b"),i=n("bf16"),u=n("ef91"),c=n("f71f"),s=n("206c"),o=n("a73b"),l=n("fb68"),p=n("238a"),d=n("d0c5"),f=n("399f"),b=n("1e5b");e.exports=function(e,t,n,h,k,m){var g=r[e],_=g,x=k?"set":"add",v=_&&_.prototype,y={},w=function(e){var t=v[e];i(v,e,"delete"==e||"has"==e?function(e){return!(m&&!l(e))&&t.call(this,0===e?0:e)}:"get"==e?function(e){return m&&!l(e)?void 0:t.call(this,0===e?0:e)}:"add"==e?function(e){return t.call(this,0===e?0:e),this}:function(e,n){return t.call(this,0===e?0:e,n),this})};if("function"==typeof _&&(m||v.forEach&&!p((function(){(new _).entries().next()})))){var j=new _,R=j[x](m?{}:-0,1)!=j,T=p((function(){j.has(1)})),O=d((function(e){new _(e)})),B=!m&&p((function(){var e=new _,t=5;while(t--)e[x](t,t);return!e.has(-0)}));O||(_=t((function(t,n){o(t,_,e);var r=b(new g,t,_);return void 0!=n&&s(n,k,r[x],r),r})),_.prototype=v,v.constructor=_),(T||B)&&(w("delete"),w("has"),k&&w("get")),(B||R)&&w(x),m&&v.clear&&delete v.clear}else _=h.getConstructor(t,e,k,x),u(_.prototype,n),c.NEED=!0;return f(_,e),y[e]=_,a(a.G+a.W+a.F*(_!=g),y),m||h.setStrong(_,e,k),_}}}]);