(window["webpackJsonp_module_entry_gcxt_"]=window["webpackJsonp_module_entry_gcxt_"]||[]).push([["chunk-b3a62eee"],{"769b":function(t,e,n){"use strict";n.r(e);var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"page-group"},[n("div",{staticClass:"authorize-contract page page-current"},[n("v-header",{attrs:{title:"添加合同"}},[n("span",{staticClass:"btn-next",attrs:{slot:"right",type:"button"},on:{click:t.submit},slot:"right"},[t._v("\n        提交\n      ")])]),n("div",{staticClass:"content"},[n("xt-wizard",{attrs:{wizard:t.wizard,current:t.current}}),n("div",{staticClass:"fieldset yf-phone"},[n("div",{staticClass:"field"},[n("span",{staticClass:"field-label"},[t._v("合同负责人手机号")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.phone,expression:"phone"}],attrs:{type:"tel",placeholder:"请输入手机号"},domProps:{value:t.phone},on:{input:function(e){e.target.composing||(t.phone=e.target.value)}}})])]),t._l(t.contract,(function(e,o){return n("div",{key:o,staticClass:"fieldset"},[n("div",{staticClass:"authorize-contract-count"},[t._v("合同"+t._s(o+1))]),o?n("i",{staticClass:"iconfont icon-_shanchu-1",on:{click:function(e){t.removeContract(o)}}}):t._e(),n("div",{staticClass:"field"},[n("span",{staticClass:"field-label"},[t._v("合同信息")]),n("input",{attrs:{type:"text",placeholder:"合同名称(至少3个字)"},domProps:{value:e},on:{input:function(e){t.onContractChange(e,o)}}})])])})),n("div",{staticClass:"fieldset",on:{click:t.addContract}},[t._m(0)])],2)],1)])},a=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"field"},[n("span",{staticClass:"btn-1"},[n("i",{staticClass:"iconfont icon--jia"}),t._v("\n            添加合同\n          ")]),n("span",{staticClass:"btn-2"},[t._v("(点击可申请多份合同)")])])}],i=(n("f548"),n("2b45"),n("3d6f")),c=n("36c8"),r=n("9254"),s=n("e589"),d=n("09b2"),l=n("af0b"),u=n("a740"),p={name:"AuthorizeContract",components:{AuthorizeCompanyListYf:c["a"],AuthorizeProjectListYf:r["a"],AuthorizeUserList:s["a"],AuthorizePicture:d["a"]},data:function(){var t=this.$store.state.authInfo,e=t.current_role,n=t.current_station,o=t.tenant_code,a=t.tenant_id,c=t.yunfuwu_role_id,r=i["e"],s=r[1].route;if(!o){var d=Object(u["a"])();o=d.tenant_code,a=d.tenant_id,e=d.role_code,r=r.slice(2),s="/authorize/overview/contract"}return{wizard:r,current:r[2],go_back_link:s,tenant_code:o,tenant_id:a,current_role:e,current_station:n,phone:"",contract:[""],yunfuwu_role_id:c}},methods:{submit:function(){var t=this,e=this.current_role,n=this.current_station,o=this.tenant_code,a=this.tenant_id,i=this.phone,c=this.yunfuwu_role_id,r=this.contract.map((function(t){return t.trim()})),s=r.map((function(t,e){var n="empty"+Math.random().toString().substr(-4);return{contract_id:n,contract_desc:"合同"+(e+1),contract_no:t}})),d=s.every((function(e){var n=e.contract_no;if(!n||n.length<3)t.sui.toast("请输入合同信息(至少3个字)");else{if(r.indexOf(n)===r.lastIndexOf(n))return!0;t.sui.toast("合同信息有重复")}}));if(d)return/^\d{8,}$/.test(this.phone)?o?Object(l["w"])({__tenant_id:a,tenant_code:o,role_code:1004,user_code:i,station_name:n}).then((function(t){return Object(l["b"])({__tenant_id:a,tenant_code:o,role_code:e,contract_detail:s,yunfuwu_role_id:c,sp_user_code:i,station_name:n})})).then((function(e){t.$router.replace({path:"/authorize/overview/process"})})).catch((function(e){e.message&&t.sui.toast(e.message)})):this.sui.toast("参数错误"):this.sui.toast("请录入正确的项目管理员手机号")},onContractChange:function(t,e){this.contract[e]=t.target.value},removeContract:function(t){this.contract.splice(t,1)},addContract:function(){this.contract.push("")}}},f=p,h=(n("d83e"),n("c701")),_=Object(h["a"])(f,o,a,!1,null,"5616b964",null);e["default"]=_.exports},d5e4:function(t,e,n){var o=n("f5dc");"string"===typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);var a=n("85cb").default;a("b7103108",o,!0,{sourceMap:!1,shadowMode:!1})},d83e:function(t,e,n){"use strict";n("d5e4")},f5dc:function(t,e,n){e=t.exports=n("690e")(!1),e.push([t.i,".gcxt[data-v-5616b964] :export{colorPrimary:#2c5cf7;headerBackgroundColor:#fff;headerTextColor:#333}.gcxt .authorize-contract .content .yf-phone[data-v-5616b964]{margin-top:14px}.gcxt .authorize-contract .content .fieldset[data-v-5616b964]{position:relative}.gcxt .authorize-contract .content .fieldset .icon-_shanchu-1[data-v-5616b964]{position:absolute;font-size:15px;color:#999;right:10px;top:10px}.gcxt .authorize-contract .content .fieldset:last-child .field[data-v-5616b964]{border-top:none}.gcxt .authorize-contract .content .field[data-v-5616b964]{background:#fff;padding-left:15px;overflow:hidden;white-space:nowrap;position:relative;border-top:1px solid #f3f3f3;border-bottom:1px solid #f3f3f3}.gcxt .authorize-contract .content .field-label[data-v-5616b964]{display:inline-block;font-size:16px;vertical-align:middle;line-height:55px;min-width:30%;padding-right:10px}.gcxt .authorize-contract .content .field input[data-v-5616b964]{outline:none;border:none;font-size:15px;vertical-align:middle}.gcxt .authorize-contract .content .field .btn-1[data-v-5616b964]{vertical-align:middle;line-height:56px;color:#3492e9;font-size:16px;padding-left:0}.gcxt .authorize-contract .content .field .btn-1 .iconfont[data-v-5616b964]{font-size:14px}.gcxt .authorize-contract .content .field .btn-2[data-v-5616b964]{vertical-align:middle;line-height:56px;color:#f90;font-size:16px}.gcxt .authorize-contract-count[data-v-5616b964]{text-indent:15px;line-height:40px;font-size:13px;color:#999}.gcxt .authorize-contract .btn-next[data-v-5616b964]{color:#2c5cf7;padding:20px 15px;position:relative;right:-15px;z-index:20;font-size:16px;background-color:transparent;outline:none;border:none}",""])}}]);