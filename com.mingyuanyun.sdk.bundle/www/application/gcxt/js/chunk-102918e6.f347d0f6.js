(window["webpackJsonp_module_entry_gcxt_"]=window["webpackJsonp_module_entry_gcxt_"]||[]).push([["chunk-102918e6"],{"6cf7":function(t,e,a){"use strict";a("cd2f")},"8fd5":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"page-group"},[a("div",{staticClass:"page page-current"},[a("v-header",{attrs:{title:"购买充值卡","back-action":t.goBack}}),a("div",{staticClass:"top bb"},[a("div",{staticClass:"person"},[a("div",{staticClass:"person-col"},[t.userinfo.photo?a("div",{staticClass:"person-photo",style:{"background-image":"url("+t.userinfo.photo+")"}}):a("div",{staticClass:"txt-pic",style:t.userInfoShow.style,domProps:{textContent:t._s(t.userInfoShow.name_first)}})]),a("div",{staticClass:"person-col person-txt"},[a("dl",[a("dt",{domProps:{textContent:t._s(t.userName)}}),a("dd",{staticStyle:{"word-break":"break-all"},attrs:{id:"expired_time_text"},domProps:{textContent:t._s(t.expired_time_text)}})])]),a("div",{staticClass:"person-col person-btn"},[a("app-button",{attrs:{size:"small",plain:""},on:{click:t.goEditCard}},[t._v("购卡")])],1)]),a("div",{staticClass:"buttons-tab"},[a("span",{staticClass:"tab-link button br",class:{current:0==t.currentStatus},on:{click:function(e){t.selectStatus(0)}}},[t._v("\n          全部订单\n        ")]),a("span",{staticClass:"tab-link button br",class:{current:1==t.currentStatus},on:{click:function(e){t.selectStatus(1)}}},[t._v("\n          待支付\n        ")]),a("span",{staticClass:"tab-link button br",class:{current:2==t.currentStatus},on:{click:function(e){t.selectStatus(2)}}},[t._v("\n          已支付\n        ")]),a("span",{staticClass:"tab-link button br",class:{current:3==t.currentStatus},on:{click:function(e){t.selectStatus(3)}}},[t._v("\n          待开票\n        ")]),a("span",{staticClass:"tab-link button",class:{current:4==t.currentStatus},on:{click:function(e){t.selectStatus(4)}}},[t._v("\n          已开票\n        ")])])]),a("div",{staticClass:"content"},[a("div",[a("div",{staticClass:"tab",attrs:{id:"order"}},[a("div",{staticClass:"kv-list kv-ml-list"},[a("ul",t._l(t.renderList,(function(e,i){return a("li",{key:i,staticClass:"linkto-order",on:{click:function(a){t.goDetail(e)}}},[a("div",{staticClass:"ii bb"},[a("div",{staticClass:"kv"},[a("div",{staticClass:"k k-4em"},[t._v("订单编号")]),a("div",{staticClass:"v",domProps:{textContent:t._s(e.indent_code)}}),"待支付"==e.pay_status?[a("div",{staticClass:"fz14 linkto-pay",on:{click:function(a){a.stopPropagation(),t.goDetail(e,{action:"pay"})}}},[t._v("\n                        待支付\n                      ")]),a("div",{staticClass:"order_action"},[a("div",{staticClass:"action del_order",staticStyle:{width:"2rem",padding:"0","text-align":"center"},on:{click:function(a){a.stopPropagation(),t.delOrder(e)}}},[t._v("\n                          删除\n                        ")])])]:"待开票"==e.pay_status?[a("div",{staticClass:"fz14 color-warning"},[t._v("待开票")]),a("div",{staticClass:"order_action"})]:"已支付"==e.pay_status?[a("div",{staticClass:"fz14 color-success"},[t._v("已付款")])]:"已开票"==e.pay_status?[a("div",{staticClass:"color-success fz14"},[t._v("已开票")]),"电子普通发票"==e.invoice_type?a("div",{staticClass:"order_action"},[e.e_invoice_path&&e.e_mail?a("div",{staticClass:"action send_email",on:{click:function(a){a.stopPropagation(),t.sendEmail(e)}}},[t._v("\n                          发送邮箱\n                        ")]):t._e(),e.e_invoice_path?a("div",{staticClass:"action review_invoice",on:{click:function(a){a.stopPropagation(),t.lookInvoice(e)}}},[t._v("\n                          查看发票\n                        ")]):t._e()]):a("span",{staticClass:"review-express",on:{click:function(a){a.stopPropagation(),t.lookExpress(e)}}},[t._v("查看物流\n                      ")])]:t._e()],2),a("div",{staticClass:"kv"},[a("div",{staticClass:"k k-4em"},[t._v("订单金额")]),a("div",{staticClass:"v"},[t._v(t._s(e.paid)+"元")])]),a("div",{staticClass:"kv"},[a("div",{staticClass:"k k-4em"},[t._v("订单日期")]),a("div",{staticClass:"v",domProps:{textContent:t._s(e.create_time)}})])])])}))),a("div",{directives:[{name:"show",rawName:"v-show",value:t.renderList.length&&t.turnPage&&!t.loading,expression:"renderList.length && turnPage && !loading"}],attrs:{id:"turnPage"},on:{click:t.lookMore}},[t._v("\n              点击查看更多\n            ")])]),t.renderList.length||t.loading?t._e():a("no-record",{attrs:{txt:t.emptyText}})],1)])])],1),a("div",{ref:"sendMailDialogCntr"},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.fullMask,expression:"fullMask"}],ref:"sendMailDialog",staticClass:"full-mask"},[a("div",{staticClass:"send_email_wrap"},[a("div",{staticClass:"send_title"},[t._v("请确认邮箱地址")]),a("div",{staticClass:"send_content"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.email_input,expression:"email_input"}],staticClass:"email_input",attrs:{type:"email",name:"email_input",maxlength:"50",placeholder:"请输入电子邮箱"},domProps:{value:t.email_input},on:{input:function(e){e.target.composing||(t.email_input=e.target.value)}}}),t._m(0)]),a("div",{staticClass:"send_antion_wrap"},[a("button",{staticClass:"cancel_send",on:{click:t.cancel}},[t._v("取消")]),a("button",{staticClass:"submit_send",on:{click:t.submit_send}},[t._v("发送")])])])])])])},n=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"clear_email hide"},[a("span",{staticClass:"iconfont icon-close"})])}],s=(a("ac67"),a("32ea"),a("1bc7"),a("0e2e")),o=(a("a450"),a("34f5")),r=a("4ae5"),c=a("f2de"),d=a("dbf5"),l=a("db68"),u=a("2ca8"),p=a("c943"),f=a("a740"),b=a("6485");function g(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,i)}return a}function v(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?g(Object(a),!0).forEach((function(e){Object(o["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):g(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var _={name:"BuyList",components:{noRecord:b["a"]},data:function(){return{loading:!1,currentStatus:sessionStorage.getItem("buy_active_status")||0,MFileManagerFlag:!1,page_size:20,page_index:1,status:sessionStorage.getItem("buy_active_status")||0,fullMask:!1,turnPage:!0,renderList:[],emptyText:"你还没有任何订单",expired_time_text:"",email_input:"",sendData:{},userInfoShow:{name_first:"",expired_time:"",overdue:"",style:{}}}},computed:v(v({},Object(c["b"])({userinfo:function(t){return t.userInfo.data},cur_tenant:function(t){return t.userInfo.tenantInfo}})),{},{role_code:function(t){return t.userInfo.tenantInfo.role_code},userName:function(){return Object(f["a"])("xt_user_name")}}),mounted:function(){var t=this,e=v({},t.userinfo),a=v({},t.cur_tenant);this.userInfoShow.name_first=e.name&&e.name.substr(0,1),this.userInfoShow.expired_time=d["a"].format(a.expired_time,"yyyy-MM-dd"),this.userInfoShow.overdue=Object(l["e"])(e.expired_time,d["a"].format("yyyy-MM-dd")),this.userInfoShow.style={"background-color":Object(l["c"])(this.userinfo)},this._set_expired_time(),this.getData(),"MFileManager"in window&&(this.MFileManagerFlag=!0),this.$refs.sendMailDialog&&document.body.appendChild(this.$refs.sendMailDialog)},beforeDestroy:function(){this.$refs.sendMailDialog&&this.$refs.sendMailDialogCntr.appendChild(this.$refs.sendMailDialog)},methods:{_set_expired_time:function(){var t=v({},this.cur_tenant),e=t.overdue_projects||[],a=e.some((function(t){return!t.overdue})),i="";i=t.original_expired_time?t.overdue?a?"项目用户":"账号过期时间: "+t.expired_time:"账号到期时间: "+t.expired_time:a?"项目用户":t.overdue?"账号过期时间: "+t.expired_time:"账号到期时间: "+t.expired_time,this.expired_time_text=i},goBack:function(){sessionStorage.removeItem("buy_active_status"),this.$router.go(-1)},getData:function(){var t=this,e=this;e.loading=!0,e.$store.dispatch(r["h"],{page_index:e.page_index,page_size:e.page_size,status:e.status,showLoading:!e.loading}).then((function(a){if(t.loading=!1,a&&a.data.length>0){var i=[];i=1==e.page_index?[]:Object(s["a"])(e.renderList),e.renderList=i.concat(a.data),a.record_count<=e.page_index*e.page_size?e.turnPage=!1:e.turnPage=!0}else if(1==e.page_index){e.renderList=[];var n=0==e.status?"你还没有任何订单":"你还没有相关类型订单";e.emptyText=n}}))},lookMore:function(){this.page_index+=1,this.getData()},goEditCard:function(){this.$router.push("/buy/order_edit")},selectStatus:function(t){var e=this;e.currentStatus=t,e.status!==t&&(sessionStorage.setItem("buy_active_status",t),e.turnPage=!1,e.status=t,e.page_index=1,e.getData())},goDetail:function(t,e){var a="/buy/order_detail?indent_id=".concat(t.indent_id,"&");e&&Object.keys(e).forEach((function(t){a+="".concat(t,"=").concat(e[t])})),this.$router.push(a)},sendEmail:function(t){console.log("发送邮件"),this.email_input=t.email,this.sendData=t,this.fullMask=!0},submit_send:function(){var t=this;if(this.email_input){var e=/^[a-zA-Z0-9_.-]+@[a-zA-Z0-9-]+(\.[a-zA-Z0-9-]+)*\.[a-zA-Z0-9]{2,6}$/;e.test(this.email_input)?(this.fullMask=!1,Object(p["h"])({to_email:this.sendData.e_mail,indent_id:this.sendData.indent_id}).then((function(e){t.sui.toast("发送成功")}))):this.sui.toast("请输入正确的邮箱地址")}else this.sui.toast("请输入邮箱")},cancel:function(){this.fullMask=!1},lookInvoice:function(t){var e=t.e_invoice_path;this.OPEN_NEW_FILE(e)},lookExpress:function(t){var e=t.indent_id;this.$router.push({name:"buyExpress",query:{indent_id:e}})},delOrder:function(t){var e=this,a=t.indent_id;a&&(this.sui.modal({text:"是否确认删除该订单？删除后不可恢复，需重新购卡。",title:"删除",buttons:[{text:"取消"},{text:"确认删除",onClick:function(){Object(u["d"])({indent_id:a}).then((function(){e.page_index=1,e.getData()}))}}],extraClass:"bg_white"}),console.log(t))}}},m=_,x=(a("6cf7"),a("5d22")),h=Object(x["a"])(m,i,n,!1,null,"552fab2a",null);e["default"]=h.exports},cd2f:function(t,e,a){var i=a("ce25");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var n=a("85cb").default;n("d8a658b8",i,!0,{sourceMap:!1,shadowMode:!1})},ce25:function(t,e,a){e=t.exports=a("690e")(!1),e.push([t.i,'.gcxt[data-v-552fab2a] :export{colorPrimary:#0268b3;headerBackgroundColor:#fff;headerTextColor:#333}.gcxt .bg-blue[data-v-552fab2a]{background:-webkit-gradient(linear,left top,right top,from(#0268b3),to(rgba(2,104,179,.8)));background:linear-gradient(90deg,#0268b3 0,rgba(2,104,179,.8))}.gcxt .top[data-v-552fab2a]{position:absolute;left:0;width:100%;top:2.2rem;z-index:1}.gcxt .xt-ios .top[data-v-552fab2a]{top:2.9rem}.gcxt .bar[data-v-552fab2a]:after{display:none}.gcxt .person[data-v-552fab2a]{background:#fff;display:-webkit-box;-webkit-box-align:center;padding:0 .75rem;height:5.5rem;margin-bottom:10px}.gcxt .person-txt[data-v-552fab2a]{padding:0 .75rem;-webkit-box-flex:1}.gcxt .txt-pic[data-v-552fab2a]{line-height:1em;font-size:1.2rem;padding:11px;border-radius:100px;background:#ffb139;color:#fff;border:1px solid #fff}.gcxt .person-photo[data-v-552fab2a]{width:48px;height:48px;border-radius:50%;border:2px solid #fff;background-size:cover;background-position:50%}.gcxt .xt-ios .person-photo[data-v-552fab2a]{border-width:1.5px}.gcxt .person-txt dl[data-v-552fab2a]{margin:0;padding:0}.gcxt .person-txt dt[data-v-552fab2a]{font-size:.85rem;color:#333}.gcxt .person-txt dd[data-v-552fab2a]{margin-top:5px;font-size:.65rem;color:#333}.gcxt .btn-white[data-v-552fab2a],.gcxt .btn-white[data-v-552fab2a]:active{border-color:#fff;color:#fff}.gcxt .btn-white[data-v-552fab2a]:active{background:hsla(0,0%,100%,.2)}.gcxt .content[data-v-552fab2a]{top:10.25rem!important}.gcxt .xt-ios .content[data-v-552fab2a]{top:10.95rem!important}.gcxt .top .buttons-tab .button[data-v-552fab2a]{height:2rem;line-height:2rem}.gcxt .top .buttons-tab dl[data-v-552fab2a]{margin-top:.7rem}.gcxt .top .buttons-tab dt[data-v-552fab2a]{font-size:1rem;color:#0268b3;font-weight:700;margin-bottom:.4rem}.gcxt .top .buttons-tab dd[data-v-552fab2a]{color:#999;font-size:.6rem}.gcxt .show-used-card[data-v-552fab2a]{display:none;padding:.6rem 0;font-size:.65rem;color:#999;background:#f5f5f9;text-align:center;text-decoration:underline}.gcxt .tab-link[data-v-552fab2a]:after{display:none}.gcxt .tab-link.current[data-v-552fab2a]{color:#0268b3}.gcxt .tab-link.current[data-v-552fab2a]:before{content:"";display:block;position:absolute;width:30%;bottom:-2px;height:2px;left:35%;background-color:#0268b3}.gcxt .linkto-pay[data-v-552fab2a]{display:block;line-height:27px;height:27px;background:-webkit-gradient(linear,left top,right top,from(#0268b3),to(rgba(2,104,179,.8)));background:linear-gradient(90deg,#0268b3 0,rgba(2,104,179,.8));color:#fff;border-radius:.1rem}.gcxt .kv .fz14[data-v-552fab2a]{-webkit-box-sizing:border-box;box-sizing:border-box;width:2.8rem;text-align:center}.gcxt .review-express[data-v-552fab2a]{width:2.8rem;height:1.35rem;line-height:1.35rem;font-size:12px;color:#0268b3;text-align:center}.gcxt .order_action[data-v-552fab2a],.gcxt .review-express[data-v-552fab2a]{position:absolute;right:.75rem;bottom:.75rem}.gcxt .order_action[data-v-552fab2a]{font-size:11px;width:10rem;line-height:.9rem;height:1rem;overflow:hidden}.gcxt .order_action .action[data-v-552fab2a]{float:right;padding:0 .25rem;border-radius:2px;border:1px solid #d1d1d6;margin-left:.25rem;font-size:11px;line-height:18px;height:20px;color:#69696e}.gcxt .page-group .buttons-tab[data-v-552fab2a]:after{display:none}.gcxt #turnPage[data-v-552fab2a]{background-color:transparent;text-align:center;color:#999;line-height:36px;font-size:14px}.gcxt .empty-list[data-v-552fab2a]{display:block;margin-top:110px}.gcxt .empty-list-text[data-v-552fab2a]{margin-top:-.3rem}.gcxt .send_antion_wrap button[data-v-552fab2a]:last-child{border-left:1px solid #e5e5ea;color:#0268b3}.gcxt .person-btn[data-v-552fab2a] .app-btn{min-width:80px}',""])}}]);