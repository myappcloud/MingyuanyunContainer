(window["webpackJsonp_module_entry_gcxt_"]=window["webpackJsonp_module_entry_gcxt_"]||[]).push([["chunk-aac723c8"],{"0937":function(t,e,a){var o=a("ce37"),n=a("b32a"),i=a("2cf0"),r="Expected a function",c=Math.max,s=Math.min;function d(t,e,a){var d,l,u,f,p,h,b=0,g=!1,m=!1,y=!0;if("function"!=typeof t)throw new TypeError(r);function x(e){var a=d,o=l;return d=l=void 0,b=e,f=t.apply(o,a),f}function v(t){return b=t,p=setTimeout(_,e),g?x(t):f}function k(t){var a=t-h,o=t-b,n=e-a;return m?s(n,u-o):n}function w(t){var a=t-h,o=t-b;return void 0===h||a>=e||a<0||m&&o>=u}function _(){var t=n();if(w(t))return C(t);p=setTimeout(_,k(t))}function C(t){return p=void 0,y&&d?x(t):(d=l=void 0,f)}function j(){void 0!==p&&clearTimeout(p),b=0,d=h=l=p=void 0}function T(){return void 0===p?f:C(n())}function O(){var t=n(),a=w(t);if(d=arguments,l=this,h=t,a){if(void 0===p)return v(h);if(m)return p=setTimeout(_,e),x(h)}return void 0===p&&(p=setTimeout(_,e)),f}return e=i(e)||0,o(a)&&(g=!!a.leading,m="maxWait"in a,u=m?c(i(a.maxWait)||0,e):u,y="trailing"in a?!!a.trailing:y),O.cancel=j,O.flush=T,O}t.exports=d},2077:function(t,e,a){var o=a("5454");e=t.exports=a("690e")(!1),e.push([t.i,".gcxt[data-v-0db18ec5] :export{colorPrimary:#2c5cf7;headerBackgroundColor:#fff;headerTextColor:#333}[data-v-0db18ec5] header.header-component{z-index:999;background:#2c5cf7;border-bottom:none}[data-v-0db18ec5] header.header-component .icon,[data-v-0db18ec5] header.header-component .right-content,[data-v-0db18ec5] header.header-component .title{color:#fff}.gcxt .message-flag[data-v-0db18ec5]{margin-left:5px;display:inline-block;width:15px;height:15px;border-radius:50%;color:#2c5cf7;background:#fff;vertical-align:middle;font-size:12px}.gcxt .container[data-v-0db18ec5]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;overflow:auto;overflow-y:scroll;-webkit-overflow-scrolling:touch}.gcxt .container .scroll-view[data-v-0db18ec5]{-webkit-box-flex:1;-ms-flex:1;flex:1}.gcxt .scroll-view[data-v-0db18ec5]{position:relative;height:100%}.gcxt .bar[data-v-0db18ec5]:after{display:none}.gcxt .review[data-v-0db18ec5]{position:relative;background:#2c5cf7;color:#fff;font-size:16px;font-weight:200}.gcxt .review .review-item[data-v-0db18ec5]{padding:10px 15px;line-height:25px;height:45px;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between}.gcxt .review .review-item .label[data-v-0db18ec5]{font-size:13px}.gcxt .review .review-item .value[data-v-0db18ec5]{font-size:16px}.gcxt .review .small[data-v-0db18ec5]{font-size:13px}.gcxt .contract[data-v-0db18ec5]{list-style:none;margin:0;padding:0;background:#f5f5f9;overflow:hidden;position:relative}.gcxt .contract-item[data-v-0db18ec5]{margin:15px 0;padding-left:15px;background-color:#fff;border-top:1px solid #eee;border-bottom:1px solid #eee}.gcxt .contract-row[data-v-0db18ec5]{height:45px;padding:10px 0;width:100%;border-top:1px solid #eee;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;-webkit-box-align:center;-ms-flex-align:center;align-items:center;display:-webkit-flex;-webkit-justify-content:space-between;-webkit-align-items:center;color:#8e8e93}.gcxt ._contract-row[data-v-0db18ec5]{height:auto;position:relative;border:none}.gcxt .contract-row[data-v-0db18ec5]:last-child{border-bottom:none}.gcxt .contract-row .label[data-v-0db18ec5]{font-size:13px;overflow:hidden}.gcxt ._contract-row .label[data-v-0db18ec5]{color:#1b1b1b;font-size:15px}.gcxt .contract-row .subtitle[data-v-0db18ec5]{font-size:13px;color:#999}.gcxt .contract-row .more[data-v-0db18ec5]{font-size:13px;color:#ff5f3e}.gcxt .contract-row .amount[data-v-0db18ec5]{color:#ff9400;font-size:16px}.gcxt .contract-row .detail[data-v-0db18ec5]{text-align:right}.gcxt .empty[data-v-0db18ec5]{background-position:50%;background-repeat:no-repeat;background-size:50%;background-image:url("+o(a("7be1"))+");height:16rem}.gcxt .empty-search[data-v-0db18ec5]{background-image:url("+o(a("05a0"))+")}.gcxt .empty .tips[data-v-0db18ec5]{position:relative;top:11rem;left:0;display:block;text-align:center;color:#999;font-size:.75rem}.gcxt .search-bar[data-v-0db18ec5]{width:100%;height:2.2rem;position:absolute;left:0;top:0;padding:8px 10px;overflow:hidden}.gcxt .xt-ios .search-bar[data-v-0db18ec5]{top:.7rem}.gcxt .search-bar-cancel[data-v-0db18ec5]{float:right;-webkit-transition:all .3s;transition:all .3s;-webkit-transform:translateZ(0);transform:translateZ(0);text-align:center;width:2.2rem;height:1.4rem;line-height:1.4rem;color:#fff;opacity:0;margin-right:-3rem}.gcxt .searchModel .search-bar-cancel[data-v-0db18ec5]{opacity:1;margin-right:0}.gcxt .search-bar-input[data-v-0db18ec5]{-webkit-transition:all .3s;transition:all .3s;-webkit-transform:translateZ(0);transform:translateZ(0);margin-right:0;position:relative}.gcxt .searchModel .search-bar-input[data-v-0db18ec5]{margin-right:2.5rem}.gcxt .clear-box[data-v-0db18ec5]{position:absolute;right:-1px;top:0;height:100%;width:30px;z-index:1;padding:3px 0 0 5px}.gcxt .clear-keyword[data-v-0db18ec5]{display:inline-block;font-size:8px;line-height:16px;background-color:#ccc;color:#fff;width:16px;height:16px;border-radius:10px;text-align:center}.gcxt .icon-search[data-v-0db18ec5]{position:absolute;font-size:.9rem;color:#b4b4b4;left:6px;top:50%;z-index:2;-webkit-transform:translate3d(0,-50%,1px);transform:translate3d(0,-50%,1px)}.gcxt #search[data-v-0db18ec5]{display:block;height:1.4rem;padding:0 1.5rem;border:0;outline:0;background-color:#fff;border-radius:.25rem;width:100%}.gcxt .search-result[data-v-0db18ec5]{position:absolute;width:100%;left:0;top:2.2rem;right:0;bottom:0;background-color:#f5f5f9;overflow:auto;-webkit-overflow-scrolling:touch}.gcxt .xt-ios .search-result[data-v-0db18ec5]{top:2.9rem}.gcxt .result[data-v-0db18ec5]{margin:0;padding-left:15px;list-style:none}.gcxt .highlight[data-v-0db18ec5]{color:#3492e9}.gcxt .detail-top[data-v-0db18ec5]{text-align:center;height:40px;line-height:40px;font-size:.6rem}.gcxt .detail-center[data-v-0db18ec5]{display:-webkit-box;display:-ms-flexbox;display:flex}.gcxt .detail-bottom[data-v-0db18ec5]{background:hsla(0,0%,100%,.13);margin-top:10px}.gcxt .flex[data-v-0db18ec5]{display:-webkit-box;display:-ms-flexbox;display:flex}.gcxt .flex-item[data-v-0db18ec5]{display:inline-block;width:50%}.gcxt .money-title[data-v-0db18ec5]{font-size:.65rem;text-align:center}.gcxt .money-value[data-v-0db18ec5]{font-size:.95rem;color:#ffec00;text-align:center}.gcxt .item-right[data-v-0db18ec5]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column}.gcxt .fold[data-v-0db18ec5]{font-size:.65rem;line-height:1;display:inline-block;width:50px;height:35px;line-height:60px}.gcxt .fold[data-v-0db18ec5],.gcxt .more-flag[data-v-0db18ec5]{color:#adadad;text-align:center}.gcxt .more-flag[data-v-0db18ec5]{font-size:.7rem;font-weight:600;width:100%;line-height:0;padding-top:7px}.gcxt .fold span[data-v-0db18ec5]{display:inline-block;-webkit-transition:all .5s;transition:all .5s;font-size:.6rem}.gcxt .foldUp span[data-v-0db18ec5]{transform:rotate(180deg);-ms-transform:rotate(180deg);-moz-transform:rotate(180deg);-webkit-transform:rotate(180deg);-o-transform:rotate(180deg)}.gcxt .fade-enter-active[data-v-0db18ec5],.gcxt .fade-leave-active[data-v-0db18ec5]{opacity:.5}.gcxt .fade-enter[data-v-0db18ec5],.gcxt .fade-enter-active[data-v-0db18ec5],.gcxt .fade-leave-active[data-v-0db18ec5],.gcxt .fade-leave-to[data-v-0db18ec5]{-webkit-transition:opacity .3s;transition:opacity .3s}.gcxt .contract-detail[data-v-0db18ec5]{padding-right:15px}[data-v-0db18ec5] .icon-_sousuo{color:#333}",""])},"2cf0":function(t,e,a){var o=a("ce37"),n=a("77e3"),i=NaN,r=/^\s+|\s+$/g,c=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,d=/^0o[0-7]+$/i,l=parseInt;function u(t){if("number"==typeof t)return t;if(n(t))return i;if(o(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=o(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(r,"");var a=s.test(t);return a||d.test(t)?l(t.slice(2),a?2:8):c.test(t)?i:+t}t.exports=u},"5b86":function(t,e,a){e=t.exports=a("690e")(!1),e.push([t.i,".gcxt[data-v-1310ace2] :export{colorPrimary:#2c5cf7;headerBackgroundColor:#fff;headerTextColor:#333}.gcxt .search-popup-wrapper[data-v-1310ace2] .van-popup--right{width:100%;height:100%}[data-v-1310ace2] .van-search{background:#2c5cf7}[data-v-1310ace2] .van-search .van-cell{padding:5px 8px 5px 0}.gcxt .contract-row[data-v-1310ace2]{width:100%;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;-webkit-box-align:center;-ms-flex-align:center;align-items:center;display:-webkit-flex;-webkit-justify-content:space-between;-webkit-align-items:center;color:#8e8e93}.gcxt .contract-row .label[data-v-1310ace2]{color:#1b1b1b;font-size:15px}.gcxt .search-popup-view[data-v-1310ace2]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;height:100%}.gcxt .icon-_sousuo[data-v-1310ace2]{color:#c8c8c8;font-size:14px}[data-v-1310ace2] .searchBar{background-color:#2c5cf7}[data-v-1310ace2] .searchBar-cancel{color:#fff}.gcxt .search-result[data-v-1310ace2]{-webkit-box-flex:1;-ms-flex:1;flex:1;background-color:#f5f5f9;overflow-y:auto;position:relative}.gcxt .list-block[data-v-1310ace2]{margin:0}.gcxt .list-block+.list-block[data-v-1310ace2]{margin:.75rem 0}.gcxt .content-block-title[data-v-1310ace2]{margin:0;padding-left:.75rem;height:2rem;background:#fff;line-height:2rem;font-size:.65rem;color:#999}.gcxt .more[data-v-1310ace2],[data-v-1310ace2] .match-key{color:#2c5cf7}.gcxt .more[data-v-1310ace2]{height:2rem;padding:0 .75rem;line-height:2rem;background:#fff;font-size:.65rem}.gcxt .more .icon[data-v-1310ace2]{margin-right:5px}.gcxt .search-empty[data-v-1310ace2]{position:absolute;top:50%;-webkit-transform:translateY(-50%);transform:translateY(-50%);width:100%;text-align:center}.gcxt .search-empty img[data-v-1310ace2]{width:40%}.gcxt .search-bar[data-v-1310ace2]{background-color:#fff}.gcxt .search-bar[data-v-1310ace2] .van-search__action>div{color:#666!important}",""])},"77e3":function(t,e,a){var o=a("c20f"),n=a("2f85"),i="[object Symbol]";function r(t){return"symbol"==typeof t||n(t)&&o(t)==i}t.exports=r},"7be1":function(t,e,a){t.exports=a.p+"img/no-contract.b88e5e11.png"},"7e74":function(t,e,a){var o=a("2077");"string"===typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);var n=a("85cb").default;n("436e8f2c",o,!0,{sourceMap:!1,shadowMode:!1})},"7ffa":function(t,e,a){"use strict";a.r(e);var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("page",{staticClass:"contract-account-index-page"},[a("v-header",{attrs:{slot:"header",title:"合同台账"},slot:"header"},[a("template",{slot:"right"},[a("a",{staticClass:"iconfont icon icon-_sousuo",on:{click:t.showSearch}}),a("search",{model:{value:t.searchShowing,callback:function(e){t.searchShowing=e},expression:"searchShowing"}})],1)],2),a("div",{staticClass:"container"},[a("div",{staticClass:"scroll-view"},[a("scroll-refresh",{attrs:{loading:t.loading,finished:t.finished},on:{refresh:t.refresh,more:t.loadList}},[a("div",{directives:[{name:"watermark",rawName:"v-watermark",value:{color:"#537bf9"},expression:"{color:'#537bf9'}"}],staticClass:"review"},[a("div",{staticClass:"detail-top small"},[a("span",[t._v("共"+t._s(t.review.ContractCount)+"份合同")])]),a("div",{staticClass:"flex detail-center"},t._l(t.contractConfig.indexTop,(function(e){return a("div",{key:e.key,staticClass:"flex-item"},[a("div",{staticClass:"money-title"},[t._v("\n                "+t._s(e.name)+"\n                "),a("span",{staticClass:"message-flag",on:{click:function(a){t.modelMessage(e.msg)}}},[t._v("?")])]),a("div",{staticClass:"money-value"},[t._v(t._s(t._f("number")(t.review[e.key])))])])}))),a("div",{staticClass:"detail-bottom"},[t._l(t.contractConfig.indexMiddle,(function(e){return[a("div",{key:e.key,staticClass:"review-item"},[a("span",{staticClass:"label",domProps:{textContent:t._s(e.name)}}),a("span",{staticClass:"value"},[t._v(t._s(t._f("number")(t.review[e.key]))+"\n                  "),e.ratio?[t._v("\n                    ("+t._s(t._f("percent")(t.review[e.ratio.key]))+")\n                  ")]:t._e()],2)])]}))],2)]),a("div",{directives:[{name:"watermark",rawName:"v-watermark",value:{watch:t.erpContract.length},expression:"{watch: erpContract.length }"}],staticClass:"contract"},[a("ul",t._l(t.erpContract,(function(e,o){return a("li",{key:o,staticClass:"contract-item"},[a("div",{staticClass:"contract-row _contract-row",on:{click:function(a){t.reviewTabList(e.ContractGUID,1)}}},[a("div",[a("div",{staticClass:"label",domProps:{innerHTML:t.xss(t._s(e.ContractName))}}),a("div",{staticClass:"subtitle",domProps:{innerHTML:t.xss(t._s(e.ContractCode))}}),a("div",{staticClass:"subtitle",domProps:{textContent:t._s(t.erp_gcxt_contract[e.ContractGUID])}})]),a("div",{staticClass:"more item-right"},[a("div",{staticClass:"more-flag"},[t._v("...")]),a("div",{staticClass:"fold",class:e.show?"foldUp":"foldDown",on:{click:function(e){e.stopPropagation(),t.foldChange(o)}}},[a("span",{staticClass:"iconfont icon-_xiala",staticStyle:{"line-height":"normal"}})])])]),a("transition",{attrs:{name:"fade"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:e.show,expression:"item.show"}],staticClass:"contract-detail"},[t._l(t.contractConfig.indexBottom,(function(o){return[t.authorityKey[o.authorityKey]?a("div",{key:o.ContractCode,staticClass:"contract-row",on:{click:function(a){t.reviewTabList(e.ContractGUID,o.dataTableId)}}},[a("div",{staticClass:"label",domProps:{textContent:t._s(o.name)}}),a("div",{staticClass:"amount"},[t._v("\n                        "+t._s(t._f("number")(e[o.key]))+"\n                      ")])]):t._e()]}))],2)])],1)})))]),t.empty?a("div",{staticClass:"empty"},[a("div",{staticClass:"tips"},[t._v("还没有已授权的合同~")])]):t._e()])],1)])],1)},n=[],i=(a("6d57"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("popup-page",{directives:[{name:"phy-back",rawName:"v-phy-back",value:{status:t.show,method:"closePopup"},expression:"{status: show, method: 'closePopup'}"}],attrs:{value:t.show}},[a("van-search",{ref:"searchBar",staticClass:"search-bar top-header",attrs:{slot:"header",placeholder:t.placeholder,"show-action":"",autofocus:"",shape:"round"},on:{input:t.debounceSearch,search:t.handleSearch},slot:"header",model:{value:t.keyword,callback:function(e){t.keyword=e},expression:"keyword"}},[a("i",{staticClass:" iconfont icon-_sousuo",attrs:{slot:"left-icon"},slot:"left-icon"}),a("div",{staticStyle:{color:"#fff"},attrs:{slot:"action"},on:{click:t.closePopup},slot:"action"},[t._v("\n      取消\n    ")])]),a("div",{staticClass:"search-popup-view"},[a("div",{staticClass:"search-result list-block media-list"},[a("ul",{staticClass:"result"},[t._l(t.list.data,(function(e,o){return[a("li",{key:o,staticClass:"item-content"},[a("div",{staticClass:"contract-row _contract-row"},[a("div",{staticClass:"item-inner",on:{click:function(a){t.reviewContractDetail(e.ContractGUID)}}},[a("div",{staticClass:"label",domProps:{innerHTML:t.xss(t._s(e.ContractName))}}),a("div",{staticClass:"subtitle",domProps:{innerHTML:t.xss(t._s(e.ContractCode))}})])])])]}))],2),a("no-record",{directives:[{name:"show",rawName:"v-show",value:!t.loading&&t.isEmpty,expression:"!loading && isEmpty"}],attrs:{txt:"没有符合条件的结果",type:"search"}})],1)])],1)}),r=[],c=(a("5ab2"),a("e10e"),a("28f8")),s=(a("f548"),a("9dd9"),a("0937")),d=a.n(s),l=a("a075"),u=a("2d5c"),f=a("db68"),p=a("6485");function h(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,o)}return a}function b(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?h(Object(a),!0).forEach((function(e){Object(c["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):h(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var g={name:"SearchPopupContract",components:{noRecord:p["a"]},filters:{beautify:function(t){return l["a"].date.beautify(t)}},model:{prop:"show"},props:{show:Boolean,placeholder:{type:String,default:"合同名称、编号，单据名称、编号"}},data:function(){return{loading:!1,keyword:"",isUnErp:f["b"].user.isUnErp(),list:{searchParam:{keyword:"",page_index:1,page_size:20},data:[]}}},computed:{isEmpty:function(){return 0===this.list.data.length&&""!==this.keyword}},watch:{loading:function(t){!0===t?this.sui.showIndicator():this.sui.hideIndicator()},show:function(t){var e=this;t&&this.$nextTick((function(){var t=e.$refs.searchBar.querySelector("input");t&&t.focus()}))}},created:function(){this.debounceSearch=d()(this.handleSearch.bind(this),500)},mounted:function(){},methods:{reviewContractDetail:function(t){this.$router.push({path:"/contract/tab-list",query:{ContractGUID:t}})},markKeyword:function(t){var e=new RegExp(this.keyword,"g");return t?t.replace(e,(function(t){return'<span class="match-key">'+t+"</span>"})):""},handleSearch:function(t){var e=this,a=new RegExp(t,"gi");""!==t?(this.list.searchParam.keyword=t,Object(u["g"])(b({},this.list.searchParam)).then((function(t){return t.data.map((function(t){return e.isUnErp?t.contract_id:t.erp_contract_id}))})).then((function(t){return t.length>0?Object(u["e"])({guidlist:t.join(","),apiname:"GetContractAmount"}):{data:[]}})).then((function(t){e.list.data=t.data.map((function(t){return t.ContractName=t.ContractName.replace(a,(function(t,e,a){return'<span style="color:#3492e9">'.concat(t,"</span>")})),t.ContractCode=t.ContractCode.replace(a,(function(t,e,a){return'<span style="color:#3492e9">'.concat(t,"</span>")})),t}))}))):this.list.data=[]},closePopup:function(){this.$emit("input",!1)}}},m=g,y=(a("e1d6"),a("c701")),x=Object(y["a"])(m,i,r,!1,null,"1310ace2",null),v=x.exports,k=a("c799"),w=a("a740"),_={name:"ContractIndex",components:{search:v},filters:{percent:function(t){return isNaN(parseFloat(t))?"--":(t=l["a"].number.round((1e4*t/100).toFixed(2))+"%",t)},number:function(t){return isNaN(parseFloat(t))?"--":(t="¥"+l["a"].number.format(l["a"].number.round(t,2),2),t)}},data:function(){return{searchShowing:!1,ready:!0,isJf:f["b"].user.isJf(),show_ljsdcz:!!f["b"].menu.getEntry("outputvalue"),review:{},busy:!1,loadAll:!1,page_index:1,record_count:10,erpContract:[],gcxtContract:[],erp_gcxt_contract:{},empty:!1,keyword:"",searchResult:[],searchModel:!1,invalidSearch:!1,isUnErp:f["b"].user.isUnErp(),loading:!1,finished:!1,authorityKey:k["a"].getAuthorityKey(),contractConfig:k["a"].getLayoutConfig()}},computed:{},mounted:function(){this.getAmount()},methods:{modelMessage:function(t){this.sui.modal({text:t,buttons:[{text:"我知道了"}]})},showSearch:function(){this.searchShowing=!0},getErpContract:function(t){var e=this;if(t.length<1)return this.loading=!1,void(this.finished=!0);Object(u["e"])({apiname:"GetContractAmount",guidlist:t.join(",")}).then((function(t){e.page_index+=1,e.loading=!1,e.erpContract=e.erpContract.concat(t.data)}))},loadList:function(){var t=this;this.loading||(this.loading=!0,Object(u["g"])({page_index:this.page_index,page_size:10,keyword:""}).then((function(e){var a=[];if(e.data.forEach((function(e){t.erp_gcxt_contract[e.erp_contract_id]=e.project_name,a.push(t.isUnErp?e.contract_id:e.erp_contract_id)})),t.gcxtContract=t.gcxtContract.concat(e.data),t.record_count=e.record_count,0==t.record_count)return t.empty=!0;t.getErpContract(a)})))},foldChange:function(t){this.$set(this.erpContract[t],"show",!this.erpContract[t].show)},refresh:function(t,e){this.page_index=1,this.finished=!1,this.loading=!1,this.erpContract=[],this.gcxtContract=[],this.loadList()},getAmount:function(){var t=this;Object(u["e"])({apiname:"GetAccreditContractAmount",role_code:Object(w["a"])("role_code")}).then((function(e){t.review=e.data}))},reviewTabList:function(t,e){this.$router.push({name:"contractTabList",query:{ContractGUID:t,tabId:e}})}}},C=_,j=(a("f9c4"),Object(y["a"])(C,o,n,!1,null,"0db18ec5",null));e["default"]=j.exports},b32a:function(t,e,a){var o=a("eb00"),n=function(){return o.Date.now()};t.exports=n},c799:function(t,e,a){"use strict";a("5ab2"),a("e10e");var o=a("28f8"),n=a("3e83"),i=(a("f548"),a("cc57"),a("6d57"),a("db68")),r=a("2d5c"),c=a("a740");function s(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,o)}return a}function d(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?s(Object(a),!0).forEach((function(e){Object(o["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):s(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var l={};function u(t,e,a){for(var o in t)Array.isArray(t[o])&&t[o].forEach((function(t){t.name&&(t.name=t.name.replace(e,a))}))}function f(t,e){Object(r["e"])({apiname:t,contractguid:e.contractguid}).then(e.success).catch(e.error)}l.getLayoutConfig=function(){var t=i["b"].user.isUnErp(),e=i["b"].user.isJf(),a={indexTop:[{name:"总在途变更金额",key:"sum_estimated_cost",msg:"未审核通过的工联单或完工单申请金额总和"},{name:"总变更审核金额",key:"sum_declaration_cost",msg:"已审核通过的完工确认的变更审核金额总和"}],indexMiddle:t?[{name:"合同总金额",key:"TotalHtAmount"},{name:"总扣款金额",key:"sum_deductmoney_amount"}]:[{name:"合同总金额",key:"TotalHtAmount"},{name:"累计审定产值",key:"LjSdcz",ratio:{name:"比例",key:"LjSdczBl"}},{name:"累计合同应付款",key:"LjHtysk"},{name:"累计实付款",key:"Ljssk"}],indexBottom:[{name:"在途变更金额",key:"sum_estimated_cost",dataTableId:2,authorityKey:"changeInfo"},{name:"变更审核金额",key:"sum_declaration_cost",dataTableId:2,authorityKey:"changeInfo"},{name:"累计审定产值",key:"LjSdcz",dataTableId:3,authorityKey:"outputValue"},{name:"累计合同应付款",key:"sum_estimated_cost",dataTableId:4,authorityKey:"outputValue"},{name:"累计实付款",key:"Ljssk",dataTableId:5,authorityKey:"proceedsSale"}],tabListTop:[{dataTableId:1,name:"合同信息",title:"合同详情",key:"get_detail_htxx",authorityKey:"contractDetail"},{dataTableId:2,name:"变更信息",key:"get_detail_bgxx",authorityKey:"changeInfo"},{dataTableId:3,name:"审定产值",key:"get_detail_sdcz",authorityKey:"outputValue"},{dataTableId:3,name:"预付进度款",key:"get_detail_sdcz_hj",authorityKey:"hjOutputValue"},{dataTableId:4,name:"计划付款",key:"get_detail_jfjhfk",authorityKey:"paymentPlan"},{dataTableId:5,name:e?"实付款":"实收款",key:"get_detail_ssk",authorityKey:"proceedsSale"},{dataTableId:6,name:"发票",key:"get_detail_fp",authorityKey:"invoice"},{dataTableId:7,name:"扣款信息",key:"get_detail_kk",authorityKey:"cutPayment"},{dataTableId:7,name:"扣款信息",description:"合景扣款信息",key:"get_detail_kk_hj",authorityKey:"hjCutPayment"}],tabListBottom:[{dataTableId:2,name:"在途变更金额",key:"sum_estimated_cost",authorityKey:"changeInfo"},{dataTableId:2,name:"变更审核金额",key:"sum_declaration_cost",authorityKey:"changeInfo"},{dataTableId:3,name:"累计审定产值",key:"LjSdcz",authorityKey:"outputValue",ratio:{name:"累计审定产值比例",key:"LjSdczBl"}},{dataTableId:4,name:e?"累计合同应付款":"累计合同应收款",key:"LjHtysk",authorityKey:"paymentPlan",ratio:{name:"合同约定支付比例",key:"LjHtyskBl"}},{dataTableId:4,name:"累计计划付款",key:"Ljjfjhfk",authorityKey:"paymentPlan"},{dataTableId:5,name:e?"累计实付款":"累计实收款",key:"Ljssk",authorityKey:"proceedsSale"},{dataTableId:5,name:e?"累计实付款":"累计实收款",key:"hjLjssk",authorityKey:"hjProceedsSale"},{dataTableId:6,name:"累计发票金额",key:"get_detail_fp",authorityKey:"invoice",number:{name:"还差发票金额",key:"Hc_InvoiceAmount"}},{dataTableId:7,name:"累计扣款金额",key:"LjkkAmount",authorityKey:"cutPayment"},{dataTableId:7,name:"累计扣款金额",key:"LjkkAmount",authorityKey:"hjCutPayment"},{dataTableId:-1,name:"累计应付未付款",key:"Ljyfwfk",authorityKey:"unTabList",desc:"只做显示用"}]},o=Object(c["b"])(),r=o.contract_config;if("string"===typeof r&&r)try{var s=JSON.parse(r);Array.isArray(s)||"object"!==Object(n["a"])(s)||(r=a=d(d({},a),s))}catch(l){r=a}else r=a;return e?u(r,"实收款","实付款"):u(r,"实付款","实收款"),r},l.getAuthorityList=function(){var t=i["b"].user.isJf();return[{dataTableId:1,name:"合同信息",title:"合同详情",key:"get_detail_htxx",authorityKey:"contractDetail"},{dataTableId:2,name:"变更信息",key:"get_detail_bgxx",authorityKey:"changeInfo"},{dataTableId:3,name:"审定产值",key:"get_detail_sdcz",authorityKey:"outputValue"},{dataTableId:4,name:"计划付款",key:"get_detail_jfjhfk",authorityKey:"paymentPlan"},{dataTableId:5,name:t?"实付款":"实收款",key:"get_detail_ssk",authorityKey:"proceedsSale"},{dataTableId:6,name:"发票",key:"get_detail_fp",authorityKey:"invoice"},{dataTableId:7,name:"扣款信息",key:"get_detail_kk",authorityKey:"cutPayment"},{dataTableId:7,name:"扣款信息",description:"合景扣款信息",key:"get_detail_kk_hj",authorityKey:"hjCutPayment"}]},l.getAuthorityKey=function(){var t=Object(c["b"])(),e=t.contract_authority_key,a={contractDetail:"合同信息",changeInfo:"变更信息",outputValue:"审定产值",paymentPlan:"付款计划",proceedsSale:"实收款",invoice:"发票",cutPayment:"扣款"},o={contractDetail:"合同信息",changeInfo:"变更信息",cutPayment:"扣款"},n=i["b"].user.isUnErp(),r=n?o:a;if(e)try{var s=JSON.parse(e);s instanceof Array||(r=s)}catch(d){console.log(d)}return r},l.get_statistics=function(t){Object(r["e"])({aapiname:"GetAccreditContractAmount",role_code:i["b"].user.current("role_code")}).then((function(e){i["b"].user.is_expired()?i["b"].redirect("../error/overdue.html",1):t.success(e)})).catch(t.error)},l.get_detail=function(t){Object(r["e"])({apiname:"GetContractDetail",contractguid:t.contractguid}).then(t.success).catch(t.error)},l.get_detail_htxx=function(t){f("GetContractDetail",t)},l.get_detail_sdcz=function(t){f("GetContractDetail_Sdcz",t)},l.get_detail_sdcz_hj=function(t){f("GetContractDetail_Sdcz",t)},l.get_detail_jfjhfk=function(t){f("GetContractDetail_Jfjhfk",t)},l.get_detail_ssk=function(t){f("GetContractDetail_Ssk",t)},l.get_detail_fp=function(t){f("GetContractDetail_Fp",t)},l.get_detail_kk=function(t){f("GetContractDetail_Kk",t)},l.get_detail_kk_hj=function(t){f("GetContractDetail_Kk_hj",t)},l.get_detail_ssk_mx=function(t){Object(r["e"])({apiname:"GetContractDetail_Ssk_Mx",vouchguid:t.vouchguid}).then(t.success).catch(t.error)},e["a"]=l},d580:function(t,e,a){var o=a("5b86");"string"===typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);var n=a("85cb").default;n("4c09ebe5",o,!0,{sourceMap:!1,shadowMode:!1})},e1d6:function(t,e,a){"use strict";a("d580")},f9c4:function(t,e,a){"use strict";a("7e74")}}]);