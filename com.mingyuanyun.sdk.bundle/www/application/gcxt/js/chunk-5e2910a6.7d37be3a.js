(window["webpackJsonp_module_entry_gcxt_"]=window["webpackJsonp_module_entry_gcxt_"]||[]).push([["chunk-5e2910a6"],{"079e":function(t,e,a){"use strict";a("23a3")},"07fc":function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.list.length?a("div",[a("div",{staticClass:"root"},[a("span",[t._v("点击可查看新增单据的规范及要求")]),a("span",{staticClass:"show-button",on:{click:t.onClick}},[t._v("查看模板")])]),a("popup-page",{directives:[{name:"phy-back",rawName:"v-phy-back",value:{status:t.show,method:"cancel"},expression:"{status: show, method: 'cancel'}"}],attrs:{value:t.show}},[a("v-header",{attrs:{slot:"header","back-action":t.cancel,title:"查看模板"},slot:"header"}),a("attachement",{attrs:{"show-title":!1,edit:!1,list:t.list}})],1)],1):t._e()},n=[],o=a("6892"),r={name:"ViewTemplate",components:{attachement:o["a"]},props:{list:{type:Array,default:function(){return[]}}},data:function(){return{show:!1}},methods:{onClick:function(){this.show=!0},cancel:function(){this.show=!1}}},s=r,c=(a("079e"),a("c701")),l=Object(c["a"])(s,i,n,!1,null,"eabc9d7e",null);e["a"]=l.exports},"0909":function(t,e,a){"use strict";a.d(e,"a",(function(){return et}));var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.type===t.Types.Free?a("free-select-people",t._b({ref:"FreeSelectPeople"},"free-select-people",Object.assign({},t.$attrs,{users:t.freeUserList,checkIsSigner:t.checkIsSigner,size:t.$attrs.size,singerLabel:t.singerLabel,showSignerLabel:!t.isTCMode}),!1),[t.allowDescription&&t.stationCheck&&t.stationCheck.station_check_desc&&t.stationCheck.station_check_desc.length?a("div",{attrs:{slot:"bottom"},slot:"bottom"},[a("description",{attrs:{descriptions:t.stationCheck.station_check_desc}})],1):t._e()]):t.type===t.Types.Fixed?a("fixed-select-people",t._b({ref:"FixedSelectPeople"},"fixed-select-people",Object.assign({},t.$attrs,{users:t.fixedUserList,flowList:t.flowList,flowDeletable:t.flowInfo.delete_enable,checkIsSigner:t.checkIsSigner,flowInfo:t.flowInfo,singerLabel:t.singerLabel,showSignerLabel:t.showSignerLabel}),!1),[t.allowDescription&&t.stationCheck&&t.stationCheck.approve_tips_desc&&t.stationCheck.approve_tips_desc.length?a("div",{attrs:{slot:"bottom"},slot:"bottom"},[a("description",{attrs:{descriptions:t.stationCheck.approve_tips_desc}})],1):t._e()]):t._e()],1)},n=[],o=(a("5ab2"),a("e10e"),a("3e83")),r=a("4c09"),s=(a("cc57"),a("6d57"),a("28f8")),c=(a("e697"),a("163d"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"select-people van-hairline--top"},[a("div",{staticClass:"clear-action"},[a("span",[t._v(t._s(t.title))]),a("a",{class:{unclick:!t.selectedsLength},on:{click:function(e){t.clear()}}},[t._v("清空")])]),a("div",{staticClass:"station-list",class:{"-max":!t.canAddMore}},[a("draggable",{staticClass:"draggable-list",attrs:{group:"people",delay:100,handle:".draggable"},model:{value:t.curSelecteds,callback:function(e){t.curSelecteds=e},expression:"curSelecteds"}},[t._l(t.curSelecteds,(function(e,i){return a("div",{key:i,staticClass:"station-item draggable",class:{"-last":!t.canAddMore&&i===t.curSelecteds.length-1,"-invalid":e.check_invalid_fronted}},[a("div",{staticClass:"choose-item-wrapper",on:{click:function(a){t.onItemDelete(e,i)}}},[a("choose-item",{attrs:{user:e}})],1),a("div",{staticClass:"station-name"},[t._v(t._s(e.name))])])})),a("div",{staticClass:"station-item -last"},[t.canAddMore?a("div",{staticClass:"choose-item-wrapper",on:{click:t.onItemAdd}},[a("choose-item")],1):t._e()])],2)],1),t.size>1?a("div",{staticClass:"bottom-content"},[a("div",{staticClass:"tip"},[t._v("* 点击头像可删除，长按头像可拖动调整顺序")]),t._t("bottom")],2):t._e(),a("user-list-popup",{ref:"UserListPopup",attrs:{grouped:!0,list:t.users,"search-result":t.popupSearchList,selecteds:t.curSelectedIds,title:"请选择"+t.title,"show-tabs":t.showTabs,"check-is-signer":t.checkIsSigner,"show-signer-label":t.showSignerLabel,"signer-label":t.singerLabel},on:{confirm:t.onConfirm,search:t.onSearch},model:{value:t.showPopup,callback:function(e){t.showPopup=e},expression:"showPopup"}})],1)}),l=[],u=(a("9dd9"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"choose-item",class:{"-blank":!t.user}},[a("i",{staticClass:"iconfont icon--jia icon__plus"}),t.user?a("avatar",{attrs:{user:t.user}}):t._e()],1)}),d=[],p=a("2777"),f={name:"ChooseItem",components:{Avatar:p["a"]},props:{user:{type:Object,default:function(){return null}}}},h=f,m=(a("2c2db"),a("c701")),b=Object(m["a"])(h,u,d,!1,null,"0706f223",null),g=b.exports,v=a("3335"),x=a.n(v),y=a("7ee5"),_=a("933f");function w(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,i)}return a}function O(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?w(Object(a),!0).forEach((function(e){Object(s["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):w(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var k={components:{ChooseItem:g,Draggable:x.a,UserListPopup:y["a"]},props:{title:{type:String,default:"项目现场确认人"},beforeEdit:{type:Function,default:function(){return!0}},users:{type:Array,default:function(){return[]}},selecteds:{type:Array,default:function(){return[]}},size:{type:Number,default:1/0},checkIsSigner:{type:Function,default:function(){return!1}},showSignerLabel:{type:Boolean,default:!0},singerLabel:{type:String,default:"签发人"}},data:function(){return{curSelecteds:[],showPopup:!1,popupSearchList:[],keyword:""}},computed:{showTabs:function(){return!this.keyword.length},selectedsLength:function(){return this.curSelecteds.length},watchUsersSelecteds:function(){return this.users.length+this.selecteds.length},curSelectedIds:function(){return this.curSelecteds.map((function(t){return t.user_id}))},canAddMore:function(){return this.size===1/0||this.curSelecteds.length<this.size}},watch:{watchUsersSelecteds:{handler:function(){this.refreshSelecteds()},immediate:!0},showPopup:function(t){t||(this.keyword="")}},beforeCreate:function(){this.runOnceRefreshSelecteds=!1},mounted:function(){window.oldSelect=this},methods:{refreshSelecteds:function(){var t=[];t=this.getSelectedsByIds(this.selecteds),this.runOnceRefreshSelecteds&&(t=t.filter((function(t){return!t.check_invalid_fronted}))),this.curSelecteds=t,this.runOnceRefreshSelecteds=!0},onSearch:function(t){var e=this;this.keyword=t.trim();var a=[];if(this.keyword){var i=new RegExp(t,"i"),n=["name","pinyin","role"];a=this.users.filter((function(t){return n.some((function(e){return i.test(t[e])}))&&t.user_id!==e.curUserId})),_["a"].idkey(_["a"].idkeys.editSearchFreeApprover)}else a=[];this.popupSearchList=a},clear:function(){_["a"].idkey(_["a"].idkeys.editClickClearFreeApprover),this.curSelecteds=[],this.keyword=""},onItemAdd:function(){if(this.beforeEdit()){var t=this.$refs.UserListPopup.groupedList;t.length?this.showPopup=!0:(this.sui.toast("可选人员为空"),console.error("可选人员为空"))}},onItemDelete:function(t,e){var a=this;this.sui.confirm("确认从审批流程中删除<br>".concat(t.name).concat(t.role?"("+t.role+")":""),(function(){_["a"].idkey(_["a"].idkeys.editClickDelFreeApprover),a.curSelecteds.splice(e,1)}))},onConfirm:function(t){_["a"].idkey(_["a"].idkeys.editClickConfirmFreeApprover),this.curSelecteds=this.getSelectedsByIds(t),this.keyword=""},getSelectedsByIds:function(t){var e=this;return t.map((function(t,a){var i=e.users.find((function(e){return e.user_id===t}));return i?O(O({},i),{},{step_order:a}):{user_id:t,name:"无效用户",check_invalid_fronted:!0,step_order:a}}))}}},C=k,S=(a("af3d"),Object(m["a"])(C,c,l,!1,null,"e6a94794",null)),j=S.exports,E=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"select-people van-hairline--top"},[a("div",{staticClass:"clear-action"},[a("span",[t._v(t._s(t.title))]),a("a",{class:{unclick:!t.hasSelected},on:{click:function(e){t.clear()}}},[t._v("清空")])]),t.stationMap?a("div",{staticClass:"station-list"},[t._l(t.availableStationList,(function(e){return[Array.isArray(e)?Array.isArray(e)?t._l(e,(function(i,n){return a("div",{key:i,staticClass:"station-item grouped",class:{last_grouped:n===e.length-1}},[a("div",{staticClass:"choose-item-wrapper",on:{click:function(e){t.onFlowClick(i)}}},[a("choose-item",{attrs:{user:t.getFlowSelected(i)}})],1),a("div",{staticClass:"station-name"},[t._v(t._s(t.getFlowSelected(i)?t.getFlowSelected(i).name:t.stationMap[i].station.name))])])})):t._e():a("div",{key:e,staticClass:"station-item"},[a("div",{staticClass:"choose-item-wrapper",on:{click:function(a){t.onFlowClick(e)}}},[a("choose-item",{attrs:{user:t.getFlowSelected(e)}})],1),a("div",{staticClass:"station-name"},[t._v(t._s(t.getFlowSelected(e)?t.getFlowSelected(e).name:t.stationMap[e].station.name))])])]}))],2):t._e(),a("div",{staticClass:"tip"},[t._v("* 点击头像可删除")]),t.$slots.bottom?a("div",{staticClass:"bottom-content"},[t._t("bottom")],2):t._e(),a("user-list-popup",{attrs:{list:t.popupList,"search-result":t.popupSearchList,selecteds:t.popopSelected,title:t.popupFlow?"请选择"+t.popupFlow.station.name:"","check-is-signer":t.checkIsSigner,"show-signer-label":t.showSignerLabel},on:{confirm:t.onConfirm,search:t.onSearch},model:{value:t.showPopup,callback:function(e){t.showPopup=e},expression:"showPopup"}})],1)},P=[];function F(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,i)}return a}function M(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?F(Object(a),!0).forEach((function(e){Object(s["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):F(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var T=function(t){return t.reduce((function(t,e){var a,i,n=e.step_order,o=e.handler_list;if(0!==+e.approve)return t;var r=[];return o.forEach((function(e){a=n+"__"+e.station.name,i=M(M({__stationKey:a},e),{},{selected:null,isDeleted:!1}),t.map[a]=i,r.push(a)})),t.renderList.push(r),t}),{map:{},renderList:[]})},D={components:{ChooseItem:g,UserListPopup:y["a"]},props:{title:{type:String,default:"项目现场确认人"},beforeEdit:{type:Function,default:function(){return!0}},flowDeletable:{type:Boolean,default:!1},flowInfo:{type:Object,required:!0},flowList:{type:Array,default:function(){return[]}},users:{type:Array,default:function(){return[]}},selecteds:{type:Object,default:function(){return null}},checkIsSigner:{type:Function,default:function(){return!1}},showSignerLabel:{type:Boolean,default:!0},singerLabel:{type:String,default:"签发人"}},data:function(){return{stationMap:null,stationRenderList:null,showPopup:!1,popupFlow:"",popupList:[],popupSearchList:[],popopSelected:[]}},computed:{availableStationList:function(){var t=this;if(null===this.stationMap)return[];var e=[];return this.stationRenderList.forEach((function(a){if(Array.isArray(a))e.push(a.filter((function(e){var a=t.stationMap[e];return!a.isDeleted})));else{var i=t.stationMap[a];!i.isDeleted&&e.push(a)}})),e},stationUsersMap:function(){var t={};return this.users.forEach((function(e){var a=e.station_name;t[a]||(t[a]=[]),t[a].push(e),e.station_list&&e.station_list.length&&e.station_list.forEach((function(a){var i=a.station_id,n=a.station_name,o=a.station_type,r=M(M({},e),{},{station_id:i,station_name:n,station_type:o,role:n});e.station_name!==r.station_name&&(t[n]||(t[n]=[]),t[n].push(r))}))})),t},hasSelected:function(){var t=this;return this.availableStationList.some((function(e){if(Array.isArray(e))return e.some((function(e){var a=t.stationMap[e];return 1===+a.select&&a.selected}));var a=t.stationMap[e];return 1===+a.select&&a.selected}))},watchUsersFlow:function(){return this.users.length+this.flowList.length}},watch:{watchUsersFlow:{handler:function(){this.reset()},immediate:!0,deep:!0}},mounted:function(){window.newSelect=this},methods:{reset:function(){var t=this,e=T(this.flowList),a=e.map,i=e.renderList;this.stationMap=a,this.stationRenderList=i;var n=this.stationUsersMap;if(this.selecteds){var o=function(e){var a=t.selecteds[e],i=t.stationMap[e];if(!i)return"continue";var o=null,r=i.station.name;n[r]&&(o=n[r].find((function(t){return t.user_id===a}))||null),o&&(i.isSignerStation&&t.checkIsSigner(o)?t.stationMap[e].selected=o:i.isSignerStation||(t.stationMap[e].selected=o))};for(var r in this.selecteds)o(r)}else this.getDefaultSelecteds()},getDefaultSelecteds:function(){var t=this,e=this.stationMap,a=this.stationUsersMap;this.stationRenderList.forEach((function(i,n){i.forEach((function(i){var o=t.stationMap[i],r=[],s=[],c=[],l=o.station.name,u=i;l&&Array.isArray(a[l])&&t.stationUsersMap[l].forEach((function(e){t.checkIsSigner(e)&&r.push(e),1===+e.is_virtual_phone?s.push(e):c.push(e)})),0===+o.approve&&1===+o.select&&(n===t.flowList.length-1?1===r.length&&(e[u].selected=r[0]):1===c.length?e[u].selected=c[0]:0===c.length&&s.length>0&&(e[u].selected=s[0]))}))}))},clear:function(){if(this.hasSelected)for(var t in _["a"].idkey(_["a"].idkeys.editClickClearFixApprover),this.stationMap){var e=this.stationMap[t];e.selected=null}},getFlowSelected:function(t){return this.stationMap[t].selected},deleteFlow:function(t){var e=this;this.sui.confirm("确定在该单据的固定审批流程里删除该岗位吗？",(function(){e.stationMap[t].isDeleted=!0}))},onFlowClick:function(t){var e=this;if(this.beforeEdit()){var a=this.stationMap[t],i=a.selected;if(i){if(0===+a.select)return 0;this.sui.confirm("确认从审批流程中删除 ".concat(i.name),(function(){_["a"].idkey(_["a"].idkeys.editClickDelFixApprover),a.selected=null}))}else{var n=this.stationUsersMap[a.station.name];if(n&&n.length){var o=a.__is_signer_flow,r=n.filter((function(t){return e.checkIsSigner(t)})).length;if(o&&!r)return void this.sui.toast("没有".concat(this.singerLabel,"可选"));this.popupFlow=a,this.popupList=this.getPopupList(a.station.name,o),this.popopSelected=[],this.showPopup=!0}else this.sui.toast("没有找到对应岗位人员")}}},getPopupList:function(t,e){var a=this,i=this.stationUsersMap[t],n=i.length;return i.filter((function(t,i){return(!e||e&&a.checkIsSigner(t))&&(1===n||1!==+t.is_virtual_phone||0===i)}))},onConfirm:function(t){_["a"].idkey(_["a"].idkeys.editClickConfirmFixApprover);var e=t[0];this.stationMap[this.popupFlow.__stationKey].selected=this.stationUsersMap[this.popupFlow.station.name].find((function(t){return t.user_id===e}))},onSearch:function(t){var e=t.trim(),a=this.popupFlow.station.name,i=this.stationMap[this.popupFlow.__stationKey].__is_signer_flow,n=this.getPopupList(a,i);if(e){var o=new RegExp(e,"i"),r=["name","pinyin","role"];this.popupSearchList=n.filter((function(t){return r.some((function(e){return o.test(t[e])}))})),_["a"].idkey(_["a"].idkeys.editSearchFixApprover)}else this.popupSearchList=[]}}},A=D,I=(a("8788"),Object(m["a"])(A,E,P,!1,null,"4ee773aa",null)),L=I.exports,z=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"describe"},[a("div",{staticClass:"describe-content"},[a("div",{staticClass:"line top-line"},[t._v("*注意：")]),t._l(t.descriptionsFormated,(function(e,i){return a("div",{key:i,staticClass:"line"},[t._v(t._s(e))])}))],2)])},R=[],N={name:"Description",props:{descriptions:{type:[Array,String],default:function(){return[]}}},computed:{descriptionsFormated:function(){var t=this.descriptions;return Array.isArray(t)?t:[t]}}},B=N,$=(a("77b3"),Object(m["a"])(B,z,R,!1,null,"418c7ff6",null)),U=$.exports,Y=a("b893"),V=a("a740"),q=a("db68"),H=a("a783"),G=a("3ec3"),K=a("5fe8"),X=a("5bbb"),W=a("8935");function J(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,i)}return a}function Z(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?J(Object(a),!0).forEach((function(e){Object(s["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):J(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var Q="Free",tt="Fixed",et={Free:Q,Fixed:tt},at={name:"SelectPeople",components:{FreeSelectPeople:j,FixedSelectPeople:L,Description:U},inheritAttrs:!1,props:{type:{type:String,default:et.Free},users:{type:Array,default:function(){return[]}},flowInfo:{type:Object,default:function(){}},allowDescription:{type:Boolean,default:!0},action:{type:String,default:""},isUnErp:{type:Boolean,default:!1},is_into_erp:{type:Number,default:0},isDoubleFlow:{type:Boolean,default:!1}},data:function(){return{Types:et,store:H["a"],BizKeys:K["a"],flowList:[],flowListFirstIndex:-1}},computed:{bizType:function(){return this.store.bizType},changeType:function(){return this.store.changeType},stationCheck:function(){var t=this,e=this.type===et.Free?"station_check":"approve_tips",a=Object(Y["g"])(Object(V["b"])()[e],[]),i=a.find((function(e){if(+e.biz_type===t.bizType&&(!e.sub_biz_type||e.sub_biz_type===t.changeType))return!0}));return i||null},freeUserList:function(){var t=this.users;return q["b"].user.isUnErp()&&("sign"!==this.action&&1!==this.is_into_erp||(t=t.filter((function(t){return"1004"!==t.role_code&&"1005"!==t.role_code&&"1003"!==t.role_code})))),t},fixedUserList:function(){var t=Object(V["d"])("user_id"),e=this.users;return this.action&&this.action===W["b"].reAssign&&(e=e.filter((function(e){return e.user_id!==t}))),e},signMode:function(){return this.flowInfo&&this.flowInfo.sign_mode?this.flowInfo.sign_mode:"erp"},isTCMode:function(){return G["a"][this.bizType].isTCMode},showSignerLabel:function(){return!this.isTCMode&&"owner"!==this.signMode},singerLabel:function(){return"owner"===this.signMode?"归档人":"签发人"}},watch:{flowInfo:{handler:function(t){this.type===et.Fixed&&this.handlerFlowInfo()},deep:!0,immediate:!0}},methods:{handlerFlowInfo:function(){var t,e,a=0,i=this.flowInfo.flow||[];for(e=0;e<i.length;e++)if(0===+i[e].approve||2===+i[e].approve){a=e;break}if((0!==a||!i[e]||i[e].approver)&&++a,this.action===W["b"].reAssign){var n=Z(Z({},i[--a]),{},{__is_signer_flow:!1});this.flowListFirstIndex=--a,t=[n]}else this.action===W["b"].resetNextUser?(t=i.slice(--a),t.length&&(this.flowListFirstIndex=--a,t[t.length-1].handler_list.forEach((function(t){t.__is_signer_flow=!0})))):(t=i.slice(a),t.length&&(this.flowListFirstIndex=a,t[t.length-1].handler_list.forEach((function(t){t.__is_signer_flow=!0}))));this.flowList=t.filter((function(t){return 1!==+t.approve}))},getData:function(){return this.type===et.Free?this.getFreeData():this.getFixedData()},getFreeData:function(){return this.$refs.FreeSelectPeople.curSelecteds.map((function(t,e){return{step_order:e+1,approver_id:t.user_id}}))},getFixedData:function(){var t=this.$refs.FixedSelectPeople.stationMap,e=[],a=function(e,a,i){var n=t[i];if(0===a&&e.approver||!n)return e;if(!n.isDeleted){var o=Z({},e),r=n.selected;return r&&(o.approver={approver_id:r.user_id}),o}},i=Object(X["a"])(this.flowInfo.flow);return i.forEach((function(t,i){if(0!==i){var n=t.step_order,o=t.handler_list,r=t.handle_mode,s=Z(Z({},t),{},{handler_list:[]});if(0===+r&&1===o.length){var c=a(o[0],i,n+"__"+o[0].station.name);s.approver=c.approver,s.handler_list.push(c)}else o.forEach((function(t){s.handler_list.push(a(t,i,n+"__"+t.station.name))}));e.push(s)}else e.push(t)})),Z(Z({},this.flowInfo),{},{flow:e})},checkIsSigner:function(t){if(G["a"][this.bizType].isTCMode)return!0;if(this.type===et.Free){var e="";return e=this.isUnErp?this.isDoubleFlow&&(1===this.is_into_erp||"sign"==this.action)?"wcb_erp":"wcb_xt":"module_sign_access",e=e||"module_sign_access",t[e]&&~t[e].indexOf(this.bizType+"")}return this.type===et.Fixed?"owner"===this.signMode||t.module_sign_access&&~t.module_sign_access.indexOf(this.bizType+""):void 0},validateSelectPeople:function(){return this.type===et.Free?this.validateFree():this.validateFixed()},validateFree:function(){var t=[].concat(Object(r["a"])(this.$refs.FreeSelectPeople.curSelecteds),[{station_name:Object(V["a"])("station_name")}]),e=Object(V["b"])().multi_station_check||"";if(!this.stationCheck)return{flag:!0,msg:""};if(e&&1===+e&&this.stationCheck.station&&this.stationCheck.station.length){var a=[];if(this.stationCheck.station.forEach((function(e){if(e.quantity>0){var i=t.filter((function(t){return t.station_name===e.station_name})).length;if(i<e.quantity){var n=e.quantity-i;a.push("<span style='color:#3492E9'>"+n+"</span>位"+e.station_name)}}})),a.length)return{flag:!1,msg:"<div style='text-align:left;'>当前审批流程缺少：".concat(a.join("、"),"</div>"),type:"alert"}}return{flag:!0,msg:""}},validateFixed:function(){var t=this,e=this.$refs.FixedSelectPeople,a=e.flowList,i=e.stationMap,n=Object(V["d"])("user_id"),r=0,s=a[r],c="请在下一审批步骤添加审批人";s||(c="流程审批出现异常请联系管理员");var l=n;if(this.flowListFirstIndex>1){var u=this.flowInfo.flow[this.flowListFirstIndex-1];1===+u.handle_mode&&(l=null)}var d=1===+this.flowInfo.is_distinct,p=function(){var e=s,n=e.handler_list,o=e.handle_mode,u=e.step_order,p=1===+o,f=n.map((function(t){return i[u+"__"+t.station.name]}));if(p){var h="";if(f.some((function(t){if(!t.selected)return h=t.station.name,!0})),h)return c=c||"请在下一审批步骤添加审批人","break";var m=f.every((function(t){return t.selected&&1===+t.selected.is_virtual_phone}));return m?(c="会签步骤中不能有虚拟用户","break"):{v:{flag:!0,msg:""}}}var b=f[0].selected;return b?1===+b.is_virtual_phone||l&&b.user_id===l&&d&&!t.checkIsSigner(b)&&"resetNextUser"!==t.action?(c="后续审批人将自动通过，请在下一有效审批步骤添加审批人",s=a[++r],"continue"):{v:{flag:!0,msg:""}}:(c=c||"请在下一审批步骤添加审批人","break")};while(s){var f=p();if("break"===f)break;if("continue"!==f&&"object"===Object(o["a"])(f))return f.v}return{flag:!1,msg:c}},checkFreeFlow:function(){for(var t=this.$refs.FreeSelectPeople.curSelecteds,e={flag:!0,msg:""},a=0,i=0;0===a&&i<t.length;i++)t[i].check_invalid_fronted?a--:1!==+t[i].is_virtual_phone&&a++;return a<0?(e.flag=!1,e.msg="流程中存在无效用户请移除并替换"):0===a&&(e.flag=!1,e.msg="后续审批人为虚拟用户，无法提交，请至少选择一个真实用户"),e}}},it=at,nt=Object(m["a"])(it,i,n,!1,null,null,null);e["b"]=nt.exports},"0a20":function(t,e,a){"use strict";a("18ee")},"0d2a":function(t,e,a){var i=a("68a0");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var n=a("85cb").default;n("5d94544e",i,!0,{sourceMap:!1,shadowMode:!1})},1189:function(t,e,a){e=t.exports=a("690e")(!1),e.push([t.i,".gcxt[data-v-44b19207] :export{colorPrimary:#2c5cf7;headerBackgroundColor:#fff;headerTextColor:#333}.gcxt .user-selector-item[data-v-44b19207]{display:-webkit-box;display:-ms-flexbox;display:flex;min-height:64px;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding:15px;background-color:#fff}.gcxt .user-selector-item--avatar[data-v-44b19207]{width:34px;height:34px;border-radius:50%;font-size:14px;color:#fff;line-height:34px;text-align:center;background-size:cover;background-position:50%}.gcxt .user-selector-item--content[data-v-44b19207]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-flex:1;-ms-flex:1;flex:1;font-size:16px;margin-left:15px;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.gcxt .user-selector-item--content .icon-_xuanzhong[data-v-44b19207],.gcxt .user-selector-item--content .icon-selected[data-v-44b19207]{font-size:18px;color:#2c5cf7}.gcxt .user-selector-item--content .icon-redio-unselected[data-v-44b19207]{font-size:20px;color:#c8c8c8}.gcxt .user-selector-item--content-name[data-v-44b19207]{-webkit-box-flex:1;-ms-flex:1;flex:1;max-width:90%}",""])},1192:function(t,e,a){var i=a("5434");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var n=a("85cb").default;n("dc180c18",i,!0,{sourceMap:!1,shadowMode:!1})},"12c1":function(t,e,a){e=t.exports=a("690e")(!1),e.push([t.i,'.gcxt[data-v-4ee773aa] :export{colorPrimary:#2c5cf7;headerBackgroundColor:#fff;headerTextColor:#333}.gcxt .select-people[data-v-4ee773aa]{padding:12px 15px 15px;background-color:#fff}.gcxt .clear-action[data-v-4ee773aa]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.gcxt .clear-action span[data-v-4ee773aa]{-webkit-box-flex:1;-ms-flex:1;flex:1;font-size:16px}.gcxt .clear-action a[data-v-4ee773aa]{font-size:13px;color:#2c5cf7}.gcxt .clear-action .unclick[data-v-4ee773aa]{color:#c8c8c8}.gcxt .station-list[data-v-4ee773aa]{display:-webkit-box;display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap;margin-top:16px}.gcxt .station-item[data-v-4ee773aa]{margin-right:11px;margin-bottom:10px;width:70px;text-align:center;font-size:0}.gcxt .station-item[data-v-4ee773aa]:last-child{margin-right:0}.gcxt .station-item:last-child .choose-item-wrapper[data-v-4ee773aa]:after{display:none}.gcxt .choose-item-wrapper[data-v-4ee773aa]{display:inline-block;position:relative}.gcxt .choose-item-wrapper[data-v-4ee773aa]:after{content:"";position:absolute;top:50%;right:-31px;-webkit-transform:translateY(-50%);transform:translateY(-50%);width:27px;border-top:1px dotted #c8c8c8}.gcxt .choose-item-wrapper .icon__delete[data-v-4ee773aa]{position:absolute;top:5px;right:5px;-webkit-transform:translate(50%,-50%);transform:translate(50%,-50%);font-size:18px;line-height:1;color:#ff3b30;background:#fff;border-radius:50%}.gcxt .station-name[data-v-4ee773aa]{margin-top:10px;color:#666;font-size:13px;line-height:1.3;display:-webkit-box;overflow:hidden;-webkit-box-orient:vertical;-webkit-line-clamp:2;text-overflow:ellipsis}.gcxt .bottom-content[data-v-4ee773aa]{margin-top:20px}.gcxt .station-item.grouped[data-v-4ee773aa]:not(.last_grouped){margin-right:5px}.gcxt .station-item.grouped:not(.last_grouped) .choose-item-wrapper[data-v-4ee773aa]:after{content:"&";right:-30px;border:none;font-size:14px;color:#c8c8c8}.gcxt .tip[data-v-4ee773aa]{margin-top:8px;font-size:12px;color:#999}',""])},"163c":function(t,e,a){e=t.exports=a("690e")(!1),e.push([t.i,".gcxt .choose-item[data-v-0706f223]{position:relative;width:45px;height:45px;border-radius:50%}.gcxt .choose-item.-blank[data-v-0706f223]{border:1px solid #c8c8c8}.gcxt .choose-item .icon__plus[data-v-0706f223]{position:absolute;top:50%;left:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%);color:#c8c8c8;font-size:18px}",""])},1642:function(t,e,a){e=t.exports=a("690e")(!1),e.push([t.i,"[data-v-eabc9d7e] .van-popup{width:100%;height:100%}.gcxt .root[data-v-eabc9d7e]{background-color:#e8f2ff;padding:10px 15px;font-size:14px;color:#69696e;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;line-height:24px}.gcxt .root .show-button[data-v-eabc9d7e]{border-radius:12px;color:#4694fb;background-color:#fff;font-size:12px;display:inline-block;padding:0 9px;-webkit-box-shadow:0 2px 4px 0 rgba(82,131,229,.17);box-shadow:0 2px 4px 0 rgba(82,131,229,.17)}.gcxt .root[data-v-eabc9d7e] .field-wrapper{margin:0}.gcxt .root[data-v-eabc9d7e] .attachment-item{padding:0}.gcxt .root[data-v-eabc9d7e] .attachment-item .iconfont{font-size:51px}.gcxt .root[data-v-eabc9d7e] .attachment-item img{width:51px;height:51px}.gcxt .root[data-v-eabc9d7e] .attachment-item .item-inner{padding:10px 15px}",""])},"18e4":function(t,e,a){e=t.exports=a("690e")(!1),e.push([t.i,".gcxt .user-avatar[data-v-20378eea]{position:relative;width:100%;min-width:34px;height:0;padding-bottom:100%;border-radius:50%;background-size:cover;background-position:50%}.gcxt .user-avatar .text[data-v-20378eea]{position:absolute;top:50%;left:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%);font-size:14px;color:#fff}",""])},"18ee":function(t,e,a){var i=a("eebb");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var n=a("85cb").default;n("059a3017",i,!0,{sourceMap:!1,shadowMode:!1})},1941:function(t,e,a){var i=a("be93");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var n=a("85cb").default;n("5cc118eb",i,!0,{sourceMap:!1,shadowMode:!1})},"1c87":function(t,e,a){var i=a("c31b");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var n=a("85cb").default;n("1bdb183c",i,!0,{sourceMap:!1,shadowMode:!1})},"1f8c":function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"relative-field-group"},[t._l(t.relativeFields,(function(e){return["edit"===t.mode||"view"===t.mode&&e.value&&e.value.length?a("relative-field",t._g(t._b({key:e.code,ref:e.code,refInFor:!0,staticClass:"relative-field"},"relative-field",Object.assign({},t.$attrs,e,{mode:t.mode}),!1),t.$listeners)):t._e()]}))],2)},n=[],o=(a("5ab2"),a("e10e"),a("28f8")),r=a("b23b"),s=(a("6d57"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",["edit"===t.mode?a("af-select-page-cell",t._b({attrs:{value:t.valueIds},on:{load:t.load,change:t.onChange},scopedSlots:t._u([{key:"multiTextAfter",fn:function(e){var i=e.index;return"edit"===t.mode?[a("span",{staticClass:"delete-action",on:{click:function(e){t.deleteSelected(i)}}},[a("i",{staticClass:"iconfont icon-_shanchu-"})])]:void 0}}])},"af-select-page-cell",Object.assign({},t.fieldProps,{data:t.data,keyMap:Object.assign({},t.keyMap,{name:"text",label:"subtext"}),searchResult:t.searchResult,multi:t.multi,multiTexts:t.multiTexts,title:t.title||t.label}),!1)):t._e(),"view"===t.mode&&t.curValue.length?[a("af-cell",{class:{"af-border--bottom":"TODO"},attrs:{label:t.fieldProps.label+"("+t.curValue.length+")"},on:{click:t.openViewPopup}}),a("popup-page",{directives:[{name:"phy-back",rawName:"v-phy-back",value:{status:t.showViewPopup,method:"closeViewPopup"},expression:"{ status: showViewPopup, method: 'closeViewPopup' }"}],attrs:{value:t.showViewPopup}},[a("template",{slot:"header"},[a("v-header",{attrs:{title:t.title,"back-action":t.closeViewPopup}})],1),a("div",{staticClass:"view-list"},t._l(t.multiTexts,(function(e,i){return a("div",{key:i,staticClass:"view-item",on:{click:function(a){t.onViewItemClick(e)}}},[a("div",{staticClass:"label"},[t._v("\n            "+t._s(e.text)+"\n          ")]),a("div",{staticClass:"tip"},[Array.isArray(e.subtext)?t._l(e.subtext,(function(e,i){return a("div",{key:i,staticClass:"subtext"},[t._v("\n                "+t._s(e)+"\n              ")])})):[a("div",{staticClass:"subtext"},[t._v(t._s(e.subtext))])]],2)])})))],2)]:t._e()],2)}),c=[],l=(a("f548"),a("a783")),u=a("a075"),d=a("0fc6");function p(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,i)}return a}function f(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?p(Object(a),!0).forEach((function(e){Object(o["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):p(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var h=function(t,e){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"text";return"money"===a||"number"===a?u["a"].number.format(e,2):"date"===a?u["a"].date.format(e,"yyyy-MM-dd"):e},m={name:"RelativeField",inheritAttrs:!1,props:{code:{type:String},saveId:{type:String},isRequire:{type:Boolean,default:!1},title:{type:String,default:""},label:{type:String,default:""},popup:{type:Object},pagingFun:{type:Function},value:{type:Array,default:function(){return[]}},beforeEdit:{type:Function,default:function(){return!0}},detailItemClick:{type:Function,default:function(){return null}},mode:{type:String,default:"edit"},keyMap:{type:Object,default:function(){}},fields:{type:Object,default:function(){}},sheetId:{type:String,default:""},relativeQuery:{type:Array,default:function(){return[]}},emptyTip:{type:String,default:"暂无数据"}},data:function(){return{fieldProps:{id:this.code,label:this.label||this.title,valueReviewTpl:"已选{0}",emptyTip:this.emptyTip},curValue:[],data:[],searchResult:[],multi:!0,showViewPopup:!1,store:l["a"]}},computed:{multiTexts:function(){var t=this;return this.curValue.map((function(e){return f({text:t.renderItemName(e),subtext:t.renderItemLabel(e)},e)}))},valueIds:function(){var t=this;return this.curValue.map((function(e){return e[t.keyMap.id]}))}},watch:{value:{handler:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.curValue=t,this.$emit("change",this.code,t)},immediate:!0}},provide:function(){return{beforeClick:this.beforeClick}},created:function(){var t=this;this.relativeQuery.forEach((function(e){switch(e){case"contract":t.$watch("store.contracts",(function(){t.curValue=[]}));break;case"project":t.$watch("store.project",(function(){t.curValue=[]}));break}}))},methods:{beforeClick:function(){return"edit"!==this.mode||this.beforeEdit()?this.getBizData():Promise.reject(null)},load:function(t,e){this.getBizData(t).then((function(t){e&&e(t.total)}))},getBizData:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{page_index:1,page_size:20},a=f({},e);l["a"].change_type&&(a.change_type=l["a"].change_type),this.relativeQuery.forEach((function(e){switch(e){case"contract":l["a"].contracts[0]&&(a.contract_id=l["a"].contracts[0].contract_id);break;case"project":l["a"].project&&(a.project_id=Object(d["a"])(l["a"].project));break;case"bizType":a.filter_biz_type=l["a"].bizType;break;case"bizId":t.sheetId&&(a.filter_biz_id=t.sheetId);break}}));var i=this.sui.showIndicator();return this.pagingFun(a).then((function(a){if(a&&a.data){var i=a.data;return i=i.map((function(e){return f(f({},e),{},{text:t.renderItemName(e),subtext:t.renderItemLabel(e),origOption:e})})),e.keyword?e.page_index>1?t.searchResult=t.searchResult.concat(i):t.searchResult=i:e.page_index>1?t.data=t.data.concat(i):t.data=i,a}})).finally((function(){i.clear()}))},onChange:function(t,e){this.curValue=e.map((function(t){return t.origOption})),this.$emit("change",this.code,this.curValue)},getType:function(t){return this.fields[t]?this.fields[t].type:"text"},getTextByTmpl:function(t,e){var a=this,i=t.replace(/{{(.*?)}}/,(function(t,i){return h(i,e[i],a.getType(i))}));return i},renderItemName:function(t){var e=this.popup.text;return this.getTextByTmpl(e,t)},renderItemLabel:function(t){var e=this,a=this.popup.subtext;return Array.isArray(a)?a.map((function(a){return e.getTextByTmpl(a,t)})):this.getTextByTmpl(a,t)},validateRequirement:function(){var t={flag:!0,msg:""};return this.isRequire?(this.curValue.length||(t.flag=!1,t.msg="".concat(this.label," 不能为空")),t):t},getData:function(){return this.curValue},openViewPopup:function(){this.showViewPopup=!0},closeViewPopup:function(){this.showViewPopup=!1},onViewItemClick:function(t){this.detailItemClick(t)},deleteSelected:function(t){this.curValue.splice(t,1)}}},b=m,g=(a("e599"),a("c701")),v=Object(g["a"])(b,s,c,!1,null,"17d92568",null),x=v.exports,y=a("1f0e"),_=a("dd13");function w(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,i)}return a}function O(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?w(Object(a),!0).forEach((function(e){Object(o["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):w(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var k={name:"RelativeFieldGroup",components:{RelativeField:x},inheritAttrs:!1,props:{layouts:{type:Array,default:function(){return[]}},data:{type:Object,default:function(){}},mode:{type:String,default:"edit"}},data:function(){return{relativeFields:[]}},inject:{importRef:{from:"importRef",default:function(){return function(){return null}}}},watch:{layouts:{handler:function(t){var e=this,a=[];t.forEach((function(t){var i=t.code,n=t.enable,o=t.req,s=Object(r["a"])(t,["code","enable","req"]),c=Object(y["a"])(n,l["a"].bizType,l["a"].changeType);if(c){var u=Object(y["b"])(o,l["a"].bizType),d=O(O({code:i,isRequire:u},_["a"][i]||{}),s);e.data&&e.data[i]&&(d=O(O({},d),{},{value:e.data[i]})),a.push(d)}})),this.relativeFields=a,this.$nextTick((function(){e.relativeFields.forEach((function(t){var a=t.code;e.$refs[a]&&e.importRef(a,e.$refs[a][0])}))}))},immediate:!0},data:function(t){0===Object.keys(t).length&&this.relativeFields.forEach((function(t){t.value=[],t.valueObj=[]}))}},methods:{getData:function(){var t={};for(var e in this.$refs){var a=this.$refs[e][0];t[a.saveId]=a.getData()}return t},validateRequirement:function(){var t={flag:!0,msg:""};for(var e in this.$refs){var a=this.$refs[e][0];if(t=a.validateRequirement(),!t.flag)return t}return t}}},C=k,S=(a("7e6a"),Object(g["a"])(C,i,n,!1,null,"7a573734",null));e["a"]=S.exports},2041:function(t,e,a){e=t.exports=a("690e")(!1),e.push([t.i,'.gcxt[data-v-2c34f16a] :export{colorPrimary:#2c5cf7;headerBackgroundColor:#fff;headerTextColor:#333}.gcxt .attchment-list[data-v-2c34f16a]{background:#fff}.gcxt .restrict-setting-label[data-v-2c34f16a]{padding:13px 15px;background:#fff;position:relative}.gcxt .restrict-setting-label[data-v-2c34f16a]:before{bottom:0;content:" ";position:absolute;z-index:1;right:0;border-top:1px solid #ececec;-webkit-transform:scaleY(.5);transform:scaleY(.5);left:0}.gcxt .attachment-name[data-v-2c34f16a]{vertical-align:middle;color:#666;font-size:14px}.gcxt .attachment-remark[data-v-2c34f16a],.gcxt .attachment-required[data-v-2c34f16a]{display:inline-block;vertical-align:middle;color:#c8c8c8;margin-left:2px;font-size:14px}',""])},"224b":function(t,e,a){"use strict";a("d1c1")},"23a3":function(t,e,a){var i=a("1642");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var n=a("85cb").default;n("4884a216",i,!0,{sourceMap:!1,shadowMode:!1})},"244f":function(t,e,a){"use strict";var i=a("dd13");e["a"]={getValueObjByDetail:function(t){var e={};for(var a in i["a"]){var n=i["a"][a].saveId;if(n in t){var o=t[n];e[a]=o}}return e}}},2465:function(t,e,a){"use strict";a("b64f")},2480:function(t,e,a){"use strict";
/**!
 * Sortable 1.10.2
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */
function i(t){return i="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i(t)}function n(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function o(){return o=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(t[i]=a[i])}return t},o.apply(this,arguments)}function r(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{},i=Object.keys(a);"function"===typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(a).filter((function(t){return Object.getOwnPropertyDescriptor(a,t).enumerable})))),i.forEach((function(e){n(t,e,a[e])}))}return t}function s(t,e){if(null==t)return{};var a,i,n={},o=Object.keys(t);for(i=0;i<o.length;i++)a=o[i],e.indexOf(a)>=0||(n[a]=t[a]);return n}function c(t,e){if(null==t)return{};var a,i,n=s(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)a=o[i],e.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(t,a)&&(n[a]=t[a])}return n}function l(t){return u(t)||d(t)||p()}function u(t){if(Array.isArray(t)){for(var e=0,a=new Array(t.length);e<t.length;e++)a[e]=t[e];return a}}function d(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}function p(){throw new TypeError("Invalid attempt to spread non-iterable instance")}a.r(e),a.d(e,"MultiDrag",(function(){return Re})),a.d(e,"Sortable",(function(){return Zt})),a.d(e,"Swap",(function(){return Se}));var f="1.10.2";function h(t){if("undefined"!==typeof window&&window.navigator)return!!navigator.userAgent.match(t)}var m=h(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),b=h(/Edge/i),g=h(/firefox/i),v=h(/safari/i)&&!h(/chrome/i)&&!h(/android/i),x=h(/iP(ad|od|hone)/i),y=h(/chrome/i)&&h(/android/i),_={capture:!1,passive:!1};function w(t,e,a){t.addEventListener(e,a,!m&&_)}function O(t,e,a){t.removeEventListener(e,a,!m&&_)}function k(t,e){if(e){if(">"===e[0]&&(e=e.substring(1)),t)try{if(t.matches)return t.matches(e);if(t.msMatchesSelector)return t.msMatchesSelector(e);if(t.webkitMatchesSelector)return t.webkitMatchesSelector(e)}catch(a){return!1}return!1}}function C(t){return t.host&&t!==document&&t.host.nodeType?t.host:t.parentNode}function S(t,e,a,i){if(t){a=a||document;do{if(null!=e&&(">"===e[0]?t.parentNode===a&&k(t,e):k(t,e))||i&&t===a)return t;if(t===a)break}while(t=C(t))}return null}var j,E=/\s+/g;function P(t,e,a){if(t&&e)if(t.classList)t.classList[a?"add":"remove"](e);else{var i=(" "+t.className+" ").replace(E," ").replace(" "+e+" "," ");t.className=(i+(a?" "+e:"")).replace(E," ")}}function F(t,e,a){var i=t&&t.style;if(i){if(void 0===a)return document.defaultView&&document.defaultView.getComputedStyle?a=document.defaultView.getComputedStyle(t,""):t.currentStyle&&(a=t.currentStyle),void 0===e?a:a[e];e in i||-1!==e.indexOf("webkit")||(e="-webkit-"+e),i[e]=a+("string"===typeof a?"":"px")}}function M(t,e){var a="";if("string"===typeof t)a=t;else do{var i=F(t,"transform");i&&"none"!==i&&(a=i+" "+a)}while(!e&&(t=t.parentNode));var n=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return n&&new n(a)}function T(t,e,a){if(t){var i=t.getElementsByTagName(e),n=0,o=i.length;if(a)for(;n<o;n++)a(i[n],n);return i}return[]}function D(){var t=document.scrollingElement;return t||document.documentElement}function A(t,e,a,i,n){if(t.getBoundingClientRect||t===window){var o,r,s,c,l,u,d;if(t!==window&&t!==D()?(o=t.getBoundingClientRect(),r=o.top,s=o.left,c=o.bottom,l=o.right,u=o.height,d=o.width):(r=0,s=0,c=window.innerHeight,l=window.innerWidth,u=window.innerHeight,d=window.innerWidth),(e||a)&&t!==window&&(n=n||t.parentNode,!m))do{if(n&&n.getBoundingClientRect&&("none"!==F(n,"transform")||a&&"static"!==F(n,"position"))){var p=n.getBoundingClientRect();r-=p.top+parseInt(F(n,"border-top-width")),s-=p.left+parseInt(F(n,"border-left-width")),c=r+o.height,l=s+o.width;break}}while(n=n.parentNode);if(i&&t!==window){var f=M(n||t),h=f&&f.a,b=f&&f.d;f&&(r/=b,s/=h,d/=h,u/=b,c=r+u,l=s+d)}return{top:r,left:s,bottom:c,right:l,width:d,height:u}}}function I(t,e,a){var i=$(t,!0),n=A(t)[e];while(i){var o=A(i)[a],r=void 0;if(r="top"===a||"left"===a?n>=o:n<=o,!r)return i;if(i===D())break;i=$(i,!1)}return!1}function L(t,e,a){var i=0,n=0,o=t.children;while(n<o.length){if("none"!==o[n].style.display&&o[n]!==Zt.ghost&&o[n]!==Zt.dragged&&S(o[n],a.draggable,t,!1)){if(i===e)return o[n];i++}n++}return null}function z(t,e){var a=t.lastElementChild;while(a&&(a===Zt.ghost||"none"===F(a,"display")||e&&!k(a,e)))a=a.previousElementSibling;return a||null}function R(t,e){var a=0;if(!t||!t.parentNode)return-1;while(t=t.previousElementSibling)"TEMPLATE"===t.nodeName.toUpperCase()||t===Zt.clone||e&&!k(t,e)||a++;return a}function N(t){var e=0,a=0,i=D();if(t)do{var n=M(t),o=n.a,r=n.d;e+=t.scrollLeft*o,a+=t.scrollTop*r}while(t!==i&&(t=t.parentNode));return[e,a]}function B(t,e){for(var a in t)if(t.hasOwnProperty(a))for(var i in e)if(e.hasOwnProperty(i)&&e[i]===t[a][i])return Number(a);return-1}function $(t,e){if(!t||!t.getBoundingClientRect)return D();var a=t,i=!1;do{if(a.clientWidth<a.scrollWidth||a.clientHeight<a.scrollHeight){var n=F(a);if(a.clientWidth<a.scrollWidth&&("auto"==n.overflowX||"scroll"==n.overflowX)||a.clientHeight<a.scrollHeight&&("auto"==n.overflowY||"scroll"==n.overflowY)){if(!a.getBoundingClientRect||a===document.body)return D();if(i||e)return a;i=!0}}}while(a=a.parentNode);return D()}function U(t,e){if(t&&e)for(var a in e)e.hasOwnProperty(a)&&(t[a]=e[a]);return t}function Y(t,e){return Math.round(t.top)===Math.round(e.top)&&Math.round(t.left)===Math.round(e.left)&&Math.round(t.height)===Math.round(e.height)&&Math.round(t.width)===Math.round(e.width)}function V(t,e){return function(){if(!j){var a=arguments,i=this;1===a.length?t.call(i,a[0]):t.apply(i,a),j=setTimeout((function(){j=void 0}),e)}}}function q(){clearTimeout(j),j=void 0}function H(t,e,a){t.scrollLeft+=e,t.scrollTop+=a}function G(t){var e=window.Polymer,a=window.jQuery||window.Zepto;return e&&e.dom?e.dom(t).cloneNode(!0):a?a(t).clone(!0)[0]:t.cloneNode(!0)}function K(t,e){F(t,"position","absolute"),F(t,"top",e.top),F(t,"left",e.left),F(t,"width",e.width),F(t,"height",e.height)}function X(t){F(t,"position",""),F(t,"top",""),F(t,"left",""),F(t,"width",""),F(t,"height","")}var W="Sortable"+(new Date).getTime();function J(){var t,e=[];return{captureAnimationState:function(){if(e=[],this.options.animation){var t=[].slice.call(this.el.children);t.forEach((function(t){if("none"!==F(t,"display")&&t!==Zt.ghost){e.push({target:t,rect:A(t)});var a=r({},e[e.length-1].rect);if(t.thisAnimationDuration){var i=M(t,!0);i&&(a.top-=i.f,a.left-=i.e)}t.fromRect=a}}))}},addAnimationState:function(t){e.push(t)},removeAnimationState:function(t){e.splice(B(e,{target:t}),1)},animateAll:function(a){var i=this;if(!this.options.animation)return clearTimeout(t),void("function"===typeof a&&a());var n=!1,o=0;e.forEach((function(t){var e=0,a=t.target,r=a.fromRect,s=A(a),c=a.prevFromRect,l=a.prevToRect,u=t.rect,d=M(a,!0);d&&(s.top-=d.f,s.left-=d.e),a.toRect=s,a.thisAnimationDuration&&Y(c,s)&&!Y(r,s)&&(u.top-s.top)/(u.left-s.left)===(r.top-s.top)/(r.left-s.left)&&(e=Q(u,c,l,i.options)),Y(s,r)||(a.prevFromRect=r,a.prevToRect=s,e||(e=i.options.animation),i.animate(a,u,s,e)),e&&(n=!0,o=Math.max(o,e),clearTimeout(a.animationResetTimer),a.animationResetTimer=setTimeout((function(){a.animationTime=0,a.prevFromRect=null,a.fromRect=null,a.prevToRect=null,a.thisAnimationDuration=null}),e),a.thisAnimationDuration=e)})),clearTimeout(t),n?t=setTimeout((function(){"function"===typeof a&&a()}),o):"function"===typeof a&&a(),e=[]},animate:function(t,e,a,i){if(i){F(t,"transition",""),F(t,"transform","");var n=M(this.el),o=n&&n.a,r=n&&n.d,s=(e.left-a.left)/(o||1),c=(e.top-a.top)/(r||1);t.animatingX=!!s,t.animatingY=!!c,F(t,"transform","translate3d("+s+"px,"+c+"px,0)"),Z(t),F(t,"transition","transform "+i+"ms"+(this.options.easing?" "+this.options.easing:"")),F(t,"transform","translate3d(0,0,0)"),"number"===typeof t.animated&&clearTimeout(t.animated),t.animated=setTimeout((function(){F(t,"transition",""),F(t,"transform",""),t.animated=!1,t.animatingX=!1,t.animatingY=!1}),i)}}}}function Z(t){return t.offsetWidth}function Q(t,e,a,i){return Math.sqrt(Math.pow(e.top-t.top,2)+Math.pow(e.left-t.left,2))/Math.sqrt(Math.pow(e.top-a.top,2)+Math.pow(e.left-a.left,2))*i.animation}var tt=[],et={initializeByDefault:!0},at={mount:function(t){for(var e in et)et.hasOwnProperty(e)&&!(e in t)&&(t[e]=et[e]);tt.push(t)},pluginEvent:function(t,e,a){var i=this;this.eventCanceled=!1,a.cancel=function(){i.eventCanceled=!0};var n=t+"Global";tt.forEach((function(i){e[i.pluginName]&&(e[i.pluginName][n]&&e[i.pluginName][n](r({sortable:e},a)),e.options[i.pluginName]&&e[i.pluginName][t]&&e[i.pluginName][t](r({sortable:e},a)))}))},initializePlugins:function(t,e,a,i){for(var n in tt.forEach((function(i){var n=i.pluginName;if(t.options[n]||i.initializeByDefault){var r=new i(t,e,t.options);r.sortable=t,r.options=t.options,t[n]=r,o(a,r.defaults)}})),t.options)if(t.options.hasOwnProperty(n)){var r=this.modifyOption(t,n,t.options[n]);"undefined"!==typeof r&&(t.options[n]=r)}},getEventProperties:function(t,e){var a={};return tt.forEach((function(i){"function"===typeof i.eventProperties&&o(a,i.eventProperties.call(e[i.pluginName],t))})),a},modifyOption:function(t,e,a){var i;return tt.forEach((function(n){t[n.pluginName]&&n.optionListeners&&"function"===typeof n.optionListeners[e]&&(i=n.optionListeners[e].call(t[n.pluginName],a))})),i}};function it(t){var e=t.sortable,a=t.rootEl,i=t.name,n=t.targetEl,o=t.cloneEl,s=t.toEl,c=t.fromEl,l=t.oldIndex,u=t.newIndex,d=t.oldDraggableIndex,p=t.newDraggableIndex,f=t.originalEvent,h=t.putSortable,g=t.extraEventProperties;if(e=e||a&&a[W],e){var v,x=e.options,y="on"+i.charAt(0).toUpperCase()+i.substr(1);!window.CustomEvent||m||b?(v=document.createEvent("Event"),v.initEvent(i,!0,!0)):v=new CustomEvent(i,{bubbles:!0,cancelable:!0}),v.to=s||a,v.from=c||a,v.item=n||a,v.clone=o,v.oldIndex=l,v.newIndex=u,v.oldDraggableIndex=d,v.newDraggableIndex=p,v.originalEvent=f,v.pullMode=h?h.lastPutMode:void 0;var _=r({},g,at.getEventProperties(i,e));for(var w in _)v[w]=_[w];a&&a.dispatchEvent(v),x[y]&&x[y].call(e,v)}}var nt=function(t,e){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=a.evt,n=c(a,["evt"]);at.pluginEvent.bind(Zt)(t,e,r({dragEl:rt,parentEl:st,ghostEl:ct,rootEl:lt,nextEl:ut,lastDownEl:dt,cloneEl:pt,cloneHidden:ft,dragStarted:St,putSortable:xt,activeSortable:Zt.active,originalEvent:i,oldIndex:ht,oldDraggableIndex:bt,newIndex:mt,newDraggableIndex:gt,hideGhostForTarget:Kt,unhideGhostForTarget:Xt,cloneNowHidden:function(){ft=!0},cloneNowShown:function(){ft=!1},dispatchSortableEvent:function(t){ot({sortable:e,name:t,originalEvent:i})}},n))};function ot(t){it(r({putSortable:xt,cloneEl:pt,targetEl:rt,rootEl:lt,oldIndex:ht,oldDraggableIndex:bt,newIndex:mt,newDraggableIndex:gt},t))}var rt,st,ct,lt,ut,dt,pt,ft,ht,mt,bt,gt,vt,xt,yt,_t,wt,Ot,kt,Ct,St,jt,Et,Pt,Ft,Mt=!1,Tt=!1,Dt=[],At=!1,It=!1,Lt=[],zt=!1,Rt=[],Nt="undefined"!==typeof document,Bt=x,$t=b||m?"cssFloat":"float",Ut=Nt&&!y&&!x&&"draggable"in document.createElement("div"),Yt=function(){if(Nt){if(m)return!1;var t=document.createElement("x");return t.style.cssText="pointer-events:auto","auto"===t.style.pointerEvents}}(),Vt=function(t,e){var a=F(t),i=parseInt(a.width)-parseInt(a.paddingLeft)-parseInt(a.paddingRight)-parseInt(a.borderLeftWidth)-parseInt(a.borderRightWidth),n=L(t,0,e),o=L(t,1,e),r=n&&F(n),s=o&&F(o),c=r&&parseInt(r.marginLeft)+parseInt(r.marginRight)+A(n).width,l=s&&parseInt(s.marginLeft)+parseInt(s.marginRight)+A(o).width;if("flex"===a.display)return"column"===a.flexDirection||"column-reverse"===a.flexDirection?"vertical":"horizontal";if("grid"===a.display)return a.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(n&&r["float"]&&"none"!==r["float"]){var u="left"===r["float"]?"left":"right";return!o||"both"!==s.clear&&s.clear!==u?"horizontal":"vertical"}return n&&("block"===r.display||"flex"===r.display||"table"===r.display||"grid"===r.display||c>=i&&"none"===a[$t]||o&&"none"===a[$t]&&c+l>i)?"vertical":"horizontal"},qt=function(t,e,a){var i=a?t.left:t.top,n=a?t.right:t.bottom,o=a?t.width:t.height,r=a?e.left:e.top,s=a?e.right:e.bottom,c=a?e.width:e.height;return i===r||n===s||i+o/2===r+c/2},Ht=function(t,e){var a;return Dt.some((function(i){if(!z(i)){var n=A(i),o=i[W].options.emptyInsertThreshold,r=t>=n.left-o&&t<=n.right+o,s=e>=n.top-o&&e<=n.bottom+o;return o&&r&&s?a=i:void 0}})),a},Gt=function(t){function e(t,a){return function(i,n,o,r){var s=i.options.group.name&&n.options.group.name&&i.options.group.name===n.options.group.name;if(null==t&&(a||s))return!0;if(null==t||!1===t)return!1;if(a&&"clone"===t)return t;if("function"===typeof t)return e(t(i,n,o,r),a)(i,n,o,r);var c=(a?i:n).options.group.name;return!0===t||"string"===typeof t&&t===c||t.join&&t.indexOf(c)>-1}}var a={},n=t.group;n&&"object"==i(n)||(n={name:n}),a.name=n.name,a.checkPull=e(n.pull,!0),a.checkPut=e(n.put),a.revertClone=n.revertClone,t.group=a},Kt=function(){!Yt&&ct&&F(ct,"display","none")},Xt=function(){!Yt&&ct&&F(ct,"display","")};Nt&&document.addEventListener("click",(function(t){if(Tt)return t.preventDefault(),t.stopPropagation&&t.stopPropagation(),t.stopImmediatePropagation&&t.stopImmediatePropagation(),Tt=!1,!1}),!0);var Wt=function(t){if(rt){t=t.touches?t.touches[0]:t;var e=Ht(t.clientX,t.clientY);if(e){var a={};for(var i in t)t.hasOwnProperty(i)&&(a[i]=t[i]);a.target=a.rootEl=e,a.preventDefault=void 0,a.stopPropagation=void 0,e[W]._onDragOver(a)}}},Jt=function(t){rt&&rt.parentNode[W]._isOutsideThisEl(t.target)};function Zt(t,e){if(!t||!t.nodeType||1!==t.nodeType)throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(t));this.el=t,this.options=e=o({},e),t[W]=this;var a={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(t.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return Vt(t,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(t,e){t.setData("Text",e.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:!1!==Zt.supportPointer&&"PointerEvent"in window,emptyInsertThreshold:5};for(var i in at.initializePlugins(this,t,a),a)!(i in e)&&(e[i]=a[i]);for(var n in Gt(e),this)"_"===n.charAt(0)&&"function"===typeof this[n]&&(this[n]=this[n].bind(this));this.nativeDraggable=!e.forceFallback&&Ut,this.nativeDraggable&&(this.options.touchStartThreshold=1),e.supportPointer?w(t,"pointerdown",this._onTapStart):(w(t,"mousedown",this._onTapStart),w(t,"touchstart",this._onTapStart)),this.nativeDraggable&&(w(t,"dragover",this),w(t,"dragenter",this)),Dt.push(this.el),e.store&&e.store.get&&this.sort(e.store.get(this)||[]),o(this,J())}function Qt(t){t.dataTransfer&&(t.dataTransfer.dropEffect="move"),t.cancelable&&t.preventDefault()}function te(t,e,a,i,n,o,r,s){var c,l,u=t[W],d=u.options.onMove;return!window.CustomEvent||m||b?(c=document.createEvent("Event"),c.initEvent("move",!0,!0)):c=new CustomEvent("move",{bubbles:!0,cancelable:!0}),c.to=e,c.from=t,c.dragged=a,c.draggedRect=i,c.related=n||e,c.relatedRect=o||A(e),c.willInsertAfter=s,c.originalEvent=r,t.dispatchEvent(c),d&&(l=d.call(u,c,r)),l}function ee(t){t.draggable=!1}function ae(){zt=!1}function ie(t,e,a){var i=A(z(a.el,a.options.draggable)),n=10;return e?t.clientX>i.right+n||t.clientX<=i.right&&t.clientY>i.bottom&&t.clientX>=i.left:t.clientX>i.right&&t.clientY>i.top||t.clientX<=i.right&&t.clientY>i.bottom+n}function ne(t,e,a,i,n,o,r,s){var c=i?t.clientY:t.clientX,l=i?a.height:a.width,u=i?a.top:a.left,d=i?a.bottom:a.right,p=!1;if(!r)if(s&&Pt<l*n){if(!At&&(1===Et?c>u+l*o/2:c<d-l*o/2)&&(At=!0),At)p=!0;else if(1===Et?c<u+Pt:c>d-Pt)return-Et}else if(c>u+l*(1-n)/2&&c<d-l*(1-n)/2)return oe(e);return p=p||r,p&&(c<u+l*o/2||c>d-l*o/2)?c>u+l/2?1:-1:0}function oe(t){return R(rt)<R(t)?1:-1}function re(t){var e=t.tagName+t.className+t.src+t.href+t.textContent,a=e.length,i=0;while(a--)i+=e.charCodeAt(a);return i.toString(36)}function se(t){Rt.length=0;var e=t.getElementsByTagName("input"),a=e.length;while(a--){var i=e[a];i.checked&&Rt.push(i)}}function ce(t){return setTimeout(t,0)}function le(t){return clearTimeout(t)}Zt.prototype={constructor:Zt,_isOutsideThisEl:function(t){this.el.contains(t)||t===this.el||(jt=null)},_getDirection:function(t,e){return"function"===typeof this.options.direction?this.options.direction.call(this,t,e,rt):this.options.direction},_onTapStart:function(t){if(t.cancelable){var e=this,a=this.el,i=this.options,n=i.preventOnFilter,o=t.type,r=t.touches&&t.touches[0]||t.pointerType&&"touch"===t.pointerType&&t,s=(r||t).target,c=t.target.shadowRoot&&(t.path&&t.path[0]||t.composedPath&&t.composedPath()[0])||s,l=i.filter;if(se(a),!rt&&!(/mousedown|pointerdown/.test(o)&&0!==t.button||i.disabled)&&!c.isContentEditable&&(s=S(s,i.draggable,a,!1),(!s||!s.animated)&&dt!==s)){if(ht=R(s),bt=R(s,i.draggable),"function"===typeof l){if(l.call(this,t,s,this))return ot({sortable:e,rootEl:c,name:"filter",targetEl:s,toEl:a,fromEl:a}),nt("filter",e,{evt:t}),void(n&&t.cancelable&&t.preventDefault())}else if(l&&(l=l.split(",").some((function(i){if(i=S(c,i.trim(),a,!1),i)return ot({sortable:e,rootEl:i,name:"filter",targetEl:s,fromEl:a,toEl:a}),nt("filter",e,{evt:t}),!0})),l))return void(n&&t.cancelable&&t.preventDefault());i.handle&&!S(c,i.handle,a,!1)||this._prepareDragStart(t,r,s)}}},_prepareDragStart:function(t,e,a){var i,n=this,o=n.el,r=n.options,s=o.ownerDocument;if(a&&!rt&&a.parentNode===o){var c=A(a);if(lt=o,rt=a,st=rt.parentNode,ut=rt.nextSibling,dt=a,vt=r.group,Zt.dragged=rt,yt={target:rt,clientX:(e||t).clientX,clientY:(e||t).clientY},kt=yt.clientX-c.left,Ct=yt.clientY-c.top,this._lastX=(e||t).clientX,this._lastY=(e||t).clientY,rt.style["will-change"]="all",i=function(){nt("delayEnded",n,{evt:t}),Zt.eventCanceled?n._onDrop():(n._disableDelayedDragEvents(),!g&&n.nativeDraggable&&(rt.draggable=!0),n._triggerDragStart(t,e),ot({sortable:n,name:"choose",originalEvent:t}),P(rt,r.chosenClass,!0))},r.ignore.split(",").forEach((function(t){T(rt,t.trim(),ee)})),w(s,"dragover",Wt),w(s,"mousemove",Wt),w(s,"touchmove",Wt),w(s,"mouseup",n._onDrop),w(s,"touchend",n._onDrop),w(s,"touchcancel",n._onDrop),g&&this.nativeDraggable&&(this.options.touchStartThreshold=4,rt.draggable=!0),nt("delayStart",this,{evt:t}),!r.delay||r.delayOnTouchOnly&&!e||this.nativeDraggable&&(b||m))i();else{if(Zt.eventCanceled)return void this._onDrop();w(s,"mouseup",n._disableDelayedDrag),w(s,"touchend",n._disableDelayedDrag),w(s,"touchcancel",n._disableDelayedDrag),w(s,"mousemove",n._delayedDragTouchMoveHandler),w(s,"touchmove",n._delayedDragTouchMoveHandler),r.supportPointer&&w(s,"pointermove",n._delayedDragTouchMoveHandler),n._dragStartTimer=setTimeout(i,r.delay)}}},_delayedDragTouchMoveHandler:function(t){var e=t.touches?t.touches[0]:t;Math.max(Math.abs(e.clientX-this._lastX),Math.abs(e.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){rt&&ee(rt),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var t=this.el.ownerDocument;O(t,"mouseup",this._disableDelayedDrag),O(t,"touchend",this._disableDelayedDrag),O(t,"touchcancel",this._disableDelayedDrag),O(t,"mousemove",this._delayedDragTouchMoveHandler),O(t,"touchmove",this._delayedDragTouchMoveHandler),O(t,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(t,e){e=e||"touch"==t.pointerType&&t,!this.nativeDraggable||e?this.options.supportPointer?w(document,"pointermove",this._onTouchMove):w(document,e?"touchmove":"mousemove",this._onTouchMove):(w(rt,"dragend",this),w(lt,"dragstart",this._onDragStart));try{document.selection?ce((function(){document.selection.empty()})):window.getSelection().removeAllRanges()}catch(a){}},_dragStarted:function(t,e){if(Mt=!1,lt&&rt){nt("dragStarted",this,{evt:e}),this.nativeDraggable&&w(document,"dragover",Jt);var a=this.options;!t&&P(rt,a.dragClass,!1),P(rt,a.ghostClass,!0),Zt.active=this,t&&this._appendGhost(),ot({sortable:this,name:"start",originalEvent:e})}else this._nulling()},_emulateDragOver:function(){if(_t){this._lastX=_t.clientX,this._lastY=_t.clientY,Kt();var t=document.elementFromPoint(_t.clientX,_t.clientY),e=t;while(t&&t.shadowRoot){if(t=t.shadowRoot.elementFromPoint(_t.clientX,_t.clientY),t===e)break;e=t}if(rt.parentNode[W]._isOutsideThisEl(t),e)do{if(e[W]){var a=void 0;if(a=e[W]._onDragOver({clientX:_t.clientX,clientY:_t.clientY,target:t,rootEl:e}),a&&!this.options.dragoverBubble)break}t=e}while(e=e.parentNode);Xt()}},_onTouchMove:function(t){if(yt){var e=this.options,a=e.fallbackTolerance,i=e.fallbackOffset,n=t.touches?t.touches[0]:t,o=ct&&M(ct,!0),r=ct&&o&&o.a,s=ct&&o&&o.d,c=Bt&&Ft&&N(Ft),l=(n.clientX-yt.clientX+i.x)/(r||1)+(c?c[0]-Lt[0]:0)/(r||1),u=(n.clientY-yt.clientY+i.y)/(s||1)+(c?c[1]-Lt[1]:0)/(s||1);if(!Zt.active&&!Mt){if(a&&Math.max(Math.abs(n.clientX-this._lastX),Math.abs(n.clientY-this._lastY))<a)return;this._onDragStart(t,!0)}if(ct){o?(o.e+=l-(wt||0),o.f+=u-(Ot||0)):o={a:1,b:0,c:0,d:1,e:l,f:u};var d="matrix(".concat(o.a,",").concat(o.b,",").concat(o.c,",").concat(o.d,",").concat(o.e,",").concat(o.f,")");F(ct,"webkitTransform",d),F(ct,"mozTransform",d),F(ct,"msTransform",d),F(ct,"transform",d),wt=l,Ot=u,_t=n}t.cancelable&&t.preventDefault()}},_appendGhost:function(){if(!ct){var t=this.options.fallbackOnBody?document.body:lt,e=A(rt,!0,Bt,!0,t),a=this.options;if(Bt){Ft=t;while("static"===F(Ft,"position")&&"none"===F(Ft,"transform")&&Ft!==document)Ft=Ft.parentNode;Ft!==document.body&&Ft!==document.documentElement?(Ft===document&&(Ft=D()),e.top+=Ft.scrollTop,e.left+=Ft.scrollLeft):Ft=D(),Lt=N(Ft)}ct=rt.cloneNode(!0),P(ct,a.ghostClass,!1),P(ct,a.fallbackClass,!0),P(ct,a.dragClass,!0),F(ct,"transition",""),F(ct,"transform",""),F(ct,"box-sizing","border-box"),F(ct,"margin",0),F(ct,"top",e.top),F(ct,"left",e.left),F(ct,"width",e.width),F(ct,"height",e.height),F(ct,"opacity","0.8"),F(ct,"position",Bt?"absolute":"fixed"),F(ct,"zIndex","100000"),F(ct,"pointerEvents","none"),Zt.ghost=ct,t.appendChild(ct),F(ct,"transform-origin",kt/parseInt(ct.style.width)*100+"% "+Ct/parseInt(ct.style.height)*100+"%")}},_onDragStart:function(t,e){var a=this,i=t.dataTransfer,n=a.options;nt("dragStart",this,{evt:t}),Zt.eventCanceled?this._onDrop():(nt("setupClone",this),Zt.eventCanceled||(pt=G(rt),pt.draggable=!1,pt.style["will-change"]="",this._hideClone(),P(pt,this.options.chosenClass,!1),Zt.clone=pt),a.cloneId=ce((function(){nt("clone",a),Zt.eventCanceled||(a.options.removeCloneOnHide||lt.insertBefore(pt,rt),a._hideClone(),ot({sortable:a,name:"clone"}))})),!e&&P(rt,n.dragClass,!0),e?(Tt=!0,a._loopId=setInterval(a._emulateDragOver,50)):(O(document,"mouseup",a._onDrop),O(document,"touchend",a._onDrop),O(document,"touchcancel",a._onDrop),i&&(i.effectAllowed="move",n.setData&&n.setData.call(a,i,rt)),w(document,"drop",a),F(rt,"transform","translateZ(0)")),Mt=!0,a._dragStartId=ce(a._dragStarted.bind(a,e,t)),w(document,"selectstart",a),St=!0,v&&F(document.body,"user-select","none"))},_onDragOver:function(t){var e,a,i,n,o=this.el,s=t.target,c=this.options,l=c.group,u=Zt.active,d=vt===l,p=c.sort,f=xt||u,h=this,m=!1;if(!zt){if(void 0!==t.preventDefault&&t.cancelable&&t.preventDefault(),s=S(s,c.draggable,o,!0),T("dragOver"),Zt.eventCanceled)return m;if(rt.contains(t.target)||s.animated&&s.animatingX&&s.animatingY||h._ignoreWhileAnimating===s)return L(!1);if(Tt=!1,u&&!c.disabled&&(d?p||(i=!lt.contains(rt)):xt===this||(this.lastPutMode=vt.checkPull(this,u,rt,t))&&l.checkPut(this,u,rt,t))){if(n="vertical"===this._getDirection(t,s),e=A(rt),T("dragOverValid"),Zt.eventCanceled)return m;if(i)return st=lt,D(),this._hideClone(),T("revert"),Zt.eventCanceled||(ut?lt.insertBefore(rt,ut):lt.appendChild(rt)),L(!0);var b=z(o,c.draggable);if(!b||ie(t,n,this)&&!b.animated){if(b===rt)return L(!1);if(b&&o===t.target&&(s=b),s&&(a=A(s)),!1!==te(lt,o,rt,e,s,a,t,!!s))return D(),o.appendChild(rt),st=o,N(),L(!0)}else if(s.parentNode===o){a=A(s);var g,v,x=0,y=rt.parentNode!==o,_=!qt(rt.animated&&rt.toRect||e,s.animated&&s.toRect||a,n),w=n?"top":"left",O=I(s,"top","top")||I(rt,"top","top"),k=O?O.scrollTop:void 0;if(jt!==s&&(g=a[w],At=!1,It=!_&&c.invertSwap||y),x=ne(t,s,a,n,_?1:c.swapThreshold,null==c.invertedSwapThreshold?c.swapThreshold:c.invertedSwapThreshold,It,jt===s),0!==x){var C=R(rt);do{C-=x,v=st.children[C]}while(v&&("none"===F(v,"display")||v===ct))}if(0===x||v===s)return L(!1);jt=s,Et=x;var j=s.nextElementSibling,E=!1;E=1===x;var M=te(lt,o,rt,e,s,a,t,E);if(!1!==M)return 1!==M&&-1!==M||(E=1===M),zt=!0,setTimeout(ae,30),D(),E&&!j?o.appendChild(rt):s.parentNode.insertBefore(rt,E?j:s),O&&H(O,0,k-O.scrollTop),st=rt.parentNode,void 0===g||It||(Pt=Math.abs(g-A(s)[w])),N(),L(!0)}if(o.contains(rt))return L(!1)}return!1}function T(c,l){nt(c,h,r({evt:t,isOwner:d,axis:n?"vertical":"horizontal",revert:i,dragRect:e,targetRect:a,canSort:p,fromSortable:f,target:s,completed:L,onMove:function(a,i){return te(lt,o,rt,e,a,A(a),t,i)},changed:N},l))}function D(){T("dragOverAnimationCapture"),h.captureAnimationState(),h!==f&&f.captureAnimationState()}function L(e){return T("dragOverCompleted",{insertion:e}),e&&(d?u._hideClone():u._showClone(h),h!==f&&(P(rt,xt?xt.options.ghostClass:u.options.ghostClass,!1),P(rt,c.ghostClass,!0)),xt!==h&&h!==Zt.active?xt=h:h===Zt.active&&xt&&(xt=null),f===h&&(h._ignoreWhileAnimating=s),h.animateAll((function(){T("dragOverAnimationComplete"),h._ignoreWhileAnimating=null})),h!==f&&(f.animateAll(),f._ignoreWhileAnimating=null)),(s===rt&&!rt.animated||s===o&&!s.animated)&&(jt=null),c.dragoverBubble||t.rootEl||s===document||(rt.parentNode[W]._isOutsideThisEl(t.target),!e&&Wt(t)),!c.dragoverBubble&&t.stopPropagation&&t.stopPropagation(),m=!0}function N(){mt=R(rt),gt=R(rt,c.draggable),ot({sortable:h,name:"change",toEl:o,newIndex:mt,newDraggableIndex:gt,originalEvent:t})}},_ignoreWhileAnimating:null,_offMoveEvents:function(){O(document,"mousemove",this._onTouchMove),O(document,"touchmove",this._onTouchMove),O(document,"pointermove",this._onTouchMove),O(document,"dragover",Wt),O(document,"mousemove",Wt),O(document,"touchmove",Wt)},_offUpEvents:function(){var t=this.el.ownerDocument;O(t,"mouseup",this._onDrop),O(t,"touchend",this._onDrop),O(t,"pointerup",this._onDrop),O(t,"touchcancel",this._onDrop),O(document,"selectstart",this)},_onDrop:function(t){var e=this.el,a=this.options;mt=R(rt),gt=R(rt,a.draggable),nt("drop",this,{evt:t}),st=rt&&rt.parentNode,mt=R(rt),gt=R(rt,a.draggable),Zt.eventCanceled||(Mt=!1,It=!1,At=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),le(this.cloneId),le(this._dragStartId),this.nativeDraggable&&(O(document,"drop",this),O(e,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),v&&F(document.body,"user-select",""),F(rt,"transform",""),t&&(St&&(t.cancelable&&t.preventDefault(),!a.dropBubble&&t.stopPropagation()),ct&&ct.parentNode&&ct.parentNode.removeChild(ct),(lt===st||xt&&"clone"!==xt.lastPutMode)&&pt&&pt.parentNode&&pt.parentNode.removeChild(pt),rt&&(this.nativeDraggable&&O(rt,"dragend",this),ee(rt),rt.style["will-change"]="",St&&!Mt&&P(rt,xt?xt.options.ghostClass:this.options.ghostClass,!1),P(rt,this.options.chosenClass,!1),ot({sortable:this,name:"unchoose",toEl:st,newIndex:null,newDraggableIndex:null,originalEvent:t}),lt!==st?(mt>=0&&(ot({rootEl:st,name:"add",toEl:st,fromEl:lt,originalEvent:t}),ot({sortable:this,name:"remove",toEl:st,originalEvent:t}),ot({rootEl:st,name:"sort",toEl:st,fromEl:lt,originalEvent:t}),ot({sortable:this,name:"sort",toEl:st,originalEvent:t})),xt&&xt.save()):mt!==ht&&mt>=0&&(ot({sortable:this,name:"update",toEl:st,originalEvent:t}),ot({sortable:this,name:"sort",toEl:st,originalEvent:t})),Zt.active&&(null!=mt&&-1!==mt||(mt=ht,gt=bt),ot({sortable:this,name:"end",toEl:st,originalEvent:t}),this.save())))),this._nulling()},_nulling:function(){nt("nulling",this),lt=rt=st=ct=ut=pt=dt=ft=yt=_t=St=mt=gt=ht=bt=jt=Et=xt=vt=Zt.dragged=Zt.ghost=Zt.clone=Zt.active=null,Rt.forEach((function(t){t.checked=!0})),Rt.length=wt=Ot=0},handleEvent:function(t){switch(t.type){case"drop":case"dragend":this._onDrop(t);break;case"dragenter":case"dragover":rt&&(this._onDragOver(t),Qt(t));break;case"selectstart":t.preventDefault();break}},toArray:function(){for(var t,e=[],a=this.el.children,i=0,n=a.length,o=this.options;i<n;i++)t=a[i],S(t,o.draggable,this.el,!1)&&e.push(t.getAttribute(o.dataIdAttr)||re(t));return e},sort:function(t){var e={},a=this.el;this.toArray().forEach((function(t,i){var n=a.children[i];S(n,this.options.draggable,a,!1)&&(e[t]=n)}),this),t.forEach((function(t){e[t]&&(a.removeChild(e[t]),a.appendChild(e[t]))}))},save:function(){var t=this.options.store;t&&t.set&&t.set(this)},closest:function(t,e){return S(t,e||this.options.draggable,this.el,!1)},option:function(t,e){var a=this.options;if(void 0===e)return a[t];var i=at.modifyOption(this,t,e);a[t]="undefined"!==typeof i?i:e,"group"===t&&Gt(a)},destroy:function(){nt("destroy",this);var t=this.el;t[W]=null,O(t,"mousedown",this._onTapStart),O(t,"touchstart",this._onTapStart),O(t,"pointerdown",this._onTapStart),this.nativeDraggable&&(O(t,"dragover",this),O(t,"dragenter",this)),Array.prototype.forEach.call(t.querySelectorAll("[draggable]"),(function(t){t.removeAttribute("draggable")})),this._onDrop(),this._disableDelayedDragEvents(),Dt.splice(Dt.indexOf(this.el),1),this.el=t=null},_hideClone:function(){if(!ft){if(nt("hideClone",this),Zt.eventCanceled)return;F(pt,"display","none"),this.options.removeCloneOnHide&&pt.parentNode&&pt.parentNode.removeChild(pt),ft=!0}},_showClone:function(t){if("clone"===t.lastPutMode){if(ft){if(nt("showClone",this),Zt.eventCanceled)return;lt.contains(rt)&&!this.options.group.revertClone?lt.insertBefore(pt,rt):ut?lt.insertBefore(pt,ut):lt.appendChild(pt),this.options.group.revertClone&&this.animate(rt,pt),F(pt,"display",""),ft=!1}}else this._hideClone()}},Nt&&w(document,"touchmove",(function(t){(Zt.active||Mt)&&t.cancelable&&t.preventDefault()})),Zt.utils={on:w,off:O,css:F,find:T,is:function(t,e){return!!S(t,e,t,!1)},extend:U,throttle:V,closest:S,toggleClass:P,clone:G,index:R,nextTick:ce,cancelNextTick:le,detectDirection:Vt,getChild:L},Zt.get=function(t){return t[W]},Zt.mount=function(){for(var t=arguments.length,e=new Array(t),a=0;a<t;a++)e[a]=arguments[a];e[0].constructor===Array&&(e=e[0]),e.forEach((function(t){if(!t.prototype||!t.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(t));t.utils&&(Zt.utils=r({},Zt.utils,t.utils)),at.mount(t)}))},Zt.create=function(t,e){return new Zt(t,e)},Zt.version=f;var ue,de,pe,fe,he,me,be=[],ge=!1;function ve(){function t(){for(var t in this.defaults={scroll:!0,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0},this)"_"===t.charAt(0)&&"function"===typeof this[t]&&(this[t]=this[t].bind(this))}return t.prototype={dragStarted:function(t){var e=t.originalEvent;this.sortable.nativeDraggable?w(document,"dragover",this._handleAutoScroll):this.options.supportPointer?w(document,"pointermove",this._handleFallbackAutoScroll):e.touches?w(document,"touchmove",this._handleFallbackAutoScroll):w(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(t){var e=t.originalEvent;this.options.dragOverBubble||e.rootEl||this._handleAutoScroll(e)},drop:function(){this.sortable.nativeDraggable?O(document,"dragover",this._handleAutoScroll):(O(document,"pointermove",this._handleFallbackAutoScroll),O(document,"touchmove",this._handleFallbackAutoScroll),O(document,"mousemove",this._handleFallbackAutoScroll)),ye(),xe(),q()},nulling:function(){he=de=ue=ge=me=pe=fe=null,be.length=0},_handleFallbackAutoScroll:function(t){this._handleAutoScroll(t,!0)},_handleAutoScroll:function(t,e){var a=this,i=(t.touches?t.touches[0]:t).clientX,n=(t.touches?t.touches[0]:t).clientY,o=document.elementFromPoint(i,n);if(he=t,e||b||m||v){we(t,this.options,o,e);var r=$(o,!0);!ge||me&&i===pe&&n===fe||(me&&ye(),me=setInterval((function(){var o=$(document.elementFromPoint(i,n),!0);o!==r&&(r=o,xe()),we(t,a.options,o,e)}),10),pe=i,fe=n)}else{if(!this.options.bubbleScroll||$(o,!0)===D())return void xe();we(t,this.options,$(o,!1),!1)}}},o(t,{pluginName:"scroll",initializeByDefault:!0})}function xe(){be.forEach((function(t){clearInterval(t.pid)})),be=[]}function ye(){clearInterval(me)}var _e,we=V((function(t,e,a,i){if(e.scroll){var n,o=(t.touches?t.touches[0]:t).clientX,r=(t.touches?t.touches[0]:t).clientY,s=e.scrollSensitivity,c=e.scrollSpeed,l=D(),u=!1;de!==a&&(de=a,xe(),ue=e.scroll,n=e.scrollFn,!0===ue&&(ue=$(a,!0)));var d=0,p=ue;do{var f=p,h=A(f),m=h.top,b=h.bottom,g=h.left,v=h.right,x=h.width,y=h.height,_=void 0,w=void 0,O=f.scrollWidth,k=f.scrollHeight,C=F(f),S=f.scrollLeft,j=f.scrollTop;f===l?(_=x<O&&("auto"===C.overflowX||"scroll"===C.overflowX||"visible"===C.overflowX),w=y<k&&("auto"===C.overflowY||"scroll"===C.overflowY||"visible"===C.overflowY)):(_=x<O&&("auto"===C.overflowX||"scroll"===C.overflowX),w=y<k&&("auto"===C.overflowY||"scroll"===C.overflowY));var E=_&&(Math.abs(v-o)<=s&&S+x<O)-(Math.abs(g-o)<=s&&!!S),P=w&&(Math.abs(b-r)<=s&&j+y<k)-(Math.abs(m-r)<=s&&!!j);if(!be[d])for(var M=0;M<=d;M++)be[M]||(be[M]={});be[d].vx==E&&be[d].vy==P&&be[d].el===f||(be[d].el=f,be[d].vx=E,be[d].vy=P,clearInterval(be[d].pid),0==E&&0==P||(u=!0,be[d].pid=setInterval(function(){i&&0===this.layer&&Zt.active._onTouchMove(he);var e=be[this.layer].vy?be[this.layer].vy*c:0,a=be[this.layer].vx?be[this.layer].vx*c:0;"function"===typeof n&&"continue"!==n.call(Zt.dragged.parentNode[W],a,e,t,he,be[this.layer].el)||H(be[this.layer].el,a,e)}.bind({layer:d}),24))),d++}while(e.bubbleScroll&&p!==l&&(p=$(p,!1)));ge=u}}),30),Oe=function(t){var e=t.originalEvent,a=t.putSortable,i=t.dragEl,n=t.activeSortable,o=t.dispatchSortableEvent,r=t.hideGhostForTarget,s=t.unhideGhostForTarget;if(e){var c=a||n;r();var l=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:e,u=document.elementFromPoint(l.clientX,l.clientY);s(),c&&!c.el.contains(u)&&(o("spill"),this.onSpill({dragEl:i,putSortable:a}))}};function ke(){}function Ce(){}function Se(){function t(){this.defaults={swapClass:"sortable-swap-highlight"}}return t.prototype={dragStart:function(t){var e=t.dragEl;_e=e},dragOverValid:function(t){var e=t.completed,a=t.target,i=t.onMove,n=t.activeSortable,o=t.changed,r=t.cancel;if(n.options.swap){var s=this.sortable.el,c=this.options;if(a&&a!==s){var l=_e;!1!==i(a)?(P(a,c.swapClass,!0),_e=a):_e=null,l&&l!==_e&&P(l,c.swapClass,!1)}o(),e(!0),r()}},drop:function(t){var e=t.activeSortable,a=t.putSortable,i=t.dragEl,n=a||this.sortable,o=this.options;_e&&P(_e,o.swapClass,!1),_e&&(o.swap||a&&a.options.swap)&&i!==_e&&(n.captureAnimationState(),n!==e&&e.captureAnimationState(),je(i,_e),n.animateAll(),n!==e&&e.animateAll())},nulling:function(){_e=null}},o(t,{pluginName:"swap",eventProperties:function(){return{swapItem:_e}}})}function je(t,e){var a,i,n=t.parentNode,o=e.parentNode;n&&o&&!n.isEqualNode(e)&&!o.isEqualNode(t)&&(a=R(t),i=R(e),n.isEqualNode(o)&&a<i&&i++,n.insertBefore(e,n.children[a]),o.insertBefore(t,o.children[i]))}ke.prototype={startIndex:null,dragStart:function(t){var e=t.oldDraggableIndex;this.startIndex=e},onSpill:function(t){var e=t.dragEl,a=t.putSortable;this.sortable.captureAnimationState(),a&&a.captureAnimationState();var i=L(this.sortable.el,this.startIndex,this.options);i?this.sortable.el.insertBefore(e,i):this.sortable.el.appendChild(e),this.sortable.animateAll(),a&&a.animateAll()},drop:Oe},o(ke,{pluginName:"revertOnSpill"}),Ce.prototype={onSpill:function(t){var e=t.dragEl,a=t.putSortable,i=a||this.sortable;i.captureAnimationState(),e.parentNode&&e.parentNode.removeChild(e),i.animateAll()},drop:Oe},o(Ce,{pluginName:"removeOnSpill"});var Ee,Pe,Fe,Me,Te,De=[],Ae=[],Ie=!1,Le=!1,ze=!1;function Re(){function t(t){for(var e in this)"_"===e.charAt(0)&&"function"===typeof this[e]&&(this[e]=this[e].bind(this));t.options.supportPointer?w(document,"pointerup",this._deselectMultiDrag):(w(document,"mouseup",this._deselectMultiDrag),w(document,"touchend",this._deselectMultiDrag)),w(document,"keydown",this._checkKeyDown),w(document,"keyup",this._checkKeyUp),this.defaults={selectedClass:"sortable-selected",multiDragKey:null,setData:function(e,a){var i="";De.length&&Pe===t?De.forEach((function(t,e){i+=(e?", ":"")+t.textContent})):i=a.textContent,e.setData("Text",i)}}}return t.prototype={multiDragKeyDown:!1,isMultiDrag:!1,delayStartGlobal:function(t){var e=t.dragEl;Fe=e},delayEnded:function(){this.isMultiDrag=~De.indexOf(Fe)},setupClone:function(t){var e=t.sortable,a=t.cancel;if(this.isMultiDrag){for(var i=0;i<De.length;i++)Ae.push(G(De[i])),Ae[i].sortableIndex=De[i].sortableIndex,Ae[i].draggable=!1,Ae[i].style["will-change"]="",P(Ae[i],this.options.selectedClass,!1),De[i]===Fe&&P(Ae[i],this.options.chosenClass,!1);e._hideClone(),a()}},clone:function(t){var e=t.sortable,a=t.rootEl,i=t.dispatchSortableEvent,n=t.cancel;this.isMultiDrag&&(this.options.removeCloneOnHide||De.length&&Pe===e&&(Be(!0,a),i("clone"),n()))},showClone:function(t){var e=t.cloneNowShown,a=t.rootEl,i=t.cancel;this.isMultiDrag&&(Be(!1,a),Ae.forEach((function(t){F(t,"display","")})),e(),Te=!1,i())},hideClone:function(t){var e=this,a=(t.sortable,t.cloneNowHidden),i=t.cancel;this.isMultiDrag&&(Ae.forEach((function(t){F(t,"display","none"),e.options.removeCloneOnHide&&t.parentNode&&t.parentNode.removeChild(t)})),a(),Te=!0,i())},dragStartGlobal:function(t){t.sortable;!this.isMultiDrag&&Pe&&Pe.multiDrag._deselectMultiDrag(),De.forEach((function(t){t.sortableIndex=R(t)})),De=De.sort((function(t,e){return t.sortableIndex-e.sortableIndex})),ze=!0},dragStarted:function(t){var e=this,a=t.sortable;if(this.isMultiDrag){if(this.options.sort&&(a.captureAnimationState(),this.options.animation)){De.forEach((function(t){t!==Fe&&F(t,"position","absolute")}));var i=A(Fe,!1,!0,!0);De.forEach((function(t){t!==Fe&&K(t,i)})),Le=!0,Ie=!0}a.animateAll((function(){Le=!1,Ie=!1,e.options.animation&&De.forEach((function(t){X(t)})),e.options.sort&&$e()}))}},dragOver:function(t){var e=t.target,a=t.completed,i=t.cancel;Le&&~De.indexOf(e)&&(a(!1),i())},revert:function(t){var e=t.fromSortable,a=t.rootEl,i=t.sortable,n=t.dragRect;De.length>1&&(De.forEach((function(t){i.addAnimationState({target:t,rect:Le?A(t):n}),X(t),t.fromRect=n,e.removeAnimationState(t)})),Le=!1,Ne(!this.options.removeCloneOnHide,a))},dragOverCompleted:function(t){var e=t.sortable,a=t.isOwner,i=t.insertion,n=t.activeSortable,o=t.parentEl,r=t.putSortable,s=this.options;if(i){if(a&&n._hideClone(),Ie=!1,s.animation&&De.length>1&&(Le||!a&&!n.options.sort&&!r)){var c=A(Fe,!1,!0,!0);De.forEach((function(t){t!==Fe&&(K(t,c),o.appendChild(t))})),Le=!0}if(!a)if(Le||$e(),De.length>1){var l=Te;n._showClone(e),n.options.animation&&!Te&&l&&Ae.forEach((function(t){n.addAnimationState({target:t,rect:Me}),t.fromRect=Me,t.thisAnimationDuration=null}))}else n._showClone(e)}},dragOverAnimationCapture:function(t){var e=t.dragRect,a=t.isOwner,i=t.activeSortable;if(De.forEach((function(t){t.thisAnimationDuration=null})),i.options.animation&&!a&&i.multiDrag.isMultiDrag){Me=o({},e);var n=M(Fe,!0);Me.top-=n.f,Me.left-=n.e}},dragOverAnimationComplete:function(){Le&&(Le=!1,$e())},drop:function(t){var e=t.originalEvent,a=t.rootEl,i=t.parentEl,n=t.sortable,o=t.dispatchSortableEvent,r=t.oldIndex,s=t.putSortable,c=s||this.sortable;if(e){var l=this.options,u=i.children;if(!ze)if(l.multiDragKey&&!this.multiDragKeyDown&&this._deselectMultiDrag(),P(Fe,l.selectedClass,!~De.indexOf(Fe)),~De.indexOf(Fe))De.splice(De.indexOf(Fe),1),Ee=null,it({sortable:n,rootEl:a,name:"deselect",targetEl:Fe,originalEvt:e});else{if(De.push(Fe),it({sortable:n,rootEl:a,name:"select",targetEl:Fe,originalEvt:e}),e.shiftKey&&Ee&&n.el.contains(Ee)){var d,p,f=R(Ee),h=R(Fe);if(~f&&~h&&f!==h)for(h>f?(p=f,d=h):(p=h,d=f+1);p<d;p++)~De.indexOf(u[p])||(P(u[p],l.selectedClass,!0),De.push(u[p]),it({sortable:n,rootEl:a,name:"select",targetEl:u[p],originalEvt:e}))}else Ee=Fe;Pe=c}if(ze&&this.isMultiDrag){if((i[W].options.sort||i!==a)&&De.length>1){var m=A(Fe),b=R(Fe,":not(."+this.options.selectedClass+")");if(!Ie&&l.animation&&(Fe.thisAnimationDuration=null),c.captureAnimationState(),!Ie&&(l.animation&&(Fe.fromRect=m,De.forEach((function(t){if(t.thisAnimationDuration=null,t!==Fe){var e=Le?A(t):m;t.fromRect=e,c.addAnimationState({target:t,rect:e})}}))),$e(),De.forEach((function(t){u[b]?i.insertBefore(t,u[b]):i.appendChild(t),b++})),r===R(Fe))){var g=!1;De.forEach((function(t){t.sortableIndex===R(t)||(g=!0)})),g&&o("update")}De.forEach((function(t){X(t)})),c.animateAll()}Pe=c}(a===i||s&&"clone"!==s.lastPutMode)&&Ae.forEach((function(t){t.parentNode&&t.parentNode.removeChild(t)}))}},nullingGlobal:function(){this.isMultiDrag=ze=!1,Ae.length=0},destroyGlobal:function(){this._deselectMultiDrag(),O(document,"pointerup",this._deselectMultiDrag),O(document,"mouseup",this._deselectMultiDrag),O(document,"touchend",this._deselectMultiDrag),O(document,"keydown",this._checkKeyDown),O(document,"keyup",this._checkKeyUp)},_deselectMultiDrag:function(t){if(("undefined"===typeof ze||!ze)&&Pe===this.sortable&&(!t||!S(t.target,this.options.draggable,this.sortable.el,!1))&&(!t||0===t.button))while(De.length){var e=De[0];P(e,this.options.selectedClass,!1),De.shift(),it({sortable:this.sortable,rootEl:this.sortable.el,name:"deselect",targetEl:e,originalEvt:t})}},_checkKeyDown:function(t){t.key===this.options.multiDragKey&&(this.multiDragKeyDown=!0)},_checkKeyUp:function(t){t.key===this.options.multiDragKey&&(this.multiDragKeyDown=!1)}},o(t,{pluginName:"multiDrag",utils:{select:function(t){var e=t.parentNode[W];e&&e.options.multiDrag&&!~De.indexOf(t)&&(Pe&&Pe!==e&&(Pe.multiDrag._deselectMultiDrag(),Pe=e),P(t,e.options.selectedClass,!0),De.push(t))},deselect:function(t){var e=t.parentNode[W],a=De.indexOf(t);e&&e.options.multiDrag&&~a&&(P(t,e.options.selectedClass,!1),De.splice(a,1))}},eventProperties:function(){var t=this,e=[],a=[];return De.forEach((function(i){var n;e.push({multiDragElement:i,index:i.sortableIndex}),n=Le&&i!==Fe?-1:Le?R(i,":not(."+t.options.selectedClass+")"):R(i),a.push({multiDragElement:i,index:n})})),{items:l(De),clones:[].concat(Ae),oldIndicies:e,newIndicies:a}},optionListeners:{multiDragKey:function(t){return t=t.toLowerCase(),"ctrl"===t?t="Control":t.length>1&&(t=t.charAt(0).toUpperCase()+t.substr(1)),t}}})}function Ne(t,e){De.forEach((function(a,i){var n=e.children[a.sortableIndex+(t?Number(i):0)];n?e.insertBefore(a,n):e.appendChild(a)}))}function Be(t,e){Ae.forEach((function(a,i){var n=e.children[a.sortableIndex+(t?Number(i):0)];n?e.insertBefore(a,n):e.appendChild(a)}))}function $e(){De.forEach((function(t){t!==Fe&&t.parentNode&&t.parentNode.removeChild(t)}))}Zt.mount(new ve),Zt.mount(Ce,ke),e["default"]=Zt},"24e8":function(t,e,a){e=t.exports=a("690e")(!1),e.push([t.i,".gcxt[data-v-a743c78e] :export{colorPrimary:#2c5cf7;headerBackgroundColor:#fff;headerTextColor:#333}.gcxt .user-selector--selected[data-v-a743c78e]{display:-webkit-box;display:-ms-flexbox;display:flex;overflow-x:auto;background:#fff;padding:9px 0;white-space:nowrap;scroll-behavior:smooth}.gcxt .user-selector--selected-item[data-v-a743c78e]{display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex;vertical-align:middle;-webkit-box-align:center;-ms-flex-align:center;align-items:center;background:#f5f5f5;border:1px solid #f0f0f0;color:#333;font-size:13px;height:26px;line-height:26px;padding:0 6px;-ms-flex-negative:0;flex-shrink:0}.gcxt .user-selector--selected-item .text[data-v-a743c78e]{overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.gcxt .user-selector--selected-item .icon_close[data-v-a743c78e]{font-size:10px;color:#9b9b9b;margin-left:5px;-webkit-transform:scale(.7);transform:scale(.7)}.gcxt .user-selector--selected-item+.user-selector--selected-item[data-v-a743c78e]{margin-left:5px}.gcxt .header-top[data-v-a743c78e]{display:-webkit-box;display:-ms-flexbox;display:flex;border-bottom:1px solid #ececec;background:#fff;padding-left:15px}.gcxt .header-top .user-selector--selected[data-v-a743c78e]{margin-right:6px}.gcxt .header-top .searchBar[data-v-a743c78e]{-webkit-box-flex:1;-ms-flex-positive:1;flex-grow:1;-ms-flex-negative:100;flex-shrink:100;min-width:110px;padding-left:0;-webkit-transition:all .3s;transition:all .3s}.gcxt .user-selector--tabs[data-v-a743c78e] .van-tabs{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-flex:1;-ms-flex:1;flex:1;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;overflow:hidden;position:absolute;width:100%;height:100%}.gcxt .user-selector--tabs[data-v-a743c78e] .van-tabs .van-tabs__wrap{height:48px;border-bottom:1px solid #ececec}.gcxt .user-selector--tabs[data-v-a743c78e] .van-tabs .van-tab__pane{height:100%;overflow:auto}.gcxt .user-selector--tabs[data-v-a743c78e] .van-tabs.tab-count-1 .van-tabs__wrap{display:none}.gcxt .user-selector--tabs[data-v-a743c78e] .van-tabs .van-tab--active{color:#2c5cf7}.gcxt .user-selector--tabs[data-v-a743c78e] .van-tabs .van-tabs__line{width:20px!important;height:2px;background:#2c5cf7;border-radius:3px;bottom:21px}.gcxt .user-selector--list[data-v-a743c78e],.gcxt .user-selector--tabs[data-v-a743c78e] .van-tabs .van-tabs__content{-webkit-box-flex:1;-ms-flex:1;flex:1;background:#fff}.gcxt .user-selector--list[data-v-a743c78e]{position:relative;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;width:100%;height:100%}.gcxt .user-selector--list-item[data-v-a743c78e]{display:-webkit-box;display:-ms-flexbox;display:flex;min-height:64px;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding:15px}.gcxt .user-selector--list-item-avatar[data-v-a743c78e]{width:34px;height:34px;border-radius:50%;font-size:14px;color:#fff;line-height:34px;text-align:center}.gcxt .user-selector--list-item-content[data-v-a743c78e]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-flex:1;-ms-flex:1;flex:1;font-size:16px;margin-left:15px;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.gcxt .user-selector--list-item-content .icon-selected[data-v-a743c78e]{font-size:22px;color:#2c5cf7}.gcxt .user-selector--list-item-content .icon-_xuanzhong[data-v-a743c78e]{font-size:18px;color:#2c5cf7}.gcxt .user-selector--list-item-content .icon-redio-unselected[data-v-a743c78e]{font-size:22px;color:#c8c8c8}.gcxt .user-selector--list-item-content-active[data-v-a743c78e]{color:#2c5cf7}.gcxt .user-selector--list-item-content-name[data-v-a743c78e]{-webkit-box-flex:1;-ms-flex:1;flex:1;max-width:90%}",""])},2777:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"user-avatar-wrapper"},[t.user.photo?a("div",{staticClass:"user-avatar",style:{backgroundImage:"url("+t.parsePath(t.user.photo)+")"}}):a("div",{staticClass:"user-avatar",style:t.getBackground()},[a("span",{staticClass:"text"},[t._v(t._s(t.user.name.substring(0,1)))])])])},n=[],o=a("db68"),r={name:"UserAvatar",props:{user:{type:Object,default:function(){}}},methods:{getBackground:function(){return"background: ".concat(this.user.avatarBg||this.user.avatar||Object(o["c"])(this.user),";")},parsePath:function(t){return'"'+t+'"'}}},s=r,c=(a("c6ae"),a("c701")),l=Object(c["a"])(s,i,n,!1,null,"20378eea",null);e["a"]=l.exports},"2a5f":function(t,e,a){var i=a("3ee5");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var n=a("85cb").default;n("40f17bf6",i,!0,{sourceMap:!1,shadowMode:!1})},"2aa4":function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.isInitialized?a("sub-form",t._b({ref:"subForm",attrs:{mode:"view",data:t.data,"before-cancel":t.onCancel},on:{open:t.onOpen},scopedSlots:t._u([{key:"viewGroupAfter",fn:function(e){var i=e.index;return[t.tableDatas[i]&&t.tableDatas[i].length?a("v-table",{staticClass:"view-table",attrs:{"column-data":t.tableColumnData,"row-data":t.tableDatas[i]}}):t._e(),t.editable?a("div",{staticClass:"editable-form"},[a("form-comp",{staticClass:"form-grouped",attrs:{data:t.editFormDatas[i]},on:{change:function(e,a){return t.onChange(e,a,i)},blur:function(e,a){return t.onBlur(e,a,i)}},scopedSlots:t._u([{key:"afterField",fn:function(e){var n=e.index;return 0===n&&t.tableDatas[i]&&t.tableDatas[i].length?[a("a",{staticClass:"copy-action",attrs:{href:"javascript:void(0);"},on:{click:function(e){t.copyLastRow(i)}}},[t._v("同"+t._s(t.lastRowValueObjs[i].flow_name))])]:void 0}}])})],1):t._e()]}}])},"sub-form",t.viewSettings,!1),[a("template",{slot:"cell-right-icon"},[a("span",{staticClass:"cell-status",class:{valided:t.cellStatus}},[t._v(t._s(t.cellStatusText)),a("i",{staticClass:"icon_right-arrow iconfont icon-1_you"})])]),a("template",{slot:"header-right"},[t.editable?a("span",{staticClass:"header--right-action",on:{click:t.save}},[t._v("保存")]):t._e()])],2):t._e()},n=[],o=(a("5ab2"),a("e10e"),a("4c09")),r=(a("f548"),a("cc57"),a("28f8")),s=(a("e697"),a("6d57"),a("9083")),c=a("2655"),l=a("268f"),u=a("7bce"),d=a("5bbb"),p=a("b893"),f=a("fd50"),h=a("31f2");function m(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,i)}return a}function b(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?m(Object(a),!0).forEach((function(e){Object(r["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):m(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var g={name:"SpSubForm",components:{SubForm:s["a"],FormComp:c["a"],VTable:l["a"]},mixins:[h["a"]],props:{data:{type:Array,default:function(){return[]}},viewSettings:{type:Object,default:null},editDefaultForm:{type:Object,default:null},layout:{type:Object,default:null},relations:{type:Object,default:null},mode:{type:String,default:"view"},sheet:{type:Object,default:function(){}},spMulti:{type:Boolean,default:!1}},data:function(){return{isInitialized:!1,editFormDatas:[],tableColumnData:[],tableDatas:[],cellStatusText:"",cellStatus:!1,lastRowValueObjs:[],copyLastRecordOnce:!1}},computed:{editable:function(){return"edit"===this.mode&&!!this.layout.canEdit},keyboardInfo:function(){return this.$store.state.device.keyboardInfo}},mounted:function(){this.init(),window.testSpPriceSheet=this},methods:{init:function(){var t=this;this.editable&&(this.editFormDatas=this.data.map((function(e,a){var i=Object(d["a"])(t.editDefaultForm);if(!t.spMulti){var n=i.dataModel,o=t.data[a];for(var r in n)r in o&&(n[r].value=n[r].text=o[r])}return i}))),this.editable&&this.validateRequirement(),this.lastRowValueObjs=[];var e=this.layout.table;if(e){this.tableColumnData=e.cols,this.tableColumnData[0].id||(this.tableColumnData[0].id="flow_name");var a=this.sheet.check_status;this.tableDatas=this.data.map((function(i,n){var o=[];if(i.list){var r,s={},c=[];i.list.forEach((function(t){var i=e.rows.find((function(e){var i=e.filterExp;return!!Object(p["d"])(i,t)&&("3"===a||"cur_sp"!==t.flag&&"erp"!==t.flag)}));if(i){var n=b({},t),o=i.name;if(n.flow_name=o||n.station_name,s[n.flow_name]){var r=s[n.flow_name],l=r.prev,u=r.count;1===u&&(l.flow_name=l.flow_name+"1"),++s[n.flow_name].count,n.flow_name=n.flow_name+s[n.flow_name].count}else s[n.flow_name]={prev:n,count:1};c.push(n)}})),t.lastRowValueObjs.push(c[c.length-1]||null),c.forEach((function(e){var a=t.tableColumnData.map((function(a,i){var n=a.id,o=e[n],s=t.editDefaultForm.dataModel[n];s&&(o=t.getValue(b(b({},s),{},{value:o}))||"-",s.units&&(o=o.replace(s.units.text,"").trim()));var c={field:b({},s),text:o,class:""};return s&&s.req&&r&&r[i].text!==o&&(c.class="changed"),c}));r=a,o.push(a)}))}return o}))}this.isInitialized=!0},onChange:function(t,e,a){var i=this.data[a],n=Object(d["a"])(this.viewSettings.defaultForm);for(var o in n.dataModel)n.dataModel[o].value=i[o];var r=this.editFormDatas[a].dataModel,s={dataModel:b(b({},n.dataModel),r),relations:this.relations};u["b"].triggerRelation(e,s)},onBlur:function(t,e,a){var i=this.editFormDatas[a].dataModel,n=this.lastRowValueObjs[a];if(n)for(var r in i){var s=i[r];if(s.req){var c=this.getValue(s),l=this.getValue(b(b({},s),{},{value:n[r]}));if(c!==l){var u=s.classes||[];this.$set(s,"classNames",[].concat(Object(o["a"])(u),["changed"]))}else{var d=s.classes||[];this.$set(s,"classNames",d.filter((function(t){return"changed"===t})))}}}},copyLastRow:function(t){var e=this.editFormDatas[t].dataModel,a=this.lastRowValueObjs[t];if(a)for(var i in e){var n=e[i];if(n.req){var o=a[i]||"";n=u["b"].formatFieldForEdit(n,o),this.onBlur(n.value,n,t)}}},onOpen:function(){var t=this;this.backupEditFormValues=this.editFormDatas.map((function(t){var e={};for(var a in t.dataModel)e[a]=t.dataModel[a].value;return e})),this.copyLastRecordOnce||(this.editFormDatas.forEach((function(e,a){t.copyLastRow(a)})),this.copyLastRecordOnce=!0)},onCancel:function(){var t=this,e=f["a"].resolve(!0);if(this.editable){var a=this.backupEditFormValues.some((function(e,a){var i=t.editFormDatas[a].dataModel,n=!1;for(var o in e)e[o]!==i[o].value&&(n=!0);return n}));a&&(e=this.sui.confirm({message:"有操作未保存，确认返回吗？",cancelButtonText:"直接返回",confirmButtonText:"保存并返回"}).then((function(){return t.save()})).catch((function(e){return console.error(e),t.editFormDatas.forEach((function(e,a){for(var i in e.dataModel)e.dataModel[i].value=t.backupEditFormValues[a][i],t.onBlur(e.dataModel[i].value,e.dataModel[i],a)})),t.validateRequirement(),!0})))}return e},save:function(){this.backupEditFormValues=[];var t=this.validateRequirement(),e=t.flag,a=t.msg;return e?(this.$refs.subForm.close(),this.$emit("submit",this.getData()),!0):(this.sui.toast(a),!1)},getViewData:function(){return this.$refs.subForm.getData()},getData:function(){var t=this;return this.editFormDatas.map((function(e,a){return b({item_id:t.data[a].item_id},u["b"].getFormValuesForSave(e.dataModel))}))},getSpFullData:function(){var t=this.data,e=this.getData();return t.map((function(t,a){return b(b({},t),e[a]||{})}))},validateRequirement:function(){var t={flag:!0,msg:""},e=0;return this.editFormDatas.forEach((function(a){var i=u["b"].validate(a.dataModel),n=i.result,o=i.msg;n?e++:t={flag:n,msg:o}})),e===this.editFormDatas.length?(this.cellStatusText="已审核",this.cellStatus=!0):(this.cellStatusText="待审核(".concat(this.editFormDatas.length-e,")"),this.cellStatus=!1),t}}},v=g,x=(a("6c5c"),a("c701")),y=Object(x["a"])(v,i,n,!1,null,"87e6b2d8",null);e["a"]=y.exports},"2c2db":function(t,e,a){"use strict";a("a94d")},3301:function(t,e,a){"use strict";a("3caa")},3335:function(t,e,a){(function(e,i){t.exports=i(a("2480"))})("undefined"!==typeof self&&self,(function(t){return function(t){var e={};function a(i){if(e[i])return e[i].exports;var n=e[i]={i:i,l:!1,exports:{}};return t[i].call(n.exports,n,n.exports,a),n.l=!0,n.exports}return a.m=t,a.c=e,a.d=function(t,e,i){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(a.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)a.d(i,n,function(e){return t[e]}.bind(null,n));return i},a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="",a(a.s="fb15")}({"01f9":function(t,e,a){"use strict";var i=a("2d00"),n=a("5ca1"),o=a("2aba"),r=a("32e9"),s=a("84f2"),c=a("41a0"),l=a("7f20"),u=a("38fd"),d=a("2b4c")("iterator"),p=!([].keys&&"next"in[].keys()),f="@@iterator",h="keys",m="values",b=function(){return this};t.exports=function(t,e,a,g,v,x,y){c(a,e,g);var _,w,O,k=function(t){if(!p&&t in E)return E[t];switch(t){case h:return function(){return new a(this,t)};case m:return function(){return new a(this,t)}}return function(){return new a(this,t)}},C=e+" Iterator",S=v==m,j=!1,E=t.prototype,P=E[d]||E[f]||v&&E[v],F=P||k(v),M=v?S?k("entries"):F:void 0,T="Array"==e&&E.entries||P;if(T&&(O=u(T.call(new t)),O!==Object.prototype&&O.next&&(l(O,C,!0),i||"function"==typeof O[d]||r(O,d,b))),S&&P&&P.name!==m&&(j=!0,F=function(){return P.call(this)}),i&&!y||!p&&!j&&E[d]||r(E,d,F),s[e]=F,s[C]=b,v)if(_={values:S?F:k(m),keys:x?F:k(h),entries:M},y)for(w in _)w in E||o(E,w,_[w]);else n(n.P+n.F*(p||j),e,_);return _}},"02f4":function(t,e,a){var i=a("4588"),n=a("be13");t.exports=function(t){return function(e,a){var o,r,s=String(n(e)),c=i(a),l=s.length;return c<0||c>=l?t?"":void 0:(o=s.charCodeAt(c),o<55296||o>56319||c+1===l||(r=s.charCodeAt(c+1))<56320||r>57343?t?s.charAt(c):o:t?s.slice(c,c+2):r-56320+(o-55296<<10)+65536)}}},"0390":function(t,e,a){"use strict";var i=a("02f4")(!0);t.exports=function(t,e,a){return e+(a?i(t,e).length:1)}},"0bfb":function(t,e,a){"use strict";var i=a("cb7c");t.exports=function(){var t=i(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}},"0d58":function(t,e,a){var i=a("ce10"),n=a("e11e");t.exports=Object.keys||function(t){return i(t,n)}},1495:function(t,e,a){var i=a("86cc"),n=a("cb7c"),o=a("0d58");t.exports=a("9e1e")?Object.defineProperties:function(t,e){n(t);var a,r=o(e),s=r.length,c=0;while(s>c)i.f(t,a=r[c++],e[a]);return t}},"214f":function(t,e,a){"use strict";a("b0c5");var i=a("2aba"),n=a("32e9"),o=a("79e5"),r=a("be13"),s=a("2b4c"),c=a("520a"),l=s("species"),u=!o((function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")})),d=function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var a="ab".split(t);return 2===a.length&&"a"===a[0]&&"b"===a[1]}();t.exports=function(t,e,a){var p=s(t),f=!o((function(){var e={};return e[p]=function(){return 7},7!=""[t](e)})),h=f?!o((function(){var e=!1,a=/a/;return a.exec=function(){return e=!0,null},"split"===t&&(a.constructor={},a.constructor[l]=function(){return a}),a[p](""),!e})):void 0;if(!f||!h||"replace"===t&&!u||"split"===t&&!d){var m=/./[p],b=a(r,p,""[t],(function(t,e,a,i,n){return e.exec===c?f&&!n?{done:!0,value:m.call(e,a,i)}:{done:!0,value:t.call(a,e,i)}:{done:!1}})),g=b[0],v=b[1];i(String.prototype,t,g),n(RegExp.prototype,p,2==e?function(t,e){return v.call(t,this,e)}:function(t){return v.call(t,this)})}}},"230e":function(t,e,a){var i=a("d3f4"),n=a("7726").document,o=i(n)&&i(n.createElement);t.exports=function(t){return o?n.createElement(t):{}}},"23c6":function(t,e,a){var i=a("2d95"),n=a("2b4c")("toStringTag"),o="Arguments"==i(function(){return arguments}()),r=function(t,e){try{return t[e]}catch(a){}};t.exports=function(t){var e,a,s;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(a=r(e=Object(t),n))?a:o?i(e):"Object"==(s=i(e))&&"function"==typeof e.callee?"Arguments":s}},2621:function(t,e){e.f=Object.getOwnPropertySymbols},"2aba":function(t,e,a){var i=a("7726"),n=a("32e9"),o=a("69a8"),r=a("ca5a")("src"),s=a("fa5b"),c="toString",l=(""+s).split(c);a("8378").inspectSource=function(t){return s.call(t)},(t.exports=function(t,e,a,s){var c="function"==typeof a;c&&(o(a,"name")||n(a,"name",e)),t[e]!==a&&(c&&(o(a,r)||n(a,r,t[e]?""+t[e]:l.join(String(e)))),t===i?t[e]=a:s?t[e]?t[e]=a:n(t,e,a):(delete t[e],n(t,e,a)))})(Function.prototype,c,(function(){return"function"==typeof this&&this[r]||s.call(this)}))},"2aeb":function(t,e,a){var i=a("cb7c"),n=a("1495"),o=a("e11e"),r=a("613b")("IE_PROTO"),s=function(){},c="prototype",l=function(){var t,e=a("230e")("iframe"),i=o.length,n="<",r=">";e.style.display="none",a("fab2").appendChild(e),e.src="javascript:",t=e.contentWindow.document,t.open(),t.write(n+"script"+r+"document.F=Object"+n+"/script"+r),t.close(),l=t.F;while(i--)delete l[c][o[i]];return l()};t.exports=Object.create||function(t,e){var a;return null!==t?(s[c]=i(t),a=new s,s[c]=null,a[r]=t):a=l(),void 0===e?a:n(a,e)}},"2b4c":function(t,e,a){var i=a("5537")("wks"),n=a("ca5a"),o=a("7726").Symbol,r="function"==typeof o,s=t.exports=function(t){return i[t]||(i[t]=r&&o[t]||(r?o:n)("Symbol."+t))};s.store=i},"2d00":function(t,e){t.exports=!1},"2d95":function(t,e){var a={}.toString;t.exports=function(t){return a.call(t).slice(8,-1)}},"2fdb":function(t,e,a){"use strict";var i=a("5ca1"),n=a("d2c8"),o="includes";i(i.P+i.F*a("5147")(o),"String",{includes:function(t){return!!~n(this,t,o).indexOf(t,arguments.length>1?arguments[1]:void 0)}})},"32e9":function(t,e,a){var i=a("86cc"),n=a("4630");t.exports=a("9e1e")?function(t,e,a){return i.f(t,e,n(1,a))}:function(t,e,a){return t[e]=a,t}},"38fd":function(t,e,a){var i=a("69a8"),n=a("4bf8"),o=a("613b")("IE_PROTO"),r=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=n(t),i(t,o)?t[o]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?r:null}},"41a0":function(t,e,a){"use strict";var i=a("2aeb"),n=a("4630"),o=a("7f20"),r={};a("32e9")(r,a("2b4c")("iterator"),(function(){return this})),t.exports=function(t,e,a){t.prototype=i(r,{next:n(1,a)}),o(t,e+" Iterator")}},"456d":function(t,e,a){var i=a("4bf8"),n=a("0d58");a("5eda")("keys",(function(){return function(t){return n(i(t))}}))},4588:function(t,e){var a=Math.ceil,i=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?i:a)(t)}},4630:function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},"4bf8":function(t,e,a){var i=a("be13");t.exports=function(t){return Object(i(t))}},5147:function(t,e,a){var i=a("2b4c")("match");t.exports=function(t){var e=/./;try{"/./"[t](e)}catch(a){try{return e[i]=!1,!"/./"[t](e)}catch(n){}}return!0}},"520a":function(t,e,a){"use strict";var i=a("0bfb"),n=RegExp.prototype.exec,o=String.prototype.replace,r=n,s="lastIndex",c=function(){var t=/a/,e=/b*/g;return n.call(t,"a"),n.call(e,"a"),0!==t[s]||0!==e[s]}(),l=void 0!==/()??/.exec("")[1],u=c||l;u&&(r=function(t){var e,a,r,u,d=this;return l&&(a=new RegExp("^"+d.source+"$(?!\\s)",i.call(d))),c&&(e=d[s]),r=n.call(d,t),c&&r&&(d[s]=d.global?r.index+r[0].length:e),l&&r&&r.length>1&&o.call(r[0],a,(function(){for(u=1;u<arguments.length-2;u++)void 0===arguments[u]&&(r[u]=void 0)})),r}),t.exports=r},"52a7":function(t,e){e.f={}.propertyIsEnumerable},5537:function(t,e,a){var i=a("8378"),n=a("7726"),o="__core-js_shared__",r=n[o]||(n[o]={});(t.exports=function(t,e){return r[t]||(r[t]=void 0!==e?e:{})})("versions",[]).push({version:i.version,mode:a("2d00")?"pure":"global",copyright:"© 2019 Denis Pushkarev (zloirock.ru)"})},"5ca1":function(t,e,a){var i=a("7726"),n=a("8378"),o=a("32e9"),r=a("2aba"),s=a("9b43"),c="prototype",l=function(t,e,a){var u,d,p,f,h=t&l.F,m=t&l.G,b=t&l.S,g=t&l.P,v=t&l.B,x=m?i:b?i[e]||(i[e]={}):(i[e]||{})[c],y=m?n:n[e]||(n[e]={}),_=y[c]||(y[c]={});for(u in m&&(a=e),a)d=!h&&x&&void 0!==x[u],p=(d?x:a)[u],f=v&&d?s(p,i):g&&"function"==typeof p?s(Function.call,p):p,x&&r(x,u,p,t&l.U),y[u]!=p&&o(y,u,f),g&&_[u]!=p&&(_[u]=p)};i.core=n,l.F=1,l.G=2,l.S=4,l.P=8,l.B=16,l.W=32,l.U=64,l.R=128,t.exports=l},"5eda":function(t,e,a){var i=a("5ca1"),n=a("8378"),o=a("79e5");t.exports=function(t,e){var a=(n.Object||{})[t]||Object[t],r={};r[t]=e(a),i(i.S+i.F*o((function(){a(1)})),"Object",r)}},"5f1b":function(t,e,a){"use strict";var i=a("23c6"),n=RegExp.prototype.exec;t.exports=function(t,e){var a=t.exec;if("function"===typeof a){var o=a.call(t,e);if("object"!==typeof o)throw new TypeError("RegExp exec method returned something other than an Object or null");return o}if("RegExp"!==i(t))throw new TypeError("RegExp#exec called on incompatible receiver");return n.call(t,e)}},"613b":function(t,e,a){var i=a("5537")("keys"),n=a("ca5a");t.exports=function(t){return i[t]||(i[t]=n(t))}},"626a":function(t,e,a){var i=a("2d95");t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==i(t)?t.split(""):Object(t)}},6762:function(t,e,a){"use strict";var i=a("5ca1"),n=a("c366")(!0);i(i.P,"Array",{includes:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}}),a("9c6c")("includes")},6821:function(t,e,a){var i=a("626a"),n=a("be13");t.exports=function(t){return i(n(t))}},"69a8":function(t,e){var a={}.hasOwnProperty;t.exports=function(t,e){return a.call(t,e)}},"6a99":function(t,e,a){var i=a("d3f4");t.exports=function(t,e){if(!i(t))return t;var a,n;if(e&&"function"==typeof(a=t.toString)&&!i(n=a.call(t)))return n;if("function"==typeof(a=t.valueOf)&&!i(n=a.call(t)))return n;if(!e&&"function"==typeof(a=t.toString)&&!i(n=a.call(t)))return n;throw TypeError("Can't convert object to primitive value")}},7333:function(t,e,a){"use strict";var i=a("0d58"),n=a("2621"),o=a("52a7"),r=a("4bf8"),s=a("626a"),c=Object.assign;t.exports=!c||a("79e5")((function(){var t={},e={},a=Symbol(),i="abcdefghijklmnopqrst";return t[a]=7,i.split("").forEach((function(t){e[t]=t})),7!=c({},t)[a]||Object.keys(c({},e)).join("")!=i}))?function(t,e){var a=r(t),c=arguments.length,l=1,u=n.f,d=o.f;while(c>l){var p,f=s(arguments[l++]),h=u?i(f).concat(u(f)):i(f),m=h.length,b=0;while(m>b)d.call(f,p=h[b++])&&(a[p]=f[p])}return a}:c},7726:function(t,e){var a=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=a)},"77f1":function(t,e,a){var i=a("4588"),n=Math.max,o=Math.min;t.exports=function(t,e){return t=i(t),t<0?n(t+e,0):o(t,e)}},"79e5":function(t,e){t.exports=function(t){try{return!!t()}catch(e){return!0}}},"7f20":function(t,e,a){var i=a("86cc").f,n=a("69a8"),o=a("2b4c")("toStringTag");t.exports=function(t,e,a){t&&!n(t=a?t:t.prototype,o)&&i(t,o,{configurable:!0,value:e})}},8378:function(t,e){var a=t.exports={version:"2.6.5"};"number"==typeof __e&&(__e=a)},"84f2":function(t,e){t.exports={}},"86cc":function(t,e,a){var i=a("cb7c"),n=a("c69a"),o=a("6a99"),r=Object.defineProperty;e.f=a("9e1e")?Object.defineProperty:function(t,e,a){if(i(t),e=o(e,!0),i(a),n)try{return r(t,e,a)}catch(s){}if("get"in a||"set"in a)throw TypeError("Accessors not supported!");return"value"in a&&(t[e]=a.value),t}},"9b43":function(t,e,a){var i=a("d8e8");t.exports=function(t,e,a){if(i(t),void 0===e)return t;switch(a){case 1:return function(a){return t.call(e,a)};case 2:return function(a,i){return t.call(e,a,i)};case 3:return function(a,i,n){return t.call(e,a,i,n)}}return function(){return t.apply(e,arguments)}}},"9c6c":function(t,e,a){var i=a("2b4c")("unscopables"),n=Array.prototype;void 0==n[i]&&a("32e9")(n,i,{}),t.exports=function(t){n[i][t]=!0}},"9def":function(t,e,a){var i=a("4588"),n=Math.min;t.exports=function(t){return t>0?n(i(t),9007199254740991):0}},"9e1e":function(t,e,a){t.exports=!a("79e5")((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))},a352:function(e,a){e.exports=t},a481:function(t,e,a){"use strict";var i=a("cb7c"),n=a("4bf8"),o=a("9def"),r=a("4588"),s=a("0390"),c=a("5f1b"),l=Math.max,u=Math.min,d=Math.floor,p=/\$([$&`']|\d\d?|<[^>]*>)/g,f=/\$([$&`']|\d\d?)/g,h=function(t){return void 0===t?t:String(t)};a("214f")("replace",2,(function(t,e,a,m){return[function(i,n){var o=t(this),r=void 0==i?void 0:i[e];return void 0!==r?r.call(i,o,n):a.call(String(o),i,n)},function(t,e){var n=m(a,t,this,e);if(n.done)return n.value;var d=i(t),p=String(this),f="function"===typeof e;f||(e=String(e));var g=d.global;if(g){var v=d.unicode;d.lastIndex=0}var x=[];while(1){var y=c(d,p);if(null===y)break;if(x.push(y),!g)break;var _=String(y[0]);""===_&&(d.lastIndex=s(p,o(d.lastIndex),v))}for(var w="",O=0,k=0;k<x.length;k++){y=x[k];for(var C=String(y[0]),S=l(u(r(y.index),p.length),0),j=[],E=1;E<y.length;E++)j.push(h(y[E]));var P=y.groups;if(f){var F=[C].concat(j,S,p);void 0!==P&&F.push(P);var M=String(e.apply(void 0,F))}else M=b(C,p,S,j,P,e);S>=O&&(w+=p.slice(O,S)+M,O=S+C.length)}return w+p.slice(O)}];function b(t,e,i,o,r,s){var c=i+t.length,l=o.length,u=f;return void 0!==r&&(r=n(r),u=p),a.call(s,u,(function(a,n){var s;switch(n.charAt(0)){case"$":return"$";case"&":return t;case"`":return e.slice(0,i);case"'":return e.slice(c);case"<":s=r[n.slice(1,-1)];break;default:var u=+n;if(0===u)return a;if(u>l){var p=d(u/10);return 0===p?a:p<=l?void 0===o[p-1]?n.charAt(1):o[p-1]+n.charAt(1):a}s=o[u-1]}return void 0===s?"":s}))}}))},aae3:function(t,e,a){var i=a("d3f4"),n=a("2d95"),o=a("2b4c")("match");t.exports=function(t){var e;return i(t)&&(void 0!==(e=t[o])?!!e:"RegExp"==n(t))}},ac6a:function(t,e,a){for(var i=a("cadf"),n=a("0d58"),o=a("2aba"),r=a("7726"),s=a("32e9"),c=a("84f2"),l=a("2b4c"),u=l("iterator"),d=l("toStringTag"),p=c.Array,f={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},h=n(f),m=0;m<h.length;m++){var b,g=h[m],v=f[g],x=r[g],y=x&&x.prototype;if(y&&(y[u]||s(y,u,p),y[d]||s(y,d,g),c[g]=p,v))for(b in i)y[b]||o(y,b,i[b],!0)}},b0c5:function(t,e,a){"use strict";var i=a("520a");a("5ca1")({target:"RegExp",proto:!0,forced:i!==/./.exec},{exec:i})},be13:function(t,e){t.exports=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t}},c366:function(t,e,a){var i=a("6821"),n=a("9def"),o=a("77f1");t.exports=function(t){return function(e,a,r){var s,c=i(e),l=n(c.length),u=o(r,l);if(t&&a!=a){while(l>u)if(s=c[u++],s!=s)return!0}else for(;l>u;u++)if((t||u in c)&&c[u]===a)return t||u||0;return!t&&-1}}},c649:function(t,e,a){"use strict";(function(t){a.d(e,"c",(function(){return l})),a.d(e,"a",(function(){return s})),a.d(e,"b",(function(){return n})),a.d(e,"d",(function(){return c}));a("a481");function i(){return"undefined"!==typeof window?window.console:t.console}var n=i();function o(t){var e=Object.create(null);return function(a){var i=e[a];return i||(e[a]=t(a))}}var r=/-(\w)/g,s=o((function(t){return t.replace(r,(function(t,e){return e?e.toUpperCase():""}))}));function c(t){null!==t.parentElement&&t.parentElement.removeChild(t)}function l(t,e,a){var i=0===a?t.children[0]:t.children[a-1].nextSibling;t.insertBefore(e,i)}}).call(this,a("c8ba"))},c69a:function(t,e,a){t.exports=!a("9e1e")&&!a("79e5")((function(){return 7!=Object.defineProperty(a("230e")("div"),"a",{get:function(){return 7}}).a}))},c8ba:function(t,e){var a;a=function(){return this}();try{a=a||new Function("return this")()}catch(i){"object"===typeof window&&(a=window)}t.exports=a},ca5a:function(t,e){var a=0,i=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++a+i).toString(36))}},cadf:function(t,e,a){"use strict";var i=a("9c6c"),n=a("d53b"),o=a("84f2"),r=a("6821");t.exports=a("01f9")(Array,"Array",(function(t,e){this._t=r(t),this._i=0,this._k=e}),(function(){var t=this._t,e=this._k,a=this._i++;return!t||a>=t.length?(this._t=void 0,n(1)):n(0,"keys"==e?a:"values"==e?t[a]:[a,t[a]])}),"values"),o.Arguments=o.Array,i("keys"),i("values"),i("entries")},cb7c:function(t,e,a){var i=a("d3f4");t.exports=function(t){if(!i(t))throw TypeError(t+" is not an object!");return t}},ce10:function(t,e,a){var i=a("69a8"),n=a("6821"),o=a("c366")(!1),r=a("613b")("IE_PROTO");t.exports=function(t,e){var a,s=n(t),c=0,l=[];for(a in s)a!=r&&i(s,a)&&l.push(a);while(e.length>c)i(s,a=e[c++])&&(~o(l,a)||l.push(a));return l}},d2c8:function(t,e,a){var i=a("aae3"),n=a("be13");t.exports=function(t,e,a){if(i(e))throw TypeError("String#"+a+" doesn't accept regex!");return String(n(t))}},d3f4:function(t,e){t.exports=function(t){return"object"===typeof t?null!==t:"function"===typeof t}},d53b:function(t,e){t.exports=function(t,e){return{value:e,done:!!t}}},d8e8:function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},e11e:function(t,e){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},f559:function(t,e,a){"use strict";var i=a("5ca1"),n=a("9def"),o=a("d2c8"),r="startsWith",s=""[r];i(i.P+i.F*a("5147")(r),"String",{startsWith:function(t){var e=o(this,t,r),a=n(Math.min(arguments.length>1?arguments[1]:void 0,e.length)),i=String(t);return s?s.call(e,i,a):e.slice(a,a+i.length)===i}})},f6fd:function(t,e){(function(t){var e="currentScript",a=t.getElementsByTagName("script");e in t||Object.defineProperty(t,e,{get:function(){try{throw new Error}catch(i){var t,e=(/.*at [^\(]*\((.*):.+:.+\)$/gi.exec(i.stack)||[!1])[1];for(t in a)if(a[t].src==e||"interactive"==a[t].readyState)return a[t];return null}}})})(document)},f751:function(t,e,a){var i=a("5ca1");i(i.S+i.F,"Object",{assign:a("7333")})},fa5b:function(t,e,a){t.exports=a("5537")("native-function-to-string",Function.toString)},fab2:function(t,e,a){var i=a("7726").document;t.exports=i&&i.documentElement},fb15:function(t,e,a){"use strict";var i;(a.r(e),"undefined"!==typeof window)&&(a("f6fd"),(i=window.document.currentScript)&&(i=i.src.match(/(.+\/)[^/]+\.js(\?.*)?$/))&&(a.p=i[1]));a("f751"),a("f559"),a("ac6a"),a("cadf"),a("456d");function n(t){if(Array.isArray(t))return t}function o(t,e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t)){var a=[],i=!0,n=!1,o=void 0;try{for(var r,s=t[Symbol.iterator]();!(i=(r=s.next()).done);i=!0)if(a.push(r.value),e&&a.length===e)break}catch(c){n=!0,o=c}finally{try{i||null==s["return"]||s["return"]()}finally{if(n)throw o}}return a}}function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var a=0,i=new Array(e);a<e;a++)i[a]=t[a];return i}function s(t,e){if(t){if("string"===typeof t)return r(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);return"Object"===a&&t.constructor&&(a=t.constructor.name),"Map"===a||"Set"===a?Array.from(t):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?r(t,e):void 0}}function c(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function l(t,e){return n(t)||o(t,e)||s(t,e)||c()}a("6762"),a("2fdb");function u(t){if(Array.isArray(t))return r(t)}function d(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}function p(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function f(t){return u(t)||d(t)||s(t)||p()}var h=a("a352"),m=a.n(h),b=a("c649");function g(t,e,a){return void 0===a||(t=t||{},t[e]=a),t}function v(t,e){return t.map((function(t){return t.elm})).indexOf(e)}function x(t,e,a,i){if(!t)return[];var n=t.map((function(t){return t.elm})),o=e.length-i,r=f(e).map((function(t,e){return e>=o?n.length:n.indexOf(t)}));return a?r.filter((function(t){return-1!==t})):r}function y(t,e){var a=this;this.$nextTick((function(){return a.$emit(t.toLowerCase(),e)}))}function _(t){var e=this;return function(a){null!==e.realList&&e["onDrag"+t](a),y.call(e,t,a)}}function w(t){return["transition-group","TransitionGroup"].includes(t)}function O(t){if(!t||1!==t.length)return!1;var e=l(t,1),a=e[0].componentOptions;return!!a&&w(a.tag)}function k(t,e,a){return t[a]||(e[a]?e[a]():void 0)}function C(t,e,a){var i=0,n=0,o=k(e,a,"header");o&&(i=o.length,t=t?[].concat(f(o),f(t)):f(o));var r=k(e,a,"footer");return r&&(n=r.length,t=t?[].concat(f(t),f(r)):f(r)),{children:t,headerOffset:i,footerOffset:n}}function S(t,e){var a=null,i=function(t,e){a=g(a,t,e)},n=Object.keys(t).filter((function(t){return"id"===t||t.startsWith("data-")})).reduce((function(e,a){return e[a]=t[a],e}),{});if(i("attrs",n),!e)return a;var o=e.on,r=e.props,s=e.attrs;return i("on",o),i("props",r),Object.assign(a.attrs,s),a}var j=["Start","Add","Remove","Update","End"],E=["Choose","Unchoose","Sort","Filter","Clone"],P=["Move"].concat(j,E).map((function(t){return"on"+t})),F=null,M={options:Object,list:{type:Array,required:!1,default:null},value:{type:Array,required:!1,default:null},noTransitionOnDrag:{type:Boolean,default:!1},clone:{type:Function,default:function(t){return t}},element:{type:String,default:"div"},tag:{type:String,default:null},move:{type:Function,default:null},componentData:{type:Object,required:!1,default:null}},T={name:"draggable",inheritAttrs:!1,props:M,data:function(){return{transitionMode:!1,noneFunctionalComponentMode:!1}},render:function(t){var e=this.$slots.default;this.transitionMode=O(e);var a=C(e,this.$slots,this.$scopedSlots),i=a.children,n=a.headerOffset,o=a.footerOffset;this.headerOffset=n,this.footerOffset=o;var r=S(this.$attrs,this.componentData);return t(this.getTag(),r,i)},created:function(){null!==this.list&&null!==this.value&&b["b"].error("Value and list props are mutually exclusive! Please set one or another."),"div"!==this.element&&b["b"].warn("Element props is deprecated please use tag props instead. See https://github.com/SortableJS/Vue.Draggable/blob/master/documentation/migrate.md#element-props"),void 0!==this.options&&b["b"].warn("Options props is deprecated, add sortable options directly as vue.draggable item, or use v-bind. See https://github.com/SortableJS/Vue.Draggable/blob/master/documentation/migrate.md#options-props")},mounted:function(){var t=this;if(this.noneFunctionalComponentMode=this.getTag().toLowerCase()!==this.$el.nodeName.toLowerCase()&&!this.getIsFunctional(),this.noneFunctionalComponentMode&&this.transitionMode)throw new Error("Transition-group inside component is not supported. Please alter tag value or remove transition-group. Current tag value: ".concat(this.getTag()));var e={};j.forEach((function(a){e["on"+a]=_.call(t,a)})),E.forEach((function(a){e["on"+a]=y.bind(t,a)}));var a=Object.keys(this.$attrs).reduce((function(e,a){return e[Object(b["a"])(a)]=t.$attrs[a],e}),{}),i=Object.assign({},this.options,a,e,{onMove:function(e,a){return t.onDragMove(e,a)}});!("draggable"in i)&&(i.draggable=">*"),this._sortable=new m.a(this.rootContainer,i),this.computeIndexes()},beforeDestroy:function(){void 0!==this._sortable&&this._sortable.destroy()},computed:{rootContainer:function(){return this.transitionMode?this.$el.children[0]:this.$el},realList:function(){return this.list?this.list:this.value}},watch:{options:{handler:function(t){this.updateOptions(t)},deep:!0},$attrs:{handler:function(t){this.updateOptions(t)},deep:!0},realList:function(){this.computeIndexes()}},methods:{getIsFunctional:function(){var t=this._vnode.fnOptions;return t&&t.functional},getTag:function(){return this.tag||this.element},updateOptions:function(t){for(var e in t){var a=Object(b["a"])(e);-1===P.indexOf(a)&&this._sortable.option(a,t[e])}},getChildrenNodes:function(){if(this.noneFunctionalComponentMode)return this.$children[0].$slots.default;var t=this.$slots.default;return this.transitionMode?t[0].child.$slots.default:t},computeIndexes:function(){var t=this;this.$nextTick((function(){t.visibleIndexes=x(t.getChildrenNodes(),t.rootContainer.children,t.transitionMode,t.footerOffset)}))},getUnderlyingVm:function(t){var e=v(this.getChildrenNodes()||[],t);if(-1===e)return null;var a=this.realList[e];return{index:e,element:a}},getUnderlyingPotencialDraggableComponent:function(t){var e=t.__vue__;return e&&e.$options&&w(e.$options._componentTag)?e.$parent:!("realList"in e)&&1===e.$children.length&&"realList"in e.$children[0]?e.$children[0]:e},emitChanges:function(t){var e=this;this.$nextTick((function(){e.$emit("change",t)}))},alterList:function(t){if(this.list)t(this.list);else{var e=f(this.value);t(e),this.$emit("input",e)}},spliceList:function(){var t=arguments,e=function(e){return e.splice.apply(e,f(t))};this.alterList(e)},updatePosition:function(t,e){var a=function(a){return a.splice(e,0,a.splice(t,1)[0])};this.alterList(a)},getRelatedContextFromMoveEvent:function(t){var e=t.to,a=t.related,i=this.getUnderlyingPotencialDraggableComponent(e);if(!i)return{component:i};var n=i.realList,o={list:n,component:i};if(e!==a&&n&&i.getUnderlyingVm){var r=i.getUnderlyingVm(a);if(r)return Object.assign(r,o)}return o},getVmIndex:function(t){var e=this.visibleIndexes,a=e.length;return t>a-1?a:e[t]},getComponent:function(){return this.$slots.default[0].componentInstance},resetTransitionData:function(t){if(this.noTransitionOnDrag&&this.transitionMode){var e=this.getChildrenNodes();e[t].data=null;var a=this.getComponent();a.children=[],a.kept=void 0}},onDragStart:function(t){this.context=this.getUnderlyingVm(t.item),t.item._underlying_vm_=this.clone(this.context.element),F=t.item},onDragAdd:function(t){var e=t.item._underlying_vm_;if(void 0!==e){Object(b["d"])(t.item);var a=this.getVmIndex(t.newIndex);this.spliceList(a,0,e),this.computeIndexes();var i={element:e,newIndex:a};this.emitChanges({added:i})}},onDragRemove:function(t){if(Object(b["c"])(this.rootContainer,t.item,t.oldIndex),"clone"!==t.pullMode){var e=this.context.index;this.spliceList(e,1);var a={element:this.context.element,oldIndex:e};this.resetTransitionData(e),this.emitChanges({removed:a})}else Object(b["d"])(t.clone)},onDragUpdate:function(t){Object(b["d"])(t.item),Object(b["c"])(t.from,t.item,t.oldIndex);var e=this.context.index,a=this.getVmIndex(t.newIndex);this.updatePosition(e,a);var i={element:this.context.element,oldIndex:e,newIndex:a};this.emitChanges({moved:i})},updateProperty:function(t,e){t.hasOwnProperty(e)&&(t[e]+=this.headerOffset)},computeFutureIndex:function(t,e){if(!t.element)return 0;var a=f(e.to.children).filter((function(t){return"none"!==t.style["display"]})),i=a.indexOf(e.related),n=t.component.getVmIndex(i),o=-1!==a.indexOf(F);return o||!e.willInsertAfter?n:n+1},onDragMove:function(t,e){var a=this.move;if(!a||!this.realList)return!0;var i=this.getRelatedContextFromMoveEvent(t),n=this.context,o=this.computeFutureIndex(i,t);Object.assign(n,{futureIndex:o});var r=Object.assign({},t,{relatedContext:i,draggedContext:n});return a(r,e)},onDragEnd:function(){this.computeIndexes(),F=null}}};"undefined"!==typeof window&&"Vue"in window&&window.Vue.component("draggable",T);var D=T;e["default"]=D}})["default"]}))},"382b":function(t,e,a){e=t.exports=a("690e")(!1),e.push([t.i,'.gcxt[data-v-17d92568] :export{colorPrimary:#2c5cf7;headerBackgroundColor:#fff;headerTextColor:#333}[data-v-17d92568] .multi-texts{padding-right:15px}[data-v-17d92568] .af-item .label{white-space:nowrap}.gcxt .view-item[data-v-17d92568]{position:relative;padding:11px 15px;padding-right:68px;background:#fff}.gcxt .view-item .label[data-v-17d92568]{font-size:16px;line-height:1.6;color:#000}.gcxt .view-item .tip[data-v-17d92568]{font-size:12px;line-height:1.6;color:#999}.gcxt .view-item+.view-item[data-v-17d92568]{position:relative}.gcxt .view-item+.view-item[data-v-17d92568]:before{top:0;content:" ";position:absolute;z-index:1;right:0;border-top:1px solid #ececec;-webkit-transform:scaleY(.5);transform:scaleY(.5);left:0;left:15px}.gcxt .delete-action[data-v-17d92568]{padding:10px 0 10px 10px;color:#c8c8c8}[data-v-17d92568] .multi-texts{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between}',""])},"3caa":function(t,e,a){var i=a("5a47");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var n=a("85cb").default;n("4e3173a5",i,!0,{sourceMap:!1,shadowMode:!1})},"3ee5":function(t,e,a){e=t.exports=a("690e")(!1),e.push([t.i,".gcxt[data-v-92f1addc] :export{colorPrimary:#2c5cf7;headerBackgroundColor:#fff;headerTextColor:#333}[data-v-92f1addc] .van-collapse-item__title{background:transparent;padding:6px 15px}[data-v-92f1addc] .van-collapse-item__title:after{display:none}[data-v-92f1addc] .van-popup{width:100%;height:100%}[data-v-92f1addc] .van-cell__title{font-size:13px;color:#666}[data-v-92f1addc] .van-hairline--top,[data-v-92f1addc] .van-hairline--top-bottom{border:none}[data-v-92f1addc] .van-hairline--top-bottom:after,[data-v-92f1addc] .van-hairline--top:after{display:none}[data-v-92f1addc] .van-collapse-item:not(:last-child){margin-bottom:10px}[data-v-92f1addc] .form-detail-item.free,[data-v-92f1addc] .form-grouped .free,[data-v-92f1addc] .van-collapse-item--border:after{display:none}.gcxt .sub-form[data-v-92f1addc]{margin-bottom:10px}.gcxt .sub-form .cell[data-v-92f1addc]{padding:12px 15px}.gcxt .sub-form .cell[data-v-92f1addc] .van-cell__value{font-size:16px}.gcxt .sub-form.mode-edit.addable[data-v-92f1addc],.gcxt .sub-form.mode-edit.addable[data-v-92f1addc] .van-cell__value{color:#2c5cf7}.gcxt .sub-form.mode-edit .sub-form--popup-content[data-v-92f1addc]{margin-top:10px}.gcxt .sub-form--form-title[data-v-92f1addc]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;padding:7px 15px;color:#666;font-size:13px}.gcxt .sub-form--free[data-v-92f1addc] .af-info-cell{padding-top:15px}.gcxt .sub-form--popup[data-v-92f1addc]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;height:100%;width:100%}.gcxt .sub-form--popup-content[data-v-92f1addc]{-webkit-box-flex:1;-ms-flex:1;flex:1;padding-bottom:15px}.gcxt .sub-form--popup .ctrl[data-v-92f1addc]{position:absolute;bottom:0;left:0;right:0;background:#3492e9;color:#fff;font-size:16px;text-align:center;height:45px;line-height:45px}.gcxt .sub-form--group[data-v-92f1addc]{margin-top:9px}.gcxt .sub-form--group-form[data-v-92f1addc]{padding:10px 0;background:#fff}.gcxt .icon--jia[data-v-92f1addc]{margin-right:5px;font-size:13px;color:#2c5cf7}.gcxt .group-icon[data-v-92f1addc]{color:#3492e9}.gcxt .icon_right-arrow[data-v-92f1addc]{margin-left:10px;color:#999;font-size:14px}.gcxt .field-total[data-v-92f1addc] .af-info-cell--value{color:#f65e5e}.gcxt .header--right-action[data-v-92f1addc]{color:#2c5cf7}.gcxt .mode-view .sub-form--free[data-v-92f1addc] .af-info-cell{padding:5px 15px}",""])},"3fe4":function(t,e,a){"use strict";a.d(e,"b",(function(){return o})),a.d(e,"d",(function(){return r})),a.d(e,"c",(function(){return s})),a.d(e,"a",(function(){return c}));var i=a("ab3e"),n=a("da71"),o=function(t){return Object(i["a"])({url:n["a"].get_invoice_registration_list,data:t})},r=function(t){return Object(i["a"])({url:n["a"].save_invoice_registration,data:t})},s=function(t){return Object(i["a"])({url:n["a"].get_user_invoice_list,data:t})},c=function(t){return Object(i["a"])({url:n["a"].delete_invoice_registration,data:t})}},"4a2a":function(t,e,a){"use strict";var i,n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("van-popup",{directives:[{name:"phy-back",rawName:"v-phy-back",value:{status:t.value,method:"close"},expression:"{status: value, method: 'close'}"}],staticClass:"biz-selector-popup fixed-bottom--popup",class:t.iosClassNames,attrs:{value:t.value,position:"bottom","get-container":"body"},on:{input:t.close}},[a("div",{staticClass:"biz-types-wrap"},[a("div",{staticClass:"biz-type-content",class:"count-"+t.options.length,on:{click:function(t){t.stopPropagation()}}},t._l(t.options,(function(e,i){return a("div",{key:i,staticClass:"item",on:{click:function(a){return a.stopPropagation(),function(){return t.handleClick(e)}()}}},[a("span",{staticClass:"biz-icon"},[a("i",{staticClass:"iconfont",class:t.renderIconClass(e),style:t.renderIconStyle(e)})]),e.change_type?a("div",{staticClass:"change-type-name"},[t._v(t._s(e.change_type))]):t._e(),a("div",{staticClass:"name"},[t._v(t._s(e.name||e.title))]),e.desc?a("div",{staticClass:"desc"},[t._v(t._s(e.desc))]):t._e()])}))),a("i",{staticClass:"close-btn iconfont icon-_guanbi",on:{click:function(e){return e.stopPropagation(),t.close(e)}}})])])],1)},o=[],r=a("28f8"),s=a("5fe8"),c=(i={},Object(r["a"])(i,s["a"].WORK_SHEET,{class:"icon-_daiban-gongchengla",style:{color:"#02b0ff"}}),Object(r["a"])(i,s["a"].MULTI_WORK_SHEET,{class:"icon-_daiban-gongchengla",style:{color:"#fb6f40"}}),Object(r["a"])(i,s["a"].PRE_CONFIRM_SHEET,{class:"icon-_daiban-querenwangong",style:{color:"#ddb984"}}),Object(r["a"])(i,s["a"].CONFIRMSHEET,{class:"icon-_daiban-wangongquer",style:{color:"#99e055"}}),Object(r["a"])(i,s["a"].SPECIAL_CONFIRM_SHEET,{style:{color:"#01e2f0"}}),Object(r["a"])(i,s["a"].jzc_clapply,{style:{color:"#fb6f40"}}),Object(r["a"])(i,s["a"].PAYMENT,{class:"icon-add-payment",style:{color:"#4EB8AE"}}),Object(r["a"])(i,s["a"].OUTPUT_VALUE,{class:"icon-add-outputvalue",style:{color:"#2B85FF"}}),Object(r["a"])(i,s["a"].JZC_CLAPPLY,{class:"icon--_daiban-jiazhicaidan",style:{color:"#ff9400"}}),Object(r["a"])(i,s["a"].JZC_CONFIRM,{class:"icon--_daiban-shouhuodan",style:{color:"#2b85ff"}}),i),l=c,u={name:"BizSelector",props:{value:{type:Boolean,default:!1},options:{type:Array,default:function(){return[]}}},data:function(){return{}},methods:{close:function(){this.$emit("input",!1)},renderIconStyle:function(t){return l[t.biz_type]&&l[t.biz_type].style?l[t.biz_type].style:{}},renderIconClass:function(t){return l[t.biz_type]&&l[t.biz_type].class?l[t.biz_type].class+" "+t.key:"icon-_daiban-gongchengla "+t.key},handleClick:function(t){this.$emit("selected",t)}}},d=u,p=(a("b345"),a("c701")),f=Object(p["a"])(d,n,o,!1,null,"6ff5fdc2",null);e["a"]=f.exports},"4dc7":function(t,e,a){var i=a("24e8");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var n=a("85cb").default;n("13fca0db",i,!0,{sourceMap:!1,shadowMode:!1})},"4e9d":function(t,e,a){e=t.exports=a("690e")(!1),e.push([t.i,".gcxt .user-item[data-v-76bd840a]{-ms-flex-negative:0;flex-shrink:0}.gcxt .item-selected-desc[data-v-76bd840a]{display:-webkit-box;display:-ms-flexbox;display:flex;padding:12px 15px;font-size:14px;margin-bottom:10px;background:#fff}.gcxt .item-selected-left[data-v-76bd840a]{color:#999}.gcxt .item-selected-right[data-v-76bd840a]{-webkit-box-flex:1;-ms-flex:1;flex:1;line-height:20px}",""])},"4ec9":function(t,e,a){var i=a("12c1");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var n=a("85cb").default;n("62fc9054",i,!0,{sourceMap:!1,shadowMode:!1})},"507a":function(t,e,a){e=t.exports=a("690e")(!1),e.push([t.i,'.gcxt[data-v-87e6b2d8] :export{colorPrimary:#2c5cf7;headerBackgroundColor:#fff;headerTextColor:#333}.gcxt .editable-form[data-v-87e6b2d8]{margin-top:10px}.gcxt .view-table[data-v-87e6b2d8]{margin-top:-10px;background:#fff;overflow-x:auto}.gcxt .view-table[data-v-87e6b2d8] tr>td.changed .tc-content{color:#ff3c46}.gcxt .icon_right-arrow[data-v-87e6b2d8]{margin-left:10px;color:#999;font-size:12px}.gcxt .cell-status[data-v-87e6b2d8]{color:#ff9400}.gcxt .cell-status.valided[data-v-87e6b2d8]{color:#75c813}.gcxt .copy-action[data-v-87e6b2d8]{position:relative;color:#2c5cf7;line-height:1;white-space:nowrap}.gcxt .copy-action[data-v-87e6b2d8]:before{content:"";display:block;position:absolute;top:50%;-webkit-transform:translateY(-50%);transform:translateY(-50%);left:-8px;height:16px;width:1px;background:#c8c8c8}',""])},"540c":function(t,e,a){"use strict";var i=a("82f8"),n=a("f121");e["a"]={getUsersByIds:function(t){var e=this;return Object(i["A"])({user_ids:JSON.stringify(t)}).then((function(t){var a=t.data;return e.formatUsers(a)}))},getRecentlyList:function(t){return Object(i["z"])(t).then((function(t){var e=t.data;return e}))},formatUsers:function(t){var e=n["e"].length;return t.map((function(t,a){if(!t.avatar&&!t.avatarBg){var i="";t.user_code&&(i=n["e"][t.user_code.substr(-1)]),i||(i=n["e"][a%e]),t.avatar=i,t.station_name?t.role=t.station_name:t.role=n["k"][t.role_code]}return t}))}}},5434:function(t,e,a){e=t.exports=a("690e")(!1),e.push([t.i,'.gcxt[data-v-e6a94794] :export{colorPrimary:#2c5cf7;headerBackgroundColor:#fff;headerTextColor:#333}.gcxt .select-people[data-v-e6a94794]{padding:12px 15px 15px;background-color:#fff}.gcxt .select-people .clear-action[data-v-e6a94794]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.gcxt .select-people .clear-action span[data-v-e6a94794]{-webkit-box-flex:1;-ms-flex:1;flex:1;font-size:16px}.gcxt .select-people .clear-action a[data-v-e6a94794]{font-size:13px;color:#2c5cf7}.gcxt .select-people .clear-action .unclick[data-v-e6a94794]{color:#c8c8c8}.gcxt .station-list[data-v-e6a94794]{margin-top:12px}.gcxt .draggable-list[data-v-e6a94794],.gcxt .station-list[data-v-e6a94794]{display:-webkit-box;display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap}.gcxt .station-item[data-v-e6a94794]{margin-right:11px;margin-bottom:10px;width:70px;text-align:center;font-size:0;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.gcxt .station-item.-last[data-v-e6a94794]{margin-right:0}.gcxt .station-item.-last .choose-item-wrapper[data-v-e6a94794]:after{display:none}.gcxt .station-item:not(.sortable-drag) .choose-item-wrapper[data-v-e6a94794]:after{content:"";position:absolute;top:50%;right:-33px;-webkit-transform:translateY(-50%);transform:translateY(-50%);width:30px;border-top:1px dotted #c8c8c8}.gcxt .station-item.-invalid .choose-item[data-v-e6a94794]{background-color:#fff;border:1px solid #c8c8c8}.gcxt .station-item.-invalid .choose-item[data-v-e6a94794] .icon__plus{opacity:0}.gcxt .station-item.-invalid .station-name[data-v-e6a94794]{color:#ff3b30}.gcxt .choose-item-wrapper[data-v-e6a94794]{display:inline-block;position:relative}.gcxt .station-name[data-v-e6a94794]{margin-top:10px;color:#666;font-size:13px;line-height:1.2}.gcxt .bottom-content[data-v-e6a94794]{margin-top:20px}.gcxt .tip[data-v-e6a94794]{margin-bottom:7px;font-size:12px;color:#999}',""])},5490:function(t,e,a){"use strict";a("9a0e")("link",(function(t){return function(e){return t(this,"a","href",e)}}))},"5a47":function(t,e,a){e=t.exports=a("690e")(!1),e.push([t.i,".gcxt[data-v-67ab2812] :export{colorPrimary:#2c5cf7;headerBackgroundColor:#fff;headerTextColor:#333}.gcxt .cell[data-v-67ab2812]{margin-bottom:10px}[data-v-67ab2812] .van-cell{padding:12px 15px}[data-v-67ab2812] .van-cell__title .label{display:inline-block;vertical-align:middle;margin-right:10px;width:97px;font-size:16px;color:#323232}[data-v-67ab2812] .van-cell__title .placeholder{color:#c8c8c8}[data-v-67ab2812] .van-cell__value{color:#2c5cf7}[data-v-67ab2812] .van-cell__label{font-size:13px;color:#666}[data-v-67ab2812] .icon__arrow{color:#999;font-size:14px}[data-v-67ab2812] .list-item .van-cell__title{font-size:14px;color:#000}[data-v-67ab2812] .list-item.van-cell{padding:8px 15px}[data-v-67ab2812] .field-wrapper{margin:0 0 10px}.gcxt .reverse-popup[data-v-67ab2812] .icon__delete{font-size:17px;color:#fff}.gcxt .reverse-popup[data-v-67ab2812] .field-contract_id{margin-bottom:10px}.gcxt .tip[data-v-67ab2812]{margin-top:-5px;padding:0 12px;color:#999;font-size:12px}",""])},"5c7b":function(t,e,a){"use strict";a("fdbe")},6280:function(t,e,a){"use strict";a("cc57");var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",["edit"===t.mode?a("div",{staticClass:"user-selector -edit"},[a("cell",{attrs:{label:t.label,placeholder:t.selecteds.length?"":t.placeholder,value:t.viewSelectedsTexts},on:{click:t.openSelector}}),t.tip.length?a("div",{staticClass:"tip"},[t._v(t._s(t.tip))]):t._e(),t.show?a("selector",{attrs:{selecteds:t.selecteds,list:t.list,multi:t.multi,"show-search-btn":t.showSearchBtn,title:t.selectorTitle,"need-group":t.needGroup,"exclude-my-self":t.excludeMySelf},on:{confirm:t.selectorConfirm},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}}):t._e()],1):"view"===t.mode?a("div",{staticClass:"user-selector -view"},[a("van-collapse",{model:{value:t.collapseOpening,callback:function(e){t.collapseOpening=e},expression:"collapseOpening"}},[a("van-collapse-item",{attrs:{name:"default",title:"抄送"}},[a("div",{staticClass:"selecteds-text"},[t._v(t._s(t.viewSelectedsTexts))])])],1)],1):t._e()])},n=[],o=a("4c09"),r=a("6bfd"),s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("popup-page",{directives:[{name:"phy-back",rawName:"v-phy-back",value:{status:t.show,method:"close"},expression:"{ status: show, method: 'close' }"}],attrs:{value:t.show}},[a("template",{slot:"header"},[a("v-header",{attrs:{"back-action":t.close,title:t.title}}),a("div",{staticClass:"header-top"},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.multi&&t.curSelecteds.length,expression:"multi && curSelecteds.length"}],ref:"SelectedBar",staticClass:"user-selector--selected"},[a("transition-group",{attrs:{name:"van-fade"}},t._l(t.curSelecteds,(function(e,i){return a("div",{key:i,staticClass:"user-selector--selected-item",on:{click:function(a){t.removeUser(e)}}},[a("span",{staticClass:"text"},[t._v(t._s(e.name))]),a("i",{staticClass:"icon_close iconfont icon-_guanbi"})])})))],1),a("search-bar",{attrs:{"enable-cancel":!t.multi},on:{search:t.onSearch},model:{value:t.searchKey,callback:function(e){t.searchKey=e},expression:"searchKey"}})],1)],1),t.searchShow||t.needGroup?t._e():a("div",{staticClass:"user-selector--list"},t._l(t.list,(function(e,i){return a("page-item",{key:i,attrs:{user:e,multi:t.multi,index:i,selected:!!t.curSelectedsMap[e.user_id]},on:{click:function(a){t.onItemClick(e,i)}}})}))),a("div",{staticClass:"user-selector--tabs"},[!t.searchShow&&t.needGroup?a("van-tabs",{class:"tab-count-"+t.parts.length,attrs:{animated:""},model:{value:t.active,callback:function(e){t.active=e},expression:"active"}},t._l(t.parts,(function(e,i){return a("van-tab",{key:i,attrs:{title:e}},[a("div",{staticClass:"user-selector--list"},[t._l(t.userList[i],(function(e,i){return a("page-item",{key:i,attrs:{user:e,multi:t.multi,index:i,selected:!!t.curSelectedsMap[e.user_id]},on:{click:function(a){t.onItemClick(e,i)}}})})),t.userList[i].length?t._e():a("no-record",{attrs:{txt:"暂无数据"}})],2)])}))):t._e()],1),t.searchShow?a("div",{staticClass:"user-selector--list"},[t._l(t.searchResult,(function(e,i){return a("page-item",{key:i,attrs:{user:e,multi:t.multi,index:i,selected:!!t.curSelectedsMap[e.user_id]},on:{click:function(a){t.onSearchSelect(e,i)}}})})),t.searchResult.length?t._e():a("no-record",{attrs:{txt:"没有符合条件的结果",type:"search"}})],2):t._e(),a("template",{slot:"footer"},[t._t("footer",[t.multi?a("app-button-group",{directives:[{name:"hide-by-keyboard",rawName:"v-hide-by-keyboard"}]},[a("app-button",{on:{click:t.confirm}},[t._v("确认("+t._s(t.curSelecteds.length)+")")])],1):t._e()])],2)],2)},c=[],l=(a("e204"),a("9dd9"),a("de78"),a("6d57"),a("e10e"),a("5d4f")),u=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"user-selector-item",on:{click:t.click}},[t.user.photo?a("div",{staticClass:"user-selector-item--avatar",style:{backgroundImage:"url("+t.parsePath(t.user.photo)+")"}}):a("div",{staticClass:"user-selector-item--avatar",style:t.getBackground()},[t._v("\n    "+t._s(t.user.name.substring(0,1))+"\n  ")]),a("div",{staticClass:"user-selector-item--content"},[a("div",{staticClass:"user-selector-item--content-name",class:{"user-selector-item--content-active":t.selected}},[t._v("\n      "+t._s(t.user.name+" "+(t.user.station_name?"（"+t.user.station_name+"）":""))+"\n    ")]),!t.multi&&t.selected?a("i",{staticClass:" iconfont icon-_xuanzhong"}):t._e(),t.multi&&!t.selected?a("i",{staticClass:" iconfont icon-redio-unselected"}):t._e(),t.multi&&t.selected?a("i",{staticClass:" iconfont icon-selected"}):t._e()])])},d=[],p=(a("163d"),{name:"UserSelectorItem",props:{user:{type:Object,default:function(){}},multi:{type:Boolean,default:!1},selected:{type:Boolean,default:!1},index:{type:Number,default:0}},methods:{click:function(){this.$emit("click")},getBackground:function(){return"background: ".concat(this.user.avatarBg||this.user.avatar,";")},parsePath:function(t){return'"'+t+'"'}}}),f=p,h=(a("c816"),a("c701")),m=Object(h["a"])(f,u,d,!1,null,"44b19207",null),b=m.exports,g=a("e2c8"),v=a("6485"),x=a("a740"),y=a("933f"),_={name:"UserSelectorPage",components:{AfHeader:l["a"],PageItem:b,SearchPage:g["a"],noRecord:v["a"]},model:{prop:"show",event:"close"},props:{show:{type:Boolean,default:!1},selecteds:{type:Array,default:function(){return[]}},list:{type:Array,default:function(){return[]}},title:{type:String,default:""},multi:{type:Boolean,default:!1},needGroup:{type:Boolean,default:!1},searchPlaceholder:{type:String,default:""},excludeMySelf:{type:Boolean,default:!1}},data:function(){return{curSelecteds:Object(o["a"])(this.selecteds),active:0,searchKey:"",searchResult:[],history:[]}},computed:{curSelectedsMap:function(){return this.curSelecteds.reduce((function(t,e){return t[e.user_id]=e,t}),{})},parts:function(){return Object.keys(this.groupList)},groupList:function(){var t=this,e=this.list.filter((function(t){return"1"!==t.is_virtual_phone}));if(!this.needGroup)return{};var a=[{roleName:"乙方",roleList:["1004","1005"],peopleList:[]},{roleName:"监理",roleList:["1003"],peopleList:[]},{roleName:"咨询",roleList:["998"],peopleList:[]},{roleName:"甲方",roleList:["1000","1001","1002"],peopleList:[]}],i={};e.forEach((function(e){t.excludeMySelf&&e.user_id===Object(x["d"])("user_id")||(i[e.role_code]?i[e.role_code].push(e):i[e.role_code]=[e])})),a.forEach((function(t){t.roleList.forEach((function(e){i[e]&&(t.peopleList=t.peopleList.concat(i[e]))}))})),a=a.filter((function(t){return t.peopleList.length>0}));var n={};return a.forEach((function(t){n[t.roleName]=t.peopleList})),n},userList:function(){var t=Object.values(this.groupList);return t.forEach((function(t){t.forEach((function(t,e){/^#/.test(t.avatar)&&(t.avatarBg=t.avatar,t.avatar="")}))})),t},searchShow:function(){return 0!==this.searchKey.length}},watch:{selecteds:function(t){this.curSelecteds=Object(o["a"])(this.selecteds)},show:function(t){t&&(this.curSelecteds=Object(o["a"])(this.selecteds))}},mounted:function(){window.SelectorPageTest=this},methods:{close:function(){this.searchKey="",this.$emit("close",!1),this.active=0},onSearch:function(t){var e=this;y["a"].idkey(y["a"].idkeys.editSearchCopyTo);var a,i=Object(x["d"])("user_id"),n=[];t?(a=new RegExp(t,"i"),this.list.forEach((function(t){(a.test(t.name)||a.test(t.pinyin)||a.test(t.role))&&(e.excludeMySelf&&t.user_id===i||n.push(t))}))):n=[],this.searchResult=n},deleteHistory:function(){this.history.splice(0,this.history.length)},confirm:function(){y["a"].idkey(y["a"].idkeys.editClickCheckedCopyTo),this.$emit("confirm",this.curSelecteds),this.close()},onItemClick:function(t,e){this.handleItemClick(t),this.multi||(this.$emit("confirm",this.curSelecteds,e),this.close())},onSearchSelect:function(t,e){this.handleItemClick(t),this.multi||(this.$emit("confirm",this.curSelecteds,e),this.close())},handleItemClick:function(t){this.multi?this.toggleUser(t):this.curSelectedsMap[t.user_id]?this.removeUser(t):(this.curSelecteds.splice(0,this.selecteds.length),this.curSelecteds.push(t),this.selectedBarScrollEnd())},toggleUser:function(t){this.curSelectedsMap[t.user_id]?(y["a"].idkey(y["a"].idkeys.editClickDelCopyTo),this.removeUser(t)):(y["a"].idkey(y["a"].idkeys.editClickAddCopyTo),this.curSelecteds.push(t),this.selectedBarScrollEnd())},removeUser:function(t){var e=this.curSelecteds.findIndex((function(e){return e.user_id===t.user_id}));this.curSelecteds.splice(e,1)},selectedBarScrollEnd:function(){var t=this;this.$nextTick((function(){t.$refs.SelectedBar.scrollLeft=2e3}))}}},w=_,O=(a("6be9"),Object(h["a"])(w,s,c,!1,null,"a743c78e",null)),k=O.exports,C=a("d50e"),S=a("14ba"),j=a("0b53c"),E=a("329b");E["a"].use(C["a"]).use(S["a"]).use(j["a"]);var P=k,F={name:"UserSelectorCell",components:{Cell:r["a"],Selector:P},model:{prop:"selecteds",event:"onSubmit"},props:{label:String,placeholder:{type:String,default:"非必选"},selecteds:{type:Array,default:function(){return[]}},showSearchBtn:Boolean,selectorTitle:String,multi:Boolean,list:{type:Array,default:function(){return[]}},history:{type:Array,default:function(){return[]}},beforeEdit:{type:Function,default:function(){return!0}},tip:{type:String,default:""},needGroup:{type:Boolean,default:!0},excludeMySelf:{type:Boolean,default:!1},mode:{type:String,default:"edit"}},data:function(){return{show:!1,selectIndex:-1,collapseOpening:["default"]}},computed:{viewSelectedsTexts:function(){return this.selecteds.map((function(t){return t.name})).join("；")}},methods:{removeSelected:function(t,e){y["a"].idkey(y["a"].idkeys.editClickDelOutsideCopyTo);var a=Object(o["a"])(this.selecteds);a.splice(e,1),this.$emit("onSubmit",a)},openSelector:function(){this.beforeEdit()&&(this.show=!0)},selectorConfirm:function(t,e){this.selectIndex=e,this.$emit("onSubmit",t)}}},M=F,T=(a("c3c2"),Object(h["a"])(M,i,n,!1,null,"1ddbaedb",null)),D=T.exports;D.install=function(t){t.component(D.name,D)};e["a"]=D},6413:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("app-button-group",[t.moreList.length?a("div",{ref:"moreBtns",staticClass:"btns"},[a("div",{staticClass:"more",on:{click:function(e){t.showDialog=!t.showDialog}}},[a("i",{staticClass:"iconfont icon--genduo",class:{active:t.showDialog}}),a("span",[t._v("更多")])]),a("div",{directives:[{name:"show",rawName:"v-show",value:t.showDialog,expression:"showDialog"}],ref:"popupContent",staticClass:"approve-btn-popup"},[a("div",{staticClass:"mask",on:{click:function(e){t.showDialog=!1}}}),a("div",{staticClass:"approve-btn-dialog"},[t._l(t.moreList,(function(e,i){return[a("approve-popup",{key:e.action,attrs:{"sp-config":e,"action-data":t.data.actionData,"get-sheet-refs":t.getSheetRefs,sheet:t.data.sheet,plain:0===i&&t.slicedButtons.length>1,"need-revise":t.needRevise,"btn-type":"more"},on:{click:t.onActionClick}})]})),a("span",{staticClass:"trangle"})],2)])]):t._e(),t._l(t.slicedButtons,(function(e,i){return[a("approve-popup",{key:e.action,attrs:{"sp-config":e,"action-data":t.data.actionData,"get-sheet-refs":t.getSheetRefs,sheet:t.data.sheet,plain:i!==t.slicedButtons.length-1&&t.slicedButtons.length>1,"need-revise":t.needRevise},on:{click:t.onActionClick}})]}))],2)},n=[],o=a("fa63"),r={name:"ApproveGroup",components:{ApprovePopup:o["a"]},props:{data:{type:Object,default:function(){return{buttons:[]}}},needRevise:{type:Boolean},appendAttach:{type:Object},appendPhoto:{type:Object},workloads:{type:Array,default:function(){return[]}},getSheetRefs:{type:Function,default:function(){return{}}}},data:function(){return{showDialog:!1,moreList:[],slicedButtons:[]}},created:function(){this.init()},mounted:function(){this.$refs.popupContent&&document.body.appendChild(this.$refs.popupContent)},beforeDestroy:function(){this.$refs.popupContent&&this.$refs.moreBtns.appendChild(this.$refs.popupContent)},methods:{onActionClick:function(){this.showDialog=!1},init:function(){if(0!==this.data.buttons.length){var t=3;this.data.buttons.length>t?(this.moreList=this.data.buttons.slice(0,this.data.buttons.length-t+1),this.slicedButtons=this.data.buttons.slice(0-t+1)):this.slicedButtons=this.data.buttons}}}},s=r,c=(a("8ee4"),a("c701")),l=Object(c["a"])(s,i,n,!1,null,"a94050f2",null);e["a"]=l.exports},"664e":function(t,e,a){var i=a("b998");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var n=a("85cb").default;n("d1e2d448",i,!0,{sourceMap:!1,shadowMode:!1})},6813:function(t,e,a){var i=a("9653");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var n=a("85cb").default;n("05bac170",i,!0,{sourceMap:!1,shadowMode:!1})},6892:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"show",rawName:"v-show",value:!(t.edit&&t.isIOS),expression:"!(edit && isIOS)"}],staticClass:"field-wrapper attachment-section",class:[t.edit?"-edit":"-view",t.restrictFlag?"-restrict":"-simple",Object.keys(t.fileMap).length?"-has-file":""]},[t.$slots.title&&t.edit?a("div",{staticClass:"field-title",on:{click:t.chooseFile}},[t._t("title")],2):t.showTitle&&t.edit&&!t.restrictFlag?a("div",{staticClass:"field-title",on:{click:function(e){t.chooseFile(!1)}}},[a("span",{staticClass:"text"},[t._v(t._s(t.label))]),a("span",{staticClass:"tip"},[t._v(t._s(t.tip))]),a("i",{staticClass:"span-fujian iconfont icon-_fujian"})]):t.showTitle&&t.edit&&t.restrictFlag?a("div",{staticClass:"field-title"},[a("span",{staticClass:"text"},[t._v("附件")]),a("span",{staticClass:"tip"},[t._v(t._s(t.tip))])]):t._e(),a("van-collapse",{class:{hidetitle:!t.showTitle&&!t.edit},attrs:{accordion:""},model:{value:t.collapseOpening,callback:function(e){t.collapseOpening=e},expression:"collapseOpening"}},[a("van-collapse-item",{attrs:{name:"default"}},[a("template",{slot:"title"},[t._v("\n        附件 ("+t._s(t.listLength)+")\n      ")]),t.edit||!t.hasAppend||t.restrictFlag?t._e():a("span",{staticClass:"append-toggle",attrs:{slot:"right-icon"},on:{click:function(e){e.stopPropagation(),t.addAppend()}},slot:"right-icon"},[t._v("追加附件")]),a("div",{staticClass:"list-content"},[t.restrictFlag?a("ul",[t._l(t.restrictSettings,(function(e,i){return[e.attach_name&&"其他附件"!==e.attach_name&&"other"!==e.attach_name?a("li",{directives:[{name:"show",rawName:"v-show",value:e.visible,expression:"setting.visible"}],key:i+e.attach_name,staticClass:"attachment-group"},[a("div",{staticClass:"attachment-title-wrapper"},[a("div",{staticClass:"attachment-group-title"},[a("div",{staticClass:"left"},[a("span",{staticClass:"attachment-name"},[t._v(t._s(e.attach_name))]),1==e.is_must?a("span",{staticClass:"attachment-required"},[t._v("(必传)")]):t._e(),e.attach_remark?a("i",{staticClass:"attachment-remark iconfont icon-_xiangqing",on:{click:function(a){t.openRemark(e.attach_remark)}}}):t._e()]),a("div",{staticClass:"right"},[void 0,t.edit&&e.uploadable?a("i",{staticClass:"iconfont icon-_fujian icon__fujian",on:{click:function(a){t.chooseFile(e)}}}):t._e(),t.edit&&!e.uploadable?a("span",{staticClass:"no-uploadable"},[t._v("无添加权限")]):t._e(),t.edit||t.hasAppend||!t.restrictGroupMap[e.attach_name]||t.restrictGroupMap[e.attach_name].files.length?t._e():a("span",{staticClass:"empty-tip"},[t._v("无")]),!t.edit&&t.hasAppend?a("span",{staticClass:"append-toggle",attrs:{slot:"right-icon"},on:{click:function(a){a.stopPropagation(),t.addAppend(e)}},slot:"right-icon"},[t._v("追加附件")]):t._e()],2)])]),t.restrictGroupMap[e.attach_name]&&t.restrictGroupMap[e.attach_name].files.length?t._l(t.restrictGroupMap[e.attach_name].files,(function(i,n){return a("attachment-item",{key:n+i.file_id,attrs:{edit:t.edit,"attach-type":e.attach_name,file:i},on:{delete:t.deleteFile,open:t.openFile}})})):t._e()],2):t._e()]})),a("li",{staticClass:"attachment-group"},[a("div",{staticClass:"attachment-title-wrapper"},[a("div",{staticClass:"attachment-group-title"},[a("div",{staticClass:"left"},[a("span",{staticClass:"attachment-name"},[t._v("其他附件")])]),a("div",{staticClass:"right"},[t.edit?a("i",{staticClass:"iconfont icon-_fujian icon__fujian",on:{click:function(e){t.chooseFile({attach_name:"其他附件",attach_remark:"",is_must:0})}}}):t._e(),!t.edit&&t.hasAppend?a("span",{staticClass:"append-toggle",attrs:{slot:"right-icon"},on:{click:function(e){e.stopPropagation(),t.addAppend({attach_name:"其他附件",attach_remark:"",is_must:0})}},slot:"right-icon"},[t._v("追加附件")]):t._e()])])]),t._l(t.restrictGroupMap["其他附件"].files,(function(e,i){return a("attachment-item",{key:i+e.file_id,attrs:{edit:t.edit,"attach-type":"其他附件",file:e,"is-uploading":t.uploadingMap[e.file_id]},on:{delete:t.deleteFile,open:t.openFile}})}))],2)],2):t._e(),t.restrictFlag?t._e():a("div",t._l(t.simpleFileList,(function(e,i){return a("attachment-item",{key:i+e.file_id,attrs:{edit:t.edit,file:e},on:{delete:t.deleteFile,open:t.openFile}})})))])],2)],1),!t.edit&&t.hasAppend&&t.showAppendPopup?a("attachment-append-popup",{attrs:{data:t.appendFileList,setting:t.appendRestrictSetting},on:{appendAdd:function(e){t.addAppend(t.appendRestrictSetting)},appendSubmit:t.submitAppend,appendCancel:t.cancelAppend,delete:t.deleteFile,open:t.openFile}}):t._e()],1)},n=[],o=(a("5ab2"),a("4c09")),r=a("b23b"),s=a("28f8"),c=(a("e10e"),a("163d"),a("6d57"),a("fe6f")),l=a("0938"),u=a("a740"),d=a("948d"),p=a("82f8"),f=a("a075"),h=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("popup-page",{directives:[{name:"phy-back",rawName:"v-phy-back",value:{status:t.show,method:"cancel"},expression:"{status: show, method: 'cancel'}"}],attrs:{value:!0}},[a("v-header",{attrs:{slot:"header",title:"追加附件","is-back":!1},slot:"header"},[a("span",{staticClass:"cancel-action",attrs:{slot:"left"},on:{click:t.cancel},slot:"left"},[t._v("取消")]),a("span",{staticClass:"append-action",attrs:{slot:"right"},on:{click:t.add},slot:"right"},[t._v("添加附件")])]),t.setting?a("div",{staticClass:"restrict-setting-label"},[a("span",{staticClass:"attachment-name"},[t._v(t._s(t.setting.attach_name))]),1==t.setting.is_must?a("span",{staticClass:"attachment-required"},[t._v("(必传)")]):t._e(),t.setting.attach_remark?a("i",{staticClass:"attachment-remark iconfont icon-_xiangqing",on:{click:function(e){t.openRemark(t.setting.attach_remark)}}}):t._e()]):t._e(),a("div",{staticClass:"attchment-list"},t._l(t.data,(function(e,i){return a("attachment-item",t._g({key:i+e.file_id,attrs:{edit:!0,"is-append-type":!0,file:e}},t.$listeners))}))),a("template",{slot:"footer"},[t.data.length?a("app-button-group",[a("app-button",{on:{click:t.submit}},[t._v("提交")])],1):t._e()],1)],2)},m=[],b=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"attachment-item",on:{click:t.openFile}},[a("div",{staticClass:"item-inner"},[a("div",{staticClass:"item-thumb"},[t.isPicture(t.curFile)?[t.curFile.file_path?a("img",{staticClass:"attach-pic",attrs:{src:t.getImagePath(t.curFile.file_path),alt:"img"}}):a("i",{staticClass:"icon-picture iconfont icon--fujian-tupian-"})]:a("i",{class:t.getTypeClass(t.curFile)+" icon-file-type"}),t.edit?a("span",{staticClass:"icon-delete-wrapper",on:{click:t.deleteFile}},[a("i",{staticClass:"icon-delete iconfont icon-_shanchu-"})]):t._e()],2),a("div",{staticClass:"item-detail"},[a("div",{staticClass:"row0"},["1"===t.curFile.is_append?a("span",{staticClass:"span-replenish"},[t._v("追加")]):t._e(),"1"===t.curFile.is_append_to_erp?a("span",{staticClass:"span-replenish"},[t._v("补充")]):t._e(),a("span",{staticClass:"span-file-name"},[t._v(t._s(t.getFileName(t.curFile)))])]),a("div",{staticClass:"row1 file-info-row"},[a("span",[t._v(t._s(t.formatSize(t.curFile.file_size)))]),a("span",{staticStyle:{"margin-left":"8px"}},[t._v(t._s(t.curFile.create_time))]),a("span",{staticStyle:{"margin-left":"8px"}},[t._v(t._s(t.curFile.create_by?"来自 "+t.curFile.create_by:""))])]),t.curFile.progress>=0?a("div",{class:["progress","progress-"+t.curFile.progress,{"-error":404===t.curFile.progress}]},[a("div",{staticClass:"progress-bar"},[a("span",{staticClass:"progress-bar-inner",style:{width:t.curFile.progress+"%"}})]),a("span",{staticClass:"progress-value"},[t._v(t._s(t.curFile.progress)+"%")])]):t._e()])])])},g=[],v=(a("cc57"),a("9e76"),a("b893")),x=a("f121"),y={name:"AttachmentItem",props:{edit:{type:Boolean,default:!1},attachType:{type:String,default:""},isAppendType:{type:Boolean,default:!1},file:{type:Object,default:function(){}}},data:function(){return{curFile:this.file}},mounted:function(){},methods:{formatSize:v["b"],getImagePath:function(t){var e=t.indexOf("?")>=0?"&":"?";return t.indexOf("x-oss-process=image/resize")>=0?t:[t,x["n"]].join(e)},getFileName:function(t){var e=/[^\/]+?\.?\w+$/,a=t.file_name,i=t.file_path||"";if("string"===typeof a&&""!==a.trim())return a;var n=i.match(e);return n?n[0]:""},getTypeClass:function(t){var e=this.getFileName(t),a=this.getType(e);return"picture"==a?"icon icon-"+a:"emahx"===a?"iconfont icon-emahx-01":"iconfont icon-"+a},getType:function(t){var e=[{name:"excel",list:["xls","xlsx"]},{name:"word",list:["doc","docx"]},{name:"pdf",list:["pdf"]},{name:"ppt",list:["ppt","pptx"]},{name:"txt",list:["txt"]},{name:"zip",list:["rar","zip"]},{name:"cad",list:["dwg","dxf"]},{name:"picture",list:["png","jpg","jpeg","gif","webp"]},{name:"emahx",list:["emahx"]}],a=t?t.match(/(?!\.)\w+$/):null,i="unknow";if(a)for(var n=a[0],o=0;o<e.length;o++)if(-1!=e[o].list.indexOf(n.toLowerCase())){i=e[o].name;break}return i},isPicture:function(t){var e=this.getFileName(t),a=this.getType(e);return"picture"===a},deleteFile:function(){this.$emit("delete",this.curFile,this.attachType,this.isAppendType)},openFile:function(t){t.target.classList.contains("icon-delete")||this.$emit("open",this.curFile,this.getType(this.curFile.file_name),this.isAppendType)}}},_=y,w=(a("5c7b"),a("c701")),O=Object(w["a"])(_,b,g,!1,null,"5db9d623",null),k=O.exports,C={name:"AttchmentAppendPopup",components:{AttachmentItem:k},props:{orgData:{type:Array,default:function(){return[]}},data:{type:Array,default:function(){return[]}},setting:{type:Object,default:null}},data:function(){return{show:!1}},methods:{cancel:function(){var t=this;this.data.length?this.sui.confirm({message:"确认离开当前页面吗？离开后所做操作将无法保存。",confirmButtonText:"确认离开",cancelButtonText:"取消"}).then((function(){t.$emit("appendCancel")})).catch((function(){})):this.$emit("appendCancel")},add:function(){this.$emit("appendAdd")},submit:function(){this.$emit("appendSubmit")},openRemark:function(t){this.sui.modal({title:"附件信息",text:'            <div class="cc-model-dev">             <div class="left">附件说明：</div>              <div class="right">'+t+"</div>            </div>          ",buttons:[{text:"我知道了"}]})}}},S=C,j=(a("224b"),Object(w["a"])(S,h,m,!1,null,"2c34f16a",null)),E=j.exports,P=a("ecd2");function F(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,i)}return a}function M(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?F(Object(a),!0).forEach((function(e){Object(s["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):F(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var T=function(t){return t.forEach((function(t){t.file_path&&(t.file_id||(t.file_id="attach_id-"+Object(l["c"])()))})),t},D={name:"Attachment",components:{AttachmentItem:k,AttachmentAppendPopup:E},props:{showTitle:{type:Boolean,default:!0},sync:{type:Boolean,default:!0},label:{type:String,default:"附件"},edit:{type:[Boolean,Number],default:!0},list:{type:Array,default:function(){return[]}},canAppend:{type:Boolean,default:!1},canSupply:{type:Boolean,default:!1},beforeEdit:{type:Function,default:function(){return!0}},restrictSettings:{type:Array,default:function(){return[]}},tip:{type:String,default:""}},data:function(){return{collapseOpening:"default",uploadingMap:{},restrictGroupMap:{"其他附件":{files:[]}},simpleFileList:[],fileMap:{},uploadingStatus:{},appendFileList:[],showAppendPopup:!1,isIOS:Object(c["b"])(),canEdit:!Object(c["b"])()&&this.edit}},computed:{hasAppend:function(){return!Object(c["b"])()&&(this.canSupply||this.canAppend)},restrictFlag:function(){return this.restrictSettings.length>0},listLength:function(){if(this.restrictFlag){var t=0;for(var e in this.restrictGroupMap){var a=this.restrictGroupMap[e];a.visible&&(t+=a.files.length)}return t}return Object.keys(this.fileMap).length}},watch:{restrictSettings:function(){this.init()},list:function(){this.init()}},inject:{getSheetData:{from:"getSheetData",default:function(){}}},mounted:function(){this.init(),window.attachmentTest=this},methods:{init:function(){this.edit?this.initForEdit():this.initForView()},initForView:function(){var t=this;if(!this.edit){var e=this.restrictSettings.length,a=this.restrictSettings.reduce((function(t,e){return t[e.attach_name]=M(M({},e),{},{files:[]}),t}),{}),i={},n=T(this.list);if(this.restrictFlag){var o={"其他附件":{files:[],is_must:0,uploadable:!0,visible:!0}};n.forEach((function(n){var r=n.attach_name;if(r&&"其他附件"!==r&&"other"!==r){var s={attach_name:r,attach_remark:n.attach_remark,is_must:n.is_must,uploadable:!0,visible:!0};if(e){var c=a[r];if(!c)return;var l=c.atttach_name,u=c.attach_remark,d=c.is_must,p=c.uploadable,f=c.visible;s=M(M({},s),{},{atttach_name:l,attach_remark:u,is_must:d,uploadable:p,visible:f}),s.is_must=c.is_must,s.uploadable=c.uploadable,s.visible=c.visible}o[r]=o[r]||M(M({},s),{},{files:[]}),n.file_path&&o[r].files.push(n)}else n.attach_name="其他附件",n.file_path&&o["其他附件"].files.push(n);t.$set(n,"progress",-100),n.file_path&&(i[n.file_id]=n)})),this.restrictGroupMap=M(M({},a),o),this.fileMap=i}else this.simpleFileList=[],n.forEach((function(e){t.$set(e,"progress",-100),e.file_path&&(i[e.file_id]=e,t.simpleFileList.push(e))})),this.fileMap=M({},i)}},initForEdit:function(){var t=this;if(this.edit){var e=Object.keys(this.fileMap).length,a={},i=e?this.getData():T(this.list),n=function(){t.simpleFileList=[],i.forEach((function(e){delete e.attach_name,delete e.attach_remark,delete e.is_must,t.$set(e,"progress",-100),e.file_path&&(a[e.file_id]=e,t.simpleFileList.push(e))})),t.fileMap=M({},a)};if(this.restrictFlag){var o={"其他附件":{files:[]}};this.restrictSettings.forEach((function(t){var e=t.attach_name;o[e]={attach_name:e,attach_remark:t.attach_remark,is_must:t.is_must,files:[]}})),i.forEach((function(e){var i=e.attach_name;i&&""!==i&&"other"!==i&&"其他附件"!==i&&o[i]?e.file_path&&o[i].files.push(e):(e.attach_remark="",e.is_must=0,e.attach_name="其他附件",e.file_path&&o["其他附件"].files.push(e)),t.$set(e,"progress",-100),e.file_path&&(a[e.file_id]=e)})),this.restrictGroupMap=o,this.fileMap=a}else n()}},openRemark:function(t){this.sui.modal({title:"附件信息",text:'            <div class="cc-model-dev">             <div class="left">附件说明：</div>              <div class="right">'+t+"</div>            </div>          ",buttons:[{text:"我知道了"}]})},uploadFile:function(t){var e=t.type,a=t.restrictSettings,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(d["a"])()?this.localUploadFile({type:e,restrictSettings:a},i):this.realUploadFile({type:e,restrictSettings:a},i)},localUploadFile:function(t){var e=this,a=t.type,i=t.restrictSettings,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=[{attach_id:Object(l["c"])(),file_id:Object(l["c"])(),file_name:"".concat(Object(l["c"])().substr(5),".zip"),file_path:"https://gcxt-test.oss-cn-shenzhen.aliyuncs.com/gcxt/files/my570cd49bc2458/2a4cf9ce-31d7-45ac-9c64-6063db7cea64.zip",file_size:"722",create_by:Object(u["a"])("xt_user_name")+"__"+Object(u["a"])("station_name"),user_id:Object(u["d"])("user_id"),create_time:f["a"].date.format(new Date,"yyyy-MM-dd HH:mm")}];o.forEach((function(t){var n,o=t;e.restrictFlag?e.restrictFlag&&i&&(n=e.restrictGroupMap[i.attach_name].files,o=M(M({},t),i)):(n=e.simpleFileList,o=M({},t)),"append"===a&&(n=e.appendFileList),n.push(o),e.$set(e.fileMap,t.file_id,o),t.progress=100})),n.selectLocalFile&&n.selectLocalFile(o)},realUploadFile:function(t){var e=this,a=t.type,i=t.restrictSettings,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.CHOOSE_FILES({sync:this.sync||"append"===a,process:function(t){var a=t.fileId||t.file_id;e.fileMap[a].progress=t.progress},processIndex:function(t){return e.processIndex(t)},selectLocalFile:function(t){t.length&&(t.forEach((function(t){var n,o=t;e.restrictFlag?e.restrictFlag&&i&&(n=e.restrictGroupMap[i.attach_name].files,o=M(M({},t),i)):(n=e.simpleFileList,o=M({},t)),"append"===a&&(n=e.appendFileList),n.push(o),e.$set(e.fileMap,t.file_id,o),e.uploadingStatus[t.file_id]=!0})),n.selectLocalFile&&n.selectLocalFile(t))},fail:function(t){console.log("[uploadFile - fail]:",t),e.fileMap[t.fileId].progress=404},uploadingMap:this.uploadingMap}).then((function(t){t.forEach((function(t){e.processIndex(t)}))}))},processIndex:function(t){var e=this.fileMap[t.file_id];e&&(e.ossUrl=t.ossUrl,e.file_path=t.ossUrl,e.progress=100,this.$delete(this.uploadingStatus,t.file_id))},chooseFile:function(t){Object(c["b"])()?this.sui.alert("请登陆PC端追加附件"):this.beforeEdit()&&this.uploadFile({type:"choose",restrictSettings:t})},deleteFile:function(t,e,a){var i=[];i=a?this.appendFileList:e&&this.restrictFlag?this.restrictGroupMap[e].files:this.simpleFileList;var n=i.indexOf(t);i.splice(n,1),this.$delete(this.fileMap,t.file_id),this.$delete(this.uploadingStatus,t.file_id)},openFile:function(t,e,a){var i=this;if("picture"===e)return this.$previewPicture([t.file_path]);this.OPEN_FILE(t.file_path,(function(e){i.fileMap[t.file_id]&&(i.fileMap[t.file_id].progress=e,100===e&&setTimeout((function(){i.fileMap[t.file_id].progress=-1}),200))}))},hasUploading:function(){return Object.keys(this.uploadingStatus).length},validateRequirement:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],a="";return this.restrictFlag&&this.restrictSettings.some((function(e){var i=t.restrictGroupMap[e.attach_name].files;if(e.visible&&e.is_must>0&&0===i.length)return a=e.attach_name,!0})),a?{flag:!1,msg:Object(c["b"])()?"有必须上传的其他类型的附件,".concat(e?"请通过电脑端提交单据":"请先保存为草稿再去电脑端上传"):"未上传“".concat(a,"”的附件")}:{flag:!0,msg:""}},getData:function(){var t=[];for(var e in this.fileMap){var a=this.fileMap[e],i=(a.progress,Object(r["a"])(a,["progress"]));if(a.file_path||a.ossUrl){var n=M({},i);"other"===n.attach_name&&(n.attach_name="其他附件"),t.push(n)}}return t},getAppendFileList:function(){return this.appendFileList},addAppend:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;Object(c["b"])()?this.sui.alert("请登陆PC端追加附件"):(this.appendRestrictSetting=e,this.uploadFile({type:"append",restrictSettings:e},{selectLocalFile:function(e){e.length&&(t.showAppendPopup=!0)}}))},submitAppend:function(){var t=this;if(this.appendFileList.length){if(!this.hasUploading()){var e=this.getSheetData().approveData.actionData,a=e.biz_id,i=e.proc_type_id;return Object(p["b"])({biz_id:a,proc_type_id:i,attachments:this.getData()}).then((function(){var e=t.appendRestrictSetting?t.restrictGroupMap[t.appendRestrictSetting.attach_name].files:t.simpleFileList;t.appendFileList.forEach((function(a){t.canSupply?a.is_append_to_erp="1":t.canAppend&&(a.is_append="1"),e.push(a)})),t.appendFileList=[],t.appendRestrictSetting=null,t.showAppendPopup=!1,P["a"].success("提交成功")}))}this.sui.toast("请等待附件上传完毕")}else this.sui.toast("请选择附件")},cancelAppend:function(){var t=this,e=Object(o["a"])(this.appendFileList);e.forEach((function(e){t.deleteFile(e,t.appendRestrictSetting?t.appendRestrictSetting.attach_name:"",!0)})),this.showAppendPopup=!1}}},A=D,I=(a("0a20"),Object(w["a"])(A,i,n,!1,null,"5868a12d",null));e["a"]=I.exports},"68a0":function(t,e,a){e=t.exports=a("690e")(!1),e.push([t.i,"",""])},"69b8":function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.isSpMode?a("sp-sub-form",t._b({ref:"SpSubForm",on:{submit:t.onSubmit}},"sp-sub-form",Object.assign({},t.$attrs,{mode:t.mode}),!1)):"gld_workloads"===t.id?a("gld-workload",t._b({ref:"SubForm"},"gld-workload",Object.assign({},t.$attrs,{mode:t.mode}),!1)):a("sub-form-base",t._b({ref:"SubForm",on:{submit:t.onSubmit}},"sub-form-base",Object.assign({},t.$attrs,{mode:t.mode}),!1))],1)},n=[],o=a("9083"),r=a("2aa4"),s=a("9a14"),c={name:"SubForm",components:{SubFormBase:o["a"],SpSubForm:r["a"],GldWorkload:s["a"]},inheritAttrs:!1,props:{id:{type:String,default:""},mode:{type:String,default:"view"},isSpMode:{type:Boolean,default:!1}},data:function(){return{}},methods:{onSubmit:function(t){this.$emit("change",t)},getData:function(){return this.$refs.SubForm.getData()},validateRequirement:function(){return this.$refs.SubForm.validateRequirement()},reInit:function(){return this.$refs.SubForm.reInit()}}},l=c,u=a("c701"),d=Object(u["a"])(l,i,n,!1,null,null,null);e["a"]=d.exports},"6be9":function(t,e,a){"use strict";a("4dc7")},"6c5c":function(t,e,a){"use strict";a("e8ff")},"6eb8":function(t,e,a){"use strict";a("b830")},"77b3":function(t,e,a){"use strict";a("664e")},"790f":function(t,e,a){"use strict";a("c235")},"7e6a":function(t,e,a){"use strict";a("cbe8")},"7ee5":function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("popup-page",{directives:[{name:"phy-back",rawName:"v-phy-back",value:{status:t.value,method:"close"},expression:"{ status: value, method: 'close' }"}],attrs:{value:t.value}},[a("template",{slot:"header"},[a("v-header",{attrs:{title:t.title,"back-action":t.close}},[t.multi?a("span",{staticClass:"confirm-action",attrs:{slot:"right"},on:{click:function(e){t.onConfirm(null)}},slot:"right"},[t._v("\n        确认("+t._s(t.curSelecteds.length)+")\n      ")]):t._e()]),t.showSearch?a("search-bar",{staticClass:"searchBar",on:{input:t.onSearch},model:{value:t.keyword,callback:function(e){t.keyword=e},expression:"keyword"}}):t._e(),t._t("header")],2),a("user-list",t._g({directives:[{name:"show",rawName:"v-show",value:t.searching,expression:"searching"}],attrs:{list:t.searchResult,selecteds:t.selecteds},scopedSlots:t._u([{key:"user-right",fn:function(e){var i=e.user;return[t.showSignerLabel&&t.checkIsSigner(i)?a("i",{staticClass:"signer",attrs:{slot:"label"},slot:"label"},[t._v(t._s(t.signerLabel))]):t._e()]}}])},Object.assign({},t.$listeners,{confirm:t.onConfirm}))),t.grouped?t._e():a("user-list",t._g({directives:[{name:"show",rawName:"v-show",value:!t.searching,expression:"!searching"}],attrs:{list:t.list,selecteds:t.selecteds},scopedSlots:t._u([{key:"user-right",fn:function(e){var i=e.user;return[t.showSignerLabel&&t.checkIsSigner(i)?a("i",{staticClass:"signer",attrs:{slot:"label",b:""},slot:"label"},[t._v(t._s(t.signerLabel))]):t._e()]}}])},Object.assign({},t.$listeners,{confirm:t.onConfirm}))),a("div",{staticClass:"user-selector--tabs"},[t.grouped?a("van-tabs",{directives:[{name:"show",rawName:"v-show",value:!t.searching,expression:"!searching"}],class:"tab-count-"+t.groupedList.length,attrs:{animated:""},model:{value:t.activeTab,callback:function(e){t.activeTab=e},expression:"activeTab"}},t._l(t.groupedList,(function(e,i){return a("van-tab",{key:i,attrs:{title:e.roleName}},[a("user-list",t._g({attrs:{list:e.peopleList,selecteds:t.selecteds},scopedSlots:t._u([{key:"user-right",fn:function(e){var i=e.user;return[t.showSignerLabel&&t.checkIsSigner(i)?a("i",{staticClass:"signer",attrs:{slot:"label"},slot:"label"},[t._v(t._s(t.signerLabel))]):t._e()]}}])},Object.assign({},t.$listeners,{confirm:t.onConfirm})))],1)}))):t._e()],1)],2)},n=[],o=a("4c09"),r=(a("6d57"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"user-list"},[t._l(t.list,(function(e,i){return a("div",{key:i,staticClass:"user-item",on:{click:function(a){t.onItemClick(e,i)}}},[a("user-list-item",{attrs:{user:e,index:i,multi:t.multi,selected:t.checkSelected(e.user_id)}},[t._t("user-right",null,{slot:"right-content",user:e})],2)],1)})),t.list.length?t._e():a("no-record",{attrs:{txt:"暂无数据"}})],2)}),s=[],c=a("6485"),l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"user-selector-item"},[a("div",{staticClass:"user-selector-item--avatar"},[a("user-avatar",{attrs:{user:t.user,index:t.index}})],1),a("div",{staticClass:"user-selector-item--content"},[a("div",{staticClass:"user-selector-item--content-name",class:{"user-selector-item--content-active":t.selected}},[t._t("default",[t._v(t._s(t.user.name+" "+(t.user.station_name?"（"+t.user.station_name+"）":"")))]),a("div",{staticClass:"label"},[t._t("label")],2)],2),t._t("right-content"),a("span",{staticClass:"icon"},[!t.multi&&t.selected?a("i",{staticClass:" iconfont icon-_xuanzhong"}):t._e(),t.multi&&!t.selected?a("i",{staticClass:" iconfont icon-redio-unselected"}):t._e(),t.multi&&t.selected?a("i",{staticClass:" iconfont icon-selected"}):t._e()])],2)])},u=[],d=(a("163d"),a("2777")),p={name:"UserSelectorItem",components:{UserAvatar:d["a"]},props:{user:{type:Object,default:function(){}},multi:{type:Boolean,default:!1},selected:{type:Boolean,default:!1},index:{type:Number,default:0}}},f=p,h=(a("c714"),a("c701")),m=Object(h["a"])(f,l,u,!1,null,"69ba1716",null),b=m.exports,g={props:{selecteds:{type:Array,default:function(){return[]}}},data:function(){return{curSelecteds:[]}},computed:{curSelectedMap:function(){return this.curSelecteds.reduce((function(t,e,a){return t[e]=a,t}),{})}},watch:{selecteds:{handler:function(t){this.curSelecteds=Object(o["a"])(t)},immediate:!0}},methods:{checkSelected:function(t){return t in this.curSelectedMap},toggleSelected:function(t){var e=this.curSelectedMap[t];void 0===e?this.curSelecteds.push(t):this.curSelecteds.splice(e,1)},getSelecteds:function(){return this.curSelecteds},setSelecteds:function(t){this.curSelecteds=t},clearSelecteds:function(){this.curSelecteds=[]}}},v={name:"UserList",components:{UserListItem:b,NoRecord:c["a"]},mixins:[g],props:{list:{type:Array,default:function(){return[]}},multi:{type:Boolean,default:!1}},methods:{confirm:function(){this.$emit("confirm",this.getSelecteds())},onItemClick:function(t,e){this.toggleSelected(t.user_id),this.multi||(this.confirm(),this.$emit("itemClick",t,e))}}},x=v,y=(a("6eb8"),Object(h["a"])(x,r,s,!1,null,"76bd840a",null)),_=y.exports,w=a("a740"),O=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=[{roleName:"乙方",roleList:["1004","1005"],peopleList:[]},{roleName:"监理",roleList:["1003"],peopleList:[]},{roleName:"咨询",roleList:["998"],peopleList:[]},{roleName:"甲方",roleList:["1000","1001","1002"],peopleList:[]}],i=t.reduce((function(t,a){if(e&&a.user_id===e)return t;var i=a.role_code;return i in t||(t[i]=[]),t[i].push(a),t}),{});return a.forEach((function(t){t.roleList.forEach((function(e){e in i&&(t.peopleList=t.peopleList.concat(i[e]))}))})),a.filter((function(t){return t.peopleList.length>0}))},k={name:"UserListPopup",components:{UserList:_},props:{value:{type:Boolean,default:!1},title:{type:String,default:""},showSearch:{type:Boolean,default:!0},multi:{type:Boolean,default:!1},selecteds:{type:Array,default:function(){return[]}},list:{type:Array,default:function(){return[]}},grouped:{type:Boolean,default:!1},searchResult:{type:Array,default:function(){return[]}},checkIsSigner:{type:Function,default:function(){return!1}},showSignerLabel:{type:Boolean,default:!0},signerLabel:{type:String,default:"签发人"}},data:function(){return{keyword:"",activeTab:0,curSelecteds:[]}},computed:{listMap:function(){return this.list.reduce((function(t,e){return t[e.user_id]=e,t}),{})},curUserId:function(){return Object(w["d"])("user_id")},groupedList:function(){return O(this.list,this.curUserId)},searching:function(){return!!this.keyword.length}},watch:{selecteds:{handler:function(t){this.curSelecteds=Object(o["a"])(t)},immediate:!0}},methods:{close:function(){this.reset(),this.keyword="",this.$emit("input",!1)},reset:function(){this.curSelecteds=Object(o["a"])(this.selecteds)},onSearch:function(t){this.keyword=t,this.$emit("search",t)},onConfirm:function(t){t&&(this.curSelecteds=Object(o["a"])(t)),this.$emit("confirm",this.curSelecteds),this.keyword="",this.$emit("input",!1)}}},C=k,S=(a("800d"),Object(h["a"])(C,i,n,!1,null,"551a9e01",null));e["a"]=S.exports},"800d":function(t,e,a){"use strict";a("1941")},8198:function(t,e,a){e=t.exports=a("690e")(!1),e.push([t.i,'.gcxt[data-v-5de7668b] :export{colorPrimary:#2c5cf7;headerBackgroundColor:#fff;headerTextColor:#333}.gcxt .gld-workload[data-v-5de7668b]{margin-bottom:10px}.gcxt .file-icon[data-v-5de7668b]{font-size:0;display:inline-block;line-height:1;margin-right:10px}.gcxt .file-icon.abs[data-v-5de7668b]{position:absolute;left:15px;top:50%;-webkit-transform:translateY(-50%);transform:translateY(-50%)}.gcxt .icon__file[data-v-5de7668b]{font-size:40px;color:#97c3ff}.gcxt .icon__delete[data-v-5de7668b]{position:absolute;right:0;top:0;padding:5px;-webkit-transform:translate(50%,-50%);transform:translate(50%,-50%);color:#ff3b30}[data-v-5de7668b] .multi-texts-wrapper .multi-texts{padding:13px 15px 13px 68px}[data-v-5de7668b] .multi-texts-wrapper .multi-texts .label{color:#1b1b1b}[data-v-5de7668b] .multi-texts-wrapper .multi-texts .tip{color:#8e8e93;margin-top:3px}.gcxt .view-list .item[data-v-5de7668b]{padding:13px 15px;padding-left:65px;background-color:#fff;position:relative}.gcxt .view-list .item[data-v-5de7668b]:before{bottom:0;content:" ";position:absolute;z-index:1;right:0;border-top:1px solid #ececec;-webkit-transform:scaleY(.5);transform:scaleY(.5);left:0;left:15px}.gcxt .view-list .file-icon[data-v-5de7668b]{left:15px}.gcxt .view-list .label[data-v-5de7668b]{font-size:14px;color:#1b1b1b}.gcxt .view-list .tip[data-v-5de7668b]{margin-top:2px;font-size:13px;color:#8e8e93}.gcxt .view-list .gld-history-btn[data-v-5de7668b]{position:absolute;right:15px;bottom:13px;font-size:12px;padding:0 9px;border:1px solid #dcdcdc;border-radius:15px;line-height:21px;height:22px}.gcxt .view-list .time[data-v-5de7668b]{position:absolute;right:15px;bottom:13px;color:#999;font-size:12px}[data-v-5de7668b] .van-collapse-item__content{padding:0}[data-v-5de7668b] .van-cell__title{font-size:16px}.gcxt .description[data-v-5de7668b]{padding:6px 0 2px 8px}.gcxt .description[data-v-5de7668b],.gcxt .history-view-list .tip[data-v-5de7668b]{font-size:12px;color:#999}',""])},8558:function(t,e,a){var i=a("e823");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var n=a("85cb").default;n("2027b25d",i,!0,{sourceMap:!1,shadowMode:!1})},8788:function(t,e,a){"use strict";a("4ec9")},8935:function(t,e,a){"use strict";a.d(e,"b",(function(){return O})),a.d(e,"d",(function(){return k})),a.d(e,"c",(function(){return C})),a.d(e,"a",(function(){return Y}));a("5ab2"),a("6d57"),a("e10e");var i,n,o,r,s,c,l,u,d,p,f,h,m,b,g,v,x=a("3e83"),y=a("28f8");function _(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,i)}return a}function w(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?_(Object(a),!0).forEach((function(e){Object(y["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):_(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var O={rollBack:"rollBack",invalidate:"invalidate",undo:"undo",reSubmit:"reSubmit",terminate:"terminate",reTerminate:"reTerminate",sign:"sign",reSign:"reSign",reAssign:"reAssign",submit:"submit",erpConfirm:"erpConfirm",sheetConfirm:"sheetConfirm",startUpRelatedBiz:"startUpRelatedBiz",resetNextUser:"resetNextUser",frontAddSign:"frontAddSign",backAddSign:"backAddSign",addSignPass:"addSignPass",addSignNoPass:"addSignNoPass",commReply:"commReply",accept:"accept",complete:"complete",countersignPass:"countersignPass",countersignNoPass:"countersignNoPass",tcTransfer:"tcTransfer",taskComplete:"taskComplete",taskReport:"taskReport",taskReply:"taskReply",taskConfirm:"taskConfirm"},k={approveTimeOutReason:{actionList:["sign","submit","reAssign","terminate","frontAddSign","backAddSign","addSignPass","addSignNoPass","countersignPass","countersignNoPass","taskReport","taskComplete"],biz_type:[],layout:{groupName:"",list:[{req:1,type:"textarea_no_label",isEdit:1,label:"超时原因",text:"",value:"",id:"sp_timeout_reason",maxLength:"300",placeholder:"必填，300字内"}]}}},C={COMMENT:"COMMENT",FORM:"FORM",ADD_SIGN:"ADD_SIGN",SELECT_PEOPLE:"SELECT_PEOPLE",CC_PEOPLE:"CC_PEOPLE",FALLBACK:"FALLBACK",ADDSIGN_ROLLBACK:"ADDSIGN_ROLLBACK",ATTACHMENT:"ATTACHMENT",PICTURE:"PICTURE",PRICE_SHEET_MATERIAL:"PRICE_SHEET_MATERIAL",JZC_CLAPPLY_SUB_FORM:"JZC_CLAPPLY_SUB_FORM",TASK_COMMENT:"TASK_COMMENT"},S=C.COMMENT,j=C.ADD_SIGN,E=C.SELECT_PEOPLE,P=C.CC_PEOPLE,F=C.FALLBACK,M=C.ADDSIGN_ROLLBACK,T=C.ATTACHMENT,D=C.PICTURE,A=C.PRICE_SHEET_MATERIAL,I=C.JZC_CLAPPLY_SUB_FORM,L=C.TASK_COMMENT,z=(v={},Object(y["a"])(v,O.sign,{title:"签发",approveForm:!0,components:(i={},Object(y["a"])(i,S,{title:"注：签发后将转到地产内部审批",placeholder:"请输入签发原因",name:"签发原因",wcbTitle:"签发后流程将归档",hasPhrase:!0,errMsg:"请输入签发原因"}),Object(y["a"])(i,P,!0),Object(y["a"])(i,A,{mode:"edit"}),Object(y["a"])(i,I,{mode:"edit"}),i)}),Object(y["a"])(v,O.complete,{title:"审批归档",approveForm:!0,components:(n={},Object(y["a"])(n,S,{placeholder:"请输入审批归档原因",name:"审批归档原因",hasPhrase:!0,errMsg:"请输入审批归档原因"}),Object(y["a"])(n,P,!0),Object(y["a"])(n,I,{mode:"edit"}),n)}),Object(y["a"])(v,O.frontAddSign,{title:"前加签",approveForm:!0,components:(o={},Object(y["a"])(o,S,{placeholder:"审批意见，非必填",name:"审批意见",hasPhrase:!0,errMsg:"请输入同意原因"}),Object(y["a"])(o,j,{title:"加签人",name:"加签人",req:1}),Object(y["a"])(o,P,!0),Object(y["a"])(o,A,{mode:"view"}),Object(y["a"])(o,I,{mode:"view"}),o)}),Object(y["a"])(v,O.backAddSign,{title:"后加签",approveForm:!0,components:(r={},Object(y["a"])(r,S,{placeholder:"请输入同意原因",name:"同意原因",hasPhrase:!0,errMsg:"请输入同意原因"}),Object(y["a"])(r,j,{title:"加签人",name:"确认人",req:1}),Object(y["a"])(r,E,{title:"下一步确认人",name:"确认人",req:1}),Object(y["a"])(r,P,!0),Object(y["a"])(r,A,{mode:"edit"}),Object(y["a"])(r,I,{mode:"edit"}),r),copyPeople:!0}),Object(y["a"])(v,O.submit,{title:"同意",approveForm:!0,components:(s={},Object(y["a"])(s,S,{placeholder:"请输入同意原因",name:"同意原因",hasPhrase:!0,errMsg:"请输入同意原因"}),Object(y["a"])(s,E,{title:"下一步确认人",name:"确认人",req:1}),Object(y["a"])(s,P,!0),Object(y["a"])(s,A,{mode:"edit"}),Object(y["a"])(s,I,{mode:"edit"}),s)}),Object(y["a"])(v,O.accept,{title:"签收",components:(c={},Object(y["a"])(c,P,!0),Object(y["a"])(c,T,!0),c)}),Object(y["a"])(v,O.reAssign,{title:"转交",components:(l={},Object(y["a"])(l,S,{placeholder:"请输入转交原因",name:"转交原因",errMsg:"请输入转交原因"}),Object(y["a"])(l,E,{title:"转交人",name:"转交人",req:1}),l)}),Object(y["a"])(v,O.terminate,{title:"不同意",components:(u={},Object(y["a"])(u,S,{placeholder:"请输入拒绝原因 (必填，最多600个字符)",name:"拒绝原因",req:1,hasPhrase:!0,errMsg:"请输入拒绝原因"}),Object(y["a"])(u,F,{req:1}),Object(y["a"])(u,P,!0),u)}),Object(y["a"])(v,O.addSignPass,{title:"同意",approveForm:!0,components:(d={},Object(y["a"])(d,S,{placeholder:"请输入同意原因 ",name:"同意原因",hasPhrase:!0,errMsg:"请输入同意原因"}),Object(y["a"])(d,P,!0),Object(y["a"])(d,A,{mode:"edit"}),Object(y["a"])(d,I,{mode:"edit"}),d)}),Object(y["a"])(v,O.addSignNoPass,{title:"不同意",components:(p={},Object(y["a"])(p,S,{placeholder:"请输入拒绝原因 (必填，最多600个字符)",name:"拒绝原因",req:1,hasPhrase:!0,errMsg:"请输入拒绝原因"}),Object(y["a"])(p,M,!0),Object(y["a"])(p,P,!0),p)}),Object(y["a"])(v,O.countersignPass,{title:"同意",approveForm:!0,components:(f={},Object(y["a"])(f,S,{placeholder:"请输入同意原因",name:"同意原因",hasPhrase:!0,errMsg:"请输入同意原因"}),Object(y["a"])(f,E,{title:"下一步确认人",name:"确认人",req:1}),Object(y["a"])(f,P,!0),Object(y["a"])(f,A,{mode:"edit"}),Object(y["a"])(f,I,{mode:"edit"}),f)}),Object(y["a"])(v,O.countersignNoPass,{title:"不同意",components:(h={},Object(y["a"])(h,S,{placeholder:"请输入拒绝原因 (必填，最多600个字符)",name:"拒绝原因",req:1,hasPhrase:!0,errMsg:"请输入拒绝原因"}),Object(y["a"])(h,F,{req:1}),Object(y["a"])(h,P,!0),h)}),Object(y["a"])(v,O.reTerminate,{title:"打回到指定步骤",components:(m={},Object(y["a"])(m,S,{placeholder:"请输入拒绝原因 (必填，最多600个字符)",name:"拒绝原因",req:1,hasPhrase:!0,errMsg:"请输入拒绝原因"}),Object(y["a"])(m,F,{req:1}),Object(y["a"])(m,P,!0),m)}),Object(y["a"])(v,O.commReply,{title:"回复",components:(b={},Object(y["a"])(b,T,!0),Object(y["a"])(b,D,!0),Object(y["a"])(b,P,!0),b)}),Object(y["a"])(v,O.erpConfirm,{title:"审批结果通知发起人",components:Object(y["a"])({},S,{placeholder:"请输入原因",name:"原因",errMsg:"请输入原因"})}),Object(y["a"])(v,O.undo,!0),Object(y["a"])(v,O.sheetConfirm,!0),Object(y["a"])(v,O.reSubmit,!0),Object(y["a"])(v,O.reSign,!0),Object(y["a"])(v,O.startUpRelatedBiz,!0),Object(y["a"])(v,O.invalidate,{title:"作废",approveForm:!0,components:Object(y["a"])({},S,{placeholder:"请输入作废原因（非必填，最多600字符) ",name:"作废原因",hasPhrase:!0,errMsg:"请输入作废原因"})}),Object(y["a"])(v,O.rollBack,{title:"撤回原因",components:Object(y["a"])({},S,{placeholder:"请输入撤回原因",name:"撤回原因",req:1,rollBack:1,hasPhrase:!0,errMsg:"请输入撤回原因"})}),Object(y["a"])(v,O.resetNextUser,{title:"重置审批人",components:Object(y["a"])({},E,{title:"下一步确认人",name:"确认人",req:1})}),Object(y["a"])(v,O.tcTransfer,{title:"转交",components:(g={},Object(y["a"])(g,L,{placeholder:"请输入转交原因，非必填",name:"转交原因",errMsg:"请输入转交原因",maxLength:"300"}),Object(y["a"])(g,E,{title:"转交人",name:"转交人",req:1}),Object(y["a"])(g,P,!0),g)}),Object(y["a"])(v,O.taskReport,{title:"进度汇报",components:Object(y["a"])({},L,{placeholder:"进度汇报内容，必填",name:"进度汇报内容",req:1,errMsg:"请输入进度汇报内容",maxLength:"600"})}),Object(y["a"])(v,O.taskReply,{title:"回复",components:Object(y["a"])({},L,{placeholder:"回复内容，必填",name:"回复内容",req:1,errMsg:"请输入回复内容",maxLength:"600"})}),Object(y["a"])(v,O.taskComplete,{title:"完成",components:Object(y["a"])({},L,{placeholder:"完成说明，非必填",name:"完成说明",errMsg:"请输入完成说明内容",maxLength:"600"})}),Object(y["a"])(v,O.taskConfirm,{title:"审核通过",components:Object(y["a"])({},L,{placeholder:"审核通过说明，非必填",name:"审核通过说明",errMsg:"请输入审核通过说明内容",maxLength:"600"})}),v),R=Object(y["a"])({},S,{title:"",req:0,shownotice:1,maxLength:600,rollBack:0,hasPhrase:!1,errMsg:"请输入原因"});for(var N in z){var B=z[N];if(B&&"object"===Object(x["a"])(B)){var $=z[N].components;for(var U in $)$[U]=w(w({},R[U]||{}),$[U]);z[N]=B}}var Y=z},"8d62":function(t,e,a){"use strict";a("5ab2"),a("e10e");var i=a("28f8"),n=(a("ed63"),a("8cf2"),a("b23b")),o=(a("cc57"),a("6d57"),a("82f8")),r=a("bd32"),s=a("a740");function c(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,i)}return a}function l(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?c(Object(a),!0).forEach((function(e){Object(i["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):c(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}e["a"]={getAttchmentSetting:function(t){var e,a=t.contract_id,i=t.project_id,n=t.biz_type,r=t.change_type,s=void 0===r?"":r,c={biz_type:n,change_type:s};return i?(c.project_id=i,e=o["d"]):(c.contract_id=a,e=o["h"]),e(c).then((function(t){var e=t.data;return e}))},getAttchmentSettingForView:function(t){if(t.biz_attach_condition&&t.biz_attach_condition.length&&"erp"!==t._from){var e={},a=Object(s["d"])("user_id"),i=t.sp_user_list.some((function(t){return t.sp_user===a})),n="",o=[];if(t.flow&&t.flow.flow.forEach((function(t){var r=t.handler_list,s=void 0===r?[]:r;s.forEach((function(t){var r=t.approve,s=t.approver,c=t.station;if(s){var l=s.approver_id===a;if(l){var u=c.name;!e[u]&&o.push(u),e[u]=!0,!i||n||0!==+r&&2!==+r||(n=u)}}}))})),!o.length){var r=Object(s["a"])("station_name");o=[r],i&&(n=r)}if(o.length)return console.log("getAttchmentSettingForView -> stationList,curStation",o,n),this.getAttachmentSettingByFlow(t.biz_attach_condition,o,n,{visibleAll:1===t.attach_visibility})}return this.getAttchmentSettingByList(t.attachments||[])},getAttchmentSettingByList:function(t){var e=[],a={};return t.forEach((function(t){var i=t.attach_name;!a[i]&&i&&""!==i&&(a[i]=!0,e.push({attach_name:t.attach_name,attach_remark:t.attach_remark,is_must:t.is_must,visible:!0,uploadable:!0}))})),e},setEnableByFormData:function(t,e){return t.map((function(t){return t.enable=!0,t.attach_condition&&t.attach_condition.length&&(t.enable=Object(r["a"])(t.attach_condition,e)),t}))},getAttachmentSettingByFlow:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=Object(s["a"])("role_code"),r=[];return t.forEach((function(t){var s=t.station_condition,c=Object(n["a"])(t,["station_condition"]);if(s&&Array.isArray(s)&&0!==s.length){var u=!!i.visibleAll||s.some((function(t){var a=t.station_name,i=t.roles,n=t.visible;if(n&&e.includes(a)&&i.includes(o))return!0})),d=s.some((function(t){var e=t.station_name,i=t.roles,n=t.uploadable;if(n&&""!==a&&e===a&&i.includes(o))return!0})),p=d?c.is_must:0;r.push(l(l({},c),{},{visible:u,uploadable:d,is_must:p}))}else r.push(l(l({},t),{},{visible:!0,uploadable:!0}))})),r}}},"8e66":function(t,e,a){var i=a("382b");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var n=a("85cb").default;n("431badc6",i,!0,{sourceMap:!1,shadowMode:!1})},"8ee4":function(t,e,a){"use strict";a("b87b")},9083:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"sub-form",class:[t.addable?"addable":"","mode-"+t.mode]},[a("van-cell",{staticClass:"cell",attrs:{value:t.cellLabel,"is-link":""},on:{click:t.open}},[t._t("cell-value"),"edit"===t.mode&&t.addable?a("i",{staticClass:"icon__plus iconfont icon--jia",attrs:{slot:"icon"},slot:"icon"}):t._e(),a("template",{slot:"right-icon"},[t._t("cell-right-icon",["edit"===t.mode&&t.addable&&t.forms.length?a("span",[t._v("("+t._s(t.forms.length)+")")]):t._e(),"view"!==t.mode&&t.addable?t._e():a("i",{staticClass:"icon_right-arrow iconfont icon-1_you _ex-click"}),a("span")])],2)],2),a("popup-page",{directives:[{name:"phy-back",rawName:"v-phy-back",value:{status:t.show,method:"cancel"},expression:"{status: show, method: 'cancel'}"}],staticClass:"sub-form-popup",attrs:{value:t.show}},[a("v-header",{attrs:{slot:"header","back-action":t.cancel,title:t.title||t.billName},slot:"header"},[t._t("header-right",["edit"===t.mode&&t.addable?a("span",{staticClass:"header--right-action _ex-click",on:{click:t.addFormAfterValid}},[t._v("添加")]):t._e()],{slot:"right"})],2),a("div",{staticClass:"sub-form--popup",class:"mode-"+t.mode},[a("div",{staticClass:"sub-form--popup-content"},["view"===t.mode&&(t.freeForm||t.forms)?[t.freeForm?t._l(t.freeForm.dataModel,(function(e,i){return a("div",{key:i,staticClass:"sub-form--free"},["hidden"!==e.type&&"1"!==e.hidden&&""!==e.value?a("af-info-cell",{attrs:{field:e}}):t._e()],1)})):t._e(),a("van-collapse",{staticClass:"vant-reset sub-form--group",model:{value:t.openingSubForm,callback:function(e){t.openingSubForm=e},expression:"openingSubForm"}},[t._l(t.forms,(function(e,i){return[a("van-collapse-item",{key:i,attrs:{title:e.groupName,name:i}},[a("form-detail",{attrs:{"layout-arr":e.layoutArr,"group-info":e.groupInfo,"data-model":e.dataModel}}),t._t("viewGroupAfter",null,{index:i})],2)]}))],2)]:[t.freeForm?a("form-comp",{ref:"freeForm",attrs:{data:t.freeForm},on:{change:t.onFreeChange}}):t._e(),t._l(t.forms,(function(e,i){return a("div",{key:e._groupId},[a("div",{staticClass:"sub-form--form-title"},[a("div",[t._v(t._s(e.groupName))]),t.deletable?a("i",{staticClass:"icon icon-remove",on:{click:function(e){t.removeForm(i)}}}):t._e()]),a("div",{on:{"!click":function(e){return t.clickOnForm(e)}}},[a("form-comp",{ref:"editForm",refInFor:!0,staticClass:"form-grouped",style:{"pointer-events":t.editable?"all":"none"},attrs:{data:e},on:{change:function(e,a){return t.onChange(i,a)}}})],1)])}))]],2)]),a("template",{slot:"footer"},[t._t("footer",["edit"===t.mode?a("app-button-group",{directives:[{name:"hide-by-keyboard",rawName:"v-hide-by-keyboard"}]},[a("app-button",{on:{click:t.save}},[t._v("保存")])],1):t._e()])],2)],2)],1)},n=[],o=(a("163d"),a("6d57"),a("2655")),r=a("7bce"),s=a("fd50"),c=a("2bf9"),l=a("5bbb"),u=a("0938"),d={name:"SubFormBase",components:{FormComp:o["a"],FormDetail:c["a"]},props:{mode:{type:String,default:"edit"},isRequire:{type:Boolean,default:!1},title:{type:String,default:""},billName:{type:String,default:"工程量清单"},defaultForm:{type:Object,default:null},freeForm:{type:Object,default:null},data:{type:Array,default:function(){return[]}},beforeEdit:{type:Function,default:function(){return!0}},addable:{type:Boolean,default:!0},deletable:{type:Boolean,default:!0},beforeCancel:{type:Function,default:function(){return s["a"].resolve(!0)}}},data:function(){return{show:!1,forms:[],iconClass:"icon--jia",editable:!1,saveData:[],openingSubForm:[]}},provide:{beforeClick:function(t,e){return s["a"].when(!0)}},computed:{cellLabel:function(){return"edit"===this.mode&&this.addable?"添加".concat(this.billName):"".concat(this.title||this.billName,"(").concat(this.data.length,")")}},watch:{data:{handler:function(t){this.initData()},immediate:!0}},mounted:function(){this.initData()},methods:{initData:function(){var t=this;this.openingSubForm=this.data.map((function(t,e){return e})),this.data.length&&(this.forms=[],this.data.forEach((function(e){t.addForm(e)})),this.editable=!0)},close:function(){this.show=!1},open:function(){("edit"!==this.mode||this.beforeEdit())&&("edit"===this.mode&&0===this.forms.length&&this.addForm(),this.show=!0,this.$emit("open"))},onFreeChange:function(){var t=arguments;if(!this.forms.length)return!1;r["b"].triggerRelation(arguments[1],this.defaultForm),this.forms.forEach((function(e){r["b"].triggerRelation(t[1],e)}))},onChange:function(t,e){r["b"].triggerRelation(e,this.forms[t])},removeForm:function(t){var e=this,a=this.forms[t];this.sui.confirm("确定要删除".concat(a.groupName,"吗？"),(function(){e.forms.splice(t,1),e.saveData=e.getData()}))},cancel:function(){var t=this;return this.deletable&&"edit"===this.mode&&(this.forms=this.forms.filter((function(t){var e=r["b"].validate(t.dataModel),a=e.result;return!!a}))),this.beforeCancel().then((function(e){e&&(t.show=!1)})).catch((function(e){e&&(t.show=!1)}))},clickOnForm:function(t){if(this.freeForm){var e=r["b"].validate(this.freeForm.dataModel),a=e.result,i=e.msg;if(!a)return this.sui.toast(i),this.editable=!1,!1}this.editable=!0},addFormAfterValid:function(){if(this.freeForm){var t=r["b"].validate(this.freeForm.dataModel),e=t.result,a=t.msg;if(!e)return this.sui.toast(a),this.editable=!1,!1}this.editable=!0,this.addForm(null,!0)},addForm:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,a=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=Object(l["a"])(this.defaultForm);for(var n in i.groupName=this.billName+(this.forms.length+1),i.groupId=Object(u["c"])(),i.dataModel){var o=i.dataModel[n];if(1===o.free&&(o=i.dataModel[n]=this.freeForm.dataModel[n]),o.__erp_options&&(i.dataModel[n].data=this.defaultForm.dataModel[n].data,o=i.dataModel[n]),e&&n in e){var s=e[n];o=r["b"].setVal(o,s)}}r["b"].triggerAllRelations(i,r["a"].filter((function(t){return"calc_method"!==t}))),this.forms.push(i),a&&this.$nextTick((function(){var e=t.$refs.editForm;if(e){var a=e[e.length-1];a.$el.scrollIntoView()}}))},save:function(){var t="";this.forms.some((function(e){var a=r["b"].validate(e.dataModel),i=a.result,n=a.msg;if(!i)return t=n,!0})),t?this.sui.toast(t):(this.show=!1,this.saveData=this.getData(),this.$emit("submit",this.saveData))},getData:function(){var t=[];return this.forms.forEach((function(e){var a={};for(var i in e.dataModel){var n=e.dataModel[i];("money"===n.type||"number"===n.type)&&n.value&&isNaN(Number(n.value))?a[i]="":a[i]=n.value}t.push(a)})),t},validateRequirement:function(){var t,e=this.getData().length;return this.isRequire&&0===e?{flag:!1,msg:"请填写".concat(this.billName)}:(this.forms.some((function(e){var a=r["b"].validate(e.dataModel),i=a.result,n=a.msg;if(!i)return t=n,!0})),t?{flag:!1,msg:t}:{flag:!0,msg:""})},reInit:function(){this.forms=[],this.initData()}}},p=d,f=(a("9f81"),a("c701")),h=Object(f["a"])(p,i,n,!1,null,"92f1addc",null);e["a"]=h.exports},9653:function(t,e,a){e=t.exports=a("690e")(!1),e.push([t.i,".gcxt[data-v-401b220c] :export{colorPrimary:#2c5cf7;headerBackgroundColor:#fff;headerTextColor:#333}.gcxt .more-btn-item[data-v-401b220c]{height:50px;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding:0 15px;font-size:15px;color:#2c5cf7}.gcxt .more-btn-item .iconfont[data-v-401b220c]{margin-right:10px}.gcxt .more-btn-item.red[data-v-401b220c]{color:#ff3b30}.gcxt .main-btn.red.btn[data-v-401b220c]{border-color:#ff3b30;color:#ff3b30}",""])},"9a0e":function(t,e,a){var i=a("e46b"),n=a("238a"),o=a("f6b4"),r=/"/g,s=function(t,e,a,i){var n=String(o(t)),s="<"+e;return""!==a&&(s+=" "+a+'="'+String(i).replace(r,"&quot;")+'"'),s+">"+n+"</"+e+">"};t.exports=function(t,e){var a={};a[t]=e(s),i(i.P+i.F*n((function(){var e=""[t]('"');return e!==e.toLowerCase()||e.split('"').length>3})),"String",a)}},"9a14":function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"gld-workload"},["edit"===t.mode?a("af-select-page-cell",{attrs:{id:"gld-worload",label:"工程量清单",value:t.value,title:"添加工程量清单",data:t.list,"show-search":!1,multi:t.multi,"value-review-tpl":"","key-map":t.keyMap,"multi-texts":t.valueObj},on:{load:t.load,input:t.input,clickMultiItem:t.openFile},scopedSlots:t._u([{key:"multiTextBefore",fn:function(e){var i=e.index;return[a("span",{staticClass:"file-icon abs"},[a("i",{staticClass:"icon__file iconfont icon-_unknow-type"}),a("i",{staticClass:"icon__delete iconfont icon-_shanchu-",on:{click:function(e){e.stopPropagation(),t.deleteItem(i)}}})])]}}])},[a("template",{slot:"item-before"},[a("span",{staticClass:"file-icon"},[a("i",{staticClass:"icon__file iconfont icon-_unknow-type"})])])],2):a("div",[a("van-collapse",{model:{value:t.activeNames,callback:function(e){t.activeNames=e},expression:"activeNames"}},[a("van-collapse-item",{attrs:{name:"default"}},[a("template",{slot:"title"},[t._v("\n          工程量清单 ("+t._s(t.valueObj.length)+")\n        ")]),a("div",{staticClass:"view-list"},t._l(t.valueObj,(function(e,i){return a("div",{key:i,staticClass:"item",on:{click:function(a){t.openFile(e)}}},[a("span",{staticClass:"file-icon abs"},[a("i",{staticClass:"icon__file iconfont icon-_unknow-type"})]),a("div",{staticClass:"label"},[t._v(t._s(e.text))]),a("div",{staticClass:"tip"},[t._v(t._s(e.subtext))]),"1"===e.__orgOption.has_reformulate_log?a("span",{staticClass:"gld-history-btn",on:{click:function(a){a.stopPropagation(),t.openHistoryPopup(e)}}},[t._v("历史版本")]):t._e()])})))],2)],1),t.editable?a("div",{staticClass:"description"},[t._v("*注意：如需修订工程量清单请使用电脑登录工程协同网页进行操作。")]):t._e(),a("popup-page",{directives:[{name:"phy-back",rawName:"v-phy-back",value:{status:t.showHistoryPopup,method:"closeHistoryPopup"},expression:"{status: showHistoryPopup, method: 'closeHistoryPopup'}"}],model:{value:t.showHistoryPopup,callback:function(e){t.showHistoryPopup=e},expression:"showHistoryPopup"}},[a("v-header",{attrs:{slot:"header",title:"历史版本","back-action":t.closeHistoryPopup},slot:"header"}),a("div",{staticClass:"view-list history-view-list"},t._l(t.curHistoryList,(function(e,i){return a("div",{key:i,staticClass:"item",on:{click:function(a){t.openFile(e)}}},[a("span",{staticClass:"file-icon abs"},[a("i",{staticClass:"icon__file iconfont icon-_unknow-type"})]),a("div",{staticClass:"label"},[t._v(t._s(e.text))]),a("div",{staticClass:"tip"},[t._v(t._s(e.subtext))]),a("div",{staticClass:"time"},[t._v(t._s(e.time))])])})))],1)],1)],1)},n=[],o=(a("5490"),a("fd50")),r=(a("5ab2"),a("6d57"),a("e10e"),a("28f8")),s=a("ab3e"),c=a("da71");function l(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,i)}return a}function u(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?l(Object(a),!0).forEach((function(e){Object(r["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):l(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var d=function(t){return Object(s["a"])({url:c["a"].gld_get_gld_workload_list,data:u({showLoading:!0},t)})},p=function(t){return Object(s["a"])({url:c["a"].gld_get_gld_workload_download_link,data:u({showLoading:!0},t)})},f=function(t){return Object(s["a"])({url:c["a"].get_gld_workload_log_list,data:u({showLoading:!0},t)})},h=a("a783"),m={name:"GldWorkload",inheritAttrs:!1,props:{mode:{type:String,default:"edit"},multi:{type:Boolean,default:!0},isRequire:{type:Boolean,default:!1},beforeEdit:{type:Function,default:function(){return!0}},data:{type:Array,default:function(){return[]}}},data:function(){return{store:h["a"],keyMap:{id:"id",name:"text",label:"subtext",value:"id"},list:[],valueObj:[],activeNames:["default"],showHistoryPopup:!1,curHistoryList:[]}},provide:function(){return{beforeClick:this.beforeGetData}},computed:{value:function(){return this.valueObj.map((function(t){var e=t.id;return e}))},editable:function(){return this.valueObj.some((function(t){return t.__orgOption.action&&!!t.__orgOption.action.length}))}},watch:{data:{handler:function(t){this.valueObj=t.map((function(t){var e=t.gld_fileid,a=t.file_name,i=t.gld_create_time;return{id:e,value:e,text:a,subtext:i,__orgOption:t}}))},immediate:!0}},mounted:function(){},methods:{input:function(t,e){this.valueObj=e},load:function(){this.getData()},beforeGetData:function(){return this.beforeEdit()?this.getBizData():o["a"].reject(null)},getBizData:function(){var t=this;return d({biz_type:this.store.bizType,change_type:this.store.changeType,contract_id:this.store.contracts[0]?this.store.contracts[0].contract_id:""}).then((function(e){var a=e.data,i=a.map((function(t){var e=t.gld_fileid,a=t.file_name,i=t.gld_create_time;return{id:e,value:e,text:a,subtext:i,__orgOption:t}}));return t.list=i,{list:i,total:i.length}})).catch((function(t){console.error(t)}))},deleteItem:function(t){this.valueObj.splice(t,1)},openFile:function(t){var e=this,a=t.id;return p({gld_fileid:a}).then((function(t){var a=t.data,i=a.link;console.log(a.link),e.OPEN_NEW_FILE(i)}))},getData:function(){return this.valueObj.map((function(t){return t.__orgOption}))},validateRequirement:function(){var t={flag:!0,msg:""};return this.isRequire&&0===this.valueObj.length&&(t={flag:!1,msg:"广联达工程量清单不可为空"}),t},openHistoryPopup:function(t){var e=this;return f({biz_id:t.__orgOption.biz_id,workload_id:t.__orgOption.workload_id}).then((function(t){var a=t.data;e.showHistoryPopup=!0,e.curHistoryList=(a||[]).map((function(t){var e=t.gld_fileid,a=t.file_name,i=t.user_name,n=t.update_time;return{id:e,value:e,text:a,subtext:i,time:n,__orgOption:t}}))}))},closeHistoryPopup:function(){this.showHistoryPopup=!1}}},b=m,g=(a("2465"),a("c701")),v=Object(g["a"])(b,i,n,!1,null,"5de7668b",null);e["a"]=v.exports},"9a340":function(t,e,a){"use strict";a("cc57");var i=a("4c09"),n=(a("6d57"),a("e10e"),a("1f0e")),o=a("5bbb"),r=["unit_of_quantity","unit_of_material"],s=function(t){var e=null,a={formStyle:"normal",groups:[{groupName:"",list:[]}]},i=Object(o["a"])(t.dataModel);for(var r in i){var s=i[r];1===s.free&&(s.text=s.value,a.groups[0].list.push(s))}return a.groups[0].list.length&&(e=n["c"].layout2Obj(a.groups),e.formStyle=a.formStyle),e};e["a"]={getSubFormSetting:function(t){var e=this,a=t.layoutId,i=t.bizType,o=t.changeType,r=void 0===o?"":o,s=arguments.length>1&&void 0!==arguments[1]&&arguments[1],c=n["c"].getLayout([a],null,s);return c.then((function(t){if(!t)return null;var n=t[a];return e.handlerLayout(n,{bizType:i,changeType:r})}))},handlerLayout:function(t,e){var a=e.bizType,o=e.changeType,c=void 0===o?"":o;if(!t||0===Object.keys(t).length)return null;t.groupTitle&&t.list.unshift(t.groupTitle),!t.groups&&t.list&&(t.groups=[{groupName:t.groupName||"",list:Object(i["a"])(t.list)}],delete t.list);var l=Object(n["a"])(t.enable,a,c);if(!l)return{isEnable:!1};var u=Object(n["b"])(t.req,a),d=n["c"].layout2Obj(t.groups);t.renderLayout&&(d.layoutArr=t.renderLayout);var p="工程量清单";d.groupInfo[0]&&d.groupInfo[0].name&&(p=d.groupInfo[0].name),d.groupName=p,d.groupInfo[0].name="",r.forEach((function(t){t in d.dataModel&&(d.dataModel[t].__erp_options=!0)}));var f=s(d);return{layout:t,isEnable:l,isRequire:u,billName:p,defaultForm:d,freeForm:f}},formatDefaultFormByErpOptions:function(t,e){return r.forEach((function(a){if(e[a]&&a in t.dataModel){var i=t.dataModel[a].data;i.length=0,e[a].p_items.forEach((function(e){t.dataModel[a].data.push(e)}))}})),t}}},"9d03":function(t,e,a){"use strict";a("6813")},"9f81":function(t,e,a){"use strict";a("2a5f")},a070:function(t,e,a){var i=a("ddf06");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var n=a("85cb").default;n("d96882cc",i,!0,{sourceMap:!1,shadowMode:!1})},a69e:function(t,e,a){"use strict";a("ce25")},a94d:function(t,e,a){var i=a("163c");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var n=a("85cb").default;n("004e298f",i,!0,{sourceMap:!1,shadowMode:!1})},ac06:function(t,e,a){var i=a("fc8d");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var n=a("85cb").default;n("225de5f2",i,!0,{sourceMap:!1,shadowMode:!1})},ada6:function(t,e,a){var i=a("18e4");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var n=a("85cb").default;n("178647d9",i,!0,{sourceMap:!1,shadowMode:!1})},af3d:function(t,e,a){"use strict";a("1192")},b0b4:function(t,e,a){"use strict";a.d(e,"a",(function(){return s})),a.d(e,"b",(function(){return c}));a("5ab2"),a("e10e"),a("6d57");var i=a("28f8"),n=a("b893");function o(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,i)}return a}function r(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?o(Object(a),!0).forEach((function(e){Object(i["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var s=function(t,e){var a;switch(t.id){case"contract_id":e.contract_info?a=e.contract_info:e.contract_info_list&&(a=e.contract_info_list),t.add&&(a=a.map((function(t,a){return r(r({},t),e.contract_add[a])})));break;case"fq_company":a=e.fq_company_info;break;case"project_id":Array.isArray(e.project_info)?e.project_info.forEach((function(t){t.text=t.project_name})):e.project_info.text=e.project_info.project_name,a=e.project_info;break}switch(a&&(Array.isArray(a)?t.valueObj=a.map((function(e,a){return r({value:t.value[a]},e)})):(a.value=t.value,t.valueObj=[a])),a="",t.id){case"to_company":a=e.to_company;break;case"cc_company":a=e.cc_company;break}if(a){var i=e[t.id],n=i.map((function(t){return t.company_guid}));t.value=n,t.valueObj=i}return a="","jzc_confirms"===t.id&&(a=e.jzc_confirms,t.valueObj=a,t.value=a.map((function(t){return t.confirm_id}))),t},c=function(t,e){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];for(var i in e){var o=e[i];if(o.relative_id||o.nestingStructure)o.text=("nestingStructure"in o?Object(n["c"])(t,o.nestingStructure):t[o.id])||"",a&&(o.value=o.text);else if(o.relative_contract||o.relationcontract)o.text=t[o.relative_contract_id||o.relationcontractId||o.id]||"",a&&(o.value=o.text);else if(o.relationDetail){var r=o.relationDetailId?o.relationDetailId:o.id;"date"!==o.type&&"textarea"!==o.type||(o.text=void 0!==t[r]?t[r]:""),a&&(o.value=o.text)}else void 0!==o.value&&null!==o.value||(o.value=void 0!==o.text&&null!==o.text?o.text:"")}return e}},b145:function(t,e,a){e=t.exports=a("690e")(!1),e.push([t.i,'.gcxt .icon-picture[data-v-5db9d623]{color:#6ac20b}.gcxt .icon-word[data-v-5db9d623]{color:#529fff}.gcxt .icon-pdf[data-v-5db9d623],.gcxt .icon-ppt[data-v-5db9d623]{color:#f36666}.gcxt .icon-excel[data-v-5db9d623]{color:#00d1a5}.gcxt .icon-zip[data-v-5db9d623]{color:#f9b566}.gcxt .icon-emahx-01[data-v-5db9d623],.gcxt .icon-txt[data-v-5db9d623]{color:#7889ad}.gcxt .icon-unknow[data-v-5db9d623]{color:#f90}.gcxt .icon-cad[data-v-5db9d623]{color:#52c4ff}.gcxt .item-inner[data-v-5db9d623]{display:-webkit-box;display:-ms-flexbox;display:flex;padding:10px 15px;line-height:1}.gcxt .icon-delete-wrapper[data-v-5db9d623]{-ms-flex-item-align:center;align-self:center;width:45px;height:45px;line-height:45px;text-align:center}.gcxt .icon-delete-wrapper>.icon-delete[data-v-5db9d623]{position:relative;color:#ff5f3e;font-size:18px}.gcxt .icon-delete-wrapper>.icon-delete[data-v-5db9d623]:after{content:"";position:absolute;z-index:-1;top:50%;left:50%;height:5px;width:80%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%);background-color:#fff}.gcxt .item-thumb[data-v-5db9d623]{position:relative;margin-right:12px}.gcxt .item-thumb .attach-pic[data-v-5db9d623]{width:41px;height:41px}.gcxt .item-thumb .icon-file-type[data-v-5db9d623],.gcxt .item-thumb .icon-picture[data-v-5db9d623]{font-size:41px}.gcxt .item-thumb .icon-delete-wrapper[data-v-5db9d623]{position:absolute;top:0;right:0;-webkit-transform:translate(45%,-45%);transform:translate(45%,-45%)}.gcxt .item-detail[data-v-5db9d623]{-webkit-box-flex:1;-ms-flex-positive:1;flex-grow:1}.gcxt .row0[data-v-5db9d623]{font-size:15px;line-height:1.2;word-break:break-word}.gcxt .span-replenish[data-v-5db9d623]{display:inline-block;color:#ff9800;border:1px solid #ff9800;font-size:12px;line-height:14px;padding:0 2px;margin-right:2px;border-radius:2px}.gcxt .span-file-name[data-v-5db9d623]{font-size:14px;line-height:16px;color:#1b1b1b;word-break:break-all}.gcxt .file-info-row[data-v-5db9d623]{margin-top:8px;font-size:13px;line-height:13px;color:#8e8e93}.gcxt .progress[data-v-5db9d623]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;margin-top:3px;overflow:hidden;height:15px;-webkit-transition:all .5s;transition:all .5s}.gcxt .progress.progress-100[data-v-5db9d623]{height:0;opacity:0}.gcxt .progress-bar[data-v-5db9d623]{position:relative;margin-right:10px;width:100%;height:2px;background:#e5e5e5}.gcxt .progress-bar-inner[data-v-5db9d623]{position:absolute;left:0;width:0;height:100%;background:#6ac20b}.gcxt .progress-value[data-v-5db9d623]{color:#333}',""])},b345:function(t,e,a){"use strict";a("ac06")},b64f:function(t,e,a){var i=a("8198");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var n=a("85cb").default;n("5e2879fd",i,!0,{sourceMap:!1,shadowMode:!1})},b830:function(t,e,a){var i=a("4e9d");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var n=a("85cb").default;n("351e1d96",i,!0,{sourceMap:!1,shadowMode:!1})},b87b:function(t,e,a){var i=a("c06a");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var n=a("85cb").default;n("0821df4a",i,!0,{sourceMap:!1,shadowMode:!1})},b998:function(t,e,a){e=t.exports=a("690e")(!1),e.push([t.i,".gcxt .describe-content[data-v-418c7ff6]{padding:10px 10px 7px;background-color:#f5f5f5;font-size:12px;color:#999;border-radius:2px}.gcxt .describe-content .red[data-v-418c7ff6]{color:red}.gcxt .line[data-v-418c7ff6]{margin-bottom:3px}",""])},bc0f:function(t,e,a){var i=a("1189");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var n=a("85cb").default;n("01e2bfeb",i,!0,{sourceMap:!1,shadowMode:!1})},bd32:function(t,e,a){"use strict";a.d(e,"a",(function(){return o}));a("6d57"),a("f548");var i=function(t){if(!t)return"";if("money"===t.type||"number"===t.type)return t.value;if("date"===t.type)try{var e=t.value.replace(/\-/g,"/");return new Date(e).getTime()}catch(a){return""}return"'"+t.value+"'"},n=function(t,e){if("date"===t.type)try{var a=e.replace(/\-/g,"/");return new Date(a).getTime()}catch(i){return""}return e},o=function(t,e){var a="",o=!1;t.forEach((function(t){var o=e[t.bizArea];if(!o)return!1;"==="===t.mode&&(t.mode="==");var r=i(o),s=n(o,t.judgeCont);a+=t.headSymbol+r+t.mode+"'"+s+"'"+t.footSymbol+(t.relate?t.relate:"")}));try{var r=Function;o=r("return "+a)()}catch(s){o=!1}return o}},be93:function(t,e,a){e=t.exports=a("690e")(!1),e.push([t.i,".gcxt[data-v-551a9e01] :export{colorPrimary:#2c5cf7;headerBackgroundColor:#fff;headerTextColor:#333}.gcxt .signer[data-v-551a9e01]{display:inline-block;background:#0f77f2;line-height:1.4;padding:0 2px;color:#fff;font-size:12px;-webkit-transform:scale(.9);transform:scale(.9);font-style:normal;min-width:40px;white-space:nowrap;text-align:center;border-radius:2px}.gcxt .searchBar[data-v-551a9e01]{border-bottom:1px solid #ececec}.gcxt .user-selector--tabs[data-v-551a9e01] .van-tabs{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-flex:1;-ms-flex:1;flex:1;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;overflow:hidden;position:absolute;width:100%;height:100%}.gcxt .user-selector--tabs[data-v-551a9e01] .van-tabs .van-tabs__wrap{height:48px;border-bottom:1px solid #ececec}.gcxt .user-selector--tabs[data-v-551a9e01] .van-tabs .van-tab__pane{height:100%;overflow:auto}.gcxt .user-selector--tabs[data-v-551a9e01] .van-tabs.tab-count-1 .van-tabs__wrap{display:none}.gcxt .user-selector--tabs[data-v-551a9e01] .van-tabs .van-tab--active{color:#2c5cf7}.gcxt .user-selector--tabs[data-v-551a9e01] .van-tabs .van-tabs__line{width:20px!important;height:2px;background:#2c5cf7;border-radius:3px;bottom:21px}.gcxt .user-selector--tabs[data-v-551a9e01] .van-tabs .van-tabs__content{-webkit-box-flex:1;-ms-flex:1;flex:1;background:#fff}",""])},c06a:function(t,e,a){e=t.exports=a("690e")(!1),e.push([t.i,".gcxt .approve-btn-popup[data-v-a94050f2]{position:fixed;z-index:10000;bottom:50px;top:0;left:0;right:0;background:rgba(0,0,0,.3)}.gcxt .mask[data-v-a94050f2]{position:absolute;bottom:0;top:0;left:0;right:0}.gcxt .approve-btn-dialog[data-v-a94050f2]{position:absolute;border-radius:4px;background:#fff;width:170px;bottom:20px;left:15px}.gcxt .approve-btn-dialog .trangle[data-v-a94050f2]{position:absolute;bottom:-23px;left:10px;width:26px;border:15px solid transparent;border-top-color:#fff}.gcxt .btns[data-v-a94050f2]{position:relative;font-size:16px;color:#666;width:30%}.gcxt .btns .iconfont[data-v-a94050f2]{margin-right:3px}.gcxt .btns .more[data-v-a94050f2]{display:-webkit-box;display:-ms-flexbox;display:flex}.gcxt .btns .more i[data-v-a94050f2]{-webkit-transition:-webkit-transform .3s;transition:-webkit-transform .3s;transition:transform .3s;transition:transform .3s,-webkit-transform .3s}.gcxt .btns .more .active[data-v-a94050f2]{-webkit-transform:rotate(-90deg);transform:rotate(-90deg)}[data-v-a94050f2] .active-form,[data-v-a94050f2] .fast-reply{margin-bottom:10px}[data-v-a94050f2] .approve-action+.approve-action .more-btn-item{border-top:1px solid #efeff4}",""])},c235:function(t,e,a){var i=a("e3ef");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var n=a("85cb").default;n("239f1299",i,!0,{sourceMap:!1,shadowMode:!1})},c31b:function(t,e,a){e=t.exports=a("690e")(!1),e.push([t.i,'.gcxt[data-v-446b980a] :export{colorPrimary:#2c5cf7;headerBackgroundColor:#fff;headerTextColor:#333}[data-v-446b980a] .content{padding-bottom:0!important}[data-v-446b980a] .van-dialog{background:#fff}[data-v-446b980a] .van-dialog__header{color:#323233;font-weight:500}.gcxt .mr-20[data-v-446b980a]{margin-right:20px}.gcxt .fast-reply[data-v-446b980a]{background:#fff;color:#666}.gcxt .fast-reply-list[data-v-446b980a]{position:relative;padding:15px 15px 5px}.gcxt .fast-reply-list[data-v-446b980a]:before{top:0;content:" ";position:absolute;z-index:1;right:0;border-top:1px solid #ececec;-webkit-transform:scaleY(.5);transform:scaleY(.5);left:0}.gcxt .fast-reply-title[data-v-446b980a]{display:-webkit-box;display:-ms-flexbox;display:flex;font-size:13px;color:#999}.gcxt .fast-reply-title>span[data-v-446b980a]{-webkit-box-flex:1;-ms-flex:1;flex:1}.gcxt .fast-reply-title .fast-reply-btn[data-v-446b980a]{color:#666}.gcxt .fast-reply-content[data-v-446b980a]{display:-webkit-box;display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap;margin-top:15px;font-size:12px}.gcxt .fast-reply-content>span[data-v-446b980a]{position:relative;height:28px;font-size:12px;padding:8px 10px;line-height:12px;white-space:nowrap;margin:0 10px 10px 0}.gcxt .fast-reply-content>span[data-v-446b980a]:after{content:"";bottom:0;-webkit-transform:scale(.5);transform:scale(.5);position:absolute;border:1px solid #c8c8c8;top:-50%;right:-50%;bottom:-50%;left:-50%;border-radius:4px}.gcxt .fast-reply-content>span .icon-_zuofei[data-v-446b980a]{position:absolute;top:-6px;right:-6px;font-size:12px;color:#c8c8c8;z-index:10}.gcxt .fast-reply-content--disabled[data-v-446b980a]{color:#c8c8c8!important}.gcxt .fast-reply-popup-content[data-v-446b980a]{margin:0 10px 10px;position:relative}.gcxt .fast-reply-popup-content[data-v-446b980a]:after{content:"";bottom:0;-webkit-transform:scale(.5);transform:scale(.5);position:absolute;border:1px solid #dcdde0;top:-50%;right:-50%;bottom:-50%;left:-50%;border-radius:4px;-webkit-transform:scale(.51);transform:scale(.51)}.gcxt .fast-reply-popup-content>textarea[data-v-446b980a]{padding:8px 5px;font-size:15px;resize:none;width:100%;border:none;position:relative;z-index:1}.gcxt .fast-reply-textarea[data-v-446b980a]{margin-top:15px;-webkit-box-flex:1;-ms-flex:1;flex:1}.gcxt .fast-reply-phrase-list[data-v-446b980a]{-webkit-box-flex:1;-ms-flex:1;flex:1;width:100%}.gcxt .fast-reply-phrase-list .fast-reply-tip[data-v-446b980a]{width:100%;font-size:13px;padding:10px 15px}.gcxt .fast-reply-phrase-list .fast-reply-phrase[data-v-446b980a]{padding-left:15px;background:#fff}.gcxt .fast-reply-phrase-list .fast-reply-phrase>li[data-v-446b980a]{display:-webkit-box;display:-ms-flexbox;display:flex;height:44px;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.gcxt .fast-reply-phrase-list .fast-reply-phrase>li>span[data-v-446b980a]{-webkit-box-flex:1;-ms-flex:1;flex:1}.gcxt .fast-reply-phrase-list .fast-reply-phrase>li .iconfont[data-v-446b980a]{font-size:22px;margin-right:15px}.gcxt .fast-reply-no-phrase[data-v-446b980a]{-webkit-box-flex:1;-ms-flex:1;flex:1;width:100%;margin-top:40%}.gcxt .fast-reply-no-phrase>img[data-v-446b980a]{display:block;margin:0 auto;width:30%}.gcxt .fast-reply-no-phrase>div[data-v-446b980a]{width:100%;height:60px;font-size:15px;color:#aaa;line-height:60px;text-align:center}.gcxt .fast-reply-button[data-v-446b980a]{font-size:16px;color:#fff;text-align:center;height:50px;line-height:50px;background:-webkit-gradient(linear,right top,left top,from(#2b85ff),to(#509afa));background:linear-gradient(270deg,#2b85ff,#509afa)}.gcxt .fast-reply-button .iconfont[data-v-446b980a]{font-size:15px}',""])},c3c2:function(t,e,a){"use strict";a("8558")},c6ae:function(t,e,a){"use strict";a("ada6")},c714:function(t,e,a){"use strict";a("a070")},c816:function(t,e,a){"use strict";a("bc0f")},cbe8:function(t,e,a){var i=a("d63b");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var n=a("85cb").default;n("dc51c0ee",i,!0,{sourceMap:!1,shadowMode:!1})},ce25:function(t,e,a){var i=a("f6d6");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var n=a("85cb").default;n("1554b5db",i,!0,{sourceMap:!1,shadowMode:!1})},d1c1:function(t,e,a){var i=a("2041");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var n=a("85cb").default;n("811d96f4",i,!0,{sourceMap:!1,shadowMode:!1})},d63b:function(t,e,a){e=t.exports=a("690e")(!1),e.push([t.i,".gcxt .relative-field[data-v-7a573734]{margin-bottom:10px}.gcxt .relative-field[data-v-7a573734] .subtext{padding-right:20px}",""])},db39:function(t,e,a){"use strict";a("1c87")},dd13:function(t,e,a){"use strict";a("5ab2"),a("6d57"),a("e10e");var i=a("28f8"),n=a("a18c"),o=a("cae8"),r=a("5fe8"),s=a("d832"),c=a("da71"),l=a("ab3e"),u=a("3fe4");function d(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,i)}return a}function p(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?d(Object(a),!0).forEach((function(e){Object(i["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):d(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}e["a"]={relative_from_design_confirmsheet:{saveId:"confirmsheet_info",keyMap:{id:"confirmsheet_id",value:"confirmsheet_id"},fields:{reviewed_cost:{type:"money"}},popup:{placeholder:"签证名称/签证编号",text:"{{change_overview}} ",subtext:["{{ws_code}}","审定金额：{{reviewed_cost}} 元"]},relativeQuery:["contract","bizType","bizId"],detailItemClick:function(t){var e=t[this.keyMap.id];n["a"].push({name:Object(o["b"])(r["a"].CONFIRMSHEET,"Detail",s["a"].DESIGN),query:{id:e,change_type:s["a"].DESIGN}})},pagingFun:function(t){return Object(l["a"])({url:c["a"].get_enable_relate_confirmsheet_for_outputvalue,data:p(p({},t),{},{change_type:s["a"].DESIGN})}).then((function(t){return p(p({},t),{},{total:t.record_count})}))}},relative_from_invoice:{saveId:"invoices",keyMap:{id:"invoice_num",value:"invoice_num"},fields:{invoice_amount:{type:"money"},billing_date:{type:"date"}},popup:{placeholder:"搜索",text:"¥{{invoice_amount}} ",subtext:["发票号码：{{invoice_num}}","开票日期：{{billing_date}}"]},emptyTip:"暂无可添加的发票",beforeEdit:function(){return!0},pagingFun:function(t){var e=this;return Object(u["c"])(t).then((function(t){return t.data=t.data.map((function(t){return p(p({},t),{},{enable:1===t.is_optional})})),p(p({},t),{},{total:t.record_count})})).catch((function(t){t&&t.message&&e.sui.toast(t.message)}))}}}},ddf06:function(t,e,a){e=t.exports=a("690e")(!1),e.push([t.i,".gcxt[data-v-69ba1716] :export{colorPrimary:#2c5cf7;headerBackgroundColor:#fff;headerTextColor:#333}.gcxt .user-selector-item[data-v-69ba1716]{display:-webkit-box;display:-ms-flexbox;display:flex;min-height:64px;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding:10px 15px;background-color:#fff}.gcxt .user-selector-item--avatar[data-v-69ba1716]{width:34px;line-height:34px}.gcxt .user-selector-item--content[data-v-69ba1716]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-flex:1;-ms-flex:1;flex:1;font-size:16px;margin-left:15px;-webkit-box-align:center;-ms-flex-align:center;align-items:center;line-height:1.4}.gcxt .user-selector-item--content .icon[data-v-69ba1716]{margin-left:20px;min-width:22px}.gcxt .user-selector-item--content .icon-_xuanzhong[data-v-69ba1716],.gcxt .user-selector-item--content .icon-selected[data-v-69ba1716]{font-size:18px;color:#2c5cf7}.gcxt .user-selector-item--content .icon-redio-unselected[data-v-69ba1716]{font-size:20px;color:#c8c8c8}.gcxt .user-selector-item--content-name[data-v-69ba1716]{-webkit-box-flex:1;-ms-flex:1;flex:1;max-width:90%}",""])},e3ef:function(t,e,a){e=t.exports=a("690e")(!1),e.push([t.i,'.gcxt[data-v-54bda078] :export{colorPrimary:#2c5cf7;headerBackgroundColor:#fff;headerTextColor:#333}.gcxt .user-selector[data-v-54bda078] .af-title{font-size:16px}.gcxt .selecteds-text[data-v-54bda078]{font-size:14px;color:#000}.gcxt .flow-list[data-v-54bda078]{padding-bottom:5px;background:#fff;overflow:hidden}.gcxt .flow-list .flow-item[data-v-54bda078]{position:relative;display:-webkit-box;display:-ms-flexbox;display:flex}.gcxt .flow-list .flow-item:last-of-type .flow-left-icon[data-v-54bda078]:after{display:none}.gcxt .flow-list .flow-item:not(:last-of-type) .item-content[data-v-54bda078]{position:relative}.gcxt .flow-list .flow-item:not(:last-of-type) .item-content[data-v-54bda078]:before{bottom:0;content:" ";position:absolute;z-index:1;right:0;border-top:1px solid #ececec;-webkit-transform:scaleY(.5);transform:scaleY(.5);left:0}.gcxt .flow-list .flow-item.selected .step_name[data-v-54bda078]{color:#2c5cf7}.gcxt .flow-list .flow-left-icon[data-v-54bda078]{position:relative;padding-top:13px;width:40px;text-align:center;color:#75c813;-ms-flex-negative:0;flex-shrink:0}.gcxt .flow-list .flow-left-icon[data-v-54bda078]:before{position:relative;z-index:1}.gcxt .flow-list .flow-left-icon[data-v-54bda078]:after{content:"";width:1px;height:100%;position:absolute;background-color:#d9d9d9;left:19px;top:28px}.gcxt .flow-list .item-content[data-v-54bda078]{-webkit-box-flex:1;-ms-flex-positive:1;flex-grow:1;padding:13px 0;padding-right:40px}.gcxt .flow-list .step_name[data-v-54bda078]{color:#000;font-size:16px}.gcxt .flow-list .approver[data-v-54bda078]{margin-top:6px;font-size:12px;color:#666}.gcxt .flow-list .icon_selected[data-v-54bda078]{position:absolute;right:15px;top:50%;-webkit-transform:translateY(-50%);transform:translateY(-50%);color:#2c5cf7;font-size:17px}',""])},e599:function(t,e,a){"use strict";a("8e66")},e823:function(t,e,a){e=t.exports=a("690e")(!1),e.push([t.i,'.gcxt[data-v-1ddbaedb] :export{colorPrimary:#2c5cf7;headerBackgroundColor:#fff;headerTextColor:#333}.gcxt .user-selector[data-v-1ddbaedb] .af-title{font-size:16px}.gcxt .user-selector[data-v-1ddbaedb] .af-cell-value{max-height:87px;overflow:auto}.gcxt .user-selector--list[data-v-1ddbaedb]{background:#fff;padding:12px 15px}.gcxt .user-selector--list-item[data-v-1ddbaedb]{display:inline-block;height:34px;line-height:34px;padding:0 8px 0 0}.gcxt .user-selector--list-item-content[data-v-1ddbaedb]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;height:24px;padding:2px 5px;background:#f5f5f5;position:relative}.gcxt .user-selector--list-item-content[data-v-1ddbaedb]:after{content:"";bottom:0;-webkit-transform:scale(.5);transform:scale(.5);position:absolute;border:1px solid #f0f0f0;top:-50%;right:-50%;bottom:-50%;left:-50%;border-radius:4px}.gcxt .user-selector--list-item-name[data-v-1ddbaedb]{-webkit-box-flex:1;-ms-flex:1;flex:1;white-space:nowrap;color:#69696e;font-size:13px;line-height:1.2}.gcxt .user-selector--list-item .iconfont[data-v-1ddbaedb]{margin-left:5px;font-size:12px;-webkit-transform:scale(.7);transform:scale(.7);color:#9b9b9b}.gcxt .tip[data-v-1ddbaedb]{margin:10px 1px;margin-left:15px;font-size:12px;color:#8e8e93}.gcxt .user-selector.-view[data-v-1ddbaedb] .van-cell__title{font-size:16px}.gcxt .user-selector.-view[data-v-1ddbaedb] .van-collapse-item__content{padding:12px 15px}.gcxt .selecteds-text[data-v-1ddbaedb]{font-size:14px;color:#000}',""])},e8ff:function(t,e,a){var i=a("507a");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var n=a("85cb").default;n("207d6d52",i,!0,{sourceMap:!1,shadowMode:!1})},eb48:function(t,e,a){"use strict";a.d(e,"a",(function(){return g}));a("5ab2");var i=a("28f8"),n=(a("e10e"),a("6d57"),a("540c")),o=a("a740"),r=a("82f8"),s=a("fd50"),c={getSelecteds:function(t){var e=t.detail,a=void 0===e?null:e,i=t.contract_id,n=void 0===i?"":i,o=t.biz_type,r=t.change_type,c=void 0===r?"":r,l=s["a"].resolve([]);return a&&a.approver_ids?l=s["a"].resolve(a.approver_ids.map((function(t){return t.approver_id}))):n&&(l=this.getDefaultUser({contract_id:n,biz_type:o,change_type:c})),l},getDefaultUser:function(t,e){var a=t.contract_id,i=t.biz_type,n=t.change_type,o={contract_id:a,biz_type:i,change_type:n};return e&&(o=Object.assign(o,e)),Object(r["m"])(o).then((function(t){return t&&1===t.success?t.data.map((function(t){return t.user_id})):[]}))}},l=(a("cc57"),a("5bbb")),u=a("bd32"),d={getSelecteds:function(t){var e=t.flows,a=t.detail,i=void 0===a?null:a,n={};if(i&&i.flow&&i.flow.flow&&i.flow.flow.length>1){if(e.length!==i.flow.flow.length)return null;var o=i.flow.flow.reduce((function(t,e,a){var i=function(t){if(t.approver&&t.approver.approver_id)return t.approver.approver_id};return e.handler_list.forEach((function(e){var n=i(e);n&&(t[a+"__"+e.station.name]=n)})),t}),{});e.forEach((function(t,e){if(0!==e){var a=t.step_order;t.handler_list.forEach((function(t){var i=e+"__"+t.station.name,r=o[i];r&&(n[a+"__"+t.station.name]=r)}))}}))}return Object.keys(n).length?n:null},transformFlowWithForm:function(t,e){var a=this.getBranchFlow(t.branches.data,e);return t.flowInfo.flow=a?Object(l["a"])(a):t.flowOri,t},getBranchFlow:function(t,e){var a;return t.some((function(t,i){var n=Object(u["a"])(t.branch_condition,e);return n&&(a=t.flow),n})),a}},p=a("0909");function f(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,i)}return a}function h(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?f(Object(a),!0).forEach((function(e){Object(i["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):f(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var m="0",b="1",g={Free:m,Fixed:b},v=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=Object(o["d"])("user_id"),i={};return t.forEach((function(t){var n=t.user_ids||[];n.forEach((function(t){e&&t.user_id===a||(i[t.user_id]=t)}))})),i};e["b"]={FreeService:c,FixedService:d,getUsers:function(t){var e=t.project_id,a=void 0===e?"":e,i=t.contract,n=void 0===i?null:i,o=t.biz_type,r=t.change_type,s=void 0===r?"":r;return a?this.getUsersByProjectId({project_id:a,biz_type:o,change_type:s}):this.getUsersByContract(n)},getUsersByContract:function(t){var e,a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e=t instanceof Array?t:[t];var i=v(e,a),o=Object.keys(i);return n["a"].getUsersByIds(o).then((function(t){return t.map((function(t){return h(h({},t),i[t.user_id])}))}))},getUsersByProjectId:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Object(r["q"])(t).then((function(t){var a=t.data,i=a.reduce((function(t,e){return t[e.user_id]=e,t}),{}),r=a.map((function(t){return t.user_id}));if(e){var s=Object(o["d"])("user_id");r=r.filter((function(t){return t!==s}))}return n["a"].getUsersByIds(r).then((function(t){return t.map((function(t,e){return h(h({},t),i[t.user_id])}))}))}))},getRecentlyUsers:function(t){return n["a"].getRecentlyList(t).then((function(t){return t}))},getSelectPeopleSetting:function(t){var e,a=t.contract_id,i=void 0===a?"":a,n=t.project_id,o=t.biz_type,r=t.change_type,c=void 0===r?"":r,l=t.detail,u=void 0===l?null:l,d=t.params,f=void 0===d?null:d;return u&&u.history_id?u.flow?e=s["a"].resolve(u.flow):u.approver_ids&&(e=s["a"].resolve({type:m,sign_mode:u.sign_mode})):e=this.getFlowInfo({contract_id:i,project_id:n,biz_type:o,change_type:c,params:f}),e.then((function(t){var e=t.type;return e===m?{type:p["a"].Free,flowInfo:t,selecteds:[]}:e===b?s["a"].resolve({type:p["a"].Fixed,flowInfo:t,selecteds:null,flowOri:t.flow,branches:{deps:Object.keys((t.branch||[]).reduce((function(t,e){var a=e.branch_condition.reduce((function(t,e){return t[e.bizArea]=!0,t}),{});return h(h({},t),a)}),{})),data:t.branch||[]}}):void 0}))},getFlowInfo:function(t){var e=t.contract_id,a=void 0===e?"":e,i=t.project_id,n=t.biz_type,o=t.change_type,s=void 0===o?"":o,c=t.params,l={biz_type:n,change_type:s};return c?l=h(h({},l),c):i?l.project_id=i:l.contract_id=a,Object(r["l"])(l).then((function(t){var e=t.data;return e}))}}},ed8b:function(t,e,a){"use strict";a("0d2a")},eebb:function(t,e,a){e=t.exports=a("690e")(!1),e.push([t.i,'.gcxt[data-v-5868a12d] :export{colorPrimary:#2c5cf7;headerBackgroundColor:#fff;headerTextColor:#333}.gcxt .field-wrapper[data-v-5868a12d]{margin:0 0 10px;background:#fff}.gcxt .field-wrapper.-edit[data-v-5868a12d] .van-collapse-item__title,[data-v-5868a12d] .van-collapse.hidetitle .van-collapse-item__title{display:none}.gcxt .-has-file .field-title[data-v-5868a12d],.gcxt .-restrict .field-title[data-v-5868a12d]{position:relative}.gcxt .-has-file .field-title[data-v-5868a12d]:after,.gcxt .-restrict .field-title[data-v-5868a12d]:after{content:"";bottom:0;-webkit-transform:scale(.5);transform:scale(.5);position:absolute;border:1px solid #e7e7e7;top:-50%;right:-50%;bottom:-50%;left:-50%}.gcxt .-has-file .list-content[data-v-5868a12d]{padding-bottom:10px}.gcxt .field-title[data-v-5868a12d]{background-color:#fff;height:48px;padding-left:15px;line-height:48px;font-size:.8rem;color:#323233}.gcxt .field-title>.text[data-v-5868a12d]{display:inline-block;vertical-align:middle;min-width:97px}.gcxt .field-title>.tip[data-v-5868a12d]{padding-left:5px;color:#c8c8c8;font-size:14px}.gcxt .field-title>.span-fujian[data-v-5868a12d]{position:absolute;right:15px;vertical-align:middle;color:#2c5cf7}[data-v-5868a12d] .van-cell{padding-left:0;font-size:16px}[data-v-5868a12d] .van-cell:after{border-bottom-color:#e7e7e7!important}[data-v-5868a12d] .van-icon{-webkit-box-ordinal-group:0;-ms-flex-order:-1;order:-1;font-size:18px;margin-left:0;width:44px;text-align:center;color:#b5b5b5}.gcxt .append-toggle[data-v-5868a12d]{display:inline-block;height:22px;line-height:22px;color:#666;border:1px solid #dcdcdc;border-radius:12px;padding:0 5px;font-size:13px;background:#fff;white-space:nowrap}[data-v-5868a12d] .van-hairline--top-bottom:after{border:none}[data-v-5868a12d] .van-collapse-item__content{padding:0;color:#333}.gcxt .attachment-group[data-v-5868a12d]{position:relative}.gcxt .attachment-title-wrapper[data-v-5868a12d]{padding:10px 15px}.gcxt .attachment-group-title[data-v-5868a12d]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;position:relative;padding:4px 10px;background:#f5f5f5;border-radius:2px;font-size:0}.gcxt .attachment-group-title .left[data-v-5868a12d]{padding-right:10px}.gcxt .attachment-name[data-v-5868a12d]{vertical-align:middle;color:#666;font-size:14px}.gcxt .attachment-remark[data-v-5868a12d],.gcxt .attachment-required[data-v-5868a12d]{display:inline-block;vertical-align:middle;color:#c8c8c8;margin-left:2px;font-size:14px}.gcxt .icon__fujian[data-v-5868a12d]{color:#2c5cf7}.gcxt .no-uploadable[data-v-5868a12d]{font-size:14px;color:#c8c8c8;white-space:nowrap}.gcxt .-edit.-restrict[data-v-5868a12d] .icon-delete-wrapper{display:none}.gcxt .-edit.-restrict[data-v-5868a12d] .item-thumb .icon-delete-wrapper{display:block}.gcxt .-view[data-v-5868a12d] .van-cell__title{margin-left:15px}.gcxt .-view[data-v-5868a12d] .van-collapse-item__title .van-icon-arrow{position:absolute;right:0;font-size:14px;color:#999}.gcxt .-view.-simple[data-v-5868a12d]:not(.-has-file) .van-icon-arrow{display:none}',""])},f04f:function(t,e,a){"use strict";a("5ab2"),a("e10e");var i=a("28f8"),n=(a("6d57"),a("b23b")),o=a("9a340"),r=a("fd50");function s(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,i)}return a}function c(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?s(Object(a),!0).forEach((function(e){Object(i["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):s(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}e["a"]={getSubFormSetting:function(t){var e=t.layoutId,a=t.bizType,i=[];return i.push(o["a"].getSubFormSetting({layoutId:e,bizType:a},!0)),r["a"].all(i).then((function(t){if(!t[0])return null;var e=t[0],a=e.defaultForm,i=e.layout,o=Object(n["a"])(e,["defaultForm","layout"]),r={groupInfo:a.groupInfo,layoutArr:[[]],dataModel:{},relations:a.relations},s={groupInfo:[{groupId:"edit-group",name:""}],layoutArr:[[]],dataModel:{},relations:{}};return a.layoutArr.forEach((function(t){t.forEach((function(t){var e=a.dataModel[t];1===e.isEdit||1===e.isSave?(s.layoutArr[0].push(t),s.dataModel[t]=a.dataModel[t]):(r.layoutArr[0].push(t),r.dataModel[t]=a.dataModel[t])}))})),{layout:i,isEnable:o.isEnable,viewSettings:c(c({},o),{},{defaultForm:r}),editDefaultForm:s,relations:a.relations}}))}}},f6d6:function(t,e,a){e=t.exports=a("690e")(!1),e.push([t.i,'.gcxt .approve-popup-content[data-v-4ec4600c]{background-color:#f5f5f5}.gcxt .approve-popup-content>.group-name[data-v-4ec4600c]:first-child{margin-top:16px;color:#8e8e93;font-size:12px}.gcxt .group-name[data-v-4ec4600c]{margin:6px 15px 11px;font-size:13px;color:#666}.gcxt .group-name[data-v-4ec4600c]:before{content:"";display:table}.gcxt .component-group[data-v-4ec4600c]{margin-bottom:10px;overflow:hidden}[data-v-4ec4600c] .cell{margin-bottom:0!important}[data-v-4ec4600c] .active-form .group{margin-bottom:10px}.gcxt .user-selector[data-v-4ec4600c] .af-content{padding:13px 15px}.gcxt .field-reset-flow[data-v-4ec4600c] .af-content{-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;padding:10px 15px}',""])},fa63:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"approve-action"},[t.$slots["default"]||t.$scopedSlots["default"]?t._e():a("action-button",{directives:[{name:"show",rawName:"v-show",value:!t.keyboardInfo.show,expression:"!keyboardInfo.show"}],attrs:{plain:t.plain,"btn-type":t.btnType,"action-code":t.actionCode},on:{click:t.handleClick}},[t._v(t._s(t.spConfig.actionName))]),t._t("default",null,{handleClick:t.handleClick}),t.actionConfig?a("popup-page",{directives:[{name:"phy-back",rawName:"v-phy-back",value:{status:t.show,method:"close"},expression:"{status: show, method: 'close'}"}],model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[a("v-header",{attrs:{slot:"header",title:t.actionConfig.title||t.spConfig.actionName||"","back-action":t.close},slot:"header"}),t.isInitialized?a("div",{ref:"PopupContent",staticClass:"approve-popup-content"},[t.components[t.CY.ADD_SIGN]?a("select-people",{ref:t.CY.ADD_SIGN,staticClass:"component-group",attrs:{type:t.AddSignSelectPeopleType,users:t.users,action:t.actionCode,is_into_erp:t.sheet.is_into_erp||0,title:t.components[t.CY.ADD_SIGN].title}}):t._e(),t.components[t.CY.COMMENT]&&t.components[t.CY.COMMENT].title?a("div",{staticClass:"group-name"},[t._v(t._s(t.components[t.CY.COMMENT].title))]):t._e(),t.components[t.CY.COMMENT]?a("fast-reply",{ref:t.CY.COMMENT,staticClass:"component-group",attrs:{placeholder:t.components[t.CY.COMMENT].placeholder,"max-length":t.components[t.CY.COMMENT].maxLength,"has-phrase":t.components[t.CY.COMMENT].hasPhrase,action:t.actionCode},model:{value:t.comment,callback:function(e){t.comment=e},expression:"comment"}}):t._e(),t.components[t.CY.TASK_COMMENT]?a("fast-reply",{ref:t.CY.TASK_COMMENT,staticClass:"component-group",attrs:{placeholder:t.components[t.CY.TASK_COMMENT].placeholder,"max-length":t.components[t.CY.TASK_COMMENT].maxLength,"has-phrase":t.components[t.CY.TASK_COMMENT].hasPhrase,action:t.actionCode},model:{value:t.tackComment,callback:function(e){t.tackComment=e},expression:"tackComment"}}):t._e(),t.processDepartment?a("af-select-page-cell",{ref:"PROCESS_DEPARTMENT",staticClass:"component-group",attrs:{id:t.processDepartment.id,text:t.processDepartment.text,"show-search":!1,label:"经办部门",title:"经办部门",data:t.processDepartment.data,value:t.processDepartment.value,default:t.processDepartment.value,"key-map":{name:"text",value:"value"}},model:{value:t.processDepartment.value,callback:function(e){t.$set(t.processDepartment,"value",e)},expression:"processDepartment.value"}}):t._e(),t.priceSheetMaterial?a("sp-sub-form",t._b({ref:"PRICE_SHEET_MATERIAL",attrs:{"sp-multi":!0},on:{submit:function(e){return t.onSubFormChange("PRICE_SHEET_MATERIAL",e)}}},"sp-sub-form",Object.assign({},t.priceSheetMaterial,t.components[t.CY.PRICE_SHEET_MATERIAL]),!1)):t._e(),t.jzcClapplySubForm?a("sp-sub-form",t._b({ref:"JZC_CLAPPLY_SUB_FORM",on:{submit:function(e){return t.onSubFormChange("JZC_CLAPPLY_SUB_FORM",e)}}},"sp-sub-form",Object.assign({},t.jzcClapplySubForm,t.components[t.CY.JZC_CLAPPLY_SUB_FORM]),!1)):t._e(),t.formData?a("div",{staticClass:"form-wrapper"},[a("form-comp",{ref:"FORM",attrs:{data:t.formData,sheet:t.sheet}})],1):t._e(),t.reverseForm?a("reverse-visa",{ref:"REVERSE_VISA",staticClass:"component-group",attrs:{"form-data":t.reverseForm,data:t.sheet.negative_visa_list.editable?t.sheet.negative_visa_list.list:[]}}):t._e(),t.components[t.CY.FALLBACK]&&t.fallbackTo?a("div",{staticClass:"component-group"},[a("div",{staticClass:"group-name"},[t._v("处理方式")]),t.fallbackTo?a("fallback-selector",{ref:t.CY.FALLBACK,attrs:{"selector-title":"打回",type:t.fallbackTo.type,users:t.fallbackTo.users||[],flow:t.fallbackTo.flow||[],label:"打回到",placeholder:t.components[t.CY.FALLBACK].req?"必选":"非必选"}}):t._e(),t.showResetFLow?a("af-cell",{staticClass:"van-hairline--top field-reset-flow",attrs:{label:"重走流程","is-link":!1}},[a("van-switch",{attrs:{size:"24px"},model:{value:t.isResetFlow,callback:function(e){t.isResetFlow=e},expression:"isResetFlow"}})],1):t._e()],1):t._e(),t.components[t.CY.ADDSIGN_ROLLBACK]?a("div",{staticClass:"component-group"},[a("div",{staticClass:"group-name"},[t._v("处理方式")]),a("af-cell",{attrs:{label:"打回到","is-link":!1,value:t.addSignRollBackUser}})],1):t._e(),t.components[t.CY.ATTACHMENT]?a("attachment",{ref:t.CY.ATTACHMENT,attrs:{edit:!0,tip:t.actionCode===t.ACTION_TYPE.accept?"非必传":""}}):t._e(),t.components[t.CY.PICTURE]?a("upload-images",{ref:t.CY.PICTURE,attrs:{editable:!0,show_not_support:t.components[t.CY.ATTACHMENT]},model:{value:t.uploadimages,callback:function(e){t.uploadimages=e},expression:"uploadimages"}}):t._e(),t.components[t.CY.SELECT_PEOPLE]&&!t.hideSelectPeople?a("select-people",{ref:t.CY.SELECT_PEOPLE,staticClass:"component-group",attrs:{type:t.selectPeople.type,users:t.users,"flow-info":t.selectPeople.flowInfo,selecteds:t.selectPeople.selecteds,action:t.actionCode,is_into_erp:t.sheet.is_into_erp||0,title:t.components[t.CY.SELECT_PEOPLE].title,size:t.actionCode===t.ACTION_TYPE.reAssign||t.actionCode===t.ACTION_TYPE.tcTransfer?1:1/0}}):t._e(),t.components[t.CY.CC_PEOPLE]?[a("user-selector",{ref:t.CY.CC_PEOPLE,staticClass:"component-group",attrs:{"selector-title":"选择抄送对象",list:t.allUser,placeholder:"非必选",label:"抄送","show-search-btn":!0,multi:!0,"exclude-my-self":!0,tip:t.actionCode===t.ACTION_TYPE.tcTransfer?"":"注：抄送对象不参与审批，但会收到该条流程的通知"},model:{value:t.onlySelectPeople,callback:function(e){t.onlySelectPeople=e},expression:"onlySelectPeople"}})]:t._e()],2):t._e(),a("div",{staticClass:"approve-bottom"},[t.isInitialized?a("app-button-group",{style:{background:t.isFixedBottom?"#fff":"inherit","margin-bottom":t.isFixedBottom?"0px":"20px"},attrs:{slot:t.isFixedBottom?"footer":"default"},slot:t.isFixedBottom?"footer":"default"},[a("approve-button",{ref:"APPROVE_BUTTON",attrs:{action:t.actionCode,"action-data":t.actionData,sheet:t.sheet,"action-config":t.actionConfig,"is-reset-flow":t.isResetFlow,repeat_proc_config:t.repeat_proc_config,"get-approve-refs":t.getApproveRefs},on:{"submit-success":t.submitSuccess}},[t._v("确定")])],1):t._e()],1)],1):t._e(),a("biz-selector",{attrs:{options:t.startBizOptions},on:{selected:t.redirectToBiz},model:{value:t.showStartBiz,callback:function(e){t.showStartBiz=e},expression:"showStartBiz"}}),a("approve-button",{ref:"CP_APPROVE_BUTTON",staticStyle:{display:"none"},attrs:{action:t.actionCode,"action-data":t.actionData,sheet:t.sheet,"is-reset-flow":t.isResetFlow,repeat_proc_config:t.repeat_proc_config,"get-approve-refs":t.getApproveRefs},on:{"submit-success":t.submitSuccess}},[t._v("确定")])],2)},n=[],o=(a("5ab2"),a("e10e"),a("163d"),a("9a33"),a("4c09")),r=(a("f548"),a("6d57"),a("e3ee")),s=a("28f8"),c=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"fast-reply"},[a("af-textarea",{attrs:{id:t.textareaId,placeholder:t.placeholder,"max-length":t.maxLength},on:{input:t.input},model:{value:t.text,callback:function(e){t.text=e},expression:"text"}}),t.hasPhrase?a("div",{staticClass:"fast-reply-list"},[t.disableEdit?t._e():a("div",{staticClass:"fast-reply-title"},[a("span",[t._v("快捷输入")]),t.editModel?t._e():a("a",{staticClass:"fast-reply-btn",on:{click:function(e){t.toEditModel()}}},[t._v("编辑")]),t.editModel?a("a",{staticClass:"fast-reply-btn mr-20",on:{click:t.cancel}},[t._v("取消")]):t._e(),t.editModel?a("a",{on:{click:t.save}},[t._v("保存")]):t._e()]),a("div",{staticClass:"fast-reply-content"},[t._l(t.replyData.list,(function(e,i){return a("span",{key:e.id||100*Math.random(),staticClass:"surround",on:{click:function(){t.editModel?t.edit(e):t.clickItem(e)}}},[t.editModel?a("i",{staticClass:"iconfont icon-_zuofei",on:{click:function(a){a.stopPropagation(),t.deleteItem(e,i)}}}):t._e(),t._v("\n        "+t._s(e.content)+"\n      ")])})),t._l(t.replyData.system,(function(e){return a("span",{key:e.id,staticClass:"surround",class:{"fast-reply-content--disabled":t.editModel},on:{click:function(a){t.clickItem(e)}}},[t._v("\n        "+t._s(e.content)+"\n      ")])})),t.editModel?a("span",{staticClass:"surround",on:{click:t.openAddPopup}},[t._v("+添加")]):t._e()],2)]):t._e(),a("van-dialog",{attrs:{title:"添加快捷标签","confirm-button-text":"保存","show-cancel-button":"","get-container":"body"},on:{confirm:t.confirm},model:{value:t.showAddPopup,callback:function(e){t.showAddPopup=e},expression:"showAddPopup"}},[a("div",{staticClass:"fast-reply-popup-content"},[a("textarea",{attrs:{placeholder:"不超过20个字",maxlength:"20"},domProps:{value:t.replyText},on:{input:t.addReplyText}})])])],1)},l=[],u=a("82f8"),d=a("ea14"),p=a("fd50"),f=a("a783"),h=[],m=[],b={name:"AfFastReply",components:{AfTextarea:d["a"]},props:{value:{type:[Number,String],default:""},procAction:{type:String,default:""},placeholder:{type:String,default:""},maxLength:{type:[Number,String],default:""},hasPhrase:{type:Boolean,default:!1},disableEdit:{type:Boolean,default:!1}},data:function(){return{showAddPopup:!1,editModel:!1,currItem:{},replyText:"",text:"",textareaId:"af-fast-reply-textarea",replyList:[],replyData:{allowCount:5,list:[],system:[]}}},created:function(){this.text=this.value,this.load()},methods:{addReplyText:function(t){var e=t.target.value;console.log(e),this.replyText=e},load:function(){var t=this;if(this.hasPhrase)return this.sui.showIndicator(),Object(u["w"])({biz_type:f["a"].bizType,proc_action:this.procAction}).then((function(e){var a=e.data;t.replyData={allowCount:a.allow_count,list:a.list,system:a.system},t.sui.hideIndicator()})).catch((function(e){console.error(e),t.replyList=[],t.sui.hideIndicator()}))},toEditModel:function(){this.editModel=!0},save:function(){var t=this;this.sui.showIndicator();var e=[];return h.length&&e.push(function(){return Object(u["c"])({biz_type:f["a"].bizType,ids:h}).then((function(t){if(!t.success)return p["a"].reject(t.message)}))}()),m.length&&m.forEach((function(t){e.push(function(){return Object(u["a"])(t).then((function(t){if(!t.success)return p["a"].reject(t.message)}))}())})),p["a"].all(e).then((function(e){t.sui.hideIndicator(),t.sui.toast("保存成功"),t.load(),t.reset()})).catch((function(e){console.error(e),t.sui.hideIndicator(),t.sui.toast("保存成功")}))},reset:function(){this.currItem={},this.replyText="",this.editModel=!1,h=[],m=[]},clickItem:function(t){this.editModel||(this.text+=(this.text?",":"")+t.content,this.input())},input:function(){var t=this;this.$nextTick((function(){t.$emit("input",t.text.trim())}))},getData:function(){return this.text.trim()},edit:function(t){this.currItem=t,this.showAddPopup=!0,this.replyText=t.content},deleteItem:function(t,e){~h.indexOf(t.id)||(h.push(t.id),this.replyData.list.splice(e,1))},openAddPopup:function(){this.showAddPopup=!0},cancel:function(){var t=this;h.length||m.length?this.sui.confirm({title:"",message:"还未保存快捷标签，是否保存？",confirmButtonText:"保存",cancelButtonText:"放弃"}).then((function(){t.save()})).catch((function(){t.load(),t.reset()})):(this.load(),this.reset())},confirm:function(){if(this.replyText=this.replyText.trim(),this.replyText){var t={id:this.currItem.id||"",biz_type:f["a"].bizType,content:this.replyText};m.push(t),this.currItem.id?this.currItem.content=this.replyText:this.replyData.list.unshift(t),this.replyText="",this.currItem={}}else this.sui.toast("请输入常用语")}}},g=b,v=(a("db39"),a("c701")),x=Object(v["a"])(g,c,l,!1,null,"446b980a",null),y=x.exports,_=a("2655"),w=a("0909"),O=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"user-selector -edit"},[a("cell",{attrs:{label:t.label,placeholder:t.selected?"":t.placeholder,value:t.cellValue},on:{click:t.openSelector}}),t.type===t.SelectPeopleTypes.Free?a("user-list-popup",{attrs:{list:t.popupList,"show-search":!1,selecteds:[t.selected],title:t.selectorTitle},on:{itemClick:t.selectFreeConfirm},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}}):t._e(),t.type===t.SelectPeopleTypes.Fixed?a("popup-page",{directives:[{name:"phy-back",rawName:"v-phy-back",value:{status:t.show,method:"close"},expression:"{status: show, method: 'close'}"}],attrs:{value:t.show}},[a("v-header",{attrs:{slot:"header",title:"打回到指定步骤","back-action":t.close},slot:"header"}),a("div",{staticClass:"flow-list"},t._l(t.flow,(function(e,i){return a("div",{key:i,staticClass:"flow-item",class:{selected:e===t.selectedFlow},on:{click:function(a){t.selectFixedFlow(e,i)}}},[a("i",{staticClass:"iconfont icon-_shenpitongguo flow-left-icon"}),a("div",{staticClass:"item-content"},[a("div",{staticClass:"step_name"},[t._v(t._s(e.step_name))]),a("div",{staticClass:"approver"},[t._v(t._s(t.getApproverText(e)))])]),e===t.selectedFlow?a("i",{staticClass:"icon_selected iconfont icon-_xuanzhong"}):t._e()])})))],1):t._e()],1)])},k=[],C=(a("cc57"),a("6bfd")),S=a("7ee5"),j=a("eb48"),E={name:"FallbackSelector",components:{Cell:C["a"],UserListPopup:S["a"]},props:{label:{type:String,default:""},placeholder:{type:String,default:"非必选"},selectorTitle:{type:String,default:""},type:{type:String,default:j["a"].Free},flow:{type:Array,default:function(){return[]}},users:{type:Array,default:function(){return[]}}},data:function(){return{show:!1,selectIndex:-1,selected:null,selectedFlow:null,popupList:[],SelectPeopleTypes:j["a"]}},computed:{cellValue:function(){var t="";return this.type===j["a"].Free&&this.selected?t=this.selected.name+(this.selected.station_name?"(".concat(this.selected.station_name,")"):""):this.type===j["a"].Fixed&&this.selectedFlow&&(t=this.selectedFlow.step_name),t}},watch:{flow:{handler:function(t){t.length&&(this.selectedFlow=t[t.length-1])},immediate:!0}},mounted:function(){window.fallbackSelectorTest=this},methods:{openSelector:function(){this.show=!0,this.popupList=this.users},selectFreeConfirm:function(t,e){this.selected=t},close:function(){this.show=!1},getApproverText:function(t){var e=t.handler_list;return e&&e.length?e.map((function(t){return"".concat(t.approver.name,"(").concat(t.station.name,")")})).join("；"):""},selectFixedFlow:function(t,e){this.selectedFlow=t,this.show=!1}}},P=E,F=(a("790f"),Object(v["a"])(P,O,k,!1,null,"54bda078",null)),M=F.exports,T=a("6280"),D=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.formData?a("div",[a("div",{staticClass:"cell"},[a("van-cell-group",[a("van-cell",{staticClass:"field-label",attrs:{title:"反签证",value:"添加",clickable:""},on:{click:t.openForm}},[a("template",{slot:"title"},[a("span",{staticClass:"label"},[t._v("反签证")]),a("span",{directives:[{name:"show",rawName:"v-show",value:!t.value.length,expression:"!value.length"}],staticClass:"placeholder"},[t._v("非必填")])])],2),t._l(t.value,(function(e){return a("van-cell",{key:e.item_id,staticClass:"list-item",attrs:{title:e.contract_name,label:t.renderMoney(e.estimated_cost)},on:{click:function(a){t.editForm(e)}}},[a("i",{staticClass:"iconfont icon-1_you icon__arrow",attrs:{slot:"right-icon"},slot:"right-icon"})])}))],2)],1),a("popup-page",{directives:[{name:"phy-back",rawName:"v-phy-back",value:{status:t.show,method:"closeForm"},expression:"{status: show, method: 'closeForm'}"}],staticClass:"reverse-popup",attrs:{value:t.show}},[a("v-header",{attrs:{slot:"header",title:t.curEditItemId?"编辑反签证":"添加反签证","back-action":t.closeForm},slot:"header"},[t.curEditItemId?a("i",{staticClass:"iconfont icon-_shanchu-1 icon__delete",attrs:{slot:"right"},on:{click:t.deleteItem},slot:"right"}):t._e()]),a("form-comp",{attrs:{data:t.formData}}),t.isIOS?a("div",{staticClass:"tip"},[t._v("* 注：如需上传附件，请去电脑端操作")]):a("attachment",{ref:"attachment",attrs:{list:t.formAttachment}}),a("app-button-group",{attrs:{slot:"footer"},slot:"footer"},[a("app-button",{on:{click:t.submit}},[t._v("保存")])],1)],1)],1):t._e()},A=[],I=(a("e204"),a("b8da")),L=a("6892"),z=a("fe6f"),R=a("7bce"),N=a("a075");function B(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,i)}return a}function $(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?B(Object(a),!0).forEach((function(e){Object(s["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):B(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var U={name:"ReverseVisa",components:{SelectCell:I["a"],FormComp:_["a"],Attachment:L["a"]},props:{data:{type:Array,default:function(){return[]}},formData:{type:Object,default:null}},data:function(){return{value:[],show:!1,curEditItemId:"",formAttachment:[]}},computed:{dataModel:function(){return this.formData.dataModel},isIOS:function(){return Object(z["b"])()}},watch:{data:{handler:function(t){var e=this;this.value=t.map((function(t){var a={};for(var i in e.dataModel)a[i]=t[i],"contract_id"===i&&(a.contract_name=t.contract_name,a.contract_no=t.contract_no);return a.item_id=t.item_id,a.attachments=t.attachments||[],a}))},immediate:!0}},mounted:function(){window.reverseTest=this},methods:{renderMoney:function(t){return N["a"].number.format(N["a"].number.round(t),2)+"元"},openForm:function(){this.show=!0},closeForm:function(){this.show=!1,this.resetForm()},editForm:function(t){for(var e in this.show=!0,this.curEditItemId=t.item_id,this.formAttachment=t.attachments,t)if(e in this.dataModel){var a=this.dataModel[e];a.value=t[e],"contract_id"===e&&(a.text=t.contract_name,a.subtext=[t.contract_no])}},resetForm:function(){for(var t in this.dataModel){var e=this.dataModel[t];e.value="","contract_id"===t&&(e.text="",e.subtext=[])}this.curEditItemId="",this.formAttachment=[]},deleteItem:function(){var t=this;this.sui.confirm({message:"确认删除该反签证吗？",confirmButtonText:"确认删除"}).then((function(){var e=t.value.findIndex((function(e){return e.item_id===t.curEditItemId}));t.value.splice(e,1),t.resetForm(),t.show=!1}))},submit:function(){var t=this,e=R["b"].validate(this.dataModel),a=e.result,i=e.msg;if(a){var n=$({is_display:!0},R["b"].getFormValues(this.dataModel)),o=this.$refs.attachment;if(o){if(o.hasUploading())return void this.sui.toast("请等待附件上传完毕");n.attachments=o.getData()}else n.attachments=[];var r=this.dataModel.contract_id;if(n.contract_name=r.text,n.contract_no=r.subtext[0],this.curEditItemId){n.item_id=this.curEditItemId;var s=this.value.findIndex((function(e){return e.item_id===t.curEditItemId}));this.value.splice(s,1,n)}else n.item_id=N["a"].guid(),this.value.push(n);this.resetForm(),this.show=!1}else this.sui.toast(i)}}},Y=U,V=(a("3301"),Object(v["a"])(Y,D,A,!1,null,"67ab2812",null)),q=V.exports,H=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",["more"!==t.btnType?a("app-button",{staticClass:"main-btn btn",class:["invalidate"===t.actionCode?"red":"","type-"+t.actionCode],attrs:{plain:!!["invalidate","taskReport"].includes(t.actionCode)||t.plain},on:{click:t.handleClick}},[t._t("default")],2):a("div",{staticClass:"more-btn-item",class:["invalidate"===t.actionCode?"red":"","type-"+t.actionCode],on:{click:t.handleClick}},[a("i",{staticClass:"iconfont",class:t.iconClass}),t._t("default")],2)],1)},G=[],K={frontAddSign:"icon-_qianjiaqian",backAddSign:"icon-_houjiaqian",reAssign:"icon-_zhuanjiao",invalidate:"icon--zuofei red"},X={name:"ActionButton",props:{plain:{type:Boolean,default:!1},btnType:{type:String,default:""},actionCode:{type:String,default:""}},computed:{iconClass:function(){return K[this.actionCode]}},methods:{handleClick:function(){this.$emit("click")}}},W=X,J=(a("9d03"),Object(v["a"])(W,H,G,!1,null,"401b220c",null)),Z=J.exports,Q=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("app-button",{on:{click:t.handleClick}},[t._t("default")],2)},tt=[],et=a("3e83"),at=a("5bbb"),it=(a("e697"),a("b23b")),nt=a("540c"),ot=a("8935"),rt=a("da71"),st=a("ab3e"),ct=a("a18c"),lt=a("cae8"),ut=a("6b45"),dt=a("986e"),pt=a("db68"),ft=a("3ec3"),ht=a("bc32");function mt(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,i)}return a}function bt(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?mt(Object(a),!0).forEach((function(e){Object(s["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):mt(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var gt="worksheet_sign",vt={actionLoading:!1,postData:function(t){var e=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this.actionLoading)return p["a"].reject();this.actionLoading=1,setTimeout((function(){this.actionLoading=0}),2e3);var i="";return i=1==a.is_into_erp?rt["a"].erp_workflow_action:rt["a"].workflow_action,Object(st["a"])({url:i,data:bt(bt({},t),{},{error:!0}),addContentType:!0}).then((function(a){if(e.actionLoading=0,1==a.success){var i,n=ct["a"].history.current,o=ct["a"].history.current.query;if(i=a.data&&a.data.change_type?a.data.change_type:o.change_type,"invalidate"===t.proc_action||"reTerminate"===t.proc_action){var r=n.query,s=(r.msg_id,Object(it["a"])(r,["msg_id"])),c=a.data,l={};if(c){var u=pt["b"].store.getValueByKey("biz_type"),d=c[ft["a"][u].sheetIdKey];l={id:d},i&&(l.change_type=i)}setTimeout((function(){dt["a"].$emit("page-reinit",c?{query:bt(bt({},s),l)}:{})}),500)}else if("undo"!==t.proc_action&&"reSubmit"!==t.proc_action)dt["a"].$emit("page-reinit");else if("undo"===t.proc_action||"reSubmit"===t.proc_action){var f=pt["b"].store.getValueByKey("biz_type"),h=a.data[ft["a"][f].sheetIdKey],m={id:h};i&&(m.change_type=i),ct["a"].replace({name:Object(lt["b"])(f,"Edit",i),query:m})}return e.actionLoading=0,p["a"].resolve()}return e.actionLoading=0,p["a"].reject("操作失败")})).catch((function(t){return e.actionLoading=0,console.log(t),p["a"].reject(t.message||"操作失败")}))},refreshUsers:function(t){var e=t.project_id,a=void 0===e?"":e,i=t.contract,n=void 0===i?null:i,o=t.biz_type,r=t.change_type,s=void 0===r?"":r,c=t.params,l=void 0===c?null:c;return l?j["b"].getUsersByProjectId(bt(bt({},l),{},{biz_type:o,change_type:s})):a?j["b"].getUsersByProjectId({project_id:a,biz_type:o,change_type:s}):j["b"].getUsersByContract(n)},getFlow:function(t){var e=t.flow?j["a"].Fixed:j["a"].Free;if(e===j["a"].Free)return j["b"].FreeService.getSelecteds({detail:t}).then((function(e){return{type:w["a"].Free,selecteds:e,flowInfo:{type:w["a"].Free,sign_mode:t.sign_mode||"erp"}}}));if(e===j["a"].Fixed){var a=t.flow,i=j["b"].FixedService.getSelecteds({flows:a.flow,detail:t});return p["a"].resolve({type:w["a"].Fixed,flowInfo:a,selecteds:i})}},getProcessDepartmentField:function(t,e){return Object(u["n"])({codes:[gt]}).then((function(a){var i=a.data;if(!i[0]||!i[0].layout)return null;var n=Object(ht["a"])(i[0].layout),o=n.groups[0].list[0],r=o.options[0],s=r.url;return s?Object(st["a"])({url:["获取经办部门选项",s],data:{biz_id:t,proc_type_id:ft["a"][e].procTypeId||""}}).then((function(t){var e=r.text,a=r.value;return o.options=o.data=t.data.map((function(t){var i={};return i.text=t[e],i.value=t[a],i})),o})):null}))},getLastApprove:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e={},a=t.proc_instances[0],i=0;i<a.length;i++)if(0==a[i].status||2==a[i].status||6==a[i].status){e=a[i];break}return 0==e.status&&1==e.sp_timeout&&1==e.sp_timeout_reason_open||!(!t||!t.sp_timeout_reason_open)},getLayout:function(t,e){var a=ot["d"];if(a.approveTimeOutReason.actionList.indexOf(t)>=0&&this.getLastApprove(e))return a.approveTimeOutReason.layout},handlePublicLayout:function(t,e){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=[],n=[];return t.groups&&(n=t.groups),t.subForms&&n.push({groupName:"",list:t.subForms}),n.forEach((function(t){var n={groupName:t.groupName,list:[]};t.list&&t.list.forEach((function(t){var i=null;(!t.action||t.action&&t.action.indexOf(e)>=0)&&(i=Object.assign(t),i.relationDetail&&(i.value=i.text=i.relationDetailId?a[i.relationDetailId]:a[i.id]),R["b"].formatFieldForEdit(i,i.value),n.list.push(i))})),n.list.length>=0&&i.push(n)})),i},getFallbackUsers:function(t){var e=[],a="",i=[];if(t.flow&&"1"===t.flow.type)return a=j["a"].Fixed,t.flow.flow&&Array.isArray(t.flow.flow)&&t.flow.flow.some((function(t){if(1!==+t.approve)return!0;i.push(t)})),Promise.resolve({type:a,flow:i});if(t.back_to_ids&&t.back_to_ids.length){a=j["a"].Free,e=t.back_to_ids;var n=[];return nt["a"].getUsersByIds(e).then((function(i){return e.forEach((function(e){var a=i.find((function(t){return t.user_id===e})),o={},r=t.contract_info;r&&r.user_ids&&(o=r.user_ids.find((function(t){return t.user_id===e}))),n.push(Object(ut["a"])(o,a))})),{type:a,users:n}}))}}},xt=a("933f");function yt(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,i)}return a}function _t(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?yt(Object(a),!0).forEach((function(e){Object(s["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):yt(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var wt,Ot={name:"ApproveButton",props:{action:{type:String,default:""},page:{type:String,default:""},actionData:{type:Object,default:function(){}},sheet:{type:Object,default:function(){}},isResetFlow:{type:Boolean,default:!1},actionConfig:{type:Object,default:null},getApproveRefs:{type:Function,require:!0},repeat_proc_config:{type:Object,default:null}},data:function(){return{}},inject:{beforeClick:{from:"approveSubmitBeforeClick",default:function(){return function(){return!0}}}},mounted:function(){window.approveButton=this},methods:{handleClick:function(){var t=this;return this.beforeClick.hasOwnProperty("then")?this.beforeClick.then((function(){return t.submit()})):this.beforeClick()?this.submit():void 0},handlerComponents:function(t){var e=this,a=this.getApproveRefs(),i=a.COMMENT,n=a.ADD_SIGN,o=a.SELECT_PEOPLE,r=a.CC_PEOPLE,s=a.FALLBACK,c=a.ATTACHMENT,l=a.PICTURE,u=a.PROCESS_DEPARTMENT,d=a.FORM,p=a.REVERSE_VISA,f=a.PRICE_SHEET_MATERIAL,h=a.JZC_CLAPPLY_SUB_FORM,m=a.TASK_COMMENT,b=this.actionConfig.components,g=function(t){var a={},i=t.data.dataModel,n=R["b"].validate(i),o=n.result,r=n.msg;if(!o)return e.sui.toast(r),!1;var s=function(t){var a=i[t];if(a.add){var n,o=a.valueObj.some((function(t,e){if(!t||!t.__validated)return n="请补充第".concat(e+1,"个").concat(a.label,"信息"),!0}));if(o)return e.sui.toast(n),{v:!1}}};for(var c in i){var l=s(c);if("object"===Object(et["a"])(l))return l.v}return a=R["b"].getFormValuesForSave(i),a};if(t.proc_action=this.action,t.__form="mobile",i&&(t.sp_remark=i.value,b[ot["c"].COMMENT]&&1===b[ot["c"].COMMENT].req&&!t.sp_remark.length))this.sui.toast(b[ot["c"].COMMENT].errMsg);else if(m&&(t.description=m.value,b[ot["c"].TASK_COMMENT]&&1===b[ot["c"].TASK_COMMENT].req&&!t.description.length))this.sui.toast(b[ot["c"].TASK_COMMENT].errMsg);else{if(s){if(this.sheet.flow&&"1"===this.sheet.flow.type&&s.selectedFlow){var v=s.selectedFlow;if(1===b[ot["c"].FALLBACK].req&&!v)return void this.sui.toast("请选择打回到谁");t.back_to_tmpl=v}else{var x=s.selected;if(1===b[ot["c"].FALLBACK].req&&!x)return void this.sui.toast("请选择打回到谁");t.approver_ids=[{approver_id:x.user_id}]}this.repeat_proc_config&&this.repeat_proc_config.hide_repeat_proc?t.repeat_proc=this.repeat_proc_config.repeat_proc:t.repeat_proc=+this.isResetFlow}if(f&&f.editable){var y=f.validateRequirement(),_=y.flag;if(!_)return this.sui.toast("请先审核材料清单"),!1;t.sp_material_item_list=f.getData()}if(h&&h.editable){var O=h.validateRequirement(),k=O.flag;if(!k)return this.sui.toast("请先审核材料清单"),!1;t.sp_sub_form_jzc_clapply=h.getSpFullData()}if(d){var C=g(d);if(!C)return;t=_t(_t({},t),C)}if(u)try{if(b[ot["c"].PROCESS_DEPARTMENT].req&&!u.value)return this.sui.toast("请选择经办部门"),Promise.reject();t.ext_form_data=t.ext_form_data||{},t.ext_form_data[u.id]=u.value||""}catch(A){console.log(A)}if(p&&(t.negative_visa_list=p.value),!n||(t.sub_flow={type:"3",flow:[]},t.sub_flow.flow=n.getData().map((function(t){return{approver:{approver_id:t.approver_id}}})),0!==t.sub_flow.flow.length)){if(o)if(o.type===w["a"].Fixed){var S=o.validateSelectPeople(),j=S.flag,E=S.msg;if(!j)return void this.sui.toast(E||"请选择确认人");t.flow=o.getFixedData()}else{var P="approver_ids";if(t.proc_action===ot["b"].tcTransfer){P="receive_user_ids";var F=o.getFreeData();Array.isArray(F)&&(t[P]=F.map((function(t){return t.approver_id})))}else t[P]=o.getFreeData();if(b[ot["c"].SELECT_PEOPLE].req&&0===t[P].length)return void this.sui.toast("请选择".concat(b[ot["c"].SELECT_PEOPLE].name));var M=o.checkFreeFlow(),T=M.flag,D=M.msg;if(!T)return void this.sui.toast(D)}if(t.cc_user_ids=[],r&&(t.cc_user_ids=r.selecteds.map((function(t){return t.user_id}))),c){if(c.hasUploading())return void this.sui.toast("请等待附件上传完毕");t.sp_attachments=c.getData()}if(l){if(l.hasUploading())return this.sui.toast("请等待图片上传完毕"),!1;t.sp_images=l.getData()}return t}this.sui.toast("请选择".concat(b[ot["c"].ADD_SIGN].name))}},_report:function(){switch(this.action){case ot["b"].submit:xt["a"].idkey(xt["a"].idkeys.detailClickSubmit);break;case ot["b"].terminate:xt["a"].idkey(xt["a"].idkeys.detailClickTerminate);break;case ot["b"].reAssign:xt["a"].idkey(xt["a"].idkeys.detailClickReAssign);break;case ot["b"].rollBack:xt["a"].idkey(xt["a"].idkeys.detailClickRollBack);break;case ot["b"].frontAddSign:xt["a"].idkey(xt["a"].idkeys.detailClickFrontAddSign);break;case ot["b"].backAddSign:xt["a"].idkey(xt["a"].idkeys.detailClickBackAddSign);break;case ot["b"].taskConfirm:case ot["b"].taskComplete:case ot["b"].complete:xt["a"].idkey(xt["a"].idkeys.detailClickComplete);break;case ot["b"].tcTransfer:xt["a"].idkey(xt["a"].idkeys.detailClickTcTransfer);break;case ot["b"].taskReport:xt["a"].idkey(xt["a"].idkeys.detailClickTaskReport);break;case ot["b"].sign:xt["a"].idkey(xt["a"].idkeys.detailClickSign);break;case ot["b"].resetNextUser:xt["a"].idkey(xt["a"].idkeys.detailClickResetNextUser);break;case ot["b"].invalidate:xt["a"].idkey(xt["a"].idkeys.detailClickInvalidate);break;case ot["b"].reSubmit:xt["a"].idkey(xt["a"].idkeys.detailClickResubmit);break}},submit:function(){var t=this;this._report();var e=Object(at["a"])(this.actionData);if(e.proc_action=this.action,!this.actionConfig||"object"!==Object(et["a"])(this.actionConfig)||(e=this.handlerComponents(e),e))return vt.postData(e,{is_into_erp:this.sheet.is_into_erp}).then((function(){t.sui.hideIndicator();var e="";switch(t.action){case ot["b"].sign:e="签发成功";break;case ot["b"].complete:e="审批归档成功";break;case ot["b"].invalidate:case ot["b"].reTerminate:e="操作成功";break}e&&t.sui.toast(e),t.$emit("submit-success")})).catch((function(e){console.warn(e),t.$emit("submit-failed")}))}}},kt=Ot,Ct=(a("ed8b"),Object(v["a"])(kt,Q,tt,!1,null,"6569ce85",null)),St=Ct.exports,jt=a("af76"),Et=a("4a2a"),Pt=a("7b41"),Ft=a("2aa4"),Mt=a("1f0e"),Tt=a("d759"),Dt=a("5fe8"),At=a("a740"),It=a("b0b4"),Lt=a("f04f"),zt=a("0fc6");function Rt(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,i)}return a}function Nt(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?Rt(Object(a),!0).forEach((function(e){Object(s["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):Rt(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var Bt=w["a"].Free,$t="edit",Ut="sp_worksheet_visa_reverse_edit",Yt="sub_form_jzc_clapply_view",Vt=(wt={},Object(s["a"])(wt,Dt["a"].WORK_SHEET,["worksheet_id","change_overview","contract_id"]),Object(s["a"])(wt,Dt["a"].PRE_CONFIRM_SHEET,["pre_confirmsheet_id","change_overview","contract_id"]),Object(s["a"])(wt,Dt["a"].MEETING_RECORD,["meeting_id","meeting_subject","contract_id"]),Object(s["a"])(wt,Dt["a"].JZC_CLAPPLY,["apply_id","subject","contract_id"]),wt),qt={name:"ApprovePopup",components:{FastReply:y,FormComp:_["a"],SelectPeople:w["b"],UserSelector:T["a"],FallbackSelector:M,ReverseVisa:q,ApproveButton:St,AfCell:C["a"],ActionButton:Z,BizSelector:Et["a"],attachment:L["a"],uploadImages:Pt["a"],SpSubForm:Ft["a"]},props:{plain:{type:Boolean,default:!1},btnType:{type:String,default:""},spConfig:{type:Object,require:!0},sheet:{type:Object,require:!0},getSheetRefs:{type:Function,default:function(){return{}}},actionData:{type:Object,default:function(){return null}}},data:function(){return{show:!1,AddSignSelectPeopleType:Bt,isInitialized:!1,showStartBiz:!1,store:f["a"],CY:ot["c"],ACTION_TYPE:ot["b"],formData:null,selectPeople:{},onlySelectPeople:[],allUser:[],reverseForm:null,processDepartment:null,fallbackTo:{type:"",users:[],flow:[]},priceSheetMaterial:null,jzcClapplySubForm:null,actionConfig:Object(at["a"])(ot["a"][this.spConfig.action]),isResetFlow:!1,repeat_proc_config:null,comment:"",tackComment:"",uploadimages:[],relationLayout:null,isFixedBottom:!1}},inject:{getSheetData:{from:"getSheetData",default:function(){}},beforeClick:{from:"approveBeforeClick",default:function(){return!0}}},computed:{actionCode:function(){return this.spConfig.action},components:function(){return this.actionConfig?this.actionConfig.components:{}},hideSelectPeople:function(){return this.actionCode===ot["b"].frontAddSign&&this.sheet.sp_action.some((function(t){return t.action===ot["b"].sign||t.action===ot["b"].complete}))},addSignRollBackUser:function(){if(this.components[ot["c"].ADDSIGN_ROLLBACK]&&this.sheet.sub_flow&&"3"===this.sheet.sub_flow.type){var t=this.sheet.sub_flow.parent_node,e=t.user_name,a=t.station_name;return e+(a?"(".concat(a,")"):"")}},showResetFLow:function(){return!this.repeat_proc_config||!this.repeat_proc_config.hide_repeat_proc},ableToStartBiz:function(){return Vt[this.store.bizType]&&this.spConfig.data&&this.spConfig.data.related_biz_list&&this.spConfig.data.related_biz_list.length>0},startBizOptions:function(){return this.ableToStartBiz?this.spConfig.data.related_biz_list.map((function(t){return Nt(Nt({},t),{},{key:t.biz_type})})):[]},users:function(){if(this.sheet&&this.sheet.task_proc_group){var t=Object(r["a"])(this.sheet.task_proc_group,3),e=(t[0],t[1]),a=t[2],i=[];try{e.task_list.forEach((function(t){i.push(t)})),a.task_list.forEach((function(t){i.push(t)}))}catch(o){}var n=i.map((function(t){return t.user_info}));return this.allUser.filter((function(t){for(var e=0;e<n.length;e++){var a=n[e];if(t.user_id===a.user_id)return}return!0}))}return this.allUser},keyboardInfo:function(){return this.$store.state.device.keyboardInfo}},watch:{isInitialized:function(t){var e=this;t&&this.$nextTick((function(){if(e.$refs.PopupContent){var t=e.$refs.PopupContent.offsetHeight;e.isFixedBottom=t>window.outerHeight-200}}))}},mounted:function(){window.approvePopupTest=this},methods:{getApproveRefs:function(){return this.$refs},handleClick:function(){if(this.beforeClick(this.actionCode)){if(!0===this.actionConfig)this.handleSimpleAction();else if(Object(z["b"])()&&this.actionCode===ot["b"].accept)this.sui.alert({message:"有必须上传的签收附件,请去电脑端登录工程协同网址进行签收。",confirmButtonText:"我知道了"});else{if(~[ot["b"].sign,ot["b"].complete,ot["b"].backAddSign,ot["b"].addSignPass,ot["b"].submit].indexOf(this.actionCode)&&this.sheet.process_payment&&this.getSheetRefs().paymentProcess){var t=this.getSheetRefs().paymentProcess.getData();if(!t)return}this.isInitialized||this.handlePopupAction(),this.show=!0}this.$emit("click")}},handleSimpleAction:function(){var t=this;switch(this._report(),this.actionCode){case ot["b"].undo:case ot["b"].reSign:return this.sui.confirm("确定".concat(this.spConfig.actionName,"吗？"),(function(){return t.$refs.CP_APPROVE_BUTTON.submit()})),!1;case ot["b"].startUpRelatedBiz:return this.handlerStartRelateBiz(),!1;case ot["b"].sheetConfirm:return this.handleSheetConfirm(),!1}this.$refs.CP_APPROVE_BUTTON.submit()},handlerStartRelateBiz:function(){this.ableToStartBiz?this.sheet.unlock_info&&this.sheet.unlock_info.is_sheet_timeout?Object(jt["a"])().openPopup({msg:this.sheet.unlock_info.unlock_warning_msg}):this.startBizOptions.length>1?this.showStartBiz=!0:this.redirectToBiz(this.startBizOptions[0]):this.sui.toast("未支持的审批业务类型")},redirectToBiz:function(t){var e=this,a=Object(lt["b"])(t.biz_type,"Add",t.change_type),i=Array.isArray(this.sheet.contract_info)?this.sheet.contract_info[0]:this.sheet.contract_info,n=Vt[this.store.bizType].reduce((function(t,a){return a in e.sheet?t[a]=e.sheet[a]:a in i&&(t[a]=i[a]),t}),{});t.change_type&&(n.change_type=t.change_type);var o={params:JSON.stringify(n)};t.change_type&&(o.change_type=t.change_type),this.$router.replace({name:a,query:o})},handleSheetConfirm:function(){var t=this;if(!this.sheet.unlock_info||!this.sheet.unlock_info.is_sheet_timeout)return Tt["a"].getContract(this.sheet.contract_id).then((function(e){if("已结算"===e.xt_js_state){var a="合同已结算, 不能再发起完工确认单";return t.sui.toast(a)}var i={contract_id:t.sheet.contract_id,worksheet_id:t.sheet.worksheet_id,change_type:t.changeType};t.$router.replace({name:Object(lt["b"])(Dt["a"].CONFIRMSHEET,"Add",t.store.changeType),query:{params:JSON.stringify(i),change_type:t.store.changeType}})}));Object(jt["a"])().openPopup({msg:this.sheet.unlock_info.unlock_warning_msg})},handlePopupAction:function(){var t=this,e=this.sui.showIndicator(),a=Object(At["b"])(),i=this.custom_setting?a.repeat_proc:null;if(i)for(var n=0;n<i.length;n++){var o=i[n];if(o.biz_type===this.store.bizType){this.repeat_proc_config=o;break}}this.initComment();var r=this.getSheetRefs().material_item_list;this.store.bizType===Dt["a"].PRICE_SHEET&&this.components[ot["c"].PRICE_SHEET_MATERIAL]&&r&&(this.priceSheetMaterial=Object(at["a"])(r.$attrs));var s=[this.initForm()],c=ft["a"][this.store.bizType].detail.relationLayout;c&&s.push(this.initFormRelations(c));var l=ft["a"][this.store.bizType].detail;this.actionCode===ot["b"].sign&&l&&l.needProcessDeparment&&s.push(this.initProcessDepartment()),"正签证"===this.sheet.visa_type&&s.push(this.initReverseVisa()),(this.components[ot["c"].SELECT_PEOPLE]||this.components[ot["c"].ADD_SIGN]||this.components[ot["c"].CC_PEOPLE])&&s.push(this.initUsers()),this.components[ot["c"].SELECT_PEOPLE]&&s.push(this.initSelectPeople()),this.components[ot["c"].FALLBACK]&&s.push(this.initFallBackTo()),this.store.bizType===Dt["a"].JZC_CLAPPLY&&this.components[ot["c"].JZC_CLAPPLY_SUB_FORM]&&s.push(Lt["a"].getSubFormSetting({layoutId:Yt,bizType:this.store.bizType,changeType:this.store.changeType}).then((function(e){e.isSpMode=!0,e.data=t.sheet.sub_form_jzc_clapply||[],e&&e.isEnable&&e.data.length&&(t.jzcClapplySubForm=e)}))),p["a"].all(s).then((function(){t.isInitialized=!0,e.clear()})).catch((function(t){console.error(t),e.clear()}))},initComment:function(){var t=this.actionConfig.components[ot["c"].COMMENT];t&&this.actionCode===ot["b"].sign&&(this.store.bizType===Dt["a"].MEETING_RECORD&&(t.title="签发后流程将结束"),1===this.sheet.is_into_erp&&(t.title=t.wcbTitle))},initForm:function(){var t=this;return Mt["c"].getSpLayout({biz_type:this.store.bizType,change_type:this.store.changeType,layout_type:$t}).then((function(e){if(e){var a=[],i=vt.getLayout(t.actionCode,t.sheet)||null;i&&a.push(i);var n=vt.handlePublicLayout(e,t.actionCode,t.sheet)||null;n&&(a=[].concat(Object(o["a"])(a),Object(o["a"])(n))),t.formData=Mt["c"].layout2Obj(a,"SP_".concat($t,"_").concat(ft["a"][t.store.bizType].bizName));var r=t.actionData.erpOptions||[];for(var s in t.formData.dataModel){var c=t.formData.dataModel[s],l=c.defaultForm;l&&R["b"].fillErpOptions(r,c.defaultForm.dataModel)}for(var u in t.formData.dataModel){var d=t.formData.dataModel[u];Object(It["a"])(d,t.sheet)}}}))},initFormRelations:function(t){var e=this;return Mt["c"].getLayout([t]).then((function(a){var i=a[t];e.relationLayout=i}))},initUsers:function(){var t=this,e=this.getSheetData(),a=e.sheetFormLayout,i=e.formData,n=a.relativeFlow,o=null,r={biz_type:this.store.bizType,change_type:this.store.changeType};return n&&n.role?o=n.role.reduce((function(t,e){var a,n=i.dataModel[e];return n?("project_id"===e?(a=n.valueObj[0].project_id,t[e]=a):(a=n.valueObj.map((function(t){return t.company_guid}))||[],t.company_guids=t.company_guids?t.company_guids.concat(a):a),t):t}),{}):this.isProjectMode()?r.project_id=Object(zt["a"])(f["a"].project):r.contract=f["a"].contracts,vt.refreshUsers(Nt({params:o},r)).then((function(e){t.allUser=e}))},initSelectPeople:function(){var t=this;return vt.getFlow(this.sheet).then((function(e){t.selectPeople=e}))},initReverseVisa:function(){var t=this;return Mt["c"].getLayout(Ut,null,!0).then((function(t){var e=t[Ut];return Mt["c"].getLayoutData(Ut,e)})).then((function(e){e&&("contract_id"in e.dataModel&&(e.dataModel.contract_id.pagingFun=Tt["a"].pagingFunStandardContract),t.reverseForm=e)}))},initProcessDepartment:function(){var t=this;return vt.getProcessDepartmentField(this.sheet.worksheet_id,this.store.bizType).then((function(e){if(e){var a=e;a.data=e.options;var i=e.options;1===i.length&&(a.value=i[0].value,a.text=i[0].text),t.processDepartment=a}}))},initFallBackTo:function(){var t=this;return vt.getFallbackUsers(this.sheet).then((function(e){t.fallbackTo=e}))},submitSuccess:function(){this.show=!1,this.isInitialized=!1},isProjectMode:function(){return ft["a"][this.store.bizType].isProjectMode},onSubFormChange:function(t,e){this.relationLayout&&(this.handlerCompRelations({ref:t,data:e}),this.formData&&R["b"].triggerAllRelations(this.formData))},handlerCompRelations:function(t){var e=this,a=t.ref,i=t.data,n={material_form:{ref:"PRICE_SHEET_MATERIAL",valueObj:null},sub_form_jzc_clapply:{ref:"JZC_CLAPPLY_SUB_FORM",valueObj:null},sp_form:{ref:"FORM",valueObj:null}},o=function(t){if(n[t].valueObj)return n[t].valueObj;var o=null,r=n[t].ref,s=e.$refs;if(r===a)o=i;else switch(t){case"material_form":o=s[r].getData();break;case"sub_form_jzc_clapply":o=s[r].getData();break;case"sp_form":o=R["b"].getFormValues(e.formData.dataModel);break}return n[t].valueObj=o,o};this.relationLayout.forEach((function(t){var i=t.target_comp,s=t.target_id,c=t.calc_method,l=!1,u=!0,d=c.replace(/\[{(.+?)}\]|{{(.+?)}}/g,(function(t,e,i){var s="["===t.slice(0,1),c=s?e:i,d=c.split("."),p=Object(r["a"])(d,2),f=p[0],h=p[1],m=o(f);return a===n[f].ref&&(l=!0),null===m?(console.error("不合法表达式"),void(u=!1)):s?m.reduce((function(t,e){return t+=Number(e[h]),t}),0):m[h]}));if(l&&u){var p=null;try{var f=Function;p=+parseFloat(new f("return "+d)()).toPrecision(12)}catch(m){return void console.error(m)}switch(i){case"sp_form":if(e.formData){var h=e.formData.dataModel[s];h&&R["b"].formatFieldForEdit(h,p)}break}}}))},close:function(){this.show=!1},_report:function(){switch(this.actionCode){case ot["b"].undo:xt["a"].idkey(xt["a"].idkeys.detailClickUndo);break;case ot["b"].reSign:xt["a"].idkey(xt["a"].idkeys.detailClickReSign);break}}}},Ht=qt,Gt=(a("a69e"),Object(v["a"])(Ht,i,n,!1,null,"4ec4600c",null));e["a"]=Gt.exports},fc8d:function(t,e,a){e=t.exports=a("690e")(!1),e.push([t.i,".gcxt .biz-selector-popup[data-v-6ff5fdc2]{border-top:0!important;border-radius:5px 5px 0 0;background:#fff;padding:0 4px}.gcxt .biz-types-wrap[data-v-6ff5fdc2]{padding-bottom:70px}.gcxt .biz-type-content[data-v-6ff5fdc2]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-flow:row wrap;flex-flow:row wrap}.gcxt .biz-type-content.count-1[data-v-6ff5fdc2],.gcxt .biz-type-content.count-2[data-v-6ff5fdc2]{-ms-flex-pack:distribute;justify-content:space-around}.gcxt .biz-type-content .item[data-v-6ff5fdc2]{-webkit-box-flex:0;-ms-flex:0 0 33.33%;flex:0 0 33.33%;text-align:center;padding:15px 7.5px 0 7.5px;-webkit-box-flex:1;-ms-flex-positive:1;flex-grow:1}.gcxt .biz-type-content .biz-icon[data-v-6ff5fdc2]{display:block;margin:0 auto}.gcxt .biz-type-content .biz-icon>.iconfont[data-v-6ff5fdc2]{font-size:45px;color:#57a7f3}.gcxt .biz-type-content .name[data-v-6ff5fdc2]{font-size:14px;color:#000}.gcxt .biz-type-content .desc[data-v-6ff5fdc2]{font-size:12px;color:#666}.gcxt .close-btn[data-v-6ff5fdc2]{position:absolute;z-index:1;left:50%;-webkit-transform:translateX(-50%);transform:translateX(-50%);bottom:20px;text-align:center;font-size:15px;color:#999;padding:10px 20px}",""])},fdbe:function(t,e,a){var i=a("b145");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var n=a("85cb").default;n("389860b7",i,!0,{sourceMap:!1,shadowMode:!1})}}]);