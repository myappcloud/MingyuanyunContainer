(window["webpackJsonp_module_entry_gcxt_"]=window["webpackJsonp_module_entry_gcxt_"]||[]).push([["chunk-0b4e9a64"],{"0337":function(t,e,a){var i=a("8327");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var s=a("85cb").default;s("48041e36",i,!0,{sourceMap:!1,shadowMode:!1})},"648c":function(t,e,a){"use strict";a.d(e,"c",(function(){return n})),a.d(e,"b",(function(){return o})),a.d(e,"a",(function(){return c})),a.d(e,"d",(function(){return r}));var i=a("ab3e"),s=a("da71");function n(t){return Object(i["a"])({url:s["a"].get_update_info})}function o(t){return Object(i["a"])({url:s["a"].get_msg_list,data:t})}function c(t){return Object(i["a"])({url:s["a"].get_last_version,data:t})}function r(t){return Object(i["a"])({url:s["a"].get_erp_statement_by_msg_id,data:t})}},7010:function(t,e,a){"use strict";a("0337")},"80e6":function(t,e,a){t.exports=a.p+"img/no_todo.c7ca1ef3.png"},8327:function(t,e,a){var i=a("5454");e=t.exports=a("690e")(!1),e.push([t.i,'@charset "UTF-8";.gcxt[data-v-7c90527e] :export{colorPrimary:#0268b3;headerBackgroundColor:#fff;headerTextColor:#333}.gcxt .list-block ul li[biz_type="9"][data-v-7c90527e]{background:#fff}.gcxt .list-block ul li[biz_type="9"] .item-subtitle[data-v-7c90527e]{overflow:hidden;white-space:nowrap}.gcxt .list-block ul li.msg_status_1 .item-title[data-v-7c90527e]{color:#999}.gcxt .list-block ul li[biz_type="9"] .item-title[data-v-7c90527e]{color:#333}.gcxt .list-block ul li.msg_status_1 .item-subtitle[data-v-7c90527e]{color:#999}.gcxt .list-block ul[data-v-7c90527e]:after,.gcxt .list-block ul[data-v-7c90527e]:before{display:none}.gcxt .item-time[data-v-7c90527e]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;font-size:.6rem;color:#999;height:1.3rem;line-height:1.3rem;-ms-flex-negative:0;flex-shrink:0;-webkit-flex-shrink:0}.gcxt .xt-ios .item-time[data-v-7c90527e]{font-size:.65rem}.gcxt .item-title-row[data-v-7c90527e]{padding:0}.gcxt .show-history[data-v-7c90527e]{display:none}.gcxt .buttons-tab[data-v-7c90527e]{position:absolute;left:0;width:100%;top:2.2rem;z-index:1}.gcxt .page .content[data-v-7c90527e]{top:2.2rem;padding-bottom:0}.gcxt .has-sys-msg .content[data-v-7c90527e]{top:3.8rem}.gcxt .xt-ios .bar-nav~.content[data-v-7c90527e]{top:2.9rem}.gcxt .xt-ios .has-sys-msg .content[data-v-7c90527e]{top:4.5rem}.gcxt .has-overtime .content[data-v-7c90527e]{top:4.9rem}.gcxt .xt-ios .has-overtime .content[data-v-7c90527e]{top:5.6rem}.gcxt .has-sys-msg.has-overtime .content[data-v-7c90527e]{top:6.5rem}.gcxt .xt-ios .has-sys-msg.has-overtime .content[data-v-7c90527e]{top:7.2rem}.gcxt #msg_list .no-new[data-v-7c90527e],.gcxt #msg_todo_list .no-new[data-v-7c90527e]{position:absolute;top:100px;padding-top:235px;width:100%;background-repeat:no-repeat;background-position:bottom;background-size:45%;font-size:.8rem;color:#666;text-align:center;background-image:url('+i(a("80e6"))+')}.gcxt .unread[data-v-7c90527e]{position:relative}.gcxt .unread[data-v-7c90527e]:before{position:absolute;right:0;top:0;width:10px;height:10px;background:#f83b37;border-radius:50%;content:""}.gcxt #msg_list li[data-v-7c90527e],.gcxt #msg_todo_list li[data-v-7c90527e]{position:relative;padding-left:0}.gcxt #msg_list .iconfont[data-v-7c90527e],.gcxt #msg_todo_list .iconfont[data-v-7c90527e]{display:inline-block;width:40px;height:40px;font-size:40px;text-align:center;line-height:40px}.gcxt #msg_list .item-subtitle[data-v-7c90527e],.gcxt #msg_todo_list .item-subtitle[data-v-7c90527e]{padding:3px 0 0}.gcxt .item-title-row[data-v-7c90527e]{min-height:21px;line-height:21px;font-size:15px}.gcxt #msg-detail[data-v-7c90527e]{overflow:initial}.gcxt .item-status[data-v-7c90527e]{line-height:21px;float:right;font-size:14px;right:14px;bottom:16px;color:#509afa}.gcxt .item-status.danger[data-v-7c90527e]{color:#d0021b}.gcxt .item-date[data-v-7c90527e],.gcxt .item-desc[data-v-7c90527e]{padding-right:15px;float:left}.gcxt #page-home .overtime-tabs .tab.active .tab-contain[data-v-7c90527e]{background-color:#509afa;color:#fff}.gcxt #page-home .tab-contain[data-v-7c90527e]{display:inline-block;padding:2px 11px;min-width:0;color:#69696e;border-radius:100px;line-height:20px}.gcxt .overtime-tabs .tab[data-v-7c90527e]{-webkit-box-flex:initial;-ms-flex:initial;flex:initial;-webkit-flex:initial;width:33%}.gcxt .overtime-tips[data-v-7c90527e]{margin:0 5px 0 0;position:relative;width:11px;height:16px}.gcxt .overtime-tips[data-v-7c90527e]:after{position:absolute;border-radius:4px;padding:2px;width:12px;height:12px;font-size:12px;line-height:12px;left:0;top:2px;text-align:center}.gcxt .overtime-tips.yellow[data-v-7c90527e]{background-color:transparent}.gcxt .overtime-tips.yellow[data-v-7c90527e]:after{content:"\\8B66";background-color:#faa304}.gcxt .overtime-tips.red[data-v-7c90527e]{background-color:transparent}.gcxt .overtime-tips.red[data-v-7c90527e]:after{content:"\\8D85";background-color:#fc5a14}.gcxt #msg_list li[data-v-7c90527e],.gcxt #msg_todo_list li[data-v-7c90527e],.gcxt .set-done[data-v-7c90527e]{-webkit-transition:.1s;transition:.1s}.gcxt #msg_list .item-status[data-v-7c90527e]{display:none}.gcxt .set-done[data-v-7c90527e]{width:100px;position:absolute;right:-100px;top:0;height:100%;display:none;-webkit-box-align:center;-webkit-box-pack:center;color:#fff;background-color:#c7c7cc}.gcxt .swipe .set-done[data-v-7c90527e]{display:-webkit-box}.gcxt .swipe[data-v-7c90527e]{transform:translate3d(-100px,0,0);-webkit-transform:translate3d(-100px,0,0)}.gcxt .sys-msg[data-v-7c90527e]{position:absolute;left:0;bottom:0;width:100%;background:#fff1ad;color:#333;font-size:.7rem;padding-left:.75rem;height:32px;line-height:32px;top:2.2rem}.gcxt .xt-ios .sys-msg[data-v-7c90527e]{top:2.9rem}.gcxt .sys-msg .icon-close[data-v-7c90527e]{padding:0 .7rem;position:absolute;right:0;top:0}.gcxt .sys-msg .icon-close[data-v-7c90527e]:before{background:#d6cb94;display:block;color:#fff;font-size:8px;line-height:1em;padding:6px 5px 4px 5px;border-radius:100%;text-align:center;margin-top:7px}.gcxt .xt-ios .sys-msg .icon-close[data-v-7c90527e]:before{padding:5px;margin-top:5px}.gcxt .overtime-tabs.active[data-v-7c90527e]{display:-webkit-box;display:-ms-flexbox;display:flex}.gcxt .overtime-tabs[data-v-7c90527e]{top:2.2rem;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center}.gcxt .has-sys-msg .overtime-tabs[data-v-7c90527e]{top:3.8rem}.gcxt .overtime-tabs[data-v-7c90527e]{border-bottom:0;-ms-flex-wrap:wrap;flex-wrap:wrap}.gcxt .overtime-tabs[data-v-7c90527e]:after{content:"";display:block;height:10px;width:100%;background-color:#f5f5f9;-webkit-box-shadow:0 2px 5px 0 #e2e2e2 inset;box-shadow:inset 0 2px 5px 0 #e2e2e2}.gcxt .overtime-tabs .tab[data-v-7c90527e]{height:2.2rem}.gcxt .item-title-row .item-title[data-v-7c90527e]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;white-space:normal}.gcxt ul.list-block[data-v-7c90527e]{background:#fff;list-style:none;padding:0;margin:0;position:relative}.gcxt .xt-iphonex ul.list-block[data-v-7c90527e]{padding-bottom:1.7rem!important}.gcxt .action-block p[data-v-7c90527e]{margin:0;color:#999}.gcxt .scroll-container[data-v-7c90527e]{overflow:hidden;overflow-y:auto}[data-v-7c90527e] .header-bg .pull-right{right:15px}.gcxt #msg_todo_list[data-v-7c90527e]{position:absolute;top:0;bottom:0;left:0;right:0}.gcxt #msg_todo_list .item-content[data-v-7c90527e]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding-left:0;position:relative}.gcxt #msg_todo_list .item-content[data-v-7c90527e]:before{bottom:0;content:" ";position:absolute;z-index:1;left:0;right:0;border-top:1px solid #efeff4;-webkit-transform:scaleY(.5);transform:scaleY(.5);left:15px}.gcxt #msg_todo_list .item-media[data-v-7c90527e]{padding:0;margin:10px 15px}.gcxt #msg_todo_list .item-inner[data-v-7c90527e]{margin-left:0}.gcxt #msg_todo_list .item-inner[data-v-7c90527e]:after{display:none}.gcxt #msg_todo_list .list-block[data-v-7c90527e]{margin-top:0;margin-bottom:75px}.gcxt #msg_todo_list .read-all-btn[data-v-7c90527e]{position:absolute;bottom:24px;background:#fff;-webkit-box-shadow:0 2px 6px 2px hsla(0,0%,74.9%,.6);box-shadow:0 2px 6px 2px hsla(0,0%,74.9%,.6);border-radius:30px;left:50%;-webkit-transform:translateX(-50%);transform:translateX(-50%);color:#0268b3;text-align:center;padding:10px 26px;white-space:nowrap;z-index:1}.gcxt #msg_todo_list .read-all-btn .iconfont[data-v-7c90527e]{width:auto;height:auto;line-height:1;margin-right:8px;font-size:14px}[data-v-7c90527e] .van-list{background:#fff}',""])},"9bfc":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"msg_todo_list"}},[a("scroll-refresh",{ref:"scrollList",attrs:{loading:t.loading,finished:t.finished,"finished-text":""},on:{refresh:t.refresh,more:t.more}},[a("div",{staticStyle:{height:"100%"}},[a("div",{staticClass:"list-block msg-list"},[t._t("itemBefore"),t._l(t.listData.data,(function(e,i){return a("div",{directives:[{name:"touch",rawName:"v-touch",value:{index:i,onSwipeLeft:t.onSwipeLeft,onSwipeRight:t.onSwipeRight},expression:"{ index, onSwipeLeft, onSwipeRight }"}],key:i,staticClass:"item-content",class:{undo:"0"===e.msg_status,swipe:i===t.swipeIndex},on:{click:function(a){t.handleRedirect(a,e,i)}}},[a("div",{staticClass:"item-media",class:{unread:"0"===e.msg_status}},[a("i",{staticClass:"iconfont",class:t._f("bizTypeIcon")(e)})]),a("div",{staticClass:"item-inner"},[a("div",{staticClass:"item-title-row"},[a("div",[a("span",[t._v(t._s(e.msg_content.news.articles[0].title))])])]),a("div",{staticClass:"item-subtitle"},[1===e.display?a("span",[a("span",{domProps:{textContent:t._s("cc"===e.msg_content.news.articles[0].flag?"抄送人":"发起人")}}),t._v("\n                :"+t._s(e.msg_content.news.articles[0].fq_user.station_name)+"【"+t._s(e.msg_content.news.articles[0].fq_user.user_name)+"】\n              ")]):a("span",[t._v(t._s(e.msg_content.news.articles[0].description))])]),a("div",{staticClass:"item-subtitle clearfix",attrs:{id:"msg-detail"}},[a("span",{staticClass:"item-date"},[t._v(t._s(t._f("timer")(e.create_time)))]),1===e.display?a("span",{staticClass:"item-desc"},[t._v("\n                "+t._s(e.msg_content.news.articles[0].biz_type_desc)+"\n              ")]):a("span",{staticClass:"item-desc"},[t._v("\n                "+t._s(t._f("bizTypeTransfer")(e.biz_type))+"\n              ")]),e.msg_content.news.articles[0].erp_change_type?a("span",{staticClass:"item-desc"},[t._v("\n                "+t._s(e.msg_content.news.articles[0].erp_change_type)+"\n              ")]):t._e()])]),"0"===e.msg_status?a("div",{staticClass:"set-done",attrs:{"data-index":i},on:{click:function(a){a.stopPropagation(),t.handleSetDone(a,e,i)}}},[t._v("\n            置为已读\n          ")]):t._e()])}))],2)])]),a("div",{directives:[{name:"show",rawName:"v-show",value:!t.listData.data.length&&!t.busy&&!t.broadcastCount,expression:"!listData.data.length && !busy && !broadcastCount"}],staticClass:"no-new"},[t._v("\n    当前无通知事项\n  ")]),a("transition",{attrs:{name:"fade"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.showButton,expression:"showButton"}],staticClass:"read-all-btn",on:{click:t.set_msg_read}},[a("i",{staticClass:"iconfont icon-quanbiaoyidu-01"}),a("span",{staticClass:"text"},[t._v("将未读消息标为已读")])])])],1)},s=[],n=a("0e2e"),o=(a("6a61"),a("ed32")),c=(a("1bc7"),a("0c84"),a("e680"),a("f121")),r=a("648c"),d=a("40e4"),l=a("a075"),g=a("db68"),p=a("933f"),m=a("042e"),x={name:"NoticeList",filters:{bizTypeTransfer:function(t){if(!t)return t;var e=c["d"][t];return e||""},bizTypeIcon:function(t){var e="";try{e=t.msg_content.news.articles[0].change_type}catch(s){e=""}if("现场签证"===e)return"icon-_daiban-xianchangqi";if("设计变更"===e)return"icon-_daiban-shejibiange";var a=t.biz_type;if(!a)return a;var i=c["c"][a];return i||""},timer:function(t){return l["a"].date.beautify(t)}},props:{broadcastCount:{type:Number,default:0}},data:function(){return{swipeIndex:-1,loading:!1,loaded:!1,finished:!1,pageIndex:0,notifyMsgCount:0,list:[],busy:!1,loadAll:!1,listData:{searchParam:{page_index:0,msg_type:1},data:[]},bottomConfig:{triggerDistance:10}}},computed:{showButton:function(){return this.listData.data.some((function(t){return"0"===t.msg_status}))||this.broadcastCount>0}},watch:{notifyMsgCount:function(t){!isNaN(t)&&t>=0&&this.$store.dispatch(m["g"],{message:t+this.broadcastCount})}},mounted:function(){this.notifyMsgCount=this.$store.state.menuInfo.data[2].number},methods:{onSwipeLeft:function(t){"0"===this.listData.data[t].msg_status&&(this.swipeIndex=t)},onSwipeRight:function(){this.swipeIndex=-1},set_msg_read:function(){var t=this;this.sui.actions({title:"确认全标已读吗？",classNames:["action-sheet__notice-list"],actions:[{name:"全标已读",color:"#FF3B30"}],onSelect:function(e){return p["a"].idkey(p["a"].idkeys.noticeReadAll),Promise.all([Object(d["j"])().then((function(){return t.refresh()})),Object(d["l"])()]).then((function(){t.$store.dispatch(m["d"]),t.notifyMsgCount=0,t.sui.toast("全部置为已读成功")}))},onCancel:function(){}})},refresh:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(e,a){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!this.busy){t.next=2;break}return t.abrupt("return");case 2:return this.listData.searchParam.showIndicator=void 0==a||a,this.listData.searchParam.page_index=1,this.$refs.scrollList&&this.$refs.scrollList.scrollTop(),t.abrupt("return",this.getListData("refresh"));case 6:case"end":return t.stop()}}),t,this)})));function e(e,a){return t.apply(this,arguments)}return e}(),more:function(){this.listData.searchParam.page_index++,this.getListData("more")},getListData:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(e){var a,i=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.swipeIndex=-1,this.busy=!0,this.loading=!0,a=this,t.abrupt("return",Object(r["b"])(this.listData.searchParam).then((function(t){a.busy=!1,"refresh"===e&&(a.listData.data=[],a.finished=!1),t.data.length<10&&(a.finished=!0),a.listData.data=[].concat(Object(n["a"])(a.listData.data),Object(n["a"])(t.data)),i.loading=!1})).catch((function(){a.finished=!0,a.loading=!1})));case 5:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),handleRedirect:function(t,e,a){var i=this;return p["a"].idkey(p["a"].idkeys.noticeToBiz),Object(d["k"])({msg_id:e.msg_id}).then((function(t){i.swipeIndex=-1,i.$set(i.listData.data[a],"msg_status","1"),i.notifyMsgCount-=1})).then((function(){g["b"].business.message.open({msg_id:e.msg_id,msg_type:e.msg_type,biz_type:e.biz_type,msg_status:e.msg_status,param:e.msg_content.news.articles[0].url,linkto:e.msg_content.news.articles[0].linkto,dev_id:e.msg_content.news.articles[0].dev_id,biz_id:e.biz_id,description:e.msg_content.news.articles[0].description,sub_biz_type:e.sub_biz_type,change_type:e.msg_content.news.articles[0].change_type})}))},handleSetDone:function(t,e,a){var i=this;return Object(d["k"])({msg_id:e.msg_id}).then((function(t){i.swipeIndex=-1,i.$set(i.listData.data[a],"msg_status","1"),i.notifyMsgCount-=1}))},goBack:function(){history.back()}}},u=x,f=(a("7010"),a("5d22")),b=Object(f["a"])(u,i,s,!1,null,"7c90527e",null);e["default"]=b.exports}}]);