(window["webpackJsonp_module_entry_gcxt_"]=window["webpackJsonp_module_entry_gcxt_"]||[]).push([["chunk-2a6ac94f"],{"0613":function(t,e,a){e=t.exports=a("690e")(!1),e.push([t.i,'.gcxt[data-v-41d2888b] :export{colorPrimary:#0268b3;headerBackgroundColor:#fff;headerTextColor:#333}.gcxt .duishuzhong[data-v-41d2888b],.gcxt .shenpizhong[data-v-41d2888b],.gcxt .yikaishi_queren[data-v-41d2888b]{color:#f90}.gcxt .shenpitongguo[data-v-41d2888b],.gcxt .yiwancheng[data-v-41d2888b]{color:#6ac20b}.gcxt .shenpijujue[data-v-41d2888b]{color:#ff5f3e}.gcxt .icon-baocuo[data-v-41d2888b]{color:#f65e5e}.gcxt .not-start[data-v-41d2888b]{color:#c9c9c9}.gcxt .weifaqi[data-v-41d2888b]{color:#999}.gcxt .icon-_daishenpi[data-v-41d2888b]{color:#f90}.gcxt .icon-_tianjia[data-v-41d2888b],.gcxt .icon-selected[data-v-41d2888b]{color:#74c913}.gcxt .icon-_zuofei[data-v-41d2888b]{color:#f65e5e;font-size:15px}.gcxt .erp-invalid .icon-_zuofei[data-v-41d2888b]{color:#848484}.gcxt .icon-_dahui[data-v-41d2888b]{color:#f65e5e}.gcxt .field-title[data-v-41d2888b]{height:44px;padding-left:14px;background-color:#fff;line-height:44px;font-size:16px}[data-v-41d2888b] .van-cell__title{font-size:16px}[data-v-41d2888b] .van-collapse-item__title{padding-left:0}[data-v-41d2888b] .van-icon{-webkit-box-ordinal-group:0;-ms-flex-order:-1;order:-1;font-size:18px;margin-left:0;width:44px;text-align:center;color:#b5b5b5}[data-v-41d2888b] .van-collapse-item__content{padding:0}.gcxt .flow-erp-detail[data-v-41d2888b]{padding-bottom:10px}.gcxt .flow-erp-reason[data-v-41d2888b]{padding:10px 15px;font-size:15px;background:#fff;color:#333}.gcxt .flow-item[data-v-41d2888b]{display:-webkit-box;display:-ms-flexbox;display:flex;margin-bottom:10px;padding-right:15px}.gcxt .flow-item:last-of-type .status-icon[data-v-41d2888b]:after{display:none}.gcxt .icon--unstar[data-v-41d2888b]:before{content:"";display:inline-block;background-color:#c9c9c9;border-radius:50%;width:16px;height:16px}.gcxt .line[data-v-41d2888b]{display:-webkit-box;display:-ms-flexbox;display:flex}.gcxt .line>.name[data-v-41d2888b]{-webkit-box-flex:1;-ms-flex-positive:1;flex-grow:1}.gcxt .line-name[data-v-41d2888b]{display:-webkit-box;display:-ms-flexbox;display:flex;font-size:16px;-webkit-box-align:end;-ms-flex-align:end;align-items:flex-end;color:#333}.gcxt .line-time[data-v-41d2888b]{font-size:14;color:#333}.gcxt .status-icon[data-v-41d2888b]{display:block;font-size:16px;width:43px;text-align:center;padding-top:13px;line-height:1;position:relative}.gcxt .status-icon[data-v-41d2888b]:after{content:"";width:1px;height:100%;position:absolute;background-color:#e6e6e6;left:50%;margin-left:-1px;top:25px}.gcxt .erpWorkflow.display-type-2[data-v-41d2888b]{overflow:hidden}.gcxt .erpWorkflow.display-type-2 .flow-item[data-v-41d2888b]{-ms-flex-wrap:wrap;flex-wrap:wrap}.gcxt .erpWorkflow.display-type-2 .top-line[data-v-41d2888b]{padding:10px 0;position:relative}.gcxt .erpWorkflow.display-type-2 .top-line[data-v-41d2888b]:before{bottom:0;content:" ";position:absolute;z-index:1;right:0;border-top:1px dashed #d9d9d9;-webkit-transform:scaleY(.5);transform:scaleY(.5);left:0}.gcxt .erpWorkflow.display-type-2 .stepstatus[data-v-41d2888b]{margin-right:13px;font-size:16px}.gcxt .erpWorkflow.display-type-2 .stepname[data-v-41d2888b]{font-size:16px;color:#666}.gcxt .erpWorkflow.display-type-2 .item-content[data-v-41d2888b]{width:100%}.gcxt .erpWorkflow.display-type-2 .nodes-wrapper[data-v-41d2888b]{display:-webkit-box;display:-ms-flexbox;display:flex}.gcxt .erpWorkflow.display-type-2 .status-icon[data-v-41d2888b]:before{position:relative;z-index:1}.gcxt .erpWorkflow.display-type-2 .status-icon[data-v-41d2888b]:after{top:30px}.gcxt .erpWorkflow.display-type-2 .node-items[data-v-41d2888b]{position:relative;-webkit-box-flex:1;-ms-flex-positive:1;flex-grow:1;padding:0 5px;background:#f5f5f5;border-radius:3px}.gcxt .erpWorkflow.display-type-2 .node-items[data-v-41d2888b]:before{content:"";position:absolute;top:15px;left:-20px;border:10px solid transparent;border-right-color:#f5f5f5}.gcxt .erpWorkflow.display-type-2 .master-node[data-v-41d2888b]{padding:12px 0}.gcxt .erpWorkflow.display-type-2 .StepName_Auditor[data-v-41d2888b]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between}.gcxt .erpWorkflow.display-type-2 .nodeName[data-v-41d2888b]{font-size:14px;color:#2b2b2b}.gcxt .erpWorkflow.display-type-2 .line[data-v-41d2888b]{margin-top:8px;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between}.gcxt .erpWorkflow.display-type-2 .StepOpinion[data-v-41d2888b]{color:#2b2b2b;font-size:13px}.gcxt .erpWorkflow.display-type-2 .nodeDateTime[data-v-41d2888b]{font-size:13px}.gcxt .erpWorkflow.display-type-2 .stepStatus__1[data-v-41d2888b],.gcxt .erpWorkflow.display-type-2 .stepStatus__2[data-v-41d2888b]{color:#fe9440}.gcxt .erpWorkflow.display-type-2 .stepStatus__0[data-v-41d2888b]{color:grey}.gcxt .erpWorkflow.display-type-2 .stepStatus__-1[data-v-41d2888b],.gcxt .erpWorkflow.display-type-2 .stepStatus__-2[data-v-41d2888b]{color:red}.gcxt .erpWorkflow.display-type-2 .stepStatus__3[data-v-41d2888b],.gcxt .erpWorkflow.display-type-2 .stepStatus__4[data-v-41d2888b],.gcxt .erpWorkflow.display-type-2 .stepStatus__-3[data-v-41d2888b]{color:#74c913}.gcxt .extend-node[data-v-41d2888b]{margin-top:8px}.gcxt .extend-node .StepName_Auditor[data-v-41d2888b]{color:#2b2b2b;font-size:16px;position:relative;height:auto}.gcxt .extend-node .nodeDateTime[data-v-41d2888b]{position:absolute;float:right;top:-6px;right:-6px;font-size:10px;color:#989898;height:20px}.gcxt .extend-node .StepOpinion[data-v-41d2888b]{position:relative;margin-top:6px;font-size:13px;margin:5px 0;word-wrap:break-word;color:#2b2b2b}.gcxt .loading[data-v-41d2888b]{padding:10px 15px}',""])},"0823":function(t,e,a){e=t.exports=a("690e")(!1),e.push([t.i,".gcxt .card-header-wrapper[data-v-5b4079f1]{position:relative;z-index:1}.gcxt .card-header[data-v-5b4079f1]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;background-color:#fff;word-break:break-all}.gcxt .i-gongcheng[data-v-5b4079f1]{margin-right:6px;font-size:36px;color:#3492e9;line-height:1}.gcxt .cont-title[data-v-5b4079f1]{-webkit-box-flex:1;-ms-flex-positive:1;flex-grow:1;text-align:left;color:#333;font-size:18px}.gcxt .overtime-tip[data-v-5b4079f1]{font-size:20px;margin-right:6px}.gcxt .overtime-tip.overtime-warn[data-v-5b4079f1]{color:#faa304}.gcxt .overtime-tip.overtime-over[data-v-5b4079f1]{color:#ff3b30}.gcxt .signature[data-v-5b4079f1]{position:absolute;right:10px;top:16px}",""])},"08eb":function(t,e,a){"use strict";var i={};a.r(i),a.d(i,"APPROVALING",(function(){return N})),a.d(i,"SUBMITED",(function(){return R})),a.d(i,"SIGNED",(function(){return P})),a.d(i,"COMPLETED",(function(){return L})),a.d(i,"REASSIGNED",(function(){return M})),a.d(i,"INVALIDATE",(function(){return F})),a.d(i,"BACKTO",(function(){return B})),a.d(i,"TERMINATED",(function(){return K})),a.d(i,"FRONT_ADD_SIGN",(function(){return W})),a.d(i,"BACK_ADD_SIGN",(function(){return V})),a.d(i,"ADD_SIGN_PASS",(function(){return $})),a.d(i,"ADD_SIGN_NO_PASS",(function(){return q})),a.d(i,"TRANSFER_PENDING",(function(){return U})),a.d(i,"TRANSFER_DIMISSION",(function(){return G})),a.d(i,"ACCEPT",(function(){return H})),a.d(i,"RESET_NEXT_USER",(function(){return J})),a.d(i,"COUNTERSIGN",(function(){return Y}));var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("page",{class:"biz-page-"+t.config.bizName},[t._t("header",[a("template",{slot:"header"},[a("v-header",{attrs:{title:t.title}})],1)]),t.data?a("div",{directives:[{name:"watermark",rawName:"v-watermark"}],staticStyle:{overflow:"auto"},style:{bottom:t.data.approveData.buttons&&t.data.approveData.buttons.length?"40px":0}},[t.data.sheetDetail.unlock_info&&t.data.sheetDetail.unlock_info.unlock_warning_msg&&t.showUnlockInfo?a("div",{staticClass:"top-unlock-tip",style:{background:t.data.sheetDetail.unlock_info.timeout_days>0?"rgba(255, 85, 0, 0.1)":"rgba(255, 170, 0, 0.1)"}},[a("i",{staticClass:"iconfont icon-_tanhao -tanhao",style:{color:t.data.sheetDetail.unlock_info.timeout_days>0?"rgba(255, 59, 48, 1)":"rgba(255, 170, 0, 1)"}}),a("span",{staticClass:"tip-content"},[t._v("\n        "+t._s(t.data.sheetDetail.unlock_info.unlock_warning_msg)+"\n      ")]),a("i",{staticClass:"iconfont icon-_guanbi -close",on:{click:t.closeUnlockInfo}})]):t._e(),t._l(t.comps,(function(e){return["RelativeInfo"===e&&(t.contracts.length||t.otherSheetList.length)?a("relative-info",{directives:[{name:"show",rawName:"v-show",value:!t.hide_top,expression:"!hide_top"}],key:e,attrs:{"biz-type":t.bizType,"change-type":t.changeType,"sheet-list":t.otherSheetList,"sheet-id":t.sheetId,sheet:t.data.sheetDetail,"sheet-name":t.sheetName,contracts:t.contracts}}):"CardHeader"===e?a("card-header",{key:e,attrs:{title:t.data.sheetDetail.biz_title||t.data.sheetDetail.change_overview||t.data.sheetDetail.subject||t.data.sheetDetail.meeting_subject||t.data.sheetDetail.contract_info&&t.data.sheetDetail.contract_info.contract_name||t.data.sheetDetail.contract_name||"","warning-status":t.data.sheetDetail.warning_status,"check-status":~[t.BizKeys.DEDUCTION_NOTICE,t.BizKeys.TC_PROJECT_DAILY,t.BizKeys.TC_MEETING_RECORD,t.BizKeys.TC_MEETING].indexOf(t.bizType)?"":t.data.sheetDetail.check_status,"erp-invalid-display":t.data.sheetDetail.erp_invaild_display,"is-abandoned":t.isAandoned}}):"FormDetail"===e?a("form-detail",{key:e,attrs:{"sheet-id":t.sheetId,sheet:t.data.sheetDetail,"layout-arr":t.data.formData.layoutArr,"group-info":t.data.formData.groupInfo,"data-model":t.data.formData.dataModel,"unlock-info":t.data.sheetDetail.unlock_info}}):"UploadImages"===e?a("upload-images",{key:e,ref:"uploadImages",refInFor:!0,attrs:{value:t.data.sheetDetail.images||[],editable:!1,"has-append":(t.canAppend||t.canSupply)&&t.bizType===t.BizKeys.TC_TASK_REPORT}}):"RelativeFieldGroup"===e?a("relative-field-group",{key:e,ref:"RelativeFieldGroup",refInFor:!0,attrs:{layouts:t.data.relative_doc.layouts,data:t.data.relative_doc.data,mode:"view"}}):"SubForms"===e&&t.config.detail.subForms?a("div",{key:e},[t._l(t.config.detail.subForms,(function(e){return[t.subFormsSetting[e.id].isEnable&&t.data.sheetDetail[e.id]&&t.data.sheetDetail[e.id].length?a("sub-form",t._b({key:e.id,ref:e.id,refInFor:!0,attrs:{id:e.id,data:t.data.sheetDetail[e.id],sheet:t.data.sheetDetail,mode:"view"}},"sub-form",t.subFormsSetting[e.id],!1)):t._e()]}))],2):"Attachment"===e?a("attachment",{key:e,ref:"attachment",refInFor:!0,attrs:{edit:!1,list:t.data.attachments.list||[],"restrict-settings":t.data.attachments.restrictSettings||[],"can-append":t.canAppend&&t.bizType===t.BizKeys.TC_TASK_REPORT,"can-supply":t.canSupply&&t.bizType===t.BizKeys.TC_TASK_REPORT}}):"PaymentProcess"===e?a("payment-process",{key:e,ref:"paymentProcess",refInFor:!0,attrs:{sheet:t.data.sheetDetail,data:t.data.sheetDetail.process_payment,"biz-type":t.bizType,"change-type":t.changeType}}):"AcceptSheetFlow"===e&&t.data.sheetDetail.proc_instances[0][0]?a("accept-sheet-flow",{key:e,attrs:{info:t.data.sheetDetail.proc_instances[0][0]}}):"Flow"===e&&""!==t.config.procTypeId?a("flow",{key:e,attrs:{"proc-type-id":t.config.procTypeId,"biz-type":t.bizType,"change-type":t.changeType,sheet:t.data.sheetDetail}}):"UserSelector"===e&&t.data.sheetDetail.cc_users&&t.data.sheetDetail.cc_users.length?a("user-selector",{key:e,staticClass:"component-wrapper",attrs:{mode:"view",selecteds:t.data.sheetDetail.cc_users||[]}}):a("div",{key:e},[t._t(e,null,{sheet:t.data.sheetDetail})],2)]}))],2):t._e(),t._t("footer",[a("template",{slot:"footer"},[t.data&&t.data.approveData.buttons&&t.data.approveData.buttons.length?a("approve-group",{attrs:{data:t.data.approveData,"biz-type":t.bizType,"change-type":t.changeType,"get-sheet-refs":t.getSheetRefs}}):t._e()],1)])],2)},n=[],o=a("0e2e"),c=(a("aa18"),a("982e"),a("fc02"),a("1bc7"),a("e680"),a("07fc")),r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.flow.length||t.reverseVisaData.length?a("div",{staticClass:"flow-sections"},[a("van-collapse",{model:{value:t.collapseOpening,callback:function(e){t.collapseOpening=e},expression:"collapseOpening"}},[t._l(t.flow,(function(e){return["locale"===e.type?a("locale-flow-item",{key:e.name,staticClass:"locale-flow-item",attrs:{"collapse-name":e.name,list:e.list,locale:t.locale[e.localeIndex],"flow-layout-contract":t.flowLayoutContract,"flow-layout":t.flowLayout,"flow-name":t.flowName,"show-tel-sms":t.showTelSms,"is-last":e.last},on:{triggerChat:t.goChat,triggerSms:t.sendSms,openReverseVisaInfo:t.openReverseVisaInfo}}):t._e(),"erp"===e.type&&e.data&&e.data.erp_check_status&&e.data.erp_proc_status?a("erp-flow-item",{key:e.name,staticClass:"erp-flow-item",attrs:{"collapse-name":e.name,"show-erp-proc-detail":t.showErpProcDetail,"status-name":t.erpStatusName,"erp-proc-status":e.data.erp_proc_status,"sp-confirm-result":e.data.sp_confirm_result,"biz-id":e.data.biz_id,"is-last":e.last}}):t._e(),"area_check"===e.type||"group_check"===e.type?a("area-group-flow-item",{key:e.name,staticClass:"area-group-flow-item",attrs:{title:e.title,status:e.data.status,"majors-list":e.majorsList,logs:[]}}):t._e(),"erp_invalid"===e.type?a("erp-invalid-flow-item",{key:e.name,staticClass:"erp-invalid-flow-item",attrs:{"erp-invaild-person":e.data.erp_invaild_person,"erp-invaild-date":e.data.erp_invaild_date,"erp-invaild-reason":e.data.erp_invaild_reason}}):t._e()]}))],2),t.openingReverseVisa?a("reverse-visa-info",{attrs:{data:t.reverseVisaData},model:{value:t.openingReverseVisa,callback:function(e){t.openingReverseVisa=e},expression:"openingReverseVisa"}}):t._e()],1):t._e()},l=[],d=(a("ac67"),a("0ee4")),p=(a("32ea"),a("a450"),a("e5b4"),a("34f5")),u=a("82f8"),f=a("a740"),h=a("40e4"),v=a("fd50"),g=a("0938"),b=a("a783"),m=a("f121"),_=a("bc32"),x=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"flow-section-erp bb"},[t.showErpProcDetail&&t.hasErpDetail||t.spConfirmResult?a("div",{on:{click:t.handleUnfoldDetail}},[a("van-collapse-item",{attrs:{name:t.collapseName}},[a("template",{slot:"title"},[t._v("\n        "+t._s(t.statusName)+"\n        "),t.showErpProcDetail?t._e():a("span",{staticClass:"show_erp_proc_status",class:t.erpProcStatusClassName},[a("em",{staticStyle:{color:"#333"}},[t._v(" - ")]),t._v(t._s(t.erpProcStatus))])]),t.showErpProcDetail&&t.hasErpDetail?a("div",{directives:[{name:"show",rawName:"v-show",value:!t.loading,expression:"!loading"}],staticClass:"flow-erp-detail"},[1===t.detailResult.display_rule?a("ul",{staticClass:"erpWorkflow display-type-1"},t._l(t.detailResult.meta,(function(e){return a("li",{key:e[0].StepPathID,staticClass:"flow-item"},[a("i",{staticClass:"status-icon",class:t.renderStatusClassName(e[0].StepStatus)}),a("div",{staticClass:"item-content"},[a("div",{staticClass:"line line-name"},[a("span",{staticClass:"name"},[t._v(t._s(e[0].StepName))])]),a("div",{staticClass:"line line-time"},[t._v(t._s(e[0].HandleDateTime))])])])}))):t._e(),2===t.detailResult.display_rule||3===t.detailResult.display_rule?a("ul",{staticClass:"erpWorkflow display-type-2"},t._l(t.detailResult.meta,(function(e){return a("li",{key:e[0].StepPathID,staticClass:"flow-item"},[a("div",{staticClass:"item-content"},t._l(e[0].Nodes,(function(i){return a("div",{key:i.NodeGuid,staticClass:"nodes-wrapper"},[a("i",{staticClass:"status-icon",class:t.renderStatusClassName(e[0].StepStatus)}),a("div",{staticClass:"node-items"},[a("div",{staticClass:"top-line"},[a("span",{staticClass:"stepname"},[t._v(t._s(e[0].StepName))])]),a("div",{staticClass:"master-node"},[a("div",{staticClass:"StepName_Auditor"},[a("div",{staticClass:"nodeName"},[t._v(t._s(i.RealAuditorName))])]),a("div",{staticClass:"line"},[i.OperationName||i.RealHandleText?a("div",{staticClass:"StepOpinion"},[a("span",{class:"stepStatus__"+i.NodeStatus},[t._v(t._s(i.OperationName))]),t._v("\n                        "+t._s(i.RealTo)+"\n                        "+t._s(i.RealToHandleName)+"\n                        "+t._s(i.RealHandleText)+"\n                      ")]):t._e(),a("div",{staticClass:"nodeDateTime"},[t._v(t._s(i.HandleDateTime))])]),i.SignUrl?a("div",{staticClass:"signature default"},[a("div",{staticClass:"signatureImgDiv border-1px"},[a("img",{attrs:{src:i.SignUrl,alt:""}})])]):a("div",{staticClass:"signature"})]),t._l(i.ExtendNodes,(function(e){return a("div",{key:e.NodeGuid,staticClass:"extend-node"},[a("div",{staticClass:"StepName_Auditor"},[t._v("\n                      "+t._s(e.HandlerName)+"\n                      "),a("div",{staticClass:"nodeDateTime"},[t._v(t._s(e.HandleDateTime))])]),e.OperationName||e.RealHandleText?a("div",{staticClass:"StepOpinion"},[a("span",{class:"stepStatus__"+i.NodeStatus},[t._v(t._s(e.OperationName))]),t._v("\n                      "+t._s(e.RealTo)+"\n                      "+t._s(e.RealToHandleName)+"\n                      "+t._s(e.RealHandleText)+"\n                    ")]):t._e()])}))],2)])})))])}))):t._e()]):t.spConfirmResult?a("div",{directives:[{name:"show",rawName:"v-show",value:!t.loading,expression:"!loading"}],staticClass:"flow-erp-reason"},[a("span",[t._v("拒绝原因:")]),t._v(t._s(t.spConfirmResult))]):t._e(),t.loading?a("div",{staticClass:"loading"},[t._v("加载中...")]):t._e()],2)],1):a("div",{staticClass:"field-title",on:{click:t.getDetail}},[t._v("\n    "+t._s(t.statusName)+"\n    "),a("span",{staticClass:"show_erp_proc_status",class:t.erpProcStatusClassName},[a("em",{staticStyle:{color:"#333"}},[t._v(" - ")]),t._v(t._s(t.erpProcStatus))])])])},y=[],w=a("fd87"),k=a("db68"),C={name:"ErpFlowItem",props:{showErpProcDetail:{type:Boolean,default:!1},statusName:{type:String,default:""},erpProcStatus:{type:String,default:""},spConfirmResult:{type:String,default:""},bizId:{type:String},isLast:{type:Boolean,default:!1},collapseName:{type:String}},data:function(){return{loading:!1,detailResult:null}},computed:{hasErpDetail:function(){return!!this.detailResult&&(""!==this.detailResult.html||this.detailResult.meta)},erpProcStatusClassName:function(){var t={"审批中":"shenpizhong","对数中":"duishuzhong","已开始,请确认":"yikaishi_queren","审批通过":"shenpitongguo","已完成":"yiwancheng","审批拒绝":"shenpijujue","未发起":"weifaqi"};return t[this.erpProcStatus]||""}},mounted:function(){this.isLast&&this.getDetail()},methods:{getDetail:function(){var t=this;if(null===this.detailResult&&!this.loading)return this.loading=!0,w["a"].getErpProc(this.bizId,k["b"].store.getValueByKey("biz_type")).then((function(e){t.detailResult=e,t.loading=!1,t.sui.hideIndicator()})).catch((function(e){console.warn(e),t.loading=!1}))},handleUnfoldDetail:function(){this.detailResult||this.getDetail()},renderStatusClassName:function(t){var e;switch(t){case 1:case 2:e="iconfont icon-_daishenpi";break;case-3:case 3:case 4:e="iconfont icon-selected";break;case-1:case-2:e="iconfont icon-_zuofei";break;default:e="icon--unstar"}return e}}},z=C,j=(a("9b82"),a("5d22")),S=Object(j["a"])(z,x,y,!1,null,"41d2888b",null),O=S.exports,D=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("van-collapse-item",{attrs:{name:t.collapseName,title:t.flowName||"项目现场确认"}},[a("div",{staticClass:"step-item-list"},t._l(t.list,(function(e,i){return a("div",{key:i,staticClass:"step-item",class:{"current-step":1===+e.is_cur_step},attrs:{"work-type":e.step_status,"data-user_code":e.user_code}},[a("i",{staticClass:"status-icon iconfont",class:t.renderStatusClassName(e)}),a("div",{staticClass:"item-content"},[a("div",{staticClass:"step-point"},[a("div",{staticClass:"step_desc"},[t._v(t._s(e.step_status_des))]),a("div",{staticClass:"step_name"},[t._v(t._s(e.step_name))])]),a("div",{staticClass:"flow-item-list",class:{more:1===e.more}},t._l(e.approver_list,(function(i,s){return a("approver-item",t._g(t._b({key:s,attrs:{"is-cur-node":1===+e.is_cur_step,approver:i}},"approver-item",t.$attrs,!1),t.$listeners))})))])])})))])},T=[],I=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"flow-item",class:{"-current":t.isCurNode,reassign_type:t.isReassignType},attrs:{"work-type":t.approver.status,"data-user_code":t.approver.user_code,"data-user_name":t.approver.user_name}},[a("div",{staticClass:"approver-content"},[a("div",{staticClass:"line line-name"},[a("span",{staticClass:"name"},[t._v(t._s(t.approver.user_name)),t.approver.station_name?a("span",{staticClass:"fz-14 station-name"},[t._v(" ("+t._s(t.approver.station_name)+")")]):t._e()]),!t.isHideSms&&t.isCurNode&&+t.approver.status===t.NODE_STATUS.APPROVALING&&t.showTelSms&&t.approver.approver_id!==t.currentUserId?a("i",{staticClass:"action-button action-sms iconfont icon-_faduanxin",on:{click:t.sendSms}}):t._e(),t.approver.approver_id!==t.currentUserId&&t.approver.approver_id&&"0"!==t.approver.approver_id&&t.hasOpenIM?a("i",{staticClass:"action-button action-chat iconfont icon-_liaotian",on:{click:t.goChat}}):t._e()]),a("div",{staticClass:"line line-status"},[a("div",{staticClass:"item-status"},[t._v(t._s(t.approver.status_des))]),t.approver.update_time?a("div",{staticClass:"time"},[t._v(t._s(t.updateTime))]):t._e()]),a("div",{staticClass:"line line-label"},[+t.approver.status===t.NODE_STATUS.FRONT_ADD_SIGN?a("span",{staticClass:"span-add-sign action-label",on:{click:t.handlerAddSign}},[a("span",{staticClass:"iconfont icon-_biaoqian-qianjiaqian1"})]):t._e(),+t.approver.status===t.NODE_STATUS.BACK_ADD_SIGN?a("span",{staticClass:"span-add-sign action-label",on:{click:t.handlerAddSign}},[a("span",{staticClass:"iconfont icon-_biaoqian-houjiaqian"})]):t._e(),1===+t.approver.sp_timeout?a("span",{staticClass:"span-timeout action-label",on:{click:t.handlerTimeoutReason}},[t.approver.sp_timeout_reason?a("span",{staticClass:"iconfont icon-_biaoqian-chaoshiyuanyin"}):a("span",{staticClass:"iconfont icon-_biaoqian-chaoshi"})]):t._e(),t.approver.cc_users&&t.approver.cc_users.length>0&&+t.approver.status!==t.NODE_STATUS.APPROVALING?a("span",{staticClass:"span-people-copy action-label",on:{click:t.handlerCCPeople}},[a("span",{staticClass:"iconfont icon-_biaoqian-caosong"})]):t._e(),t.approver.contract_add&&t.approver.contract_add.length>0&&t.flowLayoutContract.length>0?a("span",{staticClass:"span-contract_add action-label",on:{click:t.handlerContractAdd}},[a("i",{staticClass:"iconfont icon-1_biaoqian-glht"})]):t._e()]),1===+t.approver.is_set_invalid_cost?a("div",{staticClass:"line is-set-invalid-cost-flow"},[a("span",[t._v("已编辑无效成本")])]):t._e(),t.flowLayout.length?a("div",{staticClass:"line line-flow-layout"},[t._l(t.flowLayout,(function(e,i){return[null!==t.approver[e.id]&&void 0!==t.approver[e.id]&&""!==t.approver[e.id]?a("div",{key:i,staticClass:"sp-flow",style:{color:e.color}},[a("span",[t._v(t._s(e.label)+":")]),a("span",[t._v("\n            "+t._s("money"===e.type?t.formatMoney(t.approver[e.id]):t.formatStr(t.approver[e.id]))+"\n            "+t._s(e.unit&&e.unit)+"\n          ")])]):t._e()]}))],2):t._e(),t.approver.sp_remark?a("div",{staticClass:"line line-remark"},[t._v("\n      "+t._s(t.approver.sp_remark)+"\n    ")]):t._e(),t.approver.negative_visa_logs&&t.approver.negative_visa_logs.length?a("div",{staticClass:"go-reverse-list-btn",on:{click:function(e){t.goReverseVisaDetail(t.approver)}}},[a("span",{staticClass:"text"},[t._v("反签证清单")]),a("i",{staticClass:"iconfont icon-1_you icon__arrow"})]):t._e(),t._t("default")],2)])},A=[],E=(a("8dee"),a("a075")),N=0,R=1,P=2,L=3,M=5,F=6,B=8,K=9,W=10,V=11,$=12,q=13,U=14,G=15,H=16,J=17,Y=18,X={name:"ApproverItem",inheritAttrs:!1,props:{flowLayout:{type:Array,default:function(){return[]}},flowLayoutContract:{type:Array,default:function(){return[]}},approver:{type:Object,default:function(){}},showTelSms:{type:Boolean,default:!1},isCurNode:{type:Boolean,default:!1}},data:function(){return{NODE_STATUS:i}},computed:{currentUserId:function(){return Object(f["d"])("user_id")},isHideSms:function(){return"1"===Object(f["b"])().hide_sms_urge_due},hasOpenIM:function(){return k["b"].business.hasOpenIM()},ccUserNamesText:function(){var t=[];return Array.isArray(this.approver.cc_users)&&this.approver.cc_users.forEach((function(e){t.push(e.name)})),t=t.join("、"),t},updateTime:function(){var t=E["a"].date.format(this.approver.update_time),e="".concat((new Date).getFullYear()),a=t.split(" ")[0].substr(0,4);return a===e?t.substr(5):t},isReassignType:function(){return[4,5,14,15,17].includes(+this.approver.status)}},methods:{formatMoney:function(t){try{var e=Number(t).toFixed(2);return E["a"].number.format(e)}catch(a){return t}},formatStr:function(t){return E["a"].string.formatStr(t)},goChat:function(){this.$emit("triggerChat",{approverId:this.approver.approver_id,bizId:this.approver.biz_id})},sendSms:function(){this.$emit("triggerSms",{approverId:this.approver.approver_id,bizId:this.approver.biz_id})},handlerTimeoutReason:function(){this.approver.sp_timeout_reason&&this.sui.modal({text:this.approver.sp_timeout_reason,buttons:[{text:"我知道了"}]})},handlerCCPeople:function(){var t=this.approver.user_name,e=this.ccUserNamesText;this.sui.modal({title:"抄送详情",text:'            <div class="cc-model-dev">             <div class="left">抄送人：</div>              <div class="right">'+t+'</div>            </div>            <div class="cc-model-dev">              <div class="left">抄送对象：</div>              <div class="right">'+e+"</div>            </div>          ",buttons:[{text:"我知道了"}]})},handlerAddSign:function(){var t=[],e=this.approver.sub_flow.flow,a=this.approver.status;Array.isArray(e)&&e.forEach((function(e){t.push(e.approver.name)}));var i=t.join("、"),s=+a===W?"前加签":"后加签";this.sui.modal({title:"加签详情",text:'<div class="cc-model-dev"><div class="left">'.concat(s,'：</div><div class="right">').concat(i,"</div></div>"),buttons:[{text:"我知道了"}]})},handlerContractAdd:function(){var t=this.flowLayoutContract,e='<div class="cc-model-dev -center"><div class="left">__label：</div><div class="right">__value&nbsp;</div></div>',a="",i=this.approver.contract_add;Array.isArray(i)&&(a=i.map((function(a){return t.map((function(t){return e.replace("__label",t.label).replace("__value",a[t.id]||"")})).join("")})).join("<br/>"),this.sui.modal({title:"关联合同详情",text:a,buttons:[{text:"我知道了"}],extraClass:"modal-contact-add"}))},goReverseVisaDetail:function(t){this.$emit("openReverseVisaInfo",t.negative_visa_logs)}}},Q=X,Z=(a("b012"),Object(j["a"])(Q,I,A,!1,null,"4ccadc7f",null)),tt=Z.exports,et={name:"LocaleFlowItem",components:{ApproverItem:tt},inheritAttrs:!1,props:{flowName:{type:String,default:""},collapseName:{type:String},list:{type:Array,default:function(){return[]}}},data:function(){return{}},mounted:function(){window.localeTest=this},methods:{renderStatusClassName:function(t){if(1===+t.is_cur_step)return"icon-_daishenpi";switch(parseInt(t.step_status)){case 1:case 2:case 3:case 12:case 16:case 18:return"icon-_shenpitongguo";case 10:case 11:return"icon-_tianjia";case 0:return"icon-_daishenpi";case 8:case 9:case 13:return"icon-_dahui";case 4:case 5:case 14:case 15:case 17:return"icon-_zhuanjiao-flow";default:return"icon-_zuofei"}}}},at=et,it=(a("f575"),Object(j["a"])(at,D,T,!1,null,"3b80e91a",null)),st=it.exports,nt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("van-collapse-item",{attrs:{title:"title",name:"areaGroupFlow"}},[a("template",{slot:"title"},[t._v("\n    "+t._s(t.title)),a("em",{staticStyle:{color:"#333"}},[t._v(" - ")]),a("span",{class:t.statusClassName},[t._v(t._s(t.status))])]),a("div",{staticClass:"flow-ds-contain"},[t._l(t.majorsList,(function(t,e){return a("li",{key:e})})),a("div",{staticClass:"flow-ds-majors"},[a("div",{staticClass:"majors-title"},[t._v(t._s(t.item))]),a("div",{staticClass:"flow-ds-log"},[a("i",{staticClass:"log-arrow"}),t._l(t.logs[t.item],(function(e,i){return a("div",{key:i,staticClass:"log-item"},[a("div",{staticClass:"log-top"},[a("span",{staticClass:"log-name"},[t._v(t._s(e.erp_user_name)+t._s(e.erp_user_station?"("+e.erp_user_station+")":""))]),a("span",{staticClass:"log-time"},[t._v(t._s(e.biz_time))])]),a("div",[a("span",{staticClass:"log-type"},[t._v(t._s(t._f("getDsLogType")(e.type)))]),e.remark?a("span",{staticClass:"log-remark"},[t._v("("+t._s(e.remark)+")")]):t._e()])])})),a("div",{staticClass:"log-item-border"})],2)])],2)],2)},ot=[],ct={name:"AreaGroupFlowItem",filters:{getDsLogType:function(t){var e={1:"通知对数",2:"通知对数",3:"确认到场",4:"确认到场",5:"乙方查看",6:"乙方查看"};return e[t]||""}},props:{},data:function(){return{majorsList:{type:Array,default:function(){return[]}},logs:{type:Object,default:function(){}}}},computed:{statusClassName:function(){var t={"审批中":"shenpizhong","对数中":"duishuzhong","已开始,请确认":"yikaishi_queren","审批通过":"shenpitongguo","已完成":"yiwancheng","审批拒绝":"shenpijujue","未发起":"weifaqi"};return t[this.status]||""}}},rt=ct,lt=Object(j["a"])(rt,nt,ot,!1,null,null,null),dt=lt.exports,pt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"flow-section-erp-invalid"},[a("div",{staticClass:"list-block"},[a("i",{staticClass:"iconfont icon-_zuofei"}),a("div",{staticClass:"item-content"},[a("div",{staticClass:"item-inner"},[a("div",{staticClass:"wrap"},[t.erpInvaildPerson?[a("div",{staticClass:"flexer"},[a("div",{staticClass:"name"},[t._v(t._s(t.erpInvaildPerson))]),a("div",{staticClass:"time adjust"},[t._v(t._s(t.erpInvaildDate))])]),a("div",{staticClass:"cont"},[t._v("已作废"),t.erpInvaildReason?a("span",{staticClass:"remark"},[t._v("（"+t._s(t.erpInvaildReason)+"）")]):t._e()])]:[a("div",{staticClass:"flexer"},[a("div",{staticClass:"cont"},[t._v("已作废")]),a("div",{staticClass:"time"},[t._v(t._s(t.erpInvaildDate))])]),t.erpInvaildReason?a("div",{staticClass:"remark"},[t._v(t._s("- "+t.erpInvaildReason))]):t._e()]],2)])])])])},ut=[],ft={name:"ErpInvalidFlowItem",props:{erpInvaildPerson:{type:String,default:""},erpInvaildDate:{type:String,default:""},erpInvaildReason:{type:String,default:""}}},ht=ft,vt=(a("7466"),Object(j["a"])(ht,pt,ut,!1,null,"30b0ff1a",null)),gt=vt.exports,bt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("popup-page",{directives:[{name:"phy-back",rawName:"v-phy-back",value:{status:t.value,method:"close"},expression:"{status: value, method: 'close'}"}],attrs:{value:t.value}},[a("v-header",{attrs:{slot:"header",title:"审批人关联反签证清单","back-action":t.close},slot:"header"}),t._l(t.list,(function(e,i){return a("div",{key:i,staticClass:"reverse-form-info"},[a("div",{staticClass:"info-name"},[t._v("反签证"+t._s(i+1))]),t._l(t.layoutArr,(function(i,s){return a("div",{key:s,staticClass:"form-detail-group"},[a("ul",{staticClass:"form-detail-list"},[t._l(i,(function(t,i){return[a("li",{key:i,staticClass:"form-detail-item"},[a("af-info-cell",{attrs:{field:e[t]}})],1)]}))],2)])})),a("div",{staticClass:"attachment"},[a("af-info-cell",{staticClass:"field-attachments",class:{"border-bottom":e.openingAttachment},attrs:{field:{label:"附件"}}},[e.attachments.length?a("div",{on:{click:function(a){t.openAttachment(e)}}},[t._v("\n          "+t._s(e.attachments.length+"个")+"\n          "),a("i",{staticClass:"iconfont icon-_xiala icon__arrow",class:{opening:e.openingAttachment}})]):a("span",[t._v("--")])]),a("attachment",{directives:[{name:"show",rawName:"v-show",value:e.openingAttachment,expression:"info.openingAttachment"}],attrs:{list:e.attachments,edit:!1,"show-title":!1}})],1)],2)}))],2)},mt=[],_t=a("1f0e"),xt=a("6892"),yt={name:"ReverseVisaInfoPopup",components:{Attachment:xt["a"]},props:{value:{type:Boolean,default:!1},data:{type:Array,default:function(){return[]}}},data:function(){return{list:[],layoutArr:[],groupInfo:{},dataModel:{}}},watch:{data:{handler:function(){this.init()},immediate:!0}},methods:{init:function(){var t=this,e=v["a"].resolve(),a="worksheet_visa_reverse_workflow_view";return this.layoutArr.length||(e=_t["c"].getLayout(a).then((function(t){var e=t[a];return _t["c"].getLayoutData(a,e)})).then((function(e){if(!e)return v["a"].reject();t.layoutArr=e.layoutArr,t.groupInfo=e.groupInfo,t.dataModel=e.dataModel}))),e.then((function(){var e=[];t.data.forEach((function(a){var i={item_id:a.item_id,attachments:a.attachments||[],openingAttachment:!1};for(var s in t.dataModel)if(s in a){var n=t.dataModel[s],o=n.label,c=n.type,r=n.units;i[s]={id:s,label:o,type:c,units:r,value:"contract_id"===s?a.contract_name:a[s]}}e.push(i)})),t.list=e})).catch((function(t){console.warn(t)}))},close:function(){this.$emit("input",!1)},openAttachment:function(t){t.attachments.length&&(t.openingAttachment=!t.openingAttachment)}}},wt=yt,kt=(a("d837"),Object(j["a"])(wt,bt,mt,!1,null,"1bf5a08c",null)),Ct=kt.exports;function zt(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,i)}return a}function jt(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?zt(Object(a),!0).forEach((function(e){Object(p["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):zt(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var St={name:"Flow",components:{ErpFlowItem:O,LocaleFlowItem:st,AreaGroupFlowItem:dt,ErpInvalidFlowItem:gt,ReverseVisaInfo:Ct},props:{procTypeId:{type:Number},flowName:{type:String,default:""},bizType:{type:Number},changeType:{type:String,default:""},detail:{type:Object,default:function(){}},sheet:{type:Object,default:function(){}}},data:function(){return{store:b["a"],collapseOpening:["localeErpItem","ErpFlowItem"],flowLayoutContract:[],flowLayout:[],openingReverseVisa:!1,reverseVisaData:[]}},computed:{showErpProcDetail:function(){return this.sheet.show_erp_proc_detial||!1},erp:function(){return this.sheet.erp_proc_data||[]},locale:function(){return"erp"!==this.sheet._from&&this.sheet.proc_display?this.sheet.proc_display:[]},flow:function(){var t=this,e=[];return 0!==this.locale.length?this.locale.forEach((function(a,i){e.push({name:Object(g["c"])(),type:"locale",list:a,localeIndex:i,last:i===t.locale.length-1}),e.push({name:Object(g["c"])(),type:"erp",data:t.erp[i],last:i===t.erp.length-1})})):this.erp.forEach((function(a,i){e.push({name:Object(g["c"])(),type:"erp",data:a,last:i===t.erp.length-1})})),"undefined"!==typeof this.area_check&&e.push({name:Object(g["c"])(),type:"area_check",title:"区域对数",data:jt(jt({},this.area_check),{status:this.getCheckStatus(this.area_check.status),majorsList:this.getMajorsList({data:this,checkType:"area_check"})})}),"undefined"!==typeof this.group_check&&e.push({name:Object(g["c"])(),type:"group_check",title:"集团对数",data:jt(jt({},this.group_check),{status:this.getCheckStatus(this.group_check.status),majorsList:this.getMajorsList({data:this,checkType:"group_check"})})}),1===this.sheet.erp_invaild_display&&e.push({type:"erp_invalid",data:this.sheet}),e},currentUserId:function(){return Object(f["d"])("user_id")},showTelSms:function(){return this.sheet.author===this.currentUserId&&"1"===this.sheet.check_status},erpStatusName:function(){var t="地产内部审批",e=Object(f["b"])();if(e){var a=Object(_["a"])(e.invoice_status,[]),i=a.find((function(t){return t.value===m["m"].authorized}));i&&i.name&&(t=i.name)}return t}},mounted:function(){this.init()},methods:{getCheckStatus:function(t){switch(t){case"0":return"未发起";case"1":return"已开始,请确认";case"2":return"对数中";case"3":return"已完成";default:return""}},handleOpenItem:function(t){~this.collapseOpening.indexOf(t)||this.collapseOpening.push(t)},getMajorsList:function(t){var e,a=t.data,i=t.checkType;try{e=a[i].log||{}}catch(s){e={}}return Object.keys(e).filter((function(t){return e[t].length>0}))},init:function(){var t=this,e={biz_type:this.bizType,change_type:this.changeType,layout_type:"flow"},a=Object(u["F"])(e).then((function(e){var a=e.data;a&&"object"===Object(d["a"])(a)&&a.layout&&(t.flowLayout=a.layout)})),i=Object(u["E"])(e).then((function(e){var a=e.data;a&&"object"===Object(d["a"])(a)&&a.layout&&(t.flowLayoutContract=Array.isArray(a.layout)&&a.layout.length>0?a.layout:[])}));v["a"].all([a,i]).then((function(){t.$nextTick((function(){t.collapseOpening=t.flow.filter((function(t){return t.last})).map((function(t){return t.name}))}))}))},goChat:function(t){t.approverId,t.bizId;this.$router.push({name:"message-im-chatInfo"})},sendSms:function(t){var e=this,a=t.approverId,i=t.bizId;Object(h["a"])({recipient_id:a,biz_id:i}).then((function(a){1===a.success&&e._sendSms(t)})).catch((function(t){var a=t.message;e.sui.alert(a)}))},_sendSms:function(t){var e=this,a=t.approverId,i=t.bizId;this.sui.confirm("确定发送短信催办吗？",(function(){return e.sui.showIndicator(),Object(h["i"])({contract_id:e.store.contracts[0]?e.store.contracts[0].contract_id:"",recipient_id:a,biz_id:i,biz_type:e.bizType,change_overview:e.sheet.change_overview}).then((function(t){e.sui.hideIndicator(),e.sui.toast("催办成功")})).catch((function(t){e.sui.hideIndicator(),e.sui.toast(t.message)}))}))},openReverseVisaInfo:function(t){this.reverseVisaData=t,this.openingReverseVisa=!0}}},Ot=St,Dt=(a("24e0"),Object(j["a"])(Ot,r,l,!1,null,"bf4f4658",null)),Tt=Dt.exports,It=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"relative-info-cell"},[a("ul",[t.relativeSheetList.length>=1?a("li",{on:{click:function(e){t.goDetail(t.relativeSheetList[0])}}},[a("div",{staticClass:"item-content item-link"},[a("div",{staticClass:"item-title"},[t._v(t._s(t.relativeSheetList[0].sheetName))]),a("span",["contract"===t.relativeSheetList[0].sheetType&&t.needJzcContract&&!t.jzcContract?a("span",{staticClass:"tip"},[t._v("未选择三方甲指合同")]):t._e(),a("i",{staticClass:"i-arrow iconfont icon-1_you"})])])]):t._e(),t.relativeSheetList.length>1?a("li",{staticClass:"sheet-list-wrapper"},[a("van-collapse",{attrs:{accordion:""},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[a("van-collapse-item",{attrs:{title:t.sheetListTitle,name:"sheetList"}},[a("ul",{staticClass:"sheet-list"},t._l(t.relativeSheetList.slice(1),(function(e,i){return a("li",{key:i,on:{click:function(a){t.goDetail(e)}}},[a("div",{staticClass:"item-content item-link"},[a("div",{staticClass:"item-title"},[t._v(t._s(e.sheetName))]),a("span",["contract"===e.sheetType&&t.needJzcContract&&!t.jzcContract?a("span",{staticClass:"tip"},[t._v("未选择三方甲指合同")]):t._e(),a("i",{staticClass:"i-arrow iconfont icon-1_you"})])])])})))])],1)],1):t._e()]),a("popup-page",{directives:[{name:"phy-back",rawName:"v-phy-back",value:{status:t.show,method:"cancel"},expression:"{status: show, method: 'cancel'}"}],staticClass:"popup",attrs:{value:t.show}},[a("v-header",{attrs:{slot:"header",title:"contract"===t.showing?"合同详情":"reverseVisa"===t.showing?"关联反签证清单":"multiWorksheet"===t.showing?t.workSheetName+"详情":"","back-action":t.cancel},slot:"header"}),a("div",{staticClass:"content"},["contract"===t.showing?[t.needJzcContract?a("div",{staticClass:"info-group-wrapper"},[a("div",{staticClass:"info-header"},[a("i",{staticClass:"iconfont icon-gongchengxietong-hetongquanxianguanli"}),a("span",[t._v("三方甲指合同信息")])]),a("div",{staticClass:"list-block"},[a("ul",{staticClass:"info-group"},t._l(t.contractItemKeys,(function(e,i){return a("li",{key:i},[a("div",{staticClass:"item-inner"},[a("div",{staticClass:"item-title label"},[t._v(t._s(e.label))]),a("div",{staticClass:"item-input"},[a("div",{staticClass:"text"},[t._v(t._s((t.jzcContract||t.localJzcContract||{})[e.id]||"--"))])])])])}))),!t.jzcContract&&t.jzcEnableAdd?a("div",{staticClass:"detail-btn-box"},[a("div",{staticClass:"wrap bt"},[a("span",{staticClass:"detail-btn",on:{click:function(e){t.openJzcContract()}}},[t._v("\n                  补关联三方合同\n                ")])])]):t._e()])]):t._e(),t._l(t.contractList,(function(e,i){return a("div",{key:i,staticClass:"info-group-wrapper"},[t.contractList.length||t.needJzcContract?a("div",{staticClass:"info-header"},[a("i",{staticClass:"iconfont icon-gongchengxietong-hetongquanxianguanli"}),a("span",[t._v(t._s(t.jzcContract||t.needJzcContract?"施工合同信息":"对应合同"+(t.contractList.length>1?i+1:"")))])]):t._e(),a("div",{staticClass:"list-block"},[a("ul",{staticClass:"info-group"},t._l(t.contractItemKeys,(function(i,s){return a("li",{key:s},[a("div",{staticClass:"item-inner"},[a("div",{staticClass:"item-title label"},[t._v(t._s(i.label))]),a("div",{staticClass:"item-input"},[a("div",{staticClass:"text"},[t._v(t._s(e[i.id]))])])])])})))]),t.erpContractObjs[i]?a("div",{staticClass:"erp-contract component-form"},[a("div",{staticClass:"list-block"},[a("ul",{staticClass:"info-group"},t._l(t.erpContractObjs[i],(function(e,i){return a("li",{key:i},[a("div",{staticClass:"item-inner"},[a("div",{staticClass:"item-title label"},[t._v(t._s(e.name))]),a("div",{staticClass:"item-input"},[a("div",{staticClass:"text"},[t._v(t._s(e.value))])])])])})))])]):t._e()])}))]:"reverseVisa"===t.showing?t._l(t.reverseVisaData,(function(e,i){return a("div",{key:i,staticClass:"info-group-wrapper"},[a("div",{staticClass:"info-header"},[a("i",{staticClass:"iconfont icon-gongchengxietong-hetongquanxianguanli"}),a("span",[t._v("反签证"+t._s(t.reverseVisaData.length>1?i+1:""))])]),a("div",{staticClass:"list-block"},[a("ul",{staticClass:"info-group"},[a("li",[a("div",{staticClass:"item-inner"},[a("div",{staticClass:"item-title label"},[t._v("合同名称")]),a("div",{staticClass:"item-input"},[a("div",{staticClass:"text"},[t._v(t._s(e.contract_name))])])])]),a("li",[a("div",{staticClass:"item-inner"},[a("div",{staticClass:"item-title label"},[t._v("乙方单位")]),a("div",{staticClass:"item-input"},[a("div",{staticClass:"text"},[t._v(t._s(e.yf_company))])])])]),a("li",[a("div",{staticClass:"item-inner"},[a("div",{staticClass:"item-title label"},[t._v("申报金额")]),a("div",{staticClass:"item-input"},[a("div",{staticClass:"text"},[t._v("\n                      "+t._s(t.formatMoney(e.estimated_cost))+"\n                    ")])])])]),a("li",[a("div",{staticClass:"item-inner"},[a("div",{staticClass:"item-title label"},[t._v("审核金额")]),a("div",{staticClass:"item-input"},[a("div",{staticClass:"text"},[t._v("\n                      "+t._s(t.formatMoney(e.reviewed_cost))+"\n                    ")])])])])]),a("div",{staticClass:"detail-btn-box"},[a("div",{staticClass:"wrap bt"},[a("span",{staticClass:"detail-btn",on:{click:function(a){t.goReverseDetail(e)}}},[t._v("\n                  查看详情\n                ")])])])])])})):"multiWorksheet"===t.showing?t._l(t.multiWorksheetInfo,(function(e,i){return a("div",{key:i,staticClass:"info-group-wrapper"},[a("div",{staticClass:"info-header"},[a("i",{staticClass:"iconfont icon-gongchengxietong-hetongquanxianguanli"}),a("span",[t._v("对应工联单"+t._s(t.multiWorksheetInfo.length>1?i+1:""))])]),a("div",{staticClass:"list-block"},[a("ul",{staticClass:"info-group"},[a("li",[a("div",{staticClass:"item-inner"},[a("div",{staticClass:"item-title label"},[t._v("变更名称")]),a("div",{staticClass:"item-input"},[a("div",{staticClass:"text"},[t._v(t._s(e.change_overview))])])])]),a("li",[a("div",{staticClass:"item-inner"},[a("div",{staticClass:"item-title label"},[t._v("变成编号")]),a("div",{staticClass:"item-input"},[a("div",{staticClass:"text"},[t._v(t._s(e.ws_code))])])])]),a("li",[a("div",{staticClass:"item-inner"},[a("div",{staticClass:"item-title label"},[t._v("合同名称")]),a("div",{staticClass:"item-input"},[a("div",{staticClass:"text"},[t._v("\n                      "+t._s(e.contract_info.contract_name)+"\n                    ")])])])]),a("li",[a("div",{staticClass:"item-inner"},[a("div",{staticClass:"item-title label"},[t._v("乙方单位")]),a("div",{staticClass:"item-input"},[a("div",{staticClass:"text"},[t._v("\n                      "+t._s(e.contract_info.yf_company)+"\n                    ")])])])])]),a("div",{staticClass:"detail-btn-box"},[a("div",{staticClass:"wrap bt"},[a("span",{staticClass:"detail-btn",on:{click:function(a){t.goDetail({bizType:t.WORK_SHEET,changeType:t.changeType,id:e.worksheet_id})}}},[t._v("\n                  查看详情\n                ")])])])])])})):t._e()],2),t.localJzcContract?a("app-button-group",{attrs:{slot:"footer"},slot:"footer"},[a("app-button",{on:{click:function(e){t.addJzcContract()}}},[t._v("保存")])],1):t._e()],1),a("select-biz-field",t._b({directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],ref:"JzcContractField",staticClass:"field-jzc-contract",on:{change:t.onJzcContractChange}},"select-biz-field",Object.assign({},t.jzcContractField),!1))],1)},At=[],Et=(a("6a61"),a("ed32")),Nt=a("d759"),Rt=a("11a7"),Pt=a("41a4"),Lt=a("cae8"),Mt=a("5fe8"),Ft=a("3ec3"),Bt=a("c91b"),Kt=a("2d5c");function Wt(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,i)}return a}function Vt(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?Wt(Object(a),!0).forEach((function(e){Object(p["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):Wt(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var $t={contract_name:"合同名称",contract_no:"合同编号",project_name:"所属项目",yf_company:"乙方单位"},qt={name:"RelativeInfo",props:{detail:{type:Object,default:function(){return{}}},bizType:{type:Number},changeType:{type:String,default:""},sheetList:{type:Array,default:function(){return[]}},sheetId:{type:String},sheet:{type:Object,default:function(){}},sheetName:{type:String,default:""},contracts:{type:Array,default:function(){return[]}}},data:function(){return Vt({show:!1,allowAccessMeeting:Rt["a"].getMeetingRecordAuthority(),contractList:[],erpContractObjs:{},activeName:"",contractItemKeys:[{id:"contract_name",label:"合同名称"},{id:"contract_no",label:"合同编号"},{id:"project_name",label:"所属项目"},{id:"yf_company",label:"乙方单位"}],openingReverseVisa:!1,reverseVisaData:[],showing:"",jzcContractField:{id:"jzc_contract_id",type:"selectBiz",keyword:"",options:[],pageIndex:1,pagingStatus:0,text:"",topSearch:!0,value:"",pagingFun:Nt["a"].pagingFunJzc,keyMap:Bt["a"].selectBiz.keymap,relative_query:["contract_id"]},localJzcContract:null,workSheetName:Object(Pt["a"])(Mt["a"].WORK_SHEET,this.changeType)},Mt["a"])},computed:{curConfig:function(){return Ft["a"][this.bizType]},sheetListTitle:function(){return"sheetList"===this.activeName?"收起":"查看相关联单据"},multiWorksheetInfo:function(){return this.sheet.worksheet_info_list||[]},contractIds:function(){var t=this,e=this.contracts.map((function(t){return t.contract_id}));return this.sheet.jzc_contract_info&&(e=e.filter((function(e){return e!==t.sheet.jzc_contract_info.contract_id}))),e},needJzcContract:function(){return this.curConfig.detail.needJzcContract||!1},jzcContract:function(){return this.sheet.jzc_contract_id?Vt(Vt({},this.sheet.jzc_contract_info),{},{jzc_contract_id:this.sheet.jzc_contract_id}):null},jzcEnableAdd:function(){return"1"===this.sheet.enable_add_jzc_contract},relativeSheetList:function(){var t=this,e=[];return this.contracts.length&&e.push({sheetName:"查看合同详情",sheetType:"contract"}),this.sheetList.forEach((function(a){(a.bizType!==t.MEETING_RECORD||a.auth&&!t.allowAccessMeeting)&&a.bizType===t.MEETING_RECORD||e.push(Vt(Vt({},a),{},{sheetName:"查看关联".concat(t.getBizName(a),"详情"),sheetType:"biz"}))})),this.multiWorksheetInfo.length&&e.push({sheetName:"查看各合同对应".concat(this.workSheetName,"详情"),sheetType:"multiWorksheetInfo"}),e}},mounted:function(){var t=this.curConfig.detail.contractItemKeys;t&&("string"===typeof t[0]?this.contractItemKeys=t.map((function(t){return{id:t,label:$t[t]}})):this.contractItemKeys=t),this.getContractInfo(),this.getErpContractInfo()},methods:{formatMoney:function(t){return E["a"].number.format(Number(t).toFixed(2),2)},goContractDeatil:function(){this.showing="contract",this.show=!0},cancel:function(){this.show=!1},getBizName:function(t){var e=t.title,a=t.bizType;return e||(Object(Pt["a"])(a,this.changeType)||"单据")},goDetail:function(){var t=Object(Et["a"])(regeneratorRuntime.mark((function t(e){var a,i,s,n,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a=e.bizType,i=e.changeType,s=e.sheetType,"contract"!=s){t.next=7;break}this.goContractDeatil(),t.next=25;break;case 7:if("multiWorksheet"!==s){t.next=12;break}this.show=!0,this.showing="multiWorksheet",t.next=25;break;case 12:if("negative_visa_list_display"!==e.idKey){t.next=18;break}this.reverseVisaData=e.data,this.show=!0,this.showing="reverseVisa",t.next=25;break;case 18:if("biz"!==s||!a){t.next=25;break}if(n=e.authCheckFn,!n||"function"!==typeof n){t.next=23;break}return t.next=23,n(e);case 23:o={name:Object(Lt["b"])(a,"Detail",i),query:{id:e.id,hide_top:Ft["a"][a]["isTCMode"]?void 0:"1"}},this.$router.push(o);case 25:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),getContractInfo:function(){var t=this;this.contractIds.length&&Nt["a"].getById(this.contractIds).then((function(e){Array.isArray(e)?t.contractList=e:t.contractList=[e]}))},getErpContractInfo:function(){var t=this;if(this.curConfig.detail.needErpContractInfo){var e=[];this.contracts.forEach((function(t){var a=t.erp_contract_id;e.push(a?Nt["a"].getErpContractAmout(a):v["a"].resolve(null))})),v["a"].all(e).then((function(e){e.forEach((function(t){for(var e in t)t[e].name=t[e].name.replace(/\：$/,"")})),t.erpContractObjs=e}))}},goReverseDetail:function(t){var e=this.curConfig.sheetIdKey,a=t[e],i={name:Object(Lt["b"])(this.bizType,"Detail",this.changeType),query:{id:a}};this.changeType&&(i.query.change_type=this.changeType),this.$router.push(i),this.show=!1},openJzcContract:function(){this.$refs.JzcContractField.triggerClick()},onJzcContractChange:function(t,e){var a=this,i=Vt(Vt({},e[0].__orgOption),{},{jzc_contract_id:t});return Nt["a"].getDetailById(t).then((function(t){i=Vt(Vt({},i),t)})).finally((function(){a.localJzcContract=i}))},addJzcContract:function(){var t=this;return Object(Kt["a"])({contract_id:this.localJzcContract.jzc_contract_id,apply_id:this.sheetId}).then((function(){t.$vBus.$emit("page-reinit")})).catch((function(e){var a=e.message;a&&t.sui.toast(a)}))}}},Ut=qt,Gt=(a("7892"),Object(j["a"])(Ut,It,At,!1,null,"28c5b811",null)),Ht=Gt.exports,Jt=a("b50c"),Yt=a("2bf9"),Xt=a("7b41"),Qt=a("69b8"),Zt=a("6413"),te=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.enable?a("div",{staticClass:"pyament-process-cell",class:[t.data.length?"mode-view":"mode-edit"]},[a("van-cell",{staticClass:"cell",attrs:{value:t.cellLabel},on:{click:t.open}},[t.data.length?t._e():a("i",{staticClass:"icon__plus iconfont icon--jia",attrs:{slot:"icon"},slot:"icon"})]),a("popup-page",{directives:[{name:"phy-back",rawName:"v-phy-back",value:{status:t.show,method:"cancel"},expression:"{status: show, method: 'cancel'}"}],attrs:{value:t.show}},[a("v-header",{attrs:{slot:"header",title:"进度款清单","back-action":t.cancel},slot:"header"}),a("div",{staticClass:"pyament-process--popup-content",staticStyle:{overflow:"auto"}},t._l(t.renderArr,(function(e,i){return a("div",{key:i,staticClass:"payment-group"},[a("div",{staticClass:"payment-header"},[a("i",{staticClass:"iconfont icon-_gongchengliangqian"}),a("span",[t._v(t._s(t.groupName+(i+1)))])]),a("div",{staticClass:"list-block"},[a("ul",{staticClass:"payment-item"},t._l(e,(function(e){return a("li",{key:e.id},[a("div",{staticClass:"item-inner"},[a("div",{staticClass:"item-title label"},[t._v(t._s(e.label))]),a("div",{staticClass:"item-input"},[a("div",{staticClass:"text"},[t._v(t._s(e.value))])])])])})))])])})))],1)],1):t._e()},ee=[],ae=a("31f2"),ie={name:"PaymentProcess",mixins:[ae["a"]],props:{bizType:{type:Number},changeType:{type:String,default:""},data:{type:Array,default:function(){return[]}},sheet:{type:Object,default:function(){}},layoutCode:{type:String,default:"payment"}},data:function(){return{enable:!1,auth:!1,formEdit:!1,show:!1,renderArr:[]}},computed:{cellLabel:function(){return this.data.length?"".concat(this.groupName,"(").concat(this.renderArr.length,")"):"添加进度款清单"}},mounted:function(){window.paymentProcess=this,this.init()},methods:{open:function(){this.data.length?this.show=!0:this.sui.toast("请在PC端填写".concat(this.groupName,"后，再进行审批"))},cancel:function(){this.show=!1},init:function(){var t=this;this.checkAuth().then((function(e){var a=e.layoutArr,i=e.groupInfo,s=e.dataModel;e.relations;(!1===t.auth||0===t.auth||void 0===t.auth||0===t.data.length&&!1===t.formEdit)&&(t.enable=!1),t.groupName=i[0].name;var n=a[0];t.data.forEach((function(e){var a=[];n.forEach((function(t){var i=s[t];i.value=i.text=e[t],"number"===i.type&&i.units&&"元"===i.units.text&&!("round"in i)&&(i.round=2),a.push(i)})),t.renderArr.push(a)}))})).catch((function(t){console.warn(t)}))},checkAuth:function(){var t=this,e=Object(f["d"])("user_id"),a=Object(f["a"])("role_code");return this.auth=!1,this.formEdit=!1,_t["c"].getLayout([this.layoutCode]).then((function(i){if(!i||!i[t.layoutCode])return Promise.reject("payment-process layout缺失");var s,n=i[t.layoutCode],o=_t["c"].layout2Obj([n]),c=o.layoutArr,r=o.groupInfo,l=o.dataModel,d=o.relations,p=n.effectModule,u=n.effectRole;try{s=p[t.bizType],s=t.changeType?s[t.changeType]:s,s=s&&(void 0===u[a]?u["all"]:u[a])}catch(f){console.warn(f)}return t.auth=s,p?(2===s?(t.formEdit=!0,t.enable=!1):4===s?(t.formEdit=!1,t.enable=!0):6===s&&(t.formEdit=!0,t.enable=!0),"1"===t.sheet.check_status&&t.sheet.sp_user===e||(t.formEdit=!1)):(t.formEdit=!1,t.enable=!1),{layoutArr:c,groupInfo:r,dataModel:l,relations:d}}))},getData:function(){var t=this.auth,e=this.groupName;return!1===t||0===t||void 0===t||4===t?[]:0===this.data.length?(this.sui.toast("请在PC端填写"+e+"后，再进行审批"),!1):this.data}}},se=ie,ne=(a("47c8"),Object(j["a"])(se,te,ee,!1,null,"2bb9ae56",null)),oe=ne.exports,ce=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"accept-sheet-section"},[a("van-collapse",{attrs:{accordion:""},model:{value:t.collapseOpening,callback:function(e){t.collapseOpening=e},expression:"collapseOpening"}},[a("van-collapse-item",{attrs:{name:"default",title:"签收单"}},[a("div",{staticClass:"flow-item-list"},[a("div",{staticClass:"flow-item",class:{"-current":t.info.is_cur_node},attrs:{"work-type":t.info.status}},[a("i",{staticClass:"status-icon iconfont icon-selected"}),a("div",{staticClass:"item-content"},[a("div",{staticClass:"line line-name"},[a("span",{staticClass:"name"},[t._v(t._s(t.info.user_name)+"\n                "),t.info.station_name?a("span",{staticClass:"fz-14 station-name"},[t._v(" ("+t._s(t.info.station_name)+")")]):t._e(),t.info.cc_users&&t.info.cc_users.length>0?a("span",{staticClass:"span-people-copy action-label",on:{click:t.handlerPeopleCopy}},[a("i",{staticClass:"iconfont icon-_biaoqian-caosong"})]):t._e()])]),a("div",{staticClass:"line line-status"},[a("span",{staticClass:"item-status"},[t._v(t._s(t.info.status_des))]),a("span",{staticClass:"time"},[t._v(t._s(t.info.update_time))])]),a("div",{staticClass:"line line-attachments"},[a("attachment",{attrs:{"show-title":!1,edit:!1,list:t.info.attachments||[]}})],1)])])])])],1)],1)},re=[],le={name:"AcceptSheetFlow",components:{Attachment:xt["a"]},props:{info:{type:Object,default:function(){}}},data:function(){return{collapseOpening:"default"}},computed:{},methods:{handlerPeopleCopy:function(){this.sui.modal({title:"抄送详情",text:'\n            <div class="cc-model-dev">\n              <div class="left">抄送对象：</div>\n              <div class="right">'.concat(this.info.cc_users.map((function(t){return t.name})).join("，"),"</div>\n            </div>\n          "),buttons:[{text:"我知道了"}]})}}},de=le,pe=(a("37f4"),Object(j["a"])(de,ce,re,!1,null,"1adf7ef5",null)),ue=pe.exports,fe=a("6280"),he=a("1f8c"),ve=a("b893"),ge=a("9a340"),be=a("f04f"),me=a("8935"),_e=a("fe6f"),xe=a("9249"),ye={name:"BusinessDetailView",components:{ViewTemplate:c["a"],Flow:Tt,RelativeInfo:Ht,CardHeader:Jt["a"],FormDetail:Yt["a"],UploadImages:Xt["a"],RelativeFieldGroup:he["a"],SubForm:Qt["a"],Attachment:xt["a"],ApproveGroup:Zt["a"],PaymentProcess:oe,AcceptSheetFlow:ue,UserSelector:fe["a"]},props:{data:{type:Object,default:null},comps:{type:Array,default:function(){return["RelativeInfo","CardHeader","FormDetail","RelativeFieldGroup","SubForms","UploadImages","Attachment","Flow"]}},config:{type:Object,default:function(){}},bizType:{type:Number},changeType:{type:String,default:""},pageTitle:{type:String,default:""}},data:function(){var t=this.config.edit.subForms.reduce((function(t,e){return t[e.id]={isEnable:!1},t}),{});return b["a"].reset(),b["a"].bizType=this.bizType,b["a"].changeType=this.changeType,{isIOS:Object(_e["b"])(),BizKeys:Mt["a"],store:b["a"],contractItemKeys:[{id:"contract_name",label:"合同名称"},{id:"contract_no",label:"合同编号"},{id:"project_name",label:"所属项目"},{id:"yf_company",label:"乙方单位"}],showUnlockInfo:!0,ccList:[],subFormsSetting:t}},computed:{isProjectMode:function(){return this.config.isProjectMode},isAandoned:function(){return("4"===this.data.sheetDetail.check_status||"5"===this.data.sheetDetail.check_status||("已终止"===this.data.sheetDetail.erp_check_status||"已作废"===this.data.sheetDetail.erp_check_status)&&"2"===this.data.sheetDetail.check_status)&&this.data.sheetDetail.sp_action.length<2},sheetId:function(){return this.$route.query.id||""},sheetName:function(){return this.config.detail.getTitle?this.config.detail.getTitle(this.bizType,this.changeType):""},title:function(){return this.pageTitle||"查看"+this.sheetName},hide_top:function(){return!!this.$route.query.hide_top},contracts:function(){return this.data&&this.data.contracts||[]},contractIds:function(){return this.contracts.map((function(t){return t.contract_id}))},otherSheetList:function(){var t=this,e=[];return Array.isArray(this.config.detail.otherSheetList)&&this.config.detail.otherSheetList.forEach((function(a){var i=t.changeType,s="",n=null,o=a.bizType||!1;if("negative_visa_list_display"===a.idKey)n=Object(ve["c"])(t.data.sheetDetail,a.idKey),n&&n.length&&(s="negative_visa_list_display");else if("positive_biz_id"===a.idKey)o=t.bizType,s=Object(ve["c"])(t.data.sheetDetail,a.idKey);else if("qz_biz_id"===a.idKey){var c=t.data.sheetDetail.qz_biz_type.split("_");o=+c[0],i=c[1],s=t.data.sheetDetail.qz_biz_id}else"pre_biz_id"===a.idKey?t.data.sheetDetail[a.idKey]&&(s=Object(ve["c"])(t.data.sheetDetail,a.idKey),o=Object(ve["c"])(t.data.sheetDetail,a.bizTypeKey)):s=Object(ve["c"])(t.data.sheetDetail,a.idKey);o!==Mt["a"].WORK_SHEET&&o!==Mt["a"].CONFIRMSHEET&&o!==Mt["a"].SPECIAL_CONFIRM_SHEET&&o!==Mt["a"].PRE_CONFIRM_SHEET&&o!==Mt["a"].MULTI_WORK_SHEET&&(i=""),s&&"-"!==s&&e.push({changeType:i,id:s,idKey:a.idKey,title:a.title||"",bizType:o,auth:!!a.auth,authCheckFn:a.authCheckFn,data:n})})),e},canAppend:function(){var t=this.data.sheetDetail,e=Object(f["d"])("user_id");return t.check_status===m["a"].overview&&t.sp_user_list.some((function(t){return t.sp_user===e}))&&t.sp_action.every((function(t){return"reSubmit"!==t.action}))&&t.sp_action.every((function(t){return"commReply"!==t.action}))||1===+t.is_open_append_attachment},canSupply:function(){var t=this.data.sheetDetail,e=Object(f["d"])("user_id");return t.author===e&&("审核中"===t.erp_check_status||"未审核"===t.erp_check_status)&&1===+t.is_open_append_attachment_to_erp}},watch:{data:{handler:function(t){for(var e in t)e in this.$data&&(this[e]=t[e]),e in this.store&&(this.store[e]=t[e])},immediate:!0}},provide:function(){var t=this;return{getSheetData:function(){return t.data},approveBeforeClick:function(e){var a=t.getSheetRefs().attachment.attachment,i=Object(f["d"])("user_id");if(t.data.sheetDetail.author!==i&&t.store.contracts.length){var s=Nt["a"].checkContractHasExpire(t.store.contracts,"view"),n=s.flag,o=s.msg;if(!n)return o&&t.sui.toast(o),!1}if((t.canAppend||t.canSupply)&&a&&[me["b"].sign,me["b"].complete,me["b"].backAddSign,me["b"].submit,me["b"].countersignPass].includes(e)){if(a.hasUploading())return t.sui.toast("请等待附件上传完毕"),!1;var c=a.validateRequirement(),r=c.flag;if(!r)return t.sui.alert({title:"提示",message:t.isIOS?"有必须追加的附件，请用电脑登录工程协同网页上传附件。":t.bizType===Mt["a"].TC_TASK_REPORT?"请先上传必须追加的附件":"有必须追加的附件，请用电脑登录工程协同网页上传附件。",confirmButtonText:"我知道了"}),!1}return!0},getFormData:function(){return t.data.formData}}},mounted:function(){var t=this;window.BusinessDetailView=this;var e=Object(o["a"])(this.config.detail.subForms||[]);e.forEach((function(e){var a,i=e.id,s=e.layoutId,n={layoutId:s,bizType:t.bizType,changeType:t.changeType};a="gld_workloads"===i||"sub_form_jzc_clapply"===i?ge["a"].getSubFormSetting(n,!0):"material_item_list"===i?be["a"].getSubFormSetting(n).then((function(t){return t.isSpMode=!0,t.spMulti=!0,t})):ge["a"].getSubFormSetting(n),a.then((function(e){e&&e.isEnable&&(t.subFormsSetting[i]=e)})).catch((function(t){console.error(t)}))}))},beforeDestroy:function(){xe["a"].clear()},methods:{getSheetRefs:function(){var t={};for(var e in this.$refs){var a=this.$refs[e],i=Array.isArray(a)?a[0]:a;t[e]=i}return t},closeUnlockInfo:function(){this.showUnlockInfo=!1}}},we=ye,ke=(a("3135"),Object(j["a"])(we,s,n,!1,null,"6ae906c4",null));e["a"]=ke.exports},"18c5":function(t,e,a){t.exports=a.p+"img/auth_sp_2.022bb3b1.png"},"1bc2":function(t,e,a){e=t.exports=a("690e")(!1),e.push([t.i,".gcxt .area-group-flow-item[data-v-bf4f4658],.gcxt .erp-flow-item[data-v-bf4f4658],.gcxt .erp-invalid-flow-item[data-v-bf4f4658],.gcxt .locale-flow-item[data-v-bf4f4658]{margin-bottom:10px}",""])},"1eb4":function(t,e,a){var i=a("0823");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var s=a("85cb").default;s("364e8a3f",i,!0,{sourceMap:!1,shadowMode:!1})},"24e0":function(t,e,a){"use strict";a("80c4")},"267f":function(t,e,a){var i=a("9487");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var s=a("85cb").default;s("2cf69214",i,!0,{sourceMap:!1,shadowMode:!1})},3135:function(t,e,a){"use strict";a("7840")},"37f4":function(t,e,a){"use strict";a("ca57")},"47c8":function(t,e,a){"use strict";a("962e")},"4ceb":function(t,e,a){e=t.exports=a("690e")(!1),e.push([t.i,".gcxt[data-v-4ccadc7f] :export{colorPrimary:#0268b3;headerBackgroundColor:#fff;headerTextColor:#333}.gcxt .approver-content[data-v-4ccadc7f]{padding:12px 0}.gcxt .line[data-v-4ccadc7f]{display:-webkit-box;display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap}.gcxt .line>.name[data-v-4ccadc7f]{-webkit-box-flex:1;-ms-flex-positive:1;flex-grow:1;width:calc(100% - 35px)}.gcxt .line-name[data-v-4ccadc7f]{font-size:14px;-webkit-box-align:end;-ms-flex-align:end;align-items:flex-end;color:#1b1b1b}.gcxt .station-name[data-v-4ccadc7f]{font-size:14px;color:#000}.gcxt .action-button[data-v-4ccadc7f]{margin-left:14px;width:20px;height:20px;font-size:20px;line-height:1;color:#0268b3}.gcxt .is-set-invalid-cost-flow[data-v-4ccadc7f]{color:#0268b3}.gcxt .item-status[data-v-4ccadc7f]{color:#999}.gcxt .line-status[data-v-4ccadc7f]{-ms-flex-wrap:nowrap;flex-wrap:nowrap;padding-top:5px}.gcxt .line-status>.item-status[data-v-4ccadc7f]{-webkit-box-flex:1;-ms-flex-positive:1;flex-grow:1}.gcxt .line-status>.time[data-v-4ccadc7f]{margin-left:5px;font-size:13px;color:#8e8e93;white-space:nowrap}.gcxt .action-label[data-v-4ccadc7f]{margin-top:5px;margin-right:5px;font-size:12px;border-radius:2px;line-height:16px;display:inline-block}.gcxt .span-people-copy[data-v-4ccadc7f]{color:#7d8fff}.gcxt .span-add-sign[data-v-4ccadc7f]{color:#ddb984}.gcxt .span-timeout[data-v-4ccadc7f]{color:#ff594d}.gcxt .span-contract_add[data-v-4ccadc7f]{color:#53cc00}.gcxt .line-flow-layout[data-v-4ccadc7f]{line-height:23px}.gcxt .sp-flow[data-v-4ccadc7f]{width:100%;color:#7b7b81;font-size:13px}.gcxt .line-remark[data-v-4ccadc7f]{padding-top:3px;line-height:20px;font-size:13px;color:#69696e}.gcxt .go-reverse-list-btn[data-v-4ccadc7f]{margin-top:5px;display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;border:1px solid #dcdcdc;padding:2px 7px;border-radius:20px;background:#fff}.gcxt .go-reverse-list-btn .text[data-v-4ccadc7f]{color:#666;font-size:13px}.gcxt .go-reverse-list-btn .icon__arrow[data-v-4ccadc7f]{font-size:10px;color:#999;margin-left:4px}",""])},"5a96":function(t,e,a){var i=a("0613");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var s=a("85cb").default;s("05a94bce",i,!0,{sourceMap:!1,shadowMode:!1})},"62da":function(t,e,a){e=t.exports=a("690e")(!1),e.push([t.i,'.gcxt[data-v-3b80e91a] :export{colorPrimary:#0268b3;headerBackgroundColor:#fff;headerTextColor:#333}[data-v-3b80e91a] .van-collapse-item{margin-bottom:10px}[data-v-3b80e91a] .van-collapse-item__content{padding:0;color:inherit}[data-v-3b80e91a] .van-cell{position:relative;padding:10px 0 10px 15px}[data-v-3b80e91a] .van-cell:before{bottom:0;content:" ";position:absolute;z-index:1;right:0;border-top:1px solid #ececec;-webkit-transform:scaleY(.5);transform:scaleY(.5);left:0;left:15px}[data-v-3b80e91a] .van-cell__title{font-size:16px}[data-v-3b80e91a] .van-icon{font-size:18px;margin-left:0;width:44px;text-align:center;color:#b5b5b5}.gcxt .step-item-list[data-v-3b80e91a]{padding:11px 0 15px}.gcxt .status-icon[data-v-3b80e91a]{display:block;font-size:16px;width:43px;text-align:center;padding-top:15px;line-height:1;position:relative}.gcxt .status-icon[data-v-3b80e91a]:after{content:"";width:1px;height:100%;position:absolute;background-color:#e6e6e6;left:50%;margin-left:-1px;top:31px}.gcxt .step-item[data-v-3b80e91a]{display:-webkit-box;display:-ms-flexbox;display:flex;padding:5px 15px 5px 0}.gcxt .step-item:last-of-type .status-icon[data-v-3b80e91a]:after{display:none}.gcxt .icon-_daishenpi[data-v-3b80e91a]{color:#c9c9c9}.gcxt .current-step .icon-_daishenpi[data-v-3b80e91a]{color:#f90}.gcxt .icon-_shenpitongguo[data-v-3b80e91a],.gcxt .icon-_tianjia[data-v-3b80e91a]{color:#74c913}.gcxt .icon-_zuofei[data-v-3b80e91a]{color:#f65e5e;font-size:15px}.gcxt .icon-_zhuanjiao-flow[data-v-3b80e91a]{color:#74c913}.gcxt .erp-invalid .icon-_zuofei[data-v-3b80e91a]{color:#848484}.gcxt .icon-_dahui[data-v-3b80e91a],.gcxt .icon-baocuo[data-v-3b80e91a]{color:#f65e5e}.gcxt .icon--unstar[data-v-3b80e91a]:before{content:"";display:inline-block;background-color:#c9c9c9;border-radius:50%;width:16px;height:16px}.gcxt .item-content[data-v-3b80e91a]{position:relative;width:calc(100% - 43px);padding:0 5px;background:#f5f5f5;border-radius:3px}.gcxt .item-content[data-v-3b80e91a]:before{content:"";position:absolute;top:15px;left:-20px;border:10px solid transparent;border-right-color:#f5f5f5}.gcxt .step-point[data-v-3b80e91a]{display:-webkit-box;display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap;padding:10px 0;position:relative}.gcxt .step-point[data-v-3b80e91a]:before{bottom:0;content:" ";position:absolute;z-index:1;right:0;border-top:1px dashed #d9d9d9;-webkit-transform:scaleY(.5);transform:scaleY(.5);left:0}.gcxt .step-point .step_desc[data-v-3b80e91a]{margin-right:10px;font-size:16px;color:#999}.gcxt .step-point .step_name[data-v-3b80e91a]{font-size:16px;color:#666}.gcxt .flow-item-list[data-v-3b80e91a] [work-type="1"] .item-status,.gcxt .flow-item-list[data-v-3b80e91a] [work-type="2"] .item-status,.gcxt .flow-item-list[data-v-3b80e91a] [work-type="3"] .item-status,.gcxt .flow-item-list[data-v-3b80e91a] [work-type="5"] .item-status,.gcxt .flow-item-list[data-v-3b80e91a] [work-type="11"] .item-status,.gcxt .flow-item-list[data-v-3b80e91a] [work-type="12"] .item-status,.gcxt [work-type="1"] .step_desc[data-v-3b80e91a],.gcxt [work-type="2"] .step_desc[data-v-3b80e91a],.gcxt [work-type="3"] .step_desc[data-v-3b80e91a],.gcxt [work-type="5"] .step_desc[data-v-3b80e91a],.gcxt [work-type="10"] .step_desc[data-v-3b80e91a],.gcxt [work-type="11"] .step_desc[data-v-3b80e91a],.gcxt [work-type="12"] .step_desc[data-v-3b80e91a]{color:#74c913}.gcxt .flow-item-list[data-v-3b80e91a] [work-type="10"] .item-status{color:#ddb984}.gcxt .current-step .step_desc[data-v-3b80e91a],.gcxt .flow-item-list[data-v-3b80e91a] .-current[work-type="0"] .item-status{color:#f90}.gcxt .flow-item-list[data-v-3b80e91a] [work-type="4"] .item-status,.gcxt .flow-item-list[data-v-3b80e91a] [work-type="14"] .item-status,.gcxt .flow-item-list[data-v-3b80e91a] [work-type="15"] .item-status,.gcxt .flow-item-list[data-v-3b80e91a] [work-type="16"] .item-status,.gcxt .flow-item-list[data-v-3b80e91a] [work-type="17"] .item-status,.gcxt [work-type="4"] .step_desc[data-v-3b80e91a],.gcxt [work-type="14"] .step_desc[data-v-3b80e91a],.gcxt [work-type="15"] .step_desc[data-v-3b80e91a],.gcxt [work-type="16"] .step_desc[data-v-3b80e91a],.gcxt [work-type="17"] .step_desc[data-v-3b80e91a]{color:#74c913}.gcxt .flow-item-list[data-v-3b80e91a] [work-type="8"] .item-status,.gcxt .flow-item-list[data-v-3b80e91a] [work-type="9"] .item-status,.gcxt .flow-item-list[data-v-3b80e91a] [work-type="13"] .item-status,.gcxt [work-type="8"] .step_desc[data-v-3b80e91a],.gcxt [work-type="9"] .step_desc[data-v-3b80e91a],.gcxt [work-type="13"] .step_desc[data-v-3b80e91a]{color:#f65e5e}.gcxt .flow-item-list[data-v-3b80e91a] [work-type="6"] .item-status,.gcxt [work-type="6"] .step_desc[data-v-3b80e91a]{color:#848484}.gcxt .step-item[work-type="0"][data-v-3b80e91a]:not(.current-step) .line-name .name,.gcxt .step-item[work-type="0"][data-v-3b80e91a]:not(.current-step) .line-name .station-name,.gcxt .step-item[work-type="0"][data-v-3b80e91a]:not(.current-step) .step_name{color:#999}.gcxt .flow-item-list.more[data-v-3b80e91a] .reassign_type,.gcxt .flow-item-list.more[data-v-3b80e91a] .reassign_type+.flow-item{position:relative;padding-left:15px}.gcxt .flow-item-list.more[data-v-3b80e91a] .reassign_type+.flow-item:before,.gcxt .flow-item-list.more[data-v-3b80e91a] .reassign_type:before{content:"";position:absolute;top:18px;left:2px;width:7px;height:7px;border-radius:50%;background:#c8c8c8}.gcxt .flow-item-list.more[data-v-3b80e91a] .reassign_type:after{content:"";position:absolute;top:24px;left:5px;width:1px;height:100%;background:#c8c8c8}',""])},7466:function(t,e,a){"use strict";a("267f")},7840:function(t,e,a){var i=a("d55c");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var s=a("85cb").default;s("061815a1",i,!0,{sourceMap:!1,shadowMode:!1})},7892:function(t,e,a){"use strict";a("a083")},"80c4":function(t,e,a){var i=a("1bc2");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var s=a("85cb").default;s("39ae78f4",i,!0,{sourceMap:!1,shadowMode:!1})},"818c":function(t,e,a){e=t.exports=a("690e")(!1),e.push([t.i,".gcxt[data-v-2bb9ae56] :export{colorPrimary:#0268b3;headerBackgroundColor:#fff;headerTextColor:#333}.gcxt .pyament-process-cell[data-v-2bb9ae56]{margin-bottom:10px}.gcxt .icon__plus[data-v-2bb9ae56]{font-size:13px}.gcxt .icon__item[data-v-2bb9ae56],.gcxt .icon__plus[data-v-2bb9ae56]{margin-right:5px;color:#0268b3}[data-v-2bb9ae56] .van-cell__value--alone{font-size:16px}.gcxt .mode-edit[data-v-2bb9ae56] .van-cell__value--alone{color:#0268b3}.gcxt .item-content[data-v-2bb9ae56]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding-top:8px;padding-left:15px;padding-bottom:7px;min-height:44px;color:#666}.gcxt .item-content[data-v-2bb9ae56]:active{background-color:#d9d9d9}.gcxt .item-content .i-arrow[data-v-2bb9ae56]{margin-right:15px;color:#0268b3}.gcxt .payment-header[data-v-2bb9ae56]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding:10px 15px;color:#696969}.gcxt .payment-header>.iconfont[data-v-2bb9ae56]{margin-right:8px;color:#0268b3}.gcxt .item-title[data-v-2bb9ae56]{font-size:14px}.gcxt .list-block[data-v-2bb9ae56]{margin-top:0;margin-bottom:0}.gcxt .list-block ul[data-v-2bb9ae56]:after,.gcxt .list-block ul[data-v-2bb9ae56]:before{display:none}.gcxt .list-block .item-inner[data-v-2bb9ae56]{min-height:auto;padding-left:15px;padding:12px 15px}.gcxt .list-block .item-inner .item-title[data-v-2bb9ae56]{margin:0;margin-right:30px;width:auto;min-width:90px;font-size:15px;color:#666}",""])},"8e2f":function(t,e,a){"use strict";a("ac67"),a("32ea"),a("8dee"),a("aa18"),a("982e");var i=a("34f5"),s=(a("1bc7"),a("e5b4"),a("82f8")),n=a("1f0e"),o=a("7bce"),c=a("bc32"),r=a("db68"),l=a("fd50"),d=a("8d62"),p=a("e200"),u=a("5fe8"),f=a("b893"),h=a("b0b4"),v=a("244f"),g=a("a783");function b(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,i)}return a}function m(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?b(Object(a),!0).forEach((function(e){Object(i["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):b(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var _=function(){return{contracts:[],project:{project_id:""},sheetDetail:{},formData:{},attachments:{list:[],restrictSettings:[]},approveData:{},relative_doc:{layouts:[],data:{}}}};e["a"]={data:_(),init:function(t){var e=this,a=t.bizType,i=t.changeType,r=t.sheetId,f=t.config;this.data=_(),this.curBizConfig=f;var b,x=this.curBizConfig.detail.formLayout,y=Object(p["b"])(a);return y.getDetail(r).then((function(t){e.data.sheetDetail=t;var a=[];t.contract_info?a=Array.isArray(t.contract_info)?t.contract_info:[t.contract_info]:t.contract_info_list&&(a=t.contract_info_list),t.jzc_contract_info&&a.push(t.jzc_contract_info),e.data.contracts=a,g["a"].contracts=a,t.project_info&&(e.data.project=t.project_info),e.data.erpwrokflow={worksheetId:t.worksheet_id,showErpProcDetail:t.show_erp_proc_detial,erpProcStatus:t.erp_proc_status,spConfirmResult:t.sp_confirm_result},e.data.attachments=t.attachments?{list:t.attachments,restrictSettings:d["a"].getAttchmentSettingForView(t)}:{list:[],restrictSettings:[]},b=e.getSheetLayoutCode(x,i);var o,c=[b,"relative_doc"],r=[Object(s["o"])({codes:c})];return e.isProjectMode()?o=e.data.project.company_id:e.data.contracts.length&&(o=e.data.contracts[0].company_id),r.push(n["c"].getByCompanyid(o)),l["a"].all(r)})).then((function(t){var i=t[0].data.find((function(t){return t.code===b})),s=t[0].data.find((function(t){return"relative_doc"===t.code}));s&&(e.data.relative_doc.layouts=Object(c["a"])(s.layout)),e.data.relative_doc.data=v["a"].getValueObjByDetail(e.data.sheetDetail);var n={},r=t[1]&&t[1].data||[];if(r&&r.forEach((function(t){n[t.p_code]=t})),i&&i.layout){var l=Object(c["a"])(i.layout),d=a===u["a"].ACCEPT_SHEET?e.data.sheetDetail.pre_biz_info:e.data.sheetDetail;e.data.sheetFormLayout=e.formatLayout(d,l,n),e.data.formData=e.getFormValues(l,e.data.sheetDetail);var p=e.data.formData,f=p.dataModel,g=p.relations,_=(e.isProjectMode()?e.data.project:e.data.contracts[0])||{};Object(h["b"])(m(m({},e.data.sheetDetail),_),f,!0),o["b"].triggerAllRelations({dataModel:f,relations:g},["displayWith","template"])}var x={};r&&r.forEach((function(t){x[t.p_code]=t}));var y={buttons:e.data.sheetDetail.sp_action?e.data.sheetDetail.sp_action.filter((function(t){return"stateLessSave"!==t.action&&"stateLessSubmit"!==t.action})):[],actionData:{proc_type_id:e.curBizConfig.procTypeId||"",cur_step_id:"",biz_id:e.data.sheetDetail[e.curBizConfig.sheetIdKey],biz_title:e.data.sheetDetail.change_overview||e.data.sheetDetail.subject,tpl_key:"",check_status:e.data.sheetDetail.check_status,proc_action:"",sp_remark:"",approver_ids:[],erpOptions:x},sheet:e.data.sheetDetail,contract:e.data.contracts[0]};e.data.approveData=y})).then((function(t){return t})).catch((function(t){return Promise.reject(t)}))},formatLayout:function(t,e,a){var i={},s=e.groups;return e.subForms&&s.push({list:e.subForms}),e.groups.forEach((function(e){e.list.forEach((function(e){var s=e.id;i[e.id]=e;var n={fq_company:"fq_company_info.company_name",to_company:"company_name",cc_company:"company_name"};if(n[s]?(Array.isArray(t[s])?e.text=t[s].map((function(t){return Object(f["c"])(t,n[s])})):e.text=Object(f["c"])(t,n[s]),e.value=t[s]):"project_id"===s&&Array.isArray(t[s])?(e.value=t.project_info,t.project_multiple_text=t.project_info.map((function(t){return t.project_name})).join("；")):o["b"].setVal(e,t[s]),!e.parentId&&t[s]&&a[s]){var c=a[s];Array.isArray(c.p_items)&&c.p_items.forEach((function(t){t.value==e.value&&(e.text=t.text)}))}if(e.parentId&&a[e.parentId]){for(var r=a[e.parentId]["p_items"],l=i[e.parentId],d=[],p=0;p<r.length;p++)r[p].value==l.value&&(d=r[p].children);if(d&&d.length)for(var u=0;u<d.length;u++)d[u].value==e.value&&(e.text=d[u].text)}["select","radio"].includes(e.type)&&Array.isArray(e.options)&&e.options.some((function(t){if(t.value===e.value)return e.text=t.text,!0})),e.text=e.text||e.value}))})),e},getFormValues:function(t,e){var a=n["c"].layout2Obj(t.groups),i=a.layoutArr,s=a.groupInfo,o=a.dataModel,c=a.relations;for(var r in o){var l=o[r];Object(h["a"])(l,e)}return{layoutArr:i,groupInfo:s,dataModel:o,relations:c}},getSheetLayoutCode:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a="";return e&&(a=r["b"].map.change_type[decodeURIComponent(e||"")]),a?t.replace("{CHANGETYPE}",a.substr(12)):t},isProjectMode:function(){return this.curBizConfig.isProjectMode}}},9487:function(t,e,a){e=t.exports=a("690e")(!1),e.push([t.i,".gcxt .flow-section-erp-invalid[data-v-30b0ff1a]{background-color:#fff}.gcxt .list-block[data-v-30b0ff1a]{display:-webkit-box;display:-ms-flexbox;display:flex;margin:0}.gcxt .list-block .item-content[data-v-30b0ff1a]{width:100%;-webkit-box-align:start;-ms-flex-align:start;align-items:flex-start;padding-left:0}.gcxt .list-block .wrap[data-v-30b0ff1a]{width:100%}.gcxt .icon-_zuofei[data-v-30b0ff1a]{min-width:60px;padding:8px;text-align:center;font-size:19px;color:#848484}.gcxt .item-inner[data-v-30b0ff1a]{color:#848484}.gcxt .flexer[data-v-30b0ff1a]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between}.gcxt .time[data-v-30b0ff1a]{font-size:12px}",""])},"948a":function(t,e,a){e=t.exports=a("690e")(!1),e.push([t.i,'[data-v-1adf7ef5] .van-collapse-item{margin-bottom:10px}[data-v-1adf7ef5] .van-collapse-item__content{padding:0;color:inherit}[data-v-1adf7ef5] .van-cell{padding:10px 0}[data-v-1adf7ef5] .van-cell__title{font-size:16px}[data-v-1adf7ef5] .van-icon{-webkit-box-ordinal-group:0;-ms-flex-order:-1;order:-1;font-size:18px;margin-left:0;width:44px;text-align:center;color:#b5b5b5}.gcxt .status-icon[data-v-1adf7ef5]{display:block;font-size:19px;width:43px;text-align:center;padding-top:3px;line-height:1;position:relative}.gcxt .status-icon[data-v-1adf7ef5]:after{content:"";width:1px;height:100%;position:absolute;background-color:#e6e6e6;left:50%;margin-left:-1px;top:25px}.gcxt .flow-item[data-v-1adf7ef5]{display:-webkit-box;display:-ms-flexbox;display:flex;padding-top:8px;padding-bottom:7px;padding-right:15px}.gcxt .flow-item:last-of-type .status-icon[data-v-1adf7ef5]:after{display:none}.gcxt .item-content[data-v-1adf7ef5]{width:calc(100% - 43px)}.gcxt .icon-selected[data-v-1adf7ef5]{color:#74c913}.gcxt .icon--unstar[data-v-1adf7ef5]:before{content:"";display:inline-block;background-color:#c9c9c9;border-radius:50%;width:19px;height:19px}.gcxt .line[data-v-1adf7ef5]{display:-webkit-box;display:-ms-flexbox;display:flex}.gcxt .line>.name[data-v-1adf7ef5]{-webkit-box-flex:1;-ms-flex-positive:1;flex-grow:1}.gcxt .line-name[data-v-1adf7ef5]{font-size:16px;-webkit-box-align:end;-ms-flex-align:end;align-items:flex-end}.gcxt .line-name>.time[data-v-1adf7ef5]{font-size:13px;color:#8e8e93}.gcxt .station-name[data-v-1adf7ef5]{font-size:14px;color:#666}.gcxt .item-status[data-v-1adf7ef5]{color:#75c813}.gcxt .line-status[data-v-1adf7ef5]{padding-top:6px}.gcxt .line-status>.item-status[data-v-1adf7ef5]{-webkit-box-flex:1;-ms-flex-positive:1;flex-grow:1}.gcxt .action-label[data-v-1adf7ef5]{font-size:12px;border-radius:2px;line-height:16px;display:inline-block;vertical-align:middle}.gcxt .span-people-copy[data-v-1adf7ef5]{color:#7d8fff}.gcxt .time[data-v-1adf7ef5]{font-size:10px;color:#999}.gcxt .line-attachments[data-v-1adf7ef5] .attachment-section{margin-bottom:0}.gcxt .line-attachments[data-v-1adf7ef5] .attachment-item{padding-left:0;padding-right:0}.gcxt .line-attachments[data-v-1adf7ef5] .van-collapse-item{margin-bottom:0}',""])},"962e":function(t,e,a){var i=a("818c");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var s=a("85cb").default;s("0ee25e67",i,!0,{sourceMap:!1,shadowMode:!1})},"9b82":function(t,e,a){"use strict";a("5a96")},a083:function(t,e,a){var i=a("f82c");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var s=a("85cb").default;s("5811426c",i,!0,{sourceMap:!1,shadowMode:!1})},a23a:function(t,e,a){"use strict";a("ac67"),a("1bc7"),a("32ea");var i=a("34f5"),s=(a("a450"),a("8dee"),a("e680"),a("a18c")),n=a("3ec3");function o(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,i)}return a}function c(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?o(Object(a),!0).forEach((function(e){Object(i["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}e["a"]={computed:{sheetId:function(){return this.$route.query.id||""},mode:function(){return this.sheetId?"edit":"add"},config:function(){return this.customBizConfig?this.customBizConfig:n["a"][this.bizType]}},watch:{sheetId:function(){this.init()}},provide:function(){return{bizType:this.bizType,changeType:this.changeType||""}},mounted:function(){var t=this;this.$vBus.$on("page-reinit",(function(e){if(e){var a=e.query,i=e.back_len,n=s["a"].history.current.query,o=s["a"].history.current;if(i&&!isNaN(Number(i)))return void s["a"].go(-Number(i));a&&s["a"].replace({name:o.name,query:c(c({},n),a)})}t.data=null,t.init()})),this.init()},deactivated:function(){this.$vBus.$off("page-reinit")},beforeDestroy:function(){this.$vBus.$off("page-reinit")}}},a257:function(t,e,a){var i=a("4ceb");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var s=a("85cb").default;s("5c79be1d",i,!0,{sourceMap:!1,shadowMode:!1})},a687:function(t,e,a){t.exports=a.p+"img/invalid.5957e4a0.png"},a9ff:function(t,e,a){var i=a("faa4");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var s=a("85cb").default;s("b1359dc0",i,!0,{sourceMap:!1,shadowMode:!1})},b012:function(t,e,a){"use strict";a("a257")},b50c:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"card-header-wrapper"},[i("div",{staticClass:"card-header"},[i("div",{staticClass:"cont-title",domProps:{innerHTML:t.xss(t._s(t.handleText(t.title)))}})]),"6"===t.checkStatus||"1"===t.erpInvaildDisplay?i("div",{staticClass:"signature"},[i("img",{attrs:{width:"74",height:"74",src:a("a687")}})]):t._e(),"3"===t.checkStatus?i("div",{staticClass:"signature"},[t.store.bizType===t.BizKeys.TC_TASK_REPORT?i("img",{attrs:{width:"74",height:"74",src:a("f1ac")}}):i("img",{attrs:{width:"84",height:"74",src:a("e645")}})]):t._e(),t.isAbandoned?i("div",{staticClass:"signature"},[i("img",{attrs:{width:"84",height:"74",src:a("18c5")}})]):t._e()])},s=[],n=a("b893"),o=a("a783"),c=a("5fe8"),r={name:"DetailHeaderLabel",props:{title:{type:String,default:""},warningStatus:{type:String,default:""},checkStatus:{type:String,default:""},erpInvaildDisplay:{type:String,default:""},isAbandoned:{type:Boolean,default:!1}},data:function(){return{store:o["a"],BizKeys:c["a"]}},methods:{handleText:n["f"]}},l=r,d=(a("c49c"),a("5d22")),p=Object(d["a"])(l,i,s,!1,null,"5b4079f1",null);e["a"]=p.exports},c49c:function(t,e,a){"use strict";a("1eb4")},c5d3:function(t,e,a){var i=a("62da");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var s=a("85cb").default;s("4cf95b1b",i,!0,{sourceMap:!1,shadowMode:!1})},ca57:function(t,e,a){var i=a("948a");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var s=a("85cb").default;s("7d46c07d",i,!0,{sourceMap:!1,shadowMode:!1})},d55c:function(t,e,a){e=t.exports=a("690e")(!1),e.push([t.i,".gcxt .component-wrapper[data-v-6ae906c4]{margin-bottom:10px}.gcxt .content[data-v-6ae906c4]{padding-bottom:0}.gcxt .top-unlock-tip[data-v-6ae906c4]{display:-webkit-box;display:-ms-flexbox;display:flex;padding:7px 15px}.gcxt .top-unlock-tip>.iconfont.-tanhao[data-v-6ae906c4]{width:22px;font-size:16px;margin:-3px 10px 0 -3px}.gcxt .top-unlock-tip .tip-content[data-v-6ae906c4]{font-size:12px;color:#666}.gcxt .top-unlock-tip .iconfont.-close[data-v-6ae906c4]{margin-left:10px;font-size:12px;color:#999}[data-v-6ae906c4] .form-detail{margin-bottom:10px}",""])},d837:function(t,e,a){"use strict";a("a9ff")},e645:function(t,e,a){t.exports=a.p+"img/auth_sp_1.17007aa7.png"},f1ac:function(t,e,a){t.exports=a.p+"img/auth_sp_3.a3379606.png"},f575:function(t,e,a){"use strict";a("c5d3")},f82c:function(t,e,a){e=t.exports=a("690e")(!1),e.push([t.i,'.gcxt[data-v-28c5b811] :export{colorPrimary:#0268b3;headerBackgroundColor:#fff;headerTextColor:#333}.gcxt .item-input[data-v-28c5b811]{margin-top:0}.gcxt .list-block .item-inner[data-v-28c5b811]{-webkit-box-align:start;-ms-flex-align:start;align-items:flex-start}.gcxt .content[data-v-28c5b811]{bottom:auto;padding-bottom:30px;position:static}.gcxt .sheet-list-wrapper[data-v-28c5b811] .van-collapse-item{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column}.gcxt .sheet-list-wrapper[data-v-28c5b811] .van-collapse-item__title{text-align:center;padding:8px;color:#666;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;background:#f9f9f9}.gcxt .sheet-list-wrapper[data-v-28c5b811] .van-cell__title{-webkit-box-flex:0;-ms-flex:0;flex:0;white-space:nowrap}.gcxt .sheet-list-wrapper[data-v-28c5b811] .van-icon-arrow{color:#b5b5b5}.gcxt .sheet-list-wrapper[data-v-28c5b811] .van-collapse-item__wrapper{-webkit-box-ordinal-group:0;-ms-flex-order:-1;order:-1}.gcxt .sheet-list-wrapper[data-v-28c5b811] .van-collapse-item__content{padding:0}.gcxt .item-content[data-v-28c5b811]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;background-color:#f1f5ff;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding-top:8px;padding-left:15px;padding-bottom:7px;min-height:44px;color:#666;position:relative}.gcxt .item-content[data-v-28c5b811]:before{bottom:0;content:" ";position:absolute;z-index:1;right:0;border-top:1px solid #d7e0f7;-webkit-transform:scaleY(.5);transform:scaleY(.5);left:0}.gcxt .item-content[data-v-28c5b811]:active{background-color:#d9d9d9}.gcxt .item-content .i-arrow[data-v-28c5b811]{margin-left:5px;margin-right:13px;color:#c0bfc4}.gcxt .item-title[data-v-28c5b811]{font-size:14px;text-overflow:clip;white-space:normal;overflow:visible}.gcxt .list-block[data-v-28c5b811]{margin-top:0;margin-bottom:0}.gcxt .list-block ul[data-v-28c5b811]:after,.gcxt .list-block ul[data-v-28c5b811]:before{display:none}.gcxt .list-block .item-inner[data-v-28c5b811]{min-height:auto;padding-left:15px}.gcxt .list-block .item-inner[data-v-28c5b811]:after{display:none}.gcxt .list-block .item-inner .item-title[data-v-28c5b811]{margin:0;margin-right:15px;width:85px;font-size:14px;color:#999}.gcxt .info-header[data-v-28c5b811]{padding:13px 15px;font-size:13px;color:#666;line-height:18px}.gcxt .info-group[data-v-28c5b811]{padding:10px 0}.gcxt .detail-btn-box[data-v-28c5b811]{background:#fff}.gcxt .wrap.bt[data-v-28c5b811]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:end;-ms-flex-pack:end;justify-content:flex-end}.gcxt .detail-btn[data-v-28c5b811]{margin:8px 13px;display:inline-block;border:1px solid #d1d1d6;background:#fff;border-radius:2px;padding:2px 8px;font-size:13px;color:#666}.gcxt .tip[data-v-28c5b811]{color:#8e8e93;font-size:14px}.gcxt .sheet-list-wrapper[data-v-28c5b811] .van-hairline--top-bottom:after{border-width:0 0 1px}',""])},faa4:function(t,e,a){e=t.exports=a("690e")(!1),e.push([t.i,".gcxt .van-popup[data-v-1bf5a08c]{width:100%;height:100%;background-color:#f5f5f9;padding-bottom:23px}.gcxt .reverse-form-info[data-v-1bf5a08c]{padding-bottom:10px;background-color:#fff}.gcxt .form-detail-group[data-v-1bf5a08c]{padding-top:10px}.gcxt .info-name[data-v-1bf5a08c]{padding:14px 15px 7px;font-size:13px;color:#666;background-color:#f5f5f9}.gcxt .icon__arrow[data-v-1bf5a08c]{margin-left:8px;display:inline-block;color:#999;font-size:14px}.gcxt .icon__arrow.opening[data-v-1bf5a08c]{-webkit-transform:rotate(180deg);transform:rotate(180deg)}[data-v-1bf5a08c] .field-wrapper{margin-bottom:0}",""])}}]);