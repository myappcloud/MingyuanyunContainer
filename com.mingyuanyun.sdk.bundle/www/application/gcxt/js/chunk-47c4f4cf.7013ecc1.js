(window["webpackJsonp_module_entry_gcxt_"]=window["webpackJsonp_module_entry_gcxt_"]||[]).push([["chunk-47c4f4cf"],{2382:function(t,a,e){a=t.exports=e("690e")(!1),a.push([t.i,'@charset "UTF-8";.gcxt[data-v-1fd9a181] :export{colorPrimary:#0268b3;headerBackgroundColor:#fff;headerTextColor:#333}.gcxt .todo-tab .tab-nav[data-v-1fd9a181]{display:inline-block;vertical-align:middle;font-size:18px;color:#333;opacity:.58;position:relative;width:68px;text-align:center;font-weight:400}.gcxt .todo-tab .tab-nav.active[data-v-1fd9a181]{opacity:1}.gcxt .todo-tab .tab-nav.active[data-v-1fd9a181]:after{content:"";position:absolute;width:16px;left:50%;bottom:-3px;margin-left:-8px;border-bottom:2px solid #0268b3}.gcxt .list-block ul li[biz_type="9"][data-v-1fd9a181]{background:#fff}.gcxt .list-block ul li[biz_type="9"] .item-subtitle[data-v-1fd9a181]{overflow:hidden;white-space:nowrap}.gcxt .list-block ul li.msg_status_1 .item-title[data-v-1fd9a181]{color:#999}.gcxt .list-block ul li[biz_type="9"] .item-title[data-v-1fd9a181]{color:#333}.gcxt .list-block ul li.msg_status_1 .item-subtitle[data-v-1fd9a181]{color:#999}.gcxt .list-block ul[data-v-1fd9a181]:after,.gcxt .list-block ul[data-v-1fd9a181]:before{display:none}.gcxt .item-time[data-v-1fd9a181]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;font-size:.6rem;color:#999;height:1.3rem;line-height:1.3rem;-ms-flex-negative:0;flex-shrink:0;-webkit-flex-shrink:0}.gcxt .xt-ios .item-time[data-v-1fd9a181]{font-size:.65rem}.gcxt .show-history[data-v-1fd9a181]{display:none}.gcxt .buttons-tab[data-v-1fd9a181]{position:absolute;left:0;width:100%;top:2.2rem;z-index:1}.gcxt .page .content[data-v-1fd9a181]{top:2.2rem;padding-bottom:0}.gcxt .has-sys-msg.has-overtime .content[data-v-1fd9a181]{top:6.5rem}.gcxt .msg_todo_list .no-new[data-v-1fd9a181]{width:100%;font-size:.8rem;color:#666;text-align:center;position:absolute;top:40%;-webkit-transform:translateY(-50%);transform:translateY(-50%)}.gcxt .msg_todo_list .no-new .todo-empty-img[data-v-1fd9a181]{width:170px}.gcxt .msg_todo_list .no-new .text[data-v-1fd9a181]{margin-top:-20px}.gcxt .unread[data-v-1fd9a181]{position:relative}.gcxt .unread[data-v-1fd9a181]:before{position:absolute;right:2px;top:14px;width:8px;height:8px;background:#f83b37;border-radius:4px;content:""}.gcxt #msg_list li[data-v-1fd9a181],.gcxt .msg_todo_list li[data-v-1fd9a181]{position:relative;padding-left:0}.gcxt #msg_list .item-media[data-v-1fd9a181],.gcxt .msg_todo_list .item-media[data-v-1fd9a181]{position:absolute;left:15px;top:26px;padding:0}.gcxt #msg_list .iconfont[data-v-1fd9a181],.gcxt .msg_todo_list .iconfont[data-v-1fd9a181]{display:inline-block;width:40px;height:40px;font-size:40px;text-align:center;line-height:40px}.gcxt #msg_list .item-subtitle[data-v-1fd9a181],.gcxt .msg_todo_list .item-subtitle[data-v-1fd9a181]{padding:3px 0 0}.gcxt .list-block .item-media+.item-inner[data-v-1fd9a181]{margin-left:68px}.gcxt .list-block.msg-list .item-inner[data-v-1fd9a181]{padding-top:13px;padding-bottom:13px}.gcxt .item-title-row[data-v-1fd9a181]{padding:0;min-height:21px;line-height:21px;font-size:15px}.gcxt #msg-detail[data-v-1fd9a181]{overflow:initial}.gcxt .item-status[data-v-1fd9a181]{line-height:21px;float:right;font-size:14px;right:14px;bottom:16px;color:#0268b3}.gcxt .item-status.color-red[data-v-1fd9a181]{color:#ea3426}.gcxt .item-date[data-v-1fd9a181],.gcxt .item-desc[data-v-1fd9a181]{padding-right:15px;float:left}.gcxt .page-home .overtime-tabs .tab.active .tab-contain[data-v-1fd9a181]{background-color:#0268b3;color:#fff}.gcxt .page-home .tab-contain[data-v-1fd9a181]{display:inline-block;padding:4px 8px;min-width:82px;text-align:center;color:#666;border-radius:100px;line-height:20px}.gcxt .overtime-tabs .tab[data-v-1fd9a181]{-webkit-box-flex:initial;-ms-flex:initial;flex:initial;-webkit-flex:initial;width:33%}.gcxt .overtime-tips[data-v-1fd9a181]{margin:0 5px 0 0;position:relative;width:11px;height:16px;margin-right:.8em}.gcxt .overtime-tips[data-v-1fd9a181]:after{position:absolute;border-radius:4px;padding:2px;width:16px;height:16px;font-size:12px;line-height:12px;left:0;top:2px;text-align:center}.gcxt .overtime-tips.yellow[data-v-1fd9a181]{background-color:transparent}.gcxt .overtime-tips.yellow[data-v-1fd9a181]:after{content:"\\8B66";background-color:#faa304}.gcxt .overtime-tips.red[data-v-1fd9a181]{background-color:transparent}.gcxt .overtime-tips.red[data-v-1fd9a181]:after{content:"\\8D85";background-color:#fc5a14}.gcxt #msg_list li[data-v-1fd9a181],.gcxt .msg_todo_list li[data-v-1fd9a181],.gcxt .set-done[data-v-1fd9a181]{-webkit-transition:.1s;transition:.1s}.gcxt #msg_list .item-status[data-v-1fd9a181]{display:none}.gcxt .set-done[data-v-1fd9a181]{width:100px;position:absolute;right:-100px;top:0;height:100%;display:none;-webkit-box-align:center;-webkit-box-pack:center;color:#fff;background-color:#c7c7cc}.gcxt .swipe .set-done[data-v-1fd9a181]{display:-webkit-box}.gcxt .swipe[data-v-1fd9a181]{transform:translate3d(-100px,0,0);-webkit-transform:translate3d(-100px,0,0)}.gcxt .sys-msg[data-v-1fd9a181]{position:relative;width:100%;background:#fff1ad;color:#333;font-size:.7rem;padding-left:.75rem;height:32px;line-height:32px}.gcxt .sys-msg .icon-close[data-v-1fd9a181]{padding:0 .7rem;position:absolute;right:15px;top:7px;height:20px;width:20px;border-radius:100%;background:#d6cb94;line-height:18px;padding:0;text-align:center}.gcxt .sys-msg .icon-close[data-v-1fd9a181]:before{color:#fff;font-size:8px;-webkit-transform:scale(.7);transform:scale(.7)}.gcxt .overtime-tabs.active[data-v-1fd9a181]{display:-webkit-box;display:-ms-flexbox;display:flex}.gcxt .overtime-tabs[data-v-1fd9a181]{top:2.2rem;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;position:static;border-bottom:0;-ms-flex-wrap:wrap;flex-wrap:wrap}.gcxt .overtime-tabs[data-v-1fd9a181]:not(.divide){border-bottom:1px solid #e2e2e2}.gcxt .overtime-tabs.divide[data-v-1fd9a181]:after{content:"";display:block;height:10px;width:100%;background-color:#f5f5f9;-webkit-box-shadow:0 2px 5px 0 #e2e2e2 inset;box-shadow:inset 0 2px 5px 0 #e2e2e2}.gcxt .overtime-tabs .tab[data-v-1fd9a181]{height:2.2rem}.gcxt .item-title-row .item-title[data-v-1fd9a181]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;white-space:normal}.gcxt ul.list-block[data-v-1fd9a181]{background:#fff;list-style:none;padding:0;margin:0;position:relative}.gcxt .action-block p[data-v-1fd9a181]{margin:0;color:#999}.gcxt .scroll-container[data-v-1fd9a181]{overflow:hidden;overflow-y:auto}.gcxt .msg_todo_list .item-subtitle-display[data-v-1fd9a181]{overflow:hidden;white-space:nowrap;text-overflow:ellipsis;position:relative;padding:3px 60px 0 0}.gcxt .item-status[data-v-1fd9a181]{position:absolute;right:0;top:3px}.gcxt .msg_todo_list[data-v-1fd9a181]{position:absolute;top:0;left:0;right:0;bottom:0;-webkit-box-flex:1;-ms-flex-positive:1;flex-grow:1;height:100%}.gcxt .msg_todo_list.empty[data-v-1fd9a181] .van-pull-refresh__track{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column}.gcxt .msg_todo_list.empty[data-v-1fd9a181] .van-list{position:relative;-webkit-box-flex:1;-ms-flex-positive:1;flex-grow:1}',""])},"2d36":function(t,a,e){"use strict";e("e5cd")},"30bf":function(t,a,e){t.exports=e.p+"img/update-info-background.b67790a7.png"},"50fc":function(t,a,e){t.exports=e.p+"img/hot_update.b3b34418.png"},6203:function(t,a,e){var n=e("727a");"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var s=e("85cb").default;s("19bca1f8",n,!0,{sourceMap:!1,shadowMode:!1})},"648c":function(t,a,e){"use strict";e.d(a,"c",(function(){return i})),e.d(a,"b",(function(){return o})),e.d(a,"a",(function(){return r})),e.d(a,"d",(function(){return c}));var n=e("ab3e"),s=e("da71");function i(t){return Object(n["a"])({url:s["a"].get_update_info})}function o(t){return Object(n["a"])({url:s["a"].get_msg_list,data:t})}function r(t){return Object(n["a"])({url:s["a"].get_last_version,data:t})}function c(t){return Object(n["a"])({url:s["a"].get_erp_statement_by_msg_id,data:t})}},"727a":function(t,a,e){a=t.exports=e("690e")(!1),a.push([t.i,'.gcxt[data-v-0b539a75] :export{colorPrimary:#0268b3;headerBackgroundColor:#fff;headerTextColor:#333}.gcxt .unread-icon[data-v-0b539a75]{display:inline-block;vertical-align:middle;background-color:red;width:8px;height:8px;border-radius:8px;margin-right:5px;opacity:0}.gcxt .unread-icon.show[data-v-0b539a75]{opacity:1}.gcxt .dropdown-title[data-v-0b539a75]{color:#fff}.gcxt .dropdown-title .text[data-v-0b539a75]{vertical-align:middle}.gcxt .dropdown-title .icon__title[data-v-0b539a75]{font-size:10px;vertical-align:middle;display:inline-block;-webkit-transition:-webkit-transform .2s;transition:-webkit-transform .2s;transition:transform .2s;transition:transform .2s,-webkit-transform .2s}.gcxt .triangle[data-v-0b539a75]{border:15px solid;border-left-color:transparent;border-right-color:transparent;border-top:none;position:absolute;bottom:-15px;left:15px;opacity:0;pointer-events:none;-webkit-transition:opacity .2s;transition:opacity .2s}.gcxt .option[data-v-0b539a75],.gcxt .option-tip[data-v-0b539a75]{background-color:#fff;padding:10px 42px 10px 15px}.gcxt .option-tip[data-v-0b539a75]{color:#999;font-size:12px;padding-top:7px;padding-bottom:5px}.gcxt .option[data-v-0b539a75]{position:relative}.gcxt .option[data-v-0b539a75]:before{top:0;content:" ";position:absolute;z-index:1;right:0;border-top:1px solid #efeff4;-webkit-transform:scaleY(.5);transform:scaleY(.5);left:0}.gcxt .option .icon__item-left[data-v-0b539a75]{color:#0268b3;margin-right:6px}.gcxt .option .undo_msg[data-v-0b539a75]{position:absolute;top:50%;-webkit-transform:translateY(-50%);transform:translateY(-50%);right:10px;padding:0 5px;text-align:center;background:red;border-radius:8px;color:#fff;height:16px;min-width:16px;line-height:16px;font-size:12px}.gcxt .opening .icon__title[data-v-0b539a75]{-webkit-transform:rotate(180deg);transform:rotate(180deg)}.gcxt .opening .triangle[data-v-0b539a75]{opacity:1}[data-v-0b539a75] .van-dropdown-menu__bar{background:transparent;-webkit-box-shadow:none;box-shadow:none;height:41px}[data-v-0b539a75] .van-dropdown-menu__title--down:after,[data-v-0b539a75] .van-dropdown-menu__title:after{display:none}[data-v-0b539a75] .van-dropdown-item__content{width:170px;border-radius:3px}',""])},7326:function(t,a,e){var n=e("d368");"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var s=e("85cb").default;s("6400e3e0",n,!0,{sourceMap:!1,shadowMode:!1})},"7a14":function(t,a,e){"use strict";e("7326")},"80e6":function(t,a,e){t.exports=e.p+"img/no_todo.c7ca1ef3.png"},8474:function(t,a,e){"use strict";e("b23b")},aff9:function(t,a,e){"use strict";var n=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"switch-tenant",class:{opening:t.opening}},[e("van-dropdown-menu",{attrs:{overlay:!0}},[e("van-dropdown-item",{ref:"menuItem",on:{open:t.onOpenDropdown,close:t.onCloseDropdown}},[e("div",{staticClass:"dropdown-title",attrs:{slot:"title"},slot:"title"},[e("i",{staticClass:"unread-icon",class:{show:t.tenantUndoMsg}}),e("span",{staticClass:"text"},[t._v(t._s(t.curTenant.tenant_name)+"  ")]),e("i",{staticClass:"iconfont icon__title icon-_xiala"}),e("div",{staticClass:"triangle",class:{active:t.opening}})]),e("div",{staticClass:"option-tip"},[t._v("切换开发商")]),e("div",{staticClass:"options"},[t._l(t.tenantList,(function(a){return[e("div",{directives:[{name:"show",rawName:"v-show",value:a.tenant_id!==t.curTenant.tenant_id,expression:"item.tenant_id !== curTenant.tenant_id"}],key:a.tenant_id,staticClass:"option",on:{click:function(e){t.changeTenant(a)}}},[e("i",{staticClass:"iconfont icon__item-left icon-_wo-kaifashang"}),e("span",{staticClass:"text"},[t._v(t._s(a.tenant_name))]),a.msg_count>0?e("div",{staticClass:"undo_msg"},[t._v("\n              "+t._s(t._f("msgCountTransfer")(a.msg_count))+"\n            ")]):t._e()])]}))],2)])],1)],1)},s=[],i=e("a740"),o=e("591a"),r=e("933f"),c={name:"SwitchTenant",filters:{msgCountTransfer:function(t){return t>99?"99+":t}},props:{tenantList:{type:Array,default:function(){return[]}}},data:function(){return{opening:!1,curTenant:Object(i["a"])()}},computed:{tenantUndoMsg:function(){return this.tenantList.some((function(t){return t.msg_count>0}))}},methods:{changeTenant:function(t){var a=this;this.$refs.menuItem.toggle(),this.$store.dispatch(o["p"],{switch_tenant_id:t.tenant_id,__from:"app"}).then((function(){r["a"].idkey(r["a"].idkeys.clickSwitchTenant),a.curTenant=t,a.$emit("change")}))},onOpenDropdown:function(){this.opening=!0},onCloseDropdown:function(){this.opening=!1}}},d=c,l=(e("f1f0"),e("5d22")),p=Object(l["a"])(d,n,s,!1,null,"0b539a75",null);a["a"]=p.exports},b23b:function(t,a,e){var n=e("2382");"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var s=e("85cb").default;s("29254c88",n,!0,{sourceMap:!1,shadowMode:!1})},b775:function(t,a,e){"use strict";e.r(a);var n,s=function(){var t=this,a=t.$createElement,n=t._self._c||a;return n("page",{staticClass:"page-home",class:{"has-overtime":1===+t.approval_warning.showWarning&&!t.listData.searchParam.msg_status,"has-sys-msg":!!t.sysMsg}},[n("template",{slot:"header"},[n("v-header",{attrs:{"is-back":!!t.ylSuperApp,"show-header":!1}},[n("template",{slot:"title"},[n("div",{staticClass:"todo-tab"},[n("a",{staticClass:"tab-link tab-nav",class:{active:0===+t.listData.searchParam.msg_status},on:{click:function(a){t.changeStatus(0)}}},[t._v("\n            待办\n          ")]),n("a",{staticClass:"tab-link tab-nav",class:{active:1===+t.listData.searchParam.msg_status},on:{click:function(a){t.changeStatus(1)}}},[t._v("\n            已办\n          ")])])])],2),n("div",{directives:[{name:"show",rawName:"v-show",value:!!t.sysMsg,expression:"!!sysMsg"}],staticClass:"sys-msg"},[n("span",{attrs:{id:"update-info-msg"},domProps:{textContent:t._s(t.sysMsg)}}),n("em",{staticClass:"iconfont icon-close icon-close pull-right",on:{click:t.closeSysMsg}})]),n("div",{directives:[{name:"show",rawName:"v-show",value:0===+t.listData.searchParam.msg_status&&1===+t.approval_warning.showWarning,expression:"\n        +listData.searchParam.msg_status === 0 &&\n          +approval_warning.showWarning === 1\n      "}],staticClass:"overtime-tabs",class:{divide:t.listData.data.length>0},staticStyle:{display:"flex"}},[1===+t.approval_warning.showWarning?n("div",{staticClass:"tab",class:{active:0===+t.listData.searchParam.warning_status},on:{click:function(a){t.changeWarningStatus(0)}}},[n("span",{staticClass:"tab-contain"},[n("span",{staticClass:"tab-text",domProps:{textContent:t._s("全部("+t.approval_warning.total+")")}})])]):t._e(),t.approval_warning.warning>=0?n("div",{staticClass:"tab",class:{active:1===+t.listData.searchParam.warning_status},on:{click:function(a){t.changeWarningStatus(1)}}},[n("span",{staticClass:"tab-contain"},[n("span",{staticClass:"tab-text",domProps:{textContent:t._s("预警("+t.approval_warning.warning+")")}})])]):t._e(),t.approval_warning.timeout>=0?n("div",{staticClass:"tab",class:{active:2===+t.listData.searchParam.warning_status},on:{click:function(a){t.changeWarningStatus(2)}}},[n("span",{staticClass:"tab-contain"},[n("span",{staticClass:"tab-text",domProps:{textContent:t._s("超时("+t.approval_warning.timeout+")")}})])]):t._e()])],1),n("div",{staticClass:"msg_todo_list",class:{empty:!t.listData.data.length}},[n("scroll-refresh",{attrs:{loading:t.loading,finished:t.finished,"finished-text":t.listData.data.length&&t.loaded&&!t.busy?"没有更多了":""},on:{refresh:t.refresh,more:t.more}},[t.listData.data.length?n("ul",{staticClass:"list-block msg-list",attrs:{id:"msg-list"}},t._l(t.listData.data,(function(a,e){return n("li",{directives:[{name:"touch",rawName:"v-touch",value:{index:e,onSwipeLeft:t.onSwipeLeft,onSwipeRight:t.onSwipeRight},expression:"{ index, onSwipeLeft, onSwipeRight }"}],key:a.msg_id,staticClass:"item-content",class:{undo:"0"===a.msg_status,swipe:e===t.swipeIndex&&t.swipeEnable(a)},on:{click:function(n){t.handleRedirect(a,e)}}},[n("div",{staticClass:"item-media"},[n("i",{staticClass:"iconfont",class:t._f("bizTypeIconFt")(a)})]),n("div",{staticClass:"item-inner"},[n("div",{staticClass:"item-title-row"},[n("div",[0!==+a.warning_status?n("span",{staticClass:"overtime-tips",class:{yellow:1===+a.warning_status,red:2===+a.warning_status}}):t._e(),n("span",{domProps:{textContent:t._s(a.msg_content.news.articles[0].title)}})])]),n("div",{staticClass:"item-subtitle",class:1===a.display?"item-subtitle-display":"_item-subtitle"},[1===a.display?n("span",[t._v("发起人:"+t._s(a.msg_content.news.articles[0].fq_user.station_name)+"【"+t._s(a.msg_content.news.articles[0].fq_user.user_name||"--")+"】")]):n("span",[t._v(t._s(a.msg_content.news.articles[0].description))]),n("span",{staticClass:"item-status",class:{"color-red":a.msg_content.news.articles[0].biz_status>3&&6!==a.msg_content.news.articles[0].biz_status}},[t._v("\n                "+t._s(a.msg_content.news.articles[0].biz_status_desc)+"\n              ")])]),n("div",{staticClass:"item-subtitle clearfix",attrs:{id:"msg-detail"}},[n("span",{staticClass:"item-date"},[t._v(t._s(t._f("timer")("0"===a.msg_status?a.create_time:a.update_time)))]),1===a.display?n("span",{staticClass:"item-desc 1"},[t._v("\n                "+t._s(a.msg_content.news.articles[0].biz_type_desc)+"\n              ")]):n("span",{staticClass:"item-desc 2"},[t._v("\n                "+t._s(t._f("bizTypeTransfer")(a.biz_type))+"\n              ")]),a.msg_content.news.articles[0].erp_change_type?n("span",{staticClass:"item-desc 3"},[t._v("\n                "+t._s(a.msg_content.news.articles[0].erp_change_type)+"\n              ")]):t._e()])]),"0"===a.msg_status?n("div",{staticClass:"set-done",attrs:{"data-index":e},on:{click:function(n){n.stopPropagation(),t.handleSetDone(a,e)}}},[t._v("\n            置为已办\n          ")]):t._e()])}))):t._e(),n("div",{staticClass:"no-data"},[t.listData.data.length||!t.loaded||t.busy?t._e():n("div",{staticClass:"no-new"},[n("img",{staticClass:"todo-empty-img",attrs:{src:e("80e6")}}),n("div",{staticClass:"text"},[t._v("\n            暂无"+t._s(0===+t.listData.searchParam.msg_status?0===+t.listData.searchParam.warning_status?"待办":1===+t.listData.searchParam.warning_status?"预警":2===+t.listData.searchParam.warning_status?"超时":"待办":"已办")+"事项\n          ")])])])])],1),n("announcement",{attrs:{show:t.updateMessage.show,"announcement-btn":t.updateMessage.announcementBtn,remark:t.updateMessage.remark,"image-list":t.updateMessage.imageList},on:{close:t.closeAnc}}),n("update-modal",{attrs:{show:t.updateMessage.updateModalShow,percentage:t.updateMessage.percentage},on:{close:t.closeUm}}),n("template",{slot:"footer"},[t._t("default")],2)],2)},i=[],o=(e("ac67"),e("1bc7"),e("32ea"),e("34f5")),r=(e("6a61"),e("ed32")),c=e("0e2e"),d=e("0ee4"),l=e("648c"),p=e("40e4"),g=e("db68"),u=e("042e"),m=e("f121"),f=e("a075"),b=e("a740"),h=e("d3d0"),x=(e("fc02"),e("948d")),_=[],v=e("b893"),w=e("fe6f"),k=e("34ae"),y={},C=!1,D=null,O="",S={setWrapperSize:!0,onReachEnd:function(t){C||(console.log("reach end"),C=!0,D.updateMessage.announcementBtn=!0)},pagination:".swiper-pagination"};function z(){D.updateMessage.updateModalShow=!0}function M(){var t=(new Date).getTime();window.location.href=location.protocol+location.pathname+"?t="+t}function P(){var t=Object(v["e"])().appVersion;return t.split(".").map((function(t,a){return a>0?("0"+t).slice(-2):Object(w["b"])()?t:"2"+t})).join("")}y.goRefreshUrl=M,y.init=function(t){D=t;var a=this;function e(){var t=O||{};D.updateMessage.percentage=100,D.updateMessage.updateModalShow=!1,t.remark?a.showAnnouncementRemark(t.remark):a.showAnnouncement()}var s=Object(x["a"])();if(!s&&!window.YL_SUPER_APP){var i=f["a"].string.toInt(window.GLOBAL_GCXT.versionCode),o={package_type:"sz",current_version:i,webVersion:window.GLOBAL_GCXT.versionCode};Object(l["a"])(o).then((function(t){k["a"].version_check_time=f["a"].date.format("yyyy-MM-dd HH:mm:ss");var a=f["a"].string.toInt(t.data.new_app_version),o=f["a"].string.toInt(t.data.min_app_version);n=f["a"].string.toInt(t.data.last_version);var r=P(),c=0;function d(){t.data.download_url?window.MUtils.openUrlInBrowser(t.data.download_url):D.sui.toast("版本检查失败")}function l(t){var a=100*t;a=parseInt(a),D.updateMessage.percentage=a}if(r>=o&&i<n){if(z(),s)return;return l(.01),void window.MHotUpdate.downloadWebContent(t.data.url,(function(){O=t.data,e()}),(function(t){console.log(t),D.sui.toast("更新失败"),D.updateMessage.updateModalShow=!1}),(function(t){c!==t&&(c=t,l(c))}))}""!=o&&r<o?D.sui.modal({text:"您的客户端版本过低，可能会影响你的使用体验，请下载最新的版本安装",buttons:[{text:"立即升级",close:!1,onClick:function(){d()}}]}):r<a&&!k["a"].update_checked&&(D.sui.modal({text:"您的客户端版本过低，可能会影响你的使用体验，是否下载最新的版本安装？",buttons:[{text:"取消"},{text:"确定",onClick:function(){d()}}]}),k["a"].update_checked=!0)}))}},y.showAnnouncement=function(){var t=Object(b["a"])();if("2"!==t.tenant_app){var a=this;_.length<1?M():(D.updateMessage.imageList=_,_.length>1?a.swiper=new window.Swiper(".swiper-container",S):D.updateMessage.announcementBtn=!0,D.updateMessage.show=!0)}else M()},y.showAnnouncementRemark=function(t){var a=[];if(t){if(Array.isArray(t))a=t;else try{a=JSON.parse(t)}catch(n){a=[t]}t=Array.isArray(a)?a:[a];var e=Object(b["a"])();"2"!==e.tenant_app?(D.updateMessage.remark=t,D.updateMessage.announcementBtn=!0,D.updateMessage.show=!0):M()}};var j=y,T=function(){var t=this,a=t.$createElement,n=t._self._c||a;return n("div",[n("van-dialog",{attrs:{"get-container":"body","show-confirm-button":t.showConfirmButton},model:{value:t.propShow,callback:function(a){t.propShow=a},expression:"propShow"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:!t.remark.length,expression:"!remark.length"}],staticClass:"announcement-outer"},[n("div",{staticClass:"announcement-inner"},[n("div",{staticClass:"swiper-container",attrs:{"data-space-between":"10"}},[n("div",{staticClass:"swiper-wrapper"},t._l(t.imageList,(function(t){return n("div",{key:t,staticClass:"swiper-slide"},[n("img",{attrs:{src:t,alt:""}})])}))),n("div",{staticClass:"swiper-pagination"})]),n("div",{directives:[{name:"show",rawName:"v-show",value:t.announcementBtn,expression:"announcementBtn"}],staticClass:"announcement-btn-enter"},[n("button",{attrs:{type:"button"},on:{click:t.close}},[t._v("\n          我知道了\n        ")])]),n("div",{staticClass:"announcement-btn-skip"},[n("button",{attrs:{type:"button"},on:{click:t.close}},[t._v("\n          跳过\n        ")])])])]),n("div",{directives:[{name:"show",rawName:"v-show",value:t.remark.length,expression:"remark.length"}],staticClass:"announcement-outer"},[n("div",{staticClass:"announcement-inner"},[n("div",{staticClass:"update-announcement-border"},[n("img",{staticClass:"image_bg",staticStyle:{width:"100%"},attrs:{src:e("30bf")}}),n("div",{staticClass:"update-announcement-remark-content"},[n("div",{staticClass:"content-scroll"},t._l(t.remark,(function(a,e){return n("div",{key:e,domProps:{textContent:t._s(a)}})})))]),n("div",{staticClass:"update-announcement-remark-bottom"})]),n("div",{directives:[{name:"show",rawName:"v-show",value:t.announcementBtn,expression:"announcementBtn"}],staticClass:"announcement-btn-enter"},[n("button",{attrs:{type:"button"},on:{click:t.close}},[t._v("\n          我知道了\n        ")])])])])])],1)},R=[],B={name:"Announcement",components:{},props:{show:{type:Boolean,default:function(){return!1}},announcementBtn:{type:Boolean,default:function(){return!1}},remark:{type:Array,default:function(){return[]}},imageList:{type:Array,default:function(){return[]}}},data:function(){return{propShow:!1,showConfirmButton:!1}},computed:{},watch:{show:function(){this.propShow=this.show}},created:function(){},mounted:function(){},methods:{close:function(){this.$emit("close")}}},A=B,L=(e("2d36"),e("5d22")),$=Object(L["a"])(A,T,R,!1,null,"26512bab",null),I=$.exports,N=function(){var t=this,a=t.$createElement,n=t._self._c||a;return n("div",[n("van-dialog",{staticClass:"hotupdate-modal",attrs:{"show-confirm-button":t.showConfirmButton,"get-container":"body"},model:{value:t.show,callback:function(a){t.show=a},expression:"show"}},[n("div",[n("img",{attrs:{src:e("50fc")}})]),n("div",{staticClass:"progress center"},[n("span",{staticClass:"percentage",domProps:{textContent:t._s(t.percentage+"%")}},[t._v("\n        0%\n      ")]),n("div",{staticClass:"progress-bar",style:{width:t.percentage/100*t.width+"rem"}},[n("span",{staticClass:"percentage inside",domProps:{textContent:t._s(t.percentage+"%")}},[t._v("\n          0%\n        ")])])])])],1)},U=[],E=(e("e680"),{name:"UpdateModal",components:{},props:{show:{type:Boolean,default:function(){return!1}},percentage:{type:Number,default:function(){return 0}}},data:function(){return{showConfirmButton:!1,width:10.5,propShow:!1}},computed:{},watch:{show:function(){this.propShow=this.show}},created:function(){},mounted:function(){},methods:{}}),W=E,Y=(e("7a14"),Object(L["a"])(W,N,U,!1,null,"1f184dc2",null)),q=Y.exports,J=e("9d92"),G=e("e4b0"),H=e("543b"),X=e("7f53"),F=function(){var t;if(g["b"].session.gm_open_msg_data)try{t=JSON.parse(g["b"].session.gm_open_msg_data),g["b"].session.gm_open_msg_data="",Object(J["a"])(t),H["b"].initTodoPageButton(t)}catch(n){console.error(n)}if(g["b"].session.wx_open_msg_data)try{var a;a=JSON.parse(g["b"].session.wx_open_msg_data),g["b"].session.wx_open_msg_data="",Object(G["a"])(a)}catch(n){console.error(n)}if(g["b"].session.mpush_msg_data)try{var e;e=JSON.parse(g["b"].session.mpush_msg_data),g["b"].session.mpush_msg_data="",Object(X["a"])(e)}catch(n){console.error(n)}},V=e("cae8"),K=e("933f"),Q=e("aff9");function Z(t,a){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);a&&(n=n.filter((function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable}))),e.push.apply(e,n)}return e}function tt(t){for(var a=1;a<arguments.length;a++){var e=null!=arguments[a]?arguments[a]:{};a%2?Z(Object(e),!0).forEach((function(a){Object(o["a"])(t,a,e[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):Z(Object(e)).forEach((function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(e,a))}))}return t}var at={name:"HomeTodo",filters:{msgCountTransfer:function(t){return t>99?"99+":t},bizTypeTransfer:function(t){var a;return t?(a=m["d"][t],a||""):t},bizTypeIconFt:function(t){var a="";try{a=t.msg_content.news.articles[0].change_type}catch(s){a=""}if(34==t.biz_type)return m["c"][t.biz_type];if("现场签证"===a)return"icon-_daiban-xianchangqi";if("设计变更"===a)return"icon-_daiban-shejibiange";var e=t.biz_type;if(!e)return e;var n=m["c"][e];return n||""},timer:function(t){return f["a"].date.beautify(t)}},components:{SwitchTenant:Q["a"],Announcement:I,UpdateModal:q},data:function(){return{ylSuperApp:window.YL_SUPER_APP,loading:!1,finished:!1,swipeIndex:-1,listData:{searchParam:{msg_type:"2",msg_status:0,page_index:0,warning_status:0,showLoading:!0,module_key:""},data:[]},loaded:!1,tenant_undo_msg:!1,cur_tenant:{},tenant_list:[],businessmsg:0,pageIndex:0,list:[],loadAll:!1,busy:!1,bottomConfig:{triggerDistance:10},sysMsg:"",updateMessage:{show:!1,announcementBtn:!1,remark:[],imageList:[],percentage:0,updateModalShow:!1}}},computed:{approval_warning:function(){return this.$store.state.todo.msgInfo.approval_warning},filter_tenant_list:function(){var t=this;return this.tenant_list.filter((function(a){return a.tenant_id!==t.cur_tenant.tenant_id}))}},watch:{businessmsg:function(t){!isNaN(t)&&t>=0&&this.$store.dispatch(u["g"],{todo:t})}},created:function(){this.listData.searchParam.module_key=this.$route.query.module_key,this.cur_tenant=Object(b["a"])(),this.$store.dispatch(h["g"],this.cur_tenant),this.getSysMsg(),this.getCustomSetting(),j.init(this)},mounted:function(){var t=this.$route.query.module_key,a={};t&&(a.module_key=t),this.$store.dispatch(u["d"],a),F(),this.refresh()},methods:{back:function(){history.back()},closeUm:function(){this.updateMessage.updateModalShow=!1,j.goRefreshUrl()},closeAnc:function(){this.updateMessage.show=!1,j.goRefreshUrl()},onSwipeLeft:function(t){1!==this.listData.searchParam.msg_status&&(this.swipeIndex=t)},onSwipeRight:function(){this.swipeIndex=-1},swipeEnable:function(t){return!("1"===t.biz_type&&"2"===t.msg_type)},getSysMsg:function(){var t=this;Object(l["c"])().then((function(a){if("object"==Object(d["a"])(g["b"].storage.update_info_checked)){var e=new Date(g["b"].storage.sys_msg_read),n=e.getTime();(!n||n&&Date.now()>n&&(new Date).getDate()!=e.getDate())&&(t.sysMsg=a.msg)}}))},getListData:function(t){this.busy=!0,this.loaded=!0,this.loading=!0;var a=this;return Object(l["b"])(this.listData.searchParam).then((function(e){a.busy=!1,0===+a.listData.searchParam.msg_status&&(a.businessmsg=e.record_count),"refresh"===t&&(a.listData.data=[],a.finished=!1),e.data.length<10&&(a.finished=!0),a.listData.data=[].concat(Object(c["a"])(a.listData.data),Object(c["a"])(e.data)),a.loading=!1})).catch((function(){a.finished=!0,a.loading=!1}))},refresh:function(t,a){if(!this.busy)return this.listData.searchParam.showLoading=void 0==a||a,this.listData.searchParam.page_index=1,this.getListData("refresh")},more:function(){this.listData.searchParam.page_index++,this.getListData("more")},showRollbackReason:function(t){this.sui.modal({extraClass:"revoke-modal",text:'<h5 class="revoke-header">              <i class="iconfont icon-_jinggao"></i><span>单据已被撤回</span>\n            </h5>\n                <div class="revoke-body">                <div>撤回人：<span> '.concat(t.user_name,"</span></div>                <div>撤回原因：<span> ").concat(t.reason," </span></div>            </div>"),buttons:[{text:"我知道了",close:!0}]})},showRollbackReasonERP:function(t){this.sui.modal({extraClass:"revoke-modal",text:'<h5 class="revoke-header">              <i class="iconfont icon-_jinggao"></i><span>'.concat(t.title,'</span>\n            </h5>\'\n              <div class="revoke-body">                <span>').concat(t.reason,"</span>\n            </div>"),buttons:[{text:"我知道了",close:!0}]})},handleRedirect:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(a,e){var n,s,i,o,r,c=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(console.log(a,e),0===+a.msg_status?(n=a.msg_content.news.articles[0],K["a"].init(n.erp_change_type||n.change_type||n.biz_type_desc),K["a"].idkey(K["a"].idkeys.clickWaitingMsg)):K["a"].idkey(K["a"].idkeys.clickDoneMsg),1!==+a.revoke||!a.revoke_reason.reason){t.next=6;break}return 1===a.revoke_reason.erp_resubmit?this.showRollbackReasonERP(a.revoke_reason):this.showRollbackReason(a.revoke_reason),0===+a.msg_status&&this.handleSetDone(a,e),t.abrupt("return");case 6:try{s=a.msg_content.news.articles[0].flag}catch(d){console.log(d)}if("erpfq"!==s){t.next=11;break}28===+a.biz_type?Object(l["d"])({msg_id:a.msg_id}).then((function(t){1===t.success&&(t.data.biz_id?c.$router.push({name:Object(V["b"])(a.biz_type,"Detail"),query:{id:t.data.biz_id}}):c.sui.toast("请到PC端发起结算对数"))})).catch((function(t){c.handleSetDone(a,e),c.sui.toast(t.message)})):10===+a.biz_type?(i=tt({},a),Object(p["g"])({msg_id:a.msg_id}).then((function(t){1===t.success&&(t.data.biz_id?(i.id=t.data.biz_id,i.action="detail"):(i.contract_id=t.data.contract_info.contract_id,i.action="edit"),g["b"].business.message.open(i))})).catch((function(t){c.handleSetDone(a,e),c.sui.toast(t.message)}))):5===+a.biz_type&&Object(p["h"])({msg_id:a.msg_id}).then((function(t){if(1===t.success)if(t.data.biz_id)c.$router.push({name:Object(V["b"])(a.biz_type,"Detail"),query:{id:t.data.biz_id}});else{var e=JSON.stringify({contract_id:t.data.contract_info.contract_id,erp_ht_schedule_guid:t.data.erp_ht_schedule_guid});c.$router.push({name:Object(V["b"])(a.biz_type,"Add"),query:{params:e}})}})).catch((function(t){c.handleSetDone(a,e),c.sui.toast(t.message)})),t.next=16;break;case 11:return o=a.msg_content.news.articles[0].action,t.next=14,g["b"].business.message.open(tt(tt({},a),{},{action:o,param:a.msg_content.news.articles[0].url,linkto:a.msg_content.news.articles[0].linkto,dev_id:a.msg_content.news.articles[0].dev_id,change_type:a.msg_content.news.articles[0].change_type,__from:"todo"}));case 14:r=t.sent,r&&"invalid"===r.action&&this.handleSetDone(a,e);case 16:case"end":return t.stop()}}),t,this)})));function a(a,e){return t.apply(this,arguments)}return a}(),handleSetDone:function(t,a){var e=this;Object(p["k"])({msg_id:t.msg_id}).then((function(n){if(e.swipeIndex=-1,e.listData.data.splice(a,1),e.businessmsg-=1,1===+e.approval_warning.showWarning)switch(e.$store.commit(u["f"],{total:e.approval_warning.total-1}),t.warning_status){case"1":e.$store.commit(u["f"],{warning:e.approval_warning.warning-1});break;case"2":e.$store.commit(u["f"],{timeout:e.approval_warning.timeout-1});break}}))},changeStatus:function(t){1===t&&(this.swipeIndex=-1),this.busy||this.listData.searchParam.msg_status!==t&&(this.listData.searchParam.msg_status=t,this.listData.searchParam.warning_status=0,this.refresh())},changeWarningStatus:function(t){this.busy||t!==this.listData.searchParam.warning_status&&(this.listData.searchParam.warning_status=t,this.refresh())},getCustomSetting:function(){this.$store.dispatch(u["a"],{code:m["f"].join(",")})},closeSysMsg:function(){this.sysMsg="",g["b"].storage.sys_msg_read=Date.now()}}},et=at,nt=(e("8474"),Object(L["a"])(et,s,i,!1,null,"1fd9a181",null));a["default"]=nt.exports},d368:function(t,a,e){a=t.exports=e("690e")(!1),a.push([t.i,"[data-v-1f184dc2] .van-dialog__content{padding:0;background:none}.gcxt .center[data-v-1f184dc2]{text-align:center}",""])},e069:function(t,a,e){a=t.exports=e("690e")(!1),a.push([t.i,".gcxt .single-page.update-announcement[data-v-26512bab]{top:56%}.gcxt .announcement-mask[data-v-26512bab]{position:absolute;width:100%;height:100%;left:0;top:0;z-index:10000;background-color:rgba(0,0,0,.2);-webkit-box-sizing:content-box;box-sizing:content-box}.gcxt .announcement-outer[data-v-26512bab]{position:relative;margin:0 auto}.gcxt .announcement-inner[data-v-26512bab]{width:100%;left:0;top:0}.gcxt .swiper-container[data-v-26512bab]{height:100%;padding-bottom:0;border-radius:10px;padding:0}.gcxt .announcement-btn-enter[data-v-26512bab]{position:absolute;left:50%;bottom:-60px;-webkit-transform:translateX(-50%);transform:translateX(-50%);width:210px;height:45px;line-height:45px;z-index:100}.gcxt .single-page .announcement-btn-enter[data-v-26512bab]{bottom:3%;display:block;width:90%}.gcxt .announcement-btn-enter button[data-v-26512bab]{font-size:16px;border:none;-webkit-appearance:none;-moz-appearance:none;appearance:none;color:#fff;width:100%;height:45px;line-height:45px;border-radius:22.5px;background:#4278f8;-webkit-box-shadow:0 1px 5px 0 rgba(62,148,255,.67);box-shadow:0 1px 5px 0 rgba(62,148,255,.67)}.gcxt .announcement-btn-skip button[data-v-26512bab]{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border:none}.gcxt .single-page .announcement-btn-enter button[data-v-26512bab]{width:45%;border-radius:15px;height:33px;line-height:30px;background-color:#3492e9}.gcxt .announcement-btn-skip[data-v-26512bab]{position:absolute;z-index:10;right:3%;top:3%;color:#aaa;font-size:13px}.gcxt .single-page .announcement-btn-skip[data-v-26512bab]{display:none}.gcxt .swiper-container-horizontal>.swiper-pagination[data-v-26512bab]{bottom:4%}.gcxt .swiper-pagination-bullet[data-v-26512bab]{width:6px;height:6px}.gcxt .swiper-slide img[data-v-26512bab]{display:block;width:100%}.gcxt .update-announcement-remark.modal.modal-no-buttons.modal-in[data-v-26512bab],.gcxt .update-announcement.modal.modal-no-buttons.modal-in[data-v-26512bab]{width:83%;left:8.5%;margin-left:0}.gcxt .update-announcement.modal.modal-no-buttons.modal-in .modal-inner[data-v-26512bab]{padding:0;background-color:transparent}.gcxt .update-announcement-remark.modal.modal-no-buttons.modal-in .modal-inner[data-v-26512bab]{padding:0;background-color:transparent;line-height:0}.gcxt .update-announcement-remark .update-announcement-remark-content[data-v-26512bab]{background-color:#fff}.gcxt .update-announcement-remark .update-announcement-remark-content .content-scroll[data-v-26512bab]{line-height:20px;min-height:80px;max-height:150px;overflow-y:auto;font-size:14px;background-color:#fff;margin:0 20px;text-align:left;color:#797979}.gcxt .update-announcement-remark .update-announcement-remark-bottom[data-v-26512bab]{height:20px;background-color:#fff;border-radius:0 0 10px 10px}.gcxt .update-announcement-remark .update-announcement-border .image_bg[data-v-26512bab]{transform:translateY(1px);-webkit-transform:translateY(1px)}",""])},e5cd:function(t,a,e){var n=e("e069");"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var s=e("85cb").default;s("6322fab6",n,!0,{sourceMap:!1,shadowMode:!1})},f1f0:function(t,a,e){"use strict";e("6203")}}]);