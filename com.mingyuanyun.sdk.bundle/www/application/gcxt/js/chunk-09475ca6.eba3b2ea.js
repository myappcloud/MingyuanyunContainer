(window["webpackJsonp_module_entry_gcxt_"]=window["webpackJsonp_module_entry_gcxt_"]||[]).push([["chunk-09475ca6"],{"0937":function(t,e,o){var c=o("ce37"),r=o("b32a"),n=o("2cf0"),i="Expected a function",a=Math.max,l=Math.min;function s(t,e,o){var s,d,p,u,f,j,x=0,h=!1,b=!1,g=!0;if("function"!=typeof t)throw new TypeError(i);function m(e){var o=s,c=d;return s=d=void 0,x=e,u=t.apply(c,o),u}function v(t){return x=t,f=setTimeout(y,e),h?m(t):u}function _(t){var o=t-j,c=t-x,r=e-o;return b?l(r,p-c):r}function w(t){var o=t-j,c=t-x;return void 0===j||o>=e||o<0||b&&c>=p}function y(){var t=r();if(w(t))return k(t);f=setTimeout(y,_(t))}function k(t){return f=void 0,g&&s?m(t):(s=d=void 0,u)}function z(){void 0!==f&&clearTimeout(f),x=0,s=j=d=f=void 0}function O(){return void 0===f?u:k(r())}function S(){var t=r(),o=w(t);if(s=arguments,d=this,j=t,o){if(void 0===f)return v(j);if(b)return f=setTimeout(y,e),m(j)}return void 0===f&&(f=setTimeout(y,e)),u}return e=n(e)||0,c(o)&&(h=!!o.leading,b="maxWait"in o,p=b?a(n(o.maxWait)||0,e):p,g="trailing"in o?!!o.trailing:g),S.cancel=z,S.flush=O,S}t.exports=s},"0c32":function(t,e,o){e=t.exports=o("690e")(!1),e.push([t.i,".gcxt[data-v-3d31d1a3] :export{colorPrimary:#2c5cf7;headerBackgroundColor:#fff;headerTextColor:#333}.gcxt .authorize-project-list .content[data-v-3d31d1a3]{padding-bottom:0}.gcxt .authorize-project-list .content-top[data-v-3d31d1a3]{position:absolute;left:0;top:0;width:100%;height:44px}.gcxt .authorize-project-list .content-main[data-v-3d31d1a3]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;min-height:100%}.gcxt .authorize-project-list .content .container[data-v-3d31d1a3]{height:100%;display:-webkit-box;display:-ms-flexbox;display:flex;padding-top:44px}.gcxt .authorize-project-list .content .container .icon-_shenpitongguo[data-v-3d31d1a3],.gcxt .authorize-project-list .content .container .icon-redio-selected[data-v-3d31d1a3]{color:#3492e9}.gcxt .authorize-project-list .content .container .icon-unselect[data-v-3d31d1a3]{display:inline-block;width:.8rem;height:.8rem;line-height:normal;font-size:.8rem;-webkit-box-sizing:border-box;box-sizing:border-box;border-radius:50%;border:1px solid hsla(0,0%,59.2%,.5)}.gcxt .authorize-project-list .content .container .project-list[data-v-3d31d1a3]{width:36%;background:#eee}.gcxt .authorize-project-list .content .container .project-list .project-item[data-v-3d31d1a3]{width:100%;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.gcxt .authorize-project-list .content .container .project-list .project-item .select-icon[data-v-3d31d1a3]{width:30%;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.gcxt .authorize-project-list .content .container .project-list .project-item .project-name[data-v-3d31d1a3]{width:70%;padding:.5rem .55rem .5rem .25rem}.gcxt .authorize-project-list .content .container .project-content[data-v-3d31d1a3]{-webkit-box-flex:1;-ms-flex:1;flex:1;background:#fff}.gcxt .authorize-project-list .content .container .project-content .all-select[data-v-3d31d1a3]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;border-bottom:1px solid #ececec}.gcxt .authorize-project-list .content .container .project-content .all-select .icon-box[data-v-3d31d1a3]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;width:15%}.gcxt .authorize-project-list .content .container .project-content .all-select .icon-box i[data-v-3d31d1a3]{margin-left:.75rem}.gcxt .authorize-project-list .content .container .project-content .all-select span[data-v-3d31d1a3]{margin:.5rem .55rem .5rem .25rem}.gcxt .authorize-project-list .content .container .project-content .project-wrap .project-title .project-name[data-v-3d31d1a3]{border-bottom:1px solid #ececec}.gcxt .authorize-project-list .content .container .project-content .project-wrap .project-name[data-v-3d31d1a3]{-webkit-box-flex:1;-ms-flex:1;flex:1;padding:.5rem .55rem .5rem .25rem}.gcxt .authorize-project-list .content .container .project-content .project-wrap .project-data[data-v-3d31d1a3],.gcxt .authorize-project-list .content .container .project-content .project-wrap .project-title[data-v-3d31d1a3]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.gcxt .authorize-project-list .content .container .project-content .project-wrap .project-data .icon-box[data-v-3d31d1a3],.gcxt .authorize-project-list .content .container .project-content .project-wrap .project-title .icon-box[data-v-3d31d1a3]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;width:15%}.gcxt .authorize-project-list .content .container .project-content .project-wrap .project-data .icon-box i[data-v-3d31d1a3],.gcxt .authorize-project-list .content .container .project-content .project-wrap .project-title .icon-box i[data-v-3d31d1a3]{margin-left:.75rem}.gcxt .authorize-project-list .content .container .project-content .project-wrap .project-data .icon-box[data-v-3d31d1a3]{width:24%}.gcxt .authorize-project-list .content .container .project-content .project-wrap .project-data .icon-box i[data-v-3d31d1a3]{margin-left:1.7rem}.gcxt .authorize-project-list .content .container .project-content .project-wrap .project-data .project-name[data-v-3d31d1a3]{color:#96959a}.gcxt .authorize-project-list .btn-confirm[data-v-3d31d1a3]{position:relative;color:#2c5cf7;padding:20px 15px;right:-15px;z-index:20;font-size:16px;background-color:transparent;outline:none;border:none}",""])},"0ecb":function(t,e,o){"use strict";o("4c1e")},"2cf0":function(t,e,o){var c=o("ce37"),r=o("77e3"),n=NaN,i=/^\s+|\s+$/g,a=/^[-+]0x[0-9a-f]+$/i,l=/^0b[01]+$/i,s=/^0o[0-7]+$/i,d=parseInt;function p(t){if("number"==typeof t)return t;if(r(t))return n;if(c(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=c(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(i,"");var o=l.test(t);return o||s.test(t)?d(t.slice(2),o?2:8):a.test(t)?n:+t}t.exports=p},"3bd2":function(t,e,o){var c=o("5386");"string"===typeof c&&(c=[[t.i,c,""]]),c.locals&&(t.exports=c.locals);var r=o("85cb").default;r("0d3f2b14",c,!0,{sourceMap:!1,shadowMode:!1})},"3d6f":function(t,e,o){"use strict";o.d(e,"a",(function(){return i})),o.d(e,"b",(function(){return a})),o.d(e,"c",(function(){return l})),o.d(e,"d",(function(){return s})),o.d(e,"e",(function(){return d}));var c,r=o("28f8"),n=o("f121"),i=[{name:"确认开发商",route:"/authorize/tenant"},{name:"选择岗位",route:"/authorize/role"},{name:"申请权限",route:"/authorize/project"}],a=[{name:"确认开发商",route:"/authorize/tenant"},{name:"选择岗位",route:"/authorize/role"},{name:"申请项目",route:"/authorize/project"}],l=[{name:"确认开发商",route:"/authorize/tenant"},{name:"选择岗位",route:"/authorize/role"},{name:"添加合同",route:"/authorize/contract-manager"},{name:"提交图片",route:"/authorize/contract-pic"}],s=[{name:"确认开发商",route:"/authorize/tenant"},{name:"选择岗位",route:"/authorize/role"},{name:"添加合同",route:"/authorize/contract-manager"}],d=[{name:"确认开发商",route:"/authorize/tenant"},{name:"选择岗位",route:"/authorize/role"},{name:"添加合同",route:"/authorize/contract"}];c={},Object(r["a"])(c,n["b"].CONSULTANT,a),Object(r["a"])(c,n["b"].DATA_MNGER,a),Object(r["a"])(c,n["b"].CONTRACT_CLERK,a),Object(r["a"])(c,n["b"].JF_MNGER,a),Object(r["a"])(c,n["b"].JF_WORKER,a),Object(r["a"])(c,n["b"].SUPERVISOR,a),Object(r["a"])(c,n["b"].YF_MNGER,l),Object(r["a"])(c,n["b"].YF_WORKER,d),Object(r["a"])(c,n["b"].JF_CLY,a),Object(r["a"])(c,n["b"].YF_CLY,a),Object(r["a"])(c,n["b"].CLGYS,a)},"4c1e":function(t,e,o){var c=o("dbdf");"string"===typeof c&&(c=[[t.i,c,""]]),c.locals&&(t.exports=c.locals);var r=o("85cb").default;r("47c6438a",c,!0,{sourceMap:!1,shadowMode:!1})},5386:function(t,e,o){e=t.exports=o("690e")(!1),e.push([t.i,".gcxt[data-v-60d8d9b2] :export{colorPrimary:#2c5cf7;headerBackgroundColor:#fff;headerTextColor:#333}.gcxt .project-select[data-v-60d8d9b2]{-webkit-box-flex:1;-ms-flex-positive:1;flex-grow:1;display:-webkit-box;display:-ms-flexbox;display:flex;height:100%}.gcxt .project-select .icon-_shenpitongguo[data-v-60d8d9b2],.gcxt .project-select .icon-redio-selected[data-v-60d8d9b2]{color:#2c5cf7}.gcxt .project-select .icon-unselect[data-v-60d8d9b2]{display:inline-block;width:.8rem;height:.8rem;line-height:normal;font-size:.8rem;-webkit-box-sizing:border-box;box-sizing:border-box;border-radius:50%;border:1px solid hsla(0,0%,59.2%,.5)}.gcxt .project-select .project-list[data-v-60d8d9b2]{width:36%;background:#eee;overflow:auto}.gcxt .project-select .project-list .project-item[data-v-60d8d9b2]{width:100%;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between}.gcxt .project-select .project-list .project-item[data-v-60d8d9b2],.gcxt .project-select .project-list .project-item .select-icon[data-v-60d8d9b2]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.gcxt .project-select .project-list .project-item .select-icon[data-v-60d8d9b2]{width:30%;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-ms-flex-negative:0;flex-shrink:0}.gcxt .project-select .project-list .project-item .project-name[data-v-60d8d9b2]{padding:.5rem .55rem .5rem .25rem;-webkit-box-flex:1;-ms-flex-positive:1;flex-grow:1}.gcxt .project-select .project-content[data-v-60d8d9b2]{-webkit-box-flex:1;-ms-flex:1;flex:1;background:#fff;padding-bottom:30px;overflow:auto}.gcxt .project-select .project-content .all-select[data-v-60d8d9b2]{border-bottom:1px solid #ececec}.gcxt .project-select .project-content .all-select[data-v-60d8d9b2],.gcxt .project-select .project-content .all-select .icon-box[data-v-60d8d9b2]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.gcxt .project-select .project-content .all-select .icon-box[data-v-60d8d9b2]{width:15%;-ms-flex-negative:0;flex-shrink:0}.gcxt .project-select .project-content .all-select .icon-box i[data-v-60d8d9b2]{margin-left:.75rem}.gcxt .project-select .project-content .all-select span[data-v-60d8d9b2]{margin:.5rem .55rem .5rem .25rem}.gcxt .project-select .project-content .project-wrap .project-title .project-name[data-v-60d8d9b2]{border-bottom:1px solid #ececec}.gcxt .project-select .project-content .project-wrap .project-name[data-v-60d8d9b2]{-webkit-box-flex:1;-ms-flex:1;flex:1;padding:.5rem .55rem .5rem .25rem}.gcxt .project-select .project-content .project-wrap .project-data[data-v-60d8d9b2],.gcxt .project-select .project-content .project-wrap .project-title[data-v-60d8d9b2]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.gcxt .project-select .project-content .project-wrap .project-data .icon-box[data-v-60d8d9b2],.gcxt .project-select .project-content .project-wrap .project-title .icon-box[data-v-60d8d9b2]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;width:15%}.gcxt .project-select .project-content .project-wrap .project-data .icon-box i[data-v-60d8d9b2],.gcxt .project-select .project-content .project-wrap .project-title .icon-box i[data-v-60d8d9b2]{margin-left:.75rem}.gcxt .project-select .project-content .project-wrap .project-data .icon-box[data-v-60d8d9b2]{width:24%}.gcxt .project-select .project-content .project-wrap .project-data .icon-box i[data-v-60d8d9b2]{margin-left:1.7rem}.gcxt .project-select .project-content .project-wrap .project-data .project-name[data-v-60d8d9b2]{color:#96959a}",""])},"77e3":function(t,e,o){var c=o("c20f"),r=o("2f85"),n="[object Symbol]";function i(t){return"symbol"==typeof t||r(t)&&c(t)==n}t.exports=i},"83b4":function(t,e,o){"use strict";o("3bd2")},af0b:function(t,e,o){"use strict";o.d(e,"q",(function(){return l})),o.d(e,"e",(function(){return s})),o.d(e,"m",(function(){return p})),o.d(e,"n",(function(){return u})),o.d(e,"a",(function(){return f})),o.d(e,"p",(function(){return j})),o.d(e,"v",(function(){return x})),o.d(e,"c",(function(){return h})),o.d(e,"w",(function(){return b})),o.d(e,"b",(function(){return g})),o.d(e,"o",(function(){return m})),o.d(e,"t",(function(){return v})),o.d(e,"s",(function(){return _})),o.d(e,"d",(function(){return w})),o.d(e,"j",(function(){return y})),o.d(e,"k",(function(){return k})),o.d(e,"r",(function(){return z})),o.d(e,"f",(function(){return O})),o.d(e,"g",(function(){return S})),o.d(e,"u",(function(){return P})),o.d(e,"l",(function(){return C})),o.d(e,"i",(function(){return $})),o.d(e,"h",(function(){return d}));o("5ab2"),o("6d57"),o("e10e");var c=o("28f8"),r=o("ab3e"),n=o("da71");function i(t,e){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(t);e&&(c=c.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),o.push.apply(o,c)}return o}function a(t){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?i(Object(o),!0).forEach((function(e){Object(c["a"])(t,e,o[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):i(Object(o)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))}))}return t}function l(){return Object(r["a"])({url:n["a"].get_tenant})}function s(t){return Object(r["a"])({url:n["a"].auth_check_tenant,data:t})}function d(t){return Object(r["a"])({url:n["a"].get_role_with_level,data:t})}function p(t){return Object(r["a"])({url:n["a"].get_jf_new_manager_project,data:t})}function u(t){return Object(r["a"])({url:n["a"].get_jf_manager_project,data:t})}function f(t){return Object(r["a"])({url:n["a"].jf_apply_auth,data:a(a({},t),{},{error:!0})})}function j(t){return Object(r["a"])({url:n["a"].get_jf_users,data:t})}function x(t){return Object(r["a"])({url:n["a"].revoke_auth,data:t})}function h(t){return Object(r["a"])({url:n["a"].yf_manager_apply_auth,data:t})}function b(t){return Object(r["a"])({url:n["a"].check_user_role,data:t})}function g(t){return Object(r["a"])({url:n["a"].yf_engineer_apply_auth,data:t})}function m(){return Object(r["a"])({url:n["a"].get_jf_project})}function v(){return Object(r["a"])({url:n["a"].get_yf_user_project})}function _(t){return Object(r["a"])({url:n["a"].get_yf_user_contract,data:t})}function w(t){return Object(r["a"])({url:n["a"].check_project_has_manager,data:t})}function y(t){return Object(r["a"])({url:n["a"].get_auth_detail,data:t})}function k(t){return Object(r["a"])({url:n["a"].get_jf_auth_project,data:t})}function z(t){return Object(r["a"])({url:n["a"].get_yf_auth_contract,data:t})}function O(t){return Object(r["a"])({url:n["a"].empower_for_jf,data:t})}function S(t){return t=a(a({},t),{},{showLoading:!0}),Object(r["a"])({url:n["a"].empower_for_yf,data:t})}function P(t){return t=a(a({},t),{},{showLoading:!0}),Object(r["a"])({url:n["a"].reject_auth,data:t})}function C(t){return Object(r["a"])({url:n["a"].get_sync_jf_contracts,data:t})}function $(t){return Object(r["a"])({url:n["a"].get_sync_yf_contracts,data:t})}},b30b:function(t,e,o){var c=o("0c32");"string"===typeof c&&(c=[[t.i,c,""]]),c.locals&&(t.exports=c.locals);var r=o("85cb").default;r("278571bd",c,!0,{sourceMap:!1,shadowMode:!1})},b32a:function(t,e,o){var c=o("eb00"),r=function(){return c.Date.now()};t.exports=r},b5a8:function(t,e,o){"use strict";o("b30b")},dbdf:function(t,e,o){e=t.exports=o("690e")(!1),e.push([t.i,".gcxt[data-v-3d332385] :export{colorPrimary:#2c5cf7;headerBackgroundColor:#fff;headerTextColor:#333}.gcxt .authorize-project .content[data-v-3d332385]{display:-webkit-box;display:-ms-flexbox;display:flex;padding-bottom:0;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column}.gcxt .authorize-project .content .field[data-v-3d332385]{margin-top:14px;background:#fff;height:56px;padding-left:15px;overflow:hidden;white-space:nowrap}.gcxt .authorize-project .content .field .label[data-v-3d332385]{display:inline-block;font-size:16px;vertical-align:middle;line-height:56px;min-width:30%;padding-right:10px}.gcxt .authorize-project .content .field input[data-v-3d332385]{outline:none;border:none;font-size:15px;line-height:20px;vertical-align:middle}.gcxt .authorize-project .content .field button[data-v-3d332385]{outline:none;border:none;background-color:transparent;vertical-align:middle;line-height:56px;color:#2c5cf7;font-size:16px;padding-left:0}.gcxt .authorize-project .content .field button .iconfont[data-v-3d332385]{font-size:14px}.gcxt .authorize-project-count[data-v-3d332385]{text-indent:15px;line-height:40px;font-size:13px;color:#999}.gcxt .authorize-project .project-item[data-v-3d332385]{padding-left:20px;background-color:#fff}.gcxt .authorize-project .project-item-inner[data-v-3d332385]{border-bottom:1px solid #f5f5f5;line-height:44px;font-size:16px;position:relative}.gcxt .authorize-project .project-item-inner .iconfont[data-v-3d332385]{position:absolute;right:15px;top:50%;margin-top:-8px;line-height:16px}.gcxt .authorize-project .project-item-inner .icon-_shenpitongguo[data-v-3d332385]{color:#2c5cf7}.gcxt .authorize-project .project-view[data-v-3d332385]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-flex:1;-ms-flex:1;flex:1;overflow:hidden}.gcxt .authorize-project .project-view .project-title[data-v-3d332385]{margin-left:6%}.gcxt .authorize-project .project-view .icon-box[data-v-3d332385]{width:14%!important}.gcxt .authorize-project .project-view .project-content[data-v-3d332385]{-webkit-box-flex:1;-ms-flex:1;flex:1;overflow:hidden}.gcxt .authorize-project[data-v-3d332385] .project-select-view .project-list .project-item{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;min-height:48px}.gcxt .authorize-project[data-v-3d332385] .project-select-view .project-list .project-item .project-name{padding:0 15px;margin:4px 0;text-overflow:-o-ellipsis-lastline;overflow:hidden;text-overflow:ellipsis;display:-webkit-box;-webkit-line-clamp:2;line-clamp:2;-webkit-box-orient:vertical}.gcxt .authorize-project[data-v-3d332385] .project-select-view .project-content{padding-left:15px}.gcxt .authorize-project[data-v-3d332385] .project-select-view .project-content .project-wrap .project-data .icon-box{width:20px}.gcxt .authorize-project[data-v-3d332385] .project-select-view .project-content .project-wrap .project-name{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding-left:0;border-bottom:1px solid #ececec;min-height:48px}.gcxt .authorize-project .btn-next[data-v-3d332385]{position:relative;right:-15px;color:#2c5cf7;padding:20px 15px;z-index:20;font-size:16px;background-color:transparent;outline:none;border:none}",""])},ea9c:function(t,e,o){"use strict";o.r(e);var c=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"page-group"},[o("div",{staticClass:"authorize-project page",class:{"page-current":!t.page}},[o("v-header",{attrs:{title:"申请项目权限"}},[o("button",{staticClass:"btn-next",attrs:{slot:"right",type:"button"},on:{click:t.submit},slot:"right"},[t._v("\n        提交\n      ")])]),o("div",{staticClass:"content"},[o("xt-wizard",{attrs:{wizard:t.wizard,current:t.current}}),o("div",{staticClass:"field"},[o("span",{staticClass:"label"},[t._v("项目管理员手机号")]),o("input",{directives:[{name:"model",rawName:"v-model",value:t.phone,expression:"phone"}],attrs:{type:"tel",placeholder:"请输入手机号"},domProps:{value:t.phone},on:{input:function(e){e.target.composing||(t.phone=e.target.value)}}})]),o("div",{staticClass:"field",on:{click:t.selectProject}},[t._m(0)]),t.project.length?o("div",{staticClass:"project-view"},[o("div",{staticClass:"authorize-project-count"},[t._v("\n          已申请的项目 ("+t._s(t.project.length)+")\n        ")]),o("div",{staticClass:"project-content"},[o("project-select",{attrs:{"project-list":t.filter_project_list,edit:!1}})],1)]):t._e()],1)],1),o("authorize-project-list-jf",{attrs:{"project-list":t.project_list,project:t.project,page:t.page,pid:"project","go-back":t.closeProject},on:{confirm:t.confirm}})],1)},r=[function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("button",{attrs:{type:"button"}},[o("i",{staticClass:"iconfont icon--jia"}),o("span",[t._v("添加项目")])])}],n=(o("f548"),o("3d6f")),i=o("af0b"),a=o("a740"),l=function(){var t=this,e=t.$createElement,o=t._self._c||e;return t.page===t.pid?o("page",{staticClass:"authorize-project-list"},[o("template",{slot:"header"},[o("v-header",{attrs:{title:"选择项目","back-action":t.goBack}},[o("button",{staticClass:"btn-confirm",attrs:{slot:"right",type:"button"},on:{click:t.confirm},slot:"right"},[t._v("确认("+t._s(t.selectProjectIds.length)+")")])]),o("search-bar",{attrs:{placeholder:"搜索项目"},on:{search:t.onsearch}})],1),o("project-select",{attrs:{"search-val":t.searchVal,"project-list":t.projectList,edit:!0},on:{onchange:t.onchange}})],2):t._e()},s=[],d=(o("6d57"),o("0937")),p=o.n(d),u=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{class:"project-select project-select-"+(t.edit?"edit":"view")},[o("div",{staticClass:"project-list"},t._l(t.projectList,(function(e,c){return o("div",{key:e.company_id,staticClass:"project-item",style:{background:c===t.currentProjectIndex?"white":"inherit"},on:{click:function(e){t.switchProject(c)}}},[t.edit?o("div",{staticClass:"select-icon",on:{click:function(o){o.stopPropagation(),t.onSelectProject(e,c)}}},[o("span",{class:{"iconfont icon-redio-unselected":!e.selectStatus,"iconfont icon-redio-selected":1==e.selectStatus,"iconfont icon-_shenpitongguo":2==e.selectStatus}})]):t._e(),o("div",{staticClass:"project-name"},[t._v(t._s(e.company_name))])])}))),o("div",{staticClass:"project-content"},[t.edit?o("div",{staticClass:"all-select",on:{click:function(e){t.onSelectProject(t.projectData[t.currentProjectIndex],t.currentProjectIndex)}}},[o("div",{staticClass:"icon-box"},[o("i",{class:{"iconfont icon-redio-unselected":t.projectData[t.currentProjectIndex]&&(!t.projectData[t.currentProjectIndex].selectStatus||1==t.projectData[t.currentProjectIndex].selectStatus),"iconfont icon-_shenpitongguo":t.projectData[t.currentProjectIndex]&&2==t.projectData[t.currentProjectIndex].selectStatus}})]),o("span",[t._v("全选")])]):t._e(),t.projectData[t.currentProjectIndex]?o("div",{staticClass:"project-wrap"},t._l(t.projectData[t.currentProjectIndex].children,(function(e){return o("div",{key:e.project_id},[e.children&&e.children.length?o("div",[t.show(e)?o("div",{staticClass:"project-title",on:{click:function(o){t.onSelectChildProject(e,t.projectData[t.currentProjectIndex])}}},[t.edit?o("div",{staticClass:"icon-box"},[o("i",{class:{"iconfont icon-redio-unselected":!e.selectStatus,"iconfont icon-redio-selected":1==e.selectStatus,"iconfont icon-_shenpitongguo":2==e.selectStatus}})]):t._e(),o("div",{staticClass:"project-name"},[t._v(t._s(e.project_name))])]):t._e(),t._l(e.children,(function(c){return o("div",{key:c.project_id,staticClass:"project-data",on:{click:function(o){t.onSelectProjectItem(c,e)}}},[!t.searchVal||t.searchVal&&-1!=c.project_name.indexOf(t.searchVal)?o("div",{staticClass:"icon-box"},[t.edit?o("i",{key:c.isSelect?0:1,class:c.isSelect?"iconfont icon-select icon-_shenpitongguo":"iconfont icon-redio-unselected"}):t._e()]):t._e(),!t.searchVal||t.searchVal&&-1!=c.project_name.indexOf(t.searchVal)?o("div",{staticClass:"project-name"},[t._v(t._s(c.project_name))]):t._e()])}))],2):t._e()])}))):t._e()])])},f=[],j={name:"ProjectSelect",props:{projectList:{type:Array,default:function(){return[]}},edit:{type:Boolean,default:!1},searchVal:{type:String,default:""}},data:function(){return{currentProjectIndex:0}},computed:{projectData:function(){return this.projectList}},watch:{projectData:function(t,e){t.length<e.length&&!this.edit&&(this.currentProjectIndex=0)}},methods:{show:function(t){var e=this;return console.log(t),!this.searchVal||t.children.some((function(t){return-1!=t.project_name.indexOf(e.searchVal)}))},renderSelectStatus:function(t){var e=0,o=0,c=0;t.children.forEach((function(t){t&&t.children.length&&(c++,0==t.selectStatus?o++:2==t.selectStatus&&e++)})),e===c?this.$set(t,"selectStatus",2):o==c?this.$set(t,"selectStatus",0):this.$set(t,"selectStatus",1)},switchProject:function(t){this.currentProjectIndex=t},onSelectProject:function(t,e){var o=this,c=2==t.selectStatus?0:2,r=!!c;this.$set(t,"selectStatus",c),t.children.forEach((function(t){o.$set(t,"selectStatus",c),t.children&&t.children.length&&t.children.forEach((function(t){o.$set(t,"isSelect",r)}))})),this.$emit("onchange",this.projectData)},onSelectChildProject:function(t,e){var o=this,c=2==t.selectStatus?0:2,r=!!c;this.$set(t,"selectStatus",c),t.children.forEach((function(t){o.$set(t,"isSelect",r)})),this.renderSelectStatus(e),this.$emit("onchange",this.projectData)},onSelectProjectItem:function(t,e){var o=!t.isSelect,c=0,r=0,n=e.children.length;this.$set(t,"isSelect",o),e.children.forEach((function(t){t.isSelect&&c++})),r=0===c?0:c<n?1:2,this.$set(e,"selectStatus",r);var i=this.projectData,a=this.currentProjectIndex;this.renderSelectStatus(i[a]),this.$emit("onchange",i)}}},x=j,h=(o("83b4"),o("c701")),b=Object(h["a"])(x,u,f,!1,null,"60d8d9b2",null),g=b.exports,m=o("933f"),v={name:"AuthorizeProjectListJf",components:{ProjectSelect:g},props:{page:String,pid:String,projectList:{type:Array,default:function(){return[]}},project:{type:Array,default:function(){return[]}},goBack:{type:Function,default:function(){return function(){}}}},data:function(){return{filterProjectList:[],selectList:[],searchVal:""}},computed:{selectProjectIds:function(){var t=[];return this.selectList.forEach((function(e){e.children&&e.children.length&&e.children.forEach((function(e){e.children&&e.children.length&&e.children.forEach((function(e){e.isSelect&&t.push(e.project_id)}))}))})),t}},methods:{onchange:function(t){this.selectList=t},confirm:function(){this.selectProjectIds&&this.selectProjectIds.length&&m["a"].idkey(m["a"].idkeys.userApplyProjectAccessConfirm),this.$emit("confirm",this.selectList,this.selectProjectIds)},onsearch:function(t){this._report(),this.searchVal=t},_report:p()((function(){m["a"].idkey(m["a"].idkeys.userApplyProjectAccessSearch)}),500)}},_=v,w=(o("b5a8"),Object(h["a"])(_,l,s,!1,null,"3d31d1a3",null)),y=w.exports,k={name:"AuthorizeProject",components:{AuthorizeProjectListJf:y,ProjectSelect:g},data:function(){var t=this.$store.state.authInfo,e=t.current_role,o=t.current_station,c=t.tenant_code,r=t.tenant_id,i=n["b"],l=i[1].route;if(!c){var s=Object(a["a"])();c=s.tenant_code,r=s.tenant_id,e=s.role_code,i=i.slice(2),l="/authorize/overview/project"}return{page:"",wizard:i,current:i[2],go_back_link:l,phone:"",current_role:e,current_station:o,tenant_code:c,tenant_id:r,project_list:[],filter_project_list:[],project:[]}},watch:{phone:function(t){this.filter_project_list=[],this.project=[]}},methods:{selectProject:function(){var t=this;if(/^\d{8,}$/.test(this.phone)){m["a"].idkey(m["a"].idkeys.userFetchApplyProjectAccess);var e=this.tenant_code,o=Object(a["d"])();if(this.project_list.length)return void(this.page="project");Object(i["m"])({tenant_code:e,jf_user_code:this.phone,sq_user_id:o.user_id}).then((function(e){t.project_list=e.data,e.data&&0===e.data.length?t.sui.toast("未找到项目数据，请重新选择管理员"):t.page="project"})).catch((function(e){t.sui.toast(e.message)}))}else this.sui.toast("手机号有误")},closeProject:function(){this.page=null},confirm:function(t,e,o){var c=t;c=JSON.parse(JSON.stringify(c)),c=c.filter((function(t){if(t.selectStatus)return t.children=t.children.filter((function(t){if(t.selectStatus)return t.children=t.children.filter((function(t){return!!t.isSelect})),!0})),!0})),this.filter_project_list=c,this.project_list=t,this.project=e,this.page=null},submit:function(){var t=this,e=this.tenant_code,o=this.current_role,c=this.current_station,r=this.phone,n=this.project;m["a"].idkey(m["a"].idkeys.userApplyProjectAccessSubmit),/^\d{8,}$/.test(r)?n.length?Object(i["a"])({tenant_code:e,role_code:o,station_name:c,jf_user_code:r,project_id:n}).then((function(e){t.$router.replace({path:"/authorize/overview/process"})})):this.sui.toast("请选择项目"):this.sui.toast("请录入正确的项目管理员手机号")}}},z=k,O=(o("0ecb"),Object(h["a"])(z,c,r,!1,null,"3d332385",null));e["default"]=O.exports}}]);