(window["webpackJsonp_module_entry_gcxt_"]=window["webpackJsonp_module_entry_gcxt_"]||[]).push([["chunk-040a6a36"],{"19f8":function(e,t,o){"use strict";o.r(t);var n=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"page-group"},[o("div",{staticClass:"page page-current"},[o("v-header",{attrs:{title:"详细资料"}},[o("a",{staticClass:"icon icon-left pull-left",on:{click:e.closePersonalInfo}})]),e.selectedUser?o("div",{staticClass:"content"},[o("div",[o("div",{staticClass:"personInfo-field personInfo-header"},[o("img",{staticClass:"header",attrs:{alt:"",src:e.selectedUser.photo?e.selectedUser.photo:e.defaultImage}}),o("span",[e._v(e._s(e.selectedUser.name))]),e.selectedUser.station_name?o("span",{staticClass:"position"},[e._v("("+e._s(e.selectedUser.station_name)+")")]):e._e()]),o("div",{staticClass:"personInfo-field personInfo-tel"},[o("span",[e._v("电话")]),o("a",{staticClass:"phone",attrs:{href:"tel:"+e.selectedUser.user_code}},[e._v(e._s(e.selectedUser.user_code))]),o("i",{staticClass:"iconfont icon-_lianxikefu"})])])]):e._e()],1)])},a=[],r=o("8b7b"),i=o("8c3a"),s=o.n(i),c=o("21aa"),l=o("34ae"),u={name:"PersonInfo",data:function(){return{selectedUser:null,imData:this.$store.state.im.imData,defaultImage:s.a}},created:function(){try{this.selectedUser=l["a"].IM_SelectedUser}catch(e){console.log(e)}},methods:{createIm:function(e){this.$store.commit(c["c"],{conversationType:r["b"],targetId:e.user_id,targetInfo:e}),localStorage.__im_user=r["b"]+":"+e.user_id,Object(r["d"])(e)},openIm:function(e){e&&(localStorage.__im_user=e.conversationType+":"+e.targetId,e.conversationType===r["a"]?Object(r["d"])({user_id:e.targetId,name:e.group_name||"群聊",photo:""},null,1):e.conversationType===r["b"]&&Object(r["d"])(e.targetInfo))},closePersonalInfo:function(){this.imData.current&&this.openIm(this.imData.current),history.back()}}},f=u,d=(o("f9f6"),o("5d22")),p=Object(d["a"])(f,n,a,!1,null,"f7b10844",null);t["default"]=p.exports},"1e15":function(e,t,o){var n=o("63d4");"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var a=o("85cb").default;a("238e7cb2",n,!0,{sourceMap:!1,shadowMode:!1})},"63d4":function(e,t,o){t=e.exports=o("690e")(!1),t.push([e.i,".gcxt[data-v-f7b10844] :export{colorPrimary:#0268b3;headerBackgroundColor:#fff;headerTextColor:#333}.gcxt .icon-_lianxikefu[data-v-f7b10844]{-webkit-transform:rotate(-90deg);transform:rotate(-90deg)}.gcxt .personInfo-field[data-v-f7b10844]{background-color:#fff;position:relative;height:60px;line-height:60px;font-size:16px}.gcxt .personInfo-header[data-v-f7b10844]{padding-left:71px;margin-bottom:16px}.gcxt .personInfo-header .header[data-v-f7b10844]{display:block;position:absolute;width:40px;height:40px;left:16px;top:10px}.gcxt .personInfo-header .position[data-v-f7b10844]{color:#999}.gcxt .personInfo-tel[data-v-f7b10844]{padding-left:16px;margin-bottom:31px}.gcxt .personInfo-tel .phone[data-v-f7b10844]{float:right;padding:0 41px;color:#000}.gcxt .personInfo-tel .iconfont[data-v-f7b10844]{position:absolute;right:15px;top:0;color:#0268b3;font-size:18px}.gcxt .personInfo-tool[data-v-f7b10844]{margin:0 15px}.gcxt .personInfo-tool button[data-v-f7b10844]{display:block;height:50px;width:100%;-webkit-box-shadow:0 3px 8px 0 rgba(43,133,255,.48);box-shadow:0 3px 8px 0 rgba(43,133,255,.48);border-radius:3px;color:#fff;font-size:16px;outline:none;border:none}",""])},"8b7b":function(e,t,o){"use strict";o.d(t,"d",(function(){return O})),o.d(t,"a",(function(){return h})),o.d(t,"b",(function(){return m})),o.d(t,"c",(function(){return x}));o("a450"),o("0c84"),o("1bc7");var n=o("a740"),a=o("4360"),r=o("21aa"),i=o("a18c"),s=o("ddf0"),c=o("34ae"),l=o("d9d2"),u=function(){var e="";return function(){if(e)return e;var t=location.protocol+location.host+location.pathname;return e=t.substring(0,t.lastIndexOf("/")+1),e}}(),f=u()+"static/images/IM/back.png",d=u()+"static/images/IM/info.png",p=u()+"static/images/IM/groupInfo.png",g=u()+"static/images/IM/tel.png",h="GROUP",m="PRIVATE",b=[],I={},_={};function v(){return new Promise((function(e,t){window.RongCloudLibPlugin?window.RongCloudLibPlugin.getConversationList((function(t,o){t&&"success"===t.status&&(console.log("会话列表",t),e(t.result))})):e([])}))}function x(){return new Promise((function(e,t){v().then(P).then(U).then((function(){e(b)}))}))}function w(e){if(!e)return null;var t=_,o=b;return e.forEach((function(e){t[e.group_id]=e.group_name})),o.forEach((function(e,o){if(e.conversationType===h){var n=t[e.targetId];n&&(b[o].group_name=n)}})),e}function C(e){if(!e)return null;var t=I,o=b;return e.forEach((function(e){t[e.user_id]=e})),o.forEach((function(e,o){if(e.conversationType===m){var n=t[e.targetId];n&&(b[o].targetInfo=n)}})),e}function P(e,t){var o=I,n=_,a=[],r=[];return e.forEach((function(e){e.conversationType===m?o[e.targetId]?e.targetInfo=o[e.targetId]:a.push(e.targetId):e.conversationType===h&&(!o[e.senderUserId]&&a.indexOf(e.senderUserId)<0&&!isNaN(e.senderUserId)&&""!==e.senderUserId&&a.push(e.senderUserId),n[e.targetId]?e.group_name=n[e.targetId]:r.push(e.targetId))})),b=e,a.length||r.length?Promise.all([y(a),k(r)]):null}function y(e){return e&&e.length?new Promise((function(t,o){Object(s["b"])({user_ids:JSON.stringify(e)}).then((function(e){t(e.data)}))})):Promise.resolve()}function k(e){return e&&e.length?new Promise((function(t,o){Object(s["a"])({group_ids:e.join(",")}).then((function(e){t(e.data)}))})):Promise.resolve()}function U(e){if(e){var t=e[0],o=e[1];C(t),w(o)}}function O(e,t,o){if(window.MRongCloudCaigou){o=void 0===o?0:o;var s=Object(n["d"])(),u={userId:s.user_id,name:Object(n["a"])("xt_user_name"),portraitUri:s.photo},h={userId:e.user_id,name:e.name,portraitUri:e.photo},m={onOpenIMSuccess:function(){console.log("开启聊天")},onOpenIMError:function(){console.error(arguments),l["b"].toast("打开聊天失败"),c["a"].__im_user=void 0},onGoBack:function(){c["a"].__im_user=void 0,a["a"].commit(r["c"],null),i["a"].push("/home/message")},onClickBusInfo:function(e){console.log("点击businfo区域"),console.log(arguments)},onClickPortrait:function(e){console.log(e),console.log("点击了聊天用户头像"),c["a"].__im_user=void 0},onClickRightIcon:function(){}},b={isShowRightBtn:!0,conversationType:o,navBar:{leftIconPath:f,rightIconPath:p,barColor:"#3492e9",barTitleColor:"#ffffff"},closeOpenAnimation:!0,closeBackAnimation:!0};o||(b.navBar.rightIconPath=d,b.navBar.rightSubIconPath=g,b.navBar.rightSubParam={type:1,value:e.user_code}),b.busInfo=t,console.log(b,"----im");try{window.MRongCloudCaigou.openIm(u,h,m,b)}catch(I){console.log(I),c["a"].__im_user=void 0}}else console.warn("打开会话框失败，MRongCloudCaigou插件不存在，请检测打包配置。")}},"8c3a":function(e,t,o){e.exports=o.p+"img/defaultHeader.081b481c.png"},f9f6:function(e,t,o){"use strict";o("1e15")}}]);