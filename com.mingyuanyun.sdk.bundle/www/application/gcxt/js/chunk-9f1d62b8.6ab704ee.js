(window["webpackJsonp_module_entry_gcxt_"]=window["webpackJsonp_module_entry_gcxt_"]||[]).push([["chunk-9f1d62b8"],{"15dc":function(t,e,a){e=t.exports=a("690e")(!1),e.push([t.i,".gcxt .card-header-wrapper[data-v-5b4079f1]{position:relative;z-index:1}.gcxt .card-header[data-v-5b4079f1]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;background-color:#fff;word-break:break-all}.gcxt .i-gongcheng[data-v-5b4079f1]{margin-right:6px;font-size:36px;color:#3492e9;line-height:1}.gcxt .cont-title[data-v-5b4079f1]{-webkit-box-flex:1;-ms-flex-positive:1;flex-grow:1;text-align:left;color:#333;font-size:18px}.gcxt .overtime-tip[data-v-5b4079f1]{font-size:20px;margin-right:6px}.gcxt .overtime-tip.overtime-warn[data-v-5b4079f1]{color:#faa304}.gcxt .overtime-tip.overtime-over[data-v-5b4079f1]{color:#ff3b30}.gcxt .signature[data-v-5b4079f1]{position:absolute;right:10px;top:16px}",""])},"18c5":function(t,e,a){t.exports=a.p+"img/auth_sp_2.022bb3b1.png"},3192:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"biz-table-groups"},t._l(t.bizTablesConfig,(function(e,n){return a("biz-table",{key:n,staticClass:"biz-table",attrs:{label:e.label,loading:e.loading,finished:e.isEnd,list:t.bizTableDatas[n],count:e.count},on:{onload:function(e){t.getBizTableData(n)}}})})))},i=[],r=(a("5ab2"),a("e10e"),a("cc57"),a("28f8")),s=(a("6d57"),a("6a61"),a("2e91")),o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"biz-table"},[a("van-cell",{staticClass:"cell",attrs:{value:t.label+"("+t.count+")","is-link":""},on:{click:t.open}},[a("template",{slot:"right-icon"},[a("span",{staticClass:"cell-right-text"},[t._v("详情")]),a("i",{staticClass:"icon_right-arrow iconfont icon-1_you"})])],2),a("popup-page",{directives:[{name:"phy-back",rawName:"v-phy-back",value:{status:t.show,method:"close"},expression:"{status: show, method: 'close'}"}],attrs:{value:t.show}},[a("v-header",{attrs:{slot:"header",title:t.label+"详情","back-action":t.close},slot:"header"}),a("van-list",{staticClass:"sheet-list-wrapper",attrs:{value:t.loading,finished:t.finished,"finished-text":"没有更多了"},on:{load:t.onLoad}},[a("van-collapse",{staticClass:"sheet-list",model:{value:t.openingSheet,callback:function(e){t.openingSheet=e},expression:"openingSheet"}},[t._l(t.list,(function(e,n){return[a("van-collapse-item",{key:n,attrs:{title:"单据"+(n+1),name:n}},t._l(e,(function(e,n){return a("div",{key:n,staticClass:"sheet"},[a("div",{staticClass:"sheet-item"},[a("div",{staticClass:"label"},[t._v(t._s(e.label))]),a("div",{staticClass:"value",domProps:{innerHTML:t.xss(t._s(e.value))}})])])})))]}))],2)],1)],1)],1)},c=[],l=(a("163d"),{name:"BizTable",props:{label:{type:String,default:""},loading:{type:Boolean,default:!1},finished:{type:Boolean,default:!1},count:{type:Number,default:0},list:{type:Array,default:function(){return[]}}},data:function(){return{show:!1,openingSheet:[0]}},watch:{list:{handler:function(t){this.openingSheet=t.map((function(t,e){return e}))},immediate:!0}},methods:{open:function(){this.show=!0},close:function(){this.show=!1},onLoad:function(){this.$emit("onload")}}}),u=l,d=(a("641b"),a("c701")),p=Object(d["a"])(u,o,c,!1,null,"28294225",null),f=p.exports,b=a("82f8"),h=a("f121"),g=a("bc32"),m=a("ab3e"),v=a("da71");function _(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function y(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?_(Object(a),!0).forEach((function(e){Object(r["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):_(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var x=function(t){return Object(m["a"])({url:v["a"].get_monthly_statement_statement_item_list,data:y({showLoading:!0},t)})},w=a("5fe8"),z=a("a075");function k(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function O(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?k(Object(a),!0).forEach((function(e){Object(r["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):k(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var T=10,j={name:"BizTableGroups",components:{BizTable:f},props:{bizId:{type:String,required:!0},layoutId:{type:String,required:!0}},data:function(){return{bizTablesConfig:[],bizTableDatas:[]}},mounted:function(){this.init()},methods:{init:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",this.getBizTableLayout());case 1:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),getBizTableLayout:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(){var e,a,n,i,r=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(b["n"])({codes:[this.layoutId]});case 2:e=t.sent,a=Object(g["a"])(e.data[0].layout,{}),n=a.groups,i=void 0===n?[]:n,this.bizTablesConfig=i.map((function(t){var e=t.biz_type,a=t.change_type,n=void 0===a?"":a,i=t.group_name,r=t.list,s=void 0===r?[]:r,o=s.map((function(t){return t.key})),c={biz_type:e,change_type:n,layout_fields:o};return{query:c,page_index:0,isEnd:!1,loading:!1,count:0,label:i,fieldHeads:s}})),this.bizTableDatas=this.bizTablesConfig.map((function(t){return[]})),this.bizTablesConfig.forEach((function(t,e){r.getBizTableData(e)}));case 7:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),getBizTableData:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(e){var a,n,i,r,s,o,c,l,u=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a=this.bizTablesConfig[e],!a.isEnd&&!a.loading){t.next=3;break}return t.abrupt("return");case 3:return a.page_index++,n=a.query,i=a.page_index,r=a.fieldHeads,a.loading=!0,t.next=8,x(O(O({biz_id:this.bizId},n),{},{page_index:i,page_size:T,showLoading:!0}));case 8:s=t.sent,a.loading=!1,o=s.data,c=s.record_count,l=void 0===c?0:c,a.count=l,this.transfromField(o,r).forEach((function(t){u.bizTableDatas[e].push(t)})),a.isEnd=i*T>=l;case 14:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),transfromField:function(t,e){var a=this;return t.map((function(t){return e.map((function(e){var n=e.key,i=e.name,r=t[n]||"--";return"check_status"===n?r='<span class="'.concat(a.renderColor(t),'">').concat(a.renderStatus(t)).concat(a.renderStatusUser(t),"</span>"):"fq_date"===n&&(r=a.renderTime(r)),{label:i,value:r}}))}))},renderStatus:function(t){var e=Object(h["g"])(),a=t.check_status;return a===h["m"].refuse||a===h["m"]._refuse||("已终止"===t.erp_check_status||"已作废"===t.erp_check_status||"未审核"===t.erp_check_status&&"未审核"===t.gcxt_status)&&t.check_status===h["m"].authorized?e[4]:e[a]},renderStatusUser:function(t){return"1"===t.check_status&&t.sp_user_name?" - "+t.sp_user_name:""},renderColor:function(t){if(t.check_status===h["m"].refuse||t.check_status===h["m"]._refuse||t.check_status===h["m"].cancel||("已终止"===t.erp_check_status||"已作废"===t.erp_check_status||"未审核"===t.erp_check_status&&"未审核"===t.gcxt_status)&&t.check_status==h["m"].authorized)return"color-danger";if(this.bizType===w["a"].MONTHLY_STATEMENT&&t.check_status===h["m"].draft)return"color-warning";switch(t.check_status){case h["m"].draft:return"color-draft";case h["m"].overview:case h["m"].confirm:return"color-warning";case h["m"].authorized:return"color-warning";case h["m"].approval:return"color-success";default:return"color-draft"}},renderTime:function(t){return z["a"].date.beautify(t)}}},C=j,S=(a("6037"),Object(d["a"])(C,n,i,!1,null,"3caf625f",null));e["a"]=S.exports},"4ffc":function(t,e,a){"use strict";a("7782")},6037:function(t,e,a){"use strict";a("df3d")},"641b":function(t,e,a){"use strict";a("7564")},6607:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("business-edit-view",{attrs:{data:t.data,config:t.config,"biz-type":t.bizType,"change-type":t.changeType,mode:t.mode,comps:t.comps,"page-title":"月度对账详情"}},[t.data?a("card-header",{attrs:{slot:"CardHeader",title:t.data.detail.biz_title},slot:"CardHeader"}):t._e(),a("biz-table-groups",{staticClass:"component-wrapper",attrs:{slot:"BizTableGroups","layout-id":t.bizTableGroupsLayoutId,"biz-id":t.sheetId},slot:"BizTableGroups"})],1)},i=[],r=a("a262"),s=a("3192"),o=a("b50c"),c=a("225c"),l=a("db68"),u=a("3ec3"),d={name:"MonthlyStatementEdit",components:{CardHeader:o["a"],BusinessEditView:r["a"],BizTableGroups:s["a"]},data:function(){return{bizType:l["b"].store.getValueByKey("biz_type"),changeType:l["b"].store.getValueByKey("change_type")||"",data:null,comps:["CardHeader","FormComp","BizTableGroups","Attachment","SelectPeople","UserSelector"],bizTableGroupsLayoutId:"monthly_statement_biz_table"}},computed:{sheetId:function(){return this.$route.query.id},mode:function(){return this.sheetId?"edit":"add"},config:function(){return u["a"][this.bizType]},isAandoned:function(){return("4"===this.data.detail.check_status||"5"===this.data.detail.check_status||("已终止"===this.data.detail.erp_check_status||"已作废"===this.data.detail.erp_check_status)&&"2"===this.data.detail.check_status)&&this.data.detail.sp_action.length<2}},watch:{sheetId:function(){this.init()}},mounted:function(){this.init()},methods:{init:function(){var t=this;c["a"].init({bizType:this.bizType,changeType:this.changeType,sheetId:this.sheetId,params:JSON.parse(this.$route.query.params||"null"),config:this.config}).then((function(e){var a=e;t.data=a})).catch((function(t){console.error(t)}))}}},p=d,f=(a("4ffc"),a("c701")),b=Object(f["a"])(p,n,i,!1,null,"70ebbd08",null);e["default"]=b.exports},7564:function(t,e,a){var n=a("8f6e");"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var i=a("85cb").default;i("98d59a30",n,!0,{sourceMap:!1,shadowMode:!1})},7782:function(t,e,a){var n=a("d1f9");"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var i=a("85cb").default;i("7a519bf7",n,!0,{sourceMap:!1,shadowMode:!1})},"8f6e":function(t,e,a){e=t.exports=a("690e")(!1),e.push([t.i,".gcxt .cell-right-text[data-v-28294225]{margin-right:5px;font-size:14;color:#9b9b9b}.gcxt .icon_right-arrow[data-v-28294225]{font-size:14px;color:#999}.gcxt .sheet-list-wrapper[data-v-28294225]{background-color:transparent}.gcxt .sheet-item[data-v-28294225]{display:-webkit-box;display:-ms-flexbox;display:flex}.gcxt .sheet-item .label[data-v-28294225]{width:103px;-webkit-box-flex:0;-ms-flex:0 0 auto;flex:0 0 auto;padding:8px 5px 8px 15px;font-size:14px;color:#999}.gcxt .sheet-item .value[data-v-28294225]{padding:8px 15px 8px 10px;font-size:14px;color:#000}[data-v-28294225] .van-collapse-item__title{margin-top:10px;background:transparent;padding:6px 15px}[data-v-28294225] .van-collapse-item__title:after{display:none}[data-v-28294225] .van-cell__title{font-size:13px;color:#666}[data-v-28294225] .van-hairline--top,[data-v-28294225] .van-hairline--top-bottom{border:none}[data-v-28294225] .van-hairline--top-bottom:after,[data-v-28294225] .van-hairline--top:after{display:none}[data-v-28294225] .van-collapse-item:not(:last-child){margin-bottom:10px}[data-v-28294225] .van-collapse-item__content{padding:6px 0 6px}[data-v-28294225] .van-collapse-item--border:after{display:none}",""])},a687:function(t,e,a){t.exports=a.p+"img/invalid.5957e4a0.png"},b12b:function(t,e,a){e=t.exports=a("690e")(!1),e.push([t.i,".gcxt .biz-table[data-v-3caf625f]{margin-bottom:10px}",""])},b50c:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"card-header-wrapper"},[n("div",{staticClass:"card-header"},[n("div",{staticClass:"cont-title",domProps:{innerHTML:t.xss(t._s(t.handleText(t.title)))}})]),"6"===t.checkStatus||"1"===t.erpInvaildDisplay?n("div",{staticClass:"signature"},[n("img",{attrs:{width:"74",height:"74",src:a("a687")}})]):t._e(),"3"===t.checkStatus?n("div",{staticClass:"signature"},[t.store.bizType===t.BizKeys.TC_TASK_REPORT?n("img",{attrs:{width:"74",height:"74",src:a("f1ac")}}):n("img",{attrs:{width:"84",height:"74",src:a("e645")}})]):t._e(),t.isAbandoned?n("div",{staticClass:"signature"},[n("img",{attrs:{width:"84",height:"74",src:a("18c5")}})]):t._e()])},i=[],r=a("b893"),s=a("a783"),o=a("5fe8"),c={name:"DetailHeaderLabel",props:{title:{type:String,default:""},warningStatus:{type:String,default:""},checkStatus:{type:String,default:""},erpInvaildDisplay:{type:String,default:""},isAbandoned:{type:Boolean,default:!1}},data:function(){return{store:s["a"],BizKeys:o["a"]}},methods:{handleText:r["f"]}},l=c,u=(a("c49c"),a("c701")),d=Object(u["a"])(l,n,i,!1,null,"5b4079f1",null);e["a"]=d.exports},bb9d:function(t,e,a){var n=a("15dc");"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var i=a("85cb").default;i("3410a2bd",n,!0,{sourceMap:!1,shadowMode:!1})},c49c:function(t,e,a){"use strict";a("bb9d")},d1f9:function(t,e,a){e=t.exports=a("690e")(!1),e.push([t.i,".gcxt .component-wrapper[data-v-70ebbd08]{margin-bottom:10px}",""])},df3d:function(t,e,a){var n=a("b12b");"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var i=a("85cb").default;i("1a1c7f1c",n,!0,{sourceMap:!1,shadowMode:!1})},e645:function(t,e,a){t.exports=a.p+"img/auth_sp_1.17007aa7.png"},f1ac:function(t,e,a){t.exports=a.p+"img/auth_sp_3.a3379606.png"}}]);